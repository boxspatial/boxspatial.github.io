(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const p of a)if(p.type==="childList")for(const y of p.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&r(y)}).observe(document,{childList:!0,subtree:!0});function i(a){const p={};return a.integrity&&(p.integrity=a.integrity),a.referrerPolicy&&(p.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?p.credentials="include":a.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function r(a){if(a.ep)return;a.ep=!0;const p=i(a);fetch(a.href,p)}})();function v(t,e,i,r){var a,p=arguments.length,y=p<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,e,i,r);else for(var m=t.length-1;m>=0;m--)(a=t[m])&&(y=(p<3?a(y):p>3?a(e,i,y):a(e,i))||y);return p>3&&y&&Object.defineProperty(e,i,y),y}function v1e(t,e,i,r){function a(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function m(M){try{x(r.next(M))}catch(A){y(A)}}function _(M){try{x(r.throw(M))}catch(A){y(A)}}function x(M){M.done?p(M.value):a(M.value).then(m,_)}x((r=r.apply(t,e||[])).next())})}const pF="modulepreload",dF=function(t){return"/map/v1/"+t},Yx={},we=function(e,i,r){if(!i||i.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(i.map(p=>{if(p=dF(p),p in Yx)return;Yx[p]=!0;const y=p.endsWith(".css"),m=y?'[rel="stylesheet"]':"";if(!!r)for(let M=a.length-1;M>=0;M--){const A=a[M];if(A.href===p&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${m}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":pF,y||(x.as="script",x.crossOrigin=""),x.href=p,document.head.appendChild(x),y)return new Promise((M,A)=>{x.addEventListener("load",M),x.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})})).then(()=>e())};function fF(t){return t&&t.release&&typeof t.release=="function"}function yF(t){return t&&t.acquire&&typeof t.acquire=="function"}let Cu=class d3{constructor(e,i,r,a=1,p=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=a,this._pool=new Array(p),this._initialSize=p,this._ctor)for(let y=0;y<p;y++)this._pool[y]=new this._ctor;this.allocationSize=Math.max(a,1)}destroy(){this.prune(0)}acquire(...e){let i;if(d3.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let a=0;a<r;a++)this._pool[a]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):yF(i)&&i.acquire(...e),i}release(e){e&&!d3.test.disabled&&(this._releaseFunction?this._releaseFunction(e):fF(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};Cu.test={disabled:!1};function mF(t){t.length=0}let Ur=class{constructor(e=50,i=50){this._pool=new Cu(Array,void 0,mF,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Eb.acquire()}static release(e){return Eb.release(e)}static prune(){Eb.prune()}};const Eb=new Ur(100);function w1e(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function gF(t,e){for(const i of t)if(i!=null&&e(i))return i}function Rg(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function Kh(t,e){return t!=null?e(t):null}function is(t,e){return n2(t,e),t}function n2(t,e){if(t==null)throw new Error(e??"value is None")}function Wt(t){return t==null||t.destroy(),null}function _1e(t){return t==null||t.dispose(),null}function fi(t){return t==null||t.remove(),null}function lc(t){return t==null||t.abort(),null}function S1e(t){return t==null||t.release(),null}function vF(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function bF(t){return null}function x1e(t,e){const i=new Array;for(const r of t)i.push(r!=null?e(r):null);return i}function $1e(t,e){for(const i of t)Kh(i,e)}function T1e(t){return t}let Ho=class f3{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Rg(e)){const r=this._getOrCreateGroup(i);for(const a of e)this._isHandle(a)&&r.push(a)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Rg(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof f3)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof f3?i.removeAll():i.remove()}};const MM=Symbol("Accessor-beforeDestroy");function o2(t){return jo(()=>t.forEach(e=>e!=null&&e.remove()))}function jo(t){return{remove:()=>{t&&(t(),t=void 0)}}}let Ab=class th{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*th._m}getInt(){return this._seed=(th._a*this._seed+th._c)%th._m,this._seed}getFloat(){return this.getInt()/(th._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/th._m*r}};Ab._m=2147483647,Ab._a=48271,Ab._c=0;const I1e=1.5;function M1e(t,e){return e?t.filter((i,r,a)=>a.findIndex(e.bind(null,i))===r):t.filter((i,r,a)=>a.indexOf(i)===r)}function a2(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function E1e(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let r=0;r<e.length;++r)t[r]!==e[r]&&(t[r]=e[r],i=!0);return i}function A1e(t,e,i){let r,a;return i?(r=e.filter(p=>!t.some(y=>i(y,p))),a=t.filter(p=>!e.some(y=>i(y,p)))):(r=e.filter(p=>!t.includes(p)),a=t.filter(p=>!e.includes(p))),{added:r,removed:a}}function k1e(t){return t&&typeof t.length=="number"}const wF=!!Array.prototype.fill;function _F(t,e){if(wF)return new Array(t).fill(e);const i=new Array(t);for(let r=0;r<t;r++)i[r]=e;return i}function O1e(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let r=t;r<e;r++)i[r-t]=r;return i}let EM=class{constructor(){this.last=0}};const AM=new EM;function y3(t,e,i,r){r=r||AM;const a=Math.max(0,r.last-10);for(let y=a;y<i;++y)if(t[y]===e)return r.last=y,y;const p=Math.min(a,i);for(let y=0;y<p;++y)if(t[y]===e)return r.last=y,y;return-1}function SF(t,e,i,r){const a=i??t.length,p=y3(t,e,a,r);if(p!==-1)return t[p]=t[a-1],i==null&&t.pop(),e}const dn=new Set;function xF(t,e,i=t.length,r=e.length,a,p){if(r===0||i===0)return i;dn.clear();for(let m=0;m<r;++m)dn.add(e[m]);a=a||AM;const y=Math.max(0,a.last-10);for(let m=y;m<i;++m)if(dn.has(t[m])&&(p&&p.push(t[m]),dn.delete(t[m]),t[m]=t[i-1],--i,--m,dn.size===0||i===0))return dn.clear(),i;for(let m=0;m<y;++m)if(dn.has(t[m])&&(p&&p.push(t[m]),dn.delete(t[m]),t[m]=t[i-1],--i,--m,dn.size===0||i===0))return dn.clear(),i;return dn.clear(),i}function $F(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Po(t,e){return t!=null}let nu;function le(t){return typeof nu[t]=="function"?nu[t]=nu[t](globalThis):nu[t]}var bM,wM,_M,SM;nu=(bM=globalThis.dojoConfig)!=null&&bM.has||(wM=globalThis.esriConfig)!=null&&wM.has?{...(_M=globalThis.dojoConfig)==null?void 0:_M.has,...(SM=globalThis.esriConfig)==null?void 0:SM.has}:{},le.add=(t,e,i,r)=>((r||nu[t]===void 0)&&(nu[t]=e),i&&le(t)),le.cache=nu,le.add("esri-deprecation-warnings",!0),le.add("esri-force-fullscreen-debug",!1),(()=>{var e;le.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(le.add("host-browser",t),le.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),le.add("dom",t),le("host-browser")){const i=navigator,r=i.userAgent,a=i.appVersion,p=parseFloat(a);if(le.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),le.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),le.add("khtml",a.includes("Konqueror")?p:void 0),le.add("edge",parseFloat(r.split("Edge/")[1])||void 0),le.add("opr",parseFloat(r.split("OPR/")[1])||void 0),le.add("webkit",!le("wp")&&!le("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),le.add("chrome",!le("edge")&&!le("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),le.add("android",!le("wp")&&parseFloat(r.split("Android ")[1])||void 0),le.add("safari",!a.includes("Safari")||le("wp")||le("chrome")||le("android")||le("edge")||le("opr")?void 0:parseFloat(a.split("Version/")[1])),le.add("mac",a.includes("Macintosh")),!le("wp")&&/(iPhone|iPod|iPad)/.test(r)){const y=RegExp.$1.replace(/P/,"p"),m=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",_=parseFloat(m.replace(/_/,".").replaceAll("_",""));le.add(y,_),le.add("ios",_)}le("webkit")||(!r.includes("Gecko")||le("wp")||le("khtml")||le("edge")||le.add("mozilla",p),le("mozilla")&&le.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&le.add("esri-mobile",e),i&&le.add("esri-iPhone",i),le.add("esri-geolocation",!!navigator.geolocation)}le.add("esri-wasm","WebAssembly"in globalThis),le.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),le.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),le.add("esri-atomics","Atomics"in globalThis),le.add("esri-workers","Worker"in globalThis),le.add("web-feat:cache","caches"in globalThis),le.add("esri-workers-arraybuffer-transfer",!le("safari")||Number(le("safari"))>=12),le.add("workers-pool-size",8),le.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),le.add("featurelayer-simplify-payload-size-factors",[1,1,4]),le.add("featurelayer-animation-enabled",!0),le.add("featurelayer-snapshot-enabled",!0),le.add("featurelayer-snapshot-point-min-threshold",8e4),le.add("featurelayer-snapshot-point-max-threshold",4e5),le.add("featurelayer-snapshot-point-coverage",.1),le.add("featurelayer-advanced-symbols",!1),le.add("featurelayer-pbf",!0),le.add("featurelayer-pbf-statistics",!1),le.add("feature-layers-workers",!0),le.add("feature-polyline-generalization-factor",1),le.add("mapview-transitions-duration",200),le.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),le.add("mapserver-pbf-version-support",10.81),le.add("mapservice-popup-identify-max-tolerance",20),le.add("heatmap-allow-raster-fallback",!1),le.add("heatmap-force-raster",!1),le("host-webworker")||le("host-browser")&&(le.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),le.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{le.add("esri-image-decode",!0,!0,!0)}).catch(()=>{le.add("esri-image-decode",!1,!0,!0)})}return!1}),le.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function P1e(t){return t instanceof ArrayBuffer}function X4(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function kM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function OM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function Q4(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function CM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function eS(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function PM(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function l2(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function u2(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function TF(t){return!("buffer"in t)}function IF(t){return t!=null?TF(t)?8*t.length+12:t.byteLength+MF:0}const MF=145,EF=1024;function N1e(t){return u2(t)||l2(t)||eS(t)||Q4(t)||X4(t)}function R1e(t){return u2(t)||l2(t)}function L1e(t){return u2(t)?179769e303:l2(t)?3402823e32:PM(t)?4294967295:CM(t)?65535:kM(t)||OM(t)?255:eS(t)?2147483647:Q4(t)?32767:X4(t)?127:256}function NM(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&NM(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function se(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=jM(t);if(e!=null)return e;if(Lg(t))return t.clone();if(RM(t))return t.map(se);if(LM(t))return t.clone();const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=se(t[r]);return i}function m3(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=jM(t);if(e!=null)return e;if(RM(t)){let i=!0;const r=t.map(a=>{const p=m3(a);return a!=null&&p==null&&(i=!1),p});return i?r:null}if(Lg(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!LM(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const r of Object.getOwnPropertyNames(t)){const a=t[r],p=m3(a);if(a!=null&&p==null)return null;i[r]=p}return i}return null}function Lg(t){return typeof t.clone=="function"}function RM(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function LM(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function Zx(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function jM(t){if(X4(t)||kM(t)||OM(t)||Q4(t)||CM(t)||eS(t)||PM(t)||l2(t)||u2(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,se(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(se(i));return e}return null}function tS(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function DM(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&a2(t,e):t instanceof Set?e instanceof Set&&kF(t,e):t instanceof Map?e instanceof Map&&OF(t,e):!!Zx(t)&&Zx(e)&&AF(t,e))}function AF(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function kF(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function OF(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const a=e.get(i);if(a!==r||a===void 0&&!e.has(i))return!1}return!0}function Yi(t){return t.__accessor__??null}function CF(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function vm(t,e,i){return i?jg(t,e,{policy:i,path:""}):jg(t,e,null)}function jg(t,e,i){return e?Object.keys(e).reduce((r,a)=>{const p=a;let y=null,m="merge";if(i&&(y=i.path?`${i.path}.${a}`:a,m=i.policy(y)),m==="replace"||m==="replace-arrays"&&Array.isArray(r[p]))return r[p]=e[p],r;if(r[p]===void 0)return r[p]=se(e[p]),r;let _=r[p],x=e[p];if(_===x)return r;if(Array.isArray(x)||Array.isArray(r))_=_?Array.isArray(_)?r[p]=_.concat():r[p]=[_]:r[p]=[],x&&(Array.isArray(x)||(x=[x]),x.forEach(M=>{_.includes(M)||_.push(M)}));else if(x&&typeof x=="object")if(i){const M=i.path;i.path=y,r[p]=jg(_,x,i),i.path=M}else r[p]=jg(_,x,null);else r.hasOwnProperty(a)&&!e.hasOwnProperty(a)||(r[p]=x);return r},t||{}):t}function FM(t){return Array.isArray(t)?t:t.split(".")}function Xx(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function PF(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...Xx(i));return e}return Xx(t)}function zM(t,e,i,r){const a=PF(e);if(a.length!==1){const p=a.map(y=>r(t,y,i));return o2(p)}return r(t,a[0],i)}function VM(t){let e=!1;return()=>{e||(e=!0,t())}}function GM(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const a=parseInt(i,10);if(!isNaN(a))return Array.isArray(e)?e[a]:e.at(a)}const r=Yi(e);return CF(r,i)?r.get(i):e[i]}function qM(t,e,i){if(t==null)return t;const r=GM(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:qM(r,e,i+1)}function w1(t,e,i=0){return typeof e!="string"||e.includes(".")?qM(t,FM(e),i):GM(e,t)}function Dg(t,e){return w1(t,e)}function Qx(t,e){return w1(e,t)!==void 0}function _1(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=se(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function h2(t,e){const i=_1(t);let r=i[e];return r||(r=i[e]={}),r}function NF(t,e){return vm(t,e,LF)}const RF=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function LF(t){return RF.test(t)?"replace":"merge"}function UM(t,e,i=!1){return HM(t,e,i)}function S1(t,e){if(e!=null)return e[t]||BM(t.split("."),!1,e)}function Pr(t,e,i){const r=t.split("."),a=r.pop(),p=BM(r,!0,i);p&&a&&(p[a]=e)}function BM(t,e,i){let r=i;for(const a of t){if(r==null)return;if(!(a in r)){if(!e)return;r[a]={}}r=r[a]}return r}function HM(t,e,i){return e?Object.keys(e).reduce((r,a)=>{let p=r[a],y=e[a];return p===y?r:p===void 0?(r[a]=se(y),r):(Array.isArray(y)||Array.isArray(r)?(p=p?Array.isArray(p)?r[a]=p.concat():r[a]=[p]:r[a]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(m=>{p.includes(m)||p.push(m)}):r[a]=y.concat())):y&&typeof y=="object"?r[a]=HM(p,y,i):r.hasOwnProperty(a)&&!e.hasOwnProperty(a)||(r[a]=y),r)},t||{}):t}var xM;const _t={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:(xM=globalThis.location)==null?void 0:xM.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(UM(_t,globalThis.esriConfig,!0),delete _t.has),!_t.assetsPath){{const t="4.27";_t.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}_t.defaultAssetsPath=_t.assetsPath}const jF=/\{([^\}]+)\}/g;function e7(t){return t??""}function c2(t,e){return t.replaceAll(jF,typeof e=="object"?(i,r)=>e7(S1(r,e)):(i,r)=>e7(e(r)))}function DF(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function iS(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function j1e(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function D1e(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const t7={info:0,warn:1,error:2,none:3};let me=class $r{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,$r._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=$r.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const i=$r._loggers;return $r._loggers=e,i},set throttlingDisabled(e){$r._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,$r._loggers.get(e)||new $r({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!$r._throttlingDisabled){const a=this._argsToKey(r),p=this._loggedMessages[e].get(a);if(i==="once"&&p!=null||i==="oncePerTick"&&p&&p>=$r._tickCounter)return;this._loggedMessages[e].set(a,$r._tickCounter),$r._scheduleTickCounterIncrement()}for(const a of _t.log.interceptors)if(a(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const a=r[e];if(a!=null)return a;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...r){console[e](`[${i}]`,...r)}_matchLevel(e){const i=_t.log.level||"warn";return t7[this._parentWithMember("level",i)]<=t7[e]}_argsToKey(...e){return iS(JSON.stringify(e,(r,a)=>typeof a!="object"||Array.isArray(a)?a:"[Object]"))}static _scheduleTickCounterIncrement(){$r._tickCounterScheduled||($r._tickCounterScheduled=!0,Promise.resolve().then(()=>{$r._tickCounter++,$r._tickCounterScheduled=!1}))}};me._loggers=new Map,me._tickCounter=0,me._tickCounterScheduled=!1,me._throttlingDisabled=!1;var Ra;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(Ra||(Ra={}));let FF=class{constructor(e,i){this._observers=e,this._observer=i}remove(){$F(this._observers,this._observer)}},WM=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return zF;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,a=!1;const p=i.length;for(let y=0;y<p;++y){const m=i[y];if(m.destroyed)a=!0;else if(m===e){r=!0;break}}return r||(i.push(e),a&&this._removeDestroyedObservers()),new FF(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let a=0;a<i;++a){for(;a+r<i&&e[a+r].destroyed;)++r;if(r>0){if(!(a+r<i))break;e[a]=e[a+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const zF=jo();var Me;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Me||(Me={}));const g3=Me.USER+1;function Br(t){switch(t){case"defaults":return Me.DEFAULTS;case"service":return Me.SERVICE;case"portal-item":return Me.PORTAL_ITEM;case"web-scene":return Me.WEB_SCENE;case"web-map":return Me.WEB_MAP;case"link-chart":return Me.LINK_CHART;case"user":return Me.USER;default:return null}}function Bf(t){switch(t){case Me.DEFAULTS:return"defaults";case Me.SERVICE:return"service";case Me.PORTAL_ITEM:return"portal-item";case Me.WEB_SCENE:return"web-scene";case Me.WEB_MAP:return"web-map";case Me.LINK_CHART:return"link-chart";case Me.USER:return"user"}return void 0}function VF(t){return Bf(t)}var Vt;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Vt||(Vt={}));const Fg={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},p0=[];let df=Fg;function Ze(t){df.onObservableAccessed(t)}let bm=!1,wm=!1;function qa(t,e,i){if(bm)return rS(t,e,i);JM(t);const r=e.call(i);return KM(),r}function GF(t,e){return qa(Fg,t,e)}function rS(t,e,i){const r=bm;bm=!0,JM(t);let a=null;try{a=e.call(i)}catch(p){wm&&me.getLogger("esri.core.accessorSupport.tracking").error(p)}return KM(),bm=r,a}function JM(t){df=t,p0.push(t)}function KM(){const t=p0.length;if(t>1){const e=p0.pop();df=p0[t-2],e.onTrackingEnd()}else if(t===1){const e=p0.pop();df=Fg,e.onTrackingEnd()}else df=Fg}function YM(t,e){const i=e.observerObject;if(i.flags&Vt.DepTrackingInitialized)return;const r=wm;wm=!1,i.flags&Vt.AutoTracked?rS(e,e.metadata.get,t):ZM(t,e),wm=r}const qF=[];function ZM(t,e){const i=e.observerObject;i.flags&Vt.ExplicitlyTracking||(i.flags|=Vt.ExplicitlyTracking,rS(e,()=>{const r=e.metadata.dependsOn||qF;for(const a of r)if(typeof a!="string"||a.includes(".")){const p=FM(a);for(let y=0,m=t;y<p.length&&m!=null&&typeof m=="object";++y)m=i7(m,p[y],y!==p.length-1)}else i7(t,a,!1)}),i.flags&=~Vt.ExplicitlyTracking)}function i7(t,e,i){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const p=parseInt(r,10);if(!isNaN(p))return Array.isArray(t)?t[p]:t.at(p)}const a=Yi(t);if(a){const p=a.propertiesByName.get(r);p&&(Ze(p.observerObject),YM(t,p))}return i?t[r]:void 0}let r7=class{constructor(e,i){this.propertyName=e,this.metadata=i,this.observerObject=new UF,this._accessed=null,this._handles=null,this.observerObject.flags=Vt.Dirty|(i.nonNullable?Vt.NonNullable:0)|(i.hasOwnProperty("value")?Vt.HasDefaultValue:0)|(i.get===void 0?Vt.DepTrackingInitialized:0)|(i.dependsOn===void 0?Vt.AutoTracked:0)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){const i=this.observerObject;Ze(i);const r=e.store,a=this.propertyName,p=i.flags,y=r.get(a);if(p&Vt.Computing||~p&Vt.Dirty&&r.has(a))return y;i.flags|=Vt.Computing;const m=e.host;let _;p&Vt.AutoTracked?_=qa(this,this.metadata.get,m):(ZM(m,this),_=this.metadata.get.call(m)),r.set(a,_,Me.COMPUTED);const x=r.get(a);return x===y?i.flags&=~Vt.Dirty:GF(this.commit,this),i.flags&=~Vt.Computing,x}onObservableAccessed(e){if(e===this.observerObject)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(e))return;i.push(e)}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=Vt.DepTrackingInitialized;const i=this._accessed;if(i==null||i.length===0)return;let r=this._handles;r==null&&(r=[],this._handles=r);for(let a=0;a<i.length;++a)r.push(i[a].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~Vt.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},UF=class extends WM{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Vt.Overriden&&(this.flags|=Vt.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&Vt.Dirty&&this.onCommitted(),super.destroy()}},BF=class XM{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new XM;return this._values.forEach((r,a)=>{e&&e.has(a)||i.set(a,se(r))}),i}get(e){return this._values.get(e)}originOf(){return Me.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function uy(t,e,i){return t!==void 0}function s7(t,e,i,r){return t!==void 0&&(!(i==null&&t.observerObject.flags&Vt.NonNullable)||(r.lifecycle,Ra.INITIALIZING,!1))}function HF(t){return t&&typeof t.destroy=="function"}me.getLogger("esri.core.accessorSupport.Properties");let WF=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Ra.INITIALIZING,this.store=new BF,this._origin=Me.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const a=new r7(r,i[r]);this.propertiesByName.set(r,a)}this.metadatas=i}initialize(){this.lifecycle=Ra.CONSTRUCTING}constructed(){this.lifecycle=Ra.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.propertiesByName){if(i.metadata.autoDestroy){const r=this.internalGet(e);r&&HF(r)&&(r.destroy(),~i.observerObject.flags&Vt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==Ra.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);Ze(i.observerObject);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.observerObject.flags&Vt.HasDefaultValue)return"defaults"}return Bf(i)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(uy(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);uy(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const a=this.propertiesByName.get(i);if(!uy(a))return"";const p=new Set,y=qa({onObservableAccessed:_=>p.add(_),onTrackingEnd:()=>{}},()=>{var _;return(_=a.metadata.get)==null?void 0:_.call(e)});let m=`${r}${e.declaredClass.split(".").pop()}.${i}: ${y}
`;if(p.size===0)return m;r+="  ";for(const _ of p)_ instanceof r7&&(m+=`${r}${_.propertyName}: undefined
`);return m}setAtOrigin(e,i,r){const a=this.propertiesByName.get(e);if(uy(a))return this._setAtOrigin(a,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.observerObject.flags&Vt.Overriden)}clearOverride(e){const i=this.propertiesByName.get(e),r=i==null?void 0:i.observerObject;r&&r.flags&Vt.Overriden&&(r.flags&=~Vt.Overriden,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!s7(r,e,i,this))return;const a=r.metadata.cast;if(a){const p=this._cast(a,i),{valid:y,value:m}=p;if(kb.release(p),!y)return;i=m}r.observerObject.flags|=Vt.Overriden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!s7(r,e,i,this))return;const a=r.metadata.cast;if(a){const y=this._cast(a,i),{valid:m,value:_}=y;if(kb.release(y),!m)return;i=_}const p=r.metadata.set;p?p.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=Br(e)}getDefaultOrigin(){return Bf(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==Ra.INITIALIZING?this._origin:Me.DEFAULTS;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const a=this.store,p=e.propertyName;a.has(p,r)&&tS(i,a.get(p))&&~e.observerObject.flags&Vt.Overriden&&r===a.originOf(p)||(e.invalidate(),a.set(p,i,r),e.commit(),YM(this.host,e))}_cast(e,i){const r=kb.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},JF=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const kb=new Cu(JF);function KF(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>r===""?"$":(S1(r,e)??"").toString())}let QM=class{constructor(e,i,r){this.name=e,this.details=r,this.message=(i&&KF(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},ie=class eE extends QM{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return se(i)}catch{return"[object]"}}))}}catch(e){throw me.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new eE(e.name,e.message,e.details)}};ie.prototype.type="error";function zg(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))zg(t,r,e[r]);else{if(e.includes(".")){const a=e.split("."),p=a.splice(a.length-1,1)[0];return void zg(Dg(t,a),p,i)}const r=t.__accessor__;r!=null&&YF(e,r),t[e]=i}}function YF(t,e){if(le("esri-unknown-property-errors")&&!ZF(t,e))throw new ie("set:unknown-property",XF(t,e))}function ZF(t,e){return e.metadatas[t]!=null}function XF(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let QF;function ez(){return QF}let tE=class extends Cu{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=bF(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const hy=[];function Vg(t){hy.push(t),hy.length===1&&queueMicrotask(()=>{const e=hy.slice();hy.length=0;for(const i of e)i()})}let ff=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var v3;(function(t){const e=(p,y,m,_)=>{let x=y,M=y;const A=m>>>1,C=p[x-1];for(;M<=A;){M=x<<1,M<m&&_(p[M-1],p[M])<0&&++M;const N=p[M-1];if(_(N,C)<=0)break;p[x-1]=N,x=M}p[x-1]=C},i=(p,y)=>p<y?-1:p>y?1:0;function r(p,y,m,_){y===void 0&&(y=0),m===void 0&&(m=p.length),_===void 0&&(_=i);for(let M=m>>>1;M>y;M--)e(p,M,m,_);const x=y+1;for(let M=m-1;M>y;M--){const A=p[y];p[y]=p[M],p[M]=A,e(p,x,M,_)}}function*a(p,y,m,_){y===void 0&&(y=0),m===void 0&&(m=p.length),_===void 0&&(_=i);for(let M=m>>>1;M>y;M--)e(p,M,m,_),yield;const x=y+1;for(let M=m-1;M>y;M--){const A=p[y];p[y]=p[M],p[M]=A,e(p,x,M,_),yield}}t.sort=r,t.iterableSort=a})(v3||(v3={}));const n7=v3,tz=1.5,iz=1.1;let gu=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new EM,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>o7(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const a=this.data[r];e(a)&&i.push(a)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,o7(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=y3(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(y3(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=xF(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){n7.sort(this.data,0,this.length,e)}iterableSort(e){return n7.iterableSort(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){for(let r=0;r<this.length;++r){const a=this.data[r];if(e.call(i,a,r))return a}}filterInPlace(e,i){let r=0;for(let a=0;a<this._length;++a){const p=this.data[a];e.call(i,p,a,this.data)&&(this.data[a]=this.data[r],this.data[r]=p,r++)}if(this._deallocator)for(let a=r;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);return this._length=r,this._shrink(),this}forAll(e,i){const r=this.length,a=this.data;for(let p=0;p<r;++p)e.call(i,a[p],p,a)}forEach(e,i){for(let r=0;r<this.length;++r)e.call(i,this.data[r],r,this.data)}map(e,i){const r=new Array(this.length);for(let a=0;a<this.length;++a)r[a]=e.call(i,this.data[a],a,this.data);return r}reduce(e,i){let r=i;for(let a=0;a<this.length;++a)r=e(r,this.data[a],a,this.data);return r}has(e){const i=this.length,r=this.data;for(let a=0;a<i;++a)if(r[a]===e)return!0;return!1}};function o7(t){t.data.length>tz*t.length&&(t.data.length=Math.floor(t.length*iz))}function rz(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(r)}}}}const bd=rz(globalThis);function p2(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function d2(t,e,i){if(!p2(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const r=e.slice();for(const a of r)t.addEventListener(a,i);return{remove(){for(const a of r)t.removeEventListener(a,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function iE(t,e,i){if(!p2(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=d2(t,e,a=>{r.remove(),i.call(t,a)});return{remove(){r.remove()}}}const sz={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function yf({key:t}){return sz[t]||t}function hi(t="Aborted"){return new ie("AbortError",t)}function Zt(t,e="Aborted"){if(tn(t))throw hi(e)}function f2(t){return t!=null?"aborted"in t?t:t.signal:t}function tn(t){const e=f2(t);return e!=null&&e.aborted}function Js(t){if(dr(t))throw t}function a7(t){if(!dr(t))throw t}function Ss(t,e){const i=f2(t);if(i!=null){if(!i.aborted)return iE(i,"abort",()=>e());e()}}function sS(t,e){const i=f2(t);if(i!=null)return Zt(i),iE(i,"abort",()=>e(hi()))}function aa(t,e){return f2(e)==null?t:new Promise((i,r)=>{let a=Ss(e,()=>r(hi()));const p=()=>a=fi(a);t.then(p,p),t.then(i,r)})}function dr(t){return(t==null?void 0:t.name)==="AbortError"}async function b3(t){try{return await t}catch(e){if(!dr(e))throw e;return}}async function qn(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(y=>t[y]),a=await qn(r),p={};return i.map((y,m)=>p[y]=a[m]),p}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,a)=>{const p=i[a];return p.status==="fulfilled"?{promise:r,value:p.value}:{promise:r,error:p.reason}}))}async function nz(t){return(await qn(t)).filter(e=>!!e.value).map(e=>e.value)}function nS(t,e=void 0,i){const r=new AbortController;return Ss(i,()=>r.abort()),new Promise((a,p)=>{let y=setTimeout(()=>{y=0,a(e)},t);Ss(r,()=>{y&&(clearTimeout(y),p(hi()))})})}function Ya(t){return t&&typeof t.then=="function"}function w3(t){return Ya(t)?t:Promise.resolve(t)}function rE(t,e=-1){let i,r,a,p,y=null;const m=(..._)=>{if(i){r=_,p&&p.reject(hi()),p=rn();const C=p.promise;if(y){const N=y;y=null,N.abort()}return C}if(a=p||rn(),p=null,e>0){const C=new AbortController;i=w3(t(..._,C.signal));const N=i;nS(e).then(()=>{i===N&&(p?C.abort():y=C)})}else i=1,i=w3(t(..._));const x=()=>{const C=r;r=a=i=y=null,C!=null&&m(...C)},M=i,A=a;return M.then(x,x),M.then(A.resolve,A.reject),A.promise};return m}function rn(){let t,e;const i=new Promise((a,p)=>{t=a,e=p}),r=a=>{t(a)};return r.resolve=a=>t(a),r.reject=a=>e(a),r.timeout=(a,p)=>bd.setTimeout(()=>r.reject(p),a),r.promise=i,r}async function Gg(t){await Promise.resolve(),Zt(t)}function K1e(t){return t}let oz=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},az=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},_3=0;const Gd={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},S3=["prepare","preRender","render","postRender","update","finish"],x3=[],uc=new gu;let lz=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const qg={frameTasks:uc,willDispatch:!1,clearFrameTasks:uz,dispatch:oE,executeFrameTasks:hz};function wd(t){const e=new az(t);return x3.push(e),qg.willDispatch||(qg.willDispatch=!0,Vg(oE)),e}function sd(t){const e=new oz(t);return uc.push(e),Ug==null&&(_3=performance.now(),Ug=requestAnimationFrame(sE)),new lz(e)}let Ug=null;function uz(t=!1){uc.forAll(e=>{e.removed=!0}),t&&nE()}function sE(){const t=performance.now();Ug=null,Ug=uc.length>0?requestAnimationFrame(sE):null,qg.executeFrameTasks(t)}function hz(t){const e=t-_3;_3=t;const i=1e3/60,r=Math.max(0,e-i);Gd.time=t,Gd.frameDuration=i-r;for(let a=0;a<S3.length;a++){const p=performance.now(),y=S3[a];uc.forAll(m=>{var _;m.paused||m.removed||(a===0&&m.ticks++,m.phases[y]&&(Gd.elapsedFrameTime=performance.now()-t,Gd.deltaTime=m.ticks===0?0:e,(_=m.phases[y])==null||_.call(m,Gd)))}),pz[a].record(performance.now()-p)}nE(),dz.record(performance.now()-t)}const cy=new gu;function nE(){uc.forAll(t=>{t.removed&&cy.push(t)}),uc.removeUnorderedMany(cy.data,cy.length),cy.clear()}function oE(){for(;x3.length;){const t=x3.shift();t.isActive&&t.callback()}qg.willDispatch=!1}function cz(t=1,e){const i=rn(),r=()=>{tn(e)?i.reject(hi()):t===0?i():(--t,Vg(()=>r()))};return r(),i.promise}const pz=S3.map(t=>new ff(t)),dz=new ff("total");function fz(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let yz=0;function mf(){return++yz}let y2=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new mz(e),l7.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;l7.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,r=this._observerObject;for(let a=0;a<i.length;++a)e.push(i[a].observe(r));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},mz=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=gz}};const l7=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function gz(){}let qp=!1;const Bg=[];function aE(t,e){let i=new y2(p),r=null,a=!1;function p(){if(!i||a)return;if(qp)return void hE(p);const m=r;i.clear(),qp=!0,a=!0,r=qa(i,t),a=!1,qp=!1,e(r,m),cE()}function y(){i&&(i.destroy(),i=null,r=null)}return a=!0,r=qa(i,t),a=!1,{remove:y}}function lE(t,e){let i=new y2(a),r=null;function a(){e(r,y)}function p(){i&&(i.destroy(),i=null),r=null}function y(){return i?(i.clear(),r=qa(i,t),r):null}return y(),{remove:p}}function uE(t){let e=new y2(r),i=!1;function r(){e&&!i&&(qp?hE(r):(e.clear(),qp=!0,i=!0,qa(e,t),i=!1,qp=!1,cE()))}function a(){e&&(e.destroy(),e=null)}return i=!0,qa(e,t),i=!1,{remove:a}}function hE(t){Bg.includes(t)||Bg.unshift(t)}function cE(){for(;Bg.length;)Bg.pop()()}var gf;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(gf||(gf={}));let Hf=class{constructor(){this.uid=mf(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,a,p){return this.pool.acquire(gf.Untracked,e,i,r,a,p,tS)}static acquireTracked(e,i,r,a){return this.pool.acquire(gf.Tracked,e,i,r,null,null,a)}notify(e,i){this.type===gf.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,a,p,y,m){this.uid=mf(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=a,this.target=p,this.path=y,this.equals=m}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=mf(),this.removed=!0}};Hf.pool=new tE(Hf);const _m=new Ur,Da=new Set;let Hg;function Wg(t){Da.delete(t),Da.add(t),Hg||(Hg=wd(wz))}function vz(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function bz(t){for(const e of Da.values())e.target===t&&(e.removed=!0)}function wz(){let t=10;for(;Hg&&t--;){Hg=null;const e=_z(),i=_m.acquire();for(const r of e){const a=r.uid;vz(r),a===r.uid&&r.removed&&i.push(r)}for(const r of Da)r.removed&&(i.push(r),Da.delete(r));for(const r of i)Hf.pool.release(r);_m.release(i),_m.release(e),$3.forEach(r=>r())}}function _z(){const t=_m.acquire();t.length=Da.size;let e=0;for(const i of Da)t[e]=i,++e;return Da.clear(),t}const $3=new Set;function Sz(t){return $3.add(t),{remove(){$3.delete(t)}}}function xz(t,e,i){let r=zM(t,e,i,(a,p,y)=>{let m,_,x=lE(()=>w1(a,p),(M,A)=>{a.__accessor__.destroyed||m&&m.uid!==_?r.remove():(m||(m=Hf.acquireUntracked(M,y,A,a,p),_=m.uid),Wg(m))});return{remove:VM(()=>{x.remove(),m&&(m.uid!==_||m.removed||(m.removed=!0,Wg(m)),m=null),r=x=null})}});return r}function $z(t,e,i){const r=zM(t,e,i,(a,p,y)=>{let m=!1;return aE(()=>w1(a,p),(_,x)=>{a.__accessor__.destroyed?r.remove():m||(m=!0,tS(x,_)||y.call(a,_,x,p,a),m=!1)})});return r}function Tz(t,e,i,r=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:r?$z(t,e,i):xz(t,e,i)}function Iz(t,e,i){let r,a,p=lE(t,(y,m)=>{r&&r.uid!==a?p.remove():(r||(r=Hf.acquireTracked(y,e,m,i),a=r.uid),Wg(r))});return{remove:VM(()=>{p.remove(),r&&(r.uid!==a||r.removed||(r.removed=!0,Wg(r)),r=null),p=null})}}function Mz(t,e,i){let r=!1;return aE(t,(a,p)=>{r||(r=!0,i(p,a)||e(a,p),r=!1)})}function Ez(t,e,i=!1,r=DM){return i?Mz(t,e,r):Iz(t,e,r)}function u7(t){return fz(Da,e=>e.oldValue===t)}function m2(t,e){for(const[i,r]of t)if(e(r,i))return!0;return!1}function pE(t,e,i){const r=t.get(e);if(r!==void 0)return r;const a=i();return t.set(e,a),a}const Up=me.getLogger("esri.core.accessorSupport.ensureTypes");function Az(t){return t==null?t:new Date(t)}function kz(t){return t==null?t:!!t}function x1(t){return t==null?t:t.toString()}function Ks(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function g2(t){return t==null?t:Math.round(parseFloat(t))}function dE(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function Jg(t,e){return e!=null&&t&&!(e instanceof t)}function fE(t){return t&&"isCollection"in t}function h7(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Oz(t,e){if(!e||!e.constructor||!fE(e.constructor))return T3(t,e)?e:new t(e);const i=h7(t.prototype.itemType),r=h7(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(T3(t,e),e):new t(e):e}function T3(t,e){return!!dE(e)&&(Up.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+v2(t)+"'"),!0)}function hc(t,e){return e==null?e:fE(t)?Oz(t,e):Jg(t,e)?T3(t,e)?e:new t(e):e}function v2(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const Cz=new WeakMap;function Pz(t){switch(t){case Number:return Ks;case jt:return g2;case Boolean:return kz;case String:return x1;case Date:return Az;default:return pE(Cz,t,()=>hc.bind(null,t))}}function ri(t,e){const i=Pz(t);return arguments.length===1?i:i(e)}function Wf(t,e,i){return arguments.length===1?Wf.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function Nz(t,e){return arguments.length===1?Wf(i=>ri(t,i)):Wf(i=>ri(t,i),e)}function yE(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>yE(t,e-1,r)):t(i)}function Kg(t,e,i){if(arguments.length===2)return p=>Kg(t,e,p);if(!i)return i;i=yE(t,e,i);let r=e,a=i;for(;r>0&&Array.isArray(a);)r--,a=a[0];if(a!==void 0)for(let p=0;p<r;p++)i=[i];return i}function Rz(t,e,i){return arguments.length===2?Kg(r=>ri(t,r),e):Kg(r=>ri(t,r),e,i)}function mE(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function I3(t,e){if(arguments.length===2)return I3(t).call(null,e);const i=new Set,r=t.filter(m=>typeof m!="function"),a=t.filter(m=>typeof m=="function");for(const m of t)typeof m!="string"&&typeof m!="number"||i.add(m);let p=null,y=null;return(m,_)=>{if(m==null)return m;const x=typeof m,M=x==="string"||x==="number";return M&&(i.has(m)||a.some(A=>x==="string"&&A===String||x==="number"&&A===Number))||x==="object"&&a.some(A=>!Jg(m,A))?m:(M&&r.length?(p||(p=r.map(A=>typeof A=="string"?`'${A}'`:`${A}`).join(", ")),Up.error("Accessor#set",`'${m}' is not a valid value for this property, only the following values are valid: ${p}`)):typeof m=="object"&&a.length?(y||(y=a.map(A=>v2(A)).join(", ")),Up.error("Accessor#set",`'${m}' is not a valid value for this property, value must be one of ${y}`)):Up.error("Accessor#set",`'${m}' is not a valid value for this property`),_&&(_.valid=!1),null)}}function Do(t,e){if(arguments.length===2)return Do(t).call(null,e);const i={},r=[],a=[];for(const _ in t.typeMap){const x=t.typeMap[_];i[_]=ri(x),r.push(v2(x)),a.push(_)}const p=()=>`'${r.join("', '")}'`,y=()=>`'${a.join("', '")}'`,m=typeof t.key=="string"?_=>_[t.key]:t.key;return _=>{if(t.base&&!Jg(t.base,_)||_==null)return _;const x=m(_)||t.defaultKeyValue,M=i[x];if(!M)return Up.error("Accessor#set",`Invalid property value, value needs to be one of ${p()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!Jg(t.typeMap[x],_))return _;if(typeof t.key=="string"&&!dE(_)){const A={};for(const C in _)C!==t.key&&(A[C]=_[C]);return M(A)}return M(_)}}let jt=class{};const rye={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function Lz(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function gE(t){switch(t.type){case"native":return ri(t.value);case"array":return Wf(gE(t.value));case"one-of":return jz(t);default:return null}}function jz(t){let e=null;return(i,r)=>E3(i,t)?i:(e==null&&(e=M3(t)),Up.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function M3(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case jt:return"integer";case Date:return"date";default:return v2(t.value)}case"array":return`array of ${M3(t.value)}`;case"one-of":{const e=t.values.map(i=>M3(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function E3(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case jt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!E3(i,e.value));case"one-of":return e.values.some(i=>E3(t,i))}}function S(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),a=h2(e,i);r&&(r.get||r.set?(a.get=r.get||a.get,a.set=r.set||a.set):"value"in r&&("value"in t&&me.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),a.value=t.value=r.value)),t.readOnly!=null&&(a.readOnly=t.readOnly);const p=t.aliasOf;if(p){const _=typeof p=="string"?p:p.source,x=typeof p=="string"?null:p.overridable===!0;let M;a.dependsOn=[_],a.get=function(){let A=Dg(this,_);if(typeof A=="function"){M||(M=_.split(".").slice(0,-1).join("."));const C=Dg(this,M);C&&(A=A.bind(C))}return A},a.readOnly||(a.set=x?function(A){this._override(i,A)}:function(A){zg(this,_,A)})}const y=t.type,m=t.types;a.cast||(y?a.cast=Dz(y):m&&(Array.isArray(m)?a.cast=Wf(Do(m[0])):a.cast=Do(m))),NF(a,t),t.range&&(a.cast=Fz(a.cast,t.range))}}function vE(t,e,i){const r=h2(t,i);r.json||(r.json={});let a=r.json;return e!==void 0&&(a.origins||(a.origins={}),a.origins[e]||(a.origins[e]={}),a=a.origins[e]),a}function Dz(t){let e=0,i=t;if(Lz(t))return gE(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(mE(r))return e===0?I3(r):Kg(I3(r),e);if(e===1)return Nz(r);if(e>1)return Rz(r,e);const a=t;return a.from?a.from:ri(a)}function Fz(t,e){return i=>{let r=+t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function zz(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const a=e[r];i[r].forEach(p=>{e[p]=a}),delete e[r]}}}let sn=class extends QM{constructor(e,i,r){super(e,i,r)}};sn.prototype.type="warning";function bE(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const A3=me.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function c7(t,e,i){var r,a;t&&(!i&&!e.read||(r=e.read)!=null&&r.reader||((a=e.read)==null?void 0:a.enabled)===!1||qz(t)&&Pr("read.reader",_d(t),e))}function _d(t){var i,r;const e=t.ndimArray??0;if(e>1)return Gz(t);if(e===1)return p7(t);if("type"in t&&_E(t.type)){const a=(r=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,p=p7(typeof a=="function"?{type:a}:{types:a});return(y,m,_)=>{const x=p(y,m,_);return x&&new t.type(x)}}return oS(t)}function oS(t){return"type"in t?Vz(t.type):Uz(t.types)}function Vz(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const a=typeof e;if(a!=="object")return void A3.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${a}'`);const p=new t;return p.read(e,r),p}:t.fromJSON}function wE(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(a=>wE(t,a,i,r-1)):t(e,void 0,i)}function Gz(t){const e=oS(t),i=wE.bind(null,e),r=t.ndimArray??0;return(a,p,y)=>{if(a==null)return a;a=i(a,y,r);let m=r,_=a;for(;m>0&&Array.isArray(_);)m--,_=_[0];if(_!==void 0)for(let x=0;x<m;x++)a=[a];return a}}function p7(t){const e=oS(t);return(i,r,a)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const m of i){const _=e(m,void 0,a);_!==void 0&&y.push(_)}return y}const p=e(i,void 0,a);return p!==void 0?[p]:void 0}}function _E(t){if(!bE(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?aS(e.Type):SE(e.Type))}function qz(t){return"types"in t?SE(t.types):aS(t.type)}function aS(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||_E(t))}function SE(t){for(const e in t.typeMap)if(!aS(t.typeMap[e]))return!1;return!0}function Uz(t){let e=null;const i=t.errorContext??"type";return(r,a,p)=>{if(r==null)return r;const y=typeof r;if(y!=="object")return void A3.error(`Expected JSON value of type 'object' to deserialize, but got '${y}'`);e||(e=Bz(t));const m=t.key;if(typeof m!="string")return;const _=r[m],x=_?e[_]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!x){const A=`Type '${_||"unknown"}' is not supported`;return p&&p.messages&&r&&p.messages.push(new sn(`${i}:unsupported`,A,{definition:r,context:p})),void A3.error(A)}const M=new x;return M.read(r,p),M}}function Bz(t){var i,r;const e={};for(const a in t.typeMap){const p=t.typeMap[a],y=_1(p.prototype);if(typeof t.key=="function")continue;const m=y[t.key];if(!m)continue;(i=m.json)!=null&&i.type&&Array.isArray(m.json.type)&&m.json.type.length===1&&typeof m.json.type[0]=="string"&&(e[m.json.type[0]]=p);const _=(r=m.json)==null?void 0:r.write;if(!_||!_.writer){e[a]=p;continue}const x=_.target,M=typeof x=="string"?x:t.key,A={};_.writer(a,A,M),A[M]&&(e[A[M]]=p)}return e}function Hz(t){if(t.json||(t.json={}),f7(t.json),y7(t.json),d7(t.json),t.json.origins)for(const e in t.json.origins)f7(t.json.origins[e]),y7(t.json.origins[e]),d7(t.json.origins[e]);return!0}function d7(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function f7(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function y7(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function m7(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&bE(t.type))?e.write.writer=Kz:i>1?e.write.writer=Yz(i):e.types?Array.isArray(e.types)?e.write.writer=Jz(e.types[0]):e.write.writer=Wz(e.types):e.write.writer=Jf}function Wz(t){return(e,i,r,a)=>e?xE(e,t,a)?Jf(e,i,r,a):void 0:Jf(e,i,r,a)}function xE(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i!=null&&i.messages){const r=e.errorContext??"type",a=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new ie(`${r}:unsupported`,a,{definition:t,context:i})),me.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(a)}return!1}function Jz(t){return(e,i,r,a)=>!e||!Array.isArray(e)?Jf(e,i,r,a):Jf(e.filter(p=>xE(p,t,a)),i,r,a)}function Jf(t,e,i,r){Pr(i,Yg(t,r),e)}function Yg(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?Zg(t):t}function Zg(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Kz(t,e,i,r){let a;t===null?a=null:t&&typeof t.map=="function"?(a=t.map(p=>Yg(p,r)),typeof a.toArray=="function"&&(a=a.toArray())):a=[Yg(t,r)],Pr(i,a,e)}function $E(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>$E(r,e,i-1)):Yg(t,e)}function Yz(t){return(e,i,r,a)=>{let p;if(e===null)p=null;else{p=$E(e,a,t);let y=t,m=p;for(;y>0&&Array.isArray(m);)y--,m=m[0];if(m!==void 0)for(let _=0;_<y;_++)p=[p]}Pr(r,p,i)}}function Zz(t,e){return lS(t,"any",e==null?void 0:e.origin)}function k3(t,e){return lS(t,"read",e==null?void 0:e.origin)}function TE(t,e){return lS(t,"write",e==null?void 0:e.origin)}function lS(t,e,i){let r=t==null?void 0:t.json;if(r!=null&&r.origins&&i){let a;a=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],a&&(e==="any"||e in a)&&(r=a)}return r}function Xz(t){const e=Qz(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],a=r.types?eV(r):e;c7(a,r,!1),r.types&&!r.write&&t.json.write&&t.json.write.enabled&&(r.write={...t.json.write}),m7(a,r)}c7(e,t.json,!0),m7(e,t.json)}function Qz(t){return t.json.types?O3(t.json):t.type?IE(t):O3(t)}function eV(t){return t.type?IE(t):O3(t)}function IE(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!mE(i);)i=i[0],e++;return{type:i,ndimArray:e}}function O3(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function tV(t){Hz(t)&&(zz(t),Xz(t))}const Ob=new Set,Cb=new Set;function B(t){return e=>{e.prototype.declaredClass=t,rV(e);const i=[],r=[];let a=e.prototype;for(;a;)a.hasOwnProperty("initialize")&&!Ob.has(a.initialize)&&(Ob.add(a.initialize),i.push(a.initialize)),a.hasOwnProperty("destroy")&&!Cb.has(a.destroy)&&(Cb.add(a.destroy),r.push(a.destroy)),a=Object.getPrototypeOf(a);Ob.clear(),Cb.clear();class p extends e{constructor(...m){if(super(...m),this.constructor===p&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let _=i.length-1;_>=0;_--)i[_].call(this)}}),r.length){let _=!1;const x=this[MM];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!_){_=!0,x.call(this);for(let M=0;M<r.length;M++)r[M].call(this)}}})}this.postscript(...m)}}}return p.__accessorMetadata__=_1(e.prototype),p.prototype.declaredClass=t,p}}function iV(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;Ze(r.observerObject);const a=i.store;return a.has(t)?a.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function rV(t){const e=t.prototype,i=_1(e),r={};for(const a of Object.getOwnPropertyNames(i)){const p=i[a];tV(p),r[a]={enumerable:!0,configurable:!0,get:iV(a,p),set(y){const m=this.__accessor__;if(m!==void 0){if(!Object.isFrozen(this)){if(m.initialized&&p.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${a}' of ${this.declaredClass}`);if(m.lifecycle===Ra.CONSTRUCTED&&p.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${a}' of ${this.declaredClass}`);m.set(a,y)}}else Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(t.prototype,r)}var ME,EE;function sV(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const vl=Symbol("Accessor-Handles"),C3=Symbol("Accessor-Initialized");let je=class AE{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:a}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const p=this;class y extends p{constructor(..._){super(..._),this.inherited=null,a&&a.apply(this,_)}}_1(y.prototype);for(const m in e){const _=e[m];y.prototype[m]=typeof _=="function"?function(...x){const M=this.inherited;let A;this.inherited=function(...C){if(p.prototype[m])return p.prototype[m].apply(this,C)};try{A=_.apply(this,x)}catch(C){throw this.inherited=M,C}return this.inherited=M,A}:e[m]}for(const m in i){const _=sV(i[m]);S(_)(y.prototype,m)}return B(r)(y)}constructor(...e){if(this[ME]=null,this[EE]=!1,this.constructor===AE)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new WF(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,e)),g7.register(this,i.propertiesByName,this)}postscript(e){const i=this.__accessor__,r=i.ctorArgs||e;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[C3]=!0}initialize(){}[MM](){this[vl]=Wt(this[vl])}destroy(){var e;this.destroyed||(g7.unregister(this),bz(this),this.__accessor__.destroy(),(e=ez())==null||e.onInstanceDestroy(this))}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[C3]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return Dg(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return zg(this,e,i),this}watch(e,i,r){return Tz(this,e,i,r)}own(e){this.addHandles(e)}addHandles(e,i){if(this.destroyed){const a=Array.isArray(e)?e:[e];for(const p of a)p.remove();return}let r=this[vl];r==null&&(r=this[vl]=new Ho),r.add(e,i)}removeHandles(e){const i=this[vl];i!=null&&i.remove(e)}removeAllHandles(){const e=this[vl];e!=null&&e.removeAll()}hasHandles(e){const i=this[vl];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};ME=vl,EE=C3;const g7=new FinalizationRegistry(t=>{for(const e of t.values())e.destroy()});let Sm=class kE{constructor(){this._emitter=new kE.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(a=null){this._target=a,this._listenersMap=null}clear(){var a;(a=this._listenersMap)==null||a.clear(),this._listenersMap=null}destroy(){this.clear()}emit(a,p){const y=this._listenersMap&&this._listenersMap.get(a);if(!y)return!1;const m=this._target||this;return[...y].forEach(_=>{_.call(m,p)}),y.length>0}on(a,p){if(Array.isArray(a)){const m=a.map(_=>this.on(_,p));return o2(m)}if(a.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const y=this._listenersMap.get(a)||[];return y.push(p),this._listenersMap.set(a,y),{remove:()=>{const m=this._listenersMap&&this._listenersMap.get(a)||[],_=m.indexOf(p);_>=0&&m.splice(_,1)}}}once(a,p){const y=this.on(a,m=>{y.remove(),p.call(null,m)});return y}hasEventListener(a){const p=this._listenersMap&&this._listenersMap.get(a);return p!=null&&p.length>0}}t.EventEmitter=e,t.EventedMixin=r=>{let a=class extends r{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(p,y){return this._emitter.emit(p,y)}on(p,y){return this._emitter.on(p,y)}once(p,y){return this._emitter.once(p,y)}hasEventListener(p){return this._emitter.hasEventListener(p)}};return a=v([B("esri.core.Evented")],a),a};let i=class extends je{constructor(){super(...arguments),this._emitter=new Sm.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,a){return this._emitter.emit(r,a)}on(r,a){return this._emitter.on(r,a)}once(r,a){return this._emitter.once(r,a)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=v([B("esri.core.Evented")],i),t.EventedAccessor=i})(Sm||(Sm={}));const Wo=Sm;var Lt;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Lt||(Lt={}));function uS(t){return(e,i)=>{e[i]=t}}let b2=class extends WM{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Oa;let nV=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const As=new Cu(nV,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),oV=()=>{};function Pb(t){return t?t instanceof zh?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function Nb(t){if(t&&t.length)return t[0]}function aV(t,e,i,r){const a=Math.min(t.length-i,e.length-r);let p=0;for(;p<a&&t[i+p]===e[r+p];)p++;return p}function OE(t,e,i,r){e&&e.forEach((a,p,y)=>{t.push(a),OE(t,i.call(r,a,p,y),i,r)})}const il=new Set,rl=new Set,sl=new Set,Rb=new Map;let lV=0,zh=Oa=class extends Wo.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Oa}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new b2,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:lV++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Oa?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return Ze(this._observable),this._items}set items(t){this._emitBeforeChanges(Lt.ADD)||(this._splice(0,this.length,Pb(t)),this._emitAfterChanges(Lt.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=oV,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(Ze(this._observable),this._emitBeforeChanges(Lt.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(Lt.ADD),this}addMany(t,e=this._items.length){if(Ze(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(Lt.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,Pb(t)),this._emitAfterChanges(Lt.ADD),this}at(t){if(Ze(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ze(this._observable),!this.length||this._emitBeforeChanges(Lt.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(Lt.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ze(this._observable),this._createNewInstance({items:this._items.map(se)})}concat(...t){Ze(this._observable);const e=t.map(Pb);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ze(this._observable),!this.length||this._emitBeforeChanges(Lt.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let a=0;a<r;a++)t.call(e,i[a],a,i);this._emitAfterChanges(Lt.REMOVE)}every(t,e){return Ze(this._observable),this._items.every(t,e)}filter(t,e){let i;return Ze(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return Ze(this._observable),this._items.find(t,e)}findIndex(t,e){return Ze(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ze(this._observable);const i=[];return OE(i,this,t,e),new Oa(i)}forEach(t,e){return Ze(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ze(this._observable),this._items[t]}getNextIndex(t){Ze(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ze(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ze(this._observable),this._items.indexOf(t,e)}join(t=","){return Ze(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ze(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ze(this._observable);const i=this._items.map(t,e);return new Oa({items:i})}reorder(t,e=this.length-1){Ze(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(Lt.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(Lt.MOVE)}return t}}pop(){if(Ze(this._observable),!this.length||this._emitBeforeChanges(Lt.REMOVE))return;const t=Nb(this._splice(this.length-1,1));return this._emitAfterChanges(Lt.REMOVE),t}push(...t){return Ze(this._observable),this._emitBeforeChanges(Lt.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Lt.ADD)),this.length}reduce(t,e){Ze(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ze(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ze(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ze(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Lt.REMOVE))return;const e=Nb(this._splice(t,1));return this._emitAfterChanges(Lt.REMOVE),e}removeMany(t){if(Ze(this._observable),!t||!t.length||this._emitBeforeChanges(Lt.REMOVE))return[];const e=t instanceof Oa?t.toArray():t,i=this._items,r=[],a=e.length;for(let p=0;p<a;p++){const y=e[p],m=i.indexOf(y);if(m>-1){const _=1+aV(e,i,p+1,m+1),x=this._splice(m,_);x&&x.length>0&&r.push.apply(r,x),p+=_-1}}return this._emitAfterChanges(Lt.REMOVE),r}reverse(){if(Ze(this._observable),this._emitBeforeChanges(Lt.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Lt.MOVE),this}shift(){if(Ze(this._observable),!this.length||this._emitBeforeChanges(Lt.REMOVE))return;const t=Nb(this._splice(0,1));return this._emitAfterChanges(Lt.REMOVE),t}slice(t=0,e=this.length){return Ze(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ze(this._observable),this._items.some(t,e)}sort(t){if(Ze(this._observable),!this.length||this._emitBeforeChanges(Lt.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(Lt.MOVE),this}splice(t,e,...i){Ze(this._observable);const r=(e?Lt.REMOVE:0)|(i.length?Lt.ADD:0);if(this._emitBeforeChanges(r))return[];const a=this._splice(t,e,i)||[];return this._emitAfterChanges(r),a}toArray(){return Ze(this._observable),this._items.slice()}toJSON(){return Ze(this._observable),this.toArray()}toLocaleString(){return Ze(this._observable),this._items.toLocaleString()}toString(){return Ze(this._observable),this._items.toString()}unshift(...t){return Ze(this._observable),!t.length||this._emitBeforeChanges(Lt.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Lt.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,a=this.itemType;let p,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=wd(()=>this._dispatchChange())),e){if(y=r.splice(t,e),this.hasEventListener("before-remove")){const m=As.acquire();m.target=this,m.cancellable=!0;for(let _=0,x=y.length;_<x;_++)p=y[_],m.reset(p),this.emit("before-remove",m),m.defaultPrevented&&(y.splice(_,1),r.splice(t,0,p),t+=1,_-=1,x-=1);As.release(m)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const m=As.acquire();m.target=this,m.cancellable=!1;const _=y.length;for(let x=0;x<_;x++)m.reset(y[x]),this.emit("after-remove",m);As.release(m)}}if(i&&i.length){if(a){const M=[];for(const A of i){const C=a.ensureType(A);C==null&&A!=null||M.push(C)}i=M}const m=this.hasEventListener("before-add"),_=this.hasEventListener("after-add"),x=t===this.length;if(m||_){const M=As.acquire();M.target=this,M.cancellable=!0;const A=As.acquire();A.target=this,A.cancellable=!1;for(const C of i)m?(M.reset(C),this.emit("before-add",M),M.defaultPrevented||(x?r.push(C):r.splice(t++,0,C),this._set("length",r.length),_&&(A.reset(C),this.emit("after-add",A)))):(x?r.push(C):r.splice(t++,0,C),this._set("length",r.length),A.reset(C),this.emit("after-add",A));As.release(A),As.release(M)}else{if(x)for(const M of i)r.push(M);else r.splice(t,0,...i);this._set("length",r.length)}}return(i&&i.length||y&&y.length)&&this._notifyChangeEvent(i,y),y}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=As.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,As.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=As.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),As.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;il.clear(),rl.clear(),sl.clear();for(const{added:_,removed:x}of i){if(_)if(sl.size===0&&rl.size===0)for(const M of _)il.add(M);else for(const M of _)rl.has(M)?(sl.add(M),rl.delete(M)):sl.has(M)||il.add(M);if(x)if(sl.size===0&&il.size===0)for(const M of x)rl.add(M);else for(const M of x)il.has(M)?il.delete(M):(sl.delete(M),rl.add(M))}const r=Ur.acquire();il.forEach(_=>{r.push(_)});const a=Ur.acquire();rl.forEach(_=>{a.push(_)});const p=this._items,y=e.items,m=Ur.acquire();if(sl.forEach(_=>{y.indexOf(_)!==p.indexOf(_)&&m.push(_)}),e.listeners&&(r.length||a.length||m.length)){const _={target:this,added:r,removed:a,moved:m},x=e.listeners.length;for(let M=0;M<x;M++){const A=e.listeners[M];A.removed||A.callback.call(this,_)}}Ur.release(r),Ur.release(a),Ur.release(m)}il.clear(),rl.clear(),sl.clear()}};zh.ofType=t=>{if(!t)return Oa;if(Rb.has(t))return Rb.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const a=t.typeMap[r].prototype.declaredClass;e?e+=` | ${a}`:e=a}let i=class extends Oa{};return v([uS({Type:t,ensureType:typeof t=="function"?ri(t):Do(t)})],i.prototype,"itemType",void 0),i=v([B(`esri.core.Collection<${e}>`)],i),Rb.set(t,i),i},v([S()],zh.prototype,"length",void 0),v([S()],zh.prototype,"items",null),zh=Oa=v([B("esri.core.Collection")],zh);const De=zh;function cc(t,e,i=De){return e||(e=new i),e===t||(e.removeAll(),uV(t)?e.addMany(t):t&&e.add(t)),e}function CE(t){return t}function uV(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const v7=new Set;function hV(t,e,i=!1){i&&v7.has(e)||(i&&v7.add(e),t.warn(`🛑 DEPRECATED - ${e}`))}function P3(t,e,i={}){if(le("esri-deprecation-warnings")){const{moduleName:r}=i;Xg(t,`Property: ${(r?r+"::":"")+e}`,i)}}function Xg(t,e,i={}){if(le("esri-deprecation-warnings")){const{replacement:r,version:a,see:p,warnOnce:y}=i;let m=e;r&&(m+=`
	🛠️ Replacement: ${r}`),a&&(m+=`
	⚙️ Version: ${a}`),p&&(m+=`
	🔗 See ${p} for more details.`),hV(t,m,y)}}let cV=class PE{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new PE;return this._values.forEach((r,a)=>{e&&e.has(a)||i.set(a,se(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Me.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>{var a;return((a=this._values.get(r))==null?void 0:a.origin)===e})}set(e,i,r){if((r=this._normalizeOrigin(r))===Me.DEFAULTS){const a=this._values.get(e);if(a&&a.origin!=null&&a.origin>r)return}this._values.set(e,new pV(i,r))}delete(e,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(e))==null?void 0:r.origin)!==i||this._values.delete(e)}has(e,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(e))==null?void 0:r.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===Me.DEFAULTS?e:Me.USER}},pV=class{constructor(e,i){this.value=e,this.origin=i}};function NE(t,e,i){e.keys().forEach(a=>{i.set(a,e.get(a),Me.DEFAULTS)});const r=t.metadatas;Object.keys(r).forEach(a=>{t.internalGet(a)&&i.set(a,t.internalGet(a),Me.DEFAULTS)})}function dV(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.indexOf(e)===0&&Qx(r,i))return!0}else for(const a of r)if(a===e||a.includes(".")&&a.indexOf(e)===0&&Qx(a,i))return!0;return!1}function fV(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function yV(t,e,i,r,a){let p=k3(e[i],a);fV(p)&&(t[i]=!0);for(const y of Object.getOwnPropertyNames(e))p=k3(e[y],a),dV(p,i,r)&&(t[y]=!0)}function mV(t,e,i,r){const a=i.metadatas,p=Zz(a[e],r),y=p==null?void 0:p.default;if(y===void 0)return;const m=typeof y=="function"?y.call(t,e,r):y;m!==void 0&&i.set(e,m)}const RE={origin:"service"};function LE(t,e,i=RE){if(!e||typeof e!="object")return;const r=Yi(t),a=r.metadatas,p={};for(const y of Object.getOwnPropertyNames(e))yV(p,a,y,e,i);r.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(p)){const m=k3(a[y],i).read,_=m&&m.source;let x;x=_&&typeof _=="string"?w1(e,_):e[y],m&&m.reader&&(x=m.reader.call(t,x,e,i)),x!==void 0&&r.set(y,x)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(a))p[y]||mV(t,y,r,i)}r.setDefaultOrigin("user")}function gV(t,e,i,r=RE){var p;const a={...r,messages:[]};i(a),(p=a.messages)==null||p.forEach(y=>{y.type!=="warning"||t.loaded?r&&r.messages&&r.messages.push(y):t.loadWarnings.push(y)})}function vV(t,e,i,r,a){var y,m;const p={};return(m=(y=e.write)==null?void 0:y.writer)==null||m.call(t,r,p,i,a),p}function jE(t,e,i,r,a,p){if(!r||!r.write)return!1;const y=t.get(i);if(!a&&r.write.overridePolicy){const m=r.write.overridePolicy.call(t,y,i,p??void 0);m!==void 0&&(a=m)}if(a||(a=r.write),!a||a.enabled===!1)return!1;if((y===null&&!a.allowNull&&!a.writerEnsuresNonNull||y===void 0)&&a.isRequired){const m=new ie("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return m&&p&&p.messages?p.messages.push(m):m&&!p&&me.getLogger("esri.core.accessorSupport.write").error(m.name,m.message),!1}return!(y===void 0||y===null&&!a.allowNull&&!a.writerEnsuresNonNull||!a.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Me.DEFAULTS)&&bV(t,i,p,r,y)||!a.ignoreOrigin&&p&&p.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Br(p.origin))}function bV(t,e,i,r,a){const p=r.default;if(p===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(a);if(typeof p=="function"){if(Array.isArray(a)){const y=p.call(t,e,i??void 0);return a2(y,a)}return!1}return p===a}function wV(t,e,i,r){const a=Yi(t),p=a.metadatas,y=TE(p[e],r);return!!y&&jE(t,a,e,y,i,r)}function DE(t,e,i){var p,y;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return vm(e,t.toJSON(i));const r=Yi(t),a=r.metadatas;for(const m in a){const _=TE(a[m],i);if(!jE(t,r,m,_,void 0,i))continue;const x=t.get(m),M=vV(t,_,_.write&&typeof _.write.target=="string"?_.write.target:m,x,i);Object.keys(M).length>0&&(e=vm(e,M),(y=(p=i==null?void 0:i.resources)==null?void 0:p.pendingOperations)!=null&&y.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>vm(e,M,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:m,oldOrigin:VF(r.store.originOf(m)),newOrigin:i.origin}))}return e}const $1=t=>{let e=class extends t{constructor(...i){super(...i);const r=Yi(this),a=r.store,p=new cV;r.store=p,NE(r,a,p)}read(i,r){LE(this,i,r)}write(i,r){return DE(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return _V.call(this,i,r)}};return e=v([B("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function _V(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let de=class extends $1(je){};de=v([B("esri.core.JSONSupport")],de);var Wl;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Wl||(Wl={}));let SV=class{constructor(){this._resolver=rn(),this._status=Wl.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Wl.RESOLVED,this._cleanUp()},()=>{this._status=Wl.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Wl.RESOLVED}isRejected(){return this._status===Wl.REJECTED}isFulfilled(){return this._status!==Wl.PENDING}abort(){this._resolver.reject(hi())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=rn(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},a=>{this.isFulfilled()||this._allPromise!==r||dr(a)||this._resolver.reject(a)}),e.resolve()}};const w2=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new SV,this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=v([B("esri.core.Promise")],e),e};let Qg=class extends w2(je){};Qg=v([B("esri.core.Promise")],Qg);const xV="not-loaded",$V="loading",TV="failed",b7="loaded",FE=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const a=this.load.bind(this);this.load=p=>{const y=new Promise((m,_)=>{const x=sS(p,_);this.destroyed&&_(new ie("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(m,_).finally(()=>{x&&x.remove()})});if(this.loadStatus===xV){this._set("loadStatus",$V);const m=this._loadController=new AbortController;a({signal:m.signal}),Ss(m.signal,()=>{this._promiseProps.abort()})}return r(),y}})),this.when(()=>{this._set("loadStatus",b7),this._loadController=null},r=>{this._set("loadStatus",TV),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController=lc(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===b7}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new ie("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return v([S({readOnly:!0})],e.prototype,"loaded",null),v([S({readOnly:!0})],e.prototype,"loadError",void 0),v([S({clonable:!1})],e.prototype,"loadStatus",void 0),v([S({type:[sn],readOnly:!0})],e.prototype,"loadWarnings",null),e=v([B("esri.core.Loadable")],e),e};let d0=class extends FE(Qg){};d0=v([B("esri.core.Loadable")],d0),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=FE,t.isLoadable=e}(d0||(d0={}));const Fo=d0;function pye(t,e,i){return qn(t.map((r,a)=>e.apply(i,[r,a])))}async function IV(t,e,i){return(await qn(t.map((r,a)=>e.apply(i,[r,a])))).map(r=>r.value)}function hS(t){return{ok:!0,value:t}}function cS(t){return{ok:!1,error:t}}function MV(t){return t!=null&&t.ok===!0?t.value:null}function EV(t){return t!=null&&t.ok===!1?t.error:null}async function _2(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return hS(await t)}catch(e){return cS(e)}}async function dye(t){try{return hS(await t)}catch(e){return Js(e),cS(e)}}function pS(t,e){return new bl(t,e)}let bl=class extends je{get value(){return MV(this._result)}get error(){return EV(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=lc(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(a=>{this._result=hS(a),this._cleanup()},a=>{this._result=cS(a),this._cleanup()}),this._abortHandle=Ss(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=fi(this._abortHandle),this._abortController=null}};v([S()],bl.prototype,"value",null),v([S()],bl.prototype,"error",null),v([S()],bl.prototype,"finished",null),v([S()],bl.prototype,"promise",void 0),v([S()],bl.prototype,"_result",void 0),bl=v([B("esri.core.asyncUtils.ReactiveTask")],bl);async function S2(t,e){return await t.load(),AV(t,e)}async function AV(t,e){const i=[],r=(...p)=>{for(const y of p)y!=null&&(Array.isArray(y)?r(...y):De.isCollection(y)?y.forEach(m=>r(m)):Fo.isLoadable(y)&&i.push(y))};e(r);let a=null;if(await IV(i,async p=>{const y=await _2(kV(p)?p.loadAll():p.load());y.ok!==!1||a||(a=y)}),a)throw a.error;return t}function kV(t){return"loadAll"in t&&typeof t.loadAll=="function"}const OV=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,CV={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function w7(t){const e=t==null?void 0:t.match(OV);if(!e)return null;const[,i,r,a]=e;if(!i)return null;let p=null,y=null,m=null;const{devext:_,qaext:x,www:M}=CV;if(r)if(p=i,a)switch(a.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:m}=_);break;case"qa":({customBaseUrl:y,portalHostname:m}=x);break;default:return null}else({customBaseUrl:y,portalHostname:m}=M);else switch(i.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:m}=_);break;case"qaext":({customBaseUrl:y,portalHostname:m}=x);break;case"www":({customBaseUrl:y,portalHostname:m}=M);break;default:return null}return{customBaseUrl:y,isPortal:!1,portalHostname:m,urlKey:p}}function PV(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function NV(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}const RV=me.getLogger("esri.core.urlUtils"),Sd=_t.request,_7="esri/config: esriConfig.request.proxyUrl is not set.",zE=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,VE=/^\s*http:/i,LV=/^\s*https:/i,jV=/^\s*file:/i,DV=/:\d+$/,FV=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,zV=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),VV=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let Bp=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(zV);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(VV),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const py={},GV=new Bp(_t.applicationUrl);let kr=GV;const qV=UV();let dS=qV;const fS=()=>kr,mye=()=>dS;function UV(){const t=kr.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${kr.scheme}://${kr.host}${kr.port!=null?`:${kr.port}`:""}`}${e}`}function or(t){if(!t)return null;const e={path:null,query:null},i=new Bp(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,r),e.query=yS(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function yS(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const a=r.indexOf("=");let p,y;a<0?(p=decodeURIComponent(r),y=""):(p=decodeURIComponent(r.slice(0,a)),y=decodeURIComponent(r.slice(a+1)));let m=i[p];typeof m=="string"&&(m=i[p]=[m]),Array.isArray(m)?m.push(y):i[p]=y}return i}function S7(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function Su(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const a=encodeURIComponent(i)+"=",p=e&&e[i];return p?a+encodeURIComponent(p(r)):Array.isArray(r)?r.map(y=>S7(y)?a+encodeURIComponent(JSON.stringify(y)):a+encodeURIComponent(y)).join("&"):S7(r)?a+encodeURIComponent(JSON.stringify(r)):a+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function BV(t=!1){let e,i=Sd.proxyUrl;if(typeof t=="string"){e=XV(t);const r=x2(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw RV.warn(_7),new ie("urlutils:proxy-not-set",_7);return e&&N3()&&(i=wS(i)),or(i)}function gye(t){const e=x2(t);let i,r;if(e){const a=mS(e.proxyUrl);i=a.path,r=a.query?yS(a.query):null}if(i){const a=or(t);t=i+"?"+a.path;const p=Su({...r,...a.query});p&&(t=`${t}?${p}`)}return t}const qd={path:"",query:""};function mS(t){const e=t.indexOf("?");return e!==-1?(qd.path=t.slice(0,e),qd.query=t.slice(e+1)):(qd.path=t,qd.query=null),qd}function GE(t){return t=(t=tv(t=sG(t=mS(t).path),!0)).toLowerCase()}function HV(t){const e={proxyUrl:t.proxyUrl,urlPrefix:GE(t.urlPrefix)},i=Sd.proxyRules,r=e.urlPrefix;let a=i.length;for(let p=0;p<i.length;p++){const y=i[p].urlPrefix;if(r.indexOf(y)===0){if(r.length===y.length)return-1;a=p;break}y.indexOf(r)===0&&(a=p+1)}return i.splice(a,0,e),a}function x2(t){const e=Sd.proxyRules,i=GE(t);for(let r=0;r<e.length;r++)if(i.indexOf(e[r].urlPrefix)===0)return e[r]}function WV(t,e){if(!t||!e)return!1;t=ev(t),e=ev(e);const i=w7(t),r=w7(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&nd(t,e,!0)}function qE(t,e){return t=ev(t),e=ev(e),tv(t)===tv(e)}function ev(t){const e=(t=Hn(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function UE(t){const e=r=>r==null||r instanceof RegExp&&r.test(t)||typeof r=="string"&&t.startsWith(r),i=Sd.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r}return null}function nd(t,e,i=!1){if(!t||!e)return!1;const r=L3(t),a=L3(e);return!(!i&&r.scheme!==a.scheme)&&r.host!=null&&a.host!=null&&r.host.toLowerCase()===a.host.toLowerCase()&&r.port===a.port}function gS(t){if(typeof t=="string"){if(!xs(t))return!0;t=L3(t)}if(nd(t,kr))return!0;const e=Sd.trustedServers||[];for(let i=0;i<e.length;i++){const r=JV(e[i]);for(let a=0;a<r.length;a++)if(nd(t,r[a]))return!0}return!1}function JV(t){return py[t]||(bS(t)||zo(t)?py[t]=[new Bp(bs(t))]:py[t]=[new Bp(`http://${t}`),new Bp(`https://${t}`)]),py[t]}function bs(t,e=dS,i){return zo(t)?i&&i.preserveProtocolRelative?t:kr.scheme==="http"&&kr.authority===Wn(t).slice(2)?`http:${t}`:`https:${t}`:bS(t)?t:Ua(t[0]==="/"?iG(e):e,t)}function vS(t,e=dS,i){if(t==null||!xs(t))return t;const r=Hn(t),a=r.toLowerCase(),p=Hn(e).toLowerCase().replace(/\/+$/,""),y=i?Hn(i).toLowerCase().replace(/\/+$/,""):null;if(y&&p.indexOf(y)!==0)return t;const m=(A,C,N)=>(N=A.indexOf(C,N))===-1?A.length:N;let _=m(a,"/",a.indexOf("//")+2),x=-1;for(;a.slice(0,_+1)===p.slice(0,_)+"/"&&(x=_+1,_!==a.length);)_=m(a,"/",_+1);if(x===-1||y&&x<y.length)return t;t=r.slice(x);const M=p.slice(x-1).replaceAll(/[^/]+/g,"").length;if(M>0)for(let A=0;A<M;A++)t=`../${t}`;else t=`./${t}`;return t}function Hn(t){return t=aG(t=oG(t=nG(t=bs(t=t.trim()))))}function Ua(...t){const e=t.filter(Po);if(!e||!e.length)return;const i=[];if(xs(e[0])){const a=e[0],p=a.indexOf("//");p!==-1&&(i.push(a.slice(0,p+1)),eG(e[0])&&(i[0]+="/"),e[0]=a.slice(p+2))}else e[0][0]==="/"&&i.push("");const r=e.reduce((a,p)=>p?a.concat(p.split("/")):a,[]);for(let a=0;a<r.length;a++){const p=r[a];p===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!p&&a===r.length-1||p&&(p!=="."||i.length===0))&&i.push(p)}return i.join("/")}function Wn(t,e=!1){if(t==null||$2(t)||Ic(t))return null;let i=t.indexOf("://");if(i===-1&&zo(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=tv(t,!0)),t}function xs(t){return zo(t)||bS(t)}function $2(t){return t!=null&&t.slice(0,5)==="blob:"}function Ic(t){return t!=null&&t.slice(0,5)==="data:"}function KV(t){const e=Kf(t);return e&&e.isBase64?NV(e.data):null}function vye(t){return btoa(String.fromCharCode.apply(null,t)).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const YV=/^data:(.*?)(;base64)?,(.*)$/;function Kf(t){const e=t.match(YV);if(!e)return null;const[,i,r,a]=e;return{mediaType:i,isBase64:!!r,data:a}}function BE(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function bye(t){const e=KV(t);if(!e)return null;const i=Kf(t);return new Blob([e],{type:i.mediaType})}function wye(t,e){ZV(t,e)}function ZV(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(t);return i.download=e,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function zo(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function bS(t){return t!=null&&zE.test(t)}function XV(t){return t!=null&&LV.test(t)||kr.scheme==="https"&&zo(t)}function QV(t){return t!=null&&VE.test(t)||kr.scheme==="http"&&zo(t)}function eG(t){return t!=null&&jV.test(t)}function wS(t){return zo(t)?`https:${t}`:t.replace(VE,"https:")}function tG(){return kr.scheme==="http"}function N3(){return kr.scheme==="https"}function tv(t,e=!1){return zo(t)?t.slice(2):(t=t.replace(zE,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function iG(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function rG(t){let e=0;if(xs(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function _ye(t,e){if(!t)return"";const i=or(t).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return r;const a=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(a,"")}function sG(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function HE(t){return t.replace(/\/+$/,"")}function nG(t){if(/^https?:\/\//i.test(t)){const e=mS(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function oG(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function aG(t){const e=Sd.httpsDomains;if(!QV(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),DV.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return tG()&&r===kr.authority&&!FV.test(t)||(N3()&&r===kr.authority||e&&e.some(a=>r===a||r.endsWith(`.${a}`))||N3()&&!x2(t))&&(t=wS(t)),t}function R3(t,e,i){if(!(e&&i&&t&&xs(t)))return t;const r=t.indexOf("//"),a=t.indexOf("/",r+2),p=t.indexOf(":",r+2),y=Math.min(a<0?t.length:a,p<0?t.length:p);return t.slice(r+2,y).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(y)}`}function L3(t){return typeof t=="string"?new Bp(bs(t)):(t.scheme||(t.scheme=kr.scheme),t)}function Sye(t){return lG.test(t)}function WE(t,e){const i=or(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function JE(t,e,i){const r=or(t),a=r.query||{};return a[e]=String(i),`${r.path}?${Su(a)}`}function Lb(t,e){const i=or(t),r=i.query||{};for(const p in e)r[p]=e[p];const a=Su(r);return a?`${i.path}?${a}`:i.path}function xye(t){if(t==null)return null;const e=t.match(KE);return e?e[2]:null}function x7(t){if(t==null)return null;const e=t.match(KE);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function $ye(t){return typeof t=="string"?Kf(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(Kf(r.result)),r.onerror=a=>i(a)})}const KE=/([^.]*)\.([^\/]*)$/,lG=/(^data:image\/svg|\.svg$)/i;function $e(t,e,i){let r,a;return e===void 0?(a=t,r=[void 0]):typeof e!="string"?(a=t,r=[void 0],i=e):(a=e,r=Array.isArray(t)?t:[t]),(p,y)=>{const m=p.constructor.prototype;for(const _ of r){const x=vE(p,_,a);x.write&&typeof x.write=="object"||(x.write={}),i&&(x.write.target=i),x.write.writer=m[y]}}}let ft=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,a,p)=>{const y=this.toJSON(r);y!==void 0&&Pr(p,y,a)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const r in e)i[e[r]]=r;return i}_getKeysSorted(e){const i=[];for(const r in e)i.push(r);return i.sort(),i}};function Rr(){return function(t,e){return new ft(t,{ignoreUnknown:!0,...e})}}let _S=class{constructor(e,i,r,a){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r;const p=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*p,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const qt=new _S(6378137,1/298.257223563,3e5,.006694379990137799),Fa=new _S(3396190,1/169.8944472236118,23e4),xu=new _S(1737400,0,0);var pc;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(pc||(pc={}));let I;const q={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(I=2e3;I<=2045;I++)q[I]=0;for(I=2056;I<=2065;I++)q[I]=0;for(I=2067;I<=2135;I++)q[I]=0;for(I=2137;I<=2154;I++)q[I]=0;for(I=2161;I<=2170;I++)q[I]=0;for(I=2172;I<=2193;I++)q[I]=0;for(I=2195;I<=2198;I++)q[I]=0;for(I=2200;I<=2203;I++)q[I]=0;for(I=2205;I<=2217;I++)q[I]=0;for(I=2222;I<=2224;I++)q[I]=1;for(I=2225;I<=2250;I++)q[I]=2;for(I=2251;I<=2253;I++)q[I]=1;for(I=2257;I<=2264;I++)q[I]=2;for(I=2274;I<=2279;I++)q[I]=2;for(I=2280;I<=2282;I++)q[I]=1;for(I=2283;I<=2289;I++)q[I]=2;for(I=2290;I<=2292;I++)q[I]=0;for(I=2308;I<=2313;I++)q[I]=0;for(I=2315;I<=2491;I++)q[I]=0;for(I=2494;I<=2866;I++)q[I]=0;for(I=2867;I<=2869;I++)q[I]=1;for(I=2870;I<=2888;I++)q[I]=2;for(I=2891;I<=2895;I++)q[I]=2;for(I=2896;I<=2898;I++)q[I]=1;for(I=2902;I<=2908;I++)q[I]=2;for(I=2915;I<=2920;I++)q[I]=2;for(I=2921;I<=2923;I++)q[I]=1;for(I=2924;I<=2930;I++)q[I]=2;for(I=2931;I<=2962;I++)q[I]=0;for(I=2964;I<=2968;I++)q[I]=2;for(I=2969;I<=2973;I++)q[I]=0;for(I=2975;I<=2991;I++)q[I]=0;for(I=2995;I<=3051;I++)q[I]=0;for(I=3054;I<=3079;I++)q[I]=0;for(I=3081;I<=3088;I++)q[I]=0;for(I=3092;I<=3101;I++)q[I]=0;for(I=3106;I<=3138;I++)q[I]=0;for(I=3146;I<=3151;I++)q[I]=0;for(I=3153;I<=3166;I++)q[I]=0;for(I=3168;I<=3172;I++)q[I]=0;for(I=3174;I<=3203;I++)q[I]=0;for(I=3294;I<=3358;I++)q[I]=0;for(I=3367;I<=3403;I++)q[I]=0;for(I=3408;I<=3416;I++)q[I]=0;for(I=3417;I<=3438;I++)q[I]=2;for(I=3441;I<=3446;I++)q[I]=2;for(I=3447;I<=3450;I++)q[I]=0;for(I=3451;I<=3459;I++)q[I]=2;for(I=3460;I<=3478;I++)q[I]=0;for(I=3554;I<=3559;I++)q[I]=0;for(I=3560;I<=3570;I++)q[I]=2;for(I=3571;I<=3581;I++)q[I]=0;for(I=3594;I<=3597;I++)q[I]=0;for(I=3601;I<=3604;I++)q[I]=0;for(I=3637;I<=3639;I++)q[I]=0;for(I=3665;I<=3667;I++)q[I]=0;for(I=3693;I<=3695;I++)q[I]=0;for(I=3701;I<=3727;I++)q[I]=0;for(I=3728;I<=3739;I++)q[I]=2;for(I=3740;I<=3751;I++)q[I]=0;for(I=3753;I<=3760;I++)q[I]=2;for(I=3761;I<=3773;I++)q[I]=0;for(I=3775;I<=3777;I++)q[I]=0;for(I=3779;I<=3781;I++)q[I]=0;for(I=3783;I<=3785;I++)q[I]=0;for(I=3788;I<=3791;I++)q[I]=0;for(I=3797;I<=3802;I++)q[I]=0;for(I=3814;I<=3816;I++)q[I]=0;for(I=3825;I<=3829;I++)q[I]=0;for(I=3832;I<=3841;I++)q[I]=0;for(I=3844;I<=3852;I++)q[I]=0;for(I=3873;I<=3885;I++)q[I]=0;for(I=3890;I<=3893;I++)q[I]=0;for(I=3907;I<=3912;I++)q[I]=0;for(I=3942;I<=3950;I++)q[I]=0;for(I=3968;I<=3970;I++)q[I]=0;for(I=3973;I<=3976;I++)q[I]=0;for(I=3986;I<=3989;I++)q[I]=0;for(I=3994;I<=3997;I++)q[I]=0;for(I=4048;I<=4051;I++)q[I]=0;for(I=4056;I<=4063;I++)q[I]=0;for(I=4093;I<=4096;I++)q[I]=0;for(I=4390;I<=4398;I++)q[I]=0;for(I=4399;I<=4413;I++)q[I]=2;for(I=4418;I<=4433;I++)q[I]=2;for(I=4455;I<=4457;I++)q[I]=2;for(I=4484;I<=4489;I++)q[I]=0;for(I=4491;I<=4554;I++)q[I]=0;for(I=4568;I<=4589;I++)q[I]=0;for(I=4652;I<=4656;I++)q[I]=0;for(I=4766;I<=4800;I++)q[I]=0;for(I=5014;I<=5016;I++)q[I]=0;for(I=5069;I<=5072;I++)q[I]=0;for(I=5105;I<=5130;I++)q[I]=0;for(I=5173;I<=5188;I++)q[I]=0;for(I=5253;I<=5259;I++)q[I]=0;for(I=5269;I<=5275;I++)q[I]=0;for(I=5292;I<=5311;I++)q[I]=0;for(I=5329;I<=5331;I++)q[I]=0;for(I=5343;I<=5349;I++)q[I]=0;for(I=5355;I<=5357;I++)q[I]=0;for(I=5387;I<=5389;I++)q[I]=0;for(I=5459;I<=5463;I++)q[I]=0;for(I=5479;I<=5482;I++)q[I]=0;for(I=5518;I<=5520;I++)q[I]=0;for(I=5530;I<=5539;I++)q[I]=0;for(I=5550;I<=5552;I++)q[I]=0;for(I=5562;I<=5583;I++)q[I]=0;for(I=5623;I<=5625;I++)q[I]=2;for(I=5631;I<=5639;I++)q[I]=0;for(I=5649;I<=5653;I++)q[I]=0;for(I=5663;I<=5680;I++)q[I]=0;for(I=5682;I<=5685;I++)q[I]=0;for(I=5875;I<=5877;I++)q[I]=0;for(I=5896;I<=5899;I++)q[I]=0;for(I=5921;I<=5940;I++)q[I]=0;for(I=6050;I<=6125;I++)q[I]=0;for(I=6244;I<=6275;I++)q[I]=0;for(I=6328;I<=6348;I++)q[I]=0;for(I=6350;I<=6356;I++)q[I]=0;for(I=6366;I<=6372;I++)q[I]=0;for(I=6381;I<=6387;I++)q[I]=0;for(I=6393;I<=6404;I++)q[I]=0;for(I=6480;I<=6483;I++)q[I]=0;for(I=6511;I<=6514;I++)q[I]=0;for(I=6579;I<=6581;I++)q[I]=0;for(I=6619;I<=6624;I++)q[I]=0;for(I=6625;I<=6627;I++)q[I]=2;for(I=6628;I<=6632;I++)q[I]=0;for(I=6634;I<=6637;I++)q[I]=0;for(I=6669;I<=6692;I++)q[I]=0;for(I=6707;I<=6709;I++)q[I]=0;for(I=6720;I<=6723;I++)q[I]=0;for(I=6732;I<=6738;I++)q[I]=0;for(I=6931;I<=6933;I++)q[I]=0;for(I=6956;I<=6959;I++)q[I]=0;for(I=7005;I<=7007;I++)q[I]=0;for(I=7057;I<=7070;I++)q[I]=2;for(I=7074;I<=7082;I++)q[I]=0;for(I=7109;I<=7118;I++)q[I]=0;for(I=7119;I<=7127;I++)q[I]=1;for(I=7374;I<=7376;I++)q[I]=0;for(I=7528;I<=7586;I++)q[I]=0;for(I=7587;I<=7645;I++)q[I]=2;for(I=7692;I<=7696;I++)q[I]=0;for(I=7755;I<=7787;I++)q[I]=0;for(I=7791;I<=7795;I++)q[I]=0;for(I=7799;I<=7801;I++)q[I]=0;for(I=7803;I<=7805;I++)q[I]=0;for(I=7825;I<=7831;I++)q[I]=0;for(I=7845;I<=7859;I++)q[I]=0;for(I=8013;I<=8032;I++)q[I]=0;for(I=8065;I<=8068;I++)q[I]=1;for(I=8518;I<=8529;I++)q[I]=2;for(I=8533;I<=8536;I++)q[I]=2;for(I=8538;I<=8540;I++)q[I]=2;for(I=8677;I<=8679;I++)q[I]=0;for(I=8836;I<=8840;I++)q[I]=0;for(I=8857;I<=8859;I++)q[I]=0;for(I=8908;I<=8910;I++)q[I]=0;for(I=9154;I<=9159;I++)q[I]=0;for(I=9205;I<=9218;I++)q[I]=0;for(I=9271;I<=9273;I++)q[I]=0;for(I=9295;I<=9297;I++)q[I]=0;for(I=9356;I<=9360;I++)q[I]=0;for(I=9404;I<=9407;I++)q[I]=0;for(I=9476;I<=9482;I++)q[I]=0;for(I=9487;I<=9494;I++)q[I]=0;for(I=9697;I<=9699;I++)q[I]=0;for(I=9821;I<=9865;I++)q[I]=0;for(I=20002;I<=20032;I++)q[I]=0;for(I=20047;I<=20049;I++)q[I]=0;for(I=20062;I<=20092;I++)q[I]=0;for(I=20135;I<=20138;I++)q[I]=0;for(I=20248;I<=20258;I++)q[I]=0;for(I=20348;I<=20358;I++)q[I]=0;for(I=20436;I<=20440;I++)q[I]=0;for(I=20822;I<=20824;I++)q[I]=0;for(I=20904;I<=20932;I++)q[I]=0;for(I=20934;I<=20936;I++)q[I]=0;for(I=21004;I<=21032;I++)q[I]=0;for(I=21035;I<=21037;I++)q[I]=0;for(I=21095;I<=21097;I++)q[I]=0;for(I=21148;I<=21150;I++)q[I]=0;for(I=21207;I<=21264;I++)q[I]=0;for(I=21307;I<=21364;I++)q[I]=0;for(I=21413;I<=21423;I++)q[I]=0;for(I=21453;I<=21463;I++)q[I]=0;for(I=21473;I<=21483;I++)q[I]=0;for(I=21780;I<=21782;I++)q[I]=0;for(I=21891;I<=21894;I++)q[I]=0;for(I=21896;I<=21899;I++)q[I]=0;for(I=22171;I<=22177;I++)q[I]=0;for(I=22181;I<=22187;I++)q[I]=0;for(I=22191;I<=22197;I++)q[I]=0;for(I=22207;I<=22222;I++)q[I]=0;for(I=22234;I<=22236;I++)q[I]=0;for(I=22243;I<=22250;I++)q[I]=0;for(I=22262;I<=22265;I++)q[I]=0;for(I=22307;I<=22322;I++)q[I]=0;for(I=22348;I<=22357;I++)q[I]=0;for(I=22407;I<=22422;I++)q[I]=0;for(I=22462;I<=22465;I++)q[I]=0;for(I=22521;I<=22525;I++)q[I]=0;for(I=22607;I<=22622;I++)q[I]=0;for(I=22641;I<=22646;I++)q[I]=0;for(I=22648;I<=22657;I++)q[I]=0;for(I=22707;I<=22722;I++)q[I]=0;for(I=22762;I<=22765;I++)q[I]=0;for(I=22991;I<=22994;I++)q[I]=0;for(I=23028;I<=23038;I++)q[I]=0;for(I=23830;I<=23853;I++)q[I]=0;for(I=23866;I<=23872;I++)q[I]=0;for(I=23877;I<=23884;I++)q[I]=0;for(I=23886;I<=23894;I++)q[I]=0;for(I=23946;I<=23948;I++)q[I]=0;for(I=24311;I<=24313;I++)q[I]=0;for(I=24342;I<=24347;I++)q[I]=0;for(I=24370;I<=24374;I++)q[I]=10;for(I=24375;I<=24381;I++)q[I]=0;for(I=24718;I<=24721;I++)q[I]=0;for(I=24817;I<=24821;I++)q[I]=0;for(I=24877;I<=24882;I++)q[I]=0;for(I=24891;I<=24893;I++)q[I]=0;for(I=25391;I<=25395;I++)q[I]=0;for(I=25828;I<=25838;I++)q[I]=0;for(I=26191;I<=26195;I++)q[I]=0;for(I=26391;I<=26393;I++)q[I]=0;for(I=26701;I<=26722;I++)q[I]=0;for(I=26729;I<=26799;I++)q[I]=2;for(I=26801;I<=26803;I++)q[I]=2;for(I=26811;I<=26813;I++)q[I]=2;for(I=26847;I<=26870;I++)q[I]=2;for(I=26891;I<=26899;I++)q[I]=0;for(I=26901;I<=26923;I++)q[I]=0;for(I=26929;I<=26946;I++)q[I]=0;for(I=26948;I<=26998;I++)q[I]=0;for(I=27037;I<=27040;I++)q[I]=0;for(I=27205;I<=27232;I++)q[I]=0;for(I=27258;I<=27260;I++)q[I]=0;for(I=27391;I<=27398;I++)q[I]=0;for(I=27561;I<=27564;I++)q[I]=0;for(I=27571;I<=27574;I++)q[I]=0;for(I=27581;I<=27584;I++)q[I]=0;for(I=27591;I<=27594;I++)q[I]=0;for(I=28191;I<=28193;I++)q[I]=0;for(I=28348;I<=28358;I++)q[I]=0;for(I=28402;I<=28432;I++)q[I]=0;for(I=28462;I<=28492;I++)q[I]=0;for(I=29118;I<=29122;I++)q[I]=0;for(I=29168;I<=29172;I++)q[I]=0;for(I=29177;I<=29185;I++)q[I]=0;for(I=29187;I<=29195;I++)q[I]=0;for(I=29900;I<=29903;I++)q[I]=0;for(I=30161;I<=30179;I++)q[I]=0;for(I=30491;I<=30494;I++)q[I]=0;for(I=30729;I<=30732;I++)q[I]=0;for(I=31251;I<=31259;I++)q[I]=0;for(I=31265;I<=31268;I++)q[I]=0;for(I=31275;I<=31279;I++)q[I]=0;for(I=31281;I<=31297;I++)q[I]=0;for(I=31461;I<=31469;I++)q[I]=0;for(I=31491;I<=31495;I++)q[I]=0;for(I=31917;I<=31922;I++)q[I]=0;for(I=31965;I<=32e3;I++)q[I]=0;for(I=32001;I<=32003;I++)q[I]=2;for(I=32005;I<=32031;I++)q[I]=2;for(I=32033;I<=32060;I++)q[I]=2;for(I=32064;I<=32067;I++)q[I]=2;for(I=32074;I<=32077;I++)q[I]=2;for(I=32081;I<=32086;I++)q[I]=0;for(I=32107;I<=32130;I++)q[I]=0;for(I=32133;I<=32159;I++)q[I]=0;for(I=32164;I<=32167;I++)q[I]=2;for(I=32180;I<=32199;I++)q[I]=0;for(I=32201;I<=32260;I++)q[I]=0;for(I=32301;I<=32360;I++)q[I]=0;for(I=32601;I<=32662;I++)q[I]=0;for(I=32664;I<=32667;I++)q[I]=2;for(I=32701;I<=32761;I++)q[I]=0;for(I=53001;I<=53004;I++)q[I]=0;for(I=53008;I<=53019;I++)q[I]=0;for(I=53021;I<=53032;I++)q[I]=0;for(I=53034;I<=53037;I++)q[I]=0;for(I=53042;I<=53046;I++)q[I]=0;for(I=53074;I<=53080;I++)q[I]=0;for(I=54001;I<=54004;I++)q[I]=0;for(I=54008;I<=54019;I++)q[I]=0;for(I=54021;I<=54032;I++)q[I]=0;for(I=54034;I<=54037;I++)q[I]=0;for(I=54042;I<=54046;I++)q[I]=0;for(I=54048;I<=54053;I++)q[I]=0;for(I=54074;I<=54080;I++)q[I]=0;for(I=54098;I<=54101;I++)q[I]=0;for(I=102001;I<=102040;I++)q[I]=0;for(I=102042;I<=102063;I++)q[I]=0;for(I=102065;I<=102067;I++)q[I]=0;for(I=102070;I<=102117;I++)q[I]=0;for(I=102122;I<=102216;I++)q[I]=0;for(I=102221;I<=102377;I++)q[I]=0;for(I=102382;I<=102388;I++)q[I]=0;for(I=102389;I<=102398;I++)q[I]=2;for(I=102399;I<=102444;I++)q[I]=0;for(I=102445;I<=102447;I++)q[I]=2;for(I=102448;I<=102458;I++)q[I]=0;for(I=102459;I<=102468;I++)q[I]=2;for(I=102469;I<=102499;I++)q[I]=0;for(I=102500;I<=102519;I++)q[I]=1;for(I=102520;I<=102524;I++)q[I]=0;for(I=102525;I<=102529;I++)q[I]=2;for(I=102530;I<=102588;I++)q[I]=0;for(I=102590;I<=102598;I++)q[I]=0;for(I=102601;I<=102603;I++)q[I]=0;for(I=102605;I<=102628;I++)q[I]=0;for(I=102629;I<=102646;I++)q[I]=2;for(I=102648;I<=102700;I++)q[I]=2;for(I=102701;I<=102703;I++)q[I]=0;for(I=102707;I<=102730;I++)q[I]=2;for(I=102733;I<=102758;I++)q[I]=2;for(I=102767;I<=102900;I++)q[I]=0;for(I=102901;I<=102933;I++)q[I]=2;for(I=102934;I<=102950;I++)q[I]=13;for(I=102951;I<=102955;I++)q[I]=0;for(I=102961;I<=102963;I++)q[I]=0;for(I=102965;I<=102969;I++)q[I]=0;for(I=102971;I<=102973;I++)q[I]=0;for(I=102975;I<=102989;I++)q[I]=0;for(I=102990;I<=102992;I++)q[I]=1;for(I=102997;I<=103002;I++)q[I]=0;for(I=103003;I<=103008;I++)q[I]=2;for(I=103009;I<=103011;I++)q[I]=0;for(I=103012;I<=103014;I++)q[I]=2;for(I=103019;I<=103021;I++)q[I]=0;for(I=103022;I<=103024;I++)q[I]=2;for(I=103029;I<=103031;I++)q[I]=0;for(I=103032;I<=103034;I++)q[I]=2;for(I=103065;I<=103068;I++)q[I]=0;for(I=103074;I<=103076;I++)q[I]=0;for(I=103077;I<=103079;I++)q[I]=1;for(I=103080;I<=103082;I++)q[I]=0;for(I=103083;I<=103085;I++)q[I]=2;for(I=103090;I<=103093;I++)q[I]=0;for(I=103097;I<=103099;I++)q[I]=0;for(I=103100;I<=103102;I++)q[I]=2;for(I=103107;I<=103109;I++)q[I]=0;for(I=103110;I<=103112;I++)q[I]=2;for(I=103113;I<=103116;I++)q[I]=0;for(I=103117;I<=103120;I++)q[I]=2;for(I=103153;I<=103157;I++)q[I]=0;for(I=103158;I<=103162;I++)q[I]=2;for(I=103163;I<=103165;I++)q[I]=0;for(I=103166;I<=103168;I++)q[I]=1;for(I=103169;I<=103171;I++)q[I]=2;for(I=103186;I<=103188;I++)q[I]=0;for(I=103189;I<=103191;I++)q[I]=2;for(I=103192;I<=103195;I++)q[I]=0;for(I=103196;I<=103199;I++)q[I]=2;for(I=103200;I<=103224;I++)q[I]=0;for(I=103225;I<=103227;I++)q[I]=1;for(I=103232;I<=103237;I++)q[I]=0;for(I=103238;I<=103243;I++)q[I]=2;for(I=103244;I<=103246;I++)q[I]=0;for(I=103247;I<=103249;I++)q[I]=2;for(I=103254;I<=103256;I++)q[I]=0;for(I=103257;I<=103259;I++)q[I]=2;for(I=103264;I<=103266;I++)q[I]=0;for(I=103267;I<=103269;I++)q[I]=2;for(I=103300;I<=103375;I++)q[I]=0;for(I=103381;I<=103383;I++)q[I]=0;for(I=103384;I<=103386;I++)q[I]=1;for(I=103387;I<=103389;I++)q[I]=0;for(I=103390;I<=103392;I++)q[I]=2;for(I=103397;I<=103399;I++)q[I]=0;for(I=103400;I<=103471;I++)q[I]=2;for(I=103476;I<=103478;I++)q[I]=0;for(I=103479;I<=103481;I++)q[I]=2;for(I=103486;I<=103488;I++)q[I]=0;for(I=103489;I<=103491;I++)q[I]=2;for(I=103492;I<=103495;I++)q[I]=0;for(I=103496;I<=103499;I++)q[I]=2;for(I=103528;I<=103543;I++)q[I]=0;for(I=103544;I<=103548;I++)q[I]=2;for(I=103549;I<=103551;I++)q[I]=0;for(I=103552;I<=103554;I++)q[I]=1;for(I=103555;I<=103557;I++)q[I]=2;for(I=103558;I<=103560;I++)q[I]=0;for(I=103571;I<=103573;I++)q[I]=0;for(I=103574;I<=103576;I++)q[I]=2;for(I=103577;I<=103580;I++)q[I]=0;for(I=103581;I<=103583;I++)q[I]=2;for(I=103595;I<=103694;I++)q[I]=0;for(I=103696;I<=103699;I++)q[I]=0;for(I=103700;I<=103793;I++)q[I]=2;for(I=103794;I<=103890;I++)q[I]=0;for(I=103891;I<=103896;I++)q[I]=2;for(I=103900;I<=103971;I++)q[I]=2;for(I=103972;I<=103977;I++)q[I]=0;for(I=112e3;I<=112101;I++)q[I]=0;const uG={102113:!0,102100:!0,3857:!0,3785:!0},hG={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},$7='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',dy=[-20037508342788905e-9,20037508342788905e-9],fy=[-20037508342787e-6,20037508342787e-6],YE={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:dy,origin:fy,dx:1e-5},102100:{wkTemplate:$7,valid:dy,origin:fy,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:dy,origin:fy,dx:1e-5},3857:{wkTemplate:$7,valid:dy,origin:fy,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Ci(t,e){return t===e||t!=null&&e!=null&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||dc(t)&&dc(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function Jn(t){return sr(t)&&t.wkid&&YE[t.wkid]||null}function ZE(t){return!!sr(t)&&(t.wkid?q[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function cG(t){return!(xS(t)||TS(t))}function Yf(t){return sr(t)&&t.wkid===4326}function Mye(t){return sr(t)&&t.wkid===pc.CGCS2000}function dc(t){return sr(t)&&t.wkid!=null&&uG[t.wkid]===!0}function pG(t){return sr(t)&&t.wkid===32662}function SS(t){return t===pc.GCSMARS2000||t===pc.GCSMARS2000_SPHERE}function xS(t){return sr(t)&&t.wkid!=null&&SS(t.wkid)}function $S(t){return t===pc.GCSMOON2000}function TS(t){return sr(t)&&t.wkid!=null&&$S(t.wkid)}function dG(t){return sr(t)&&t.wkid!=null&&hG[t.wkid]===!0}function sr(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const fG={wkid:4326,wkt:c2(YE[4326].wkTemplate,{Central_Meridian:"0.0"})},yG={wkid:102100,latestWkid:3857},mG={wkid:32662};function IS(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const gG=IS(qt),XE=IS(Fa),QE=IS(xu),vG={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${qt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function bG(t){return t!=null&&(xS(t)||Ci(t,XE))?Fa:t!=null&&(TS(t)||Ci(t,QE))?xu:qt}function Eye(t){return SS(t)?Fa:$S(t)?xu:qt}const eA=39.37,wG=qt.radius*Math.PI/200,tA=/UNIT\[([^\]]+)\]\]$/i,tc=q,iA=/UNIT\[([^\]]+)\]/i,_G=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),SG=Rr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),ao=t=>t*t,nl=t=>t*t*t,Zf={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:ao(.001)},"square-centimeters":{inBaseUnits:ao(.01)},"square-decimeters":{inBaseUnits:ao(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:ao(1e3)},"square-inches":{inBaseUnits:ao(.0254)},"square-feet":{inBaseUnits:ao(.3048)},"square-yards":{inBaseUnits:ao(.9144)},"square-miles":{inBaseUnits:ao(1609.344)},"square-us-feet":{inBaseUnits:ao(1200/3937)},acres:{inBaseUnits:.0015625*ao(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*nl(.001)},"cubic-centimeters":{inBaseUnits:1e3*nl(.01)},"cubic-decimeters":{inBaseUnits:1e3*nl(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*nl(1e3)},"cubic-inches":{inBaseUnits:1e3*nl(.0254)},"cubic-feet":{inBaseUnits:1e3*nl(.3048)},"cubic-yards":{inBaseUnits:1e3*nl(.9144)},"cubic-miles":{inBaseUnits:1e3*nl(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},xG=(()=>{const t={};for(const e in Zf)for(const i in Zf[e].units)t[i]=e;return t})();function $G(t,e,i){return t*Zf[i].units[e].inBaseUnits}function TG(t,e,i){return t/Zf[i].units[e].inBaseUnits}function j3(t){const e=xG[t];if(!e)throw new Error("unknown type");return e}function T7(t,e=null){return e=e||j3(t),Zf[e].baseUnit===t}function Ps(t,e,i){if(e===i)return t;const r=j3(e);if(r!==j3(i))throw new Error("incompatible units");const a=T7(e,r)?t:$G(t,e,r);return T7(i,r)?a:TG(a,i,r)}function IG(t,e,i){return Ps(t,e,"meters")/(i*Math.PI/180)}function rA(t){return SG.fromJSON(t.toLowerCase())||null}function od(t){if(t!=null&&!cG(t))return 1;const e=Jo(t);return e>1e5?1:e}function MG(t){return Jo(t)>=bG(t).metersPerDegree?"meters":nA(t)}function Jo(t,e=qt.metersPerDegree){return EG(t,!0)??e}function EG(t,e=!1){const i=t!=null?t.wkid:null,r=t!=null?t.wkt:null;let a=null;if(i){if(SS(i))return Fa.metersPerDegree;if($S(i))return xu.metersPerDegree;a=tc.values[tc[i]],!a&&e&&_G.has(i)&&(a=wG)}else r&&(aA(r)?a=I7(tA.exec(r),a):oA(r)&&(a=I7(iA.exec(r),a)));return a}function Aye(t){return t.isGeographic?1:Jo(t)}function I7(t,e){return t&&t[1]?sA(t[1]):e}function sA(t){return parseFloat(t.split(",")[1])}function nA(t){const e=t!=null?t.wkid:null,i=t!=null?t.wkt:null;let r=null;if(e)r=tc.units[tc[e]];else if(i){const a=aA(i)?tA:oA(i)?iA:null;if(a){const p=a.exec(i);p&&p[1]&&(r=kG(p[1]))}}return r!=null?rA(r):null}function oA(t){return/^GEOCCS/i.test(t)}function aA(t){return/^PROJCS/i.test(t)}const AG=1e-7;function kG(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!tc.units.includes(i)){const r=sA(t);i=null;const a=tc.values;for(let p=0;p<a.length;++p)if(Math.abs(r-a[p])<AG){i=tc.units[p];break}}return i}const OG={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},CG={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},PG={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},NG=Rr()(OG),RG=Rr()(CG),kye=Rr()(PG);var ho;let Rt=ho=class extends de{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return ho.WebMercator;if(t.wkid===4326)return ho.WGS84}const e=new ho;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Yf(this)}get isWebMercator(){return dc(this)}get isGeographic(){return ZE(this)}get isWrappable(){return dG(this)}get metersPerUnit(){return Jo(this)}get unit(){return nA(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===ho.WGS84)return ho.WGS84;if(this===ho.WebMercator)return ho.WebMercator;const t=new ho;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=se(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:r}=t.imageCoordinateSystem,a=this.imageCoordinateSystem;return e==null||r?JSON.stringify(a)===JSON.stringify(t.imageCoordinateSystem):i?a.id===e&&a.referenceServiceName===i:a.id===e}return Ci(this,t)}toJSON(t){return this.write(void 0,t)}};Rt.GCS_NAD_1927=null,Rt.WGS84=null,Rt.WebMercator=null,Rt.PlateCarree=null,v([S({readOnly:!0})],Rt.prototype,"isWGS84",null),v([S({readOnly:!0})],Rt.prototype,"isWebMercator",null),v([S({readOnly:!0})],Rt.prototype,"isGeographic",null),v([S({readOnly:!0})],Rt.prototype,"isWrappable",null),v([S({type:jt,json:{write:!0}})],Rt.prototype,"latestWkid",void 0),v([S({readOnly:!0})],Rt.prototype,"metersPerUnit",null),v([S({readOnly:!0})],Rt.prototype,"unit",null),v([S({type:jt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Rt.prototype,"wkid",void 0),v([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Rt.prototype,"wkt",void 0),v([$e("wkt"),$e("web-scene","wkt")],Rt.prototype,"writeWkt",null),v([S({type:jt,json:{write:!0}})],Rt.prototype,"vcsWkid",void 0),v([S({type:jt,json:{write:!0}})],Rt.prototype,"latestVcsWkid",void 0),v([S()],Rt.prototype,"imageCoordinateSystem",void 0),Rt=ho=v([B("esri.geometry.SpatialReference")],Rt),Rt.prototype.toJSON.isDefaultToJSON=!0,Rt.GCS_NAD_1927=new Rt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Rt.WGS84=new Rt(fG),Rt.WebMercator=new Rt(yG),Rt.PlateCarree=new Rt(mG),Object.freeze&&(Object.freeze(Rt.GCS_NAD_1927),Object.freeze(Rt.WGS84),Object.freeze(Rt.WebMercator));const Je=Rt,lA="20230626",uA="b81703b48e0b92e492f4cc6b739af02a9af50038",LG="4.27";let MS=LG;MS="4.27.6";const jG={async request(t,e){var m,_;const{default:i}=await we(()=>Promise.resolve().then(()=>iq),void 0),r=t.options,a=r.responseType;r.signal=e==null?void 0:e.signal,r.responseType=a==="native"||a==="native-request-init"?"native-request-init":a&&["blob","json","text"].includes(a)&&((m=UE(t.url))!=null&&m.after)?a:"array-buffer";const p=await i(t.url,r),y={data:p.data,httpStatus:p.httpStatus,ssl:p.ssl};switch((_=p.requestOptions)==null?void 0:_.responseType){case"native-request-init":return delete y.data.signal,y;case"blob":y.data=await y.data.arrayBuffer();break;case"json":y.data=new TextEncoder().encode(JSON.stringify(y.data)).buffer;break;case"text":y.data=new TextEncoder().encode(y.data).buffer}return{result:y,transferList:[y.data]}}};let gt;function Oye(t){gt=t}function Cye(t){const e=gt==null?void 0:gt.findCredential(t);return e!=null&&e.token?JE(t,"token",e.token):t}le("host-webworker");const DG=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function hA(t){const e=Wn(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!DG.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function FG(t,e,i=!1,r){return new Promise((a,p)=>{if(tn(r))return void p(M7());let y=()=>{x(),p(new Error(`Unable to load ${e}`))},m=()=>{const M=t;x(),a(M)},_=()=>{if(!t)return;const M=t;x(),M.src="",p(M7())};const x=()=>{le("esri-image-decode")||(t.removeEventListener("error",y),t.removeEventListener("load",m)),y=null,m=null,t=null,r!=null&&r.removeEventListener("abort",_),_=null,i&&URL.revokeObjectURL(e)};r!=null&&r.addEventListener("abort",_),le("esri-image-decode")?t.decode().then(m,y):(t.addEventListener("error",y),t.addEventListener("load",m))})}function M7(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const zG="Timeout exceeded";function VG(){return new Error(zG)}function GG(t){_t.request.crossOriginNoCorsDomains||(_t.request.crossOriginNoCorsDomains={});const e=_t.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Wn(i)??""]=0:(e[Wn("http://"+i)??""]=0,e[Wn("https://"+i)??""]=0)}function qG(t){const e=_t.request.crossOriginNoCorsDomains;if(e){let i=Wn(t);if(i)return i=i.toLowerCase(),!nd(i,fS())&&e[i]<Date.now()-36e5}return!1}async function UG(t){var a;const e=_t.request.crossOriginNoCorsDomains,i=Wn(t);e&&i&&(e[i.toLowerCase()]=Date.now());const r=or(t);t=r.path,((a=r.query)==null?void 0:a.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function ot(t,e){var x;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=yS(e.query.toString().replaceAll("+"," ")));const i=Ic(t),r=$2(t);r||i||(t=Hn(t));const a={url:t,requestOptions:{...e}};let p=UE(t);if(p){const M=await XG(p,a);if(M!=null)return{data:M,getHeader:ES,httpStatus:200,requestOptions:a.requestOptions,url:a.url};p.after||p.error||(p=null)}if(t=a.url,(e=a.requestOptions).responseType==="image"&&(le("host-webworker")||le("host-node")))throw No("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),a);if(e.method==="head"){if(e.body)throw No("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),a);if(i||r)throw No("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),a)}if(await KG(),iv)return iv.execute(t,e);const y=new AbortController;Ss(e,()=>y.abort());const m={controller:y,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:p,params:a,redoRequest:!1,useIdentity:zn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await eq(m);return(x=p==null?void 0:p.after)==null||x.call(p,_),_}let iv;const zn=_t.request,cA="FormData"in globalThis,BG=[499,498,403,401],HG=["COM_0056","COM_0057","SB_0008"],WG=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ES=()=>null,rv=Symbol();function JG(t){const e=Wn(t);e&&!ot._corsServers.includes(e)&&ot._corsServers.push(e)}function E7(t){const e=Wn(t);return!e||e.endsWith(".arcgis.com")||ot._corsServers.includes(e)||gS(e)}function No(t,e,i,r){let a="Error";const p={url:i.url,requestOptions:i.requestOptions,getHeader:ES,ssl:!1};if(e instanceof ie)return e.details?(e.details=se(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=p,e;if(e){const y=r&&(x=>r.headers.get(x)),m=r==null?void 0:r.status,_=e.message;_&&(a=_),y&&(p.getHeader=y),p.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||m||0,p.subCode=e.subcode,p.messageCode=e.messageCode,typeof e.details=="string"?p.messages=[e.details]:p.messages=e.details,p.raw=rv in e?e[rv]:e}return dr(e)?hi():new ie(t,a,p)}async function KG(){le("host-webworker")?iv||(iv=await we(()=>import("./request-238dc55d.js"),[])):ot._abortableFetch||(ot._abortableFetch=globalThis.fetch.bind(globalThis))}async function D3(){gt||await we(()=>import("./IdentityManager-14b14fcb.js"),[])}async function YG(t){var m;const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,a=i.body;let p=null,y=null;if(cA&&"HTMLFormElement"in globalThis&&(a instanceof FormData?p=a:a instanceof HTMLFormElement&&(p=new FormData(a))),typeof a=="string"&&(y=a),t.fetchOptions={cache:i.cacheBust&&!("polyfill"in ot._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:zn.priority,redirect:"follow",signal:r},(p||y)&&(t.fetchOptions.body=p||y),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(m=i.query)!=null&&m.token||p!=null&&p.get("token")),!t.hasToken&&_t.apiKey&&hA(e)&&(i.query||(i.query={}),i.query.token=_t.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!pA(e)&&!tn(r)){let _;i.authMode==="immediate"?(await D3(),_=await gt.getCredential(e,{signal:r}),t.credential=_):i.authMode==="no-prompt"?(await D3(),_=await gt.getCredential(e,{prompt:!1,signal:r}).catch(()=>{}),t.credential=_):gt&&(_=gt.findCredential(e)),_&&(t.credentialToken=_.token,t.useSSL=!!_.ssl)}}function pA(t){return WG.some(e=>e.test(t))}async function ZG(t){let e=t.params.url;const i=t.params.requestOptions,r=t.fetchOptions??{},a=$2(e)||Ic(e),p=i.responseType||"json",y=a?0:i.timeout!=null?i.timeout:zn.timeout;let m=!1;if(!a){t.useSSL&&(e=wS(e)),i.cacheBust&&r.cache==="default"&&(e=JE(e,"request.preventCache",Date.now()));let C={...i.query};t.credentialToken&&(C.token=t.credentialToken);let N=Su(C);le("esri-url-encodes-apostrophe")&&(N=N.replaceAll("'","%27"));const j=e.length+1+N.length;let D;m=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||j>zn.maxUrlLength;const z=i.useProxy||!!x2(e);if(z){const W=BV(e);D=W.path,!m&&D.length+1+j>zn.maxUrlLength&&(m=!0),W.query&&(C={...W.query,...C})}if(r.method==="HEAD"&&(m||z)){if(m)throw j>zn.maxUrlLength?No("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):No("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(z)throw No("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(m?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=Lb(e,C):(r.body=Su(C),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=Lb(e,C),z&&(t.useProxy=!0,e=`${D}?${e}`),C.token&&cA&&r.body instanceof FormData&&!PV(e)&&r.body.set("token",C.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!nd(e,fS())){if(gS(e))t.withCredentials=!0;else if(gt){const W=gt.findServerInfo(e);W!=null&&W.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(r.credentials="include",qG(e)&&await UG(m?Lb(e,C):e))}let _,x,M=0,A=!1;y>0&&(M=setTimeout(()=>{A=!0,t.controller.abort()},y));try{if(i.responseType==="native-request-init")x=r,x.url=e;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||m||QG(i.headers)||!a&&!t.useProxy&&zn.proxyUrl&&!E7(e)){if(_=await ot._abortableFetch(e,r),t.useProxy||JG(e),i.responseType==="native")x=_;else if(r.method!=="HEAD")if(_.ok){switch(p){case"array-buffer":x=await _.arrayBuffer();break;case"blob":case"image":x=await _.blob();break;default:x=await _.text()}if(M&&(clearTimeout(M),M=0),p==="json"||p==="xml"||p==="document")if(x)switch(p){case"json":x=JSON.parse(x);break;case"xml":x=A7(x,"application/xml");break;case"document":x=A7(x,"text/html")}else x=null;if(x){if(p==="array-buffer"||p==="blob"){const C=_.headers.get("Content-Type");if(C&&/application\/json|text\/plain/i.test(C)&&x[p==="blob"?"size":"byteLength"]<=750)try{const N=await new Response(x).json();N.error&&(x=N)}catch{}}p==="image"&&x instanceof Blob&&(x=await k7(URL.createObjectURL(x),t,!0))}}else{x=await _.text();try{x=JSON.parse(x)}catch{}}}else x=await k7(e,t)}catch(C){if(C.name==="AbortError")throw A?VG():hi("Request canceled");if(!(!_&&C instanceof TypeError&&zn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||E7(e))throw C;t.redoRequest=!0,HV({proxyUrl:zn.proxyUrl,urlPrefix:Wn(e)??""})}finally{M&&clearTimeout(M)}return[_,x]}async function XG(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(a){i=No("request:interceptor",a,e)}if((r instanceof Error||r instanceof ie)&&(i=No("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function QG(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function A7(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function eq(t){var p,y;let e,i;await YG(t);try{do[e,i]=await ZG(t);while(!await tq(t,e,i))}catch(m){const _=No("request:server",m,t.params,e);throw _.details.ssl=t.useSSL,(p=t.interceptor)!=null&&p.error&&t.interceptor.error(_),_}const r=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&((y=i.user)!=null&&y.username)&&!gS(r)){const m=Wn(r,!0);m&&zn.trustedServers.push(m)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&GG(i.authorizedCrossOriginNoCorsDomains)}const a=t.credential;if(a&&gt){const m=gt.findServerInfo(a.server);let _=m==null?void 0:m.owningSystemUrl;if(_){_=_.replace(/\/?$/,"/sharing");const x=gt.findCredential(_,a.userId);x&&gt._getIdenticalSvcIdx(_,x)===-1&&x.resources.unshift(_)}}return{data:i,getHeader:e?m=>e==null?void 0:e.headers.get(m):ES,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function tq(t,e,i){var x;if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let a,p;if(i&&(i.error?a=i.error:i.status==="error"&&Array.isArray(i.messages)&&(a={...i},a[rv]=i,a.details=i.messages)),!a&&!e.ok)throw a=new Error(`Unable to load ${e.url} status: ${e.status}`),a[rv]=i,a;let y,m=null;a&&(p=Number(a.code),m=a.hasOwnProperty("subcode")?Number(a.subcode):null,y=a.messageCode,y=y==null?void 0:y.toUpperCase());const _=r.authMode;if(p===403&&(m===4||(x=a.message)!=null&&x.toLowerCase().includes("ssl")&&!a.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(_!=="no-prompt"||p===498)&&p!==void 0&&BG.includes(p)&&!pA(t.params.url)&&(p!==403||y&&!HG.includes(y)&&(m==null||m===2&&t.credentialToken))){await D3();try{const M=await gt.getCredential(t.params.url,{error:No("request:server",a,t.params),prompt:_!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=M,t.credentialToken=M.token,t.useSSL=t.useSSL||M.ssl,!1}catch(M){if(_==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;a=M}}if(a)throw a;return!0}function k7(t,e,i=!1){const r=e.controller.signal,a=new Image;return e.withCredentials?a.crossOrigin="use-credentials":a.crossOrigin="anonymous",a.alt="",a.fetchPriority=zn.priority,a.src=t,FG(a,t,i,r)}ot._abortableFetch=null,ot._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const iq=Object.freeze(Object.defineProperty({__proto__:null,default:ot},Symbol.toStringTag,{value:"Module"}));function ge(t,e,i){let r,a;return e===void 0||Array.isArray(e)?(a=t,i=e,r=[void 0]):(a=e,r=Array.isArray(t)?t:[t]),(p,y)=>{const m=p.constructor.prototype;r.forEach(_=>{const x=vE(p,_,a);x.read&&typeof x.read=="object"||(x.read={}),x.read.reader=m[y],i&&(x.read.source=(x.read.source||[]).concat(i))})}}let co=class extends de{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Je.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Je)return e;if(e!=null){const r=new Je;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};v([S()],co.prototype,"type",void 0),v([S({readOnly:!0})],co.prototype,"cache",null),v([S({readOnly:!0})],co.prototype,"extent",null),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],co.prototype,"hasM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],co.prototype,"hasZ",void 0),v([S({type:Je,json:{write:!0},value:Je.WGS84})],co.prototype,"spatialReference",void 0),v([ge("spatialReference")],co.prototype,"readSpatialReference",null),co=v([B("esri.geometry.Geometry")],co);const Pu=co,rq=Object.prototype.toString;function sq(t){const e="__accessorMetadata__"in t?ri(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return nq.apply(this,i)}}function nq(t,e,i,r){h2(t,e).cast=r}function oq(t){return(e,i)=>{h2(e,t).cast=e[i]}}function It(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&rq.call(t[0])==="[object Function]"?sq(t[0]):t.length===1&&typeof t[0]=="string"?oq(t[0]):void 0}function aq(t,e){const i=t.x-e.x,r=t.y-e.y,a=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+r*r+a*a)}const lq=57.29577951308232,uq=.017453292519943;function O7(t){return t*lq}function C7(t){return t*uq}function Nye(t){return Math.PI/2-2*Math.atan(Math.exp(-t/qt.radius))}function F3(t){return t.wkid!=null||t.wkt!=null}const jb=[0,0];function sv(t,e,i,r,a){const p=t,y=a;if(y.spatialReference=i,"x"in p&&"x"in y)[y.x,y.y]=e(p.x,p.y,jb,r);else if("xmin"in p&&"xmin"in y)[y.xmin,y.ymin]=e(p.xmin,p.ymin,jb,r),[y.xmax,y.ymax]=e(p.xmax,p.ymax,jb,r);else if("paths"in p&&"paths"in y||"rings"in p&&"rings"in y){const m="paths"in p?p.paths:p.rings,_=[];let x;for(let M=0;M<m.length;M++){const A=m[M];x=[],_.push(x);for(let C=0;C<A.length;C++)x.push(e(A[C][0],A[C][1],[0,0],r)),A[C].length>2&&x[C].push(A[C][2]),A[C].length>3&&x[C].push(A[C][3])}"paths"in y?y.paths=_:y.rings=_}else if("points"in p&&"points"in y){const m=p.points,_=[];for(let x=0;x<m.length;x++)_[x]=e(m[x][0],m[x][1],[0,0],r),m[x].length>2&&_[x].push(m[x][2]),m[x].length>3&&_[x].push(m[x][3]);y.points=_}return a}function xm(t,e){const i=t&&(F3(t)?t:t.spatialReference),r=e&&(F3(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Ci(r,i)||dc(r)&&Yf(i)||dc(i)&&Yf(r))}function T2(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(F3(e)?e:e.spatialReference);return xm(i,r)?Ci(i,r)?se(t):dc(r)?sv(t,Rp,Je.WebMercator,!1,se(t)):Yf(r)?sv(t,vf,Je.WGS84,!1,se(t)):null:null}function Rp(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=C7(e);return i[0]=C7(t)*qt.radius,i[1]=qt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function vf(t,e,i=[0,0],r=!1){const a=O7(t/qt.radius);return i[0]=r?a:a-360*Math.floor((a+180)/360),i[1]=O7(Math.PI/2-2*Math.atan(Math.exp(-e/qt.radius))),i}function vu(t,e=!1,i=se(t)){return sv(t,Rp,Je.WebMercator,e,i)}function Lp(t,e=!1,i=se(t)){return sv(t,vf,Je.WGS84,e,i)}var $m;const Ud=[0,0];function P7(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let jr=$m=class extends Pu{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,a){let p;if(Array.isArray(t))p=t,a=e,t=p[0],e=p[1],i=p[2],r=p[3];else if(t&&typeof t=="object"){if(p=t,t=p.x!=null?p.x:p.longitude,e=p.y!=null?p.y:p.latitude,i=p.z,r=p.m,(a=p.spatialReference)&&a.declaredClass!=="esri.geometry.SpatialReference"&&(a=new Je(a)),p.longitude!=null||p.latitude!=null){if(p.longitude==null)me.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(p.latitude==null)me.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!p.declaredClass&&a&&a.isWebMercator){const m=Rp(p.longitude,p.latitude,Ud);t=m[0],e=m[1]}}}else P7(i)?(a=i,i=null):P7(r)&&(a=r,r=null);const y={x:t,y:e};return y.x==null&&y.y!=null?me.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&me.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),a!=null&&(y.spatialReference=a),i!=null&&(y.z=i),r!=null&&(y.m=r),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return vf(e,i,Ud)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Rp(i,t,Ud)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return vf(t,e,Ud)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Rp(t,e,Ud)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new $m;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return $m.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:a,spatialReference:p}=this,{z:y,m}=t;let{x:_,y:x,spatialReference:M}=t;if(!p.equals(M))if(p.isWebMercator&&M.isWGS84)[_,x]=Rp(_,x),M=p;else{if(!p.isWGS84||!M.isWebMercator)return!1;[_,x]=vf(_,x),M=p}return e===_&&i===x&&r===y&&a===m&&p.wkid===M.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Jn(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,a=2*r;let p;return e>r?(p=Math.ceil(Math.abs(e-r)/a),e-=p*a):e<i&&(p=Math.ceil(Math.abs(e-i)/a),e+=p*a),this._set("x",e),this}distance(t){return aq(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};v([S({readOnly:!0})],jr.prototype,"cache",null),v([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],jr.prototype,"hasM",null),v([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],jr.prototype,"hasZ",null),v([S({type:Number})],jr.prototype,"latitude",null),v([S({type:Number})],jr.prototype,"longitude",null),v([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),It(t=>isNaN(t)?t:Ks(t))],jr.prototype,"x",void 0),v([$e("x")],jr.prototype,"writeX",null),v([ge("x")],jr.prototype,"readX",null),v([S({type:Number,json:{write:!0}})],jr.prototype,"y",void 0),v([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],jr.prototype,"z",void 0),v([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],jr.prototype,"m",void 0),jr=$m=v([B("esri.geometry.Point")],jr),jr.prototype.toJSON.isDefaultToJSON=!0;const Ue=jr,Db=[0,0];function I2(t,e){return e!=null&&Gr(t,e.x,e.y,e.z)}function Rye(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!ad(t,i))return!1;return!0}function hq(t,e){const{xmin:i,ymin:r,zmin:a,xmax:p,ymax:y,zmax:m}=e;return t.hasZ&&e.hasZ?Gr(t,i,r,a)&&Gr(t,i,y,a)&&Gr(t,p,y,a)&&Gr(t,p,r,a)&&Gr(t,i,r,m)&&Gr(t,i,y,m)&&Gr(t,p,y,m)&&Gr(t,p,r,m):Gr(t,i,r)&&Gr(t,i,y)&&Gr(t,p,y)&&Gr(t,p,r)}function ad(t,e){return Gr(t,e[0],e[1])}function cq(t,e){return Gr(t,e[0],e[1],e[2])}function Gr(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function dA(t,e){return Db[1]=e.y,Db[0]=e.x,pq(t,Db)}function pq(t,e){return fA(t.rings,e)}function fA(t,e){if(!t)return!1;if(dq(t))return N7(!1,t,e);let i=!1;for(let r=0,a=t.length;r<a;r++)i=N7(i,t[r],e);return i}function dq(t){return!Array.isArray(t[0][0])}function N7(t,e,i){const[r,a]=i;let p=t,y=0;for(let m=0,_=e.length;m<_;m++){y++,y===_&&(y=0);const[x,M]=e[m],[A,C]=e[y];(M<a&&C>=a||C<a&&M>=a)&&x+(a-M)/(C-M)*(A-x)<r&&(p=!p)}return p}function fq(t,e){return I2(t,e)}function yq(t,e){const i=t.hasZ&&e.hasZ;let r,a,p;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(a=e.ymin,t.ymax<a)return!1}else if(a=t.ymin,e.ymax<a)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(p=e.zmin,t.zmax<p)return!1}else if(p=t.zmin,e.zmax<p)return!1}return!0}function mq(t,e){const{points:i,hasZ:r}=e,a=r?cq:ad;for(const p of i)if(a(t,p))return!0;return!1}const fc=[0,0],yc=[0,0],mc=[0,0],gc=[0,0],gq=[fc,yc,mc,gc],yA=[[mc,fc],[fc,yc],[yc,gc],[gc,mc]];function vq(t,e){return bq(t,e.rings)}function bq(t,e){fc[0]=t.xmin,fc[1]=t.ymax,yc[0]=t.xmax,yc[1]=t.ymax,mc[0]=t.xmin,mc[1]=t.ymin,gc[0]=t.xmax,gc[1]=t.ymin;for(const i of gq)if(fA(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(ad(t,r))return!0;for(let a=1;a<i.length;a++){const p=i[a];if(ad(t,p)||mA(r,p,yA))return!0;r=p}}return!1}function wq(t,e){fc[0]=t.xmin,fc[1]=t.ymax,yc[0]=t.xmax,yc[1]=t.ymax,mc[0]=t.xmin,mc[1]=t.ymin,gc[0]=t.xmax,gc[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let a=r[0];if(ad(t,a))return!0;for(let p=1;p<r.length;p++){const y=r[p];if(ad(t,y)||mA(a,y,yA))return!0;a=y}}return!1}const Xi=[0,0];function _q(t){for(let e=0;e<t.length;e++){const i=t[e];for(let a=0;a<i.length-1;a++){const p=i[a],y=i[a+1];for(let m=e+1;m<t.length;m++)for(let _=0;_<t[m].length-1;_++){const x=t[m][_],M=t[m][_+1];if(z3(p,y,x,M,Xi)&&!(Xi[0]===p[0]&&Xi[1]===p[1]||Xi[0]===x[0]&&Xi[1]===x[1]||Xi[0]===y[0]&&Xi[1]===y[1]||Xi[0]===M[0]&&Xi[1]===M[1]))return!0}}const r=i.length;if(!(r<=4))for(let a=0;a<r-3;a++){let p=r-1;a===0&&(p=r-2);const y=i[a],m=i[a+1];for(let _=a+2;_<p;_++){const x=i[_],M=i[_+1];if(z3(y,m,x,M,Xi)&&!(Xi[0]===y[0]&&Xi[1]===y[1]||Xi[0]===x[0]&&Xi[1]===x[1]||Xi[0]===m[0]&&Xi[1]===m[1]||Xi[0]===M[0]&&Xi[1]===M[1]))return!0}}}return!1}function mA(t,e,i){for(let r=0;r<i.length;r++)if(z3(t,e,i[r][0],i[r][1]))return!0;return!1}function z3(t,e,i,r,a){const[p,y]=t,[m,_]=e,[x,M]=i,[A,C]=r,N=A-x,j=p-x,D=m-p,z=C-M,W=y-M,Y=_-y,K=z*D-N*Y;if(K===0)return!1;const ee=(N*W-z*j)/K,ne=(D*W-Y*j)/K;return ee>=0&&ee<=1&&ne>=0&&ne<=1&&(a&&(a[0]=p+ee*(m-p),a[1]=y+ee*(_-y)),!0)}function Sq(t){switch(t){case"esriGeometryEnvelope":case"extent":return yq;case"esriGeometryMultipoint":case"multipoint":return mq;case"esriGeometryPoint":case"point":return fq;case"esriGeometryPolygon":case"polygon":return vq;case"esriGeometryPolyline":case"polyline":return wq}}var Ns;function xq(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function ol(t,e,i){return e==null?i:i==null?e:t(e,i)}let qi=Ns=class extends Pu{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,a){return xq(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Je.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:a??Je.WGS84}}static fromBounds(t,e){return new Ns({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new Ns({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Ue({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Ns;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&xm(e,i)&&(t=e.isWebMercator?vu(t):Lp(t,!0)),t.type==="point"?I2(this,t):t.type==="extent"&&hq(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&xm(e,i)&&(t=e.isWebMercator?vu(t):Lp(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const a=(this.zmax-this.zmin)*e;this.zmin+=a,this.zmax-=a}if(this.hasM){const a=(this.mmax-this.mmin)*e;this.mmin+=a,this.mmax-=a}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Ci(e,i)&&xm(e,i)&&(t=e.isWebMercator?vu(t):Lp(t,!0)),Sq(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=ol(Math.min,this.zmin,t.zmin),this.zmax=ol(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=ol(Math.min,this.mmin,t.mmin),this.mmax=ol(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=ol(Math.max,this.zmin,t.zmin),this.zmax=ol(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=ol(Math.max,this.mmin,t.mmin),this.mmax=ol(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Jn(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Lp(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=this._normalizeX(r.x,t).x),this.spatialReference=new Je(c2((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,a=this.xmin,p=this.xmax;return a>=i&&a<=r&&p>=i&&p<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const a=i??Jn(r);if(a==null)return this;const p=this._getParts(a).map(_=>_.extent);if(p.length<2)return p[0]||this;if(p.length>2)return t?this._shiftCM(a):this.set({xmin:a.valid[0],xmax:a.valid[1]});if(t)return this._shiftCM(a);if(e)return p;let y=!0,m=!0;return p.forEach(_=>{_.hasZ||(y=!1),_.hasM||(m=!1)}),{rings:p.map(_=>{const x=[[_.xmin,_.ymin],[_.xmin,_.ymax],[_.xmax,_.ymax],[_.xmax,_.ymin],[_.xmin,_.ymin]];if(y){const M=(_.zmax-_.zmin)/2;for(let A=0;A<x.length;A++)x[A].push(M)}if(m){const M=(_.mmax-_.mmin)/2;for(let A=0;A<x.length;A++)x[A].push(M)}return x}),hasZ:y,hasM:m,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:a,ymax:p,spatialReference:y}=this,m=this.width,_=this.xmin,x=this.xmax;let M;t=t||Jn(y);const[A,C]=t.valid;M=this._normalizeX(this.xmin,t);const N=M.x,j=M.frameId;M=this._normalizeX(this.xmax,t);const D=M.x,z=M.frameId,W=N===D&&m>0;if(m>2*C){const Y=new Ns(_<x?N:D,a,C,p,y),K=new Ns(A,a,_<x?D:N,p,y),ee=new Ns(0,a,C,p,y),ne=new Ns(A,a,0,p,y),oe=[],ue=[];Y.contains(ee)&&oe.push(j),Y.contains(ne)&&ue.push(j),K.contains(ee)&&oe.push(z),K.contains(ne)&&ue.push(z);for(let ye=j+1;ye<z;ye++)oe.push(ye),ue.push(ye);e.push({extent:Y,frameIds:[j]},{extent:K,frameIds:[z]},{extent:ee,frameIds:oe},{extent:ne,frameIds:ue})}else N>D||W?e.push({extent:new Ns(N,a,C,p,y),frameIds:[j]},{extent:new Ns(A,a,D,p,y),frameIds:[z]}):e.push({extent:new Ns(N,a,D,p,y),frameIds:[j]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const a={};i&&(a.zmin=this.zmin,a.zmax=this.zmax),r&&(a.mmin=this.mmin,a.mmax=this.mmax);for(let p=0;p<e.length;p++)e[p].extent.set(a)}return e}_normalizeX(t,e){const[i,r]=e.valid,a=2*r;let p,y=0;return t>r?(p=Math.ceil(Math.abs(t-r)/a),t-=p*a,y=p):t<i&&(p=Math.ceil(Math.abs(t-i)/a),t+=p*a,y=-p),{x:t,frameId:y}}};v([S({readOnly:!0})],qi.prototype,"cache",null),v([S({readOnly:!0})],qi.prototype,"center",null),v([S({readOnly:!0})],qi.prototype,"extent",null),v([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],qi.prototype,"hasM",null),v([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],qi.prototype,"hasZ",null),v([S({readOnly:!0})],qi.prototype,"height",null),v([S({readOnly:!0})],qi.prototype,"width",null),v([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],qi.prototype,"xmin",void 0),v([S({type:Number,json:{write:!0}})],qi.prototype,"ymin",void 0),v([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],qi.prototype,"mmin",void 0),v([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],qi.prototype,"zmin",void 0),v([S({type:Number,json:{write:!0}})],qi.prototype,"xmax",void 0),v([S({type:Number,json:{write:!0}})],qi.prototype,"ymax",void 0),v([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],qi.prototype,"mmax",void 0),v([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],qi.prototype,"zmax",void 0),qi=Ns=v([B("esri.geometry.Extent")],qi),qi.prototype.toJSON.isDefaultToJSON=!0;const vt=qi;let bf;var $M,TM;const $q=(($M=globalThis.esriConfig)==null?void 0:$M.locale)??((TM=globalThis.dojoConfig)==null?void 0:TM.locale);function gA(){var t;return $q??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function Kn(){return bf===void 0&&(bf=gA()),bf}const wf=[];function AS(t){return wf.push(t),{remove(){wf.splice(wf.indexOf(t),1)}}}const V3=[];function kS(t){return V3.push(t),{remove(){wf.splice(V3.indexOf(t),1)}}}function Tq(){const t=gA();bf!==t&&(bf=t,[...V3].forEach(e=>{e.call(null,t)}),[...wf].forEach(e=>{e.call(null,t)}))}var IM;(IM=globalThis.addEventListener)==null||IM.call(globalThis,"languagechange",Tq);let yy;function Iq(t){return yy&&!yy.destroyed||(yy=t()),yy}var G3;const Mq=new ft({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Rs=G3=class extends je{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new G3({categories:this.categories?se(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y));let r="";if(this.extent){const y=T2(this.extent,Je.WGS84);y!=null&&(r=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let a=this.query;!this.disableExtraQuery&&t.extraQuery&&(a="("+a+")"+t.extraQuery);const p={categories:i,bbox:r,q:a,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(p.sortField=this.sortField.split(",").map(y=>Mq.toJSON(y.trim())).join(","),p.sortOrder=this.sortOrder),{query:{...e,...p}}}};v([S()],Rs.prototype,"categories",void 0),v([S()],Rs.prototype,"disableExtraQuery",void 0),v([S({type:vt})],Rs.prototype,"extent",void 0),v([S()],Rs.prototype,"filter",void 0),v([S()],Rs.prototype,"num",void 0),v([S()],Rs.prototype,"query",void 0),v([S()],Rs.prototype,"sortField",void 0),v([S()],Rs.prototype,"sortOrder",null),v([S()],Rs.prototype,"start",void 0),Rs=G3=v([B("esri.portal.PortalQueryParams")],Rs);const Co=Rs;let ih=class extends je{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};v([S()],ih.prototype,"nextQueryParams",void 0),v([S()],ih.prototype,"queryParams",void 0),v([S()],ih.prototype,"results",void 0),v([S()],ih.prototype,"total",void 0),ih=v([B("esri.portal.PortalQueryResult")],ih);const Eq=ih;let la=class extends de{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ie("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};v([S({type:Date})],la.prototype,"created",void 0),v([S()],la.prototype,"id",void 0),v([S()],la.prototype,"portal",void 0),v([S()],la.prototype,"title",void 0),v([S({readOnly:!0})],la.prototype,"url",null),v([S()],la.prototype,"username",void 0),la=v([B("esri.portal.PortalFolder")],la);const Aq=la;let Ui=class extends de{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,i=this.thumbnail;return e&&i&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return is(this.portal).request(this.url+"/categorySchema",e).then(i=>{const r=i.categorySchema||[];return r.some(a=>a.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return is(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new ie("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let r=ri(Co,e);const a=is(this.portal);return parseFloat(a.currentVersion)>5?(r=r||new Co,a.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",i)):(r=r?r.clone():new Co,r.query="group:"+this.id+(r.query?" "+r.query:""),a.queryItems(r,i))}_fetchCategorySchemaSet(e,i){const r=is(this.portal);return r.fetchSelf(r.authMode,!0,i).then(a=>{const p=a.contentCategorySetsGroupQuery;if(p){const y=new Co;return y.disableExtraQuery=!0,y.num=1,y.query=p,r.queryGroups(y,i)}throw new ie("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(a=>{if(a.total){const p=a.results[0],y=new Co;return y.num=1,y.query=`typekeywords:"${e}"`,p.queryItems(y,i)}throw new ie("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(a=>a.total?a.results[0].fetchData("json",i).then(p=>{const y=p&&p.categorySchema;return y&&y.length?y:[]}):[])}};v([S()],Ui.prototype,"access",void 0),v([S({type:Date})],Ui.prototype,"created",void 0),v([S()],Ui.prototype,"description",void 0),v([S()],Ui.prototype,"id",void 0),v([S()],Ui.prototype,"isInvitationOnly",void 0),v([S({type:Date})],Ui.prototype,"modified",void 0),v([S()],Ui.prototype,"owner",void 0),v([S()],Ui.prototype,"portal",void 0),v([S()],Ui.prototype,"snippet",void 0),v([S()],Ui.prototype,"sortField",void 0),v([S()],Ui.prototype,"sortOrder",void 0),v([S()],Ui.prototype,"tags",void 0),v([S()],Ui.prototype,"thumbnail",void 0),v([S({readOnly:!0})],Ui.prototype,"thumbnailUrl",null),v([S()],Ui.prototype,"title",void 0),v([S({readOnly:!0})],Ui.prototype,"url",null),Ui=v([B("esri.portal.PortalGroup")],Ui);const q3=Ui,kq=Object.freeze(Object.defineProperty({__proto__:null,default:q3},Symbol.toStringTag,{value:"Module"}));var U3;let Qt=U3=class extends de{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,r=t&&t.folder,a={method:"post"};e&&(a.query=e.createPostQuery(),i!=null&&(typeof i=="string"?a.query.text=i:typeof i=="object"&&(a.query.text=JSON.stringify(i))));let p=this.userContentUrl;return r&&(p+="/"+(typeof r=="string"?r:r.id)),this.portal.request(p+"/addItem",a).then(y=>(e.id=y.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(e,r).then(()=>{t.forEach(a=>{a.id=null,a.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const a=Aq.fromJSON(r);return a.portal=this.portal,a}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=q3.fromJSON(i);return r.portal=this.portal,r}):[],e})}fetchItems(t){const e=t??{};let i,r=this.userContentUrl??"";return e.folder&&(r+="/"+e.folder.id),we(()=>Promise.resolve().then(()=>vA),void 0).then(({default:a})=>{i=a;const p={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(r,{query:p})}).then(a=>{let p;return a&&a.items?(p=a.items.map(y=>{const m=i.fromJSON(y);return m.portal=this.portal,m}),Promise.all(p.map(y=>y.load())).catch(y=>y).then(()=>({items:p,nextStart:a.nextStart,total:a.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new q3({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new ie("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new ie("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new U3;return e.sourceJSON=t,e.read(t),e}};v([S()],Qt.prototype,"access",void 0),v([S({type:Date})],Qt.prototype,"created",void 0),v([S()],Qt.prototype,"culture",void 0),v([S()],Qt.prototype,"description",void 0),v([S()],Qt.prototype,"email",void 0),v([S()],Qt.prototype,"favGroupId",void 0),v([S()],Qt.prototype,"fullName",void 0),v([S({type:Date})],Qt.prototype,"modified",void 0),v([S()],Qt.prototype,"orgId",void 0),v([S()],Qt.prototype,"portal",void 0),v([S()],Qt.prototype,"preferredView",void 0),v([S()],Qt.prototype,"privileges",void 0),v([S()],Qt.prototype,"region",void 0),v([S()],Qt.prototype,"role",void 0),v([S()],Qt.prototype,"roleId",void 0),v([S()],Qt.prototype,"sourceJSON",void 0),v([S()],Qt.prototype,"thumbnail",void 0),v([S({readOnly:!0})],Qt.prototype,"thumbnailUrl",null),v([S()],Qt.prototype,"units",void 0),v([S({readOnly:!0})],Qt.prototype,"userContentUrl",null),v([S({readOnly:!0})],Qt.prototype,"url",null),v([S()],Qt.prototype,"username",void 0),v([S()],Qt.prototype,"userType",void 0),Qt=U3=v([B("esri.portal.PortalUser")],Qt);const OS=Qt,Oq=Object.freeze(Object.defineProperty({__proto__:null,default:OS},Symbol.toStringTag,{value:"Module"}));var ua;let my;const R7={PortalGroup:()=>we(()=>Promise.resolve().then(()=>kq),void 0),PortalItem:()=>we(()=>Promise.resolve().then(()=>vA),void 0),PortalUser:()=>we(()=>Promise.resolve().then(()=>Oq),void 0)};let xe=ua=class extends $1(Fo){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=_t.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){L7.unregister(this),this.defaultBasemap=Wt(this.defaultBasemap),this.defaultDevBasemap=Wt(this.defaultDevBasemap),this.defaultVectorBasemap=Wt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=fi(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)_t.request.trustedServers.includes(e)||_t.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=OS.fromJSON(t),e.portal=this),e}load(t){const e=we(()=>Promise.resolve().then(()=>iU),void 0).then(({default:i})=>{Zt(t),my=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var r;if(gt){const a=gt;this.credential=a.findCredential(this.restUrl),this.credential||this.authMode!==ua.AUTH_MODE_AUTO||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=a.on("credential-create",Cq(new WeakRef(this))),L7.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await we(()=>import("./ElevationLayer-10c6acdb.js"),[])).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(t,e);i.unshift(...r)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):tn(t)?Promise.reject(hi()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new Co;if(i.num=100,i.sortField="title",e&&e.length){const r=[];for(const a of e)r.push(`(title:"${a.title}" AND owner:${a.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,t).then(a=>a.results)}return tn(t)?Promise.reject(hi()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Kn();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||Kn();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return Iq(()=>new ua)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const r=this.restUrl+"/portals/self",a={authMode:t,query:{culture:Kn().toLowerCase()},...i};return a.authMode==="auto"&&(a.authMode="no-prompt"),e&&(a.query.default=!0),this.request(r,a)}queryPortal(t,e,i,r){const a=ri(Co,e),p=y=>this.request(this.restUrl+t,{...a.toRequestOptions(this),...r}).then(m=>{const _=a.clone();return _.start=m.nextStart,new Eq({nextQueryParams:_,queryParams:a,total:m.total,results:ua._resultsToTypedArray(y,{portal:this},m,r)})}).then(m=>Promise.all(m.results.map(_=>typeof _.when=="function"?_.when():m)).then(()=>m,_=>(Js(_),m)));return i&&R7[i]?R7[i]().then(({default:y})=>(Zt(r),p(y))):p()}signIn(){if(this.authMode===ua.AUTH_MODE_ANONYMOUS)return Promise.reject(new ie("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return gt?gt.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(r=>{const a=ua._resultsToTypedArray(i,{portal:this},r);return Promise.all(a.map(p=>typeof p.when=="function"?p.when():r)).then(()=>a,()=>a)})}request(t,e={}){const i={f:"json",...e.query},{authMode:r=this.authMode===ua.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:a=null,cacheBust:p=!1,method:y="auto",responseType:m="json",signal:_}=e,x={authMode:r,body:a,cacheBust:p,method:y,query:i,responseType:m,timeout:0,signal:_};return ot(this._normalizeSSL(t),x).then(M=>M.data)}toJSON(){throw new ie("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new ua({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new ie("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new Co;i.query=t||(_t.apiKey&&hA(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,e);if(!r.total)return[];const a=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=a.sortField||"name",i.sortOrder=a.sortOrder||"desc";const p=await a.queryItems(i,e);return p.total?p.results.filter(y=>y.type==="Web Map").map(y=>new my({portalItem:y})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new Co({query:i,disableExtraQuery:!0}),a=await this.queryGroups(r,e);if(!a.total)return[];const p=a.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=p.sortField||"name",r.sortOrder=p.sortOrder||"desc";const y=await p.queryItems(r,e);return y.total?y.results.filter(m=>m.type==="Web Scene").map(m=>new my({portalItem:m})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=my.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,r){let a=[];if(i){const p=r!=null?r.signal:null;a=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(a=a.map(y=>{const m=Object.assign(t?t.fromJSON(y):y,e);return typeof m.load=="function"&&m.load(p),m}))}else a=[];return a}};xe.AUTH_MODE_ANONYMOUS="anonymous",xe.AUTH_MODE_AUTO="auto",xe.AUTH_MODE_IMMEDIATE="immediate",v([S()],xe.prototype,"access",void 0),v([S()],xe.prototype,"allSSL",void 0),v([S()],xe.prototype,"authMode",void 0),v([S()],xe.prototype,"authorizedCrossOriginDomains",void 0),v([ge("authorizedCrossOriginDomains")],xe.prototype,"readAuthorizedCrossOriginDomains",null),v([S()],xe.prototype,"basemapGalleryGroupQuery",void 0),v([S({json:{name:"3DBasemapGalleryGroupQuery"}})],xe.prototype,"basemapGalleryGroupQuery3D",void 0),v([S()],xe.prototype,"bingKey",void 0),v([S()],xe.prototype,"canListApps",void 0),v([S()],xe.prototype,"canListData",void 0),v([S()],xe.prototype,"canListPreProvisionedItems",void 0),v([S()],xe.prototype,"canProvisionDirectPurchase",void 0),v([S()],xe.prototype,"canSearchPublic",void 0),v([S()],xe.prototype,"canShareBingPublic",void 0),v([S()],xe.prototype,"canSharePublic",void 0),v([S()],xe.prototype,"canSignInArcGIS",void 0),v([S()],xe.prototype,"canSignInIDP",void 0),v([S()],xe.prototype,"colorSetsGroupQuery",void 0),v([S()],xe.prototype,"commentsEnabled",void 0),v([S({type:Date})],xe.prototype,"created",void 0),v([S()],xe.prototype,"credential",void 0),v([S()],xe.prototype,"culture",void 0),v([S()],xe.prototype,"currentVersion",void 0),v([S()],xe.prototype,"customBaseUrl",void 0),v([S()],xe.prototype,"defaultBasemap",void 0),v([ge("defaultBasemap")],xe.prototype,"readDefaultBasemap",null),v([S()],xe.prototype,"defaultDevBasemap",void 0),v([ge("defaultDevBasemap")],xe.prototype,"readDefaultDevBasemap",null),v([S({type:vt})],xe.prototype,"defaultExtent",void 0),v([S()],xe.prototype,"defaultVectorBasemap",void 0),v([ge("defaultVectorBasemap")],xe.prototype,"readDefaultVectorBasemap",null),v([S()],xe.prototype,"description",void 0),v([S()],xe.prototype,"devBasemapGalleryGroupQuery",void 0),v([S()],xe.prototype,"eueiEnabled",void 0),v([S({readOnly:!0})],xe.prototype,"extraQuery",null),v([S()],xe.prototype,"featuredGroups",void 0),v([S()],xe.prototype,"featuredItemsGroupQuery",void 0),v([S()],xe.prototype,"galleryTemplatesGroupQuery",void 0),v([S()],xe.prototype,"livingAtlasGroupQuery",void 0),v([S()],xe.prototype,"hasCategorySchema",void 0),v([S()],xe.prototype,"helpBase",void 0),v([S()],xe.prototype,"helperServices",void 0),v([S()],xe.prototype,"helpMap",void 0),v([S()],xe.prototype,"homePageFeaturedContent",void 0),v([S()],xe.prototype,"homePageFeaturedContentCount",void 0),v([S()],xe.prototype,"httpPort",void 0),v([S()],xe.prototype,"httpsPort",void 0),v([S()],xe.prototype,"id",void 0),v([S()],xe.prototype,"ipCntryCode",void 0),v([S({readOnly:!0})],xe.prototype,"isOrganization",null),v([S()],xe.prototype,"isPortal",void 0),v([S()],xe.prototype,"isReadOnly",void 0),v([S({readOnly:!0})],xe.prototype,"itemPageUrl",null),v([S()],xe.prototype,"layerTemplatesGroupQuery",void 0),v([S()],xe.prototype,"maxTokenExpirationMinutes",void 0),v([S({type:Date})],xe.prototype,"modified",void 0),v([S()],xe.prototype,"name",void 0),v([S()],xe.prototype,"portalHostname",void 0),v([S()],xe.prototype,"portalMode",void 0),v([S()],xe.prototype,"portalProperties",void 0),v([S()],xe.prototype,"region",void 0),v([S({readOnly:!0})],xe.prototype,"restUrl",null),v([S()],xe.prototype,"rotatorPanels",void 0),v([S()],xe.prototype,"showHomePageDescription",void 0),v([S()],xe.prototype,"sourceJSON",void 0),v([S()],xe.prototype,"staticImagesUrl",void 0),v([S({json:{name:"2DStylesGroupQuery"}})],xe.prototype,"stylesGroupQuery2d",void 0),v([S({json:{name:"stylesGroupQuery"}})],xe.prototype,"stylesGroupQuery3d",void 0),v([S()],xe.prototype,"supportsHostedServices",void 0),v([S()],xe.prototype,"symbolSetsGroupQuery",void 0),v([S()],xe.prototype,"templatesGroupQuery",void 0),v([S()],xe.prototype,"thumbnail",void 0),v([S({readOnly:!0})],xe.prototype,"thumbnailUrl",null),v([S()],xe.prototype,"units",void 0),v([S()],xe.prototype,"url",void 0),v([S()],xe.prototype,"urlKey",void 0),v([ge("urlKey")],xe.prototype,"readUrlKey",null),v([S()],xe.prototype,"user",void 0),v([ge("user")],xe.prototype,"readUser",null),v([S()],xe.prototype,"use3dBasemaps",void 0),v([S()],xe.prototype,"useStandardizedQuery",void 0),v([S()],xe.prototype,"useVectorBasemaps",void 0),v([S()],xe.prototype,"vectorBasemapGalleryGroupQuery",void 0),xe=ua=v([B("esri.portal.Portal")],xe);const fr=xe,L7=new FinalizationRegistry(t=>{t.remove()});function Cq(t){const e=gt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}const Pq=me.getLogger("esri.assets");function Ot(t){if(!_t.assetsPath)throw Pq.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ie("assets:path-not-set","config.assetsPath is not set");return Ua(_t.assetsPath,t)}let ha=class extends je{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&xs(e)?me.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new ie("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResource:r}=await we(()=>import("./resourceUtils-b676fccf.js"),[]);return r(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&xs(e)&&(e=vS(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};v([S()],ha.prototype,"portalItem",void 0),v([S({type:String,value:null})],ha.prototype,"path",null),v([It("path")],ha.prototype,"_castPath",null),v([S({type:String,readOnly:!0})],ha.prototype,"url",null),v([S({type:String,readOnly:!0})],ha.prototype,"cdnUrl",null),v([S({type:String,readOnly:!0})],ha.prototype,"itemRelativeUrl",null),ha=v([B("esri.portal.PortalItemResource")],ha);const Nq=ha;let f0=class extends je{constructor(e){super(e),this.created=null,this.rating=null}};v([S()],f0.prototype,"created",void 0),v([S()],f0.prototype,"rating",void 0),f0=v([B("esri.portal.PortalRating")],f0);const Fb=f0;var rh;const Rq=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),Lq=new Set(["KML","GeoJson","CSV"]);let et=rh=class extends $1(Fo){static from(t){return hc(rh,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(t){return t&&t.length?new vt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let a,p=!1,y=!1,m=!1,_=!1,x=!1,M=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(p=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(y=e.includes("Table"),m=e.includes("Route Layer"),_=e.includes("Markup"),x=e.includes("Spatiotemporal"),M=e.includes("UtilityNetwork"),a=x&&y?"spatiotemporaltable":y?"table":m?"routelayer":_?"markup":x?"spatiotemporal":p?"featureshosted":M?"utilitynetwork":"features"):a=t==="map service"||t==="wms"||t==="wmts"?p||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):a=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="360 vr experience"?"360vr":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":t==="data pipeline"?"datapipelines":"maps",a?Ot(i+a+r+".png"):null}get isLayer(){return this.type!=null&&Rq.has(this.type)}get itemCdnUrl(){let t=this.itemUrl;return t&&gt&&!gt.findCredential(t)&&(t=gt._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=fr.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof Fb&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Fb({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:se(this.applicationProxies),avgRating:this.avgRating,categories:se(this.categories),created:se(this.created),culture:this.culture,description:this.description,extent:se(this.extent),groupCategories:se(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:se(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:se(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:se(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:se(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new rh({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const r of["tags","typeKeywords","categories"])t[r]=(i=t[r])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await is(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return is(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await is(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Fb(e)):null}fetchRelatedItems(t,e){return is(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},rh)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return is(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>is(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new ie("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new ie("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await is(e).signIn();const{copyResources:r,folder:a,tags:p,title:y}=t||{},m={method:"post",query:{copyPrivateResources:r==="all",folder:typeof a=="string"?a:a==null?void 0:a.id,includeResources:!!r,tags:p==null?void 0:p.join(","),title:y}},{itemId:_}=await e.request(`${i}/copy`,m);return new rh({id:_,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")Ic(e)?r.query={data:e}:r.query={url:bs(e)},i!=null&&(r.query.filename=i);else{const a=new FormData;i!=null?a.append("file",e,i):a.append("file",e),r.body=a}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new ie("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await we(()=>import("./resourceUtils-b676fccf.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResource:r}=await we(()=>import("./resourceUtils-b676fccf.js"),[]);return t.portalItem=this,r(t,"add",e,i)}async removeResource(t,e){const{removeResource:i}=await we(()=>import("./resourceUtils-b676fccf.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new ie("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await we(()=>import("./resourceUtils-b676fccf.js"),[]);return e(this,t)}resourceFromPath(t){return new Nq({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:se(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:se(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:se(this.typeKeywords),url:this.url};return NM(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new rh({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};v([S({type:["private","shared","org","public"]})],et.prototype,"access",void 0),v([S()],et.prototype,"accessInformation",void 0),v([S({type:String})],et.prototype,"apiKey",void 0),v([S({json:{read:{source:"appProxies"}}})],et.prototype,"applicationProxies",void 0),v([S()],et.prototype,"avgRating",void 0),v([S()],et.prototype,"categories",void 0),v([S({type:Date})],et.prototype,"created",void 0),v([S()],et.prototype,"culture",void 0),v([S()],et.prototype,"description",void 0),v([S({readOnly:!0})],et.prototype,"displayName",null),v([S({type:vt})],et.prototype,"extent",void 0),v([ge("extent")],et.prototype,"readExtent",null),v([S()],et.prototype,"groupCategories",void 0),v([S({readOnly:!0})],et.prototype,"iconUrl",null),v([S()],et.prototype,"id",void 0),v([S({readOnly:!0})],et.prototype,"isLayer",null),v([S({type:Boolean,readOnly:!0})],et.prototype,"isOrgItem",void 0),v([S()],et.prototype,"itemControl",void 0),v([S({readOnly:!0})],et.prototype,"itemPageUrl",null),v([S({readOnly:!0})],et.prototype,"itemUrl",null),v([S()],et.prototype,"licenseInfo",void 0),v([S({type:Date})],et.prototype,"modified",void 0),v([S()],et.prototype,"name",void 0),v([S()],et.prototype,"numComments",void 0),v([S()],et.prototype,"numRatings",void 0),v([S()],et.prototype,"numViews",void 0),v([S()],et.prototype,"owner",void 0),v([S()],et.prototype,"ownerFolder",void 0),v([S({type:fr})],et.prototype,"portal",void 0),v([S()],et.prototype,"screenshots",void 0),v([S()],et.prototype,"size",void 0),v([S()],et.prototype,"snippet",void 0),v([S()],et.prototype,"sourceJSON",void 0),v([S({type:String})],et.prototype,"sourceUrl",void 0),v([S({type:String})],et.prototype,"spatialReference",void 0),v([S()],et.prototype,"tags",void 0),v([S()],et.prototype,"thumbnail",void 0),v([S({readOnly:!0})],et.prototype,"thumbnailUrl",null),v([S()],et.prototype,"title",void 0),v([S()],et.prototype,"type",void 0),v([S()],et.prototype,"typeKeywords",void 0),v([S({type:String,json:{read(t,e){var i;if(Lq.has(e.type)){const r=(i=this.portal)==null?void 0:i.restUrl;t||(t=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return t}}})],et.prototype,"url",void 0),v([S({readOnly:!0})],et.prototype,"userItemUrl",null),et=rh=v([B("esri.portal.PortalItem")],et);const _f=et,vA=Object.freeze(Object.defineProperty({__proto__:null,default:_f},Symbol.toStringTag,{value:"Module"})),j7=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,jq={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function D7(t){return t in jq}const y0=[],Hp=new Map;function F7(t){for(const e of Hp.keys())bA(t.pattern,e)&&Hp.delete(e)}function Dq(t){return y0.includes(t)||(F7(t),y0.unshift(t)),{remove(){const e=y0.indexOf(t);e>-1&&(y0.splice(e,1),F7(t))}}}async function CS(t){const e=Kn();Hp.has(t)||Hp.set(t,zq(t,e));const i=Hp.get(t);return i&&await Vq.add(i),i}function Fq(t){if(!j7.test(t))return null;const e=j7.exec(t);if(e===null)return null;const[,i,r]=e,a=i+(r?"-"+r.toUpperCase():"");return D7(a)?a:D7(i)?i:null}async function zq(t,e){const i=[];for(const r of y0)if(bA(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(a){i.push(a)}throw i.length?new ie("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new ie("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function bA(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}kS(()=>{Hp.clear()});const Vq=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=rn())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Gq(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await CS("esri/t9n/basemaps");return i[t]||i[e]}const B3={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Ot("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Ot("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ot("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Ot("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Ot("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ot("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Ot("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Ot("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Ot("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Ot("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Ot("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Ot("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Ot("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Ot("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Ot("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Ot("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function Vye(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}const Gye={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function wA(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function PS(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function qye(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}async function _A(t,e){const i=gt==null?void 0:gt.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const a=`${t.substring(0,r)}/rest/info`,p=e!=null?e.signal:null,{data:y}=await ot(a,{query:{f:"json"},responseType:"json",signal:p});return(y==null?void 0:y.owningSystemUrl)||null}function qq(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Uq(t){return qq(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Bq(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Hq(t){return!!Bq(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const Wq=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Jq=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Kq(t){return t.layerContainerType==="basemap"?Wq:t.layerContainerType==="operational-layers"?Jq:null}function Yq(t,e){if(e.restrictedWebMapWriting){const i=Kq(e);return i==null||i.has(t.type)&&!PS(t)}return!0}function Zq(t,e){if(e)if(PS(t)){const i=S1("featureCollection.layers",e),r=i&&i[0]&&i[0].layerDefinition;r&&z7(t,r)}else t.type!=="group"&&z7(t,e)}function z7(t,e){"maxScale"in t&&(e.maxScale=Zg(t.maxScale)??void 0),"minScale"in t&&(e.minScale=Zg(t.minScale)??void 0)}function Xq(t,e){if(Zq(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=Zg(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(PS(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function V7(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new ie("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(Yq(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&Xq(t,e=se(e)),e}var Tm;let Qq=0;const SA="esri.Basemap";let Ls=Tm=class extends $1(Fo){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Qq++,this.baseLayers=new De,this.referenceLayers=new De;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&me.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>e(r.item)),this.referenceLayers.on("after-add",r=>e(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{me.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const t=this.baseLayers.removeAll();for(const r of t)r.destroy();const e=this.referenceLayers.removeAll();for(const r of e)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",cc(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const r=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(a=>{const p=V7(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);p!=null&&r.push(p)}),this.referenceLayers.forEach(a=>{const p=V7(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);p!=null&&(a.type!=="scene"&&(p.isReference=!0),r.push(p))})),e.baseMapLayers=r}set referenceLayers(t){this._set("referenceLayers",cc(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return S2(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>Lg(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>Lg(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new Tm({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=se(i);return r.url&&zo(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&zo(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;Zt(t);const r=[];if(e){const a=e.context?e.context.url:null;if(r.push(this._loadLayersFromJSON(e.data,a,t)),e.data.id&&!e.data.title){const p=e.data.id;r.push(Gq(p).then(y=>{y&&this.read({title:y},e.context)}))}}else i&&r.push(this._loadFromItem(i,t));await Promise.all(r)}async _loadLayersFromJSON(t,e,i){const r=this.resourceInfo&&this.resourceInfo.context,a=this.portalItem&&this.portalItem.portal||r&&r.portal||null,p=tU[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:y}=await we(()=>import("./layersCreator-a5dfe05a.js"),["assets/layersCreator-a5dfe05a.js","assets/lazyLayerLoader-5f96bef8.js","assets/portalLayers-3a15f32b.js","assets/layersLoader-2071c3dd.js","assets/fetchService-6f594e16.js","assets/jsonContext-0a1eba8c.js"]),m=[];if(Zt(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const _={context:{origin:p,url:e,portal:a,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},x=C=>p==="web-scene"&&C.layerType==="ArcGISSceneServiceLayer"||C.isReference,M=y(this.baseLayers,t.baseMapLayers.filter(C=>!x(C)),_);m.push(M);const A=y(this.referenceLayers,t.baseMapLayers.filter(x),_);m.push(A)}await qn(m)}async _loadFromItem(t,e){const i=await t.load(e),r=await i.fetchData("json",e),a=or(t.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:eU[t.type||""]??"web-map",portal:t.portal||fr.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||fr.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,e)}static fromId(t){const e=B3[t];if(!e)return null;if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),Xg(me.getLogger(SA),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Tm.fromJSON(e)}};v([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:De}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],Ls.prototype,"baseLayers",null),v([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ls.prototype,"id",void 0),v([S({type:_f})],Ls.prototype,"portalItem",void 0),v([S()],Ls.prototype,"referenceLayers",null),v([S({readOnly:!0})],Ls.prototype,"resourceInfo",void 0),v([S({type:Je})],Ls.prototype,"spatialReference",void 0),v([S()],Ls.prototype,"thumbnailUrl",void 0),v([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ls.prototype,"title",void 0),v([$e("title")],Ls.prototype,"writeTitle",null),Ls=Tm=v([B(SA)],Ls);const eU={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},tU={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},nv=Ls,iU=Object.freeze(Object.defineProperty({__proto__:null,default:nv},Symbol.toStringTag,{value:"Module"})),ov={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function xA(t){return!!ov[t]||!!ov[t.toLowerCase()]}function NS(t){return ov[t]??ov[t.toLowerCase()]}function rU(t){return[...NS(t)]}function zb(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function $A(t,e,i,r=1){const a=(t%360+360)%360/360,p=i<=.5?i*(e+1):i+e-i*e,y=2*i-p;return[Math.round(255*zb(y,p,a+1/3)),Math.round(255*zb(y,p,a)),Math.round(255*zb(y,p,a-1/3)),r]}function sU(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,a=e?1:17,p=e?t.length===9:t.length===5;let y=Number("0x"+t.substr(1));if(isNaN(y))return null;const m=[0,0,0,1];let _;return p&&(_=y&r,y>>=i,m[3]=a*_/255),_=y&r,y>>=i,m[2]=a*_,_=y&r,y>>=i,m[1]=a*_,_=y&r,y>>=i,m[0]=a*_,m}function ro(){return[0,0,0]}function nU(t){return[t[0],t[1],t[2]]}function T1(t,e,i){return[t,e,i]}function oU(t){const e=ro(),i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function aU(t,e){return new Float64Array(t,e,3)}function TA(){return ro()}function IA(){return T1(1,1,1)}function MA(){return T1(1,0,0)}function EA(){return T1(0,1,0)}function AA(){return T1(0,0,1)}const lU=TA(),uU=IA(),hU=MA(),cU=EA(),pU=AA();Object.freeze(Object.defineProperty({__proto__:null,ONES:uU,UNIT_X:hU,UNIT_Y:cU,UNIT_Z:pU,ZEROS:lU,clone:nU,create:ro,createView:aU,fromArray:oU,fromValues:T1,ones:IA,unitX:MA,unitY:EA,unitZ:AA,zeros:TA},Symbol.toStringTag,{value:"Module"}));let RS=1e-6;function an(){return RS}function dU(t){RS=t}const M2=Math.random,fU=Math.PI/180,yU=180/Math.PI;function LS(t){return t*fU}function mU(t){return t*yU}function gU(t,e){return Math.abs(t-e)<=RS*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:M2,equals:gU,getEpsilon:an,setEpsilon:dU,toDegree:mU,toRadian:LS},Symbol.toStringTag,{value:"Module"}));function E2(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function av(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function A2(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function kA(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function jS(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function OA(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function CA(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function vU(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function bU(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function wU(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function _U(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function SU(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function xU(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function $U(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function PA(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function TU(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function NA(t,e){const i=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(i*i+r*r+a*a)}function RA(t,e){const i=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return i*i+r*r+a*a}function LA(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function IU(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function MU(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function lv(t,e){const i=e[0],r=e[1],a=e[2];let p=i*i+r*r+a*a;return p>0&&(p=1/Math.sqrt(p),t[0]=e[0]*p,t[1]=e[1]*p,t[2]=e[2]*p),t}function jA(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function EU(t,e,i){const r=e[0],a=e[1],p=e[2],y=i[0],m=i[1],_=i[2];return t[0]=a*_-p*m,t[1]=p*y-r*_,t[2]=r*m-a*y,t}function AU(t,e,i,r){const a=e[0],p=e[1],y=e[2];return t[0]=a+r*(i[0]-a),t[1]=p+r*(i[1]-p),t[2]=y+r*(i[2]-y),t}function kU(t,e,i,r,a,p){const y=p*p,m=y*(2*p-3)+1,_=y*(p-2)+p,x=y*(p-1),M=y*(3-2*p);return t[0]=e[0]*m+i[0]*_+r[0]*x+a[0]*M,t[1]=e[1]*m+i[1]*_+r[1]*x+a[1]*M,t[2]=e[2]*m+i[2]*_+r[2]*x+a[2]*M,t}function OU(t,e,i,r,a,p){const y=1-p,m=y*y,_=p*p,x=m*y,M=3*p*m,A=3*_*y,C=_*p;return t[0]=e[0]*x+i[0]*M+r[0]*A+a[0]*C,t[1]=e[1]*x+i[1]*M+r[1]*A+a[1]*C,t[2]=e[2]*x+i[2]*M+r[2]*A+a[2]*C,t}function CU(t,e){e=e||1;const i=M2,r=2*i()*Math.PI,a=2*i()-1,p=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(r)*p,t[1]=Math.sin(r)*p,t[2]=a*e,t}function PU(t,e,i){const r=e[0],a=e[1],p=e[2];return t[0]=i[0]*r+i[4]*a+i[8]*p+i[12],t[1]=i[1]*r+i[5]*a+i[9]*p+i[13],t[2]=i[2]*r+i[6]*a+i[10]*p+i[14],t}function NU(t,e,i){const r=e[0],a=e[1],p=e[2];return t[0]=r*i[0]+a*i[3]+p*i[6],t[1]=r*i[1]+a*i[4]+p*i[7],t[2]=r*i[2]+a*i[5]+p*i[8],t}function RU(t,e,i){const r=i[0],a=i[1],p=i[2],y=i[3],m=e[0],_=e[1],x=e[2];let M=a*x-p*_,A=p*m-r*x,C=r*_-a*m,N=a*C-p*A,j=p*M-r*C,D=r*A-a*M;const z=2*y;return M*=z,A*=z,C*=z,N*=2,j*=2,D*=2,t[0]=m+M+N,t[1]=_+A+j,t[2]=x+C+D,t}function LU(t,e,i,r){const a=[],p=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],p[0]=a[0],p[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),p[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=p[0]+i[0],t[1]=p[1]+i[1],t[2]=p[2]+i[2],t}function jU(t,e,i,r){const a=[],p=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],p[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),p[1]=a[1],p[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=p[0]+i[0],t[1]=p[1]+i[1],t[2]=p[2]+i[2],t}function DU(t,e,i,r){const a=[],p=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],p[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),p[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),p[2]=a[2],t[0]=p[0]+i[0],t[1]=p[1]+i[1],t[2]=p[2]+i[2],t}function FU(t,e){av(gy,t),av(vy,e),lv(gy,gy),lv(vy,vy);const i=jA(gy,vy);return i>1?0:i<-1?Math.PI:Math.acos(i)}const gy=ro(),vy=ro();function zU(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function VU(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function GU(t,e){if(t===e)return!0;const i=t[0],r=t[1],a=t[2],p=e[0],y=e[1],m=e[2],_=an();return Math.abs(i-p)<=_*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(r-y)<=_*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-m)<=_*Math.max(1,Math.abs(a),Math.abs(m))}function qU(t,e,i){const r=i[0]-e[0],a=i[1]-e[1],p=i[2]-e[2];let y=r*r+a*a+p*p;return y>0?(y=1/Math.sqrt(y),t[0]=r*y,t[1]=a*y,t[2]=p*y,t):(t[0]=0,t[1]=0,t[2]=0,t)}const UU=jS,BU=OA,HU=CA,WU=NA,JU=RA,KU=E2,YU=LA;Object.freeze(Object.defineProperty({__proto__:null,abs:wU,add:kA,angle:FU,bezier:OU,ceil:vU,copy:av,cross:EU,direction:qU,dist:WU,distance:NA,div:HU,divide:CA,dot:jA,equals:GU,exactEquals:VU,floor:bU,hermite:kU,inverse:MU,len:KU,length:E2,lerp:AU,max:xU,min:SU,mul:BU,multiply:OA,negate:IU,normalize:lv,random:CU,rotateX:LU,rotateY:jU,rotateZ:DU,round:$U,scale:PA,scaleAndAdd:TU,set:A2,sign:_U,sqrDist:JU,sqrLen:YU,squaredDistance:RA,squaredLength:LA,str:zU,sub:UU,subtract:jS,transformMat3:NU,transformMat4:PU,transformQuat:RU},Symbol.toStringTag,{value:"Module"}));function ZU(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function XU(t,e,i,r,a){return t[0]=e,t[1]=i,t[2]=r,t[3]=a,t}function QU(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function DA(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function FA(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function zA(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function eB(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function tB(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function iB(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function rB(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function sB(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function nB(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function oB(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function VA(t,e){const i=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],p=e[3]-t[3];return Math.sqrt(i*i+r*r+a*a+p*p)}function GA(t,e){const i=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],p=e[3]-t[3];return i*i+r*r+a*a+p*p}function qA(t){const e=t[0],i=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+i*i+r*r+a*a)}function UA(t){const e=t[0],i=t[1],r=t[2],a=t[3];return e*e+i*i+r*r+a*a}function aB(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function lB(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function uB(t,e){const i=e[0],r=e[1],a=e[2],p=e[3];let y=i*i+r*r+a*a+p*p;return y>0&&(y=1/Math.sqrt(y),t[0]=i*y,t[1]=r*y,t[2]=a*y,t[3]=p*y),t}function hB(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function BA(t,e,i,r){const a=e[0],p=e[1],y=e[2],m=e[3];return t[0]=a+r*(i[0]-a),t[1]=p+r*(i[1]-p),t[2]=y+r*(i[2]-y),t[3]=m+r*(i[3]-m),t}function cB(t,e){const i=M2;let r,a,p,y,m,_;e=e||1;do r=2*i()-1,a=2*i()-1,m=r*r+a*a;while(m>=1);do p=2*i()-1,y=2*i()-1,_=p*p+y*y;while(_>=1);const x=Math.sqrt((1-m)/_);return t[0]=e*r,t[1]=e*a,t[2]=e*p*x,t[3]=e*y*x,t}function pB(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3];return t[0]=i[0]*r+i[4]*a+i[8]*p+i[12]*y,t[1]=i[1]*r+i[5]*a+i[9]*p+i[13]*y,t[2]=i[2]*r+i[6]*a+i[10]*p+i[14]*y,t[3]=i[3]*r+i[7]*a+i[11]*p+i[15]*y,t}function dB(t,e,i){const r=e[0],a=e[1],p=e[2],y=i[0],m=i[1],_=i[2],x=i[3],M=x*r+m*p-_*a,A=x*a+_*r-y*p,C=x*p+y*a-m*r,N=-y*r-m*a-_*p;return t[0]=M*x+N*-y+A*-_-C*-m,t[1]=A*x+N*-m+C*-y-M*-_,t[2]=C*x+N*-_+M*-m-A*-y,t[3]=e[3],t}function fB(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function yB(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mB(t,e){const i=t[0],r=t[1],a=t[2],p=t[3],y=e[0],m=e[1],_=e[2],x=e[3],M=an();return Math.abs(i-y)<=M*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-m)<=M*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(a-_)<=M*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(p-x)<=M*Math.max(1,Math.abs(p),Math.abs(x))}const gB=DA,vB=FA,bB=zA,wB=VA,_B=GA,SB=qA,xB=UA;Object.freeze(Object.defineProperty({__proto__:null,add:QU,ceil:eB,copy:ZU,dist:wB,distance:VA,div:bB,divide:zA,dot:hB,equals:mB,exactEquals:yB,floor:tB,inverse:lB,len:SB,length:qA,lerp:BA,max:rB,min:iB,mul:vB,multiply:FA,negate:aB,normalize:uB,random:cB,round:sB,scale:nB,scaleAndAdd:oB,set:XU,sqrDist:_B,sqrLen:xB,squaredDistance:GA,squaredLength:UA,str:fB,sub:gB,subtract:DA,transformMat4:pB,transformQuat:dB},Symbol.toStringTag,{value:"Module"}));const G7=new Float32Array(1);function Uye(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function nn(t,e,i){return Math.min(Math.max(t,e),i)}function Bye(t){return(t&t-1)==0}function Hye(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Wye(t,e,i){return t+(e-t)*i}function $B(t){return t*Math.PI/180}function HA(t){return 180*t/Math.PI}function Jye(t){return Math.acos(nn(t,-1,1))}function WA(t){return Math.asin(nn(t,-1,1))}function Vb(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const uv=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function TB(t){return uv.setFloat64(0,t),uv.getBigInt64(0)}function IB(t){return uv.setBigInt64(0,t),uv.getFloat64(0)}const Gb=BigInt("1000000");MB(1);function MB(t){const e=TB(t=Math.abs(t)),i=IB(e<=Gb?Gb:e-Gb);return Math.abs(t-i)}function Kye(t){return JA(Math.max(-q7,Math.min(t,q7)))}function JA(t){return G7[0]=t,G7[0]}function Yye(t,e){const i=E2(t),r=WA(t[2]/i),a=Math.atan2(t[1]/i,t[0]/i);return A2(e,i,r,a),e}function Zye(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Vb(e,1)&&Vb(i,1)&&Vb(r,1))}const q7=JA(34028234663852886e22);function by(t){return nn(g2(t),0,255)}function wy(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let Im=class ur{static blendColors(e,i,r,a=new ur){return a.r=Math.round(e.r+(i.r-e.r)*r),a.g=Math.round(e.g+(i.g-e.g)*r),a.b=Math.round(e.b+(i.b-e.b)*r),a.a=e.a+(i.a-e.a)*r,a._sanitize()}static fromRgb(e,i){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const a=r[2].split(/\s*,\s*/),p=r[1];if(p==="rgb"&&a.length===3||p==="rgba"&&a.length===4){const y=a[0];if(y.charAt(y.length-1)==="%"){const m=a.map(_=>2.56*parseFloat(_));return a.length===4&&(m[3]=parseFloat(a[3])),ur.fromArray(m,i)}return ur.fromArray(a.map(m=>parseFloat(m)),i)}if(p==="hsl"&&a.length===3||p==="hsla"&&a.length===4)return ur.fromArray($A(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100,parseFloat(a[3])),i)}return null}static fromHex(e,i=new ur){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const r=e.length===4?4:8,a=(1<<r)-1;let p=Number("0x"+e.substr(1));return isNaN(p)?null:(["b","g","r"].forEach(y=>{const m=p&a;p>>=r,i[y]=r===4?17*m:m}),i.a=1,i)}static fromArray(e,i=new ur){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=xA(e)?NS(e):null;return r&&ur.fromArray(r,i)||ur.fromRgb(e,i)||ur.fromHex(e,i)}static fromJSON(e){return e&&new ur([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?ur.fromString(e,this):Array.isArray(e)?ur.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof ur||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=ur.AlphaMode.ALWAYS){const i=by(this.r),r=by(this.g),a=by(this.b);return e===ur.AlphaMode.ALWAYS||this.a!==1?[i,r,a,by(255*this.a)]:[i,r,a]}clone(){return new ur(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(wy(this.r,0,255)),this.g=Math.round(wy(this.g,0,255)),this.b=Math.round(wy(this.b,0,255)),this.a=wy(this.a,0,1),this}_set(e,i,r,a){this.r=e,this.g=i,this.b=r,this.a=a}};Im.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Im||(Im={}));const tt=Im;function Xye(t){}function EB(t){return()=>t}function Fe(t,e={}){const i=t instanceof ft?t:new ft(t,e),r={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(r.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(r.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(r.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(r.nonNullable=e.nonNullable),S(r)}var H3;let Mm=H3=class extends de{constructor(t){super(t),this.type="none"}clone(){return new H3({type:this.type})}};v([Fe({none:"none",stayAbove:"stay-above"})],Mm.prototype,"type",void 0),Mm=H3=v([B("esri.ground.NavigationConstraint")],Mm);function k2(t){const e=g2(100*(1-t));return Math.max(0,Math.min(e,100))}function Xf(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var W3;let ca=W3=class extends $1(Fo){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new De;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&me.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(t=>{dr(t)||me.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",cc(t,this._get("layers")))}writeLayers(t,e,i,r){const a=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(p=>{if("write"in p){const y={};EB(p)().write(y,r)&&a.push(y)}else r&&r.messages&&r.messages.push(new ie("layer:unsupported",`Layers (${p.title}, ${p.id}) of type '${p.declaredClass}' cannot be persisted in the ground`,{layer:p}))})),e.layers=a}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return S2(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await we(()=>import("./ElevationQuery-aa53b044.js"),[]);Zt(e);const r=new i,a=this.layers.filter(U7).toArray();return r.queryAll(a,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await we(()=>import("./ElevationQuery-aa53b044.js"),[]);Zt(e);const r=new i,a=this.layers.filter(U7).toArray();return r.createSamplerAll(a,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:se(this.surfaceColor),navigationConstraint:se(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new W3({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const r=e&&e.origin||"web-scene",a=e&&e.portal||null,p=e&&e.url||null;return we(()=>import("./layersCreator-a5dfe05a.js"),["assets/layersCreator-a5dfe05a.js","assets/lazyLayerLoader-5f96bef8.js","assets/portalLayers-3a15f32b.js","assets/layersLoader-2071c3dd.js","assets/fetchService-6f594e16.js","assets/jsonContext-0a1eba8c.js"]).then(({populateOperationalLayers:y})=>{Zt(i);const m=[];if(t.layers&&Array.isArray(t.layers)){const _={context:{origin:r,url:p,portal:a,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};m.push(y(this.layers,t.layers,_))}return qn(m)}).then(()=>{})}};function AB(t){return t&&"createElevationSampler"in t}function U7(t){return t.type==="elevation"||AB(t)}v([S({json:{read:!1}})],ca.prototype,"layers",null),v([$e("layers")],ca.prototype,"writeLayers",null),v([S({readOnly:!0})],ca.prototype,"resourceInfo",void 0),v([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:jt,read:{reader:Xf,source:"transparency"},write:{writer:(t,e)=>{e.transparency=k2(t)},target:"transparency"}}})],ca.prototype,"opacity",void 0),v([S({type:tt,json:{type:[jt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],ca.prototype,"surfaceColor",void 0),v([S({type:Mm,json:{write:!0}})],ca.prototype,"navigationConstraint",void 0),ca=W3=v([B("esri.Ground")],ca);const hv=ca;let Yc=class extends De{constructor(e){super(e),this.getCollections=null}initialize(){this.own(uE(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(e){return new De(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(a=>!!a);for(const a of i)if(a){if(r(a)){const p=this.indexOf(a,e);p>=0?p!==e&&this.reorder(a,e):this.add(a,e),++e}if(this.getChildrenFunction){const p=this.getChildrenFunction(a);if(Array.isArray(p))for(const y of p)e=this._processCollection(e,y);else e=this._processCollection(e,p)}}return e}};v([S()],Yc.prototype,"getCollections",void 0),v([S()],Yc.prototype,"getChildrenFunction",void 0),v([S()],Yc.prototype,"itemFilterFunction",void 0),Yc=v([B("esri.core.CollectionFlattener")],Yc);const ld=Yc,kB=[["binary","application/octet-stream","bin",""]];function J3(t,e){return FS(CB(t,e))}function K3(t,e){return FS(PB(t,e))}function eme(t,e){return KA(OB(t,e))}function DS(t){return[...kB,...t]}function OB(t,e){return DS(e).find(i=>FS(i)===t)}function CB(t,e){return DS(e).find(i=>KA(i)===t)}function PB(t,e){const i=t.toLowerCase();return DS(e).find(r=>NB(r).some(a=>i.endsWith(a)))}function FS(t){return t==null?void 0:t[0]}function KA(t){return t==null?void 0:t[1]}function NB(t){return(t==null?void 0:t[2].split(","))??[]}function tme(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function RB(t){var e,i;return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&((i=(e=Uq(t))==null?void 0:e.operations)!=null&&i.supportsEditing)&&"type"in t)||"editingEnabled"in t&&!Hq(t)||t.type==="scene"&&!LB(t))}function LB(t){const e=t.infoFor3D;if(!e)return!0;const{supportedFormats:i,queryFormats:r}=e,a=J3("model/gltf-binary",i)??K3("glb",i);return a!=null&&r.includes(a)}const B7=me.getLogger("esri.support.basemapUtils");function jB(){return{}}function DB(t){for(const e in t){const i=t[e];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete t[e]}}function FB(t,e){let i;if(typeof t=="string"){if(!(t in B3)){const r=Object.entries(B3).filter(([a,p])=>_t.apiKey&&!p.classic||!_t.apiKey&&p.classic&&!p.deprecated).map(([a])=>`"${a}"`).join(", ");return B7.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${r}`),null}e&&(i=e[t]),i||(i=nv.fromId(t),e&&(e[t]=i))}else i=ri(nv,t);return i!=null&&i.destroyed&&(B7.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function zB(t){return new ld({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function qb(t){for(const e of t.values())e==null||e.destroy();t.clear()}const H7={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function VB(t){let e=null;if(typeof t=="string")if(t in H7){const i=H7[t];e=new hv({resourceInfo:{data:{layers:[i]}}})}else me.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=ri(hv,t);return e}function ud(t,e,i=!1){let{hasM:r,hasZ:a}=t;Array.isArray(e)?e.length!==4||r||a?e.length===3&&i&&!r?(a=!0,r=!1):e.length===3&&r&&a&&(r=!1,a=!1):(r=!0,a=!0):(a=!a&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!a||e.hasZ)),t.hasZ=a,t.hasM=r}var Y3;function W7(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function GB(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let wl=Y3=class extends Pu{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):GB(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new vt,i=this.hasZ,r=this.hasM,a=i?3:2,p=t[0],y=W7(Math.min),m=W7(Math.max);let _,x,M,A,[C,N]=p,[j,D]=p;for(let z=0,W=t.length;z<W;z++){const Y=t[z],[K,ee]=Y;if(C=y(C,K),N=y(N,ee),j=m(j,K),D=m(D,ee),i&&Y.length>2){const ne=Y[2];_=y(_,ne),M=m(M,ne)}if(r&&Y.length>a){const ne=Y[a];x=y(x,ne),A=m(A,ne)}}return e.xmin=C,e.ymin=N,e.xmax=j,e.ymax=D,e.spatialReference=this.spatialReference,i?(e.zmin=_,e.zmax=M):(e.zmin=void 0,e.zmax=void 0),r?(e.mmin=x,e.mmax=A):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=se(this.points)}addPoint(t){return ud(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:se(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new Y3(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new Ue(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Ue(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(ud(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};v([S({readOnly:!0})],wl.prototype,"cache",null),v([S()],wl.prototype,"extent",null),v([S({type:[[Number]],json:{write:{isRequired:!0}}})],wl.prototype,"points",void 0),v([$e("points")],wl.prototype,"writePoints",null),wl=Y3=v([B("esri.geometry.Multipoint")],wl),wl.prototype.toJSON.isDefaultToJSON=!0;const xd=wl;function ime(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function qB(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function YA(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const a=t[2]-e[2];return Math.sqrt(i*i+r*r+a*a)}return Math.sqrt(i*i+r*r)}function UB(t,e,i){const r=t[0]+i*(e[0]-t[0]),a=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,a,t[2]+i*(e[2]-t[2])]:[r,a]}function BB(t,e,i,r){const[a,p]=e,[y,m]=i[r],[_,x]=i[r+1],M=_-y,A=x-m,C=M*M+A*A,N=(a-y)*M+(p-m)*A,j=Math.min(1,Math.max(0,N/C));return t[0]=y+M*j,t[1]=m+A*j,t}function rme(t,e,i){let r,a,p,y,m=!1,_=1/0;for(i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,a=i.y;i.nextPoint();)p=i.x,y=i.y,a>e!=y>e&&t<(p-r)*(e-a)/(y-a)+r&&(m=!m),_=Math.min(_,HB(t,e,r,a,p,y)),r=p,a=y;return _===0?0:(m?1:-1)*Math.sqrt(_)}function HB(t,e,i,r,a,p){let y=i,m=r,_=a-y,x=p-m;if(_!==0||x!==0){const M=((t-y)*_+(e-m)*x)/(_*_+x*x);M>1?(y=a,m=p):M>0&&(y+=_*M,m+=x*M)}return _=t-y,x=e-m,_*_+x*x}function ZA(t,e){return UB(t,e,.5)}function XA(t,e,i){const r=t.length;let a=0,p=0,y=0;for(let m=0;m<r;m++){const _=t[m],x=t[(m+1)%r];let M=2;a+=_[0]*x[1]-x[0]*_[1],_.length>2&&x.length>2&&i&&(p+=_[0]*x[2]-x[0]*_[2],M=3),_.length>M&&x.length>M&&e&&(y+=_[0]*x[M]-x[0]*_[M])}return a<=0&&p<=0&&y<=0}function WB(t){const e=t.length;return e>2&&a2(t[0],t[e-1])}function sme(t){if("rings"in t&&(JB(t),t.rings.length>0&&!XA(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function JB(t){if("rings"in t)for(const e of t.rings)WB(e)||e.push(e[0].slice())}function nme(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let r=0;r<i;r++)e+=(t[r][0]-t[r+1][0])*(t[r][1]+t[r+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function QA(t){if(!t||t.numPoints<3)return 0;let e,i,r=0;if(t.seekPathStart(),!t.nextPoint())return 0;e=t.x,i=t.y;const a=e,p=i;for(;t.nextPoint();)r+=(e-t.x)*(i+t.y),e=t.x,i=t.y;return r+=(e-a)*(i+p),-.5*r}function ome(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function KB(t){return t?YB(t.rings,t.hasZ??!1):null}function YB(t,e){if(!t||!t.length)return null;const i=[],r=[],a=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let p=0,y=t.length;p<y;p++){const m=ek(t[p],e,a);m&&r.push(m)}if(r.sort((p,y)=>{let m=p[2]-y[2];return m===0&&e&&(m=p[4]-y[4]),m}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<a[0]||i[0]>a[1]||i[1]<a[2]||i[1]>a[3]||e&&(i[2]<a[4]||i[2]>a[5]))&&(i.length=0)),!i.length){const p=t[0]&&t[0].length?ZB(t[0],e):null;if(!p)return null;i[0]=p[0],i[1]=p[1],e&&p.length>2&&(i[2]=p[2])}return i}function ek(t,e,i){let r=0,a=0,p=0,y=0,m=0;const _=t.length?t[0][0]:0,x=t.length?t[0][1]:0,M=t.length&&e?t[0][2]:0;for(let C=0;C<t.length;C++){const N=t[C],j=t[(C+1)%t.length],[D,z,W]=N,Y=D-_,K=z-x,[ee,ne,oe]=j,ue=ee-_,ye=ne-x,Se=Y*ye-ue*K;if(y+=Se,r+=(Y+ue)*Se,a+=(K+ye)*Se,e&&N.length>2&&j.length>2){const Ce=W-M,Ne=oe-M,Le=Y*Ne-ue*Ce;p+=(Ce+Ne)*Le,m+=Le}D<i[0]&&(i[0]=D),D>i[1]&&(i[1]=D),z<i[2]&&(i[2]=z),z>i[3]&&(i[3]=z),e&&(W<i[4]&&(i[4]=W),W>i[5]&&(i[5]=W))}if(y>0&&(y*=-1),m>0&&(m*=-1),!y)return null;y*=.5,m*=.5;const A=[r/(6*y)+_,a/(6*y)+x,y];return e&&(i[4]===i[5]||m===0?(A[3]=(i[4]+i[5])/2,A[4]=0):(A[3]=p/(6*m)+M,A[4]=m)),A}function ZB(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let a=0,p=0,y=0,m=0;for(let _=0,x=t.length;_<x-1;_++){const M=t[_],A=t[_+1];if(M&&A){i[0]=M[0],i[1]=M[1],r[0]=A[0],r[1]=A[1],e&&M.length>2&&A.length>2&&(i[2]=M[2],r[2]=A[2]);const C=YA(i,r);if(C){a+=C;const N=ZA(M,A);p+=C*N[0],y+=C*N[1],e&&N.length>2&&(m+=C*N[2])}}}return a>0?e?[p/a,y/a,m/a]:[p/a,y/a]:t.length?t[0]:null}function XB(t){const{hasZ:e,numPaths:i}=t;if(i===0)return null;const r=[],a=[],p=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const y=ek(qB(t),t.hasZ,p);y&&a.push(y)}if(a.sort((y,m)=>{let _=y[2]-m[2];return _===0&&e&&(_=y[4]-m[4]),_}),a.length&&(r[0]=a[0][0],r[1]=a[0][1],e&&(r[2]=a[0][3]),(r[0]<p[0]||r[0]>p[1]||r[1]<p[2]||r[1]>p[3]||e&&(r[2]<p[4]||r[2]>p[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const y=t.numPoints?QB(t):null;if(!y)return null;r[0]=y[0],r[1]=y[1],e&&y.length>2&&(r[2]=y[2])}return r}function QB(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let a=0,p=0,y=0,m=0;if(t.nextPoint()){let _=t.x,x=t.y,M=t.z;for(;t.nextPoint();){const A=t.x,C=t.y,N=t.z;i[0]=_,i[1]=x,r[0]=A,r[1]=C,e&&(i[2]=M,r[2]=N);const j=YA(i,r);if(j){a+=j;const D=ZA(i,r);p+=j*D[0],y+=j*D[1],e&&D.length>2&&(m+=j*D[2])}_=A,x=C,M=N}}return a>0?e?[p/a,y/a,m/a]:[p/a,y/a]:t.numPoints?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const eH=1e-6;function ame(t){let e=0;for(t.reset();t.nextPath();)e+=QA(t);if(e<eH){const a=XB(t);return a?[a[0],a[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)iH(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const tH=1/3;function iH(t,e,i){if(!t||!i||i.numPoints<3)return null;i.nextPoint();const r=i.x,a=i.y;i.nextPoint();let p,y=i.x-r,m=i.y-a,_=0,x=0;for(;i.nextPoint();)_=i.x-r,x=i.y-a,p=.5*tH*(_*m-x*y),t[0]+=p*(y+_),t[1]+=p*(m+x),y=_,m=x;const M=QA(i),A=[r,a];return A[0]-=e[0],A[1]-=e[1],A[0]*=M,A[1]*=M,t[0]+=A[0],t[1]+=A[1],t}function Vo(t=aH){return[t[0],t[1],t[2],t[3]]}function lme(t){return[t[0],t[1],t[2],t[3]]}function zS(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function rH(t,e,i,r,a=Vo()){return a[0]=t,a[1]=e,a[2]=i,a[3]=r,a}function ume(t,e=Vo()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function hme(t,e){return new vt({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function cme(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function pme(t,e,i){if(e!=null)if("length"in e)Z3(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else zS(i,t)}function sH(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function nH(t){return t[1]>=t[3]?0:t[3]-t[1]}function dme(t){return sH(t)*nH(t)}function fme(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function yme(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function mme(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function oH(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function gme(t){return t?zS(t,J7):Vo(J7)}function Z3(t){return t!=null&&t.length===4}function vme(t,e){return Z3(t)&&Z3(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const J7=[1/0,1/0,-1/0,-1/0],aH=[0,0,0,0];function tk(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function ik(t){return t.points!==void 0}function rk(t){return t.x!==void 0&&t.y!==void 0}function sk(t){return t.paths!==void 0}function nk(t){return t.rings!==void 0}function ok(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const ou=ok(Math.min),au=ok(Math.max);function bme(t,e){return sk(e)?hd(t,e.paths,!1,!1):nk(e)?hd(t,e.rings,!1,!1):ik(e)?VS(t,e.points,!1,!1,!1,!1):tk(e)?ak(t,e):(rk(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function wme(t){let e,i,r,a;for(t.reset(),e=r=1/0,i=a=-1/0;t.nextPath();){const p=lH(t);e=Math.min(p[0],e),r=Math.min(p[1],r),i=Math.max(p[2],i),a=Math.max(p[3],a)}return Vo([e,r,i,a])}function lH(t){let e,i,r,a;for(e=r=1/0,i=a=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),a=Math.max(t.y,a);return Vo([e,r,i,a])}function _me(t,e){return sk(e)?hd(t,e.paths,!0,!1):nk(e)?hd(t,e.rings,!0,!1):ik(e)?VS(t,e.points,!0,!1,!0,!1):tk(e)?ak(t,e,!0,!1,!0,!1):(rk(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function hd(t,e,i,r){const a=i?3:2;if(!e.length||!e[0].length)return null;let p,y,m,_,[x,M]=e[0][0],[A,C]=e[0][0];for(let N=0;N<e.length;N++){const j=e[N];for(let D=0;D<j.length;D++){const z=j[D],[W,Y]=z;if(x=ou(x,W),M=ou(M,Y),A=au(A,W),C=au(C,Y),i&&z.length>2){const K=z[2];p=ou(p,K),y=au(y,K)}if(r&&z.length>a){const K=z[a];m=ou(p,K),_=au(y,K)}}}return i?r?(t[0]=x,t[1]=M,t[2]=p,t[3]=m,t[4]=A,t[5]=C,t[6]=y,t[7]=_,t.length=8,t):(t[0]=x,t[1]=M,t[2]=p,t[3]=A,t[4]=C,t[5]=y,t.length=6,t):r?(t[0]=x,t[1]=M,t[2]=m,t[3]=A,t[4]=C,t[5]=_,t.length=6,t):(t[0]=x,t[1]=M,t[2]=A,t[3]=C,t.length=4,t)}function ak(t,e,i,r,a,p){const y=e.xmin,m=e.xmax,_=e.ymin,x=e.ymax;let M=e.zmin,A=e.zmax,C=e.mmin,N=e.mmax;return a?(M=M||0,A=A||0,p?(C=C||0,N=N||0,t[0]=y,t[1]=_,t[2]=M,t[3]=C,t[4]=m,t[5]=x,t[6]=A,t[7]=N,t):(t[0]=y,t[1]=_,t[2]=M,t[3]=m,t[4]=x,t[5]=A,t)):p?(C=C||0,N=N||0,t[0]=y,t[1]=_,t[2]=C,t[3]=m,t[4]=x,t[5]=N,t):(t[0]=y,t[1]=_,t[2]=m,t[3]=x,t)}function VS(t,e,i,r,a,p){const y=i?3:2,m=r&&p,_=i&&a;if(!e.length||!e[0].length)return null;let x,M,A,C,[N,j]=e[0],[D,z]=e[0];for(let W=0;W<e.length;W++){const Y=e[W],[K,ee]=Y;if(N=ou(N,K),j=ou(j,ee),D=au(D,K),z=au(z,ee),_&&Y.length>2){const ne=Y[2];x=ou(x,ne),M=au(M,ne)}if(m&&Y.length>y){const ne=Y[y];A=ou(x,ne),C=au(M,ne)}}return a?(x=x||0,M=M||0,p?(A=A||0,C=C||0,t[0]=N,t[1]=j,t[2]=x,t[3]=A,t[4]=D,t[5]=z,t[6]=M,t[7]=C,t):(t[0]=N,t[1]=j,t[2]=x,t[3]=D,t[4]=z,t[5]=M,t)):p?(A=A||0,C=C||0,t[0]=N,t[1]=j,t[2]=A,t[3]=D,t[4]=z,t[5]=C,t):(t[0]=N,t[1]=j,t[2]=D,t[3]=z,t)}function uH(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function hH(t){return t.points!==void 0}function cH(t){return t.x!==void 0&&t.y!==void 0}function pH(t){return t.paths!==void 0}function dH(t){return t.rings!==void 0}const GS=[];function lk(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function uk(t,e,i,r,a,p){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:a,zmax:p}}function hk(t,e,i,r,a,p){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:a,mmax:p}}function ck(t,e,i,r,a,p,y,m){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:a,ymax:p,zmax:y,mmax:m}}function qS(t,e=!1,i=!1){return e?i?ck(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):uk(t[0],t[1],t[2],t[3],t[4],t[5]):i?hk(t[0],t[1],t[2],t[3],t[4],t[5]):lk(t[0],t[1],t[2],t[3])}function Sme(t){return t?uH(t)?t:cH(t)?yH(t):dH(t)?pk(t):pH(t)?dk(t):hH(t)?fH(t):null:null}function fH(t){const{hasZ:e,hasM:i,points:r}=t;return qS(VS(GS,r,e??!1,i??!1),e,i)}function yH(t){const{x:e,y:i,z:r,m:a}=t,p=a!=null;return r!=null?p?ck(e,i,r,a,e,i,r,a):uk(e,i,r,e,i,r):p?hk(e,i,a,e,i,a):lk(e,i,e,i)}function pk(t){const{hasZ:e,hasM:i,rings:r}=t,a=hd(GS,r,e??!1,i??!1);return a?qS(a,e,i):null}function dk(t){const{hasZ:e,hasM:i,paths:r}=t,a=hd(GS,r,e??!1,i??!1);return a?qS(a,e,i):null}var Em;function K7(t){return!Array.isArray(t[0])}let po=Em=class extends Pu{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let r=!1,a=!1;for(const y of e)y.hasZ&&(r=!0),y.hasM&&(a=!0);const p={rings:e.map(y=>{const m=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(r&&y.hasZ){const _=y.zmin+.5*(y.zmax-y.zmin);for(let x=0;x<m.length;x++)m[x].push(_)}if(a&&y.hasM){const _=y.mmin+.5*(y.mmax-y.mmin);for(let x=0;x<m.length;x++)m[x].push(_)}return m}),spatialReference:i};return r&&(p.hasZ=!0),a&&(p.hasM=!0),new Em(p)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,r,a=null,p=null;return t&&!Array.isArray(t)?(a=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,r=t.hasM):a=t,a=a||[],e=e||Je.WGS84,a.length&&a[0]&&a[0][0]!=null&&typeof a[0][0]=="number"&&(a=[a]),p=a[0]&&a[0][0],p&&(i===void 0&&r===void 0?(i=p.length>2,r=p.length>3):i===void 0?i=r?p.length>3:p.length>2:r===void 0&&(r=i?p.length>3:p.length>2)),{rings:a,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=KB(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Ue;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=pk(this);if(!e)return null;const i=new vt(e);return i.spatialReference=t,i}get isSelfIntersecting(){return _q(this.rings)}writeRings(t,e){e.rings=se(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(K7(t)){const r=[];for(let a=0,p=t.length;a<p;a++)r[a]=t[a].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new Em;return t.spatialReference=this.spatialReference,t.rings=se(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([a,p,y,m],[_,x,M,A])=>a===_&&p===x&&(y==null&&M==null||y===M)&&(m==null&&A==null||m===A);for(let a=0;a<this.rings.length;a++){const p=this.rings[a],y=t.rings[a];if(!a2(p,y,r))return!1}return!0}contains(t){if(!t)return!1;const e=T2(t,this.spatialReference);return dA(this,e??t)}isClockwise(t){let e;return e=K7(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,XA(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,a=this.hasM;return r&&!a?new Ue(i[0],i[1],i[2],void 0,this.spatialReference):a&&!r?new Ue(i[0],i[1],void 0,i[2],this.spatialReference):r&&a?new Ue(i[0],i[1],i[2],i[3],this.spatialReference):new Ue(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(ud(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ue(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(a=>new Ue(a,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(ud(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};v([S({readOnly:!0})],po.prototype,"cache",null),v([S({readOnly:!0})],po.prototype,"centroid",null),v([S({readOnly:!0})],po.prototype,"extent",null),v([S({readOnly:!0})],po.prototype,"isSelfIntersecting",null),v([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],po.prototype,"rings",void 0),v([$e("rings")],po.prototype,"writeRings",null),po=Em=v([B("esri.geometry.Polygon")],po),po.prototype.toJSON.isDefaultToJSON=!0;const on=po;var X3;function mH(t){return!Array.isArray(t[0])}let _l=X3=class extends Pu{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,r,a=null,p=null;return t&&!Array.isArray(t)?(a=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,r=t.hasM):a=t,a=a||[],e=e||Je.WGS84,a.length&&a[0]&&a[0][0]!=null&&typeof a[0][0]=="number"&&(a=[a]),p=a[0]&&a[0][0],p&&(i===void 0&&r===void 0?(i=p.length>2,r=!1):i===void 0?i=!r&&p.length>3:r===void 0&&(r=!i&&p.length>3)),{paths:a,spatialReference:e,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=dk(this);if(!e)return null;const i=new vt(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=se(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(mH(t)){const r=[];for(let a=0,p=t.length;a<p;a++)r[a]=t[a].toArray();e[i]=r}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new X3;return t.spatialReference=this.spatialReference,t.paths=se(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,a=this.hasM;return r&&!a?new Ue(i[0],i[1],i[2],void 0,this.spatialReference):a&&!r?new Ue(i[0],i[1],void 0,i[2],this.spatialReference):r&&a?new Ue(i[0],i[1],i[2],i[3],this.spatialReference):new Ue(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(ud(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(a=>new Ue(a,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ue(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(ud(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};v([S({readOnly:!0})],_l.prototype,"cache",null),v([S({readOnly:!0})],_l.prototype,"extent",null),v([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],_l.prototype,"paths",void 0),v([$e("paths")],_l.prototype,"writePaths",null),_l=X3=v([B("esri.geometry.Polyline")],_l),_l.prototype.toJSON.isDefaultToJSON=!0;const _s=_l,cv=Rr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Q3=Rr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function fk(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function US(t){return t.points!==void 0}function BS(t){return t.x!==void 0&&t.y!==void 0}function HS(t){return t.paths!==void 0}function ic(t){return t.rings!==void 0}function Ba(t){return t==null?null:t instanceof Pu?t:BS(t)?Ue.fromJSON(t):HS(t)?_s.fromJSON(t):ic(t)?on.fromJSON(t):US(t)?xd.fromJSON(t):fk(t)?vt.fromJSON(t):null}function Mc(t){return t?BS(t)?"esriGeometryPoint":HS(t)?"esriGeometryPolyline":ic(t)?"esriGeometryPolygon":fk(t)?"esriGeometryEnvelope":US(t)?"esriGeometryMultipoint":null:null}const gH={esriGeometryPoint:Ue,esriGeometryPolyline:_s,esriGeometryPolygon:on,esriGeometryEnvelope:vt,esriGeometryMultipoint:xd};function vH(t){return t&&gH[t]||null}const Nu={base:Pu,key:"type",typeMap:{extent:vt,multipoint:xd,point:Ue,polyline:_s,polygon:on}};Do(Nu);let yk=0;const Ec=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+yk++})}};return e=v([B("esri.core.Identifiable")],e),e},WS=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:yk++})}};return e=v([B("esri.core.NumericIdentifiable")],e),e};let Y7=class extends Ec(class{}){};Y7=v([B("esri.core.Identifiable")],Y7);async function bH(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await we(()=>import("./portalLayers-3a15f32b.js"),["assets/portalLayers-3a15f32b.js","assets/lazyLayerLoader-5f96bef8.js","assets/layersLoader-2071c3dd.js","assets/fetchService-6f594e16.js","assets/jsonContext-0a1eba8c.js"]);try{return await i(e)}catch(r){const a=e&&e.portalItem,p=a&&a.id||"unset",y=a&&a.portal&&a.portal.url||_t.portalUrl;throw me.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+p+"')",r),r}}let wH=0,Bi=class extends Wo.EventedMixin(Ec(Fo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new vt(-180,-90,180,90,Je.WGS84),this.id=Date.now().toString(16)+"-layer-"+wH++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Je.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await we(()=>import("./arcgisLayers-23808a85.js"),["assets/arcgisLayers-23808a85.js","assets/fetchService-6f594e16.js","assets/lazyLayerLoader-5f96bef8.js"])).fromUrl(i)}static fromPortalItem(e){return bH(e)}initialize(){this.when().catch(e=>{dr(e)||me.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return or(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ot(e,{query:{f:"json"},responseType:"json"})).data;throw new ie("layer:no-attribution-data","Layer does not have attribution data")}};v([S({type:String})],Bi.prototype,"attributionDataUrl",void 0),v([S({type:vt})],Bi.prototype,"fullExtent",void 0),v([S({readOnly:!0})],Bi.prototype,"hasAttributionData",null),v([S({type:String,clonable:!1})],Bi.prototype,"id",void 0),v([S({type:Boolean,nonNullable:!0})],Bi.prototype,"legendEnabled",void 0),v([S({type:["show","hide","hide-children"]})],Bi.prototype,"listMode",void 0),v([S({type:Number,range:{min:0,max:1},nonNullable:!0})],Bi.prototype,"opacity",void 0),v([S({clonable:!1})],Bi.prototype,"parent",void 0),v([S({readOnly:!0})],Bi.prototype,"parsedUrl",null),v([S({type:Boolean})],Bi.prototype,"popupEnabled",void 0),v([S({type:Boolean})],Bi.prototype,"attributionVisible",void 0),v([S({type:Je})],Bi.prototype,"spatialReference",void 0),v([S({type:String})],Bi.prototype,"title",void 0),v([S({readOnly:!0,json:{read:!1}})],Bi.prototype,"type",void 0),v([S()],Bi.prototype,"url",void 0),v([S({type:Boolean,nonNullable:!0})],Bi.prototype,"visible",void 0),Bi=v([B("esri.layers.Layer")],Bi);const I1=Bi;function e_(t,e,i){let r,a;if(t)for(let p=0,y=t.length;p<y;p++){if(r=t.at(p),(r==null?void 0:r[e])===i)return r;if((r==null?void 0:r.type)==="group"&&(a=e_(r.layers,e,i),a))return a}}const _H=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new De;const r=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},a=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||me.getLogger(this).error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},p=y=>{y.parent=null,this.layerRemoved(y)};this.addHandles([this.layers.on("before-add",y=>r(y.item)),this.layers.on("after-add",y=>a(y.item)),this.layers.on("after-remove",y=>p(y.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",cc(i,this._get("layers")))}add(i,r){const a=this.layers;if(r=a.getNextIndex(r),i instanceof I1){const p=i;p.parent===this?this.reorder(p,r):a.add(p,r)}else Ya(i)?i.then(p=>{this.destroyed||this.add(p,r)}):me.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const a=this.layers;let p=a.getNextIndex(r);i.slice().forEach(y=>{y.parent!==this?(a.add(y,p),p+=1):this.reorder(y,p)})}findLayerById(i){return e_(this.layers,"id",i)}findLayerByUid(i){return e_(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return v([S()],e.prototype,"layers",null),e=v([B("esri.support.LayersMixin")],e),e};function t_(t,e,i){if(t)for(let r=0,a=t.length;r<a;r++){const p=t.at(r);if(p[e]===i)return p;if((p==null?void 0:p.type)==="group"){const y=t_(p.tables,e,i);if(y)return y}}}const SH=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new De,this.addHandles([this.tables.on("after-add",r=>{const a=r.item;a.parent&&a.parent!==this&&"tables"in a.parent&&a.parent.tables.remove(a),a.parent=this,a.type!=="feature"&&me.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",cc(i,this._get("tables")))}findTableById(i){return t_(this.tables,"id",i)}findTableByUid(i){return t_(this.tables,"uid",i)}};return v([S()],e.prototype,"tables",null),e=v([B("esri.support.TablesMixin")],e),e};let fo=class extends SH(_H(Wo.EventedMixin(je))){constructor(e){super(e),this.allLayers=new ld({getCollections:()=>{var i,r,a;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(a=this.basemap)==null?void 0:a.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=zB(this),this.basemap=null,this.editableLayers=new ld({getCollections:()=>[this.allLayers],itemFilterFunction:RB}),this.ground=new hv,this._basemapCache=jB()}destroy(){var e,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(i=this.basemap)==null||i.destroy(),DB(this._basemapCache),this._basemapCache=null}castBasemap(e){return FB(e,this._basemapCache)}castGround(e){return VB(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};v([S({readOnly:!0,dependsOn:[]})],fo.prototype,"allLayers",void 0),v([S({readOnly:!0})],fo.prototype,"allTables",void 0),v([S({type:nv})],fo.prototype,"basemap",void 0),v([It("basemap")],fo.prototype,"castBasemap",null),v([S({readOnly:!0})],fo.prototype,"editableLayers",void 0),v([S({type:hv,nonNullable:!0})],fo.prototype,"ground",void 0),v([It("ground")],fo.prototype,"castGround",null),fo=v([B("esri.Map")],fo);const mk=fo,Xt=t=>{let e=class extends t{clone(){var _;const i=is(Yi(this),"unable to clone instance of non-accessor class"),r=i.metadatas,a=i.store,p={},y=new Map;for(const x in r){const M=r[x],A=a==null?void 0:a.originOf(x),C=M.clonable;if(M.readOnly||C===!1||A!==Me.USER&&A!==Me.DEFAULTS&&A!==Me.WEB_MAP&&A!==Me.WEB_SCENE)continue;const N=this[x];let j=null;j=typeof C=="function"?C(N):C==="reference"?N:m3(N),N!=null&&j==null||(A===Me.DEFAULTS?y.set(x,j):p[x]=j)}const m=new(Object.getPrototypeOf(this)).constructor(p);if(y.size){const x=(_=Yi(m))==null?void 0:_.store;if(x)for(const[M,A]of y)x.set(M,A,Me.DEFAULTS)}return m}};return e=v([B("esri.core.Clonable")],e),e};let Z7=class extends Xt(je){};Z7=v([B("esri.core.Clonable")],Z7);var cd;function xH(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||r!=null&&+e>r)return cd.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return cd.INVALID_CODED_VALUE}return null}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(cd||(cd={}));const $H=me.getLogger("esri.support.arcadeOnDemand");let Ub;function vc(){return Ub||(Ub=(async()=>{const t=await we(()=>import("./arcadeUtils-5052f426.js").then(e=>e.az),["assets/arcadeUtils-5052f426.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js","assets/number-b97eaaa0.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),Ub}const Mme=(t,e,i)=>JS.create(t,e,i,null,["$feature"],[]),Eme=(t,e,i)=>JS.create(t,e,i,null,["$feature","$view"],[]),TH=(t,e,i,r)=>JS.create(t,e,i,r,["$feature","$view"],[]);let JS=class gk{constructor(e,i,r,a,p,y,m){this.services=null,this.script=e,this.evaluate=a;const _=Array.isArray(y)?y:y.fields;this.fields=_,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=p,this._spatialReference=m,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,r,a,p,y){const{arcade:m,Feature:_,Dictionary:x}=await vc(),M=Je.fromJSON(i);let A;try{A=m.parseScript(e,y)}catch(ye){return $H.error(new ie("arcade-bad-expression","Failed to parse arcade script",{script:e,error:ye})),null}const C=p.reduce((ye,Se)=>({...ye,[Se]:null}),{});let N=null;a!=null&&(N=new x(a),N.immutable=!0,C.$config=null);const j=m.scriptUsesGeometryEngine(A),D=j&&m.enableGeometrySupport(),z=m.scriptUsesFeatureSet(A)&&m.enableFeatureSetSupport(),W=m.scriptIsAsync(A),Y=W&&m.enableAsyncSupport(),K={vars:C,spatialReference:M,useAsync:!!Y};await Promise.all([D,z,Y]);const ee=new Set;await m.loadDependentModules(ee,A,null,W,j);const ne=new x;ne.immutable=!1,ne.setField("scale",0);const oe=m.compileScript(A,K),ue=(ye,Se)=>("$view"in ye&&ye.$view&&(ne.setField("scale",typeof ye.$view=="object"&&"scale"in ye.$view?ye.$view.scale:void 0),ye.$view=ne),N&&(ye.$config=N),oe({vars:ye,spatialReference:M,services:Se}));return new gk(e,m,A,ue,new _,r,M)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const IH=/^([0-9_])/,MH=/[^a-z0-9_\u0080-\uffff]+/gi;function EH(t){return t==null?null:t.trim().replaceAll(MH,"_").replace(IH,"F$1")||null}const AH=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],kH=["field","normalizationField"];function X7(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(Q7(AH,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)Q7(kH,r,e)}}function Q7(t,e,i){if(t)for(const r of t){const a=S1(r,e),p=a&&typeof a!="function"&&i.get(a);p&&Pr(r,p.name,e)}}function vk(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const r=e.get(t.startField),a=e.get(t.endField);t.startField=(r==null?void 0:r.name)??null,t.endField=(a==null?void 0:a.name)??null}else{const r=e.get(t.startTimeField),a=e.get(t.endTimeField);t.startTimeField=(r==null?void 0:r.name)??null,t.endTimeField=(a==null?void 0:a.name)??null}}const Bb=new Set;function KS(t,e){return t&&e?(Bb.clear(),Qf(Bb,t,e),Array.from(Bb).sort()):[]}function Qf(t,e,i){var r;if(i)if((r=e==null?void 0:e.fields)!=null&&r.length)if(i.includes("*"))for(const{name:a}of e.fields)t.add(a);else for(const a of i)$s(t,e,a);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const a of i)a!=null&&t.add(a)}}function $s(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function Ame(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function Wr(t,e,i){var p;if(!i)return;const{arcadeUtils:r}=await vc(),a=r.extractFieldNames(i,(p=e==null?void 0:e.fields)==null?void 0:p.map(y=>y.name));for(const y of a)$s(t,e,y)}async function bk(t,e,i){if(i&&i!=="1=1"){const{WhereClause:r}=await we(()=>import("./WhereClause-1000016d.js").then(p=>p.W),["assets/WhereClause-1000016d.js","assets/executionError-c92d3b85.js"]),a=r.create(i,e);if(!a.isStandardized)throw new ie("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Qf(t,e,a.fieldNames)}}function OH({displayField:t,fields:e}){return t||(e&&e.length?Hb(e,"name-or-title")||Hb(e,"unique-identifier")||Hb(e,"type-or-category")||CH(e):null)}function CH(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function Hb(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function kme(t,e){var r;if(!e)return;const i=(r=e.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function PH(t,e,i){i.onStatisticExpression?Wr(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function Ome(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],a=i.popupTemplate;r.push(NH(t,e,a)),i.fields&&r.push(...i.fields.map(async p=>PH(t,e.fieldsIndex,p))),await Promise.all(r)}async function NH(t,e,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(p=>Wr(t,e.fieldsIndex,p.expression)));const a=i==null?void 0:i.content;if(Array.isArray(a))for(const p of a)p.type==="expression"&&p.expressionInfo&&r.push(Wr(t,e.fieldsIndex,p.expressionInfo.expression));await Promise.all(r)}async function Cme(t,e,i){e&&(e.timeInfo&&i!=null&&i.timeExtent&&Qf(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Qf(t,e.fieldsIndex,[e.floorInfo.floorField]),i!=null&&i.where!=null&&await bk(t,e.fieldsIndex,i.where))}async function Pme(t,e,i){e&&i&&await Promise.all(i.map(r=>RH(t,e,r)))}async function RH(t,e,i){e&&i&&(i.valueExpression?await Wr(t,e.fieldsIndex,i.valueExpression):i.field&&$s(t,e.fieldsIndex,i.field))}function Nme(t){return t?KS(t.fieldsIndex,wk(t)):[]}function LH(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?KS(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const jH=["oid","global-id","guid"],DH=["oid","global-id"],FH=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function zH(t){const e=new Set;_k(t).forEach(r=>e.add(r)),LH(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function wk(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:a,editorField:p}=e;return[i,r,a,p].filter(Boolean)}function _k(t){return wk(t).map(e=>e.toLowerCase())}function VH(t,e){var i;return t.editable&&!jH.includes(t.type)&&!_k(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function GH(t,e){var r;const i=((r=t.name)==null?void 0:r.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||zH(e).includes(i)||DH.includes(t.type)||FH.some(a=>a.test(i)))}async function Rme(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i&&i.length&&await Promise.all(i.map(a=>qH(t,r,a)))}async function qH(t,e,i){if(!i)return;const r=i.getLabelExpression(),a=i.where;if(r.type==="arcade")await Wr(t,e,r.expression);else{const p=r.expression.match(/{[^}]*}/g);p&&p.forEach(y=>{$s(t,e,y.slice(1,-1))})}await bk(t,e,a)}function UH(t){const e=t.defaultValue;return e!==void 0&&$k(t,e)?e:t.nullable?null:void 0}function Sk(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function BH(t){return t===null||Sk(t)}const YS="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function HH(t){return t===null||YS(t)}function xk(t){return t!=null&&typeof t=="string"}function WH(t){return t===null||xk(t)}function JH(){return!0}function $k(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?HH:YS;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?BH:Sk;break;case"string":case"esriFieldTypeString":i=t.nullable?WH:xk;break;default:i=JH}return arguments.length===1?i:i(e)}const KH=["integer","small-integer","single","double"],YH=new Set([...KH,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),ZH=["date","date-only","time-only","timestamp-offset"],XH=new Set([...ZH,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function Tk(t){return t!=null&&YH.has(t.type)}function Lme(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function jme(t){return t!=null&&XH.has(t.type)}var pv,dv;function Dme(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Fme(t,e){return t==null||t.nullable&&e===null?null:Tk(t)&&!QH(t.type,Number(e))?pv.OUT_OF_RANGE:$k(t,e)?t.domain?xH(t.domain,e):null:dv.INVALID_TYPE}function QH(t,e){const i=typeof t=="string"?Ik(t):t;if(!i)return!1;const r=i.min,a=i.max;return i.isInteger?YS(e)&&e>=r&&e<=a:e>=r&&e<=a}function Ik(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return eW;case"esriFieldTypeInteger":case"integer":return tW;case"esriFieldTypeBigInteger":case"big-integer":return iW;case"esriFieldTypeSingle":case"single":return rW;case"esriFieldTypeDouble":case"double":return sW}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(pv||(pv={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(dv||(dv={}));const eW={min:-32768,max:32767,isInteger:!0},tW={min:-2147483648,max:2147483647,isInteger:!0},iW={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},rW={min:-34e37,max:12e37,isInteger:!1},sW={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function zme(t,e,i){switch(t){case cd.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case cd.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case dv.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case pv.OUT_OF_RANGE:{const{min:r,max:a}=Ik(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${a}`}}}function Vme(t,e){return!nW(t,e,null)}function nW(t,e,i){if(!e||!e.attributes||!t){if(i!=null)for(const p of t??[])i.add(p);return!0}const r=e.attributes;let a=!1;for(const p of t)if(!(p in r)){if(a=!0,i==null)break;i.add(p)}return a}function oW(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let Am=class extends de{constructor(e){super(e),this.type=null}};v([S({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Am.prototype,"type",void 0),Am=v([B("esri.popup.content.Content")],Am);const Ru=Am;var i_;let sh=i_=class extends Ru{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new i_({description:this.description,displayType:this.displayType,title:this.title})}};v([S({type:String,json:{write:!0}})],sh.prototype,"description",void 0),v([S({type:["auto","preview","list"],json:{write:!0}})],sh.prototype,"displayType",void 0),v([S({type:String,json:{write:!0}})],sh.prototype,"title",void 0),v([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],sh.prototype,"type",void 0),sh=i_=v([B("esri.popup.content.AttachmentsContent")],sh);const e1=sh;var r_;let nh=r_=class extends Ru{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new r_({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?se(this.outFields):null})}};v([S()],nh.prototype,"creator",void 0),v([S()],nh.prototype,"destroyer",void 0),v([S()],nh.prototype,"outFields",void 0),v([S({type:["custom"],readOnly:!0})],nh.prototype,"type",void 0),nh=r_=v([B("esri.popup.content.CustomContent")],nh);const aW=nh;var s_;let Zc=s_=class extends de{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new s_({title:this.title,expression:this.expression})}};v([S({type:String,json:{write:!0}})],Zc.prototype,"title",void 0),v([S({type:String,json:{write:!0}})],Zc.prototype,"expression",void 0),v([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Zc.prototype,"returnType",void 0),Zc=s_=v([B("esri.popup.ElementExpressionInfo")],Zc);const lW=Zc;var n_;let m0=n_=class extends Ru{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new n_({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};v([S({type:lW,json:{write:!0}})],m0.prototype,"expressionInfo",void 0),v([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],m0.prototype,"type",void 0),m0=n_=v([B("esri.popup.content.ExpressionContent")],m0);const ZS=m0;class Ac extends Error{}class uW extends Ac{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class hW extends Ac{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class cW extends Ac{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class g0 extends Ac{}class Mk extends Ac{constructor(e){super(`Invalid unit ${e}`)}}class Ys extends Ac{}class al extends Ac{constructor(){super("Zone is an abstract class")}}const ke="numeric",Xn="short",Ts="long",fv={year:ke,month:ke,day:ke},Ek={year:ke,month:Xn,day:ke},pW={year:ke,month:Xn,day:ke,weekday:Xn},Ak={year:ke,month:Ts,day:ke},kk={year:ke,month:Ts,day:ke,weekday:Ts},Ok={hour:ke,minute:ke},Ck={hour:ke,minute:ke,second:ke},Pk={hour:ke,minute:ke,second:ke,timeZoneName:Xn},Nk={hour:ke,minute:ke,second:ke,timeZoneName:Ts},Rk={hour:ke,minute:ke,hourCycle:"h23"},Lk={hour:ke,minute:ke,second:ke,hourCycle:"h23"},jk={hour:ke,minute:ke,second:ke,hourCycle:"h23",timeZoneName:Xn},Dk={hour:ke,minute:ke,second:ke,hourCycle:"h23",timeZoneName:Ts},Fk={year:ke,month:ke,day:ke,hour:ke,minute:ke},zk={year:ke,month:ke,day:ke,hour:ke,minute:ke,second:ke},Vk={year:ke,month:Xn,day:ke,hour:ke,minute:ke},Gk={year:ke,month:Xn,day:ke,hour:ke,minute:ke,second:ke},dW={year:ke,month:Xn,day:ke,weekday:Xn,hour:ke,minute:ke},qk={year:ke,month:Ts,day:ke,hour:ke,minute:ke,timeZoneName:Xn},Uk={year:ke,month:Ts,day:ke,hour:ke,minute:ke,second:ke,timeZoneName:Xn},Bk={year:ke,month:Ts,day:ke,weekday:Ts,hour:ke,minute:ke,timeZoneName:Ts},Hk={year:ke,month:Ts,day:ke,weekday:Ts,hour:ke,minute:ke,second:ke,timeZoneName:Ts};class M1{get type(){throw new al}get name(){throw new al}get ianaName(){return this.name}get isUniversal(){throw new al}offsetName(e,i){throw new al}formatOffset(e,i){throw new al}offset(e){throw new al}equals(e){throw new al}get isValid(){throw new al}}let Wb=null;class O2 extends M1{static get instance(){return Wb===null&&(Wb=new O2),Wb}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Jk(e,i,r)}formatOffset(e,i){return xf(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let km={};function fW(t){return km[t]||(km[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),km[t]}const yW={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function mW(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,a,p,y,m,_,x,M]=r;return[y,a,p,m,_,x,M]}function gW(t,e){const i=t.formatToParts(e),r=[];for(let a=0;a<i.length;a++){const{type:p,value:y}=i[a],m=yW[p];p==="era"?r[m]=y:Tt(m)||(r[m]=parseInt(y,10))}return r}let _y={};class Ha extends M1{static create(e){return _y[e]||(_y[e]=new Ha(e)),_y[e]}static resetCache(){_y={},km={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ha.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Jk(e,i,r,this.name)}formatOffset(e,i){return xf(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const r=fW(this.name);let[a,p,y,m,_,x,M]=r.formatToParts?gW(r,i):mW(r,i);m==="BC"&&(a=-Math.abs(a)+1);const C=e6({year:a,month:p,day:y,hour:_===24?0:_,minute:x,second:M,millisecond:0});let N=+i;const j=N%1e3;return N-=j>=0?j:1e3+j,(C-N)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let e8={};function vW(t,e={}){const i=JSON.stringify([t,e]);let r=e8[i];return r||(r=new Intl.ListFormat(t,e),e8[i]=r),r}let o_={};function a_(t,e={}){const i=JSON.stringify([t,e]);let r=o_[i];return r||(r=new Intl.DateTimeFormat(t,e),o_[i]=r),r}let l_={};function bW(t,e={}){const i=JSON.stringify([t,e]);let r=l_[i];return r||(r=new Intl.NumberFormat(t,e),l_[i]=r),r}let u_={};function wW(t,e={}){const{base:i,...r}=e,a=JSON.stringify([t,r]);let p=u_[a];return p||(p=new Intl.RelativeTimeFormat(t,e),u_[a]=p),p}let v0=null;function _W(){return v0||(v0=new Intl.DateTimeFormat().resolvedOptions().locale,v0)}function SW(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,a;try{r=a_(t).resolvedOptions(),a=t}catch{const _=t.substring(0,i);r=a_(_).resolvedOptions(),a=_}const{numberingSystem:p,calendar:y}=r;return[a,p,y]}}function xW(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function $W(t){const e=[];for(let i=1;i<=12;i++){const r=lt.utc(2016,i,1);e.push(t(r))}return e}function TW(t){const e=[];for(let i=1;i<=7;i++){const r=lt.utc(2016,11,13+i);e.push(t(r))}return e}function Sy(t,e,i,r,a){const p=t.listingMode(i);return p==="error"?null:p==="en"?r(e):a(e)}function IW(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class MW{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:a,floor:p,...y}=r;if(!i||Object.keys(y).length>0){const m={useGrouping:!1,...r};r.padTo>0&&(m.minimumIntegerDigits=r.padTo),this.inf=bW(e,m)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):QS(e,3);return Vi(i,this.padTo)}}}class EW{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const y=-1*(e.offset/60),m=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;e.offset!==0&&Ha.create(m).valid?(a=m,this.dt=e):(a="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,a=e.zone.name):(a="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const p={...this.opts};p.timeZone=p.timeZone||a,this.dtf=a_(i,p)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class AW{constructor(e,i,r){this.opts={style:"long",...r},!i&&Wk()&&(this.rtf=wW(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):HW(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class ui{static fromOpts(e){return ui.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,r,a=!1){const p=e||zi.defaultLocale,y=p||(a?"en-US":_W()),m=i||zi.defaultNumberingSystem,_=r||zi.defaultOutputCalendar;return new ui(y,m,_,p)}static resetCache(){v0=null,o_={},l_={},u_={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:r}={}){return ui.create(e,i,r)}constructor(e,i,r,a){const[p,y,m]=SW(e);this.locale=p,this.numberingSystem=i||y||null,this.outputCalendar=r||m||null,this.intl=xW(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=IW(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:ui.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,r=!0){return Sy(this,e,r,Zk,()=>{const a=i?{month:e,day:"numeric"}:{month:e},p=i?"format":"standalone";return this.monthsCache[p][e]||(this.monthsCache[p][e]=$W(y=>this.extract(y,a,"month"))),this.monthsCache[p][e]})}weekdays(e,i=!1,r=!0){return Sy(this,e,r,eO,()=>{const a=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},p=i?"format":"standalone";return this.weekdaysCache[p][e]||(this.weekdaysCache[p][e]=TW(y=>this.extract(y,a,"weekday"))),this.weekdaysCache[p][e]})}meridiems(e=!0){return Sy(this,void 0,e,()=>tO,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[lt.utc(2016,11,13,9),lt.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return Sy(this,e,i,iO,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[lt.utc(-40,1,1),lt.utc(2017,1,1)].map(a=>this.extract(a,r,"era"))),this.eraCache[e]})}extract(e,i,r){const a=this.dtFormatter(e,i),p=a.formatToParts(),y=p.find(m=>m.type.toLowerCase()===r);return y?y.value:null}numberFormatter(e={}){return new MW(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new EW(e,this.intl,i)}relFormatter(e={}){return new AW(this.intl,this.isEnglish(),e)}listFormatter(e={}){return vW(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let Jb=null;class Cr extends M1{static get utcInstance(){return Jb===null&&(Jb=new Cr(0)),Jb}static instance(e){return e===0?Cr.utcInstance:new Cr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Cr(P2(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${xf(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${xf(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return xf(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class kW extends M1{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function iu(t,e){if(Tt(t)||t===null)return e;if(t instanceof M1)return t;if(OW(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?O2.instance:i==="utc"||i==="gmt"?Cr.utcInstance:Cr.parseSpecifier(i)||Ha.create(t)}else return rc(t)?Cr.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new kW(t)}let t8=()=>Date.now(),i8="system",r8=null,s8=null,n8=null,o8=60,a8;class zi{static get now(){return t8}static set now(e){t8=e}static set defaultZone(e){i8=e}static get defaultZone(){return iu(i8,O2.instance)}static get defaultLocale(){return r8}static set defaultLocale(e){r8=e}static get defaultNumberingSystem(){return s8}static set defaultNumberingSystem(e){s8=e}static get defaultOutputCalendar(){return n8}static set defaultOutputCalendar(e){n8=e}static get twoDigitCutoffYear(){return o8}static set twoDigitCutoffYear(e){o8=e%100}static get throwOnInvalid(){return a8}static set throwOnInvalid(e){a8=e}static resetCaches(){ui.resetCache(),Ha.resetCache()}}function Tt(t){return typeof t>"u"}function rc(t){return typeof t=="number"}function C2(t){return typeof t=="number"&&t%1===0}function OW(t){return typeof t=="string"}function CW(t){return Object.prototype.toString.call(t)==="[object Date]"}function Wk(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function PW(t){return Array.isArray(t)?t:[t]}function l8(t,e,i){if(t.length!==0)return t.reduce((r,a)=>{const p=[e(a),a];return r&&i(r[0],p[0])===r[0]?r:p},null)[1]}function NW(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function pd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ja(t,e,i){return C2(t)&&t>=e&&t<=i}function RW(t,e){return t-e*Math.floor(t/e)}function Vi(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Jl(t){if(!(Tt(t)||t===null||t===""))return parseInt(t,10)}function Uu(t){if(!(Tt(t)||t===null||t===""))return parseFloat(t)}function XS(t){if(!(Tt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function QS(t,e,i=!1){const r=10**e;return(i?Math.trunc:Math.round)(t*r)/r}function E1(t){return t%4===0&&(t%100!==0||t%400===0)}function Sf(t){return E1(t)?366:365}function yv(t,e){const i=RW(e-1,12)+1,r=t+(e-i)/12;return i===2?E1(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function e6(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function mv(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||r===3?53:52}function h_(t){return t>99?t:t>zi.twoDigitCutoffYear?1900+t:2e3+t}function Jk(t,e,i,r=null){const a=new Date(t),p={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(p.timeZone=r);const y={timeZoneName:e,...p},m=new Intl.DateTimeFormat(i,y).formatToParts(a).find(_=>_.type.toLowerCase()==="timezonename");return m?m.value:null}function P2(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,a=i<0||Object.is(i,-0)?-r:r;return i*60+a}function Kk(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ys(`Invalid unit value ${t}`);return e}function gv(t,e){const i={};for(const r in t)if(pd(t,r)){const a=t[r];if(a==null)continue;i[e(r)]=Kk(a)}return i}function xf(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),a=t>=0?"+":"-";switch(e){case"short":return`${a}${Vi(i,2)}:${Vi(r,2)}`;case"narrow":return`${a}${i}${r>0?`:${r}`:""}`;case"techie":return`${a}${Vi(i,2)}${Vi(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function N2(t){return NW(t,["hour","minute","second","millisecond"])}const LW=["January","February","March","April","May","June","July","August","September","October","November","December"],Yk=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],jW=["J","F","M","A","M","J","J","A","S","O","N","D"];function Zk(t){switch(t){case"narrow":return[...jW];case"short":return[...Yk];case"long":return[...LW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Xk=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Qk=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],DW=["M","T","W","T","F","S","S"];function eO(t){switch(t){case"narrow":return[...DW];case"short":return[...Qk];case"long":return[...Xk];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const tO=["AM","PM"],FW=["Before Christ","Anno Domini"],zW=["BC","AD"],VW=["B","A"];function iO(t){switch(t){case"narrow":return[...VW];case"short":return[...zW];case"long":return[...FW];default:return null}}function GW(t){return tO[t.hour<12?0:1]}function qW(t,e){return eO(e)[t.weekday-1]}function UW(t,e){return Zk(e)[t.month-1]}function BW(t,e){return iO(e)[t.year<0?0:1]}function HW(t,e,i="always",r=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},p=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&p){const A=t==="days";switch(e){case 1:return A?"tomorrow":`next ${a[t][0]}`;case-1:return A?"yesterday":`last ${a[t][0]}`;case 0:return A?"today":`this ${a[t][0]}`}}const y=Object.is(e,-0)||e<0,m=Math.abs(e),_=m===1,x=a[t],M=r?_?x[1]:x[2]||x[1]:_?a[t][0]:t;return y?`${m} ${M} ago`:`in ${m} ${M}`}function u8(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const WW={D:fv,DD:Ek,DDD:Ak,DDDD:kk,t:Ok,tt:Ck,ttt:Pk,tttt:Nk,T:Rk,TT:Lk,TTT:jk,TTTT:Dk,f:Fk,ff:Vk,fff:qk,ffff:Bk,F:zk,FF:Gk,FFF:Uk,FFFF:Hk};class Or{static create(e,i={}){return new Or(e,i)}static parseFormat(e){let i=null,r="",a=!1;const p=[];for(let y=0;y<e.length;y++){const m=e.charAt(y);m==="'"?(r.length>0&&p.push({literal:a||/^\s+$/.test(r),val:r}),i=null,r="",a=!a):a||m===i?r+=m:(r.length>0&&p.push({literal:/^\s+$/.test(r),val:r}),r=m,i=m)}return r.length>0&&p.push({literal:a||/^\s+$/.test(r),val:r}),p}static macroTokenToFormatOpts(e){return WW[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Vi(e,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",p=(N,j)=>this.loc.extract(e,N,j),y=N=>e.isOffsetFixed&&e.offset===0&&N.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,N.format):"",m=()=>r?GW(e):p({hour:"numeric",hourCycle:"h12"},"dayperiod"),_=(N,j)=>r?UW(e,N):p(j?{month:N}:{month:N,day:"numeric"},"month"),x=(N,j)=>r?qW(e,N):p(j?{weekday:N}:{weekday:N,month:"long",day:"numeric"},"weekday"),M=N=>{const j=Or.macroTokenToFormatOpts(N);return j?this.formatWithSystemDefault(e,j):N},A=N=>r?BW(e,N):p({era:N},"era"),C=N=>{switch(N){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return m();case"d":return a?p({day:"numeric"},"day"):this.num(e.day);case"dd":return a?p({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return x("short",!0);case"cccc":return x("long",!0);case"ccccc":return x("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return x("short",!1);case"EEEE":return x("long",!1);case"EEEEE":return x("narrow",!1);case"L":return a?p({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return a?p({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return _("short",!0);case"LLLL":return _("long",!0);case"LLLLL":return _("narrow",!0);case"M":return a?p({month:"numeric"},"month"):this.num(e.month);case"MM":return a?p({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return _("short",!1);case"MMMM":return _("long",!1);case"MMMMM":return _("narrow",!1);case"y":return a?p({year:"numeric"},"year"):this.num(e.year);case"yy":return a?p({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return a?p({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return a?p({year:"numeric"},"year"):this.num(e.year,6);case"G":return A("short");case"GG":return A("long");case"GGGGG":return A("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return M(N)}};return u8(Or.parseFormat(i),C)}formatDurationFromString(e,i){const r=_=>{switch(_[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=_=>x=>{const M=r(x);return M?this.num(_.get(M),x.length):x},p=Or.parseFormat(i),y=p.reduce((_,{literal:x,val:M})=>x?_:_.concat(M),[]),m=e.shiftTo(...y.map(r).filter(_=>_));return u8(p,a(m))}}class Un{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const rO=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function $d(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function Td(...t){return e=>t.reduce(([i,r,a],p)=>{const[y,m,_]=p(e,a);return[{...i,...y},m||r,_]},[{},null,1]).slice(0,2)}function Id(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const a=i.exec(t);if(a)return r(a)}return[null,null]}function sO(...t){return(e,i)=>{const r={};let a;for(a=0;a<t.length;a++)r[t[a]]=Jl(e[i+a]);return[r,null,i+a]}}const nO=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,JW=`(?:${nO.source}?(?:\\[(${rO.source})\\])?)?`,t6=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,oO=RegExp(`${t6.source}${JW}`),i6=RegExp(`(?:T${oO.source})?`),KW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,YW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,ZW=/(\d{4})-?(\d{3})/,XW=sO("weekYear","weekNumber","weekDay"),QW=sO("year","ordinal"),eJ=/(\d{4})-(\d\d)-(\d\d)/,aO=RegExp(`${t6.source} ?(?:${nO.source}|(${rO.source}))?`),tJ=RegExp(`(?: ${aO.source})?`);function Wp(t,e,i){const r=t[e];return Tt(r)?i:Jl(r)}function iJ(t,e){return[{year:Wp(t,e),month:Wp(t,e+1,1),day:Wp(t,e+2,1)},null,e+3]}function Md(t,e){return[{hours:Wp(t,e,0),minutes:Wp(t,e+1,0),seconds:Wp(t,e+2,0),milliseconds:XS(t[e+3])},null,e+4]}function A1(t,e){const i=!t[e]&&!t[e+1],r=P2(t[e+1],t[e+2]),a=i?null:Cr.instance(r);return[{},a,e+3]}function k1(t,e){const i=t[e]?Ha.create(t[e]):null;return[{},i,e+1]}const rJ=RegExp(`^T?${t6.source}$`),sJ=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function nJ(t){const[e,i,r,a,p,y,m,_,x]=t,M=e[0]==="-",A=_&&_[0]==="-",C=(N,j=!1)=>N!==void 0&&(j||N&&M)?-N:N;return[{years:C(Uu(i)),months:C(Uu(r)),weeks:C(Uu(a)),days:C(Uu(p)),hours:C(Uu(y)),minutes:C(Uu(m)),seconds:C(Uu(_),_==="-0"),milliseconds:C(XS(x),A)}]}const oJ={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function r6(t,e,i,r,a,p,y){const m={year:e.length===2?h_(Jl(e)):Jl(e),month:Yk.indexOf(i)+1,day:Jl(r),hour:Jl(a),minute:Jl(p)};return y&&(m.second=Jl(y)),t&&(m.weekday=t.length>3?Xk.indexOf(t)+1:Qk.indexOf(t)+1),m}const aJ=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function lJ(t){const[,e,i,r,a,p,y,m,_,x,M,A]=t,C=r6(e,a,r,i,p,y,m);let N;return _?N=oJ[_]:x?N=0:N=P2(M,A),[C,new Cr(N)]}function uJ(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const hJ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,cJ=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,pJ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function h8(t){const[,e,i,r,a,p,y,m]=t;return[r6(e,a,r,i,p,y,m),Cr.utcInstance]}function dJ(t){const[,e,i,r,a,p,y,m]=t;return[r6(e,m,i,r,a,p,y),Cr.utcInstance]}const fJ=$d(KW,i6),yJ=$d(YW,i6),mJ=$d(ZW,i6),gJ=$d(oO),lO=Td(iJ,Md,A1,k1),vJ=Td(XW,Md,A1,k1),bJ=Td(QW,Md,A1,k1),wJ=Td(Md,A1,k1);function _J(t){return Id(t,[fJ,lO],[yJ,vJ],[mJ,bJ],[gJ,wJ])}function SJ(t){return Id(uJ(t),[aJ,lJ])}function xJ(t){return Id(t,[hJ,h8],[cJ,h8],[pJ,dJ])}function $J(t){return Id(t,[sJ,nJ])}const TJ=Td(Md);function IJ(t){return Id(t,[rJ,TJ])}const MJ=$d(eJ,tJ),EJ=$d(aO),AJ=Td(Md,A1,k1);function kJ(t){return Id(t,[MJ,lO],[EJ,AJ])}const OJ="Invalid Duration",uO={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},CJ={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...uO},ks=146097/400,Dc=146097/4800,PJ={years:{quarters:4,months:12,weeks:ks/7,days:ks,hours:ks*24,minutes:ks*24*60,seconds:ks*24*60*60,milliseconds:ks*24*60*60*1e3},quarters:{months:3,weeks:ks/28,days:ks/4,hours:ks*24/4,minutes:ks*24*60/4,seconds:ks*24*60*60/4,milliseconds:ks*24*60*60*1e3/4},months:{weeks:Dc/7,days:Dc,hours:Dc*24,minutes:Dc*24*60,seconds:Dc*24*60*60,milliseconds:Dc*24*60*60*1e3},...uO},oh=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],NJ=oh.slice(0).reverse();function ll(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Ct(r)}function RJ(t){return t<0?Math.floor(t):Math.ceil(t)}function hO(t,e,i,r,a){const p=t[a][i],y=e[i]/p,m=Math.sign(y)===Math.sign(r[a]),_=!m&&r[a]!==0&&Math.abs(y)<=1?RJ(y):Math.trunc(y);r[a]+=_,e[i]-=_*p}function LJ(t,e){NJ.reduce((i,r)=>Tt(e[r])?i:(i&&hO(t,e,i,e,r),r),null)}function jJ(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Ct{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?PJ:CJ;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||ui.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Ct.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Ys(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ct({values:gv(e,Ct.normalizeUnit),loc:ui.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(rc(e))return Ct.fromMillis(e);if(Ct.isDuration(e))return e;if(typeof e=="object")return Ct.fromObject(e);throw new Ys(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=$J(e);return r?Ct.fromObject(r,i):Ct.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=IJ(e);return r?Ct.fromObject(r,i):Ct.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Ys("need to specify a reason the Duration is invalid");const r=e instanceof Un?e:new Un(e,i);if(zi.throwOnInvalid)throw new cW(r);return new Ct({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new Mk(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Or.create(this.loc,r).formatDurationFromString(this,e):OJ}toHuman(e={}){const i=oh.map(r=>{const a=this.values[r];return Tt(a)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(a)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=QS(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let a=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(a+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||r.milliseconds!==0)&&(a+=".SSS"));let p=r.toFormat(a);return e.includePrefix&&(p="T"+p),p}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Ct.fromDurationLike(e),r={};for(const a of oh)(pd(i.values,a)||pd(this.values,a))&&(r[a]=i.get(a)+this.get(a));return ll(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Ct.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Kk(e(this.values[r],r));return ll(this,{values:i},!0)}get(e){return this[Ct.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...gv(e,Ct.normalizeUnit)};return ll(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:a}={}){const y={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:a,conversionAccuracy:r};return ll(this,y)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return LJ(this.matrix,e),ll(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=jJ(this.normalize().shiftToAll().toObject());return ll(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(y=>Ct.normalizeUnit(y));const i={},r={},a=this.toObject();let p;for(const y of oh)if(e.indexOf(y)>=0){p=y;let m=0;for(const x in r)m+=this.matrix[x][y]*r[x],r[x]=0;rc(a[y])&&(m+=a[y]);const _=Math.trunc(m);i[y]=_,r[y]=(m*1e3-_*1e3)/1e3;for(const x in a)oh.indexOf(x)>oh.indexOf(y)&&hO(this.matrix,a,x,i,y)}else rc(a[y])&&(r[y]=a[y]);for(const y in r)r[y]!==0&&(i[p]+=y===p?r[y]:r[y]/this.matrix[p][y]);return ll(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return ll(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,a){return r===void 0||r===0?a===void 0||a===0:r===a}for(const r of oh)if(!i(this.values[r],e.values[r]))return!1;return!0}}const Fc="Invalid Interval";function DJ(t,e){return!t||!t.isValid?Ei.invalid("missing or invalid start"):!e||!e.isValid?Ei.invalid("missing or invalid end"):e<t?Ei.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ei{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Ys("need to specify a reason the Interval is invalid");const r=e instanceof Un?e:new Un(e,i);if(zi.throwOnInvalid)throw new hW(r);return new Ei({invalid:r})}static fromDateTimes(e,i){const r=Wd(e),a=Wd(i),p=DJ(r,a);return p??new Ei({start:r,end:a})}static after(e,i){const r=Ct.fromDurationLike(i),a=Wd(e);return Ei.fromDateTimes(a,a.plus(r))}static before(e,i){const r=Ct.fromDurationLike(i),a=Wd(e);return Ei.fromDateTimes(a.minus(r),a)}static fromISO(e,i){const[r,a]=(e||"").split("/",2);if(r&&a){let p,y;try{p=lt.fromISO(r,i),y=p.isValid}catch{y=!1}let m,_;try{m=lt.fromISO(a,i),_=m.isValid}catch{_=!1}if(y&&_)return Ei.fromDateTimes(p,m);if(y){const x=Ct.fromISO(a,i);if(x.isValid)return Ei.after(p,x)}else if(_){const x=Ct.fromISO(r,i);if(x.isValid)return Ei.before(m,x)}}return Ei.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Ei.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(Wd).filter(y=>this.contains(y)).sort(),r=[];let{s:a}=this,p=0;for(;a<this.e;){const y=i[p]||this.e,m=+y>+this.e?this.e:y;r.push(Ei.fromDateTimes(a,m)),a=m,p+=1}return r}splitBy(e){const i=Ct.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,a=1,p;const y=[];for(;r<this.e;){const m=this.start.plus(i.mapUnits(_=>_*a));p=+m>+this.e?this.e:m,y.push(Ei.fromDateTimes(r,p)),r=p,a+=1}return y}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:Ei.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Ei.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((a,p)=>a.s-p.s).reduce(([a,p],y)=>p?p.overlaps(y)||p.abutsStart(y)?[a,p.union(y)]:[a.concat([p]),y]:[a,y],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const a=[],p=e.map(_=>[{time:_.s,type:"s"},{time:_.e,type:"e"}]),y=Array.prototype.concat(...p),m=y.sort((_,x)=>_.time-x.time);for(const _ of m)r+=_.type==="s"?1:-1,r===1?i=_.time:(i&&+i!=+_.time&&a.push(Ei.fromDateTimes(i,_.time)),i=null);return Ei.merge(a)}difference(...e){return Ei.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Fc}toLocaleString(e=fv,i={}){return this.isValid?Or.create(this.s.loc.clone(i),e).formatInterval(this):Fc}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Fc}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Fc}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Fc}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:Fc}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Ct.invalid(this.invalidReason)}mapEndpoints(e){return Ei.fromDateTimes(e(this.s),e(this.e))}}class xy{static hasDST(e=zi.defaultZone){const i=lt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Ha.isValidZone(e)}static normalizeZone(e){return iu(e,zi.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:a=null,outputCalendar:p="gregory"}={}){return(a||ui.create(i,r,p)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:a=null,outputCalendar:p="gregory"}={}){return(a||ui.create(i,r,p)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:a=null}={}){return(a||ui.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:a=null}={}){return(a||ui.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ui.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return ui.create(i,null,"gregory").eras(e)}static features(){return{relative:Wk()}}}function c8(t,e){const i=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Ct.fromMillis(r).as("days"))}function FJ(t,e,i){const r=[["years",(_,x)=>x.year-_.year],["quarters",(_,x)=>x.quarter-_.quarter+(x.year-_.year)*4],["months",(_,x)=>x.month-_.month+(x.year-_.year)*12],["weeks",(_,x)=>{const M=c8(_,x);return(M-M%7)/7}],["days",c8]],a={},p=t;let y,m;for(const[_,x]of r)i.indexOf(_)>=0&&(y=_,a[_]=x(t,e),m=p.plus(a),m>e?(a[_]--,t=p.plus(a)):t=m);return[t,a,m,y]}function zJ(t,e,i,r){let[a,p,y,m]=FJ(t,e,i);const _=e-a,x=i.filter(A=>["hours","minutes","seconds","milliseconds"].indexOf(A)>=0);x.length===0&&(y<e&&(y=a.plus({[m]:1})),y!==a&&(p[m]=(p[m]||0)+_/(y-a)));const M=Ct.fromObject(p,r);return x.length>0?Ct.fromMillis(_,r).shiftTo(...x).plus(M):M}const s6={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},p8={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},VJ=s6.hanidec.replace(/[\[|\]]/g,"").split("");function GJ(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(s6.hanidec)!==-1)e+=VJ.indexOf(t[i]);else for(const a in p8){const[p,y]=p8[a];r>=p&&r<=y&&(e+=r-p)}}return parseInt(e,10)}else return e}function fn({numberingSystem:t},e=""){return new RegExp(`${s6[t||"latn"]}${e}`)}const qJ="missing Intl.DateTimeFormat.formatToParts support";function Dt(t,e=i=>i){return{regex:t,deser:([i])=>e(GJ(i))}}const UJ=String.fromCharCode(160),cO=`[ ${UJ}]`,pO=new RegExp(cO,"g");function BJ(t){return t.replace(/\./g,"\\.?").replace(pO,cO)}function d8(t){return t.replace(/\./g,"").replace(pO," ").toLowerCase()}function yn(t,e){return t===null?null:{regex:RegExp(t.map(BJ).join("|")),deser:([i])=>t.findIndex(r=>d8(i)===d8(r))+e}}function f8(t,e){return{regex:t,deser:([,i,r])=>P2(i,r),groups:e}}function $y(t){return{regex:t,deser:([e])=>e}}function HJ(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function WJ(t,e){const i=fn(e),r=fn(e,"{2}"),a=fn(e,"{3}"),p=fn(e,"{4}"),y=fn(e,"{6}"),m=fn(e,"{1,2}"),_=fn(e,"{1,3}"),x=fn(e,"{1,6}"),M=fn(e,"{1,9}"),A=fn(e,"{2,4}"),C=fn(e,"{4,6}"),N=z=>({regex:RegExp(HJ(z.val)),deser:([W])=>W,literal:!0}),D=(z=>{if(t.literal)return N(z);switch(z.val){case"G":return yn(e.eras("short",!1),0);case"GG":return yn(e.eras("long",!1),0);case"y":return Dt(x);case"yy":return Dt(A,h_);case"yyyy":return Dt(p);case"yyyyy":return Dt(C);case"yyyyyy":return Dt(y);case"M":return Dt(m);case"MM":return Dt(r);case"MMM":return yn(e.months("short",!0,!1),1);case"MMMM":return yn(e.months("long",!0,!1),1);case"L":return Dt(m);case"LL":return Dt(r);case"LLL":return yn(e.months("short",!1,!1),1);case"LLLL":return yn(e.months("long",!1,!1),1);case"d":return Dt(m);case"dd":return Dt(r);case"o":return Dt(_);case"ooo":return Dt(a);case"HH":return Dt(r);case"H":return Dt(m);case"hh":return Dt(r);case"h":return Dt(m);case"mm":return Dt(r);case"m":return Dt(m);case"q":return Dt(m);case"qq":return Dt(r);case"s":return Dt(m);case"ss":return Dt(r);case"S":return Dt(_);case"SSS":return Dt(a);case"u":return $y(M);case"uu":return $y(m);case"uuu":return Dt(i);case"a":return yn(e.meridiems(),0);case"kkkk":return Dt(p);case"kk":return Dt(A,h_);case"W":return Dt(m);case"WW":return Dt(r);case"E":case"c":return Dt(i);case"EEE":return yn(e.weekdays("short",!1,!1),1);case"EEEE":return yn(e.weekdays("long",!1,!1),1);case"ccc":return yn(e.weekdays("short",!0,!1),1);case"cccc":return yn(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return f8(new RegExp(`([+-]${m.source})(?::(${r.source}))?`),2);case"ZZZ":return f8(new RegExp(`([+-]${m.source})(${r.source})?`),2);case"z":return $y(/[a-z_+-/]{1,256}?/i);case" ":return $y(/[^\S\n\r]/);default:return N(z)}})(t)||{invalidReason:qJ};return D.token=t,D}const JJ={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function KJ(t,e){const{type:i,value:r}=t;if(i==="literal"){const y=/^\s+$/.test(r);return{literal:!y,val:y?" ":r}}const a=e[i];let p=JJ[i];if(typeof p=="object"&&(p=p[a]),p)return{literal:!1,val:p}}function YJ(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function ZJ(t,e,i){const r=t.match(e);if(r){const a={};let p=1;for(const y in i)if(pd(i,y)){const m=i[y],_=m.groups?m.groups+1:1;!m.literal&&m.token&&(a[m.token.val[0]]=m.deser(r.slice(p,p+_))),p+=_}return[r,a]}else return[r,{}]}function XJ(t){const e=p=>{switch(p){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Tt(t.z)||(i=Ha.create(t.z)),Tt(t.Z)||(i||(i=new Cr(t.Z)),r=t.Z),Tt(t.q)||(t.M=(t.q-1)*3+1),Tt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Tt(t.u)||(t.S=XS(t.u)),[Object.keys(t).reduce((p,y)=>{const m=e(y);return m&&(p[m]=t[y]),p},{}),i,r]}let Kb=null;function QJ(){return Kb||(Kb=lt.fromMillis(1555555555555)),Kb}function eK(t,e){if(t.literal)return t;const i=Or.macroTokenToFormatOpts(t.val),r=yO(i,e);return r==null||r.includes(void 0)?t:r}function dO(t,e){return Array.prototype.concat(...t.map(i=>eK(i,e)))}function fO(t,e,i){const r=dO(Or.parseFormat(i),t),a=r.map(y=>WJ(y,t)),p=a.find(y=>y.invalidReason);if(p)return{input:e,tokens:r,invalidReason:p.invalidReason};{const[y,m]=YJ(a),_=RegExp(y,"i"),[x,M]=ZJ(e,_,m),[A,C,N]=M?XJ(M):[null,null,void 0];if(pd(M,"a")&&pd(M,"H"))throw new g0("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:_,rawMatches:x,matches:M,result:A,zone:C,specificOffset:N}}}function tK(t,e,i){const{result:r,zone:a,specificOffset:p,invalidReason:y}=fO(t,e,i);return[r,a,p,y]}function yO(t,e){return t?Or.create(e,t).formatDateTimeParts(QJ()).map(a=>KJ(a,t)):null}const mO=[0,31,59,90,120,151,181,212,243,273,304,334],gO=[0,31,60,91,121,152,182,213,244,274,305,335];function Zs(t,e){return new Un("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function vO(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const a=r.getUTCDay();return a===0?7:a}function bO(t,e,i){return i+(E1(t)?gO:mO)[e-1]}function wO(t,e){const i=E1(t)?gO:mO,r=i.findIndex(p=>p<e),a=e-i[r];return{month:r+1,day:a}}function c_(t){const{year:e,month:i,day:r}=t,a=bO(e,i,r),p=vO(e,i,r);let y=Math.floor((a-p+10)/7),m;return y<1?(m=e-1,y=mv(m)):y>mv(e)?(m=e+1,y=1):m=e,{weekYear:m,weekNumber:y,weekday:p,...N2(t)}}function y8(t){const{weekYear:e,weekNumber:i,weekday:r}=t,a=vO(e,1,4),p=Sf(e);let y=i*7+r-a-3,m;y<1?(m=e-1,y+=Sf(m)):y>p?(m=e+1,y-=Sf(e)):m=e;const{month:_,day:x}=wO(m,y);return{year:m,month:_,day:x,...N2(t)}}function Yb(t){const{year:e,month:i,day:r}=t,a=bO(e,i,r);return{year:e,ordinal:a,...N2(t)}}function m8(t){const{year:e,ordinal:i}=t,{month:r,day:a}=wO(e,i);return{year:e,month:r,day:a,...N2(t)}}function iK(t){const e=C2(t.weekYear),i=ja(t.weekNumber,1,mv(t.weekYear)),r=ja(t.weekday,1,7);return e?i?r?!1:Zs("weekday",t.weekday):Zs("week",t.week):Zs("weekYear",t.weekYear)}function rK(t){const e=C2(t.year),i=ja(t.ordinal,1,Sf(t.year));return e?i?!1:Zs("ordinal",t.ordinal):Zs("year",t.year)}function _O(t){const e=C2(t.year),i=ja(t.month,1,12),r=ja(t.day,1,yv(t.year,t.month));return e?i?r?!1:Zs("day",t.day):Zs("month",t.month):Zs("year",t.year)}function SO(t){const{hour:e,minute:i,second:r,millisecond:a}=t,p=ja(e,0,23)||e===24&&i===0&&r===0&&a===0,y=ja(i,0,59),m=ja(r,0,59),_=ja(a,0,999);return p?y?m?_?!1:Zs("millisecond",a):Zs("second",r):Zs("minute",i):Zs("hour",e)}const Zb="Invalid DateTime",g8=864e13;function Ty(t){return new Un("unsupported zone",`the zone "${t.name}" is not supported`)}function Xb(t){return t.weekData===null&&(t.weekData=c_(t.c)),t.weekData}function Bd(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new lt({...i,...e,old:i})}function xO(t,e,i){let r=t-e*60*1e3;const a=i.offset(r);if(e===a)return[r,e];r-=(a-e)*60*1e3;const p=i.offset(r);return a===p?[r,a]:[t-Math.min(a,p)*60*1e3,Math.max(a,p)]}function v8(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Om(t,e,i){return xO(e6(t),e,i)}function b8(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),a=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,p={...t.c,year:r,month:a,day:Math.min(t.c.day,yv(r,a))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},y=Ct.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),m=e6(p);let[_,x]=xO(m,i,t.zone);return y!==0&&(_+=y,x=t.zone.offset(_)),{ts:_,o:x}}function Hd(t,e,i,r,a,p){const{setZone:y,zone:m}=i;if(t&&Object.keys(t).length!==0||e){const _=e||m,x=lt.fromObject(t,{...i,zone:_,specificOffset:p});return y?x:x.setZone(m)}else return lt.invalid(new Un("unparsable",`the input "${a}" can't be parsed as ${r}`))}function Iy(t,e,i=!0){return t.isValid?Or.create(ui.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Qb(t,e){const i=t.c.year>9999||t.c.year<0;let r="";return i&&t.c.year>=0&&(r+="+"),r+=Vi(t.c.year,i?6:4),e?(r+="-",r+=Vi(t.c.month),r+="-",r+=Vi(t.c.day)):(r+=Vi(t.c.month),r+=Vi(t.c.day)),r}function w8(t,e,i,r,a,p){let y=Vi(t.c.hour);return e?(y+=":",y+=Vi(t.c.minute),(t.c.second!==0||!i)&&(y+=":")):y+=Vi(t.c.minute),(t.c.second!==0||!i)&&(y+=Vi(t.c.second),(t.c.millisecond!==0||!r)&&(y+=".",y+=Vi(t.c.millisecond,3))),a&&(t.isOffsetFixed&&t.offset===0&&!p?y+="Z":t.o<0?(y+="-",y+=Vi(Math.trunc(-t.o/60)),y+=":",y+=Vi(Math.trunc(-t.o%60))):(y+="+",y+=Vi(Math.trunc(t.o/60)),y+=":",y+=Vi(Math.trunc(t.o%60)))),p&&(y+="["+t.zone.ianaName+"]"),y}const $O={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},sK={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},nK={ordinal:1,hour:0,minute:0,second:0,millisecond:0},TO=["year","month","day","hour","minute","second","millisecond"],oK=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],aK=["year","ordinal","hour","minute","second","millisecond"];function _8(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Mk(t);return e}function S8(t,e){const i=iu(e.zone,zi.defaultZone),r=ui.fromObject(e),a=zi.now();let p,y;if(Tt(t.year))p=a;else{for(const x of TO)Tt(t[x])&&(t[x]=$O[x]);const m=_O(t)||SO(t);if(m)return lt.invalid(m);const _=i.offset(a);[p,y]=Om(t,_,i)}return new lt({ts:p,zone:i,loc:r,o:y})}function x8(t,e,i){const r=Tt(i.round)?!0:i.round,a=(y,m)=>(y=QS(y,r||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(y,m)),p=y=>i.calendary?e.hasSame(t,y)?0:e.startOf(y).diff(t.startOf(y),y).get(y):e.diff(t,y).get(y);if(i.unit)return a(p(i.unit),i.unit);for(const y of i.units){const m=p(y);if(Math.abs(m)>=1)return a(m,y)}return a(t>e?-0:0,i.units[i.units.length-1])}function $8(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class lt{constructor(e){const i=e.zone||zi.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Un("invalid input"):null)||(i.isValid?null:Ty(i));this.ts=Tt(e.ts)?zi.now():e.ts;let a=null,p=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[a,p]=[e.old.c,e.old.o];else{const m=i.offset(this.ts);a=v8(this.ts,m),r=Number.isNaN(a.year)?new Un("invalid input"):null,a=r?null:a,p=r?null:m}this._zone=i,this.loc=e.loc||ui.create(),this.invalid=r,this.weekData=null,this.c=a,this.o=p,this.isLuxonDateTime=!0}static now(){return new lt({})}static local(){const[e,i]=$8(arguments),[r,a,p,y,m,_,x]=i;return S8({year:r,month:a,day:p,hour:y,minute:m,second:_,millisecond:x},e)}static utc(){const[e,i]=$8(arguments),[r,a,p,y,m,_,x]=i;return e.zone=Cr.utcInstance,S8({year:r,month:a,day:p,hour:y,minute:m,second:_,millisecond:x},e)}static fromJSDate(e,i={}){const r=CW(e)?e.valueOf():NaN;if(Number.isNaN(r))return lt.invalid("invalid input");const a=iu(i.zone,zi.defaultZone);return a.isValid?new lt({ts:r,zone:a,loc:ui.fromObject(i)}):lt.invalid(Ty(a))}static fromMillis(e,i={}){if(rc(e))return e<-g8||e>g8?lt.invalid("Timestamp out of range"):new lt({ts:e,zone:iu(i.zone,zi.defaultZone),loc:ui.fromObject(i)});throw new Ys(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(rc(e))return new lt({ts:e*1e3,zone:iu(i.zone,zi.defaultZone),loc:ui.fromObject(i)});throw new Ys("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=iu(i.zone,zi.defaultZone);if(!r.isValid)return lt.invalid(Ty(r));const a=zi.now(),p=Tt(i.specificOffset)?r.offset(a):i.specificOffset,y=gv(e,_8),m=!Tt(y.ordinal),_=!Tt(y.year),x=!Tt(y.month)||!Tt(y.day),M=_||x,A=y.weekYear||y.weekNumber,C=ui.fromObject(i);if((M||m)&&A)throw new g0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&m)throw new g0("Can't mix ordinal dates with month/day");const N=A||y.weekday&&!M;let j,D,z=v8(a,p);N?(j=oK,D=sK,z=c_(z)):m?(j=aK,D=nK,z=Yb(z)):(j=TO,D=$O);let W=!1;for(const ye of j){const Se=y[ye];Tt(Se)?W?y[ye]=D[ye]:y[ye]=z[ye]:W=!0}const Y=N?iK(y):m?rK(y):_O(y),K=Y||SO(y);if(K)return lt.invalid(K);const ee=N?y8(y):m?m8(y):y,[ne,oe]=Om(ee,p,r),ue=new lt({ts:ne,zone:r,o:oe,loc:C});return y.weekday&&M&&e.weekday!==ue.weekday?lt.invalid("mismatched weekday",`you can't specify both a weekday of ${y.weekday} and a date of ${ue.toISO()}`):ue}static fromISO(e,i={}){const[r,a]=_J(e);return Hd(r,a,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,a]=SJ(e);return Hd(r,a,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,a]=xJ(e);return Hd(r,a,i,"HTTP",i)}static fromFormat(e,i,r={}){if(Tt(e)||Tt(i))throw new Ys("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:p=null}=r,y=ui.fromOpts({locale:a,numberingSystem:p,defaultToEN:!0}),[m,_,x,M]=tK(y,e,i);return M?lt.invalid(M):Hd(m,_,r,`format ${i}`,e,x)}static fromString(e,i,r={}){return lt.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,a]=kJ(e);return Hd(r,a,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Ys("need to specify a reason the DateTime is invalid");const r=e instanceof Un?e:new Un(e,i);if(zi.throwOnInvalid)throw new uW(r);return new lt({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=yO(e,ui.fromObject(i));return r?r.map(a=>a?a.val:null).join(""):null}static expandFormat(e,i={}){return dO(Or.parseFormat(e),ui.fromObject(i)).map(a=>a.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Xb(this).weekYear:NaN}get weekNumber(){return this.isValid?Xb(this).weekNumber:NaN}get weekday(){return this.isValid?Xb(this).weekday:NaN}get ordinal(){return this.isValid?Yb(this.c).ordinal:NaN}get monthShort(){return this.isValid?xy.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?xy.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?xy.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?xy.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return E1(this.year)}get daysInMonth(){return yv(this.year,this.month)}get daysInYear(){return this.isValid?Sf(this.year):NaN}get weeksInWeekYear(){return this.isValid?mv(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:a}=Or.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:a}}toUTC(e=0,i={}){return this.setZone(Cr.instance(e),i)}toLocal(){return this.setZone(zi.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=iu(e,zi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let a=this.ts;if(i||r){const p=e.offset(this.ts),y=this.toObject();[a]=Om(y,p,e)}return Bd(this,{ts:a,zone:e})}else return lt.invalid(Ty(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const a=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Bd(this,{loc:a})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=gv(e,_8),r=!Tt(i.weekYear)||!Tt(i.weekNumber)||!Tt(i.weekday),a=!Tt(i.ordinal),p=!Tt(i.year),y=!Tt(i.month)||!Tt(i.day),m=p||y,_=i.weekYear||i.weekNumber;if((m||a)&&_)throw new g0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&a)throw new g0("Can't mix ordinal dates with month/day");let x;r?x=y8({...c_(this.c),...i}):Tt(i.ordinal)?(x={...this.toObject(),...i},Tt(i.day)&&(x.day=Math.min(yv(x.year,x.month),x.day))):x=m8({...Yb(this.c),...i});const[M,A]=Om(x,this.o,this.zone);return Bd(this,{ts:M,o:A})}plus(e){if(!this.isValid)return this;const i=Ct.fromDurationLike(e);return Bd(this,b8(this,i))}minus(e){if(!this.isValid)return this;const i=Ct.fromDurationLike(e).negate();return Bd(this,b8(this,i))}startOf(e){if(!this.isValid)return this;const i={},r=Ct.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const a=Math.ceil(this.month/3);i.month=(a-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?Or.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):Zb}toLocaleString(e=fv,i={}){return this.isValid?Or.create(this.loc.clone(i),e).formatDateTime(this):Zb}toLocaleParts(e={}){return this.isValid?Or.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:a=!0,extendedZone:p=!1}={}){if(!this.isValid)return null;const y=e==="extended";let m=Qb(this,y);return m+="T",m+=w8(this,y,i,r,a,p),m}toISODate({format:e="extended"}={}){return this.isValid?Qb(this,e==="extended"):null}toISOWeekDate(){return Iy(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:a=!1,extendedZone:p=!1,format:y="extended"}={}){return this.isValid?(a?"T":"")+w8(this,y==="extended",i,e,r,p):null}toRFC2822(){return Iy(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Iy(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Qb(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let a="HH:mm:ss.SSS";return(i||e)&&(r&&(a+=" "),i?a+="z":e&&(a+="ZZ")),Iy(this,a,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Zb}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Ct.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...r},p=PW(i).map(Ct.normalizeUnit),y=e.valueOf()>this.valueOf(),m=y?this:e,_=y?e:this,x=zJ(m,_,p,a);return y?x.negate():x}diffNow(e="milliseconds",i={}){return this.diff(lt.now(),e,i)}until(e){return this.isValid?Ei.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const r=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(i)<=r&&r<=a.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||lt.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let a=["years","months","days","hours","minutes","seconds"],p=e.unit;return Array.isArray(e.unit)&&(a=e.unit,p=void 0),x8(i,this.plus(r),{...e,numeric:"always",units:a,unit:p})}toRelativeCalendar(e={}){return this.isValid?x8(e.base||lt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(lt.isDateTime))throw new Ys("min requires all arguments be DateTimes");return l8(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(lt.isDateTime))throw new Ys("max requires all arguments be DateTimes");return l8(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:a=null,numberingSystem:p=null}=r,y=ui.fromOpts({locale:a,numberingSystem:p,defaultToEN:!0});return fO(y,e,i)}static fromStringExplain(e,i,r={}){return lt.fromFormatExplain(e,i,r)}static get DATE_SHORT(){return fv}static get DATE_MED(){return Ek}static get DATE_MED_WITH_WEEKDAY(){return pW}static get DATE_FULL(){return Ak}static get DATE_HUGE(){return kk}static get TIME_SIMPLE(){return Ok}static get TIME_WITH_SECONDS(){return Ck}static get TIME_WITH_SHORT_OFFSET(){return Pk}static get TIME_WITH_LONG_OFFSET(){return Nk}static get TIME_24_SIMPLE(){return Rk}static get TIME_24_WITH_SECONDS(){return Lk}static get TIME_24_WITH_SHORT_OFFSET(){return jk}static get TIME_24_WITH_LONG_OFFSET(){return Dk}static get DATETIME_SHORT(){return Fk}static get DATETIME_SHORT_WITH_SECONDS(){return zk}static get DATETIME_MED(){return Vk}static get DATETIME_MED_WITH_SECONDS(){return Gk}static get DATETIME_MED_WITH_WEEKDAY(){return dW}static get DATETIME_FULL(){return qk}static get DATETIME_FULL_WITH_SECONDS(){return Uk}static get DATETIME_HUGE(){return Bk}static get DATETIME_HUGE_WITH_SECONDS(){return Hk}}function Wd(t){if(lt.isDateTime(t))return t;if(t&&t.valueOf&&rc(t.valueOf()))return lt.fromJSDate(t);if(t&&typeof t=="object")return lt.fromObject(t);throw new Ys(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const lK={year:void 0,month:void 0,day:void 0,weekday:void 0},uK={hour:void 0,minute:void 0,second:void 0},hK={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},n6={timeZone:"Etc/UTC"},lo={year:"numeric",month:"numeric",day:"numeric"},Jd={year:"numeric",month:"long",day:"numeric"},Kd={year:"numeric",month:"short",day:"numeric"},Yd={year:"numeric",month:"long",weekday:"long",day:"numeric"},js={hour:"numeric",minute:"numeric"},mn={...js,second:"numeric"},Ed={"short-date":lo,"short-date-short-time":{...lo,...js},"short-date-short-time-24":{...lo,...js,hour12:!1},"short-date-long-time":{...lo,...mn},"short-date-long-time-24":{...lo,...mn,hour12:!1},"short-date-le":lo,"short-date-le-short-time":{...lo,...js},"short-date-le-short-time-24":{...lo,...js,hour12:!1},"short-date-le-long-time":{...lo,...mn},"short-date-le-long-time-24":{...lo,...mn,hour12:!1},"long-month-day-year":Jd,"long-month-day-year-short-time":{...Jd,...js},"long-month-day-year-short-time-24":{...Jd,...js,hour12:!1},"long-month-day-year-long-time":{...Jd,...mn},"long-month-day-year-long-time-24":{...Jd,...mn,hour12:!1},"day-short-month-year":Kd,"day-short-month-year-short-time":{...Kd,...js},"day-short-month-year-short-time-24":{...Kd,...js,hour12:!1},"day-short-month-year-long-time":{...Kd,...mn},"day-short-month-year-long-time-24":{...Kd,...mn,hour12:!1},"long-date":Yd,"long-date-short-time":{...Yd,...js},"long-date-short-time-24":{...Yd,...js,hour12:!1},"long-date-long-time":{...Yd,...mn},"long-date-long-time-24":{...Yd,...mn,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":js,"long-time":mn},cK=Rr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),IO={ar:"ar-u-nu-latn-ca-gregory"};let p_=new WeakMap,MO=Ed["short-date-short-time"];function pK(t){const e=t||MO;let i=p_.get(e);if(!i){const r=Kn(),a=IO[r]||r;i=new Intl.DateTimeFormat(a,e),p_.set(e,i)}return i}function My(t){return Ed[t]}function $u(t,e){return pK(e).format(t)}function dK(t,e=Ed["short-date"]){return $u(new Date(t),{...e,...n6,...uK})}function fK(t,e=Ed["short-time"]){return $u(new Date(`1970-01-01T${t}Z`),{...e,...n6,...lK})}function yK(t,e=Ed["short-date-short-time"]){const i=lt.fromISO(t,{setZone:!0}),r=Kn(),a=IO[r]??r;return i.toLocaleString({...hK,...e},{locale:a})}kS(()=>{p_=new WeakMap,MO=Ed["short-date-short-time"]});const mK={ar:"ar-u-nu-latn"};let Cm=new WeakMap,EO={};function gK(t){const e=t||EO;if(!Cm.has(e)){const i=Kn(),r=mK[Kn()]||i;Cm.set(e,new Intl.NumberFormat(r,t))}return Cm.get(e)}function vK(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function t1(t,e){return Object.is(t,-0)&&(t=0),gK(e).format(t)}kS(()=>{Cm=new WeakMap,EO={}});let Xc=class extends Xt(de){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}formatNumber(e){return t1(e,vK(this))}formatDate(e,i=!1){return this.dateFormat?$u(e,{...My(this.dateFormat),...i&&n6}):this.formatNumber(e)}formatDateOnly(e){const i=(this.dateFormat&&My(this.dateFormat))??void 0;return dK(e,i)}formatTimeOnly(e){const i=(this.dateFormat&&My(this.dateFormat))??void 0;return fK(e,i)}formatTimestamp(e){const i=(this.dateFormat&&My(this.dateFormat))??void 0;return yK(e,i)}formatRasterPixelValue(e){return e.includes("-")?e:e.trim().includes(",")?this._formatDelimitedString(e,",",", "):e.trim().includes(";")?this._formatDelimitedString(e,";","; "):e.trim().includes(" ")?this._formatDelimitedString(e," "," "):this.formatNumber(Number(e))}_formatDelimitedString(e,i,r){return e&&i&&r?e.trim().split(i).map(a=>this.formatNumber(Number(a))).join(r):e}};v([Fe(cK)],Xc.prototype,"dateFormat",void 0),v([S({type:Boolean,json:{write:!0}})],Xc.prototype,"digitSeparator",void 0),v([S({type:jt,json:{write:!0}})],Xc.prototype,"places",void 0),Xc=v([B("esri.popup.support.FieldInfoFormat")],Xc);const b0=Xc;var d_;let Sn=d_=class extends de{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new d_({fieldName:this.fieldName,format:this.format?se(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};v([S({type:String,json:{write:!0}})],Sn.prototype,"fieldName",void 0),v([S({type:b0,json:{write:!0}})],Sn.prototype,"format",void 0),v([S({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Sn.prototype,"isEditable",void 0),v([S({type:String,json:{write:!0}})],Sn.prototype,"label",void 0),v([Fe(new ft({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Sn.prototype,"stringFieldOption",void 0),v([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Sn.prototype,"statisticType",void 0),v([S({type:String,json:{write:!0}})],Sn.prototype,"tooltip",void 0),v([S({type:Boolean,json:{write:!0}})],Sn.prototype,"visible",void 0),Sn=d_=v([B("esri.popup.FieldInfo")],Sn);const o6=Sn;var f_;let pa=f_=class extends Ru{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new f_(se({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};v([S({type:Object,json:{write:!0}})],pa.prototype,"attributes",void 0),v([S({type:String,json:{write:!0}})],pa.prototype,"description",void 0),v([S({type:[o6]})],pa.prototype,"fieldInfos",void 0),v([$e("fieldInfos")],pa.prototype,"writeFieldInfos",null),v([S({type:String,json:{write:!0}})],pa.prototype,"title",void 0),v([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],pa.prototype,"type",void 0),pa=f_=v([B("esri.popup.content.FieldsContent")],pa);const i1=pa;let ah=class extends de{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};v([S({type:String,json:{write:!0}})],ah.prototype,"altText",void 0),v([S({type:String,json:{write:!0}})],ah.prototype,"caption",void 0),v([S({type:String,json:{write:!0}})],ah.prototype,"title",void 0),v([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ah.prototype,"type",void 0),ah=v([B("esri.popup.content.mixins.MediaInfo")],ah);const a6=ah;var y_;let Qc=y_=class extends je{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new y_({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};v([S()],Qc.prototype,"fieldName",void 0),v([S()],Qc.prototype,"tooltip",void 0),v([S()],Qc.prototype,"value",void 0),Qc=y_=v([B("esri.popup.content.support.ChartMediaInfoValueSeries")],Qc);const bK=Qc;var m_;let lh=m_=class extends de{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new m_({fields:se(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};v([S({type:[String],json:{write:!0}})],lh.prototype,"fields",void 0),v([S({type:String,json:{write:!0}})],lh.prototype,"normalizeField",void 0),v([S({type:[bK],json:{read:!1}})],lh.prototype,"series",void 0),v([S({type:String,json:{write:!0}})],lh.prototype,"tooltipField",void 0),lh=m_=v([B("esri.popup.content.support.ChartMediaInfoValue")],lh);const wK=lh;let w0=class extends a6{constructor(e){super(e),this.type=null,this.value=null}};v([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],w0.prototype,"type",void 0),v([S({type:wK,json:{write:!0}})],w0.prototype,"value",void 0),w0=v([B("esri.popup.content.mixins.ChartMediaInfo")],w0);const R2=w0,L2=Rr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var g_;let Pm=g_=class extends R2{constructor(t){super(t),this.type="bar-chart"}clone(){return new g_({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:L2.write}})],Pm.prototype,"type",void 0),Pm=g_=v([B("esri.popup.content.BarChartMediaInfo")],Pm);const AO=Pm;var v_;let Nm=v_=class extends R2{constructor(t){super(t),this.type="column-chart"}clone(){return new v_({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:L2.write}})],Nm.prototype,"type",void 0),Nm=v_=v([B("esri.popup.content.ColumnChartMediaInfo")],Nm);const kO=Nm;var b_;let _0=b_=class extends de{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new b_({linkURL:this.linkURL,sourceURL:this.sourceURL})}};v([S({type:String,json:{write:!0}})],_0.prototype,"linkURL",void 0),v([S({type:String,json:{write:!0}})],_0.prototype,"sourceURL",void 0),_0=b_=v([B("esri.popup.content.support.ImageMediaInfoValue")],_0);const _K=_0;var w_;let ep=w_=class extends a6{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new w_({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};v([S({type:Number,json:{write:!0}})],ep.prototype,"refreshInterval",void 0),v([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],ep.prototype,"type",void 0),v([S({type:_K,json:{write:!0}})],ep.prototype,"value",void 0),ep=w_=v([B("esri.popup.content.ImageMediaInfo")],ep);const OO=ep;var __;let Rm=__=class extends R2{constructor(t){super(t),this.type="line-chart"}clone(){return new __({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:L2.write}})],Rm.prototype,"type",void 0),Rm=__=v([B("esri.popup.content.LineChartMediaInfo")],Rm);const CO=Rm;var S_;let Lm=S_=class extends R2{constructor(t){super(t),this.type="pie-chart"}clone(){return new S_({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:L2.write}})],Lm.prototype,"type",void 0),Lm=S_=v([B("esri.popup.content.PieChartMediaInfo")],Lm);const PO=Lm,NO={base:a6,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":AO,"column-chart":kO,"line-chart":CO,"pie-chart":PO,image:OO}};var x_;let xn=x_=class extends Ru{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?OO.fromJSON(e):e.type==="barchart"?AO.fromJSON(e):e.type==="columnchart"?kO.fromJSON(e):e.type==="linechart"?CO.fromJSON(e):e.type==="piechart"?PO.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new x_(se({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};v([S()],xn.prototype,"activeMediaInfoIndex",void 0),v([S({type:Object,json:{write:!0}})],xn.prototype,"attributes",void 0),v([S({type:String,json:{write:!0}})],xn.prototype,"description",void 0),v([S({types:[NO]})],xn.prototype,"mediaInfos",void 0),v([ge("mediaInfos")],xn.prototype,"readMediaInfos",null),v([$e("mediaInfos")],xn.prototype,"writeMediaInfos",null),v([S({type:String,json:{write:!0}})],xn.prototype,"title",void 0),v([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],xn.prototype,"type",void 0),xn=x_=v([B("esri.popup.content.MediaContent")],xn);const vv=xn;var $_;let S0=$_=class extends de{constructor(t){super(t),this.field=null,this.order=null}clone(){return new $_({field:this.field,order:this.order})}};v([S({type:String,json:{write:!0}})],S0.prototype,"field",void 0),v([S({type:["asc","desc"],json:{write:!0}})],S0.prototype,"order",void 0),S0=$_=v([B("esri.popup.support.RelatedRecordsInfoFieldOrder")],S0);const l6=S0;let yo=class extends Xt(Ru){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};v([S({type:String,json:{write:!0}})],yo.prototype,"description",void 0),v([S({type:Number,json:{type:jt,write:!0}})],yo.prototype,"displayCount",void 0),v([S({type:["list"],json:{write:!0}})],yo.prototype,"displayType",void 0),v([S({type:[l6],json:{write:!0}})],yo.prototype,"orderByFields",void 0),v([S({type:Number,json:{type:jt,write:!0}})],yo.prototype,"relationshipId",void 0),v([S({type:String,json:{write:!0}})],yo.prototype,"title",void 0),v([S({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],yo.prototype,"type",void 0),yo=v([B("esri.popup.content.RelationshipContent")],yo);const bv=yo;var T_;let x0=T_=class extends Ru{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new T_({text:this.text})}};v([S({type:String,json:{write:!0}})],x0.prototype,"text",void 0),v([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],x0.prototype,"type",void 0),x0=T_=v([B("esri.popup.content.TextContent")],x0);const wv=x0,SK={base:null,key:"type",typeMap:{attachment:e1,media:vv,text:wv,expression:ZS,field:i1,relationship:bv}};var I_;let uh=I_=class extends de{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new I_({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([S({type:String,json:{write:!0}})],uh.prototype,"name",void 0),v([S({type:String,json:{write:!0}})],uh.prototype,"title",void 0),v([S({type:String,json:{write:!0}})],uh.prototype,"expression",void 0),v([S({type:["string","number"],json:{write:!0}})],uh.prototype,"returnType",void 0),uh=I_=v([B("esri.popup.ExpressionInfo")],uh);const xK=uh;var M_;let $0=M_=class extends de{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new M_({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};v([S({type:Boolean,json:{write:!0}})],$0.prototype,"returnTopmostRaster",void 0),v([S({type:Boolean,json:{write:!0}})],$0.prototype,"showNoDataRecords",void 0),$0=M_=v([B("esri.popup.LayerOptions")],$0);const $K=$0;var E_;let T0=E_=class extends de{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new E_({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?se(this.orderByFields):null})}};v([S({type:Boolean,json:{write:!0}})],T0.prototype,"showRelatedRecords",void 0),v([S({type:[l6],json:{write:!0}})],T0.prototype,"orderByFields",void 0),T0=E_=v([B("esri.popup.RelatedRecordsInfo")],T0);const TK=T0;var A_;let Ds=A_=class extends Ec(je){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new A_({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};v([S()],Ds.prototype,"active",void 0),v([S()],Ds.prototype,"className",void 0),v([S()],Ds.prototype,"disabled",void 0),v([S()],Ds.prototype,"icon",void 0),v([S()],Ds.prototype,"id",void 0),v([S()],Ds.prototype,"indicator",void 0),v([S()],Ds.prototype,"title",void 0),v([S()],Ds.prototype,"type",void 0),v([S()],Ds.prototype,"visible",void 0),Ds=A_=v([B("esri.support.actions.ActionBase")],Ds);const O1=Ds;var k_;let jm=k_=class extends O1{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new k_({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};v([S()],jm.prototype,"image",void 0),jm=k_=v([B("esri.support.Action.ActionButton")],jm);const RO=jm;var O_;let I0=O_=class extends O1{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new O_({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};v([S()],I0.prototype,"image",void 0),v([S()],I0.prototype,"value",void 0),I0=O_=v([B("esri.support.Action.ActionToggle")],I0);const LO=I0,IK="esri.PopupTemplate",MK=me.getLogger(IK),Zd="relationships/",T8="expression/",EK=De.ofType({key:"type",defaultKeyValue:"button",base:O1,typeMap:{button:RO,toggle:LO}}),AK={base:Ru,key:"type",typeMap:{media:vv,custom:aW,text:wv,attachments:e1,fields:i1,expression:ZS,relationship:bv}},kK=["attachments","fields","media","text","expression","relationship"];let Hi=class extends Xt(de){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Do(AK,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Ya(e)?e:(MK.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeContent(e,i,r,a){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(p=>kK.includes(p.type)).map(p=>p&&p.toJSON(a)),i.popupElements.forEach(p=>{p.type==="attachments"?this._writeAttachmentContent(i):p.type==="media"?this._writeMediaContent(p,i):p.type==="text"?this._writeTextContent(p,i):p.type==="relationship"&&this._writeRelationshipContent(p,i)})):i.description=e}writeFieldInfos(e,i,r,a){const{content:p}=this,y=Array.isArray(p)?p:null;if(e){const m=y?y.filter(x=>x.type==="fields"):[],_=m.length&&m.every(x=>{var M;return(M=x.fieldInfos)==null?void 0:M.length});i.fieldInfos=e.filter(Boolean).map(x=>{const M=x.toJSON(a);return _&&(M.visible=!1),M})}if(y)for(const m of y)m.type==="fields"&&this._writeFieldsContent(m,i)}writeLayerOptions(e,i,r,a){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(a)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...r,...this._getContentExpressionInfos(this.content,r)]),Qf(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=se(e.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(a=>{const p=i.fieldInfos.find(y=>y.fieldName.toLowerCase()===a.fieldName.toLowerCase());p?p.visible=!0:i.fieldInfos.push(a)}):i.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var p,y;const r=((p=e.orderByFields)==null?void 0:p.map(m=>this._toFieldOrderJSON(m,e.relationshipId)))||[],a=[...((y=i.relatedRecordsInfo)==null?void 0:y.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(a==null?void 0:a.length)&&{orderByFields:a}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=se(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const a={description:!1,mediaInfos:!1};return r.map(p=>p.type==="media"?(p.mediaInfos||!i||a.mediaInfos||(p.mediaInfos=i,a.mediaInfos=!0),vv.fromJSON(p)):p.type==="text"?(p.text||!e||a.description||(p.text=e,a.description=!0),wv.fromJSON(p)):p.type==="attachments"?e1.fromJSON(p):p.type==="fields"?i1.fromJSON(p):p.type==="expression"?ZS.fromJSON(p):p.type==="relationship"?bv.fromJSON(p):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!(i!=null&&i.startsWith(Zd)))return null;const a=i.replace(Zd,"").split("/");if(a.length!==2)return null;const p=parseInt(a[0],10),y=a[1];return typeof p=="number"&&y?bv.fromJSON({relationshipId:p,orderByFields:[{field:y,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:a}=e;return{field:`${Zd}${i}/${a}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:a={showRelatedRecords:!1}}){const p=[];e?p.push(new wv({text:e})):p.push(new i1),Array.isArray(i)&&i.length&&p.push(vv.fromJSON({mediaInfos:i})),r&&p.push(e1.fromJSON({displayType:"auto"}));const{showRelatedRecords:y,orderByFields:m}=a;return y&&(m!=null&&m.length)&&m.forEach(_=>{const x=this._toRelationshipContent(_);x&&p.push(x)}),p.length?p:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((a,p)=>[...a,...this._getMediaInfoFields(p)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:r,value:a}=e,p=a||{},{fields:y,normalizeField:m,tooltipField:_,sourceURL:x,linkURL:M}=p,A=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(x),...this._extractFieldNames(M),...y??[]];return m&&A.push(m),_&&A.push(_),A}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,a)=>[...r,...a.type==="expression"&&a.expressionInfo?[a.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r){r&&await Promise.all(r.map(a=>Wr(e,i,a.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(Zd)&&!i.startsWith(T8)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:a}=e,p=a==="button"||a==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(p)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,r=e.match(i);if(!r)return[];const a=/\{(\w+):.+\}/,p=r.filter(y=>!(y.indexOf(`{${Zd}`)===0||y.indexOf(`{${T8}`)===0)).map(y=>y.replace(a,"{$1}"));return p?p.map(y=>y.slice(1,-1)):[]}};v([S({type:EK})],Hi.prototype,"actions",void 0),v([S()],Hi.prototype,"content",void 0),v([It("content")],Hi.prototype,"castContent",null),v([ge("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Hi.prototype,"readContent",null),v([$e("content",{popupElements:{type:De.ofType(SK)},showAttachments:{type:Boolean},mediaInfos:{type:De.ofType(NO)},description:{type:String},relatedRecordsInfo:{type:TK}})],Hi.prototype,"writeContent",null),v([S({type:[xK],json:{write:!0}})],Hi.prototype,"expressionInfos",void 0),v([S({type:[o6]})],Hi.prototype,"fieldInfos",void 0),v([$e("fieldInfos")],Hi.prototype,"writeFieldInfos",null),v([S({type:$K})],Hi.prototype,"layerOptions",void 0),v([$e("layerOptions")],Hi.prototype,"writeLayerOptions",null),v([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Hi.prototype,"lastEditInfoEnabled",void 0),v([S()],Hi.prototype,"outFields",void 0),v([S()],Hi.prototype,"overwriteActions",void 0),v([S()],Hi.prototype,"returnGeometry",void 0),v([S({json:{type:String}})],Hi.prototype,"title",void 0),v([$e("title")],Hi.prototype,"writeTitle",null),Hi=v([B("esri.PopupTemplate")],Hi);const Lu=Hi,I8=new ft({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let OK=0,tp=class extends de{constructor(e){super(e),this.id="sym"+OK++,this.type=null,this.color=new tt([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};v([S({type:I8.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:I8.write}}})],tp.prototype,"type",void 0),v([S({type:tt,json:{write:{allowNull:!0}}})],tp.prototype,"color",void 0),v([ge("color")],tp.prototype,"readColor",null),tp=v([B("esri.symbols.Symbol")],tp);const ns=tp;var C_;let Sl=C_=class extends ns{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const a=r.map(p=>{const y=p.valueExpressionInfo;return Wr(t,e,y.expression)});await Promise.all(a)}}}clone(){return new C_({data:se(this.data)})}hash(){return iS(JSON.stringify(this.data)).toString()}};v([S({json:{write:!1}})],Sl.prototype,"color",void 0),v([S({json:{write:!0}})],Sl.prototype,"data",void 0),v([ge("data",["symbol"])],Sl.prototype,"readData",null),v([$e("data",{})],Sl.prototype,"writeData",null),v([Fe({CIMSymbolReference:"cim"},{readOnly:!0})],Sl.prototype,"type",void 0),Sl=C_=v([B("esri.symbols.CIMSymbol")],Sl);const C1=Sl;let ip=class extends de{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};v([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],ip.prototype,"enabled",void 0),v([$e("enabled")],ip.prototype,"writeEnabled",null),v([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],ip.prototype,"type",void 0),ip=v([B("esri.symbols.Symbol3DLayer")],ip);const Ko=ip,CK=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,PK="screenUtils.toPt: input not recognized!",jO=96;function DO(t){return t?t/72*jO:0}function Wa(t){return t?72*t/jO:0}function $t(t){if(typeof t=="string"){const e=t.match(CK);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),a=t.charAt(0)==="-",p=r==="px"?Wa(i):i;return a?-p:p}return console.warn(PK),null}return t}function Hr(t=0,e=0){return{x:t,y:e}}function Yme(t=0,e=0){return[t,e]}function NK(t,e){const i=e.transparency!=null?Xf(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new tt([r[0]||0,r[1]||0,r[2]||0,i]):null}function RK(t,e){e.color=t.toJSON().slice(0,3);const i=k2(t.a);i!==0&&(e.transparency=i)}const ju={type:tt,json:{type:[jt],default:null,read:{source:["color","transparency"],reader:NK},write:{target:{color:{type:[jt]},transparency:{type:jt}},writer:RK}}},Go={type:Number,cast:$t,json:{write:!0}};let hh=class extends de{constructor(e){super(e),this.color=new tt([0,0,0,1]),this.extensionLength=0,this.size=Wa(1)}clone(){}cloneProperties(){return{color:se(this.color),size:this.size,extensionLength:this.extensionLength}}};v([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],hh.prototype,"type",void 0),v([S(ju)],hh.prototype,"color",void 0),v([S({...Go,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],hh.prototype,"extensionLength",void 0),v([S(Go)],hh.prototype,"size",void 0),hh=v([B("esri.symbols.edges.Edges3D")],hh);const u6=hh;var P_;let Dm=P_=class extends u6{constructor(t){super(t),this.type="sketch"}clone(){return new P_(this.cloneProperties())}};v([Fe({sketch:"sketch"},{readOnly:!0})],Dm.prototype,"type",void 0),Dm=P_=v([B("esri.symbols.edges.SketchEdges3D")],Dm);const LK=Dm;var N_;let Fm=N_=class extends u6{constructor(t){super(t),this.type="solid"}clone(){return new N_(this.cloneProperties())}};v([Fe({solid:"solid"},{readOnly:!0})],Fm.prototype,"type",void 0),Fm=N_=v([B("esri.symbols.support.SolidEdges3D")],Fm);const jK=Fm,FO={types:{key:"type",base:u6,typeMap:{solid:jK,sketch:LK}},json:{write:!0}};var R_;let en=R_=class extends de{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new R_(t)}};v([S(ju)],en.prototype,"color",void 0),en=R_=v([B("esri.symbols.support.Symbol3DMaterial")],en);var L_;let xl=L_=class extends Ko{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new L_({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};v([Fe({Extrude:"extrude"},{readOnly:!0})],xl.prototype,"type",void 0),v([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],xl.prototype,"size",void 0),v([S({type:en,json:{write:!0}})],xl.prototype,"material",void 0),v([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],xl.prototype,"castShadows",void 0),v([S(FO)],xl.prototype,"edges",void 0),xl=L_=v([B("esri.symbols.ExtrudeSymbol3DLayer")],xl);const zO=xl;let M0=class extends ns{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};v([Fe({esriSLS:"simple-line"},{readOnly:!0})],M0.prototype,"type",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],M0.prototype,"width",void 0),M0=v([B("esri.symbols.LineSymbol")],M0);const DK=M0,FK=["begin","end","begin-end"],VO=["arrow","circle","square","diamond","cross","x"];var j_;let mo=j_=class extends de{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){(r==null?void 0:r.origin)==="web-map"||(e[i]=t)}clone(){return new j_({color:se(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};v([S({type:["begin","end","begin-end"],json:{write:!0}})],mo.prototype,"placement",void 0),v([Fe({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],mo.prototype,"type",void 0),v([S({type:VO})],mo.prototype,"style",void 0),v([$e("style")],mo.prototype,"writeStyle",null),v([S({type:tt,value:null,json:{write:{allowNull:!0}}})],mo.prototype,"color",null),v([ge("color")],mo.prototype,"readColor",null),v([$e("color")],mo.prototype,"writeColor",null),mo=j_=v([B("esri.symbols.LineSymbolMarker")],mo);const zK=mo;var D_;const ew=new ft({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let da=D_=class extends DK{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,a,p){if(t&&typeof t!="string")return t;const y={};return t!=null&&(y.style=t),e!=null&&(y.color=e),i!=null&&(y.width=$t(i)),r!=null&&(y.cap=r),a!=null&&(y.join=a),p!=null&&(y.miterLimit=$t(p)),y}clone(){var t;return new D_({color:se(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};v([Fe({esriSLS:"simple-line"},{readOnly:!0})],da.prototype,"type",void 0),v([S({type:ew.apiValues,json:{read:ew.read,write:ew.write}})],da.prototype,"style",void 0),v([S({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],da.prototype,"cap",void 0),v([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],da.prototype,"join",void 0),v([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":zK}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],da.prototype,"marker",void 0),v([S({type:Number,json:{read:!1,write:!1}})],da.prototype,"miterLimit",void 0),da=D_=v([B("esri.symbols.SimpleLineSymbol")],da);const Is=da;let E0=class extends ns{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};v([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Is}},json:{default:null,write:!0}})],E0.prototype,"outline",void 0),v([S({type:["simple-fill","picture-fill"],readOnly:!0})],E0.prototype,"type",void 0),E0=v([B("esri.symbols.FillSymbol")],E0);const GO=E0;let zm=class extends de{constructor(e){super(e)}clone(){}};v([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],zm.prototype,"type",void 0),zm=v([B("esri.symbols.patterns.LinePattern3D")],zm);const qO=zm,VK=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var F_;const GK=Rr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let A0=F_=class extends qO{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new F_(t)}};v([S({type:["style"]})],A0.prototype,"type",void 0),v([Fe(GK),S({type:VK})],A0.prototype,"style",void 0),A0=F_=v([B("esri.symbols.patterns.LineStylePattern3D")],A0);const h6=A0;let Vm=class extends de{constructor(e){super(e)}clone(){}};v([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Vm.prototype,"type",void 0),Vm=v([B("esri.symbols.patterns.Pattern3D")],Vm);const UO=Vm,qK=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var z_;let k0=z_=class extends UO{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new z_(t)}};v([S({type:["style"]})],k0.prototype,"type",void 0),v([S({type:qK,json:{read:!0,write:!0}})],k0.prototype,"style",void 0),k0=z_=v([B("esri.symbols.patterns.StylePattern3D")],k0);const BO=k0,UK={types:{key:"type",base:UO,typeMap:{style:BO}},json:{write:!0}},HO={types:{key:"type",base:qO,typeMap:{style:h6}},json:{write:!0}},$f=new tt("white");new tt("black");const BK=new tt([255,255,255,0]);function HK(t){return t.r===0&&t.g===0&&t.b===0}var V_;let Tf=V_=class extends en{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new V_(t)}};v([Fe({multiply:"multiply",replace:"replace",tint:"tint"})],Tf.prototype,"colorMixMode",void 0),Tf=V_=v([B("esri.symbols.support.Symbol3DFillMaterial")],Tf);function c6(t=XK){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function p6(t,e,i,r,a,p,y=c6()){return y[0]=t,y[1]=e,y[2]=i,y[3]=r,y[4]=a,y[5]=p,y}function ige(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new vt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function rge(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function sge(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function WK(t){return t[0]>=t[3]?0:t[3]-t[0]}function JK(t){return t[1]>=t[4]?0:t[4]-t[1]}function KK(t){return t[2]>=t[5]?0:t[5]-t[2]}function nge(t,e=[0,0,0]){return e[0]=WK(t),e[1]=JK(t),e[2]=KK(t),e}function oge(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function age(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function YK(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function lge(t){return t?YK(t,M8):c6(M8)}function uge(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function ZK(t,e,i,r,a){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=a,t[5]=Number.POSITIVE_INFINITY,t}function G_(t){return t.length===6}function hge(t,e,i){if(t==null||e==null)return t===e;if(!G_(t)||!G_(e))return!1;if(i){for(let r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1}else for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const M8=[1/0,1/0,1/0,-1/0,-1/0,-1/0],XK=[0,0,0,0,0,0];c6();const QK=p6(-.5,-.5,-.5,.5,.5,.5),eY=p6(-.5,-.5,0,.5,.5,1),tY=p6(-.5,-.5,0,.5,.5,.5);function cge(t){switch(t){case"sphere":case"cube":case"diamond":return QK;case"cylinder":case"cone":case"inverted-cone":return eY;case"tetrahedron":return tY;default:return}}const d6=["butt","square","round"],iY=[...d6,"none"],WO=["miter","bevel","round"];var q_;let ch=q_=class extends de{constructor(t){super(t),this.color=new tt([0,0,0,1]),this.size=Wa(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new q_(t)}};v([S(ju)],ch.prototype,"color",void 0),v([S(Go)],ch.prototype,"size",void 0),v([S(HO)],ch.prototype,"pattern",void 0),v([S({type:d6,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],ch.prototype,"patternCap",void 0),ch=q_=v([B("esri.symbols.support.Symbol3DOutline")],ch);var Gm;let fa=Gm=class extends Ko{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Gm(t)}static fromSimpleFillSymbol(t){var r,a,p;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new h6({style:t.outline.style}):null,i={size:((r=t.outline)==null?void 0:r.width)??0,color:(((a=t.outline)==null?void 0:a.color)??$f).clone(),pattern:e};return e&&((p=t.outline)!=null&&p.cap)&&(i.patternCap=t.outline.cap),new Gm({material:new Tf({color:(t.color??BK).clone()}),pattern:t.style&&t.style!=="solid"?new BO({style:t.style}):null,outline:i})}};v([Fe({Fill:"fill"},{readOnly:!0})],fa.prototype,"type",void 0),v([S({type:Tf,json:{write:!0}})],fa.prototype,"material",void 0),v([S(UK)],fa.prototype,"pattern",void 0),v([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],fa.prototype,"castShadows",void 0),v([S({type:ch,json:{write:!0}})],fa.prototype,"outline",void 0),v([S(FO)],fa.prototype,"edges",void 0),fa=Gm=v([B("esri.symbols.FillSymbol3DLayer")],fa);const P1=fa,rY=["none","underline","line-through"],sY=["normal","italic","oblique"],nY=["normal","lighter","bold","bolder"],JO={type:Number,cast:t=>{const e=Ks(t);return e===0?1:nn(e,.1,4)},nonNullable:!0},oY=["left","right","center"],aY=["baseline","top","middle","bottom"],KO={type:oY,nonNullable:!0},YO={type:aY,nonNullable:!0},pge=8;var U_;let ya=U_=class extends de{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return $t(t)}clone(){return new U_({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};v([S({type:rY,json:{default:"none",write:!0}})],ya.prototype,"decoration",void 0),v([S({type:String,json:{write:!0}})],ya.prototype,"family",void 0),v([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],ya.prototype,"size",void 0),v([It("size")],ya.prototype,"castSize",null),v([S({type:sY,json:{default:"normal",write:!0}})],ya.prototype,"style",void 0),v([S({type:nY,json:{default:"normal",write:!0}})],ya.prototype,"weight",void 0),ya=U_=v([B("esri.symbols.Font")],ya);const j2=ya;function Ad(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=bs(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=vS(t,e.portalItem.itemUrl);r!=null&&lY.test(r)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return B_(t,e&&e.portal)}function N1(t,e,i=r1.YES){if(t==null)return t;!xs(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=bs(t);if(e){const a=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(a){const p=B_(a,e.portal),y=B_(r,e.portal);r=vS(y,p,p),r!=null&&r!==y&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=XO(r,e==null?void 0:e.portal),xs(r)&&(r=Hn(r)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!xs(r)&&!Ic(r)&&i===r1.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function f6(t,e,i){return Ad(t,i)}function bc(t,e,i,r){const a=N1(t,r);a!==void 0&&(e[i]=a)}const ZO=/\/items\/([^\/]+)\/resources\/(.*)/,lY=/^\.\/resources\//;function uY(t){const e=(t==null?void 0:t.match(ZO))??null;return(e==null?void 0:e[1])??null}function hY(t){const e=(t==null?void 0:t.match(ZO))??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:y,extension:m}=x7(i);return{prefix:null,filename:y,extension:m}}const{path:a,extension:p}=x7(i.slice(r+1));return{prefix:i.slice(0,r),filename:a,extension:p}}function XO(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?R3(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function B_(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=fS();return nd(r,`${r.scheme}://${i}`)?R3(t,e.portalHostname,i):R3(t,i,e.portalHostname)}var r1;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(r1||(r1={}));const dge=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return r1},ensureMainOnlineDomain:XO,fromJSON:Ad,itemIdFromResourceUrl:uY,prefixAndFilenameFromResourceUrl:hY,read:f6,toJSON:N1,write:bc},Symbol.toStringTag,{value:"Module"}));var H_;const cY=Rr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ph=H_=class extends de{constructor(t){super(t)}readHref(t,e,i){return t?Ad(t,i):e.dataURI}writeHref(t,e,i,r){t&&(Ic(t)?e.dataURI=t:(e.href=N1(t,r),xs(e.href)&&(e.href=Hn(e.href))))}clone(){return new H_({href:this.href,primitive:this.primitive})}};v([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ph.prototype,"href",void 0),v([ge("href")],ph.prototype,"readHref",null),v([$e("href",{href:{type:String},dataURI:{type:String}})],ph.prototype,"writeHref",null),v([Fe(cY)],ph.prototype,"primitive",void 0),ph=H_=v([B("esri.symbols.support.IconSymbol3DLayerResource")],ph);const fge="circle";var W_;let jp=W_=class extends je{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new W_({x:this.x,y:this.y})}};v([S({type:Number})],jp.prototype,"x",void 0),v([S({type:Number})],jp.prototype,"y",void 0),jp=W_=v([B("esri.symbols.support.Symbol3DAnchorPosition2D")],jp);var J_;let O0=J_=class extends de{constructor(t){super(t),this.color=new tt([0,0,0,1]),this.size=Wa(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new J_(t)}};v([S(ju)],O0.prototype,"color",void 0),v([S(Go)],O0.prototype,"size",void 0),O0=J_=v([B("esri.symbols.support.Symbol3DIconOutline")],O0);var rp;const QO="esri.symbols.IconSymbol3DLayer";let go=rp=class extends Ko{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new rp({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||$f,i=E8(t),r=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||$f).clone()}:null;return new rp({size:t.size,resource:{primitive:dY(t.style)},material:{color:e},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||HK(t.color)?$f:t.color,i=E8(t);return new rp({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new rp({resource:{href:BE({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function E8(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=A8(t.xoffset),a=A8(t.yoffset);return(r||a)&&e&&i?{x:-r/e,y:a/i}:null}function A8(t){return isFinite(t)?t:0}v([S({type:en,json:{write:!0}})],go.prototype,"material",void 0),v([S({type:ph,json:{write:!0}})],go.prototype,"resource",void 0),v([Fe({Icon:"icon"},{readOnly:!0})],go.prototype,"type",void 0),v([S(Go)],go.prototype,"size",void 0),v([Fe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),S({json:{default:"center"}})],go.prototype,"anchor",void 0),v([S({type:jp,json:{type:[Number],read:{reader:t=>new jp({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],go.prototype,"anchorPosition",void 0),v([S({type:O0,json:{write:!0}})],go.prototype,"outline",void 0),go=rp=v([B(QO)],go);const pY={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function dY(t){return pY[t]||(me.getLogger(QO).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Yh=go;let dh=class extends Xt(de){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};v([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],dh.prototype,"type",void 0),v([S({type:FK,json:{default:"begin-end",write:!0}})],dh.prototype,"placement",void 0),v([S({type:VO,json:{default:"arrow",write:!0}})],dh.prototype,"style",void 0),v([S({type:tt,json:{type:[jt],default:null,write:!0}})],dh.prototype,"color",void 0),dh=v([B("esri.symbols.LineStyleMarker3D")],dh);const K_=dh;var qm;let vo=qm=class extends Ko{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Wa(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new qm(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??Wa(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new h6({style:t.style}):null,material:new en({color:(t.color||$f).clone()}),marker:t.marker?new K_({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new qm(e)}};v([S({type:en,json:{write:!0}})],vo.prototype,"material",void 0),v([Fe({Line:"line"},{readOnly:!0})],vo.prototype,"type",void 0),v([S({type:WO,json:{write:!0,default:"miter"}})],vo.prototype,"join",void 0),v([S({type:d6,json:{write:!0,default:"butt"}})],vo.prototype,"cap",void 0),v([S(Go)],vo.prototype,"size",void 0),v([S(HO)],vo.prototype,"pattern",void 0),v([S({types:{key:"type",base:K_,typeMap:{style:K_}},json:{write:!0}})],vo.prototype,"marker",void 0),vo=qm=v([B("esri.symbols.LineSymbol3DLayer")],vo);const R1=vo;var Y_;const fY=Rr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let C0=Y_=class extends de{clone(){return new Y_({href:this.href,primitive:this.primitive})}};v([S({type:String,json:{read:f6,write:bc}})],C0.prototype,"href",void 0),v([Fe(fY)],C0.prototype,"primitive",void 0),C0=Y_=v([B("esri.symbols.support.ObjectSymbol3DLayerResource")],C0);const mge="sphere";var Z_;let Vh=Z_=class extends je{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Z_({x:this.x,y:this.y,z:this.z})}};v([S({type:Number})],Vh.prototype,"x",void 0),v([S({type:Number})],Vh.prototype,"y",void 0),v([S({type:Number})],Vh.prototype,"z",void 0),Vh=Z_=v([B("esri.symbols.support.Symbol3DAnchorPosition3D")],Vh);var X_;let Tr=X_=class extends Ko{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new X_({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};v([S({type:en,json:{write:!0}})],Tr.prototype,"material",void 0),v([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Tr.prototype,"castShadows",void 0),v([S({type:C0,json:{write:!0}})],Tr.prototype,"resource",void 0),v([Fe({Object:"object"},{readOnly:!0})],Tr.prototype,"type",void 0),v([S({type:Number,json:{write:!0}})],Tr.prototype,"width",void 0),v([S({type:Number,json:{write:!0}})],Tr.prototype,"height",void 0),v([S({type:Number,json:{write:!0}})],Tr.prototype,"depth",void 0),v([Fe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),S({json:{default:"origin"}})],Tr.prototype,"anchor",void 0),v([S({type:Vh,json:{type:[Number],read:{reader:t=>new Vh({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Tr.prototype,"anchorPosition",void 0),v([S({type:Number,json:{write:!0}})],Tr.prototype,"heading",void 0),v([S({type:Number,json:{write:!0}})],Tr.prototype,"tilt",void 0),v([S({type:Number,json:{write:!0}})],Tr.prototype,"roll",void 0),v([S({readOnly:!0})],Tr.prototype,"isPrimitive",null),Tr=X_=v([B("esri.symbols.ObjectSymbol3DLayer")],Tr);const y6=Tr;var Q_;let Dr=Q_=class extends Ko{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new Q_({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};v([S({type:en,json:{write:!0}})],Dr.prototype,"material",void 0),v([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Dr.prototype,"castShadows",void 0),v([Fe({Path:"path"},{readOnly:!0})],Dr.prototype,"type",void 0),v([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],Dr.prototype,"profile",void 0),v([S({type:WO,json:{write:!0,default:"miter"}})],Dr.prototype,"join",void 0),v([S({type:iY,json:{write:!0,default:"butt"}})],Dr.prototype,"cap",void 0),v([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Dr.prototype,"width",void 0),v([ge("width",["width","size","height"])],Dr.prototype,"readWidth",null),v([S({type:Number,json:{write:!0}})],Dr.prototype,"height",void 0),v([ge("height",["height","size","width"])],Dr.prototype,"readHeight",null),v([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Dr.prototype,"anchor",void 0),v([S({type:["heading","all"],json:{write:!0,default:"all"}})],Dr.prototype,"profileRotation",void 0),Dr=Q_=v([B("esri.symbols.PathSymbol3DLayer")],Dr);const m6=Dr;var e9;let Dp=e9=class extends de{constructor(){super(...arguments),this.color=new tt([0,0,0,1]),this.size=0}clone(){const t={color:se(this.color),size:this.size};return new e9(t)}};v([S(ju)],Dp.prototype,"color",void 0),v([S(Go)],Dp.prototype,"size",void 0),Dp=e9=v([B("esri.symbols.support.Symbol3DHalo")],Dp);let If=class extends Xt(de){constructor(e){super(e),this.color=null}};v([S(ju)],If.prototype,"color",void 0),If=v([B("esri.symbols.support.Symbol3DTextBackground")],If);var Um;let Zr=Um=class extends Ko{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,r){const a={...r,textSymbol3D:!0};e.font=t.write({},a),delete e.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new Um({enabled:this.enabled,font:this.font&&se(this.font),halo:this.halo&&se(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:se(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new Um({font:t.font!=null?t.font.clone():new j2,halo:yY(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new en({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new If({color:t.backgroundColor.clone()}):null})}};function yY(t,e){return t&&e!=null&&e>0?new Dp({color:se(t),size:e}):null}v([S({type:j2,json:{write:!0}})],Zr.prototype,"font",null),v([$e("font")],Zr.prototype,"writeFont",null),v([S({type:Dp,json:{write:!0}})],Zr.prototype,"halo",void 0),v([S({...KO,json:{default:"center",write:!0}})],Zr.prototype,"horizontalAlignment",void 0),v([S({...JO,json:{default:1,write:!0}})],Zr.prototype,"lineHeight",void 0),v([S({type:en,json:{write:!0}})],Zr.prototype,"material",void 0),v([S({type:If,json:{write:!0}})],Zr.prototype,"background",void 0),v([S(Go)],Zr.prototype,"size",null),v([S({type:String,json:{write:!0}})],Zr.prototype,"text",void 0),v([Fe({Text:"text"},{readOnly:!0})],Zr.prototype,"type",void 0),v([S({...YO,json:{default:"baseline",write:!0}})],Zr.prototype,"verticalAlignment",void 0),Zr=Um=v([B("esri.symbols.TextSymbol3DLayer")],Zr);const kd=Zr;var t9;let $l=t9=class extends Ko{constructor(t){super(t),this.color=i9.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new t9({color:se(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};v([S({type:tt,nonNullable:!0,json:{type:[jt],write:(t,e,i)=>e[i]=t.toArray(tt.AlphaMode.UNLESS_OPAQUE),default:()=>i9.clone(),defaultEquals:t=>t.toCss(!0)===i9.toCss(!0)}})],$l.prototype,"color",void 0),v([Fe({Water:"water"},{readOnly:!0})],$l.prototype,"type",void 0),v([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],$l.prototype,"waterbodySize",void 0),v([S({type:Number,json:{write:!0,default:null}})],$l.prototype,"waveDirection",void 0),v([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],$l.prototype,"waveStrength",void 0),$l=t9=v([B("esri.symbols.WaterSymbol3DLayer")],$l);const i9=new tt([0,119,190]),eC=$l;var r9;let fh=r9=class extends je{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new r9({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};v([S({type:String})],fh.prototype,"name",void 0),v([S({type:String})],fh.prototype,"styleUrl",void 0),v([S({type:String})],fh.prototype,"styleName",void 0),v([S({type:fr})],fh.prototype,"portal",void 0),fh=r9=v([B("esri.symbols.support.StyleOrigin")],fh);const s9=fh;var n9;let Mf=n9=class extends je{constructor(){super(...arguments),this.url=""}clone(){return new n9({url:this.url})}};v([S({type:String})],Mf.prototype,"url",void 0),Mf=n9=v([B("esri.symbols.support.Thumbnail")],Mf);const tC={icon:Yh,object:y6,line:R1,path:m6,fill:P1,extrude:zO,text:kd,water:eC},mY=De.ofType({base:Ko,key:"type",typeMap:tC,errorContext:"symbol-layer"});let bo=class extends ns{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=i&&i.type||De;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.constructed&&me.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){cc(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const a=Ad(e.styleUrl,r);return new s9({styleUrl:a,name:e.name})}if(e.styleName&&e.name)return new s9({portal:r&&r.portal||fr.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new sn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,a){if(e.styleUrl&&e.name){let p=N1(e.styleUrl,a);xs(p)&&(p=Hn(p)),i.styleOrigin={styleUrl:p,name:e.name}}else e.styleName&&e.name&&(e.portal&&a&&a.portal&&!qE(e.portal.restUrl,a.portal.restUrl)?a&&a.messages&&a.messages.push(new sn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Ko||e&&tC[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};v([S({json:{read:!1,write:!1}})],bo.prototype,"color",null),v([S({type:mY,nonNullable:!0,json:{write:!0}}),It(CE)],bo.prototype,"symbolLayers",null),v([S({type:s9})],bo.prototype,"styleOrigin",void 0),v([ge("styleOrigin")],bo.prototype,"readStyleOrigin",null),v([$e("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],bo.prototype,"writeStyleOrigin",null),v([S({type:Mf,json:{read:!1}})],bo.prototype,"thumbnail",void 0),v([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],bo.prototype,"type",void 0),bo=v([B("esri.symbols.Symbol3D")],bo);const Od=bo;let P0=class extends de{constructor(e){super(e),this.visible=!0}clone(){}};v([S({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],P0.prototype,"type",void 0),v([S({readOnly:!0})],P0.prototype,"visible",void 0),P0=v([B("esri.symbols.callouts.Callout3D")],P0);const iC=P0;var o9;let Bm=o9=class extends de{constructor(){super(...arguments),this.color=new tt("white")}clone(){return new o9({color:se(this.color)})}};v([S(ju)],Bm.prototype,"color",void 0),Bm=o9=v([B("esri.symbols.callouts.LineCallout3DBorder")],Bm);const rC=Bm;Object.freeze(Object.defineProperty({__proto__:null,default:rC},Symbol.toStringTag,{value:"Module"}));var a9;let Tl=a9=class extends iC{constructor(t){super(t),this.type="line",this.color=new tt([0,0,0,1]),this.size=Wa(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new a9({color:se(this.color),size:this.size,border:se(this.border)})}};v([Fe({line:"line"},{readOnly:!0})],Tl.prototype,"type",void 0),v([S(ju)],Tl.prototype,"color",void 0),v([S(Go)],Tl.prototype,"size",void 0),v([S({type:rC,json:{write:!0}})],Tl.prototype,"border",void 0),v([S({readOnly:!0})],Tl.prototype,"visible",null),Tl=a9=v([B("esri.symbols.callouts.LineCallout3D")],Tl);const gY=Tl;function g6(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function sC(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!g6(t)}const nC={types:{key:"type",base:iC,typeMap:{line:gY}},json:{write:!0}};var l9;let sp=l9=class extends de{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new l9({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};v([S(Go)],sp.prototype,"screenLength",void 0),v([S({type:Number,nonNullable:!0,json:{write:!0,default:0}})],sp.prototype,"minWorldLength",void 0),v([S({type:Number,json:{write:!0}})],sp.prototype,"maxWorldLength",void 0),sp=l9=v([B("esri.symbols.support.Symbol3DVerticalOffset")],sp);const oC=sp;var Hm;const aC=De.ofType({base:null,key:"type",typeMap:{text:kd}});let Il=Hm=class extends Od{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new aC,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return sC(this)}hasVisibleVerticalOffset(){return g6(this)}clone(){return new Hm({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail),callout:se(this.callout),verticalOffset:se(this.verticalOffset)})}static fromTextSymbol(t){return new Hm({symbolLayers:[kd.fromTextSymbol(t)]})}};v([S({type:oC,json:{write:!0}})],Il.prototype,"verticalOffset",void 0),v([S(nC)],Il.prototype,"callout",void 0),v([S({json:{read:!1,write:!1}})],Il.prototype,"styleOrigin",void 0),v([S({type:aC})],Il.prototype,"symbolLayers",void 0),v([Fe({LabelSymbol3D:"label-3d"},{readOnly:!0})],Il.prototype,"type",void 0),Il=Hm=v([B("esri.symbols.LabelSymbol3D")],Il);const D2=Il;var Wm;const lC=De.ofType({base:null,key:"type",typeMap:{line:R1,path:m6}}),vY=De.ofType({base:null,key:"type",typeMap:{line:R1,path:m6}});let N0=Wm=class extends Od{constructor(t){super(t),this.symbolLayers=new lC,this.type="line-3d"}clone(){return new Wm({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleLineSymbol(t){return new Wm({symbolLayers:[R1.fromSimpleLineSymbol(t)]})}};v([S({type:lC,json:{type:vY}})],N0.prototype,"symbolLayers",void 0),v([Fe({LineSymbol3D:"line-3d"},{readOnly:!0})],N0.prototype,"type",void 0),N0=Wm=v([B("esri.symbols.LineSymbol3D")],N0);const F2=N0;let Ml=class extends ns{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};v([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ml.prototype,"angle",void 0),v([S({type:["simple-marker","picture-marker"],readOnly:!0})],Ml.prototype,"type",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],Ml.prototype,"xoffset",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],Ml.prototype,"yoffset",void 0),v([S({type:Number,cast:t=>t==="auto"?t:$t(t),json:{write:!0}})],Ml.prototype,"size",void 0),Ml=v([B("esri.symbols.MarkerSymbol")],Ml);const uC=Ml;var Jm;const hC=De.ofType({base:null,key:"type",typeMap:{fill:P1}});let R0=Jm=class extends Od{constructor(t){super(t),this.symbolLayers=new hC,this.type="mesh-3d"}clone(){return new Jm({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleFillSymbol(t){return new Jm({symbolLayers:[P1.fromSimpleFillSymbol(t)]})}};v([S({type:hC})],R0.prototype,"symbolLayers",void 0),v([Fe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],R0.prototype,"type",void 0),R0=Jm=v([B("esri.symbols.MeshSymbol3D")],R0);const z2=R0;function bY(t,e,i){return e.imageData?BE({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):cC(e.url,i)}function cC(t,e){var i;return _Y(e)&&!xs(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?Ua(e.layer.parsedUrl.path,"images",t):Ad(t,e)}function wY(t,e,i,r){if(Ic(t)){const a=Kf(t);if(!a)return;e.contentType=a.mediaType,e.imageData=a.data,i&&i.imageData===e.imageData&&i.url&&bc(i.url,e,"url",r)}else bc(t,e,"url",r)}const pC={json:{read:{source:["imageData","url"],reader:bY},write:{writer(t,e,i,r){wY(t,e,this.source,r)}}}},dC={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=cC(e.url,i)),r}}}};function _Y(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var u9;let Fs=u9=class extends GO{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const a={};return t&&(a.url=t),e&&(a.outline=e),i!=null&&(a.width=$t(i)),r!=null&&(a.height=$t(r)),a}clone(){const t=new u9({color:se(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",se(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};v([Fe({esriPFS:"picture-fill"},{readOnly:!0})],Fs.prototype,"type",void 0),v([S(pC)],Fs.prototype,"url",void 0),v([S({type:Number,json:{write:!0}})],Fs.prototype,"xscale",void 0),v([S({type:Number,json:{write:!0}})],Fs.prototype,"yscale",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],Fs.prototype,"width",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],Fs.prototype,"height",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],Fs.prototype,"xoffset",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],Fs.prototype,"yoffset",void 0),v([S(dC)],Fs.prototype,"source",void 0),Fs=u9=v([B("esri.symbols.PictureFillSymbol")],Fs);const fC=Fs;var h9;let $n=h9=class extends uC{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=$t(e)),i!=null&&(r.height=$t(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new h9({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",se(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};v([S({json:{write:!1}})],$n.prototype,"color",void 0),v([Fe({esriPMS:"picture-marker"},{readOnly:!0})],$n.prototype,"type",void 0),v([S(pC)],$n.prototype,"url",void 0),v([S(dC)],$n.prototype,"source",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],$n.prototype,"height",void 0),v([ge("height",["height","size"])],$n.prototype,"readHeight",null),v([S({type:Number,cast:$t,json:{write:!0}})],$n.prototype,"width",void 0),v([S({json:{write:!1}})],$n.prototype,"size",void 0),$n=h9=v([B("esri.symbols.PictureMarkerSymbol")],$n);const L1=$n;var yh;const yC=De.ofType({base:null,key:"type",typeMap:{icon:Yh,object:y6,text:kd}});let mh=yh=class extends Od{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new yC,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return sC(this)}hasVisibleVerticalOffset(){return g6(this)}clone(){return new yh({verticalOffset:se(this.verticalOffset),callout:se(this.callout),styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new yh({symbolLayers:[Yh.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new yh({symbolLayers:[Yh.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var r,a;if(((a=(r=t.data)==null?void 0:r.symbol)==null?void 0:a.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new yh(i!=null&&i.callout?{symbolLayers:[Yh.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Yh.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new yh({symbolLayers:[kd.fromTextSymbol(t)]})}};v([S({type:oC,json:{write:!0}})],mh.prototype,"verticalOffset",void 0),v([S(nC)],mh.prototype,"callout",void 0),v([S({type:yC,json:{origins:{"web-scene":{write:!0}}}})],mh.prototype,"symbolLayers",void 0),v([Fe({PointSymbol3D:"point-3d"},{readOnly:!0})],mh.prototype,"type",void 0),mh=yh=v([B("esri.symbols.PointSymbol3D")],mh);const Zh=mh;var L0;const mC=De.ofType({base:null,key:"type",typeMap:{extrude:zO,fill:P1,icon:Yh,line:R1,object:y6,text:kd,water:eC}});let j0=L0=class extends Od{constructor(t){super(t),this.symbolLayers=new mC,this.type="polygon-3d"}clone(){return new L0({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromJSON(t){const e=new L0;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new L0({symbolLayers:[P1.fromSimpleFillSymbol(t)]})}};v([S({type:mC,json:{write:!0}})],j0.prototype,"symbolLayers",void 0),v([Fe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],j0.prototype,"type",void 0),j0=L0=v([B("esri.symbols.PolygonSymbol3D")],j0);const j1=j0;var c9;const tw=new ft({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let gh=c9=class extends GO{constructor(...t){super(...t),this.color=new tt([0,0,0,.25]),this.outline=new Is,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new c9({color:se(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};v([S()],gh.prototype,"color",void 0),v([S()],gh.prototype,"outline",void 0),v([Fe({esriSFS:"simple-fill"},{readOnly:!0})],gh.prototype,"type",void 0),v([S({type:tw.apiValues,json:{read:tw.read,write:tw.write}})],gh.prototype,"style",void 0),gh=c9=v([B("esri.symbols.SimpleFillSymbol")],gh);const Du=gh;var p9;const iw=new ft({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let wo=p9=class extends uC{constructor(...t){super(...t),this.color=new tt([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Is}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const a={};return t&&(a.style=t),e!=null&&(a.size=$t(e)),i&&(a.outline=i),r&&(a.color=r),a}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new p9({angle:this.angle,color:se(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};v([S()],wo.prototype,"color",void 0),v([$e("color")],wo.prototype,"writeColor",null),v([Fe({esriSMS:"simple-marker"},{readOnly:!0})],wo.prototype,"type",void 0),v([S()],wo.prototype,"size",void 0),v([S({type:iw.apiValues,json:{read:iw.read,write:iw.write}})],wo.prototype,"style",void 0),v([S({type:String,json:{write:!0}})],wo.prototype,"path",null),v([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Is}},json:{default:null,write:!0}})],wo.prototype,"outline",void 0),wo=p9=v([B("esri.symbols.SimpleMarkerSymbol")],wo);const Fu=wo;var d9;let oi=d9=class extends ns{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new j2,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return $t(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new d9({angle:this.angle,backgroundColor:se(this.backgroundColor),borderLineColor:se(this.borderLineColor),borderLineSize:this.borderLineSize,color:se(this.color),font:this.font&&this.font.clone(),haloColor:se(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};v([S({type:tt,json:{write:!0}})],oi.prototype,"backgroundColor",void 0),v([S({type:tt,json:{write:!0}})],oi.prototype,"borderLineColor",void 0),v([S({type:Number,json:{write:!0},cast:$t})],oi.prototype,"borderLineSize",void 0),v([S({type:j2,json:{write:!0}})],oi.prototype,"font",void 0),v([S({...KO,json:{write:!0}})],oi.prototype,"horizontalAlignment",void 0),v([S({type:Boolean,json:{write:!0}})],oi.prototype,"kerning",void 0),v([S({type:tt,json:{write:!0}})],oi.prototype,"haloColor",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],oi.prototype,"haloSize",void 0),v([S({type:Boolean,json:{write:!0}})],oi.prototype,"rightToLeft",void 0),v([S({type:Boolean,json:{write:!0}})],oi.prototype,"rotated",void 0),v([S({type:String,json:{write:!0}})],oi.prototype,"text",void 0),v([Fe({esriTS:"text"},{readOnly:!0})],oi.prototype,"type",void 0),v([S({...YO,json:{write:!0}})],oi.prototype,"verticalAlignment",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],oi.prototype,"xoffset",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],oi.prototype,"yoffset",void 0),v([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],oi.prototype,"angle",void 0),v([S({type:Number,json:{write:!0}})],oi.prototype,"width",void 0),v([S({type:Number})],oi.prototype,"lineWidth",void 0),v([$e("lineWidth")],oi.prototype,"writeLineWidth",null),v([It("lineWidth")],oi.prototype,"castLineWidth",null),v([S(JO)],oi.prototype,"lineHeight",void 0),v([$e("lineHeight")],oi.prototype,"writeLineHeight",null),oi=d9=v([B("esri.symbols.TextSymbol")],oi);const kc=oi;var f9;let Tn=f9=class extends ns{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:fr.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new f9({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const m=r&&i.get(r);if(m)return m.clone()}const{resolveWebStyleSymbol:a}=await we(()=>import("./webStyleSymbolUtils-3295b6c7.js"),["assets/webStyleSymbolUtils-3295b6c7.js","assets/devEnvironmentUtils-5002a058.js"]);Zt(e);const p=a(this,{portal:this.portal},t,e);p.catch(m=>{me.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",m)});const y=await p;return t==="webRef"&&y.type==="point-3d"||t==="cimRef"&&y.type==="cim"?(i!=null&&i.set(r,y.clone()),y):null}};v([S({json:{write:!1}})],Tn.prototype,"color",void 0),v([S({type:String,json:{write:!0}})],Tn.prototype,"styleName",void 0),v([S({type:fr,json:{write:!1}})],Tn.prototype,"portal",void 0),v([S({type:String,json:{read:f6,write:bc}})],Tn.prototype,"styleUrl",void 0),v([S({type:Mf,json:{read:!1}})],Tn.prototype,"thumbnail",void 0),v([S({type:String,json:{write:!0}})],Tn.prototype,"name",void 0),v([Fe({styleSymbolReference:"web-style"},{readOnly:!0})],Tn.prototype,"type",void 0),v([S()],Tn.prototype,"_fetchCacheKey",null),Tn=f9=v([B("esri.symbols.WebStyleSymbol")],Tn);const Oc=Tn;function _ge(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function y9(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const sc={base:ns,key:"type",typeMap:{"simple-fill":Du,"picture-fill":fC,"picture-marker":L1,"simple-line":Is,"simple-marker":Fu,text:kc,"label-3d":D2,"line-3d":F2,"mesh-3d":z2,"point-3d":Zh,"polygon-3d":j1,"web-style":Oc,cim:C1},errorContext:"symbol"},SY={base:ns,key:"type",typeMap:{"picture-marker":L1,"simple-marker":Fu,text:kc,"web-style":Oc,cim:C1},errorContext:"symbol"},xY=_d({types:sc}),gC={base:ns,key:"type",typeMap:{"simple-fill":Du,"picture-fill":fC,"picture-marker":L1,"simple-line":Is,"simple-marker":Fu,text:kc,"line-3d":F2,"mesh-3d":z2,"point-3d":Zh,"polygon-3d":j1,"web-style":Oc,cim:C1},errorContext:"symbol"},$Y={base:ns,key:"type",typeMap:{text:kc,"label-3d":D2},errorContext:"symbol"},k8={base:ns,key:"type",typeMap:{"line-3d":F2,"mesh-3d":z2,"point-3d":Zh,"polygon-3d":j1,"web-style":Oc,cim:C1},errorContext:"symbol"},TY={base:ns,key:"type",typeMap:{"label-3d":D2},errorContext:"symbol"},vC=Do(sc);var m9;function IY(t){if(!t)return null;const e={};for(const i in t){const r=Ba(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function MY(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}let Xr=m9=class extends Xt(de){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:mf(),configurable:!0})}normalizeCtorArgs(t,e,i,r){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:i,popupTemplate:r}}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new m9({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of[this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate!=null)return e.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:MY(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const a={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(a.action=r),t==="attributes"&&(a.attributeName=r),this.layer.graphicChanged(a)}};v([S({value:null,json:{read:IY}})],Xr.prototype,"aggregateGeometries",null),v([S({value:null})],Xr.prototype,"attributes",null),v([S({value:null,types:Nu,json:{read:Ba}})],Xr.prototype,"geometry",null),v([S({type:Boolean})],Xr.prototype,"isAggregate",void 0),v([S({clonable:"reference"})],Xr.prototype,"layer",void 0),v([S({type:Lu})],Xr.prototype,"popupTemplate",void 0),v([S({clonable:"reference"})],Xr.prototype,"sourceLayer",void 0),v([S({value:null,types:sc})],Xr.prototype,"symbol",null),v([S({type:Boolean,value:!0})],Xr.prototype,"visible",null),Xr=m9=v([B("esri.Graphic")],Xr),function(t){t.generateUID=mf}(Xr||(Xr={}));const Nr=Xr;let v6=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,r,a=0,p=!1){return(r-=a)<e?r+=this.ndiff(e-r):r>i&&(r-=this.ndiff(r-i)),p&&r===i&&(r=e),r+a}normalize(e,i=0,r=!1){return this._normalize(this.min,this.max,e,i,r)}clamp(e,i=0){return nn(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+this.ndiff(e-i,r)}minimalMonotonic(e,i,r){return this._normalize(e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,a=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(a)?r:a}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function b6(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}b6(new v6(0,2*Math.PI));b6(new v6(-Math.PI,Math.PI));const EY=b6(new v6(0,360));let ma=class extends Xt(de){constructor(...e){super(...e),this.position=new Ue([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,r,a){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const p={position:e};return i!=null&&(p.heading=i),r!=null&&(p.tilt=r),a!=null&&(p.fov=a),p}return e}writePosition(e,i,r,a){const p=e.clone();p.x=Ks(e.x||0),p.y=Ks(e.y||0),p.z=e.hasZ?Ks(e.z||0):e.z,i[r]=p.write({},a)}readPosition(e,i){const r=new Ue;return r.read(e,i),r.x=Ks(r.x||0),r.y=Ks(r.y||0),r.z=r.hasZ?Ks(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};v([S({type:Ue,json:{write:{isRequired:!0}}})],ma.prototype,"position",void 0),v([$e("position")],ma.prototype,"writePosition",null),v([ge("position")],ma.prototype,"readPosition",null),v([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),It(t=>EY.normalize(Ks(t)))],ma.prototype,"heading",void 0),v([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),It(t=>nn(Ks(t),-180,180))],ma.prototype,"tilt",void 0),v([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ma.prototype,"fov",void 0),ma=v([B("esri.Camera")],ma);const AY=ma;var g9;let El=g9=class extends de{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new g9({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function rw(){return{enabled:!this.camera}}v([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:rw}}}}})],El.prototype,"rotation",void 0),v([It("rotation")],El.prototype,"castRotation",null),v([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:rw}}}}})],El.prototype,"scale",void 0),v([S({types:Nu,json:{read:Ba,write:!0,origins:{"web-scene":{read:Ba,write:{overridePolicy:rw}}}}})],El.prototype,"targetGeometry",void 0),v([S({type:AY,json:{write:!0}})],El.prototype,"camera",void 0),El=g9=v([B("esri.Viewpoint")],El);const Ro=El;function Ee(t,e,i={}){return w6(t,e,i,bC)}function qo(t,e,i={}){return w6(t,e,i,wC)}function w6(t,e,i={},r){let a=null;const p=i.once?(y,m)=>{r(y)&&(fi(a),e(y,m))}:(y,m)=>{r(y)&&e(y,m)};if(a=Ez(t,p,i.sync,i.equals),i.initial){const y=t();p(y,y)}return a}function Tu(t,e,i,r={}){let a=null,p=null,y=null;function m(){var M;a&&p&&(p.remove(),(M=r.onListenerRemove)==null||M.call(r,a),a=null,p=null)}function _(M){r.once&&r.once&&fi(y),i(M)}const x=Ee(t,(M,A)=>{var C;m(),p2(M)&&(a=M,p=d2(M,e,_),(C=r.onListenerAdd)==null||C.call(r,M))},{sync:r.sync,initial:!0});return y=jo(()=>{x.remove(),m()}),y}function s1(t,e){return kY(t,wC,e)}function kY(t,e,i){if(tn(i))return Promise.reject(hi());const r=t();if(e!=null&&e(r))return Promise.resolve(r);let a=null;function p(){a=fi(a)}return new Promise((y,m)=>{a=o2([Ss(i,()=>{p(),m(hi())}),w6(t,_=>{p(),y(_)},{sync:!1,once:!0},e??bC)])})}function bC(t){return!0}function wC(t){return!!t}function OY(t,e,i={}){let r=!1;const a=Ee(t,(p,y)=>{r||e(p,y)},i);return{remove(){a.remove()},pause(){r=!0},resume(){r=!1}}}const Cd={sync:!0},St={initial:!0},Ca={sync:!0,initial:!0};let _v=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new b2,this._items=new Set}get length(){return Ze(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ze(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ze(this._observable),yield*this._items}};const CY={statsWorker:()=>we(()=>import("./statsWorker-8fb171d7.js"),["assets/statsWorker-8fb171d7.js","assets/quantizationUtils-ca0cc80d.js","assets/utils-6123d66b.js","assets/generateRendererUtils-32dd69e2.js"]),geometryEngineWorker:()=>we(()=>import("./geometryEngineWorker-227987e1.js"),["assets/geometryEngineWorker-227987e1.js","assets/geometryEngineJSON-06ee13eb.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>we(()=>import("./CSVSourceWorker-ce706209.js"),["assets/CSVSourceWorker-ce706209.js","assets/json-48e3ea08.js","assets/FeatureStore-7dc5b4cd.js","assets/BoundsStore-754199db.js","assets/PooledRBush-e43d1107.js","assets/projectionSupport-ab9cb325.js","assets/timeSupport-8f3d3121.js","assets/QueryEngine-602494a0.js","assets/WhereClause-1000016d.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-ca0cc80d.js","assets/utils-6123d66b.js","assets/generateRendererUtils-32dd69e2.js","assets/number-b97eaaa0.js","assets/clientSideDefaults-a37d3917.js"]),EdgeProcessingWorker:()=>we(()=>import("./EdgeProcessingWorker-e929be05.js"),["assets/EdgeProcessingWorker-e929be05.js","assets/InterleavedLayout-1c644cdc.js","assets/BufferView-f541be9b.js","assets/types-1305598a.js","assets/edgeProcessing-1c5d54d1.js","assets/deduplicate-7d6c66fc.js","assets/Indices-53235ef1.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>we(()=>import("./ElevationSamplerWorker-8a4a59ab.js"),["assets/ElevationSamplerWorker-8a4a59ab.js","assets/PooledRBush-e43d1107.js","assets/georeference-f0e67170.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-ca30daa1.js","assets/MeshLocalVertexSpace-8031cf08.js","assets/MeshGeoreferencedRelativeVertexSpace-4f0d7b2f.js","assets/quat-08b43bbe.js","assets/quatf64-3363c48e.js","assets/vec32-22960fb5.js","assets/BufferView-f541be9b.js"]),FeatureServiceSnappingSourceWorker:()=>we(()=>import("./FeatureServiceSnappingSourceWorker-4ddb889a.js"),["assets/FeatureServiceSnappingSourceWorker-4ddb889a.js","assets/FeatureStore-7dc5b4cd.js","assets/BoundsStore-754199db.js","assets/PooledRBush-e43d1107.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/timeSupport-8f3d3121.js","assets/QueryEngine-602494a0.js","assets/WhereClause-1000016d.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-ca0cc80d.js","assets/utils-6123d66b.js","assets/generateRendererUtils-32dd69e2.js","assets/byteSizeEstimations-7cf1c05d.js"]),GeoJSONSourceWorker:()=>we(()=>import("./GeoJSONSourceWorker-0be20ef9.js"),["assets/GeoJSONSourceWorker-0be20ef9.js","assets/FeatureStore-7dc5b4cd.js","assets/BoundsStore-754199db.js","assets/PooledRBush-e43d1107.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/timeSupport-8f3d3121.js","assets/QueryEngine-602494a0.js","assets/WhereClause-1000016d.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-ca0cc80d.js","assets/utils-6123d66b.js","assets/generateRendererUtils-32dd69e2.js","assets/geojson-b0efc0a6.js","assets/clientSideDefaults-a37d3917.js","assets/sourceUtils-c1ada8a4.js"]),LercWorker:()=>we(()=>import("./LercWorker-d6475b5a.js"),[]),MemorySourceWorker:()=>we(()=>import("./MemorySourceWorker-91f70d62.js"),["assets/MemorySourceWorker-91f70d62.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-7dc5b4cd.js","assets/BoundsStore-754199db.js","assets/PooledRBush-e43d1107.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/timeSupport-8f3d3121.js","assets/QueryEngine-602494a0.js","assets/WhereClause-1000016d.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-ca0cc80d.js","assets/utils-6123d66b.js","assets/generateRendererUtils-32dd69e2.js","assets/clientSideDefaults-a37d3917.js","assets/sourceUtils-c1ada8a4.js"]),PBFDecoderWorker:()=>we(()=>import("./PBFDecoderWorker-9f306ef9.js"),[]),Pipeline:()=>we(()=>import("./Pipeline-8059b4f8.js"),["assets/Pipeline-8059b4f8.js","assets/QueryEngine-602494a0.js","assets/WhereClause-1000016d.js","assets/executionError-c92d3b85.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-ca0cc80d.js","assets/timeSupport-8f3d3121.js","assets/utils-6123d66b.js","assets/generateRendererUtils-32dd69e2.js","assets/FeatureStore2D-af2c1591.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/definitions-838da113.js","assets/visualVariablesUtils-fe0435c8.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/ogcFeatureUtils-1e6d5843.js","assets/geojson-b0efc0a6.js","assets/clientSideDefaults-a37d3917.js","assets/createConnection-28b79928.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>we(()=>import("./PointCloudWorker-f734a021.js"),["assets/PointCloudWorker-f734a021.js","assets/quat-08b43bbe.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-8710cd28.js","assets/VertexAttribute-9f2e53ec.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-f1ea497b.js"]),RasterWorker:()=>we(()=>import("./RasterWorker-247f0ab0.js"),["assets/RasterWorker-247f0ab0.js","assets/dataUtils-b53d86d9.js","assets/pixelRangeUtils-cc28ceb4.js","assets/RasterSymbolizer-a3ca94d0.js","assets/colorUtils-c0f43caf.js","assets/rasterRendererChecks-e55c06d8.js","assets/utils-d5f3fea2.js","assets/rasterProjectionHelper-8c056f80.js"]),SceneLayerSnappingSourceWorker:()=>we(()=>import("./SceneLayerSnappingSourceWorker-b6273dcd.js"),["assets/SceneLayerSnappingSourceWorker-b6273dcd.js","assets/lineSegment-4ce768fa.js","assets/sphere-3e5cbebe.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js","assets/plane-ad0afca6.js","assets/InterleavedLayout-1c644cdc.js","assets/BufferView-f541be9b.js","assets/types-1305598a.js","assets/edgeProcessing-1c5d54d1.js","assets/deduplicate-7d6c66fc.js","assets/Indices-53235ef1.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>we(()=>import("./SceneLayerWorker-e20ff49b.js"),["assets/SceneLayerWorker-e20ff49b.js","assets/MeshLocalVertexSpace-8031cf08.js","assets/MeshGeoreferencedRelativeVertexSpace-4f0d7b2f.js","assets/vec32-22960fb5.js","assets/sphere-3e5cbebe.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>we(()=>import("./WFSSourceWorker-56d41842.js"),["assets/WFSSourceWorker-56d41842.js","assets/FeatureStore-7dc5b4cd.js","assets/BoundsStore-754199db.js","assets/PooledRBush-e43d1107.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/timeSupport-8f3d3121.js","assets/QueryEngine-602494a0.js","assets/WhereClause-1000016d.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-ca0cc80d.js","assets/utils-6123d66b.js","assets/generateRendererUtils-32dd69e2.js","assets/geojson-b0efc0a6.js","assets/sourceUtils-c1ada8a4.js","assets/wfsUtils-8c2b5e63.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>we(()=>import("./WorkerTileHandler-d83475a0.js"),["assets/WorkerTileHandler-d83475a0.js","assets/enums-fb086c25.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/TurboLine-fb05f5cb.js","assets/definitions-838da113.js","assets/StyleRepository-c23ee56e.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-c0f43caf.js","assets/earcut-00ef0f46.js","assets/BidiEngine-9a40f2f4.js"])};var rr;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(rr||(rr={}));let PY=0;function _C(){return PY++}function NY(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function n1(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function _6(t,e,i,r){if(e.type===rr.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==rr.INVOKE&&e.type!==rr.RESPONSE)return void t.postMessage(e);let a;if(NY(i)?(a=O8(i.transferList),e.data=i.result):(a=O8(r),e.data=i),a){if(le("ff")){for(const p of a)if("byteLength"in p&&p.byteLength>267386880){const y="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case rr.INVOKE:throw y;case rr.RESPONSE:return void _6(t,{type:rr.RESPONSE,jobId:e.jobId,error:n1(y)})}}}t.postMessage(e,a)}else t.postMessage(e)}function o1(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function O8(t){if(!t||!t.length)return null;if(le("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!RY(i));return e.length?e:null}function RY(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:C8,ABORT:P8,INVOKE:N8,RESPONSE:Xd,OPEN_PORT:R8,ON:LY}=rr,jY=2;let DY=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===rr.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Iu=class np{static connect(e){const i=new MessageChannel;let r;r=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const a=new np(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=a),np.clients.set(a,r),i.port2}static loadWorker(e){const i=CY[e];return i?i():Promise.resolve(null)}constructor(e,i,r){this._port=e,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new DY(a=>this._onInvokeMessage(a)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:C8}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){const a=r==null?void 0:r.signal,p=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new ie("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const y=_C();return new Promise((m,_)=>{if(tn(a))return this._processWork(),void _(hi());const x=Ss(a,()=>{const A=this._outJobs.get(y);A&&(this._outJobs.delete(y),this._processWork(),fi(A.abortHandle),this._post({type:P8,jobId:y}),_(hi()))}),M={resolve:m,reject:_,abortHandle:x,debugInfo:e};this._outJobs.set(y,M),this._post({type:N8,jobId:y,methodName:e,abortable:a!=null},i,p)})}on(e,i){const r=new MessageChannel;function a(p){i(p.data)}return this._port.postMessage({type:rr.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",a),r.port1.start(),{remove(){r.port1.postMessage({type:rr.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",a)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:R8,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=jY)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:r,invokeOptions:a,resolver:p}=e;this.invoke(i,r,a).then(y=>p.resolve(y)).catch(y=>p.reject(y))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{fi(e.abortHandle),e.reject(hi(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=o1(e);if(i)switch(i.type){case Xd:this._onResponseMessage(i);break;case N8:this._invokeQueue.push(i);break;case P8:this._onAbortMessage(i);break;case C8:this._onCloseMessage();break;case R8:this._onOpenPortMessage(i);break;case LY:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,a=i.get(r);this._invokeQueue.push(e),a&&(a.controller&&a.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&np.clients.get(this)===e&&e.destroy(),np.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:a,abortable:p}=e,y=p?new AbortController:null,m=this._inJobs;let _,x=this._client,M=x[i];try{if(!M&&i&&i.includes(".")){const A=i.split(".");for(let C=0;C<A.length-1;C++)x=x[A[C]],M=x[A[C+1]]}if(typeof M!="function")throw new TypeError(`${i} is not a function`);_=M.call(x,a,{client:this,signal:y?y.signal:null})}catch(A){return void this._post({type:Xd,jobId:r,error:n1(A)})}Ya(_)?(m.set(r,{controller:y,promise:_}),_.then(A=>{m.has(r)&&(m.delete(r),this._post({type:Xd,jobId:r},A))},A=>{m.has(r)&&(m.delete(r),dr(A)||this._post({type:Xd,jobId:r,error:n1(A||{message:`Error encountered at method ${i}`})}))})):this._post({type:Xd,jobId:r},_)}_onOpenPortMessage(e){new np(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,p=>{i.postMessage(p)}),a=d2(e.port,"message",p=>{const y=o1(p);(y==null?void 0:y.type)===rr.CLOSE&&(a.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:a}=e,p=this._outJobs;if(!p.has(i))return;const y=p.get(i);p.delete(i),this._processWork(),fi(y.abortHandle),r?y.reject(ie.fromJSON(JSON.parse(r))):y.resolve(a)}_post(e,i,r){return _6(this._port,e,i,r)}};Iu.kernelInfo={buildDate:lA,fullVersion:MS,revision:uA},Iu.clients=new Map;let FY=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new _v}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((r,a)=>{let p=!0;const y=m=>{Zt(i.signal),p&&(p=!1,m())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let m=0;m<e.length;++m){const _=e[m];Ya(_)?this._clientPromises[m]=_.then(x=>(this._clients[m]=new Iu(x,i,()=>this._ongoingJobsQueue.pop()??null),y(r),this._clients[m]),()=>(y(a),null)):(this._clients[m]=new Iu(_,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[m]=Promise.resolve(this._clients[m]),y(r))}})}broadcast(e,i,r){const a=new Array(this._clientPromises.length);for(let p=0;p<this._clientPromises.length;++p){const y=this._clientPromises[p];a[p]=y.then(m=>m==null?void 0:m.invoke(e,i,r))}return a}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(hi(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(e,i,r){let a;Array.isArray(r)?(me.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),a={transferList:r}):a=r;const p=rn();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:a,resolver:p});for(let y=0;y<this._clientPromises.length;y++){const m=this._clients[y];m?m.jobAdded():this._clientPromises[y].then(_=>_==null?void 0:_.jobAdded())}return p.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>o2(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let a=0;a<this._clientPromises.length;++a)this._clientPromises[a].then(p=>{p&&(i[a]=p.openPort()),--r==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const SC=me.getLogger("esri.intl.substitute");function xC(t,e,i={}){const{format:r={}}=i;return c2(t,a=>zY(a,e,r))}function zY(t,e,i){let r,a;const p=t.indexOf(":");if(p===-1?r=t.trim():(r=t.slice(0,p).trim(),a=t.slice(p+1).trim()),!r)return"";const y=S1(r,e);if(y==null)return"";const m=(a?i==null?void 0:i[a]:null)??(i==null?void 0:i[r]);return m?VY(y,m):a?GY(y,a):S6(y)}function VY(t,e){switch(e.type){case"date":return $u(t,e.intlOptions);case"number":return t1(t,e.intlOptions);default:return SC.warn("missing format descriptor for key {key}"),S6(t)}}function GY(t,e){switch(e.toLowerCase()){case"dateformat":return $u(t);case"numberformat":return t1(t);default:return SC.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?$u(t):/^numberformat/i.test(e)?t1(t):S6(t)}}function S6(t){switch(typeof t){case"string":return t;case"number":return t1(t);case"boolean":return""+t;default:return t instanceof Date?$u(t):""}}async function qY(t,e,i,r){const a=e.exec(i);if(!a)throw new ie("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const p=a[1]?`${a[1]}/`:"",y=a[2],m=Fq(r),_=`${p}${y}.json`,x=m?`${p}${y}_${m}.json`:_;let M;try{M=await L8(t(x))}catch(A){if(x===_)throw new ie("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A});try{M=await L8(t(_))}catch(C){throw new ie("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:C})}}return M}async function L8(t){if(j8.fetchBundleAsset!=null)return j8.fetchBundleAsset(t);const e=await ot(t,{responseType:"text"});return JSON.parse(e.data)}let UY=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let a;a=typeof r=="string"?p=>new URL(p,new URL(r,window.location.href)).href:r instanceof URL?p=>new URL(p,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=a,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return qY(this.getAssetUrl,this.matcher,e,i)}};function BY(t){return new UY(t)}const j8={};Dq(BY({pattern:"esri/",location:Ot}));const HY={};function WY(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=HY.baseUrl),e}let JY=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},Km=class{constructor(){this._dispatcher=new JY,this._workerPostMessage({type:rr.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){Vg(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){Vg(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=o1(e);if(i&&i.type===rr.OPEN){const{modulePath:r,jobId:a}=i;let p=await Iu.loadWorker(r);p||(p=await we(()=>import(r),[]));const y=Iu.connect(p);this._workerPostMessage({type:rr.OPENED,jobId:a,data:y})}}};const v9=me.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:KY}=rr,YY='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Ey,Ay;const D8="Failed to create Worker. Fallback to execute module in main thread";async function ZY(){if(!le("esri-workers")||(le("mozilla"),0))return F8(new Km);if(!Ey&&!Ay)try{const e=YY.split('"{CONFIGURATION}"').join(`'${XY()}'`);Ey=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){Ay=e||{}}let t;if(Ey)try{t=new Worker(Ey,{name:"esri-worker-"+QY++})}catch{v9.warn(D8,Ay),t=new Km}else v9.warn(D8,Ay),t=new Km;return F8(t)}async function F8(t){return new Promise(e=>{function i(a){const p=o1(a);p&&p.type===KY&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(a){a.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),v9.warn("Failed to create Worker. Fallback to execute module in main thread",a),(t=new Km).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function XY(){let t;if(_t.default!=null){const a={..._t};delete a.default,t=JSON.parse(JSON.stringify(a))}else t=JSON.parse(JSON.stringify(_t));t.assetsPath=bs(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?bs(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=Kn(),t.has={"esri-csp-restrictions":le("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":le("esri-2d-update-debug"),"esri-2d-log-updating":le("esri-2d-log-updating"),"featurelayer-pbf":le("featurelayer-pbf"),"featurelayer-simplify-thresholds":le("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":le("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":le("featurelayer-simplify-mobile-factor"),"esri-atomics":le("esri-atomics"),"esri-shared-array-buffer":le("esri-shared-array-buffer"),"esri-tiles-debug":le("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":le("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":le("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":le("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=bs(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=bs(t.workers.workerPath):t.workers.workerPath=bs(Ot("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=_t.workers.loaderConfig,i=WY({baseUrl:e==null?void 0:e.baseUrl,locale:Kn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:lA,fullVersion:MS,revision:uA}})}let QY=0;const{ABORT:z8,INVOKE:eZ,OPEN:tZ,OPENED:iZ,RESPONSE:Qd}=rr;let rZ=class $C{static async create(e){const i=await ZY();return new $C(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),me.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,a=_C();return new Promise((p,y)=>{const m={resolve:p,reject:y,abortHandle:sS(r,()=>{this._outJobs.delete(a),this._post({type:z8,jobId:a})})};this._outJobs.set(a,m),this._post({type:tZ,jobId:a,modulePath:e})})}_onMessage(e){const i=o1(e);if(i)switch(i.type){case iZ:this._onOpenedMessage(i);break;case Qd:this._onResponseMessage(i);break;case z8:this._onAbortMessage(i);break;case eZ:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,a=i.get(r);a&&(a.controller&&a.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:a,abortable:p}=e,y=p?new AbortController:null,m=this._inJobs,_=jG[i];let x;try{if(typeof _!="function")throw new TypeError(`${i} is not a function`);x=_.call(null,a,{signal:y?y.signal:null})}catch(M){return void this._post({type:Qd,jobId:r,error:n1(M)})}Ya(x)?(m.set(r,{controller:y,promise:x}),x.then(M=>{m.has(r)&&(m.delete(r),this._post({type:Qd,jobId:r},M))},M=>{m.has(r)&&(m.delete(r),M||(M={message:"Error encountered at method"+i}),dr(M)||this._post({type:Qd,jobId:r,error:n1(M||{message:`Error encountered at method ${i}`})}))})):this._post({type:Qd,jobId:r},x)}_onOpenedMessage(e){const{jobId:i,data:r}=e,a=this._outJobs.get(i);a&&(this._outJobs.delete(i),fi(a.abortHandle),a.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:a}=e,p=this._outJobs.get(i);p&&(this._outJobs.delete(i),fi(p.abortHandle),r?p.reject(ie.fromJSON(JSON.parse(r))):p.resolve(a))}_post(e,i,r){return _6(this.worker,e,i,r)}};const V8=le("host-browser")?Math.min(navigator.hardwareConcurrency-1,le("workers-pool-size")):0;let Xh=le("esri-mobile")?Math.min(V8,3):V8;Xh||(Xh=le("safari")&&le("mac")?7:2);let G8=0;const Ym=[];function sZ(){TC()}async function ky(t,e){const i=new FY;return await i.open(t,e),i}async function nZ(t,e={}){if(typeof t!="string")throw new ie("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(le("host-webworker")&&!le("esri-workers")&&(i="local"),i==="local"){let r=await Iu.loadWorker(t);r||(r=await we(()=>import(t),[])),Zt(e.signal);const a=e.client||r;return ky([Iu.connect(r)],{...e,client:a})}if(await TC(),Zt(e.signal),i==="dedicated"){const r=G8++%Xh;return ky([await Ym[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Xh);if(r<Xh){const a=new Array(r);for(let p=0;p<r;++p){const y=G8++%Xh;a[p]=Ym[y].open(t,e)}return ky(a,e)}}return ky(Ym.map(r=>r.open(t,e)),e)}let Oy=null;async function TC(){if(Oy)return Oy;new AbortController;const t=[];for(let e=0;e<Xh;e++){const i=rZ.create(e).then(r=>(Ym[e]=r,r));t.push(i)}return Oy=Promise.all(t),Oy}function oZ(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function zu(t,e,i,r,a,p,y,m,_,x,M,A,C,N,j,D,z){return t[0]=e,t[1]=i,t[2]=r,t[3]=a,t[4]=p,t[5]=y,t[6]=m,t[7]=_,t[8]=x,t[9]=M,t[10]=A,t[11]=C,t[12]=N,t[13]=j,t[14]=D,t[15]=z,t}function D1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Za(t,e){if(t===e){const i=e[1],r=e[2],a=e[3],p=e[6],y=e[7],m=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=p,t[11]=e[14],t[12]=a,t[13]=y,t[14]=m}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function aZ(t,e){return IC(t,e)||D1(t),t}function IC(t,e){const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],m=e[5],_=e[6],x=e[7],M=e[8],A=e[9],C=e[10],N=e[11],j=e[12],D=e[13],z=e[14],W=e[15],Y=i*m-r*y,K=i*_-a*y,ee=i*x-p*y,ne=r*_-a*m,oe=r*x-p*m,ue=a*x-p*_,ye=M*D-A*j,Se=M*z-C*j,Ce=M*W-N*j,Ne=A*z-C*D,Le=A*W-N*D,He=C*W-N*z;let Pe=Y*He-K*Le+ee*Ne+ne*Ce-oe*Se+ue*ye;return Pe?(Pe=1/Pe,t[0]=(m*He-_*Le+x*Ne)*Pe,t[1]=(a*Le-r*He-p*Ne)*Pe,t[2]=(D*ue-z*oe+W*ne)*Pe,t[3]=(C*oe-A*ue-N*ne)*Pe,t[4]=(_*Ce-y*He-x*Se)*Pe,t[5]=(i*He-a*Ce+p*Se)*Pe,t[6]=(z*ee-j*ue-W*K)*Pe,t[7]=(M*ue-C*ee+N*K)*Pe,t[8]=(y*Le-m*Ce+x*ye)*Pe,t[9]=(r*Ce-i*Le-p*ye)*Pe,t[10]=(j*oe-D*ee+W*Y)*Pe,t[11]=(A*ee-M*oe-N*Y)*Pe,t[12]=(m*Se-y*Ne-_*ye)*Pe,t[13]=(i*Ne-r*Se+a*ye)*Pe,t[14]=(D*K-j*ne-z*Y)*Pe,t[15]=(M*ne-A*K+C*Y)*Pe,t):null}function lZ(t,e){const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],m=e[5],_=e[6],x=e[7],M=e[8],A=e[9],C=e[10],N=e[11],j=e[12],D=e[13],z=e[14],W=e[15];return t[0]=m*(C*W-N*z)-A*(_*W-x*z)+D*(_*N-x*C),t[1]=-(r*(C*W-N*z)-A*(a*W-p*z)+D*(a*N-p*C)),t[2]=r*(_*W-x*z)-m*(a*W-p*z)+D*(a*x-p*_),t[3]=-(r*(_*N-x*C)-m*(a*N-p*C)+A*(a*x-p*_)),t[4]=-(y*(C*W-N*z)-M*(_*W-x*z)+j*(_*N-x*C)),t[5]=i*(C*W-N*z)-M*(a*W-p*z)+j*(a*N-p*C),t[6]=-(i*(_*W-x*z)-y*(a*W-p*z)+j*(a*x-p*_)),t[7]=i*(_*N-x*C)-y*(a*N-p*C)+M*(a*x-p*_),t[8]=y*(A*W-N*D)-M*(m*W-x*D)+j*(m*N-x*A),t[9]=-(i*(A*W-N*D)-M*(r*W-p*D)+j*(r*N-p*A)),t[10]=i*(m*W-x*D)-y*(r*W-p*D)+j*(r*x-p*m),t[11]=-(i*(m*N-x*A)-y*(r*N-p*A)+M*(r*x-p*m)),t[12]=-(y*(A*z-C*D)-M*(m*z-_*D)+j*(m*C-_*A)),t[13]=i*(A*z-C*D)-M*(r*z-a*D)+j*(r*C-a*A),t[14]=-(i*(m*z-_*D)-y*(r*z-a*D)+j*(r*_-a*m)),t[15]=i*(m*C-_*A)-y*(r*C-a*A)+M*(r*_-a*m),t}function uZ(t){const e=t[0],i=t[1],r=t[2],a=t[3],p=t[4],y=t[5],m=t[6],_=t[7],x=t[8],M=t[9],A=t[10],C=t[11],N=t[12],j=t[13],D=t[14],z=t[15];return(e*y-i*p)*(A*z-C*D)-(e*m-r*p)*(M*z-C*j)+(e*_-a*p)*(M*D-A*j)+(i*m-r*y)*(x*z-C*N)-(i*_-a*y)*(x*D-A*N)+(r*_-a*m)*(x*j-M*N)}function MC(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=e[4],_=e[5],x=e[6],M=e[7],A=e[8],C=e[9],N=e[10],j=e[11],D=e[12],z=e[13],W=e[14],Y=e[15];let K=i[0],ee=i[1],ne=i[2],oe=i[3];return t[0]=K*r+ee*m+ne*A+oe*D,t[1]=K*a+ee*_+ne*C+oe*z,t[2]=K*p+ee*x+ne*N+oe*W,t[3]=K*y+ee*M+ne*j+oe*Y,K=i[4],ee=i[5],ne=i[6],oe=i[7],t[4]=K*r+ee*m+ne*A+oe*D,t[5]=K*a+ee*_+ne*C+oe*z,t[6]=K*p+ee*x+ne*N+oe*W,t[7]=K*y+ee*M+ne*j+oe*Y,K=i[8],ee=i[9],ne=i[10],oe=i[11],t[8]=K*r+ee*m+ne*A+oe*D,t[9]=K*a+ee*_+ne*C+oe*z,t[10]=K*p+ee*x+ne*N+oe*W,t[11]=K*y+ee*M+ne*j+oe*Y,K=i[12],ee=i[13],ne=i[14],oe=i[15],t[12]=K*r+ee*m+ne*A+oe*D,t[13]=K*a+ee*_+ne*C+oe*z,t[14]=K*p+ee*x+ne*N+oe*W,t[15]=K*y+ee*M+ne*j+oe*Y,t}function hZ(t,e,i){const r=i[0],a=i[1],p=i[2];if(e===t)t[12]=e[0]*r+e[4]*a+e[8]*p+e[12],t[13]=e[1]*r+e[5]*a+e[9]*p+e[13],t[14]=e[2]*r+e[6]*a+e[10]*p+e[14],t[15]=e[3]*r+e[7]*a+e[11]*p+e[15];else{const y=e[0],m=e[1],_=e[2],x=e[3],M=e[4],A=e[5],C=e[6],N=e[7],j=e[8],D=e[9],z=e[10],W=e[11];t[0]=y,t[1]=m,t[2]=_,t[3]=x,t[4]=M,t[5]=A,t[6]=C,t[7]=N,t[8]=j,t[9]=D,t[10]=z,t[11]=W,t[12]=y*r+M*a+j*p+e[12],t[13]=m*r+A*a+D*p+e[13],t[14]=_*r+C*a+z*p+e[14],t[15]=x*r+N*a+W*p+e[15]}return t}function cZ(t,e,i){const r=i[0],a=i[1],p=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*p,t[9]=e[9]*p,t[10]=e[10]*p,t[11]=e[11]*p,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function pZ(t,e,i,r){let a,p,y,m,_,x,M,A,C,N,j,D,z,W,Y,K,ee,ne,oe,ue,ye,Se,Ce,Ne,Le=r[0],He=r[1],Pe=r[2],yt=Math.sqrt(Le*Le+He*He+Pe*Pe);return yt<an()?null:(yt=1/yt,Le*=yt,He*=yt,Pe*=yt,a=Math.sin(i),p=Math.cos(i),y=1-p,m=e[0],_=e[1],x=e[2],M=e[3],A=e[4],C=e[5],N=e[6],j=e[7],D=e[8],z=e[9],W=e[10],Y=e[11],K=Le*Le*y+p,ee=He*Le*y+Pe*a,ne=Pe*Le*y-He*a,oe=Le*He*y-Pe*a,ue=He*He*y+p,ye=Pe*He*y+Le*a,Se=Le*Pe*y+He*a,Ce=He*Pe*y-Le*a,Ne=Pe*Pe*y+p,t[0]=m*K+A*ee+D*ne,t[1]=_*K+C*ee+z*ne,t[2]=x*K+N*ee+W*ne,t[3]=M*K+j*ee+Y*ne,t[4]=m*oe+A*ue+D*ye,t[5]=_*oe+C*ue+z*ye,t[6]=x*oe+N*ue+W*ye,t[7]=M*oe+j*ue+Y*ye,t[8]=m*Se+A*Ce+D*Ne,t[9]=_*Se+C*Ce+z*Ne,t[10]=x*Se+N*Ce+W*Ne,t[11]=M*Se+j*Ce+Y*Ne,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function dZ(t,e,i){const r=Math.sin(i),a=Math.cos(i),p=e[4],y=e[5],m=e[6],_=e[7],x=e[8],M=e[9],A=e[10],C=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=p*a+x*r,t[5]=y*a+M*r,t[6]=m*a+A*r,t[7]=_*a+C*r,t[8]=x*a-p*r,t[9]=M*a-y*r,t[10]=A*a-m*r,t[11]=C*a-_*r,t}function fZ(t,e,i){const r=Math.sin(i),a=Math.cos(i),p=e[0],y=e[1],m=e[2],_=e[3],x=e[8],M=e[9],A=e[10],C=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=p*a-x*r,t[1]=y*a-M*r,t[2]=m*a-A*r,t[3]=_*a-C*r,t[8]=p*r+x*a,t[9]=y*r+M*a,t[10]=m*r+A*a,t[11]=_*r+C*a,t}function yZ(t,e,i){const r=Math.sin(i),a=Math.cos(i),p=e[0],y=e[1],m=e[2],_=e[3],x=e[4],M=e[5],A=e[6],C=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=p*a+x*r,t[1]=y*a+M*r,t[2]=m*a+A*r,t[3]=_*a+C*r,t[4]=x*a-p*r,t[5]=M*a-y*r,t[6]=A*a-m*r,t[7]=C*a-_*r,t}function EC(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function mZ(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gZ(t,e,i){if(e===0)return D1(t);let r,a,p,y=i[0],m=i[1],_=i[2],x=Math.sqrt(y*y+m*m+_*_);return x<an()?null:(x=1/x,y*=x,m*=x,_*=x,r=Math.sin(e),a=Math.cos(e),p=1-a,t[0]=y*y*p+a,t[1]=m*y*p+_*r,t[2]=_*y*p-m*r,t[3]=0,t[4]=y*m*p-_*r,t[5]=m*m*p+a,t[6]=_*m*p+y*r,t[7]=0,t[8]=y*_*p+m*r,t[9]=m*_*p-y*r,t[10]=_*_*p+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function vZ(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bZ(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wZ(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function AC(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=r+r,_=a+a,x=p+p,M=r*m,A=r*_,C=r*x,N=a*_,j=a*x,D=p*x,z=y*m,W=y*_,Y=y*x;return t[0]=1-(N+D),t[1]=A+Y,t[2]=C-W,t[3]=0,t[4]=A-Y,t[5]=1-(M+D),t[6]=j+z,t[7]=0,t[8]=C+W,t[9]=j-z,t[10]=1-(M+N),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function _Z(t,e){const i=SZ,r=-e[0],a=-e[1],p=-e[2],y=e[3],m=e[4],_=e[5],x=e[6],M=e[7],A=r*r+a*a+p*p+y*y;return A>0?(i[0]=2*(m*y+M*r+_*p-x*a)/A,i[1]=2*(_*y+M*a+x*r-m*p)/A,i[2]=2*(x*y+M*p+m*a-_*r)/A):(i[0]=2*(m*y+M*r+_*p-x*a),i[1]=2*(_*y+M*a+x*r-m*p),i[2]=2*(x*y+M*p+m*a-_*r)),AC(t,e,i),t}const SZ=ro();function xZ(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function $Z(t,e){const i=e[0],r=e[1],a=e[2],p=e[4],y=e[5],m=e[6],_=e[8],x=e[9],M=e[10];return t[0]=Math.sqrt(i*i+r*r+a*a),t[1]=Math.sqrt(p*p+y*y+m*m),t[2]=Math.sqrt(_*_+x*x+M*M),t}function TZ(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function IZ(t,e,i,r){const a=e[0],p=e[1],y=e[2],m=e[3],_=a+a,x=p+p,M=y+y,A=a*_,C=a*x,N=a*M,j=p*x,D=p*M,z=y*M,W=m*_,Y=m*x,K=m*M,ee=r[0],ne=r[1],oe=r[2];return t[0]=(1-(j+z))*ee,t[1]=(C+K)*ee,t[2]=(N-Y)*ee,t[3]=0,t[4]=(C-K)*ne,t[5]=(1-(A+z))*ne,t[6]=(D+W)*ne,t[7]=0,t[8]=(N+Y)*oe,t[9]=(D-W)*oe,t[10]=(1-(A+j))*oe,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function MZ(t,e,i,r,a){const p=e[0],y=e[1],m=e[2],_=e[3],x=p+p,M=y+y,A=m+m,C=p*x,N=p*M,j=p*A,D=y*M,z=y*A,W=m*A,Y=_*x,K=_*M,ee=_*A,ne=r[0],oe=r[1],ue=r[2],ye=a[0],Se=a[1],Ce=a[2],Ne=(1-(D+W))*ne,Le=(N+ee)*ne,He=(j-K)*ne,Pe=(N-ee)*oe,yt=(1-(C+W))*oe,yi=(z+Y)*oe,Nt=(j+K)*ue,ut=(z-Y)*ue,ar=(1-(C+D))*ue;return t[0]=Ne,t[1]=Le,t[2]=He,t[3]=0,t[4]=Pe,t[5]=yt,t[6]=yi,t[7]=0,t[8]=Nt,t[9]=ut,t[10]=ar,t[11]=0,t[12]=i[0]+ye-(Ne*ye+Pe*Se+Nt*Ce),t[13]=i[1]+Se-(Le*ye+yt*Se+ut*Ce),t[14]=i[2]+Ce-(He*ye+yi*Se+ar*Ce),t[15]=1,t}function EZ(t,e){const i=e[0],r=e[1],a=e[2],p=e[3],y=i+i,m=r+r,_=a+a,x=i*y,M=r*y,A=r*m,C=a*y,N=a*m,j=a*_,D=p*y,z=p*m,W=p*_;return t[0]=1-A-j,t[1]=M+W,t[2]=C-z,t[3]=0,t[4]=M-W,t[5]=1-x-j,t[6]=N+D,t[7]=0,t[8]=C+z,t[9]=N-D,t[10]=1-x-A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function AZ(t,e,i,r,a,p,y){const m=1/(i-e),_=1/(a-r),x=1/(p-y);return t[0]=2*p*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*p*_,t[6]=0,t[7]=0,t[8]=(i+e)*m,t[9]=(a+r)*_,t[10]=(y+p)*x,t[11]=-1,t[12]=0,t[13]=0,t[14]=y*p*2*x,t[15]=0,t}function kZ(t,e,i,r,a){const p=1/Math.tan(e/2);let y;return t[0]=p/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(y=1/(r-a),t[10]=(a+r)*y,t[14]=2*a*r*y):(t[10]=-1,t[14]=-2*r),t}function OZ(t,e,i,r){const a=Math.tan(e.upDegrees*Math.PI/180),p=Math.tan(e.downDegrees*Math.PI/180),y=Math.tan(e.leftDegrees*Math.PI/180),m=Math.tan(e.rightDegrees*Math.PI/180),_=2/(y+m),x=2/(a+p);return t[0]=_,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=-(y-m)*_*.5,t[9]=(a-p)*x*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function CZ(t,e,i,r,a,p,y){const m=1/(e-i),_=1/(r-a),x=1/(p-y);return t[0]=-2*m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*_,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*x,t[11]=0,t[12]=(e+i)*m,t[13]=(a+r)*_,t[14]=(y+p)*x,t[15]=1,t}function PZ(t,e,i,r){const a=e[0],p=e[1],y=e[2];let m=a-i[0],_=p-i[1],x=y-i[2];const M=an();if(Math.abs(m)<M&&Math.abs(_)<M&&Math.abs(x)<M)return void D1(t);let A=1/Math.sqrt(m*m+_*_+x*x);m*=A,_*=A,x*=A;const C=r[0],N=r[1],j=r[2];let D=N*x-j*_,z=j*m-C*x,W=C*_-N*m;A=Math.sqrt(D*D+z*z+W*W),A?(A=1/A,D*=A,z*=A,W*=A):(D=0,z=0,W=0);let Y=_*W-x*z,K=x*D-m*W,ee=m*z-_*D;A=Math.sqrt(Y*Y+K*K+ee*ee),A?(A=1/A,Y*=A,K*=A,ee*=A):(Y=0,K=0,ee=0),t[0]=D,t[1]=Y,t[2]=m,t[3]=0,t[4]=z,t[5]=K,t[6]=_,t[7]=0,t[8]=W,t[9]=ee,t[10]=x,t[11]=0,t[12]=-(D*a+z*p+W*y),t[13]=-(Y*a+K*p+ee*y),t[14]=-(m*a+_*p+x*y),t[15]=1}function NZ(t,e,i,r){const a=e[0],p=e[1],y=e[2],m=r[0],_=r[1],x=r[2];let M=a-i[0],A=p-i[1],C=y-i[2],N=M*M+A*A+C*C;N>0&&(N=1/Math.sqrt(N),M*=N,A*=N,C*=N);let j=_*C-x*A,D=x*M-m*C,z=m*A-_*M;return N=j*j+D*D+z*z,N>0&&(N=1/Math.sqrt(N),j*=N,D*=N,z*=N),t[0]=j,t[1]=D,t[2]=z,t[3]=0,t[4]=A*z-C*D,t[5]=C*j-M*z,t[6]=M*D-A*j,t[7]=0,t[8]=M,t[9]=A,t[10]=C,t[11]=0,t[12]=a,t[13]=p,t[14]=y,t[15]=1,t}function RZ(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function LZ(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function jZ(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function kC(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function DZ(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function FZ(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function zZ(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function VZ(t,e){if(t===e)return!0;const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],m=t[5],_=t[6],x=t[7],M=t[8],A=t[9],C=t[10],N=t[11],j=t[12],D=t[13],z=t[14],W=t[15],Y=e[0],K=e[1],ee=e[2],ne=e[3],oe=e[4],ue=e[5],ye=e[6],Se=e[7],Ce=e[8],Ne=e[9],Le=e[10],He=e[11],Pe=e[12],yt=e[13],yi=e[14],Nt=e[15],ut=an();return Math.abs(i-Y)<=ut*Math.max(1,Math.abs(i),Math.abs(Y))&&Math.abs(r-K)<=ut*Math.max(1,Math.abs(r),Math.abs(K))&&Math.abs(a-ee)<=ut*Math.max(1,Math.abs(a),Math.abs(ee))&&Math.abs(p-ne)<=ut*Math.max(1,Math.abs(p),Math.abs(ne))&&Math.abs(y-oe)<=ut*Math.max(1,Math.abs(y),Math.abs(oe))&&Math.abs(m-ue)<=ut*Math.max(1,Math.abs(m),Math.abs(ue))&&Math.abs(_-ye)<=ut*Math.max(1,Math.abs(_),Math.abs(ye))&&Math.abs(x-Se)<=ut*Math.max(1,Math.abs(x),Math.abs(Se))&&Math.abs(M-Ce)<=ut*Math.max(1,Math.abs(M),Math.abs(Ce))&&Math.abs(A-Ne)<=ut*Math.max(1,Math.abs(A),Math.abs(Ne))&&Math.abs(C-Le)<=ut*Math.max(1,Math.abs(C),Math.abs(Le))&&Math.abs(N-He)<=ut*Math.max(1,Math.abs(N),Math.abs(He))&&Math.abs(j-Pe)<=ut*Math.max(1,Math.abs(j),Math.abs(Pe))&&Math.abs(D-yt)<=ut*Math.max(1,Math.abs(D),Math.abs(yt))&&Math.abs(z-yi)<=ut*Math.max(1,Math.abs(z),Math.abs(yi))&&Math.abs(W-Nt)<=ut*Math.max(1,Math.abs(W),Math.abs(Nt))}function GZ(t){const e=an(),i=t[0],r=t[1],a=t[2],p=t[4],y=t[5],m=t[6],_=t[8],x=t[9],M=t[10];return Math.abs(1-(i*i+p*p+_*_))<=e&&Math.abs(1-(r*r+y*y+x*x))<=e&&Math.abs(1-(a*a+m*m+M*M))<=e}function qZ(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const UZ=MC,BZ=kC;Object.freeze(Object.defineProperty({__proto__:null,add:jZ,adjoint:lZ,copy:oZ,determinant:uZ,equals:VZ,exactEquals:zZ,frob:LZ,fromQuat:EZ,fromQuat2:_Z,fromRotation:gZ,fromRotationTranslation:AC,fromRotationTranslationScale:IZ,fromRotationTranslationScaleOrigin:MZ,fromScaling:mZ,fromTranslation:EC,fromXRotation:vZ,fromYRotation:bZ,fromZRotation:wZ,frustum:AZ,getRotation:TZ,getScaling:$Z,getTranslation:xZ,hasIdentityRotation:qZ,identity:D1,invert:IC,invertOrIdentity:aZ,isOrthoNormal:GZ,lookAt:PZ,mul:UZ,multiply:MC,multiplyScalar:DZ,multiplyScalarAndAdd:FZ,ortho:CZ,perspective:kZ,perspectiveFromFieldOfView:OZ,rotate:pZ,rotateX:dZ,rotateY:fZ,rotateZ:yZ,scale:cZ,set:zu,str:RZ,sub:BZ,subtract:kC,targetTo:NZ,translate:hZ,transpose:Za},Symbol.toStringTag,{value:"Module"}));let sw,re=null;function x6(){return!!re}function HZ(){return!!le("esri-wasm")}function OC(){return sw||(sw=we(()=>import("./pe-wasm-ad480551.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>Ot(`esri/geometry/support/${e}`)})).then(t=>{PC(t)}),sw)}var b9,li,w9;(function(t){function e(p,y,m){re.ensureCache.prepare();const _=Gh(m),x=m===_,M=re.ensureFloat64(_),A=re._pe_geog_to_proj(re.getPointer(p),y,M);return A&&ru(m,y,M,x),A}function i(p,y,m,_){switch(_){case li.PE_TRANSFORM_P_TO_G:return r(p,y,m);case li.PE_TRANSFORM_G_TO_P:return e(p,y,m)}return 0}function r(p,y,m){return a(p,y,m,0)}function a(p,y,m,_){re.ensureCache.prepare();const x=Gh(m),M=m===x,A=re.ensureFloat64(x),C=re._pe_proj_to_geog_center(re.getPointer(p),y,A,_);return C&&ru(m,y,A,M),C}t.geogToProj=e,t.projGeog=i,t.projToGeog=r,t.projToGeogCenter=a})(b9||(b9={})),function(t){function e(){t.PE_BUFFER_MAX=re.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=re.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=re.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=re.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=re.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=re.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=re.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=re.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=re.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=re.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=re.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=re.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=re.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=re.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=re.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=re.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=re.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=re.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=re.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=re.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=re.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=re.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=re.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=re.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=re.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=re.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=re.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=re.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=re.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=re.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(li||(li={})),function(t){const e={},i={},r=N=>{if(N){const j=N.getType();switch(j){case li.PE_TYPE_GEOGCS:N=re.castObject(N,re.PeGeogcs);break;case li.PE_TYPE_PROJCS:N=re.castObject(N,re.PeProjcs);break;case li.PE_TYPE_GEOGTRAN:N=re.castObject(N,re.PeGeogtran);break;default:j&li.PE_TYPE_UNIT&&(N=re.castObject(N,re.PeUnit))}}return N};function a(){re.PeFactory.prototype.initialize(null)}function p(N){return y(li.PE_TYPE_COORDSYS,N)}function y(N,j){let D=null,z=e[N];if(z||(z={},e[N]=z),z.hasOwnProperty(String(j)))D=z[j];else{const W=re.PeFactory.prototype.factoryByType(N,j);re.compare(W,re.NULL)||(D=W,z[j]=D)}return D=r(D),D}function m(N,j){let D=null,z=i[N];if(z||(z={},i[N]=z),z.hasOwnProperty(j))D=z[j];else{const W=re.PeFactory.prototype.fromString(N,j);re.compare(W,re.NULL)||(D=W,z[j]=D)}return D=r(D),D}function _(N){return y(li.PE_TYPE_GEOGCS,N)}function x(N){return y(li.PE_TYPE_GEOGTRAN,N)}function M(N){return re.PeFactory.prototype.getCode(N)}function A(N){return y(li.PE_TYPE_PROJCS,N)}function C(N){return y(li.PE_TYPE_UNIT,N)}t.initialize=a,t.coordsys=p,t.factoryByType=y,t.fromString=m,t.geogcs=_,t.geogtran=x,t.getCode=M,t.projcs=A,t.unit=C}(w9||(w9={}));let CC=null;var Sv,_9,S9,x9,xv,$9,$v,Tv,T9;function PC(t){function e(p,y,m){p[y]=m(p[y])}re=t,li.init(),Sv.init(),xv.init(),$v.init(),Tv.init(),CC=class extends re.PeGCSExtent{destroy(){re.destroy(this)}};const i=[re.PeDatum,re.PeGeogcs,re.PeGeogtran,re.PeObject,re.PeParameter,re.PePrimem,re.PeProjcs,re.PeSpheroid,re.PeUnit];for(const p of i)e(p.prototype,"getName",y=>function(){return y.call(this,new Array(li.PE_NAME_MAX))});for(const p of[re.PeGeogtran,re.PeProjcs])e(p.prototype,"getParameters",y=>function(){const m=new Array(li.PE_PARM_MAX);let _=y.call(this);for(let x=0;x<m.length;x++){const M=re.getValue(_,"*");m[x]=M?re.wrapPointer(M,re.PeParameter):null,_+=Int32Array.BYTES_PER_ELEMENT}return m});e(re.PeHorizon.prototype,"getCoord",p=>function(){const y=this.getSize();if(!y)return null;const m=[];return ru(m,y,p.call(this)),m}),e(re.PeGTlistExtendedEntry.prototype,"getEntries",p=>{const y=re._pe_getPeGTlistExtendedGTsSize();return function(){let m=null;const _=p.call(this);if(!re.compare(_,re.NULL)){m=[_];const x=this.getSteps();if(x>1){const M=re.getPointer(_);for(let A=1;A<x;A++)m.push(re.wrapPointer(M+y*A,re.PeGTlistExtendedGTs))}}return m}});const r=re._pe_getPeHorizonSize(),a=p=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(p))return y.get(p);let m=null;const _=p.call(this);if(!re.compare(_,re.NULL)){m=[_];const x=_.getNump();if(x>1){const M=re.getPointer(_);for(let A=1;A<x;A++)m.push(re.wrapPointer(M+r*A,re.PeHorizon))}}return y.set(p,m),m};e(re.PeProjcs.prototype,"horizonGcsGenerate",a),e(re.PeProjcs.prototype,"horizonPcsGenerate",a),re.PeObject.prototype.toString=function(p=li.PE_STR_OPTS_NONE){re.ensureCache.prepare();const y=re.getPointer(this),m=re.ensureInt8(new Array(li.PE_BUFFER_MAX));return re.UTF8ToString(re._pe_object_to_string_ext(y,p,m))}}function Qo(t){if(!t)return;const e=re.getClass(t);if(!e)return;const i=re.getCache(e);if(!i)return;const r=re.getPointer(t);r&&delete i[r]}function Cy(t,e){const i=[],r=new Array(e);for(let a=0;a<t;a++)i.push(re.ensureInt8(r));return i}function Gh(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function ru(t,e,i,r=!1){if(r)for(let a=0;a<2*e;a++)t[a]=re.getValue(i+a*Float64Array.BYTES_PER_ELEMENT,"double");else{const a=t.length===0;for(let p=0;p<e;p++)a&&(t[p]=new Array(2)),t[p][0]=re.getValue(i,"double"),t[p][1]=re.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=re.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=re._pe_getPeGTlistExtendedEntrySize()}function r(a,p,y,m,_,x){let M=null;const A=new re.PeInteger(x);try{const C=re.PeGTlistExtended.prototype.getGTlist(a,p,y,m,_,A);if((x=A.val)&&(M=[C],x>1)){const N=re.getPointer(C);for(let j=1;j<x;j++)M.push(re.wrapPointer(N+e*j,re.PeGTlistExtendedEntry))}}finally{re.destroy(A)}return M}t.init=i,t.getGTlist=r})(Sv||(Sv={})),function(t){function e(i){if(i&&i.length){for(const r of i)Qo(r),r.getEntries().forEach(a=>{Qo(a);const p=a.getGeogtran();Qo(p),p.getParameters().forEach(Qo),[p.getGeogcs1(),p.getGeogcs2()].forEach(y=>{Qo(y);const m=y.getDatum();Qo(m),Qo(m.getSpheroid()),Qo(y.getPrimem()),Qo(y.getUnit())})});re.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(_9||(_9={})),function(t){function e(i,r,a,p,y){re.ensureCache.prepare();const m=Gh(a),_=a===m,x=re.ensureFloat64(m);let M=0;p&&(M=re.ensureFloat64(p));const A=re._pe_geog_to_geog(re.getPointer(i),r,x,M,y);return A&&ru(a,r,x,_),A}t.geogToGeog=e}(S9||(S9={})),function(t){const e=(x,M,A,C,N,j)=>{let D,z;switch(re.ensureCache.prepare(),x){case"dd":D=re._pe_geog_to_dd,z=li.PE_DD_MAX;break;case"ddm":D=re._pe_geog_to_ddm,z=li.PE_DDM_MAX;break;case"dms":D=re._pe_geog_to_dms,z=li.PE_DMS_MAX}let W=0;M&&(W=re.getPointer(M));const Y=Gh(C),K=re.ensureFloat64(Y),ee=Cy(A,z),ne=D(W,A,K,N,re.ensureInt32(ee));if(ne)for(let oe=0;oe<A;oe++)j[oe]=re.UTF8ToString(ee[oe]);return ne},i=(x,M,A,C,N)=>{let j;switch(re.ensureCache.prepare(),x){case"dd":j=re._pe_dd_to_geog;break;case"ddm":j=re._pe_ddm_to_geog;break;case"dms":j=re._pe_dms_to_geog}let D=0;M&&(D=re.getPointer(M));const z=C.map(ee=>re.ensureString(ee)),W=re.ensureInt32(z),Y=re.ensureFloat64(new Array(2*A)),K=j(D,A,W,Y);return K&&ru(N,A,Y),K};function r(x,M,A,C,N){return e("dms",x,M,A,C,N)}function a(x,M,A,C){return i("dms",x,M,A,C)}function p(x,M,A,C,N){return e("ddm",x,M,A,C,N)}function y(x,M,A,C){return i("ddm",x,M,A,C)}function m(x,M,A,C,N){return e("dd",x,M,A,C,N)}function _(x,M,A,C){return i("dd",x,M,A,C)}t.geogToDms=r,t.dmsToGeog=a,t.geogToDdm=p,t.ddmToGeog=y,t.geogToDd=m,t.ddToGeog=_}(x9||(x9={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=re.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=re.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(a,p,y,m,_,x,M){re.ensureCache.prepare();let A=0;a&&(A=re.getPointer(a));const C=Gh(y),N=re.ensureFloat64(C),j=Cy(p,li.PE_MGRS_MAX),D=re.ensureInt32(j),z=re._pe_geog_to_mgrs_extended(A,p,N,m,_,x,D);if(z)for(let W=0;W<p;W++)M[W]=re.UTF8ToString(j[W]);return z}function r(a,p,y,m,_){re.ensureCache.prepare();let x=0;a&&(x=re.getPointer(a));const M=y.map(j=>re.ensureString(j)),A=re.ensureInt32(M),C=re.ensureFloat64(new Array(2*p)),N=re._pe_mgrs_to_geog_extended(x,p,A,m,C);return N&&ru(_,p,C),N}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=r}(xv||(xv={})),function(t){function e(r,a,p,y,m,_,x){re.ensureCache.prepare();let M=0;r&&(M=re.getPointer(r));const A=Gh(p),C=re.ensureFloat64(A),N=Cy(a,li.PE_MGRS_MAX),j=re.ensureInt32(N),D=re._pe_geog_to_usng(M,a,C,y,m,_,j);if(D)for(let z=0;z<a;z++)x[z]=re.UTF8ToString(N[z]);return D}function i(r,a,p,y){re.ensureCache.prepare();let m=0;r&&(m=re.getPointer(r));const _=p.map(C=>re.ensureString(C)),x=re.ensureInt32(_),M=re.ensureFloat64(new Array(2*a)),A=re._pe_usng_to_geog(m,a,x,M);return A&&ru(y,a,M),A}t.geogToUsng=e,t.usngToGeog=i}($9||($9={})),function(t){function e(){t.PE_UTM_OPTS_NONE=re.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=re.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=re.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(a,p,y,m,_){re.ensureCache.prepare();let x=0;a&&(x=re.getPointer(a));const M=Gh(y),A=re.ensureFloat64(M),C=Cy(p,li.PE_UTM_MAX),N=re.ensureInt32(C),j=re._pe_geog_to_utm(x,p,A,m,N);if(j)for(let D=0;D<p;D++)_[D]=re.UTF8ToString(C[D]);return j}function r(a,p,y,m,_){re.ensureCache.prepare();let x=0;a&&(x=re.getPointer(a));const M=y.map(j=>re.ensureString(j)),A=re.ensureInt32(M),C=re.ensureFloat64(new Array(2*p)),N=re._pe_utm_to_geog(x,p,A,m,C);return N&&ru(_,p,C),N}t.init=e,t.geogToUtm=i,t.utmToGeog=r}($v||($v={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=re.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=re.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=re.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=re.PePCSInfo.prototype.PE_POLE_POINT}function r(a,p=t.PE_PCSINFO_OPTION_DOMAIN){let y=null,m=null;return e.has(a)&&(m=e.get(a),m[p]&&(y=m[p])),y||(y=re.PePCSInfo.prototype.generate(a,p),m||(m=[],e.set(a,m)),m[p]=y),y}t.init=i,t.generate=r}(Tv||(Tv={})),function(t){function e(){return re.PeVersion.prototype.version_string()}t.versionString=e}(T9||(T9={}));const WZ=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return b9},get PeDefs(){return li},get PeFactory(){return w9},get PeGCSExtent(){return CC},get PeGTTransformations(){return S9},get PeGTlistExtended(){return Sv},get PeGTlistExtendedEntry(){return _9},get PeNotationDms(){return x9},get PeNotationMgrs(){return xv},get PeNotationUsng(){return $9},get PeNotationUtm(){return $v},get PePCSInfo(){return Tv},get PeVersion(){return T9},_init:PC,get _pe(){return re},isLoaded:x6,isSupported:HZ,load:OC},Symbol.toStringTag,{value:"Module"})),ul=qt.radius,gn=qt.eccentricitySquared,JZ={a1:ul*gn,a2:ul*gn*ul*gn,a3:ul*gn*gn/2,a4:ul*gn*ul*gn*2.5,a5:ul*gn+ul*gn*gn/2,a6:1-gn};1/294.9786982,1/298.257222101,qt.radius,qt.flattening,xu.radius,xu.flattening,1/192.0430107526882,Fa.radius,Fa.flattening,1/10.2079945799458,1/43.61604095563141,Fa.radius;let Py=0,nw=class I9{static fromGE(e){const i=new I9;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=Py++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=Py++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=Py++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=Py++}getInverse(){const e=new I9;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},Iv=class D0{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new D0;let r="";for(const a of e.steps){const p=nw.fromGE(a);i.steps.push(p),r+=p.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof nw?this.steps.push(i):this.steps.push(new nw({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new D0;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];e.steps.push(r.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,r){this._cachedProjection[D0.cacheKey(e,i)]=r}getCachedGeTransformation(e,i){let r="";for(const p of this.steps)r+=p.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const a=this._cachedProjection[D0.cacheKey(e,i)];return a===void 0?null:a}};function $6(t,e,i){if(e==null||i==null||i.vcsWkid||Ci(e,i))return null;const r=od(e)/od(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return a=>KZ(a,r);case"polyline":case"esriGeometryPolyline":return a=>ZZ(a,r);case"polygon":case"esriGeometryPolygon":return a=>YZ(a,r);case"multipoint":case"esriGeometryMultipoint":return a=>XZ(a,r);case"extent":case"esriGeometryEnvelope":return a=>QZ(a,r);default:return null}}function KZ(t,e){t&&t.z!=null&&(t.z*=e)}function YZ(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function ZZ(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function XZ(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function QZ(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Yn=null,Mu=null,Ef=null,Zm={};const NC=new b2;function Cc(){return!!Yn&&x6()}function Eu(t){return Ef==null&&(Ef=Promise.all([OC(),we(()=>Promise.resolve().then(()=>zoe),void 0).then(e=>e.g),we(()=>Promise.resolve().then(()=>Woe),void 0)])),Ef.then(([,e,{hydratedAdapter:i}])=>{Zt(t),Mu=i,Yn=e.default,Yn._enableProjection(WZ),NC.notify()})}function Vu(t,e,i=null,r=null){return Array.isArray(t)?t.length===0?[]:M9(Mu,t,t[0].spatialReference,e,i,r):M9(Mu,[t],t.spatialReference,e,i,r)[0]}function M9(t,e,i,r,a=null,p=null){if(i==null||r==null)return e;if(Ja(i,r,a))return e.map(y=>FC(y,i,r));if(a==null){const y=Iv.cacheKey(i,r);Zm[y]!==void 0?a=Zm[y]:((a=LC(i,r,void 0))==null&&(a=new Iv),Zm[y]=a)}if(Yn==null||t==null)throw new V2;return p!=null?Yn._project(t,e,i,r,a,p):Yn._project(t,e,i,r,a)}function eX(t,e){const i=RC([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function RC(t,e){if(!Cc()){for(const i of t)if(i!=null&&!Ci(i.spatialReference,e)&&sr(i.spatialReference)&&sr(e)&&!Ja(i.spatialReference,e))return Ze(NC),{pending:Eu(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Ci(i.spatialReference,e)?i:sr(i.spatialReference)&&sr(e)?jC(i,e):null)}}function LC(t,e,i=null){if(t==null||e==null)return null;if(Yn==null||Mu==null)throw new V2;const r=Yn._getTransformation(Mu,t,e,i,i==null?void 0:i.spatialReference);return r!==null?Iv.fromGE(r):null}function tX(t,e,i=null){if(Yn==null||Mu==null)throw new V2;const r=Yn._getTransformationBySuitability(Mu,t,e,i,i==null?void 0:i.spatialReference);if(r!==null){const a=[];for(const p of r)a.push(Iv.fromGE(p));return a}return[]}let V2=class extends ie{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};var X;function iX(){Yn=null,Mu=null,Ef=null,Zm={}}(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(X||(X={}));const rX={get loadPromise(){return Ef}};function jC(t,e){try{const i=Vu(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=$6(i.type,t.spatialReference,e);return r!=null&&r(i),i}catch(i){if(!(i instanceof V2))throw i;return null}}function Ja(t,e,i){return!i&&(!!Ci(t,e)||sr(t)&&sr(e)&&!!M6(t,e,A6))}async function DC(t,e,i,r){if(Cc())return Gg(r);if(Array.isArray(t)){for(const{source:a,dest:p,geographicTransformation:y}of t)if(!Ja(a,p,y))return Eu(r)}else if(!Ja(t,e,i))return Eu(r);return Gg(r)}function sX(t,e){switch(M6(t,e,A6)){case Ft:return"copy3";case uu:return"wgs84ToSphericalECEF";case wc:return"wgs84ToWebMercator";case lu:return"wgs84ToPlateCarree";case cu:return"wgs84ToWGS84ECEF";case nc:return"webMercatorToWGS84";case JC:return"webMercatorToSphericalECEF";case KC:return"webMercatorToWGS84ECEF";case ZC:return"webMercatorToPlateCarree";case pu:return"wgs84ECEFToWGS84";case eP:return"wgs84ECEFToSphericalECEF";case tP:return"wgs84ECEFToWebMercator";case hu:return"sphericalECEFToWGS84";case XC:return"sphericalECEFToWebMercator";case P9:return"sphericalMarsPCPFToMars2000";case C9:return"sphericalMoonPCPFToMoon2000";case QC:return"sphericalECEFToWGS84ECEF";case O9:return"mars2000ToSphericalPCPF";case k9:return"moon2000ToSphericalPCPF";default:return null}}function FC(t,e,i){return t?"x"in t?zC(t,e,new Ue,i,0):"xmin"in t?UC(t,e,new vt,i,0):"rings"in t?qC(t,e,new on,i,0):"paths"in t?GC(t,e,new _s,i,0):"points"in t?VC(t,e,new xd,i,0):null:null}function nX(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&zC(t,t.spatialReference,e,i,r)!=null}function zC(t,e,i,r,a){mt[0]=t.x,mt[1]=t.y;const p=t.z;return mt[2]=p!==void 0?p:a,Qn(mt,e,0,mt,r,0,1)?(i.x=mt[0],i.y=mt[1],i.spatialReference=r,p===void 0?(i.z=void 0,i.hasZ=!1):(i.z=mt[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function oX(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&VC(t,t.spatialReference,e,i,r)!=null}function VC(t,e,i,r,a){const{points:p,hasZ:y,hasM:m}=t,_=[],x=p.length,M=[];for(const A of p)M.push(A[0],A[1],y?A[2]:a);if(!Qn(M,e,0,M,r,0,x))return null;for(let A=0;A<x;++A){const C=3*A,N=M[C],j=M[C+1];y&&m?_.push([N,j,M[C+2],p[A][3]]):y?_.push([N,j,M[C+2]]):m?_.push([N,j,p[A][2]]):_.push([N,j])}return i.points=_,i.spatialReference=r,i.hasZ=y,i.hasM=m,i}function aX(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&GC(t,t.spatialReference,e,i,r)!=null}function GC(t,e,i,r,a){const{paths:p,hasZ:y,hasM:m}=t,_=[];return HC(p,y??!1,m??!1,e,_,r,a)?(i.paths=_,i.spatialReference=r,i.hasZ=y,i.hasM=m,i):null}function lX({hasZ:t,spatialReference:e,paths:i},r,a=0){const p=Uo(e,Pd),y=Xs[p][X.WGS84_COMPARABLE_LON_LAT];if(y==null)return!1;const m=t?_=>_:_=>A2(mt,_[0],_[1],a);for(const _ of i){const x=[];for(const M of _){const A=[0,0,a];y(m(M),0,A,0),x.push(A)}r.push(x)}return!0}function uX({hasZ:t,spatialReference:e,rings:i},r,a=0){const p=Uo(e,Pd),y=Xs[p][X.WGS84_COMPARABLE_LON_LAT];if(y==null)return!1;const m=t?_=>_:_=>A2(mt,_[0],_[1],a);for(const _ of i){const x=[];for(const M of _){const A=[0,0,a];y(m(M),0,A,0),x.push(A)}r.push(x)}return!0}function hX(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&qC(t,t.spatialReference,e,i,r)!=null}function qC(t,e,i,r,a){const{rings:p,hasZ:y,hasM:m}=t,_=[];return HC(p,y??!1,m??!1,e,_,r,a)?(i.rings=_,i.spatialReference=r,i.hasZ=y,i.hasM=m,i):null}function cX(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&UC(t,t.spatialReference,e,i,r)!=null}function UC(t,e,i,r,a){const{xmin:p,ymin:y,xmax:m,ymax:_,hasZ:x,hasM:M}=t;return E9(p,y,x?t.zmin:a,e,mt,r)?(i.xmin=mt[0],i.ymin=mt[1],x&&(i.zmin=mt[2]),E9(m,_,x?t.zmax:a,e,mt,r)?(i.xmax=mt[0],i.ymax=mt[1],x&&(i.zmax=mt[2]),M&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null):null}function pX(t,e,i){if(e==null||i==null)return null;const r=new Ue({spatialReference:i});return Qn(t,e,0,mt,i,0,1)?(r.x=mt[0],r.y=mt[1],r.z=mt[2],r):null}function dX(t,e,i){return Qn(t,e,0,mt,i.spatialReference,0,1)?(i.x=mt[0],i.y=mt[1],i.z=mt[2],i):null}function fX(t,e,i,r=0){mt[0]=t.x,mt[1]=t.y;const a=t.z;return mt[2]=a!==void 0?a:r,Qn(mt,t.spatialReference,0,e,i,0,1)}function E9(t,e,i,r,a,p){return Yt[0]=t,Yt[1]=e,Yt[2]=i,Qn(Yt,r,0,a,p,0,1)}function A9(t,e,i,r){return!(e==null||r==null||t.length<2)&&(t.length===2&&(Yt[0]=t[0],Yt[1]=t[1],Yt[2]=0,t=Yt),Qn(t,e,0,i,r,0,1))}function yX(t,e){mt[0]=t.x,mt[1]=t.y;const i=t.z;return mt[2]=i!==void 0?i:0,BC(mt,t.spatialReference,e)}function BC(t,e,i){return mX(t,e,i)}function mX(t,e,i){if(e==null)return!1;const r=Uo(e,Pd),a=Xs[r][X.WGS84_COMPARABLE_LON_LAT];return a!=null&&(a(t,0,Yt,0),i!==Yt&&(i[0]=Yt[0],i[1]=Yt[1],i.length>2&&(i[2]=Yt[2])),!0)}function Qn(t,e,i,r,a,p,y=1){const m=M6(e,a,A6);if(m==null)return!1;if(m===Ft){if(t===r&&i===p)return!0;const x=i+3*y;for(let M=i,A=p;M<x;M++,A++)r[A]=t[M];return!0}const _=i+3*y;for(let x=i,M=p;x<_;x+=3,M+=3)m(t,x,r,M);return!0}function gX(t,e,i,r,a){av(mt,t),kA(Ny,t,e),A9(mt,i,mt,a),A9(Ny,i,Ny,a),jS(r,Ny,mt),lv(r,r)}function HC(t,e,i,r,a,p,y=0){const m=new Array;for(const x of t)for(const M of x)m.push(M[0],M[1],e?M[2]:y);if(!Qn(m,r,0,m,p,0,m.length/3))return!1;let _=0;a.length=0;for(const x of t){const M=new Array;for(const A of x)e&&i?M.push([m[_++],m[_++],m[_++],A[3]]):e?M.push([m[_++],m[_++],m[_++]]):i?(M.push([m[_++],m[_++],A[2]]),_++):(M.push([m[_++],m[_++]]),_++);a.push(M)}return!0}function vX(t,e,i,r){if(e==null||r==null)return!1;const a=iP(e,r,kX);if(a.projector===Ft)return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],!0;if(a.projector==null)return!1;const{source:p,dest:y}=a;if(y.spatialReferenceId===X.WEB_MERCATOR){const m=Xs[p.spatialReferenceId][X.WGS84];return m!=null&&(m(t,0,Dn,0),wc(Dn,0,i,0),i[3]=q8(Dn[1],t[2],t[3],qt.radius),!0)}if(p.spatialReferenceId!==X.WGS84&&p.spatialReferenceId!==X.CGCS2000||y.spatialReferenceId!==X.PLATE_CARREE){a.projector(t,0,i,0);const m=p.metersPerUnit??1,_=y.metersPerUnit??1;i[3]=t[3]*m/_}else{const m=Xs[p.spatialReferenceId][X.SPHERICAL_ECEF],_=Xs[X.SPHERICAL_ECEF][X.PLATE_CARREE];let x=t[3];m!=null&&_!=null&&(x=q8(t[1],t[2],t[3],qt.radius)),a.projector(t,0,i,0),i[3]=x}return!0}function q8(t,e,i,r){const a=r+e;if(a<r/2||i>a)return Number.MAX_VALUE;const p=Math.abs(Bn*t)+Math.asin(i/a);return p>=Math.PI/2?Number.MAX_VALUE:i/Math.cos(p)}function bX(t,e,i,r){return t!=null&&(Ci(e,r)?(zS(i,t),!0):(Yt[0]=t[0],Yt[1]=t[1],Yt[2]=0,!!Qn(Yt,e,0,Yt,r,0,1)&&(i[0]=Yt[0],i[1]=Yt[1],Yt[0]=t[2],Yt[1]=t[3],Yt[2]=0,!!Qn(Yt,e,0,Yt,r,0,1)&&(i[2]=Yt[0],i[3]=Yt[1],!0))))}function wX(t,e,i,r){if(e==null||r==null)return!1;const a=Uo(e,Pd),p=Uo(r,rP);if(a===p&&a!==X.UNKNOWN||Ci(e,r))return i[0]=1,i[1]=1,i[2]=1,!0;if(a===X.SPHERICAL_ECEF){const y=E2(t),m=y/Math.sqrt(t[0]*t[0]+t[1]*t[1]),_=y/qt.radius;if(p===X.WEB_MERCATOR)return i[0]=m*_,i[1]=m*_,i[2]=1,!0;if(p===X.WGS84||p===X.CGCS2000){const x=Af;return i[0]=x*m*_,i[1]=x*_,i[2]=1,!0}}else if(a===X.PLATE_CARREE){if(p===X.WGS84||p===X.CGCS2000)return i[0]=Af,i[1]=Af,i[2]=1,!0;if(p===X.WEB_MERCATOR){const y=t[1]/qt.radius;return i[0]=1,i[1]=1/Math.cos(y),i[2]=1,!0}}return!1}function _X(t,e,i,r){if(t==null||r==null)return!1;const a=Uo(t,Pd),p=Uo(r,rP);if(a===p&&!U8(p)&&(a!==X.UNKNOWN||Ci(t,r)))return EC(i,e),!0;if(U8(p)){const y=Xs[a][X.LON_LAT],m=Xs[X.LON_LAT][p];return y!=null&&m!=null&&(y(e,0,Dn,0),m(Dn,0,hl,0),T6(Bn*Dn[0],Bn*Dn[1],i),i[12]=hl[0],i[13]=hl[1],i[14]=hl[2],!0)}if((p===X.WEB_MERCATOR||p===X.PLATE_CARREE)&&(a===X.WGS84||a===X.CGCS2000&&p===X.PLATE_CARREE||a===X.SPHERICAL_ECEF||a===X.WEB_MERCATOR)){const y=Xs[a][X.LON_LAT],m=Xs[X.LON_LAT][p];return y!=null&&m!=null&&(y(e,0,Dn,0),m(Dn,0,hl,0),a===X.SPHERICAL_ECEF?WC(Bn*Dn[0],Bn*Dn[1],i):D1(i),i[12]=hl[0],i[13]=hl[1],i[14]=hl[2],!0)}return!1}function U8(t){return t===X.SPHERICAL_ECEF||t===X.SPHERICAL_MARS_PCPF||t===X.SPHERICAL_MOON_PCPF}function T6(t,e,i){const r=Math.sin(t),a=Math.cos(t),p=Math.sin(e),y=Math.cos(e),m=i;return m[0]=-r,m[4]=-p*a,m[8]=y*a,m[12]=0,m[1]=a,m[5]=-p*r,m[9]=y*r,m[13]=0,m[2]=0,m[6]=y,m[10]=p,m[14]=0,m[3]=0,m[7]=0,m[11]=0,m[15]=1,m}function WC(t,e,i){return T6(t,e,i),Za(i,i),i}function Uo(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Jo(t,1)),t.wkt===gG.wkt?e.spatialReferenceId=X.SPHERICAL_ECEF:Yf(t)?e.spatialReferenceId=X.WGS84:dc(t)?e.spatialReferenceId=X.WEB_MERCATOR:pG(t)?e.spatialReferenceId=X.PLATE_CARREE:t.wkt===vG.wkt?e.spatialReferenceId=X.WGS84_ECEF:t.wkid===pc.CGCS2000?e.spatialReferenceId=X.CGCS2000:t.wkt===XE.wkt?e.spatialReferenceId=X.SPHERICAL_MARS_PCPF:t.wkt===QE.wkt?e.spatialReferenceId=X.SPHERICAL_MOON_PCPF:xS(t)?e.spatialReferenceId=X.GCSMARS2000:TS(t)?e.spatialReferenceId=X.GCSMOON2000:e.spatialReferenceId=X.UNKNOWN):X.UNKNOWN}function Ft(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function nc(t,e,i,r){i[r++]=dd*(t[e++]/qt.radius),i[r++]=dd*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/qt.radius))),i[r]=t[e]}function JC(t,e,i,r){nc(t,e,i,r),uu(i,r,i,r)}function KC(t,e,i,r){nc(t,e,i,r),cu(i,r,i,r)}function YC(t,e,i,r,a){const p=.4999999*Math.PI,y=nn(Bn*t[e+1],-p,p),m=Math.sin(y);i[r++]=Bn*t[e]*a.radius,i[r++]=a.halfSemiMajorAxis*Math.log((1+m)/(1-m)),i[r]=t[e+2]}function wc(t,e,i,r){YC(t,e,i,r,qt)}const B8=qt.radius*Math.PI/180,Af=180/(qt.radius*Math.PI);function lu(t,e,i,r){i[r]=t[e]*B8,i[r+1]=t[e+1]*B8,i[r+2]=t[e+2]}function Qh(t,e,i,r){i[r]=t[e]*Af,i[r+1]=t[e+1]*Af,i[r+2]=t[e+2]}function ZC(t,e,i,r){nc(t,e,i,r),lu(i,r,i,r)}function SX(t,e,i,r){pu(t,e,i,r),lu(i,r,i,r)}function xX(t,e,i,r){hu(t,e,i,r),lu(i,r,i,r)}function $X(t,e,i,r){Qh(t,e,i,r),uu(i,r,i,r)}function TX(t,e,i,r){Qh(t,e,i,r),wc(i,r,i,r)}function IX(t,e,i,r){Qh(t,e,i,r),cu(i,r,i,r)}function MX(t){if(t==null)return!1;const e=Uo(t,Pd);return!!Xs[e][X.WGS84_COMPARABLE_LON_LAT]}function EX(t,e,i,r){const a=Math.cos(i);t[0]=Math.cos(e)*a*r,t[1]=Math.sin(e)*a*r,t[2]=Math.sin(i)*r}function I6(t,e,i,r,a){const p=a+t[e+2],y=Bn*t[e+1],m=Bn*t[e],_=Math.cos(y);i[r++]=Math.cos(m)*_*p,i[r++]=Math.sin(m)*_*p,i[r]=Math.sin(y)*p}function k9(t,e,i,r){I6(t,e,i,r,xu.radius)}function O9(t,e,i,r){I6(t,e,i,r,Fa.radius)}function uu(t,e,i,r){I6(t,e,i,r,qt.radius)}function G2(t,e,i,r,a){const p=t[e],y=t[e+1],m=t[e+2],_=Math.sqrt(p*p+y*y+m*m),x=WA(m/(_===0?1:_)),M=Math.atan2(y,p);i[r++]=dd*M,i[r++]=dd*x,i[r]=_-a}function C9(t,e,i,r){G2(t,e,i,r,xu.radius)}function P9(t,e,i,r){G2(t,e,i,r,Fa.radius)}function hu(t,e,i,r){G2(t,e,i,r,qt.radius)}function XC(t,e,i,r){hu(t,e,i,r),wc(i,r,i,r)}function QC(t,e,i,r){hu(t,e,i,r),cu(i,r,i,r)}function AX(t,e,i,r,a){const p=Bn*t[e],y=Bn*t[e+1],m=t[e+2],_=Math.sin(y),x=Math.cos(y),M=a.radius/Math.sqrt(1-a.eccentricitySquared*_*_);i[r++]=(M+m)*x*Math.cos(p),i[r++]=(M+m)*x*Math.sin(p),i[r++]=(M*(1-a.eccentricitySquared)+m)*_}function cu(t,e,i,r){AX(t,e,i,r,qt)}function pu(t,e,i,r){const a=JZ,p=t[e],y=t[e+1],m=t[e+2];let _,x,M,A,C,N,j,D,z,W,Y,K,ee,ne,oe,ue,ye,Se,Ce,Ne,Le;_=Math.abs(m),x=p*p+y*y,M=Math.sqrt(x),A=x+m*m,C=Math.sqrt(A),Ne=Math.atan2(y,p),N=m*m/A,j=x/A,ne=a.a2/C,oe=a.a3-a.a4/C,j>.3?(D=_/C*(1+j*(a.a1+ne+N*oe)/C),Ce=Math.asin(D),W=D*D,z=Math.sqrt(1-W)):(z=M/C*(1-N*(a.a5-ne-j*oe)/C),Ce=Math.acos(z),W=1-z*z,D=Math.sqrt(W)),Y=1-qt.eccentricitySquared*W,K=qt.radius/Math.sqrt(Y),ee=a.a6*K,ne=M-K*z,oe=_-ee*D,ye=z*ne+D*oe,ue=z*oe-D*ne,Se=ue/(ee/Y+ye),Ce+=Se,Le=ye+ue*Se/2,m<0&&(Ce=-Ce),i[r++]=dd*Ne,i[r++]=dd*Ce,i[r]=Le}function eP(t,e,i,r){pu(t,e,i,r),uu(i,r,i,r)}function tP(t,e,i,r){pu(t,e,i,r),wc(i,r,i,r)}const Xs={[X.WGS84]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Ft,[X.WGS84_COMPARABLE_LON_LAT]:Ft,[X.SPHERICAL_ECEF]:uu,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:wc,[X.PLATE_CARREE]:lu,[X.WGS84]:Ft,[X.WGS84_ECEF]:cu},[X.CGCS2000]:{[X.CGCS2000]:Ft,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Ft,[X.WGS84_COMPARABLE_LON_LAT]:Ft,[X.SPHERICAL_ECEF]:uu,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:lu,[X.WGS84]:null,[X.WGS84_ECEF]:cu},[X.GCSMARS2000]:{[X.CGCS2000]:null,[X.GCSMARS2000]:Ft,[X.GCSMOON2000]:null,[X.LON_LAT]:Ft,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:O9,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.GCSMOON2000]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:Ft,[X.LON_LAT]:Ft,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:k9,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.WEB_MERCATOR]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:nc,[X.WGS84_COMPARABLE_LON_LAT]:nc,[X.SPHERICAL_ECEF]:JC,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:Ft,[X.PLATE_CARREE]:ZC,[X.WGS84]:nc,[X.WGS84_ECEF]:KC},[X.WGS84_ECEF]:{[X.CGCS2000]:pu,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:pu,[X.WGS84_COMPARABLE_LON_LAT]:pu,[X.SPHERICAL_ECEF]:eP,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:tP,[X.PLATE_CARREE]:SX,[X.WGS84]:pu,[X.WGS84_ECEF]:Ft},[X.SPHERICAL_ECEF]:{[X.CGCS2000]:hu,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:hu,[X.WGS84_COMPARABLE_LON_LAT]:hu,[X.SPHERICAL_ECEF]:Ft,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:XC,[X.PLATE_CARREE]:xX,[X.WGS84]:hu,[X.WGS84_ECEF]:QC},[X.SPHERICAL_MARS_PCPF]:{[X.CGCS2000]:null,[X.GCSMARS2000]:P9,[X.GCSMOON2000]:null,[X.LON_LAT]:P9,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:Ft,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.SPHERICAL_MOON_PCPF]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:C9,[X.LON_LAT]:C9,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:Ft,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.UNKNOWN]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:null,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:Ft,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.LON_LAT]:{[X.CGCS2000]:Ft,[X.GCSMARS2000]:Ft,[X.GCSMOON2000]:Ft,[X.LON_LAT]:Ft,[X.WGS84_COMPARABLE_LON_LAT]:Ft,[X.SPHERICAL_ECEF]:uu,[X.SPHERICAL_MARS_PCPF]:O9,[X.SPHERICAL_MOON_PCPF]:k9,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:wc,[X.PLATE_CARREE]:lu,[X.WGS84]:Ft,[X.WGS84_ECEF]:cu},[X.WGS84_COMPARABLE_LON_LAT]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Ft,[X.WGS84_COMPARABLE_LON_LAT]:Ft,[X.SPHERICAL_ECEF]:uu,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:lu,[X.WGS84]:Ft,[X.WGS84_ECEF]:cu},[X.PLATE_CARREE]:{[X.CGCS2000]:Qh,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Qh,[X.WGS84_COMPARABLE_LON_LAT]:Qh,[X.SPHERICAL_ECEF]:$X,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:TX,[X.PLATE_CARREE]:Ft,[X.WGS84]:Qh,[X.WGS84_ECEF]:IX}};function M6(t,e,i=E6()){return t==null||e==null?null:iP(t,e,i).projector}function iP(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const r=Uo(t,i.source),a=Uo(e,i.dest);return r===X.UNKNOWN&&a===X.UNKNOWN?Ci(t,e)?i.projector=Ft:i.projector=null:i.projector=Xs[r][a],i}function E6(){return{source:{spatialReference:null,spatialReferenceId:X.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:X.UNKNOWN,metersPerUnit:1},projector:Ft}}const Pd={spatialReference:null,spatialReferenceId:X.UNKNOWN},rP={spatialReference:null,spatialReferenceId:X.UNKNOWN},A6=E6(),kX=E6(),Bn=$B(1),dd=HA(1),Yt=ro(),Dn=ro(),hl=ro(),mt=ro(),Ny=ro(),Oge=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:MX,canProjectWithoutEngine:Ja,computeENUToSphericalPCPFLocalRotation:T6,computeSphericalPCPFToENULocalRotation:WC,computeTranslationToOriginAndRotation:_X,getProjectorName:sX,getTransformation:LC,getTransformations:tX,initializeProjection:DC,isLoaded:Cc,load:Eu,localLinearScaleFactors:wX,lonLatToSphericalPCPF:EX,lonLatToWebMercatorComparable:YC,project:Vu,projectBoundingRect:bX,projectBoundingSphere:vX,projectBuffer:Qn,projectDirection:gX,projectExtent:cX,projectMany:M9,projectMultipoint:oX,projectOrLoad:eX,projectOrLoadMany:RC,projectPoint:nX,projectPointToVector:fX,projectPointToWGS84ComparableLonLat:yX,projectPolygon:hX,projectPolygonToWGS84ComparableLonLat:uX,projectPolyline:aX,projectPolylineToWGS84ComparableLonLat:lX,projectVectorToDehydratedPoint:dX,projectVectorToPoint:pX,projectVectorToVector:A9,projectVectorToWGS84ComparableLonLat:BC,projectWithoutEngine:FC,projectXYZToVector:E9,sphericalPCPFtoLonLatElevation:G2,test:rX,tryProjectWithZConversion:jC,unload:iX},Symbol.toStringTag,{value:"Module"}));var N9;let _o=N9=class extends de{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new N9({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};v([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_o.prototype,"cols",void 0),v([S({type:jt,json:{write:!0}})],_o.prototype,"level",void 0),v([S({type:String,json:{write:!0}})],_o.prototype,"levelValue",void 0),v([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_o.prototype,"origin",void 0),v([S({type:Number,json:{write:!0}})],_o.prototype,"resolution",void 0),v([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],_o.prototype,"rows",void 0),v([S({type:Number,json:{write:!0}})],_o.prototype,"scale",void 0),_o=N9=v([B("esri.layers.support.LOD")],_o);const Kl=_o;let sP=class{constructor(e,i,r,a,p=void 0){this.id=e,this.level=i,this.row=r,this.col=a,this.extent=p}};var Al;const H8=new ft({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let hr=Al=class extends de{static create(t={}){const{resolutionFactor:e=1,scales:i,size:r=256,spatialReference:a=Je.WebMercator,numLODs:p=24}=t;if(!sr(a)){const A=[];if(i)for(let C=0;C<i.length;C++){const N=i[C];A.push(new Kl({level:C,scale:N,resolution:N}))}else{let C=5e-4;for(let N=p-1;N>=0;N--)A.unshift(new Kl({level:N,scale:C,resolution:C})),C*=2}return new Al({dpi:96,lods:A,origin:new Ue(0,0,a),size:[r,r],spatialReference:a})}const y=Jn(a),m=t.origin?new Ue({x:t.origin.x,y:t.origin.y,spatialReference:a}):new Ue(y?{x:y.origin[0],y:y.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),_=96,x=1/(Jo(a)*39.37*_),M=[];if(i)for(let A=0;A<i.length;A++){const C=i[A],N=C*x;M.push(new Kl({level:A,scale:C,resolution:N}))}else{let A=ZE(a)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const C=Math.ceil(p/e);M.push(new Kl({level:0,scale:A,resolution:A*x}));for(let N=1;N<C;N++){const j=A/2**e,D=j*x;M.push(new Kl({level:N,scale:j,resolution:D})),A=j}}return new Al({dpi:_,lods:M,origin:m,size:[r,r],spatialReference:a})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=Jn(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return Ue.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],a=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(p=>{r.push(p.scale),e=p.scale>e?p.scale:e,i=p.scale<i?p.scale:i,a[p.level]=p})),this._set("scales",r),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const a=e[r],p=e[r+1];if(a<=t)return r;if(p===t)return r+1;if(a>t&&p<t)return r+Math.log(a/t)/Math.log(a/p)}return r}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,r){const a=this.lodAt(t);if(!a)return null;let p,y;if(typeof e=="number")p=e,y=i;else if(Ci(e.spatialReference,this.spatialReference))p=e.x,y=e.y,r=i;else{const x=T2(e,this.spatialReference);if(x==null)return null;p=x.x,y=x.y,r=i}const m=a.resolution*this.size[0],_=a.resolution*this.size[1];return r||(r=new sP(null,0,0,0,Vo())),r.level=t,r.row=Math.floor((this.origin.y-y)/_+.001),r.col=Math.floor((p-this.origin.x)/m+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=Al.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===Al.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<t.level&&(i=y)}if(!i)return;const r=t.level-i.level,a=i.resolution*this.size[0]/2**r,p=i.resolution*this.size[1]/2**r;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=Vo()),t.extent[0]=this.origin.x+t.col*a,t.extent[1]=this.origin.y-(t.row+1)*p,t.extent[2]=t.extent[0]+a,t.extent[3]=t.extent[1]+p}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:r}=i,a=r*this.size[0],p=r*this.size[1];return t[0]=this.origin.x+e.col*a,t[1]=this.origin.y-(e.row+1)*p,t[2]=t[0]+a,t[3]=t[1]+p,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return Al.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],r=this.lods.length;for(let a=0;a<r;a++){const p=this.lods[a],y=p.resolution*e;i.push(new Kl({level:p.level,scale:p.scale,resolution:y}))}return new Al({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};v([S({type:Number,json:{write:!0}})],hr.prototype,"compressionQuality",void 0),v([S({type:Number,json:{write:!0}})],hr.prototype,"dpi",void 0),v([S({type:String,json:{read:H8.read,write:H8.write,origins:{"web-scene":{read:!1,write:!1}}}})],hr.prototype,"format",void 0),v([S({readOnly:!0})],hr.prototype,"isWrappable",null),v([S({type:Ue,json:{write:!0}})],hr.prototype,"origin",void 0),v([ge("origin")],hr.prototype,"readOrigin",null),v([S({type:[Kl],value:null,json:{write:!0}})],hr.prototype,"lods",null),v([S({readOnly:!0})],hr.prototype,"scales",void 0),v([S({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],hr.prototype,"size",void 0),v([ge("size",["rows","cols"])],hr.prototype,"readSize",null),v([$e("size",{cols:{type:jt},rows:{type:jt}})],hr.prototype,"writeSize",null),v([S({type:Je,json:{write:!0}})],hr.prototype,"spatialReference",void 0),hr=Al=v([B("esri.layers.support.TileInfo")],hr),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(hr||(hr={}));const R9=hr,Xm={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],a=this.values;return r>=i?a.portrait:a.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},ow={xsmall:544,small:768,medium:992,large:1200};function OX(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function aw(t,e){return e?Xm[t].valueToClassName[e].split(" "):[]}const CX=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new Ho,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=ow}initialize(){this._breakpointsHandles.add(Ee(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),St))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Wt(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=OX(i);if(!r){const a=JSON.stringify(ow,null,2);console.warn("provided breakpoints are not valid, using defaults:"+a)}i=r?i:ow,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=Ur.acquire(),r=Ur.acquire();let a,p=!1;for(a in Xm){const y=this[a],m=Xm[a].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==m&&(p=!0,this[a]=m,aw(a,y).forEach(_=>r.push(_)),aw(a,m).forEach(_=>i.push(_)))}p&&(this._applyClassNameChanges(i,r),Ur.release(i),Ur.release(r))}_applyClassNameChanges(i,r){const a=this.container;a&&(r.forEach(p=>a.classList.remove(p)),i.forEach(p=>a.classList.add(p)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in Xm)aw(r,this[r]).forEach(a=>i.classList.remove(a))}};return v([S()],e.prototype,"breakpoints",null),v([S()],e.prototype,"orientation",void 0),v([S()],e.prototype,"widthBreakpoint",void 0),v([S()],e.prototype,"heightBreakpoint",void 0),e=v([B("esri.views.BreakpointsOwner")],e),e};function k6(t){return typeof t=="string"?document.getElementById(t):t??null}function nP(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function W8(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function J8(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Jp=class extends je{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Ho,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,r={}){return this._installWatch(e,i,r,Ee)}addWhen(e,i,r={}){return this._installWatch(e,i,r,qo)}addOnCollectionChange(e,i,{initial:r=!1,final:a=!1}={}){const p=++this._handleId;return this._handles.add([Tu(e,"after-changes",this._createSyncUpdatingCallback(),Cd),Tu(e,"change",i,{onListenerAdd:r?y=>i({added:y.toArray(),removed:[]}):void 0,onListenerRemove:a?y=>i({added:[],removed:y.toArray()}):void 0})],p),jo(()=>this._handles.remove(p))}addPromise(e){if(e==null)return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(Ry)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this._handles.remove(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,r={},a){const p=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,p);const y=a(e,i,r);return this._handles.add(y,p),jo(()=>this._handles.remove(p))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),a=Ee(e,r,{sync:!0,equals:()=>!1});return this._handles.add(a,i),a}_createSyncUpdatingCallback(){return()=>{this._handles.remove(Ry),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(wd(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(Ry))}),Ry)}}};v([S({readOnly:!0})],Jp.prototype,"updating",void 0),Jp=v([B("esri.core.support.WatchUpdatingTracking")],Jp);const Ry=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var PX=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},qh={exports:{}},Si={},a1={exports:{}},Pc={};function oP(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function NX(t,e,i){}function RX(t,e,i){}var LX=/javascript\s*\:/img;function jX(t,e){return LX.test(e)?"":e}Pc.whiteList=oP();Pc.getDefaultWhiteList=oP;Pc.onAttr=NX;Pc.onIgnoreAttr=RX;Pc.safeAttrValue=jX;var DX={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,a;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,a=t.length;r<a;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},e0=DX;function FX(t,e){t=e0.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,a=0,p=0,y="";function m(){if(!r){var M=e0.trim(t.slice(a,p)),A=M.indexOf(":");if(A!==-1){var C=e0.trim(M.slice(0,A)),N=e0.trim(M.slice(A+1));if(C){var j=e(a,y.length,C,N,M);j&&(y+=j+"; ")}}}a=p+1}for(;p<i;p++){var _=t[p];if(_==="/"&&t[p+1]==="*"){var x=t.indexOf("*/",p+2);if(x===-1)break;p=x+1,a=p+1,r=!1}else _==="("?r=!0:_===")"?r=!1:_===";"?r||m():_===`
`&&m()}return e0.trim(y)}var zX=FX,Ly=Pc,VX=zX;function K8(t){return t==null}function GX(t){var e={};for(var i in t)e[i]=t[i];return e}function aP(t){t=GX(t||{}),t.whiteList=t.whiteList||Ly.whiteList,t.onAttr=t.onAttr||Ly.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Ly.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Ly.safeAttrValue,this.options=t}aP.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,a=i.onAttr,p=i.onIgnoreAttr,y=i.safeAttrValue,m=VX(t,function(_,x,M,A,C){var N=r[M],j=!1;if(N===!0?j=N:typeof N=="function"?j=N(A):N instanceof RegExp&&(j=N.test(A)),j!==!0&&(j=!1),A=y(M,A),!!A){var D={position:x,sourcePosition:_,source:C,isWhite:j};if(j){var z=a(M,A,D);return K8(z)?M+":"+A:z}else{var z=p(M,A,D);if(!K8(z))return z}}});return m};var qX=aP;(function(t,e){var i=Pc,r=qX;function a(y,m){var _=new r(m);return _.process(y)}e=t.exports=a,e.FilterCSS=r;for(var p in i)e[p]=i[p]})(a1,a1.exports);var O6={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,a;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,a=t.length;r<a;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},UX=a1.exports.FilterCSS,BX=a1.exports.getDefaultWhiteList,Mv=O6;function lP(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var uP=new UX;function HX(t,e,i){}function WX(t,e,i){}function JX(t,e,i){}function KX(t,e,i){}function hP(t){return t.replace(ZX,"&lt;").replace(XX,"&gt;")}function YX(t,e,i,r){if(i=mP(i),e==="href"||e==="src"){if(i=Mv.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(jy.lastIndex=0,jy.test(i))return""}else if(e==="style"){if(Y8.lastIndex=0,Y8.test(i)||(Z8.lastIndex=0,Z8.test(i)&&(jy.lastIndex=0,jy.test(i))))return"";r!==!1&&(r=r||uP,i=r.process(i))}return i=gP(i),i}var ZX=/</g,XX=/>/g,QX=/"/g,eQ=/&quot;/g,tQ=/&#([a-zA-Z0-9]*);?/gim,iQ=/&colon;?/gim,rQ=/&newline;?/gim,jy=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Y8=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Z8=/u\s*r\s*l\s*\(.*/gi;function cP(t){return t.replace(QX,"&quot;")}function pP(t){return t.replace(eQ,'"')}function dP(t){return t.replace(tQ,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function fP(t){return t.replace(iQ,":").replace(rQ," ")}function yP(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return Mv.trim(e)}function mP(t){return t=pP(t),t=dP(t),t=fP(t),t=yP(t),t}function gP(t){return t=cP(t),t=hP(t),t}function sQ(){return""}function nQ(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(y){return i?!0:Mv.indexOf(t,y)!==-1}var a=[],p=!1;return{onIgnoreTag:function(y,m,_){if(r(y))if(_.isClosing){var x="[/removed]",M=_.position+x.length;return a.push([p!==!1?p:_.position,M]),p=!1,x}else return p||(p=_.position),"[removed]";else return e(y,m,_)},remove:function(y){var m="",_=0;return Mv.forEach(a,function(x){m+=y.slice(_,x[0]),_=x[1]}),m+=y.slice(_),m}}}function oQ(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var a=t.indexOf("-->",r);if(a===-1)break;i=a+3}return e}function aQ(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Si.whiteList=lP();Si.getDefaultWhiteList=lP;Si.onTag=HX;Si.onIgnoreTag=WX;Si.onTagAttr=JX;Si.onIgnoreTagAttr=KX;Si.safeAttrValue=YX;Si.escapeHtml=hP;Si.escapeQuote=cP;Si.unescapeQuote=pP;Si.escapeHtmlEntities=dP;Si.escapeDangerHtml5Entities=fP;Si.clearNonPrintableCharacter=yP;Si.friendlyAttrValue=mP;Si.escapeAttrValue=gP;Si.onIgnoreTagStripAll=sQ;Si.StripTagBody=nQ;Si.stripCommentTag=oQ;Si.stripBlankChar=aQ;Si.cssFilter=uP;Si.getDefaultCSSWhiteList=BX;var q2={},Yl=O6;function lQ(t){var e=Yl.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Yl.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function uQ(t){return t.slice(0,2)==="</"}function hQ(t,e,i){var r="",a=0,p=!1,y=!1,m=0,_=t.length,x="",M="";e:for(m=0;m<_;m++){var A=t.charAt(m);if(p===!1){if(A==="<"){p=m;continue}}else if(y===!1){if(A==="<"){r+=i(t.slice(a,m)),p=m,a=m;continue}if(A===">"){r+=i(t.slice(a,p)),M=t.slice(p,m+1),x=lQ(M),r+=e(p,r.length,x,M,uQ(M)),a=m+1,p=!1;continue}if(A==='"'||A==="'")for(var C=1,N=t.charAt(m-C);N.trim()===""||N==="=";){if(N==="="){y=A;continue e}N=t.charAt(m-++C)}}else if(A===y){y=!1;continue}}return a<t.length&&(r+=i(t.substr(a))),r}var cQ=/[^a-zA-Z0-9\\_:.-]/gim;function pQ(t,e){var i=0,r=0,a=[],p=!1,y=t.length;function m(C,N){if(C=Yl.trim(C),C=C.replace(cQ,"").toLowerCase(),!(C.length<1)){var j=e(C,N||"");j&&a.push(j)}}for(var _=0;_<y;_++){var x=t.charAt(_),M,A;if(p===!1&&x==="="){p=t.slice(i,_),i=_+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:fQ(t,_+1);continue}if(p!==!1&&_===r){if(A=t.indexOf(x,_+1),A===-1)break;M=Yl.trim(t.slice(r+1,A)),m(p,M),p=!1,_=A,i=_+1;continue}if(/\s|\n|\t/.test(x))if(t=t.replace(/\s|\n|\t/g," "),p===!1)if(A=dQ(t,_),A===-1){M=Yl.trim(t.slice(i,_)),m(M),p=!1,i=_+1;continue}else{_=A-1;continue}else if(A=yQ(t,_-1),A===-1){M=Yl.trim(t.slice(i,_)),M=X8(M),m(p,M),p=!1,i=_+1;continue}else continue}return i<t.length&&(p===!1?m(t.slice(i)):m(p,X8(Yl.trim(t.slice(i))))),Yl.trim(a.join(" "))}function dQ(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function fQ(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function yQ(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function mQ(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function X8(t){return mQ(t)?t.substr(1,t.length-2):t}q2.parseTag=hQ;q2.parseAttr=pQ;var gQ=a1.exports.FilterCSS,Fn=Si,vP=q2,vQ=vP.parseTag,bQ=vP.parseAttr,Qm=O6;function Dy(t){return t==null}function wQ(t){var e=Qm.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Qm.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=Qm.trim(t.slice(0,-1))),{html:t,closing:i}}function _Q(t){var e={};for(var i in t)e[i]=t[i];return e}function SQ(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function bP(t){t=_Q(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Fn.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=SQ(t.whiteList||t.allowList):t.whiteList=Fn.whiteList,t.onTag=t.onTag||Fn.onTag,t.onTagAttr=t.onTagAttr||Fn.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Fn.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Fn.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Fn.safeAttrValue,t.escapeHtml=t.escapeHtml||Fn.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new gQ(t.css))}bP.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,a=i.onTag,p=i.onIgnoreTag,y=i.onTagAttr,m=i.onIgnoreTagAttr,_=i.safeAttrValue,x=i.escapeHtml,M=e.cssFilter;i.stripBlankChar&&(t=Fn.stripBlankChar(t)),i.allowCommentTag||(t=Fn.stripCommentTag(t));var A=!1;i.stripIgnoreTagBody&&(A=Fn.StripTagBody(i.stripIgnoreTagBody,p),p=A.onIgnoreTag);var C=vQ(t,function(N,j,D,z,W){var Y={sourcePosition:N,position:j,isClosing:W,isWhite:Object.prototype.hasOwnProperty.call(r,D)},K=a(D,z,Y);if(!Dy(K))return K;if(Y.isWhite){if(Y.isClosing)return"</"+D+">";var ee=wQ(z),ne=r[D],oe=bQ(ee.html,function(ue,ye){var Se=Qm.indexOf(ne,ue)!==-1,Ce=y(D,ue,ye,Se);return Dy(Ce)?Se?(ye=_(D,ue,ye,M),ye?ue+'="'+ye+'"':ue):(Ce=m(D,ue,ye,Se),Dy(Ce)?void 0:Ce):Ce});return z="<"+D,oe&&(z+=" "+oe),ee.closing&&(z+=" /"),z+=">",z}else return K=p(D,z,Y),Dy(K)?x(z):K},x);return A&&(C=A.remove(C)),C};var xQ=bP;(function(t,e){var i=Si,r=q2,a=xQ;function p(m,_){var x=new a(_);return x.process(m)}e=t.exports=p,e.filterXSS=p,e.FilterXSS=a,function(){for(var m in i)e[m]=i[m];for(var _ in r)e[_]=r[_]}();function y(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=t.exports)})(qh,qh.exports);var $Q=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(p,y,m,_){return p==="a"&&y==="href"||(p==="img"||p==="source")&&y==="src"?r.sanitizeUrl(m):qh.exports.safeAttrValue(p,y,m,_)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var a;e&&!i?a=e:e&&i?(a=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(p){p==="whiteList"?a.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):a[p]=e[p]})):(a=Object.create(this.arcgisFilterOptions),a.whiteList=this.arcgisWhiteList),this.xssFilterOptions=a,this._xssFilter=new qh.exports.FilterXSS(a)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,a=r===void 0?!0:r,p=this._trim(e.substring(0,e.indexOf(":"))),y=e==="/",m=/^#/.test(e),_=p&&this.allowedProtocols.indexOf(p.toLowerCase())>-1;return y||m||_?qh.exports.escapeAttrValue(e):!p&&!a?qh.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,a){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,a):qh.exports.safeAttrValue(e,i,r,a)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,a){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(a)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(a){Array.isArray(r[a])&&Array.isArray(i[a])?i[a]=i[a].concat(r[a]):i[a]=r[a]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var a=!1,p=void 0;if(Array.isArray(e))p=e.reduce(function(m,_){var x=r.validate(_,i);return x.isValid?m.concat([_]):(a=!0,m.concat([x.sanitized]))},[]);else if(PX(e)){var y=Object.keys(e);p=y.reduce(function(m,_){var x=e[_],M=r.validate(x,i);return M.isValid?m[_]=x:(a=!0,m[_]=M.sanitized),m},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return a?p:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const U2=new Map;function wP(){U2.clear()}function TQ(t){return U2.get(t)}function IQ(t,e){U2.set(t,e)}function lw(t){U2.delete(t)}var _c,fd,MQ=function(t){if("WebkitTransition"in t.style)_c="webkitTransitionEnd",fd="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");_c="transitionend",fd="animationend"}},_P=function(t){_c||MQ(t)},EQ=function(t,e){return e===void 0&&(e=t+"-active"),function(i){_P(i);var r=!1,a=function(p){r||(r=!0,i.removeEventListener(_c,a),i.removeEventListener(fd,a),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(_c,a),i.addEventListener(fd,a),requestAnimationFrame(function(){i.classList.add(e)})}},AQ=function(t,e){return e===void 0&&(e=t+"-active"),function(i,r){_P(i);var a=!1,p=function(y){a||(a=!0,i.removeEventListener(_c,p),i.removeEventListener(fd,p),r())};i.classList.add(t),i.addEventListener(_c,p),i.addEventListener(fd,p),requestAnimationFrame(function(){i.classList.add(e)})}};const kQ=me.getLogger("esri.widgets.support.widgetUtils");function OQ(t){const e=Ur.acquire();for(let r=0;r<arguments.length;r++){const a=arguments[r],p=typeof a;if(p==="string")e.push(a);else if(Array.isArray(a))e.push.apply(e,a);else if(p==="object")for(const y in a)a[y]&&e.push(y)}const i=e.join(" ");return Ur.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{var a;wP();for(const p of r)(a=t.get(p.target))==null||a(p)}),i=(r,a,p)=>(t.has(r)&&kQ.error("Already observing element",r),t.set(r,a),e.observe(r,p),jo(()=>{e.unobserve(r),t.delete(r)}));return(r,a,p)=>{let y=null;return Ee(()=>typeof r=="function"?r():r,m=>{y==null||y.remove(),m&&(y=i(m,a,p))},Ca)}})();function CQ(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function Nge(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Fy(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function Rge(t,e){return(t==="enter"?EQ:AQ)(e)}const PQ=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],NQ=PQ.reduce((t,e)=>(t[e]=[],t),{}),RQ=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],SP=new $Q({whiteList:NQ,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(RQ.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function LQ(t,e){const i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),a=i.top+i.height,p=r.top+r.height,y=i.top,m=r.top;(a>p||y<m)&&t.scrollIntoView({block:"end"})}function xP(t){return t==="Enter"||t===" "}const $P="http://www.w3.org/",B2=`${$P}2000/svg`,TP=`${$P}1999/xlink`;let Q8=[],C6=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},P6=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),IP=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},jQ=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(P6(t[r],e))return r}return-1},uw=(t,e,i,r)=>{let a=t[e];if(a.vnodeSelector==="")return;let p=a.properties;if(!(p&&(p.key===void 0?p.bind:p.key))){for(let y=0;y<t.length;y++)if(y!==e){let m=t[y];if(P6(m,a))throw new Error(`${i.vnodeSelector} had a ${a.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},DQ=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},L9=[],j9=!1,MP=t=>{(t.children||[]).forEach(MP),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},e$=()=>{j9=!1,L9.forEach(MP),L9.length=0},t$=t=>{L9.push(t),j9||(j9=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(e$,{timeout:16}):setTimeout(e$,16))},i$=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),t$(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),t$(t))},FQ=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,a=Object.keys(e),p=a.length;for(let y=0;y<p;y++){let m=a[y],_=e[m];if(m==="className")throw new Error('Property "className" is not supported, use "class".');if(m==="class")D9(t,_,!0);else if(m==="classes"){let x=Object.keys(_),M=x.length;for(let A=0;A<M;A++){let C=x[A];_[C]&&t.classList.add(C)}}else if(m==="styles"){let x=Object.keys(_),M=x.length;for(let A=0;A<M;A++){let C=x[A],N=_[C];N&&(IP(N),i.styleApplyer(t,C,N))}}else if(m!=="key"&&_!=null){let x=typeof _;x==="function"?(m.lastIndexOf("on",0)===0&&(r&&(_=r(m,_,t,e)),m==="oninput"&&function(){let M=_;_=function(A){M.apply(this,[A]),A.target["oninput-value"]=A.target.value}}()),t[m]=_):i.namespace===B2?m==="href"?t.setAttributeNS(TP,m,_):t.setAttribute(m,_):x==="string"&&m!=="value"?m==="innerHTML"?t[m]=SP.sanitize(_):EP(t)&&m in t?t[m]=_:t.setAttribute(m,_):t[m]=_}}};function EP(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let Ev,zQ=(t,e,i)=>{if(e)for(let r of e)Fp(r,t,void 0,i)},AP=(t,e,i)=>{zQ(t,e.children,i),e.text&&(t.textContent=e.text),FQ(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Fp=(t,e,i,r)=>{let a,p=0,y=t.vnodeSelector,m=e.ownerDocument;if(y==="")a=t.domNode=m.createTextNode(t.text),i!==void 0?e.insertBefore(a,i):e.appendChild(a);else{for(let _=0;_<=y.length;++_){let x=y.charAt(_);if(_===y.length||x==="."||x==="#"){let M=y.charAt(p-1),A=y.slice(p,_);M==="."?a.classList.add(A):M==="#"?a.id=A:(A==="svg"&&(r=C6(r,{namespace:B2})),r.namespace!==void 0?a=t.domNode=m.createElementNS(r.namespace,A):(a=t.domNode=t.domNode||m.createElement(A),A==="input"&&t.properties&&t.properties.type!==void 0&&a.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(a,i):a.parentNode!==e&&e.appendChild(a)),p=_+1}}AP(a,t,r)}},D9=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},VQ=(t,e,i,r)=>{if(!i)return;let a=!1,p=Object.keys(i),y=p.length;for(let m=0;m<y;m++){let _=p[m],x=i[_],M=e[_];if(_==="class")M!==x&&(D9(t,M,!1),D9(t,x,!0));else if(_==="classes"){let A=t.classList,C=Object.keys(x),N=C.length;for(let j=0;j<N;j++){let D=C[j],z=!!x[D];z!==!!M[D]&&(a=!0,z?A.add(D):A.remove(D))}}else if(_==="styles"){let A=Object.keys(x),C=A.length;for(let N=0;N<C;N++){let j=A[N],D=x[j];D!==M[j]&&(a=!0,D?(IP(D),r.styleApplyer(t,j,D)):r.styleApplyer(t,j,""))}}else if(x||typeof M!="string"||(x=""),_==="value"){let A=t[_];A!==x&&(t["oninput-value"]?A===t["oninput-value"]:x!==M)&&(t[_]=x,t["oninput-value"]=void 0),x!==M&&(a=!0)}else if(x!==M){let A=typeof x;A==="function"&&r.eventHandlerInterceptor||(r.namespace===B2?_==="href"?t.setAttributeNS(TP,_,x):t.setAttribute(_,x):A==="string"?_==="innerHTML"?t[_]=SP.sanitize(x):_==="role"&&x===""?t.removeAttribute(_):EP(t)&&_ in t?t[_]=x:t.setAttribute(_,x):t[_]!==x&&(t[_]=x),a=!0)}}return a},GQ=(t,e,i,r,a)=>{if(i===r)return!1;r=r||Q8;let p,y=(i=i||Q8).length,m=r.length,_=0,x=0,M=!1;for(;x<m;){let A=_<y?i[_]:void 0,C=r[x];if(A!==void 0&&P6(A,C))M=Ev(A,C,a)||M,_++;else{let N=jQ(i,C,_+1);if(N>=0){for(p=_;p<N;p++)i$(i[p]),uw(i,p,t,"removed");M=Ev(i[N],C,a)||M,_=N+1}else Fp(C,e,_<y?i[_].domNode:void 0,a),DQ(C),uw(r,x,t,"added")}x++}if(y>_)for(p=_;p<y;p++)i$(i[p]),uw(i,p,t,"removed");return M};Ev=(t,e,i)=>{let r=t.domNode,a=!1;if(t===e)return!1;let p=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let y=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(y,r),e.domNode=y,a=!0,a}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=C6(i,{namespace:B2})),t.text!==e.text&&(p=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,p=GQ(e,r,t.children,e.children,i)||p,p=VQ(r,t.properties,e.properties,i)||p,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return p&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),a};let t0=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,Ev(r,i,e)},domNode:t.domNode});const qQ={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let op=t=>C6(qQ,t),du={create:(t,e)=>(e=op(e),Fp(t,document.createElement("div"),void 0,e),t0(t,e)),append:(t,e,i)=>(i=op(i),Fp(e,t,void 0,i),t0(e,i)),insertBefore:(t,e,i)=>(i=op(i),Fp(e,t.parentNode,t,i),t0(e,i)),merge:(t,e,i)=>(i=op(i),e.domNode=t,AP(t,e,i),t0(e,i)),replace:(t,e,i)=>(i=op(i),Fp(e,t.parentNode,t,i),t.parentNode.removeChild(t),t0(e,i))},kP,UQ=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};kP=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let BQ=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?kP(i.children,a=>a.domNode===r):void 0}),i},HQ=(t,e,i)=>{let r=function(a){i("domEvent",a);let p=e(),y=UQ(a.currentTarget,p.domNode);y.reverse();let m,_=BQ(p.getLastRender(),y);return t.scheduleRender(),_&&(m=_.properties[`on${a.type}`].apply(_.properties.bind||this,arguments)),i("domEventProcessed",a),m};return(a,p,y,m)=>r},r$=t=>{let e,i,r=op(t),a=r.performanceLogger,p=!0,y=!1,m=[],_=[],x=(A,C,N)=>{let j,D=()=>j;r.eventHandlerInterceptor=HQ(e,D,a),j=A(C,N(),r),m.push(j),_.push(N)},M=()=>{if(i=void 0,p){p=!1,a("renderStart",void 0);for(let A=0;A<m.length;A++){let C=_[A]();a("rendered",void 0),m[A].update(C),a("patched",void 0)}a("renderDone",void 0),p=!0}};return e={renderNow:M,scheduleRender:()=>{i||y||(i=requestAnimationFrame(M))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,p=!0,e.scheduleRender()},append:(A,C)=>{x(du.append,A,C)},insertBefore:(A,C)=>{x(du.insertBefore,A,C)},merge:(A,C)=>{x(du.merge,A,C)},replace:(A,C)=>{x(du.replace,A,C)},detach:A=>{for(let C=0;C<_.length;C++)if(_[C]===A)return _.splice(C,1),m.splice(C,1)[0];throw new Error("renderFunction was not found")}},e},kl=class extends je{constructor(){super(...arguments),this.items=new De,this._watchUpdatingTracking=new Jp,this._callbacks=new Map,this._projector=r$(),this._hiddenProjector=r$()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const a=()=>r.render();this._callbacks.set(r,a),this._projector.append(this.surface,a)}for(const r of i.removed){const a=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(a.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let a;const p=()=>(a=e.render(),a);r.append(i,p),r.renderNow();const y={left:0,top:0,right:0,bottom:0};if(a&&a.domNode){const m=a.domNode.getBoundingClientRect();y.left=m.left,y.top=m.top,y.right=m.right,y.bottom=m.bottom}for(r.detach(p);i.firstChild;)i.removeChild(i.firstChild);return y}overlaps(e,i){const r=this.computeBoundingRect(e),a=this.computeBoundingRect(i);return Math.max(r.left,a.left)<=Math.min(r.right,a.right)&&Math.max(r.top,a.top)<=Math.min(r.bottom,a.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{i.save(),r.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};v([S({readOnly:!0})],kl.prototype,"surface",void 0),v([S({readOnly:!0})],kl.prototype,"items",void 0),v([S({readOnly:!0})],kl.prototype,"needsRender",null),v([S({readOnly:!0})],kl.prototype,"_watchUpdatingTracking",void 0),v([S({readOnly:!0})],kl.prototype,"updating",null),kl=v([B("esri.views.overlay.ViewOverlay")],kl);const s$=kl,hw=[0,0];function WQ(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return hw[0]=i.left+((e==null?void 0:e.pageXOffset)??0),hw[1]=i.top+((e==null?void 0:e.pageYOffset)??0),hw}function n$(t){t&&(nP(t),t.parentNode&&t.parentNode.removeChild(t))}function JQ(t){const e=document.createElement("div");return t.appendChild(e),e}const i0=16,zy=750,KQ=512,YQ=2,ZQ=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:i0,time:zy},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Ee(()=>this.cursor,r=>{const{surface:a}=this;a&&a.setAttribute("data-cursor",r)}),Ee(()=>this.navigating,r=>{const{surface:a}=this;a&&a.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([Ee(()=>this.ui,(i,r)=>this._handleUIChange(i,r),St),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Wt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),a=k6(i);if(a||typeof i!="string"||me.getLogger(this).error("#container",`element with id '${i}' not found`),r===a)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(n$(this.root),this._set("root",null)),this.userContent&&(J8(this.userContent,r),n$(this.userContent),this._set("userContent",null))),!a)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);a.classList.add("esri-view");const p=document.createElement("div");p.className="esri-view-user-storage",J8(a,p),a.appendChild(p),this._set("userContent",p);const y=document.createElement("div");y.className="esri-view-root",a.insertBefore(y,a.firstChild),this._set("root",y);const m=document.createElement("div");m.className="esri-view-surface",m.setAttribute("role","application"),m.tabIndex=0,y.appendChild(m),this._set("surface",m);const _=new s$;y.appendChild(_.surface),this._set("overlay",_),this.addHandles(Ee(()=>_.needsRender,x=>{x&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=sd({render:()=>{var M;return(M=this.overlay)==null?void 0:M.render()}}):this._overlayRenderTaskHandle=fi(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",a),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,a){const p=this.position;return i-=p?p[0]:0,r-=p?p[1]:0,a?(a[0]=i,a[1]=r):a=[i,r],a}containerToPage(i,r,a){const p=this.position;return i+=p?p[0]:0,r+=p?p[1]:0,a?(a[0]=i,a[1]=r):a=[i,r],a}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(Ee(()=>this.root,a=>{i.container=a?JQ(a):null},St),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=i0,i.time=zy,this.addHandles([(()=>{const r=()=>{i.freq=i0,i.time=zy};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),sd({prepare:r=>{const a=this._measure(),p=this._freqInfo;if(p.time+=r.deltaTime,a&&(p.freq=i0,this._get("resizing")||this._set("resizing",!0)),p.time<p.freq)return;p.time=0;const y=this._position();p.freq=y||a?i0:Math.min(zy,p.freq*YQ),!a&&p.freq>=KQ&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,a=i?i.clientHeight:0;if(r===0||a===0)return this.suspended||this._set("suspended",!0),!1;const p=this.width,y=this.height;return r===p&&a===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",a),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:p,oldHeight:y,width:r,height:a}),!0)}_position(){const i=this.container,r=this.position,a=i&&WQ(i);return!!a&&(!r||a[0]!==r[0]||a[1]!==r[1])&&(this._set("position",[a[0],a[1]]),!0)}forceDOMReadyCycle(){}};return v([S()],e.prototype,"container",null),v([S({readOnly:!0})],e.prototype,"focused",null),v([S({readOnly:!0})],e.prototype,"height",void 0),v([S({type:s$})],e.prototype,"overlay",void 0),v([S({readOnly:!0})],e.prototype,"position",void 0),v([S({readOnly:!0})],e.prototype,"resizing",void 0),v([S({readOnly:!0})],e.prototype,"root",void 0),v([S({value:null,readOnly:!0})],e.prototype,"size",null),v([S({readOnly:!0})],e.prototype,"surface",void 0),v([S({readOnly:!0})],e.prototype,"suspended",void 0),v([S()],e.prototype,"ui",void 0),v([S({readOnly:!0})],e.prototype,"userContent",void 0),v([S({readOnly:!0})],e.prototype,"width",void 0),v([S()],e.prototype,"widthBreakpoint",void 0),e=v([B("esri.views.DOMContainer")],e),e};let XQ=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const a=e[r],p=new tE(a,void 0,void 0,2,2);this._properties[r]={pool:p,acquired:[]}}this._afterDispatchHandle=Sz(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)u7(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let a=r.pool.acquire();for(r.acquired.push(a);a===i;)r.acquired.push(a),a=r.pool.acquire();return a}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const a of i.acquired)u7(a)?i.acquired[r++]=a:i.pool.release(a);i.acquired.length=r}}};const QQ=le("mac")?"Meta":"Ctrl",H2={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)H2[t]=String.fromCharCode(t);for(let t=1;t<25;t++)H2[111+t]=`F${t}`;for(let t=65;t<91;t++)H2[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function eee(t){if(t.key!==void 0)return yf(t);const e=H2[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function tee(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let iee=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}};const o$=me.getLogger("esri.views.input.InputHandler");let Zi=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?o$.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let a;typeof i=="function"?(r=i,a=[]):a=i||[];const p=typeof e=="string"?new iee(e,a):e,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},m=M=>{const A=this._incoming[M.match.eventType];if(A){const C=A.indexOf(M);A.splice(C,1),y(),this._manager&&this._manager.updateDependencies()}},_=new ree(p,r,{onPause:m,onRemove:m,onResume:M=>{const A=this._incoming[M.match.eventType];A&&!A.includes(M)&&(A.push(M),y(),this._manager&&this._manager.updateDependencies())}});let x=this._incoming[p.eventType];return x||(x=[],this._incoming[p.eventType]=x),x.push(_),y(),this._manager&&this._manager.updateDependencies(),_}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new see(e,{onEmit:(r,a,p,y)=>{var m;(m=this._manager)==null||m.emit(r.eventType,a,p,y)},onRemove:r=>{var a;delete this._outgoing[r.eventType],(a=this._manager)==null||a.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):o$.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var r;const i=this._incoming[e.type];if(i){for(const a of i)if(a.match.matches(e)&&((r=a.callback)==null||r.call(a,e),e.shouldStopPropagation()))break}}},ree=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},see=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},nee=class extends Zi{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:a}=e;i===this._value&&this._x===r&&this._y===a||(this._value=i,this._x=r,this._y=a,this._onChange(i,r,a))}},oee=class{constructor(e,i){this._observable=new b2,this._value=e,this._equalityFunction=i}get value(){return Ze(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function Av(t,e=DM){return new oee(t,e)}let aee=class extends Zi{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Av(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},zs=class extends je{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=QQ,this._latestPointerType="mouse",this._propertiesPool=new XQ({latestPointerLocation:hee},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=bu.INTERNAL){if(this._nameToGroup[e])return void me.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void me.getLogger(this).error("Can't register a group of zero handlers");const a={name:e,handlers:i.map(p=>({handler:p,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=a;for(let p=a.handlers.length-1;p>=0;p--){const y=a.handlers[p];this._handlers.push(y),y.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(m,_,x,M,A)=>{this._emitInputEvent(y.priorityIndex+1,m,_,x,A,M)},setPointerCapture:(m,_)=>{this._setPointerCapture(a,y,m,_)},setEventCallback:m=>{y.eventCallback=m},setUninstallCallback:m=>{y.uninstallCallback=m},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{var a;r.removed=!0,(a=r.uninstallCallback)==null||a.call(r)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):me.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const a=this._handlers[r];a.priorityIndex=r,this._handlersPriority.push(a)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const a=this._handlersPriority[r];a.priorityIndex=r;let p=a.handler.hasSideEffects;if(!p){for(const y of a.handler.outgoingEventTypes)if(e.has(y)){p=!0;break}}if(p)for(const y of a.handler.incomingEventMatches){e.add(y.eventType);for(const m of y.keyModifiers)tee(m)||i.add(m)}a.active=p}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r){this._latestPointerType=e;const a=this._get("latestPointerLocation");if(a==null||a.x!==i||a.y!==r){const p=this._propertiesPool.get("latestPointerLocation");p.x=i,p.y=r,this._set("latestPointerLocation",p)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const p=i;this._pointerCaptures.delete(p.native.pointerId)}this._updateKeyModifiers(e,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,a=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,r,a)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const a=()=>{if(!r){const m=new Set;this._activeKeyModifiers.forEach(_=>{m.add(_)}),this._activeKeyModifiers=m,r=!0}},p=(m,_)=>{_&&!this._activeKeyModifiers.has(m)?(a(),this._activeKeyModifiers.add(m)):!_&&this._activeKeyModifiers.has(m)&&(a(),this._activeKeyModifiers.delete(m))};if(e==="key-down"||e==="key-up"){const m=i.key;this._keyModifiers.has(m)&&p(m,e==="key-down")}const y=i.native;p("Alt",!(!y||!y.altKey)),p("Ctrl",!(!y||!y.ctrlKey)),p("Shift",!(!y||!y.shiftKey)),p("Meta",!(!y||!y.metaKey)),p("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new nee((e,i,r)=>this._setLatestPointer(e,i,r)),this._multiTouchHandler=new aee,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],bu.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,bu.INTERNAL)}_setPointerCapture(e,i,r,a){const p=e.name+"-"+i.priorityIndex,y=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,y),a?(y.add(p),y.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):y.has(p)&&(y.delete(p),y.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,a){this._emitInputEvent(0,e,i,r,a)}_emitInputEvent(e,i,r,a,p,y){const m=a!==void 0?a:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),_=p!==void 0&&p,x={event:new lee(i,r,m,y||this._activeKeyModifiers,_),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(x):this._doNewPropagation(x)}_doNewPropagation(e){this._currentPropagation={events:new _v,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,r;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:a,priorityIndex:p}=e.events.pop(),y=a.data&&a.data.eventId;if(!(y!=null&&this._stoppedPropagationEventIds.has(y)))for(e.currentHandler=this._handlersPriority[p];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!a.shouldStopPropagation()&&((r=(i=e.currentHandler).eventCallback)==null||r.call(i,a)),a.shouldStopPropagation()){y!=null&&this._stoppedPropagationEventIds.add(y);break}if(a.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:a,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new _v;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const a of i.handler.incomingEventMatches){if(r.eventType!==a.eventType)continue;const p=r.keyModifiers.filter(y=>a.keyModifiers.includes(y));if(p.length===r.keyModifiers.length!=(p.length===a.keyModifiers.length))return r.keyModifiers.length>a.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let a=0;for(;a<i.length&&this._compareHandlerPriority(r,i[a])>=0;)a++;i.splice(a,0,r)}return i}get debug(){const e=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{e(()=>{this._onEventReceived(i,r)})},disablePointerCapture:e}}};v([S({readOnly:!0})],zs.prototype,"hasPendingInputs",null),v([S({constructOnly:!0})],zs.prototype,"eventSource",void 0),v([S({constructOnly:!0})],zs.prototype,"recognizers",void 0),v([S()],zs.prototype,"_latestPointerType",void 0),v([S()],zs.prototype,"latestPointerType",null),v([S()],zs.prototype,"multiTouchActive",null),v([S({readOnly:!0})],zs.prototype,"latestPointerLocation",void 0),v([S()],zs.prototype,"_paused",void 0),v([S({readOnly:!0})],zs.prototype,"updating",null),zs=v([B("esri.views.input.InputManager")],zs);let lee=class{constructor(e,i,r,a,p){this.type=e,this.data=i,this.timestamp=r,this.modifiers=a,this.cancelable=p,this._propagationState=Zl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Zl.STOPPED}shouldStopPropagation(){return(this._propagationState&Zl.STOPPED)!=0}async(e){this._propagationState|=Zl.PAUSED;const i=(r,a)=>{this._propagationState&=~Zl.PAUSED;const p=this._resumeCallback;if(this._resumeCallback=null,p&&p(),a)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&Zl.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Zl;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Zl||(Zl={}));const bu={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let uee=class{};const hee=uee;function uo(t){return t!=null&&"open"in t&&"declaredClass"in t}function a$(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const cee=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Ee(()=>[this.ui,this.popup],([i,r],a)=>{const p="popup",y="manual";if(a){const[m,_]=a;m&&uo(_)&&(_.view=null,a$(_)&&m.remove(_,p))}i&&uo(r)&&(r.view=this,a$(r)&&i.add(r,{key:p,position:y,internal:!0}))},St),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!uo(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(uo(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),uo(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},bu.WIDGET)]),s1(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{we(()=>import("./Popup-45239b8e.js").then(i=>i.a0),["assets/Popup-45239b8e.js","assets/throttle-7bf02de9.js","assets/AttachmentInfo-13d3e9f0.js","assets/symbolUtils-d3cda46c.js","assets/utils-0cc77677.js","assets/utils-7685c378.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/devEnvironmentUtils-5002a058.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){uo(this.popup)&&this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void me.getLogger(this).error(new ie("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),uo(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){await this.when();const{location:a,queryArea:p,layerViewsAndGraphics:y,clientOnlyGraphics:m}=await this._prepareFetchPopupFeatures(i,r),_=Promise.resolve(m),x=this._queryLayerPopupFeatures(p,y,r),M=x.map(A=>A.promise);return{location:a,clientOnlyGraphics:m,allGraphicsPromise:nz([_,...M]).then(A=>Array.from(new Set(A.flat()))),promisesPerLayerView:x}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!uo(this.popup))return this._popupSetupTask=pS(async r=>{const{default:a}=await we(()=>import("./Popup-45239b8e.js").then(y=>y.a0),["assets/Popup-45239b8e.js","assets/throttle-7bf02de9.js","assets/AttachmentInfo-13d3e9f0.js","assets/symbolUtils-d3cda46c.js","assets/utils-0cc77677.js","assets/utils-7685c378.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/devEnvironmentUtils-5002a058.js"]);if(Zt(r),!this.popup||uo(this.popup))return;const p=this.popup;delete p.open,delete p.close,this.popup=new a(p)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,r,a){return r.map(({layerView:p,graphics:y})=>{const m={clientGraphics:y,event:a!=null?a.event:void 0,signal:a!=null?a.signal:void 0,defaultPopupTemplateEnabled:a!=null&&!!a.defaultPopupTemplateEnabled},_=p.fetchPopupFeatures(i,m);return{layerView:p,promise:_}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r!=null&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:a,queryArea:p,location:y}=await this._popupHitTestGraphics(i,r),m=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:_,clientOnlyGraphics:x}=this._graphicsPerFetchPopupLayerView(a,m);return{clientOnlyGraphics:x,layerViewsAndGraphics:_,queryArea:p,location:y}}async _popupHitTestGraphics(i,r){const a=await this.popupHitTest(i),p=a.results,y=a.mapPoint,m=p.filter(x=>x.type==="graphic"&&this._isValidPopupGraphic(x.graphic,r)),_=m.length?m[0].mapPoint:null;return{clientGraphics:m.map(x=>x.graphic),queryArea:y,location:y||_}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const a=[],p=new Map,y=r.map(m=>{const _=[];return"layer"in m?p.set(m.layer,_):p.set(m.graphics,_),{layerView:m,graphics:_}});for(const m of i){const _=p.get(m.layer)||p.get(m.sourceLayer)||null;_?_.push(m):a.push(m)}return{layerViewsAndGraphics:y,clientOnlyGraphics:a}}};return v([S({cast(i){return!i||uo(i)||typeof i=="object"&&(i.open=r=>(Xg(me.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(r)),i.close=()=>(Xg(me.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),v([S()],e.prototype,"popupEnabled",void 0),e=v([B("esri.views.PopupView")],e),e},l$={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},pee={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function dee(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function oc(t,e,i){const r=new Date(t.getTime());if(e&&i){const a=pee[i],{getter:p,setter:y,multiplier:m}=a;if(i==="months"){const _=dee(r.getFullYear(),r.getMonth()+e);r.getDate()>_&&r.setDate(_)}r[y](r[p]()+e*m)}return r}function u$(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function fee(t,e,i){return t===0?0:t*l$[e]/l$[i]}var In;let ms=In=class extends de{static get allTime(){return h$}static get empty(){return yee}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(In.allTime)}get isEmpty(){return this.equals(In.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new In({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,r=t.start!=null?t.start.getTime():t.start,a=t.end!=null?t.end.getTime():t.end;return e===r&&i===a}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=Kh(this.start,r=>u$(r,t)),i=Kh(this.end,r=>{const a=u$(r,t);return r.getTime()===a.getTime()?a:oc(a,1,t)});return new In({start:e,end:i})}intersection(t){var m,_,x,M;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return In.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((m=this.start)==null?void 0:m.getTime())??-1/0,i=((_=this.end)==null?void 0:_.getTime())??1/0,r=((x=t.start)==null?void 0:x.getTime())??-1/0,a=((M=t.end)==null?void 0:M.getTime())??1/0;let p,y;if(r>=e&&r<=i?p=r:e>=r&&e<=a&&(p=e),i>=r&&i<=a?y=i:a>=e&&a<=i&&(y=a),p!=null&&y!=null&&!isNaN(p)&&!isNaN(y)){const A=new In;return A.start=p===-1/0?null:new Date(p),A.end=y===1/0?null:new Date(y),A}return In.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new In,{start:r,end:a}=this;return r!=null&&(i.start=oc(r,t,e)),a!=null&&(i.end=oc(a,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return h$.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new In({start:e,end:i})}};v([S({type:Date,json:{write:{allowNull:!0}}})],ms.prototype,"end",void 0),v([ge("end")],ms.prototype,"readEnd",null),v([$e("end")],ms.prototype,"writeEnd",null),v([S({readOnly:!0,json:{read:!1}})],ms.prototype,"isAllTime",null),v([S({readOnly:!0,json:{read:!1}})],ms.prototype,"isEmpty",null),v([S({type:Date,json:{write:{allowNull:!0}}})],ms.prototype,"start",void 0),v([ge("start")],ms.prototype,"readStart",null),v([$e("start")],ms.prototype,"writeStart",null),ms=In=v([B("esri.TimeExtent")],ms);const h$=new ms,yee=new ms({start:void 0,end:void 0}),ln=ms,Xa=t=>{let e=class extends t{constructor(){super(...arguments),this._handles=new Ho,this._updatingHandles=new Jp}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return v([S({readOnly:!0})],e.prototype,"handles",null),v([S({readOnly:!0})],e.prototype,"updatingHandles",null),e=v([B("esri.core.HandleOwner")],e),e};let kv=class extends Xa(je){};kv=v([B("esri.core.HandleOwner")],kv);let kf=class extends Xa(De){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(De.ofType(this.itemType.Type))(e):new De(e)}};function c$(t,e){return{type:t,cast:CE,set(i){const r=cc(i,this._get(e),t);r.owner=this,this._set(e,r)}}}v([S()],kf.prototype,"owner",null),kf=v([B("esri.core.support.OwningCollection")],kf);var F0;const Ov=Rr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),OP=Ov.jsonValues.slice();SF(OP,"orthometric");const Of=Rr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Mn=F0=class extends de{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return Ov.write(t,e,i)}readHeightModel(t,e,i){return Ov.read(t)||(i&&i.messages&&i.messages.push(mee(t,{context:i})),null)}readHeightUnit(t,e,i){return Of.read(t)||(i&&i.messages&&i.messages.push(p$(t,{context:i})),null)}readHeightUnitService(t,e,i){return rA(t)||Of.read(t)||(i&&i.messages&&i.messages.push(p$(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new F0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=MG(e);return new F0({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new F0;return e.read(t,{origin:"web-scene"}),e}};function p$(t,e){return new sn("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function mee(t,e){return new sn("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}v([S({type:Ov.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:OP,default:"ellipsoidal"}}}})],Mn.prototype,"heightModel",void 0),v([$e("web-scene","heightModel")],Mn.prototype,"writeHeightModel",null),v([ge(["web-scene","service"],"heightModel")],Mn.prototype,"readHeightModel",null),v([S({type:Of.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Of.jsonValues,write:Of.write}}}})],Mn.prototype,"heightUnit",void 0),v([ge("web-scene","heightUnit")],Mn.prototype,"readHeightUnit",null),v([ge("service","heightUnit")],Mn.prototype,"readHeightUnitService",null),v([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Mn.prototype,"vertCRS",void 0),v([ge("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Mn.prototype,"readVertCRS",null),Mn=F0=v([B("esri.geometry.HeightModelInfo")],Mn);const W2=Mn;let Cv=class extends kf{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(me.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Cv=v([B("esri.support.AnalysesCollection")],Cv);let Cf=class extends kf{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};v([uS({Type:Nr,ensureType:ri(Nr)})],Cf.prototype,"itemType",void 0),Cf=v([B("esri.support.GraphicsCollection")],Cf);const d$=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);function gee(t,e="system"){if(!t||!d$.has(t.timeZone))return e;const i=d$.get(t.timeZone);return bee(t.timeZone)||t.respectsDaylightSaving?i:vee(i)}function vee(t){const e=lt.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Cr.instance(-i).formatOffset(0,"narrow")}`}function bee(t){return t.startsWith("UTC")}let Ol=class extends Xt(de){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:r,respectsDaylightSaving:a}=i;return{timeZone:r,respectsDaylightSaving:a}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:gee(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return e!=null&&this.timeZone!=null&&e.timeZone!=null&&this.timeZone===e.timeZone}};v([S()],Ol.prototype,"legacy",void 0),v([ge("legacy",["timeZone"])],Ol.prototype,"readLegacy",null),v([S({type:String,nonNullable:!0})],Ol.prototype,"timeZone",void 0),v([ge("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],Ol.prototype,"readTimeZone",null),v([$e("timeZone")],Ol.prototype,"writeTimeZone",null),Ol=v([B("esri.time.TimeReference")],Ol);const Au=Ol;let Cl=class extends je{constructor(e){super(e),this.view=null,this.baseLayerViews=new De,this.referenceLayerViews=new De,this._loadingHandle=Ee(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},St)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,r;if(this.view&&this.view.suspended)return!1;const e=(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(a=>a.updating)||this.referenceLayerViews.some(a=>a.updating))}};v([S({constructOnly:!0})],Cl.prototype,"view",void 0),v([S({readOnly:!0})],Cl.prototype,"baseLayerViews",void 0),v([S({readOnly:!0})],Cl.prototype,"referenceLayerViews",void 0),v([S({readOnly:!0})],Cl.prototype,"suspended",null),v([S({type:Boolean,readOnly:!0})],Cl.prototype,"updating",null),Cl=v([B("esri.views.BasemapView")],Cl);function wee(t){return"tryRecycleWith"in t}let _ee=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=rn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ss(this._controller.signal,()=>{const a=new ie("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(a)})}tryRecycle(e){if(!this.done||!this.layerView||!wee(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let a=0;a<e.length;a++){const p=e[a];if(p.type!==i)continue;const y=this.layerView.tryRecycleWith(p,{signal:r});if(y){e.splice(a,1),this.layer=p;const m=this.layerView,_=m.view;return this.promise=Promise.race([y.then(()=>(Zt(this._controller.signal),p.emit("layerview-destroy",{view:_,layerView:m}),_.emit("layerview-destroy",{view:_,layerView:m}),p.emit("layerview-create",{view:_,layerView:m}),_.emit("layerview-create",{view:_,layerView:m}),m)),new Promise((x,M)=>Ss(this._controller.signal,()=>M(hi())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var a,p,y;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:r}=this;this._map=r.map;try{let m,_;if(await i.load({signal:e}),"prefetchResources"in i&&await((a=i.prefetchResources)==null?void 0:a.call(i,{signal:e})),xee(i))m=await i.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new ie("layer:view-not-supported","No layerview implementation was found");const A=await this.layerViewImporter.importLayerView(i);Zt(e),m="default"in A?new A.default({layer:i,view:r}):new A({layer:i,view:r})}const x=()=>{_=fi(_),m.destroyed||m.destroy(),m.layer=null,m.parent=null,m.view=null,this.done=!0};_=Ss(e,x),Zt(e);try{await m.when()}catch(A){throw x(),A}if(!((y=(p=this._map)==null?void 0:p.allLayers)==null?void 0:y.includes(i)))return x(),void this._deferred.reject(new ie("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=m,i.emit("layerview-create",{view:r,layerView:m}),r.emit("layerview-create",{layer:i,layerView:m}),this.done=!0,this._deferred.resolve(m)}catch(m){i.emit("layerview-create-error",{view:r,error:m}),r.emit("layerview-create-error",{layer:i,error:m}),this.done=!0,this._deferred.reject(new ie("layerview:create-error","layerview creation failed",{layer:i,error:m}))}}},Vs=class extends je{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Jp,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const a of i)this.layerViewImporter.hasLayerViewModule(a)&&this.layerViewImporter.importLayerView(a)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=rn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(wd(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var _,x,M;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,a=[],p=this.view.ready,y=A=>{if(A!=null){for(const C of A)if(C){r.add(C);const N=this._layerLayerViewInfoMap.get(C);N&&p?N.start():N||this._recyclingInfoMap.has(C)||a.push(C),"layers"in C&&C.layers&&y(C.layers)}}};for(const A of this._rootCollectionNames)y(this.get(A));for(const[A,C]of this._layerLayerViewInfoMap)if(!r.has(A)){this._layerLayerViewInfoMap.delete(C.layer);const N=C.tryRecycle(a);N?(this.notifyChange("updating"),this._recyclingInfoMap.set(C.layer,C),N.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),this._layerLayerViewInfoMap.set(C.layer,C),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),C.destroy(),this._reschedule()})):C.destroy()}for(const[A,C]of this._recyclingInfoMap)r.has(A)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),C.destroy());for(const A of a)this._createLayerView(A);this._refreshCollections();const m=[(_=i==null?void 0:i.ground)==null?void 0:_.layers,(x=i==null?void 0:i.basemap)==null?void 0:x.baseLayers,(M=i==null?void 0:i.basemap)==null?void 0:M.referenceLayers,i==null?void 0:i.layers].filter(A=>!!A);r.forEach(A=>"layers"in A&&m.push(A.layers)),this.addHandles(m.map(A=>this._watchUpdatingTracking.addOnCollectionChange(()=>A,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Tu(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ee(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Ca)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),qb(this._recyclingInfoMap),qb(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(hi()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||m2(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(qb(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ie("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void(i&&i.removeAll());let a=0;for(const p of e){const y=this._layerLayerViewInfoMap.get(p);if(!y||!y.layerView)continue;const m=y.layerView;m.layer=p,m.parent=r,i.at(a)!==m&&i.splice(a,0,m),p.layers&&this._populateLayerViewsOwners(p.layers,m.layerViews,m),a+=1}a<i.length&&i.splice(a,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new _ee(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(dr(r)||r.name==="cancelled:layerview-create")||me.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};v([S()],Vs.prototype,"_workPromise",void 0),v([S({readOnly:!0})],Vs.prototype,"_watchUpdatingTracking",void 0),v([S({readOnly:!0})],Vs.prototype,"_layersToLayerViews",null),v([S({readOnly:!0})],Vs.prototype,"_rootCollectionNames",null),v([S()],Vs.prototype,"layerViewImporter",void 0),v([S()],Vs.prototype,"supportsGround",void 0),v([S({readOnly:!0})],Vs.prototype,"updating",null),v([S({readOnly:!0})],Vs.prototype,"updatingRemaining",null),v([S({constructOnly:!0})],Vs.prototype,"view",void 0),Vs=v([B("esri.views.LayerViewManager")],Vs);const See=Vs;function xee(t){return"createLayerView"in t&&t.createLayerView!=null}let ls=class extends je{constructor(e){super(e),this.factor=1.5,this.offset=Hr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};v([S({type:Number})],ls.prototype,"factor",void 0),v([S({nonNullable:!0})],ls.prototype,"offset",void 0),v([S()],ls.prototype,"position",void 0),v([S({type:Number,range:{min:0}})],ls.prototype,"size",void 0),v([S()],ls.prototype,"maskUrl",void 0),v([S()],ls.prototype,"maskEnabled",void 0),v([S()],ls.prototype,"overlayUrl",void 0),v([S()],ls.prototype,"overlayEnabled",void 0),v([S({readOnly:!0})],ls.prototype,"version",null),v([S({type:Boolean})],ls.prototype,"visible",void 0),ls=v([B("esri.views.Magnifier")],ls);const CP=ls;let $ee=class{constructor(){this._tasks=new Array,this._running=Av(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._running.value=!0,new Promise((a,p)=>this._tasks.push(new f$(a,p,e,i,r)))}unshift(e,i,r){return this._running.value=!0,new Promise((a,p)=>this._tasks.unshift(new f$(a,p,e,i,r)))}_process(e){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const a=tn(i.signal);if(a&&!i.abortCallback)i.reject(hi());else{const p=a?(r=i.abortCallback)==null?void 0:r.call(i,hi()):i.callback(e);Ya(p)?p.then(i.resolve,i.reject):i.resolve(p)}}catch(a){i.reject(a)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=hi();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(e);i.resolve(r)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},f$=class{constructor(e,i,r,a=void 0,p=void 0){this.resolve=e,this.reject=i,this.callback=r,this.signal=a,this.abortCallback=p}},z0=class extends je{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};v([S()],z0.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),v([S()],z0.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),z0=v([B("esri.views.support.DebugFlags")],z0);const Tee=new z0;var fs;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(fs||(fs={}));var F9,ct;(function(t){t[t.YIELD=1]="YIELD"})(F9||(F9={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(ct||(ct={}));const Ao=0,y$=new Map([[ct.RESOURCE_CONTROLLER_IMMEDIATE,Ao],[ct.RESOURCE_CONTROLLER,4],[ct.SLIDE,Ao],[ct.STREAM_DATA_LOADER,Ao],[ct.ELEVATION_QUERY,Ao],[ct.TERRAIN_SURFACE,1],[ct.SURFACE_GEOMETRY_UPDATES,1],[ct.LOD_RENDERER,2],[ct.GRAPHICS_CORE,2],[ct.I3S_CONTROLLER,2],[ct.POINT_CLOUD_LAYER,2],[ct.FEATURE_TILE_FETCHER,2],[ct.OVERLAY,4],[ct.STAGE,4],[ct.GRAPHICS_DECONFLICTOR,4],[ct.FILTER_VISIBILITY,4],[ct.SCALE_VISIBILITY,4],[ct.FRUSTUM_VISIBILITY,4],[ct.CLOUDS_GENERATOR,4],[ct.POINT_OF_INTEREST_FREQUENT,6],[ct.POINT_OF_INTEREST_INFREQUENT,30],[ct.LABELER,8],[ct.FEATURE_QUERY_ENGINE,8],[ct.FEATURE_TILE_TREE,16],[ct.FEATURE_TILE_TREE_ACTIVE,Ao],[ct.ELEVATION_ALIGNMENT,12],[ct.TEXT_TEXTURE_ATLAS,12],[ct.TEXTURE_UNLOAD,12],[ct.LINE_OF_SIGHT_TOOL,16],[ct.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ao],[ct.SNAPPING,Ao],[ct.SHADOW_ACCUMULATOR,30]]);function m$(t){return y$.has(t)?y$.get(t):typeof t=="number"?t:1}const g$=6.5,v$=1,Iee=30,b$=1e3/30,w$=100,_$=.9;var z9,Bu;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(p=>p.needsUpdate)}constructor(){this._updating=Av(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new ff("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=fs.INTERACTING,this._tasks=new gu,this._runQueue=new gu,this._load=0,this._idleStateCallbacks=new gu,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Ee(()=>Tee.SCHEDULER_LOG_SLOW_TASKS,y=>this._debug=y,St);for(const y of Object.keys(ct))this.performanceInfo.tasks.set(ct[y],new ff(ct[y]));const p=this;this._test={FRAME_SAFETY_BUDGET:g$,INTERACTING_BUDGET:b$,IDLE_BUDGET:w$,get availableBudget(){return p._budget.budget},usedBudget:0,getBudget:()=>p._budget,setBudget:y=>p._budget=y,updateTask:y=>this._updateTask(y),getState:y=>this._getState(y),getRuntime:y=>this._getRuntime(y),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(p=>p.remove()),this._tasks.clear(),fi(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(p){this._updatingChanged(),p&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(p,y){const m=m$(p),_=new i(this,p,y,m);return this._tasks.push(_),this._updatingChanged(),this.performanceInfo.tasks.has(p)||this.performanceInfo.tasks.set(p,new ff(p)),_}registerIdleStateCallbacks(p,y){const m={idleBegin:p,idleEnd:y};this._idleStateCallbacks.push(m),this.state===fs.IDLE&&this._idleUpdatesStartFired&&m.idleBegin();const _=this;return{remove:()=>this._removeIdleStateCallbacks(m),set idleBegin(x){_._idleUpdatesStartFired&&(m.idleEnd(),_._state===fs.IDLE&&x()),m.idleBegin=x},set idleEnd(x){m.idleEnd=x}}}get load(){return this._load}set state(p){this._state!==p&&(this._state=p,this.state!==fs.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(y=>y.idleEnd())))}get state(){return this._state}updateBudget(p){this._test.usedBudget=0,++this._frameNumber;let y=g$,m=p.frameDuration,_=v$;switch(this.state){case fs.IDLE:y=0,m=Math.max(w$,p.frameDuration),_=Iee;break;case fs.INTERACTING:m=Math.max(b$,p.frameDuration);case fs.ANIMATING:}return m=m-p.elapsedFrameTime-y,this.state!==fs.IDLE&&m<v$&&!this._forceTask?(this._forceTask=!0,!1):(m=Math.max(m,_),this._budget.reset(m,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case fs.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(p=>p.idleBegin())),this._runIdle();break;case fs.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(p){this._idleUpdatesStartFired&&p.idleEnd(),this._idleStateCallbacks.removeUnordered(p)}removeTask(p){this._tasks.removeUnordered(p),this._runQueue.removeUnordered(p),this._updatingChanged()}_updateTask(p){this._tasks.forAll(y=>{y.name===p&&y.setPriority(p)})}_getState(p){if(this._runQueue.some(m=>m.name===p))return Bu.SCHEDULED;let y=Bu.IDLE;return this._tasks.forAll(m=>{m.name===p&&m.needsUpdate&&(m.schedulePriority<=1?y=Bu.READY:y!==Bu.READY&&(y=Bu.WAITING))}),y}_getRuntime(p){let y=0;return this._tasks.forAll(m=>{m.name===p&&(y+=m.runtime)}),y}_resetRuntimes(){this._tasks.forAll(p=>p.runtime=0)}_getRunning(){const p=new Map;if(this._tasks.forAll(m=>{m.needsUpdate&&p.set(m.name,(p.get(m.name)||0)+1)}),p.size===0)return null;let y="";return p.forEach((m,_)=>{y+=m>1?` ${m}x ${_}`:` ${_}`}),y}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const p=this._tasks.reduce((y,m)=>m.needsUpdate?++y:y,0);this._load=this._load*_$+p*(1-_$)}_schedule(){for(this._runQueue.filterInPlace(p=>!!p.needsUpdate||(p.schedulePriority=p.basePriority,!1)),this._tasks.forAll(p=>{p.basePriority===Ao&&p.needsUpdate&&!this._runQueue.includes(p)&&p.blockFrame!==this._frameNumber&&this._runQueue.unshift(p)});this._runQueue.length===0;){let p=!1,y=0;if(this._tasks.forAll(m=>{m.needsUpdate&&m.schedulePriority!==0&&m.basePriority!==Ao&&m.blockFrame!==this._frameNumber&&(p=!0,y=Math.max(y,m.basePriority),m.schedulePriority===1?(m.schedulePriority=0,this._runQueue.push(m)):--m.schedulePriority)}),!p)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const p=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const y=this._budget.now(),m=this._runQueue.pop();this._budget.resetProgress();try{m.task.runTask(this._budget)===F9.YIELD&&(m.blockFrame=this._frameNumber)}catch(x){me.getLogger("esri.views.support.Scheduler").error(`Exception in task "${m.name}"`,x)}!this._budget.hasProgressed&&m.blockFrame!==this._frameNumber&&m.needsUpdate&&(m.name,ct.I3S_CONTROLLER,m.blockFrame=this._frameNumber),m.schedulePriority=m.basePriority;const _=this._budget.now()-y;if(m.runtime+=_,this._frameTaskTimes.set(m.priority,this._frameTaskTimes.get(m.priority)+_),this._debug&&_>2*this._budget.budget&&console.log("Task",m.name,"used",_,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-p)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-p)}_startFrameTaskTimes(){for(const p of Object.keys(ct))this._frameTaskTimes.set(ct[p],0)}_recordFrameTaskTimes(p){this._frameTaskTimes.forEach((y,m)=>this.performanceInfo.tasks.get(m).record(y)),this.performanceInfo.total.record(p)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(p,y,m,_){this._scheduler=p,this.name=y,this._basePriority=_,this.blockFrame=0,this.runtime=0,this._queue=new $ee,this._handles=new Ho,this.schedulePriority=this._basePriority,this._task=Av(m??this._queue),this._handles.add(qo(()=>this.task.running,x=>p.taskRunningChanged(x)))}remove(){this.processQueue(PP),this._scheduler.removeTask(this),this.schedule=V9.schedule,this.reschedule=V9.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(p){this.name=p;const y=m$(p);this._basePriority!==Ao&&this.schedulePriority===0||(this.schedulePriority=y),this._basePriority=y}get priority(){return this.name}set priority(p){this.setPriority(p)}get needsUpdate(){return this.updating||this.task.running}schedule(p,y,m){return this._queue.push(p,y,m)}reschedule(p,y,m){return this._queue.unshift(p,y,m)}processQueue(p){this._queue.runTask(p)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=fs.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(p){return!this.done&&(p()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(p){this._enabled=p}reset(p,y){this._begin=this.now(),this._budget=p,this._state=y,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=r})(z9||(z9={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Bu||(Bu={}));const PP=(()=>{const t=new z9.Budget;return t.enabled=!1,t})();let Mee=class{remove(){}processQueue(){}schedule(e,i,r){try{if(tn(i)){const a=hi();return r?Promise.resolve(r(a)):Promise.reject(a)}return w3(e(PP))}catch(a){return Promise.reject(a)}}reschedule(e,i,r){return this.schedule(e,i,r)}};const V9=new Mee;let V0=class extends je{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(ct.TEXTURE_UNLOAD))??V9}normalizeCtorArgs(){return{}}destroy(){var e,i,r;super.destroy(),(e=this._frameTask)==null||e.remove(),(i=this._textureRequests)==null||i.forEach(a=>this._releaseTextureRequest(a)),(r=this._textureRequests)==null||r.clear()}get updating(){return this._frameTask.updating}fromData(e,i,r){var y,m;const a=this.makeUid(e);let p=this._textureRequests.get(a);if(!p){const _=new Eee(r);_.texture=i(),(y=this._stage)==null||y.add(_.texture),(m=this._stage)==null||m.loadImmediate(_.texture),this._textureRequests.set(a,_),p=_}return p.referenceCount++,{uid:a,texture:p.texture,release:()=>this._release(a)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){var i;e.onRemove&&e.onRemove(),e.texture?(i=this._stage)==null||i.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return i!=null?`${e}.${i}px`:e}};v([S()],V0.prototype,"_frameTask",void 0),v([S()],V0.prototype,"updating",null),V0=v([B("esri.views.3d.support.TextureCollection")],V0);let Eee=class{constructor(e){this.onRemove=e,this.referenceCount=0}};var S$;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(S$||(S$={}));const NP=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],RP={};function LP(t){return!!RP[t]}function Aee(t){for(const e of t)if(!LP(e))return!1;return!0}NP.forEach(t=>{RP[t]=!0});let kee=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},a)=>{var p;return(p=this.inputManager)==null?void 0:p.installHandlers(a,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,a){const p=Array.isArray(e)?e:e.split(",");if(!Aee(p))return p.some(LP)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,m;Array.isArray(i)?m=i:(y=i,m=[]),typeof r=="function"?y=r:a=r,a=a??bu.DEFAULT;const _=this._createUniqueGroupName(),x=new Oee(this.view,p,m,y);this._handlers.set(_,{handler:x,priority:a});for(const M of p){const A=this._handlerCounts.get(M)||0;this._handlerCounts.set(M,A+1)}return this.inputManager&&this.inputManager.installHandlers(_,[x],a),{remove:()=>this._removeHandler(_,p)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const a=this._handlerCounts.get(r);a===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):a===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,a-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Oee=class extends Zi{constructor(e,i,r,a){super(!0),this._latestDragStart=void 0,this.view=e;for(const p of i)switch(p){case"click":this.registerIncoming("click",r,y=>a(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",r,y=>a(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",r,y=>a(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,y=>a(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",r,y=>a(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",r,y=>{const m=this._wrapDrag(y);m&&a(m)});break;case"key-down":this.registerIncoming("key-down",r,y=>a(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",r,y=>a(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",r,y=>a(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,y=>a(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,y=>a(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,y=>a(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,y=>a(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,y=>a(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,y=>a(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,y=>{a(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",r,y=>{a(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",r,y=>{a(this._wrapBlur(y))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:r,buttons:a,x:p,y,native:m,eventId:_}=e.data,{cancelable:x,timestamp:M}=e;return{type:"click",pointerType:i,button:r,buttons:a,x:p,y,native:m,timestamp:M,screenPoint:Hr(p,y),mapPoint:this._getMapPoint(p,y),eventId:_,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:r,buttons:a,x:p,y,native:m,eventId:_}=e.data,{cancelable:x,timestamp:M}=e;return{type:"double-click",pointerType:i,button:r,buttons:a,x:p,y,native:m,timestamp:M,mapPoint:this._getMapPoint(p,y),eventId:_,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:r,buttons:a,x:p,y,native:m,eventId:_}=e.data,x=m.pointerId,{cancelable:M,timestamp:A}=e;return{type:"immediate-click",pointerId:x,pointerType:i,button:r,buttons:a,x:p,y,native:m,timestamp:A,mapPoint:this._getMapPoint(p,y),eventId:_,cancelable:M,stopPropagation:()=>e.stopPropagation(),async:C=>e.async(C),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:r,buttons:a,x:p,y,native:m,eventId:_}=e.data,x=m.pointerId,{cancelable:M,timestamp:A}=e;return{type:"immediate-double-click",pointerId:x,pointerType:i,button:r,buttons:a,x:p,y,native:m,timestamp:A,mapPoint:this._getMapPoint(p,y),eventId:_,cancelable:M,stopPropagation:()=>e.stopPropagation(),async:C=>e.async(C),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:r,buttons:a,x:p,y,native:m}=e.data,{cancelable:_,timestamp:x}=e;return{type:"hold",pointerType:i,button:r,buttons:a,x:p,y,native:m,timestamp:x,mapPoint:this._getMapPoint(p,y),cancelable:_,stopPropagation:()=>e.stopPropagation(),async:M=>e.async(M),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(Hr(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:r,y:a}=i.center,{action:p,pointerType:y,button:m}=i;if(p==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const _=i.pointer.native,x=i.buttons,{cancelable:M,timestamp:A}=e,C={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return p==="end"&&(this._latestDragStart=void 0),{type:"drag",action:p,x:r,y:a,origin:C,pointerType:y,button:m,buttons:x,radius:i.radius,angle:HA(i.angle),native:_,timestamp:A,cancelable:M,stopPropagation:()=>e.stopPropagation(),async:N=>e.async(N),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:r,native:a}=e.data,{cancelable:p,timestamp:y}=e;return{type:"key-down",key:i,repeat:r,native:a,timestamp:y,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:r}=e.data,{cancelable:a,timestamp:p}=e;return{type:"key-up",key:i,native:r,timestamp:p,cancelable:a,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:r,y:a,button:p,buttons:y,native:m,eventId:_}=e.data,x=m.pointerId,M=m.pointerType,{cancelable:A,timestamp:C}=e;return{type:i,x:r,y:a,pointerId:x,pointerType:M,button:p,buttons:y,native:m,timestamp:C,eventId:_,cancelable:A,stopPropagation:()=>e.stopPropagation(),async:N=>e.async(N),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:r,buttons:a,native:p,eventId:y}=e.data.currentEvent,{button:m}=e.data.startEvent,_=e.data.startEvent.native.pointerId,x=e.data.startEvent.native.pointerType,M=e.data.action,A={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:C,timestamp:N}=e;return{type:"pointer-drag",x:i,y:r,pointerId:_,pointerType:x,button:m,buttons:a,action:M,origin:A,native:p,timestamp:N,eventId:y,cancelable:C,stopPropagation:()=>e.stopPropagation(),async:j=>e.async(j),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:r,timestamp:a}=e,{x:p,y,deltaY:m,native:_}=r;return{type:"mouse-wheel",x:p,y,deltaY:m,native:_,timestamp:a,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:x=>e.async(x),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:r,device:a}=e.data,{cancelable:p,timestamp:y}=e,{buttons:m,axes:_}=r;return{type:"gamepad",device:a,timestamp:y,action:i,buttons:m,axes:_,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:x=>e.async(x),preventDefault:()=>e.preventDefault()}}};var l1,x$,$$;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(l1||(l1={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(x$||(x$={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}($$||($$={}));function Cee(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return me.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function G9(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(l1.USER)&&t.getEditableFlag(l1.MANAGER)}function So(t){return Hr(t.x,t.y)}function jP(t,e){var r;const i=(r=t instanceof HTMLElement?t:t.surface)==null?void 0:r.getBoundingClientRect();return i?Hr(e.clientX-i.left,e.clientY-i.top):Hr(0,0)}function T$(t,e){return e instanceof Event?jP(t,e):So(e)}function I$(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let Pee=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":M$(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!E$(e))break;const a=So(e),p=this._intersect(a,e.pointerType,i.forEachTool);if(p==null)break;const y=p.manipulator,m=p.tool;y==null||m==null||!y.interactive||y.grabbable&&y.grabbableForEvent(e)||!y.grabbing||y.dragging||this._ungrabManipulatorBeforeDragging(y,e,i),y!=null&&m!=null&&y.interactive&&y.grabbable&&y.grabbableForEvent(e)&&!y.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:y,tool:m,start:a,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(p.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:a}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!E$(e))break;const a=this._grabbedManipulators.get(e.pointerId),p=Kh(a,({manipulator:M})=>M),y=Kh(a,({tool:M})=>M);if(p==null||y==null)break;const m=So(e);m.x=nn(m.x,0,i.view.width),m.y=nn(m.y,0,i.view.height);const _=a.start,x=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(p.dragging=!0,x?p.events.emit("drag",{action:"update",start:_,screenPoint:m}):p.events.emit("drag",{action:"start",start:_,screenPoint:m,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:y,manipulator:p,start:_}));break;case"end":p.dragging=!1,x&&p.events.emit("drag",{action:"end",start:_,screenPoint:m}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const a=So(e),p=this._intersect(a,e.pointerType,i.forEachTool);if(Nee(e)||i.forEachTool(x=>{if((p==null||p.tool!==x||x.automaticManipulatorSelection)&&x.manipulators){let M=!1;x.manipulators.forEach(({manipulator:A})=>{A.selected&&(A.selected=!1,M=!0)}),M&&x.onManipulatorSelectionChanged&&x.onManipulatorSelectionChanged()}}),p==null)break;const{manipulator:y,tool:m}=p;if(!y.interactive)break;y.selectable&&m.automaticManipulatorSelection&&(y.selected=!y.selected,m.onManipulatorSelectionChanged&&m.onManipulatorSelectionChanged());const _=e.native.shiftKey;y.events.emit("immediate-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:_,stopPropagation:r});break}case"click":{const a=So(e),p=this._intersect(a,e.pointerType,i.forEachTool),y=p!=null?p.manipulator:null;if(y==null||!y.interactive)break;const m=e.native.shiftKey;y.events.emit(e.type,{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:m}),r();break}case"double-click":{const a=So(e),p=this._intersect(a,e.pointerType,i.forEachTool),y=p!=null?p.manipulator:null;if(y==null||!y.interactive)break;const m=e.native.shiftKey;y.events.emit("double-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:r});break}case"immediate-double-click":{const a=So(e),p=this._intersect(a,e.pointerType,i.forEachTool),y=p!=null?p.manipulator:null;if(y==null||!y.interactive)break;const m=e.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:m,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:So(i)}),this._grabbedManipulators.forEach(({manipulator:a},p)=>{a===e&&this._grabbedManipulators.delete(p)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(e,i){const r=Kh(this._grabbedManipulators.get(e.pointerId),({manipulator:a})=>a);r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:So(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return m2(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:a})=>{i.add(a)}),this._hoveredManipulators.forEach(({tool:a})=>{r.add(a)}),e(a=>{a.hasGrabbedManipulators=i.has(a),a.hasHoveredManipulators=r.has(a);const p=this._grabbedManipulators.values(),y=gF(p,({tool:m})=>m===a);a.firstGrabbedManipulator=y!=null?y.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:r},a=!0,p){const y=(m,_)=>m===e&&(p==null||p===_);this._grabbedManipulators.forEach(({tool:m,manipulator:_,pointerType:x},M)=>{y(m,_)&&(this._grabbedManipulators.delete(M),_.grabbing=!1,_.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:x}))}),this._draggedManipulators.forEach(({tool:m,manipulator:_},x)=>{y(m,_)&&(this._draggedManipulators.delete(x),_.dragging=!1,_.events.emit("drag",{action:"cancel"}))}),a&&this._hoveredManipulators.forEach(({tool:m,manipulator:_},x)=>{y(m,_)&&(this._hoveredManipulators.delete(x),_.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(e,i,r){let a=null;return r(p=>{if(p.manipulators==null||!G9(p))return!1;const y=p.manipulators.intersect(e,i);return y!=null&&(a={tool:p,manipulator:y},!0)}),a}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Hr(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!M$(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(So(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,r,a){let p=this._intersect(e,r,a);const y=Kh(this._hoveredManipulators.get(i),({manipulator:m})=>m);p==null||p.manipulator.interactive||(p=null),p!=null&&y===p.manipulator||(y!=null&&(y.hovering=!1),p!=null?(p.manipulator.hovering=!0,this._hoveredManipulators.set(i,p)):this._hoveredManipulators.delete(i),this._onFocusChange(a))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function M$(t){return t==="mouse"}function E$(t){return t.pointerType!=="mouse"||t.button===0}function Nee(t){return!!t.native.shiftKey}const A$="attached",cw="tools",Ree=1e3;let En=class extends kv{constructor(e){super(e),this._clock=bd,this._manipulatorState=new Pee,this.tools=new De,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.handles.add([this.view.on(NP,e=>{this._handleInputEvent(e)},bu.TOOL),...Cee(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void me.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const a=G9(r);this.activeTool!=null&&a||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!a)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=fi(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout(()=>this._interacting=!1,Ree)}attach(){var e;this.view.type==="3d"?(this._set("textures",new V0(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Ee(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i))),jo(()=>this._set("textures",Wt(this.textures)))],A$)):this.handles.add(Ee(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(A$),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))})}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(a=>{!i&&a.visible&&a.handleInputEvent(r)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(cw),this._forEachTool(e=>{if(e instanceof je){const i=Ee(()=>[e.cursor,e.visible,e.editable],()=>{G9(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,cw)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],cw)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,l1.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){return{setClock:e=>this._clock=e}}};v([S({constructOnly:!0,nonNullable:!0})],En.prototype,"view",void 0),v([S({readOnly:!0,nonNullable:!0})],En.prototype,"textures",void 0),v([S({value:null})],En.prototype,"activeTool",null),v([S({readOnly:!0,type:De})],En.prototype,"tools",void 0),v([S({readOnly:!0})],En.prototype,"cursor",void 0),v([S({readOnly:!0})],En.prototype,"updating",null),v([S()],En.prototype,"_interacting",void 0),v([S({readOnly:!0})],En.prototype,"interacting",null),En=v([B("esri.views.ToolViewManager")],En);let ap=class extends je{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Lee.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return jee[this.deviceType]}};v([S({nonNullable:!0,readOnly:!0})],ap.prototype,"nativeIndex",void 0),v([S({type:String,readOnly:!0})],ap.prototype,"deviceType",null),v([S({type:Number,readOnly:!0})],ap.prototype,"axisThreshold",null),ap=v([B("esri.views.input.gamepad.GamepadInputDevice")],ap);const Lee=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),jee={standard:.15,spacemouse:.025,unknown:0},N6=ap;let G0=class extends je{constructor(...e){super(...e),this.devices=new De,this.enabledFocusMode="document"}};v([S({type:De.ofType(N6),readOnly:!0})],G0.prototype,"devices",void 0),v([S({type:["document","view","none"]})],G0.prototype,"enabledFocusMode",void 0),G0=v([B("esri.views.input.gamepad.GamepadSettings")],G0);const Dee=G0;let eg=class extends je{constructor(){super(...arguments),this.gamepad=new Dee}};v([S({readOnly:!0})],eg.prototype,"gamepad",void 0),eg=v([B("esri.views.input.Input")],eg);const Fee=eg;let Pl=class extends je{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};v([S({type:Boolean,nonNullable:!0})],Pl.prototype,"enabled",void 0),v([S({type:N6})],Pl.prototype,"device",void 0),v([S({type:["pan","zoom"],nonNullable:!0})],Pl.prototype,"mode",void 0),v([S({type:["forward-down","forward-up"],nonNullable:!0})],Pl.prototype,"tiltDirection",void 0),v([S({type:Number,nonNullable:!0})],Pl.prototype,"velocityFactor",void 0),Pl=v([B("esri.views.navigation.gamepad.GamepadSettings")],Pl);const DP=Pl;let vh=class extends je{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new DP,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};v([S({type:Boolean})],vh.prototype,"browserTouchPanEnabled",void 0),v([S({type:DP,nonNullable:!0})],vh.prototype,"gamepad",void 0),v([S({type:Boolean})],vh.prototype,"momentumEnabled",void 0),v([S({type:Boolean})],vh.prototype,"mouseWheelZoomEnabled",void 0),vh=v([B("esri.views.navigation.Navigation")],vh);const FP=vh,zP={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},VP=Object.values(zP),GP=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${VP.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),zee=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${VP.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Vee=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Gee(t){return!!GP.test(t)}function Gu(t){if(t==null)return null;const e=or(t),i=e.path.match(GP)||e.path.match(zee);if(!i)return null;const[,r,a,p,y]=i,m=a.indexOf("/");return{title:R6(m!==-1?a.slice(m+1):a),serverType:zP[p.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:r}}}function qee(t){const e=or(t).path.match(Vee);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function R6(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function Uee(t,e){const i=[];if(t){const r=Gu(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=R6(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function L6(t){if(!t)return!1;const e=".arcgis.com/",i="//services",r="//tiles",a="//features",p=(t=t.toLowerCase()).includes(e),y=t.includes(i)||t.includes(r)||t.includes(a);return p&&y}function Bee(t,e){return t&&HE(WE(t,e))}function Hee(t){let{url:e}=t;if(!e)return{url:e};e=WE(e,t.logger);const i=or(e),r=Gu(i.path);let a;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(a=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const p=qee(i.path);p!=null&&(e=p.serviceUrl,a=p.sublayerId)}return{url:HE(e),layerId:a}}function Wee(t,e,i,r,a){bc(e,r,"url",a),r.url&&t.layerId!=null&&(r.url=Ua(r.url,i,t.layerId.toString()))}function vve(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),a=e.includes("/imageserver/wmsserver"),p=e.includes("/wmsserver");return i&&(r||a||p)}var k$;function Jee(t){var r;const e=t.url?Gu(t.url):void 0;return!(((r=t.spatialReference)==null?void 0:r.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&qP(t)&&t.heightModelInfo?t.heightModelInfo:Kee(t)?W2.deriveUnitFromSR(Zee,t.spatialReference):null}function qP(t){return"heightModelInfo"in t}function UP(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Kee(t){return UP(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):BP(t)}function Yee(t){return t.layers!=null||BP(t)||UP(t)||qP(t)}function BP(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(k$||(k$={}));const Zee=new W2({heightModel:"gravity-related-height"});var Pv;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(Pv||(Pv={}));let q9,pw=null;async function Xee(t){pw||(pw=we(()=>import("./geometryServiceUtils-810496f6.js"),[]).then(e=>q9=e)),await pw,Zt(t)}async function HP(t,e,i,r){if(!t)return null;const a=t.spatialReference;return Cc()||Ja(a,e)?Vu(t,e):q9?q9.projectGeometry(t,e,i,r):(await Promise.race([Xee(r),Eu(r)]),HP(t,e,i,r))}let Ht=class extends je{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=lc(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,a,p,y;const e=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(a=e==null?void 0:e.basemap)==null?void 0:a.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(p=e==null?void 0:e.ground)==null?void 0:p.layers},{parent:e==null?void 0:e.basemap,layers:(y=e==null?void 0:e.basemap)==null?void 0:y.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let r=null;for(const p of e){const y=this._getSupportedSpatialReferences(p);if(y.length>0){const m=this._narrowDownSpatialReferenceCandidates(r,y);m!=null&&(r=m)}if(r!=null&&r.length===1)break}if(i&&(r==null||r.length!==1))return{updating:!0};const a=this._pickSpatialReferenceCandidate(r);return{spatialReference:a!=null?a.spatialReference:null,viewingMode:a!=null?a.viewingMode:null,updating:!1}}get _tileInfoTask(){var r,a,p,y,m,_,x;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(a=(r=this.map)==null?void 0:r.call(this))==null?void 0:a.basemap,layers:(m=(y=(p=this.map)==null?void 0:p.call(this))==null?void 0:y.basemap)==null?void 0:m.baseLayers},{layers:(x=(_=this.map)==null?void 0:_.call(this))==null?void 0:x.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const M=e[0].tileInfo;return{tileInfo:M&&M.spatialReference.equals(this.spatialReference)?M:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var r,a,p;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const y of e)if(Yee(y)){const m=Jee(y);if(m)return{heightModelInfo:m,vcsWkid:(a=y.spatialReference)==null?void 0:a.vcsWkid,latestVcsWkid:(p=y.spatialReference)==null?void 0:p.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,r=[];for(const a of e.layers){const p="fullExtents"in a&&a.fullExtents||(a.fullExtent!=null?[a.fullExtent]:[]),y=this.requiresExtentInSpatialReference?null:p[0],m=p.find(_=>_.spatialReference.equals(this.spatialReference))??y;if(m)return{candidates:[{extent:m,layer:a}],updating:!1};if(this._getSupportedSpatialReferences(a).length>0)for(const _ of p)r.push({extent:_,layer:a})}return{candidates:r,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),a=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&a.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=lc(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:a.clone(),task:pS(async p=>{try{const y=await HP(r.extent,a,"portalItem"in r.layer?r.layer.portalItem:void 0,p);this._projectExtentTask={...this._projectExtentTask,task:null,output:y}}catch{if(tn(p))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=[],a=(p,y)=>p!=null?y!=null?p===y&&p:p:y;for(const p of e)for(const y of i){if(!p.spatialReference.equals(y.spatialReference))continue;const m=a(p.viewingMode,y.viewingMode);if(m!==!1){r.push({spatialReference:p.spatialReference,viewingMode:m});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==Pv.Local)&&(e=e.filter(({viewingMode:r})=>r!==Pv.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const a of i){const p=this.getSpatialReferenceSupport({spatialReference:a,layer:e});if(p!=null){const y=p.constraints!=null?p.constraints:[{spatialReference:a,viewingMode:null}];for(const{spatialReference:m,viewingMode:_}of y)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!m.equals(this.userSpatialReference)||r.push({spatialReference:m,viewingMode:_})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e){var r;if(this._loadMaybe((r=this.map)==null?void 0:r.call(this))!=="loaded")return{layers:[],updating:!0};const i=new Qee;for(const a of e)if(this._collectCollection(a,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{dr(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};v([S()],Ht.prototype,"required",void 0),v([S({constructOnly:!0})],Ht.prototype,"map",void 0),v([S({constructOnly:!0})],Ht.prototype,"getSpatialReferenceSupport",void 0),v([S()],Ht.prototype,"defaultSpatialReference",void 0),v([S()],Ht.prototype,"userSpatialReference",void 0),v([S()],Ht.prototype,"sourcePreloadCount",void 0),v([S()],Ht.prototype,"priorityCollection",void 0),v([S()],Ht.prototype,"requiresExtentInSpatialReference",void 0),v([S()],Ht.prototype,"suspended",void 0),v([S({readOnly:!0})],Ht.prototype,"ready",null),v([S({readOnly:!0})],Ht.prototype,"heightModelInfoReady",null),v([S({readOnly:!0})],Ht.prototype,"spatialReference",null),v([S({readOnly:!0})],Ht.prototype,"extent",null),v([S({readOnly:!0})],Ht.prototype,"heightModelInfo",null),v([S({readOnly:!0})],Ht.prototype,"vcsWkid",null),v([S({readOnly:!0})],Ht.prototype,"latestVcsWkid",null),v([S({readOnly:!0})],Ht.prototype,"viewingMode",null),v([S({readOnly:!0})],Ht.prototype,"tileInfo",null),v([S({readOnly:!0})],Ht.prototype,"mapCollections",null),v([S({readOnly:!0})],Ht.prototype,"_allLayers",null),v([S({readOnly:!0})],Ht.prototype,"_spatialReferenceTask",null),v([S({readOnly:!0})],Ht.prototype,"_tileInfoTask",null),v([S({readOnly:!0})],Ht.prototype,"_heightModelInfoTask",null),v([S({readOnly:!0})],Ht.prototype,"_extentCandidatesTask",null),v([S()],Ht.prototype,"_extentTask",null),v([S()],Ht.prototype,"_projectExtentTask",void 0),Ht=v([B("esri.views.support.DefaultsFromMap")],Ht);let Qee=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var q0;let Ge=q0=class extends Xa(Wo.EventedMixin(w2(je))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new ld({getCollections:()=>{var e,i,r;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:tte}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Cf,this.analyses=new Cv,this.typeSpecificPreconditionsReady=!0,this.layerViews=new De,this.magnifier=new CP,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Au,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Fee,this.navigation=new FP,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new kee(this),this.persistableViewModels=new De,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(Ee(()=>this.preconditionsReady,e=>{var i,r;e?(this._currentSpatialReference=this.spatialReference,q0.views.add(this)):(this._currentSpatialReference=null,q0.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Cd))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,s1(()=>this.ready)))),this.basemapView=new Cl({view:this}),this.layerViewManager=new See({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new En({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Ee(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),Ee(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),Ee(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([Ee(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const a=jo(()=>t=lc(t));t=pS(async p=>{try{await nS(this.spatialReferenceWarningDelay,null,p)}catch{return}finally{t=null}me.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(a,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(q0.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Wt(this.graphics),this.analyses=Wt(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Wt(this.analysisViewManager),this.toolViewManager=Wt(this.toolViewManager),this.layerViewManager=Wt(this.layerViewManager),this.basemapView=Wt(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=Wt(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return me.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ht({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Fo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(me.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),Fo.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!Ci(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return t??(this._cursor||"default")}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new ie("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&me.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(qo(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};Ge.views=new De,v([S()],Ge.prototype,"_userSpatialReference",void 0),v([S()],Ge.prototype,"activeTool",null),v([S({readOnly:!0})],Ge.prototype,"allLayerViews",void 0),v([S()],Ge.prototype,"groundView",void 0),v([S()],Ge.prototype,"animation",null),v([S()],Ge.prototype,"basemapView",void 0),v([S()],Ge.prototype,"center",null),v([S({readOnly:!0})],Ge.prototype,"_defaultsFromMapSettings",null),v([S()],Ge.prototype,"defaultsFromMap",null),v([S()],Ge.prototype,"fatalError",void 0),v([S({type:vt})],Ge.prototype,"extent",null),v([S(c$(Cf,"graphics"))],Ge.prototype,"graphics",void 0),v([S(c$(Cv,"analyses"))],Ge.prototype,"analyses",void 0),v([S({readOnly:!0,type:W2})],Ge.prototype,"heightModelInfo",null),v([S({readOnly:!0})],Ge.prototype,"interacting",null),v([S({readOnly:!0})],Ge.prototype,"navigating",null),v([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ge.prototype,"preconditionsReady",null),v([S({readOnly:!0})],Ge.prototype,"typeSpecificPreconditionsReady",void 0),v([S({type:De,readOnly:!0})],Ge.prototype,"layerViews",void 0),v([S()],Ge.prototype,"resolution",null),v([S({type:CP})],Ge.prototype,"magnifier",void 0),v([S({value:null,type:mk})],Ge.prototype,"map",null),v([S()],Ge.prototype,"padding",void 0),v([S({readOnly:!0})],Ge.prototype,"ready",void 0),v([S({type:Je})],Ge.prototype,"spatialReference",null),v([S()],Ge.prototype,"spatialReferenceWarningDelay",void 0),v([S()],Ge.prototype,"stationary",null),v([S({readOnly:!0})],Ge.prototype,"supportsGround",void 0),v([S({type:ln})],Ge.prototype,"timeExtent",void 0),v([S({type:Au,nonNullable:!0})],Ge.prototype,"timeReference",void 0),v([S()],Ge.prototype,"tools",null),v([S()],Ge.prototype,"toolViewManager",void 0),v([S({readOnly:!0})],Ge.prototype,"type",void 0),v([S({type:Number})],Ge.prototype,"scale",void 0),v([S({readOnly:!0})],Ge.prototype,"updating",void 0),v([S({readOnly:!0})],Ge.prototype,"initialExtentRequired",void 0),v([S({readOnly:!0})],Ge.prototype,"initialExtent",null),v([S()],Ge.prototype,"cursor",null),v([S({readOnly:!0})],Ge.prototype,"input",void 0),v([S({type:FP,nonNullable:!0})],Ge.prototype,"navigation",void 0),v([S()],Ge.prototype,"layerViewManager",void 0),v([S()],Ge.prototype,"analysisViewManager",void 0),v([S()],Ge.prototype,"width",void 0),v([S()],Ge.prototype,"height",void 0),v([S({readOnly:!0})],Ge.prototype,"resizing",void 0),v([S({value:null,readOnly:!0})],Ge.prototype,"size",null),v([S({readOnly:!0})],Ge.prototype,"suspended",void 0),v([S({readOnly:!0})],Ge.prototype,"viewEvents",void 0),v([S({readOnly:!0})],Ge.prototype,"persistableViewModels",void 0),v([S()],Ge.prototype,"_isValid",void 0),v([S()],Ge.prototype,"_readyCycleForced",void 0),v([S()],Ge.prototype,"_currentSpatialReference",void 0),Ge=q0=v([B("esri.views.View")],Ge);const ete=Ge;function tte(t){return t.layerViews}let Nl=class extends Qg{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=rn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new ie("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=Ya(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};v([S({readOnly:!0})],Nl.prototype,"done",null),v([S({readOnly:!0,type:String})],Nl.prototype,"state",void 0),v([S()],Nl.prototype,"target",void 0),Nl=v([B("esri.views.ViewAnimation")],Nl),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Nl||(Nl={}));const U9=Nl;function Uh(t,e,i,r){const a=3*t,p=3*(i-t)-a,y=1-a-p,m=3*e,_=3*(r-e)-m,x=1-m-_;function M(j){return((y*j+p)*j+a)*j}function A(j){return((x*j+_)*j+m)*j}function C(j){return(3*y*j+2*p)*j+a}function N(j,D){let z,W,Y,K,ee,ne;for(Y=j,ne=0;ne<8;ne++){if(K=M(Y)-j,Math.abs(K)<D)return Y;if(ee=C(Y),Math.abs(ee)<1e-6)break;Y-=K/ee}if(z=0,W=1,Y=j,Y<z)return z;if(Y>W)return W;for(;z<W;){if(K=M(Y),Math.abs(K-j)<D)return Y;j>K?z=Y:W=Y,Y=.5*(W-z)+z}return Y}return function(j,D=1e-6){return A(N(j,D))}}const ite=/^cubic-bezier\((.*)\)/,Ws={};function rte(t){let e=Ws[t]||null;if(!e){const i=ite.exec(t);if(i){const r=i[1].split(",").map(a=>parseFloat(a.trim()));r.length!==4||r.some(a=>isNaN(a))||(e=Uh.apply(Uh,r))}}return e}Ws.ease=Uh(.25,.1,.25,1),Ws.linear=Uh(0,0,1,1),Ws.easeIn=Ws["ease-in"]=Uh(.42,0,1,1),Ws.easeOut=Ws["ease-out"]=Uh(0,0,.58,1),Ws.easeInOut=Ws["ease-in-out"]=Uh(.42,0,.58,1);function ste(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function nte(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function ote(t,e,i,r,a,p,y){return t[0]=e,t[1]=i,t[2]=r,t[3]=a,t[4]=p,t[5]=y,t}function j6(t,e){const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],m=e[5];let _=i*p-r*a;return _?(_=1/_,t[0]=p*_,t[1]=-r*_,t[2]=-a*_,t[3]=i*_,t[4]=(a*m-p*y)*_,t[5]=(r*y-i*m)*_,t):null}function ate(t){return t[0]*t[3]-t[1]*t[2]}function WP(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=e[4],_=e[5],x=i[0],M=i[1],A=i[2],C=i[3],N=i[4],j=i[5];return t[0]=r*x+p*M,t[1]=a*x+y*M,t[2]=r*A+p*C,t[3]=a*A+y*C,t[4]=r*N+p*j+m,t[5]=a*N+y*j+_,t}function J2(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=e[4],_=e[5],x=Math.sin(i),M=Math.cos(i);return t[0]=r*M+p*x,t[1]=a*M+y*x,t[2]=r*-x+p*M,t[3]=a*-x+y*M,t[4]=m,t[5]=_,t}function D6(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=e[4],_=e[5],x=i[0],M=i[1];return t[0]=r*x,t[1]=a*x,t[2]=p*M,t[3]=y*M,t[4]=m,t[5]=_,t}function u1(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=e[4],_=e[5],x=i[0],M=i[1];return t[0]=r,t[1]=a,t[2]=p,t[3]=y,t[4]=r*x+p*M+m,t[5]=a*x+y*M+_,t}function JP(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function KP(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function F6(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function lte(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ute(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function hte(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function YP(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function cte(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function pte(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function dte(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function fte(t,e){const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],m=t[5],_=e[0],x=e[1],M=e[2],A=e[3],C=e[4],N=e[5],j=an();return Math.abs(i-_)<=j*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(r-x)<=j*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-M)<=j*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(p-A)<=j*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(y-C)<=j*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(m-N)<=j*Math.max(1,Math.abs(m),Math.abs(N))}const yte=WP,mte=YP;Object.freeze(Object.defineProperty({__proto__:null,add:hte,copy:ste,determinant:ate,equals:fte,exactEquals:dte,frob:ute,fromRotation:JP,fromScaling:KP,fromTranslation:F6,identity:nte,invert:j6,mul:yte,multiply:WP,multiplyScalar:cte,multiplyScalarAndAdd:pte,rotate:J2,scale:D6,set:ote,str:lte,sub:mte,subtract:YP,translate:u1},Symbol.toStringTag,{value:"Module"}));function wu(){return[1,0,0,1,0,0]}function gte(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function vte(t,e,i,r,a,p){return[t,e,i,r,a,p]}function bte(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:gte,create:wu,createView:bte,fromValues:vte},Symbol.toStringTag,{value:"Module"}));function h1(t,e){return t[0]=e[0],t[1]=e[1],t}function ir(t,e,i){return t[0]=e,t[1]=i,t}function ZP(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function c1(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function XP(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function QP(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function wte(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function _te(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Ste(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function xte(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function $te(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function F1(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Tte(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function z1(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function Nv(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function Rv(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function eN(t){const e=t[0],i=t[1];return e*e+i*i}function tN(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Ite(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function B9(t,e){const i=e[0],r=e[1];let a=i*i+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t}function iN(t,e){return t[0]*e[0]+t[1]*e[1]}function rN(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function Mte(t,e,i,r){const a=e[0],p=e[1];return t[0]=a+r*(i[0]-a),t[1]=p+r*(i[1]-p),t}function Ete(t,e){e=e||1;const i=2*M2()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function Ate(t,e,i){const r=e[0],a=e[1];return t[0]=i[0]*r+i[2]*a,t[1]=i[1]*r+i[3]*a,t}function Oo(t,e,i){const r=e[0],a=e[1];return t[0]=i[0]*r+i[2]*a+i[4],t[1]=i[1]*r+i[3]*a+i[5],t}function kte(t,e,i){const r=e[0],a=e[1];return t[0]=i[0]*r+i[3]*a+i[6],t[1]=i[1]*r+i[4]*a+i[7],t}function Ote(t,e,i){const r=e[0],a=e[1];return t[0]=i[0]*r+i[4]*a+i[12],t[1]=i[1]*r+i[5]*a+i[13],t}function Cte(t,e,i,r){const a=e[0]-i[0],p=e[1]-i[1],y=Math.sin(r),m=Math.cos(r);return t[0]=a*m-p*y+i[0],t[1]=a*y+p*m+i[1],t}function Pte(t,e){const i=t[0],r=t[1],a=e[0],p=e[1];let y=i*i+r*r;y>0&&(y=1/Math.sqrt(y));let m=a*a+p*p;m>0&&(m=1/Math.sqrt(m));const _=(i*a+r*p)*y*m;return _>1?0:_<-1?Math.PI:Math.acos(_)}function Nte(t){return"vec2("+t[0]+", "+t[1]+")"}function Rte(t,e){return t[0]===e[0]&&t[1]===e[1]}function Lte(t,e){const i=t[0],r=t[1],a=e[0],p=e[1],y=an();return Math.abs(i-a)<=y*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-p)<=y*Math.max(1,Math.abs(r),Math.abs(p))}function jte(t,e,i,r,a){let p=e[0]-i[0],y=e[1]-i[1];const m=(r[0]*p+r[1]*y)*(a-1);return p=r[0]*m,y=r[1]*m,t[0]=e[0]+p,t[1]=e[1]+y,t}const Dte=Rv,z6=c1,Fte=XP,zte=QP,Vte=z1,Gte=Nv,qte=eN;Object.freeze(Object.defineProperty({__proto__:null,add:ZP,angle:Pte,ceil:wte,copy:h1,cross:rN,dist:Vte,distance:z1,div:zte,divide:QP,dot:iN,equals:Lte,exactEquals:Rte,floor:_te,inverse:Ite,len:Dte,length:Rv,lerp:Mte,max:xte,min:Ste,mul:Fte,multiply:XP,negate:tN,normalize:B9,projectAndScale:jte,random:Ete,rotate:Cte,round:$te,scale:F1,scaleAndAdd:Tte,set:ir,sqrDist:Gte,sqrLen:qte,squaredDistance:Nv,squaredLength:eN,str:Nte,sub:z6,subtract:c1,transformMat2:Ate,transformMat2d:Oo,transformMat3:kte,transformMat4:Ote},Symbol.toStringTag,{value:"Module"}));function Ai(){return[0,0]}function Ute(t){return[t[0],t[1]]}function V1(t,e){return[t,e]}function Bte(t){const e=Ai(),i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Hte(t,e){return new Float64Array(t,e,2)}function sN(){return Ai()}function nN(){return V1(1,1)}function oN(){return V1(1,0)}function aN(){return V1(0,1)}const Wte=sN(),Jte=nN(),Kte=oN(),Yte=aN();Object.freeze(Object.defineProperty({__proto__:null,ONES:Jte,UNIT_X:Kte,UNIT_Y:Yte,ZEROS:Wte,clone:Ute,create:Ai,createView:Hte,fromArray:Bte,fromValues:V1,ones:nN,unitX:oN,unitY:aN,zeros:sN},Symbol.toStringTag,{value:"Module"}));const lN=96,uN=39.37,Zte=180/Math.PI;function hN(t){return t.wkid?t:t.spatialReference||Je.WGS84}function V6(t,e){return e.type?ir(t,e.x,e.y):h1(t,e)}function cN(t){return Jo(t)}function Kp(t,e){const i=Math.max(1,e[0]),r=Math.max(1,e[1]);return Math.max(t.width/i,t.height/r)*oie(t.spatialReference)}async function U0(t,e,i,r){var m,_;let a,p;if(!t||Array.isArray(t)&&!t.length)return null;if(De.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const x=t.every(C=>"attributes"in C),M=t.some(C=>!C.geometry);let A=t;if(x&&M&&e&&e.allLayerViews){const C=new Map;for(const z of t){const W=z.layer,Y=C.get(W)||[],K=z.attributes[W.objectIdField];K!=null&&Y.push(K),C.set(W,Y)}const N=[];C.forEach((z,W)=>{const Y=e.allLayerViews.find(K=>K.layer.id===W.id);if(Y&&"queryFeatures"in Y){const K=W.createQuery();K.objectIds=z,K.returnGeometry=!0,N.push(Y.queryFeatures(K))}});const j=await Promise.all(N),D=[];for(const z of j)if(z&&z.features&&z.features.length)for(const W of z.features)W.geometry!=null&&D.push(W.geometry);A=D}for(const C of A)r=await U0(C,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")a=new Ue(t);else if(t instanceof Pu)a=t;else if("geometry"in t){if(t.geometry)a=t.geometry;else if(t.layer){const x=t.layer,M=e.allLayerViews.find(A=>A.layer.id===x.id);if(M&&"queryFeatures"in M){const A=x.createQuery();A.objectIds=[t.attributes[x.objectIdField]],A.returnGeometry=!0;const C=await M.queryFeatures(A);a=(_=(m=C==null?void 0:C.features)==null?void 0:m[0])==null?void 0:_.geometry}}}if(a==null||(p=a.type==="point"?new vt({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference}):a.extent,!p))return null;Cc()||Ja(p.spatialReference,i)||await Eu();const y=Vu(p,i);return y?r=r?r.union(y):y:null}function Xte(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const a=r.layer;a&&a.minScale&&a.maxScale&&(e=a.minScale<e?a.minScale:e,i=a.maxScale>i?a.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function dw(t,e){return Ci(hN(t),e)?t:Vu(t,e)}async function Qte(t,e){if(!t||!e)return new Ro({targetGeometry:new Ue,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:a,viewpoint:p,size:y}=e,m=[a?y[0]-a.left-a.right:y[0],a?y[1]-a.top-a.bottom:y[1]];let _=null;t instanceof Ro?_=t:t.viewpoint?_=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(_=t.target);let x=null;_&&_.targetGeometry?x=_.targetGeometry:t instanceof vt?x=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(x=await U0(t.center,e,i)||await U0(t.extent,e,i)||await U0(t.target,e,i)||await U0(t,e,i)),!x&&p&&p.targetGeometry?x=p.targetGeometry:!x&&e.extent&&(x=e.extent),i||(i=hN(e.spatialReference||e.extent||x)),Cc()||Ci(x.spatialReference,i)||Ja(x,i)||await Eu();const M=dw(x.center??x,i);let A=0;if(_&&_.targetGeometry!=null&&_.targetGeometry.type==="point")A=_.scale;else if("scale"in t&&t.scale)A=t.scale;else if("zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs)A=r.zoomToScale(t.zoom);else if(Array.isArray(x)||x.type==="point"||x.type==="extent"&&x.width===0&&x.height===0){const D=dw(e.extent,i);A=D!=null?Kp(D,m):e.extent?Kp(e.extent,m):p.scale}else A=Kp(dw(x.extent,i),m);const C=Xte(t);C&&(C.min&&C.min>A?A=C.min:C.max&&C.max<A&&(A=C.max));let N=0;_?N=_.rotation:t.hasOwnProperty("rotation")?N=t.rotation:p&&(N=p.rotation);let j=new Ro({targetGeometry:M,scale:A,rotation:N});return r&&(j=r.fit(j),r.constrainByGeometry(j),r.rotationEnabled||(j.rotation=N)),j}function so(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function eie(t,e,i){return i?ir(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):F1(t,e,.5)}const tie=function(){const t=Ai();return function(e,i,r){const a=i.targetGeometry;V6(t,a);const p=.5*Nd(i);return e.xmin=t[0]-p*r[0],e.ymin=t[1]-p*r[1],e.xmax=t[0]+p*r[0],e.ymax=t[1]+p*r[1],e.spatialReference=a.spatialReference,e}}();function iie(t,e,i,r,a){var p;return H9(t,e,i.center),t.scale=Kp(i,r),(p=a==null?void 0:a.constraints)==null||p.constrain(t),t}function rie(t,e,i,r){return U6(t,e,i,r),j6(t,t)}const pN=function(){const t=Ai();return function(e,i,r){return z6(e,aie(e,i),eie(t,i,r))}}(),sie=function(){const t=wu(),e=Ai();return function(i,r,a,p){const y=Nd(r),m=G6(r);return ir(e,y,y),KP(t,e),J2(t,t,m),u1(t,t,pN(e,a,p)),u1(t,t,[0,p.top-p.bottom]),ir(i,t[4],t[5])}}();function Nd(t){return t.scale*nie(t.targetGeometry)}function nie(t){return t!=null&&sr(t.spatialReference)?1/(cN(t.spatialReference)*uN*lN):1}function G6(t){return LS(t.rotation)||0}function oie(t){return sr(t)?cN(t)*uN*lN:1}function aie(t,e){return F1(t,e,.5)}const q6=function(){const t=Ai(),e=Ai(),i=Ai();return function(r,a,p,y,m,_){return tN(t,a),F1(e,p,.5*_),ir(i,1/y*_,-1/y*_),F6(r,e),m&&J2(r,r,m),D6(r,r,i),u1(r,r,t),r}}(),U6=function(){const t=Ai();return function(e,i,r,a){const p=Nd(i),y=G6(i);return V6(t,i.targetGeometry),q6(e,t,r,p,y,a)}}(),lie=function(){const t=Ai();return function(e,i,r,a){const p=Nd(i);return V6(t,i.targetGeometry),q6(e,t,r,p,0,a)}}();function uie(t){const e=Jn(t);return e?e.valid[1]-e.valid[0]:0}function hie(t,e){return Math.round(uie(t)/e)}const cie=function(){const t=Ai(),e=Ai(),i=[0,0,0];return function(r,a,p){c1(t,r,a),B9(t,t),c1(e,r,p),B9(e,e),rN(i,t,e);let y=Math.acos(iN(t,e)/(Rv(t)*Rv(e)))*Zte;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),pie=function(){const t=Ai();return function(e,i,r,a){const p=e.targetGeometry;return so(e,i),sie(t,i,r,a),p.x+=t[0],p.y+=t[1],e}}(),H9=function(t,e,i){so(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},die=function(){const t=Ai();return function(e,i,r,a,p){p||(p="center"),z6(t,r,a),F1(t,t,.5);const y=t[0],m=t[1];switch(p){case"center":ir(t,0,0);break;case"left":ir(t,-y,0);break;case"top":ir(t,0,m);break;case"right":ir(t,y,0);break;case"bottom":ir(t,0,-m);break;case"top-left":ir(t,-y,m);break;case"bottom-left":ir(t,-y,-m);break;case"top-right":ir(t,y,m);break;case"bottom-right":ir(t,y,-m)}return K2(e,i,t),e}}();function Sve(t,e,i){return so(t,e),t.rotation+=i,t}function fie(t,e,i){return so(t,e),t.rotation=i,t}const yie=function(){const t=Ai();return function(e,i,r,a,p){return so(e,i),isNaN(r)||r===0||(fN(t,a,i,p),e.scale=i.scale*r,yN(t,t,e,p),K2(e,e,ir(t,t[0]-a[0],a[1]-t[1]))),e}}();function O$(t,e,i){return so(t,e),t.scale=i,t}const dN=function(){const t=Ai();return function(e,i,r,a,p,y){return so(e,i),isNaN(r)||r===0||(fN(t,p,i,y),e.scale=i.scale*r,e.rotation+=a,yN(t,t,e,y),K2(e,e,ir(t,t[0]-p[0],p[1]-t[1]))),e}}(),xve=function(){const t=Ai(),e=Ai();return function(i,r,a,p,y,m,_){return pN(e,m,_),ZP(t,y,e),p?dN(i,r,a,p,t,m):yie(i,r,a,t,m)}}(),fN=function(){const t=wu();return function(e,i,r,a){return Oo(e,i,rie(t,r,a,1))}}(),yN=function(){const t=wu();return function(e,i,r,a){return Oo(e,i,U6(t,r,a,1))}}(),K2=function(){const t=Ai(),e=wu();return function(i,r,a){so(i,r);const p=Nd(r),y=i.targetGeometry;return JP(e,G6(r)),D6(e,e,V1(p,p)),Oo(t,a,e),y.x+=t[0],y.y+=t[1],i}}();let mie=class{constructor(e,i,r,a){const p=e.targetGeometry,y=i.targetGeometry;a?typeof a=="string"&&(a=rte(a)||Ws.ease):a=Ws.ease,this.easing=a,this.duration=r,this.sCenterX=p.x,this.sCenterY=p.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const r=this.easing(i);let a,p,y,m;i>=1?(a=this.tCenterX,p=this.tCenterY,y=this.tRotation,m=this.tScale):(a=this.sCenterX+r*this.dCenterX,p=this.sCenterY+r*this.dCenterY,y=this.sRotation+r*this.dRotation,m=this.sScale+r*this.dScale),e.targetGeometry.x=a,e.targetGeometry.y=p,e.scale=m,e.rotation=y}},ga=class extends je{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Ws.ease,this.view=null,this.viewpoint=new Ro({targetGeometry:new Ue,scale:0,rotation:0}),this._updateTask=sd({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=fi(this._updateTask)}animate(e,i,r){this.stop();const a=this.viewpoint;so(a,i),this.transition=new mie(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const p=()=>{var y,m;this.animation===e&&this._updateTask&&(e.state==="finished"&&((y=this.transition)==null||y.applyRatio(this.viewpoint,1),(m=this.view)!=null&&m.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(p,p),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new U9({target:e.clone()}),a=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var r,a;const i=this.animation;if(i&&i.state!==U9.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const p=this.transition,y=(performance.now()-this._startTime)/p.duration,m=y>=1;p.applyRatio(this.viewpoint,y),m&&((r=this.animation)==null||r.finish())}(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};v([S()],ga.prototype,"animation",void 0),v([S()],ga.prototype,"duration",void 0),v([S()],ga.prototype,"transition",void 0),v([S()],ga.prototype,"easing",void 0),v([S()],ga.prototype,"view",void 0),v([S()],ga.prototype,"viewpoint",void 0),ga=v([B("esri.views.2d.AnimationManager")],ga);const gie=ga;let vie=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var y,m;if(this._updateRequested=!1,(y=this.view)==null?void 0:y.destroyed)return;const{allLayerViews:i,graphicsView:r,labelManager:a,state:{id:p}}=this.view;i.forEach(this._updateLayerView,this),a!=null&&(a.lastUpdateId!==p&&(a.viewChange(),a.lastUpdateId=p),a.updateRequested&&a.processUpdate(this._updateParameters)),r!=null&&(r.lastUpdateId!==p&&(r.viewChange(),r.lastUpdateId=p),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((m=this._frameTaskHandle)==null||m.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Ee(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=sd(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var a;if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((a=e.layerViews)==null||a.forEach(this._updateLayerView,this))}};function wi(){return Promise.all([we(()=>import("./webglDeps-3f7ee6d0.js"),["assets/webglDeps-3f7ee6d0.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/ProgramTemplate-0a1f878c.js","assets/programUtils-fbe64589.js","assets/NestedMap-1b5db22e.js"]),we(()=>import("./mapViewDeps-58aaa438.js"),["assets/mapViewDeps-58aaa438.js","assets/CIMResourceManager-0042ada2.js","assets/fontUtils-ace31181.js","assets/Rasterizer-3dc1d9cd.js","assets/cimAnalyzer-139e1e4c.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-7685c378.js","assets/alignmentUtils-ae955d28.js","assets/definitions-838da113.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/rasterizingUtils-851cf3a3.js","assets/imageutils-bdba6a2b.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/BufferPool-09d35b6c.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/color-8a8b1498.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/enums-fb086c25.js","assets/programUtils-fbe64589.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-a9e173bb.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-a5c87195.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/RenderingContext-f6b2369a.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-8f8530bd.js","assets/normalizeUtilsSync-d204d375.js","assets/GraphicContainer-e8dfd68f.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-f63fd398.js"])])}const r0=()=>wi().then(()=>we(()=>import("./TileLayerView2D-ec17b19b.js"),["assets/TileLayerView2D-ec17b19b.js","assets/Rasterizer-3dc1d9cd.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-7685c378.js","assets/alignmentUtils-ae955d28.js","assets/definitions-838da113.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/rasterizingUtils-851cf3a3.js","assets/EffectView-88cf4334.js","assets/Container-dc903d08.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/BufferPool-09d35b6c.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/color-8a8b1498.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-a9e173bb.js","assets/imageutils-bdba6a2b.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-a5c87195.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-8f8530bd.js","assets/normalizeUtilsSync-d204d375.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-490da745.js","assets/BitmapTileContainer-46bbf93e.js","assets/Bitmap-d330470a.js","assets/TileContainer-ceba5fb3.js","assets/LayerView-8810d71f.js","assets/HighlightGraphicContainer-cf427be5.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/RefreshableLayerView-17d8f49d.js","assets/drapedUtils-48153261.js","assets/popupUtils-22253ca6.js"])),zc=()=>wi().then(()=>we(()=>import("./FeatureLayerView2D-57369058.js"),["assets/FeatureLayerView2D-57369058.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/BitmapTileContainer-46bbf93e.js","assets/Bitmap-d330470a.js","assets/TileContainer-ceba5fb3.js","assets/CircularArray-ef508845.js","assets/BufferPool-09d35b6c.js","assets/FeatureContainer-34b5ccc1.js","assets/popupUtils-22253ca6.js","assets/RefreshableLayerView-17d8f49d.js"])),C$={"base-dynamic":()=>wi().then(()=>we(()=>import("./BaseDynamicLayerView2D-e1ac29e8.js"),["assets/BaseDynamicLayerView2D-e1ac29e8.js","assets/BitmapContainer-4654d592.js","assets/WGLContainer-1a170e79.js","assets/definitions-838da113.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js","assets/ExportStrategy-26ff9afe.js","assets/Bitmap-d330470a.js","assets/RefreshableLayerView-17d8f49d.js"])),"base-tile":r0,"bing-maps":r0,csv:zc,"geo-rss":()=>wi().then(()=>we(()=>import("./GeoRSSLayerView2D-207c4461.js"),["assets/GeoRSSLayerView2D-207c4461.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/GraphicContainer-e8dfd68f.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-8f8530bd.js","assets/normalizeUtilsSync-d204d375.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js"])),feature:zc,geojson:zc,graphics:()=>wi().then(()=>we(()=>import("./GraphicsLayerView2D-40d38cef.js"),["assets/GraphicsLayerView2D-40d38cef.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/GraphicContainer-e8dfd68f.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-8f8530bd.js","assets/normalizeUtilsSync-d204d375.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js"])),group:()=>wi().then(()=>we(()=>import("./GroupLayerView2D-ca5b2891.js"),["assets/GroupLayerView2D-ca5b2891.js","assets/GroupContainer-5e7c9709.js","assets/WGLContainer-1a170e79.js","assets/definitions-838da113.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js"])),imagery:()=>wi().then(()=>we(()=>import("./ImageryLayerView2D-0277befb.js"),["assets/ImageryLayerView2D-0277befb.js","assets/RasterVFDisplayObject-300d5ae9.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-b53d86d9.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1a170e79.js","assets/definitions-838da113.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js","assets/GraphicsView2D-8f8530bd.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/normalizeUtilsSync-d204d375.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/visualVariablesUtils-fe0435c8.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-cf427be5.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-4654d592.js","assets/Bitmap-d330470a.js","assets/ExportStrategy-26ff9afe.js","assets/rasterProjectionHelper-8c056f80.js","assets/popupUtils-22253ca6.js","assets/RefreshableLayerView-17d8f49d.js"])),"imagery-tile":()=>wi().then(()=>we(()=>import("./ImageryTileLayerView2D-05da08e5.js"),["assets/ImageryTileLayerView2D-05da08e5.js","assets/multidimensionalUtils-0b9bd481.js","assets/RasterVFDisplayObject-300d5ae9.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-b53d86d9.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1a170e79.js","assets/definitions-838da113.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js","assets/rasterUtils-38f1aaee.js","assets/TiledDisplayObject-9730a14f.js","assets/TileContainer-ceba5fb3.js","assets/RawBlockCache-914492ac.js","assets/rasterProjectionHelper-8c056f80.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-066d9298.js","assets/popupUtils-22253ca6.js","assets/RefreshableLayerView-17d8f49d.js"])),kml:()=>wi().then(()=>we(()=>import("./KMLLayerView2D-66bca0c8.js"),["assets/KMLLayerView2D-66bca0c8.js","assets/kmlUtils-f6c804cd.js","assets/Bitmap-d330470a.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/BitmapContainer-4654d592.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js","assets/GraphicContainer-e8dfd68f.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-8f8530bd.js","assets/normalizeUtilsSync-d204d375.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js","assets/rasterProjectionHelper-8c056f80.js","assets/RenderingContext-f6b2369a.js","assets/programUtils-fbe64589.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/testSVGPremultipliedAlpha-a5c87195.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-38f1aaee.js"])),"knowledge-graph":()=>wi().then(()=>we(()=>import("./KnowledgeGraphLayerView2D-6f210490.js"),["assets/KnowledgeGraphLayerView2D-6f210490.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js"])),"link-chart":()=>wi().then(()=>we(()=>import("./KnowledgeGraphLayerView2D-6f210490.js"),["assets/KnowledgeGraphLayerView2D-6f210490.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js"])),"knowledge-graph-sublayer":zc,"map-image":()=>wi().then(()=>we(()=>import("./MapImageLayerView2D-241df8de.js"),["assets/MapImageLayerView2D-241df8de.js","assets/BitmapContainer-4654d592.js","assets/WGLContainer-1a170e79.js","assets/definitions-838da113.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js","assets/GraphicsView2D-8f8530bd.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/normalizeUtilsSync-d204d375.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/visualVariablesUtils-fe0435c8.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-cf427be5.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-26ff9afe.js","assets/Bitmap-d330470a.js","assets/RefreshableLayerView-17d8f49d.js","assets/drapedUtils-48153261.js","assets/popupUtils-22253ca6.js"])),"map-notes":()=>wi().then(()=>we(()=>import("./MapNotesLayerView2D-8bb96955.js"),["assets/MapNotesLayerView2D-8bb96955.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/GroupContainer-5e7c9709.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js","assets/GraphicContainer-e8dfd68f.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-8f8530bd.js","assets/normalizeUtilsSync-d204d375.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js"])),media:()=>wi().then(()=>we(()=>import("./MediaLayerView2D-2d61738f.js"),["assets/MediaLayerView2D-2d61738f.js","assets/perspectiveUtils-75c98266.js","assets/normalizeUtilsSync-d204d375.js","assets/mat3f64-221ce671.js","assets/Rasterizer-3dc1d9cd.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-7685c378.js","assets/alignmentUtils-ae955d28.js","assets/definitions-838da113.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/rasterizingUtils-851cf3a3.js","assets/EffectView-88cf4334.js","assets/Container-dc903d08.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/BufferPool-09d35b6c.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/color-8a8b1498.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-a9e173bb.js","assets/imageutils-bdba6a2b.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-a5c87195.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-8f8530bd.js","assets/vec3f32-ad1dc57f.js","assets/LayerView-8810d71f.js"])),"ogc-feature":()=>wi().then(()=>we(()=>import("./OGCFeatureLayerView2D-9ea59ed7.js"),["assets/OGCFeatureLayerView2D-9ea59ed7.js","assets/FeatureLayerView2D-57369058.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/BitmapTileContainer-46bbf93e.js","assets/Bitmap-d330470a.js","assets/TileContainer-ceba5fb3.js","assets/CircularArray-ef508845.js","assets/BufferPool-09d35b6c.js","assets/FeatureContainer-34b5ccc1.js","assets/popupUtils-22253ca6.js","assets/RefreshableLayerView-17d8f49d.js"])),"open-street-map":r0,"oriented-imagery":zc,route:()=>wi().then(()=>we(()=>import("./RouteLayerView2D-1c334610.js"),["assets/RouteLayerView2D-1c334610.js","assets/Stop-c10aed06.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/GraphicContainer-e8dfd68f.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-8f8530bd.js","assets/normalizeUtilsSync-d204d375.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js"])),stream:()=>wi().then(()=>we(()=>import("./StreamLayerView2D-bf95d05e.js"),["assets/StreamLayerView2D-bf95d05e.js","assets/FeatureLayerView2D-57369058.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/BitmapTileContainer-46bbf93e.js","assets/Bitmap-d330470a.js","assets/TileContainer-ceba5fb3.js","assets/CircularArray-ef508845.js","assets/BufferPool-09d35b6c.js","assets/FeatureContainer-34b5ccc1.js","assets/popupUtils-22253ca6.js","assets/RefreshableLayerView-17d8f49d.js"])),"subtype-group":()=>wi().then(()=>we(()=>import("./SubtypeGroupLayerView2D-1a06f2ef.js"),["assets/SubtypeGroupLayerView2D-1a06f2ef.js","assets/FeatureLayerView2D-57369058.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/cimAnalyzer-139e1e4c.js","assets/fontUtils-ace31181.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-7685c378.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/BitmapTileContainer-46bbf93e.js","assets/Bitmap-d330470a.js","assets/TileContainer-ceba5fb3.js","assets/CircularArray-ef508845.js","assets/BufferPool-09d35b6c.js","assets/FeatureContainer-34b5ccc1.js","assets/popupUtils-22253ca6.js","assets/RefreshableLayerView-17d8f49d.js"])),tile:r0,"vector-tile":()=>wi().then(()=>we(()=>import("./VectorTileLayerView2D-438a2d89.js"),["assets/VectorTileLayerView2D-438a2d89.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/rasterizingUtils-851cf3a3.js","assets/floatRGBA-94fad0a9.js","assets/VertexArrayObject-7660fad3.js","assets/config-1337d16e.js","assets/TiledDisplayObject-9730a14f.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/color-8a8b1498.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/TileContainer-ceba5fb3.js","assets/WGLContainer-1a170e79.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/earcut-00ef0f46.js","assets/StyleRepository-c23ee56e.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-53652037.js","assets/LayerView-8810d71f.js"])),video:()=>wi().then(()=>we(()=>import("./VideoLayerView2D-17144855.js"),["assets/VideoLayerView2D-17144855.js","assets/LayerView-8810d71f.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js"])),wcs:()=>wi().then(()=>we(()=>import("./ImageryTileLayerView2D-05da08e5.js"),["assets/ImageryTileLayerView2D-05da08e5.js","assets/multidimensionalUtils-0b9bd481.js","assets/RasterVFDisplayObject-300d5ae9.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-b53d86d9.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1a170e79.js","assets/definitions-838da113.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js","assets/rasterUtils-38f1aaee.js","assets/TiledDisplayObject-9730a14f.js","assets/TileContainer-ceba5fb3.js","assets/RawBlockCache-914492ac.js","assets/rasterProjectionHelper-8c056f80.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-066d9298.js","assets/popupUtils-22253ca6.js","assets/RefreshableLayerView-17d8f49d.js"])),"web-tile":r0,wfs:zc,wms:()=>wi().then(()=>we(()=>import("./WMSLayerView2D-076b2d01.js"),["assets/WMSLayerView2D-076b2d01.js","assets/BitmapContainer-4654d592.js","assets/WGLContainer-1a170e79.js","assets/definitions-838da113.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/earcut-00ef0f46.js","assets/LayerView-8810d71f.js","assets/ExportStrategy-26ff9afe.js","assets/Bitmap-d330470a.js","assets/RefreshableLayerView-17d8f49d.js","assets/ExportWMSImageParameters-213a1a76.js"])),wmts:()=>wi().then(()=>we(()=>import("./WMTSLayerView2D-40d411fc.js"),["assets/WMTSLayerView2D-40d411fc.js","assets/imageUtils-490da745.js","assets/BitmapTileContainer-46bbf93e.js","assets/Bitmap-d330470a.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/definitions-838da113.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/TiledDisplayObject-9730a14f.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-8a8b1498.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/TileContainer-ceba5fb3.js","assets/LayerView-8810d71f.js","assets/RefreshableLayerView-17d8f49d.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function bie(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ie(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const P$={hasLayerViewModule:t=>C$[t.type]!=null,importLayerView:t=>{const e=C$[t.type];if(e==null)throw bie(t);return e(t)}};function wie(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let a=Number.POSITIVE_INFINITY,p=0,y=0;const m=[0,0],_=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const x of _)for(let M=0;M<x.length-1;M++){BB(m,r,x,M);const A=z1(r,m);A<a&&(a=A,p=m[0],y=m[1])}return{coordinate:new Ue({x:p,y,spatialReference:i}),distance:a}}var W9;let Bh=W9=class extends WS(je){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Vu(this.geometry,this.spatialReference)}catch(t){return me.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?I2(this.normalizedGeometry,i):dA(this.normalizedGeometry,i))return t;const{coordinate:r}=wie(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){var t,e;return new W9({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};v([S({constructOnly:!0})],Bh.prototype,"geometry",void 0),v([S({readOnly:!0})],Bh.prototype,"normalizedGeometry",null),v([S({constructOnly:!0})],Bh.prototype,"spatialReference",void 0),Bh=W9=v([B("esri.views.2d.constraints.GeometryConstraint")],Bh);var J9;let B0=J9=class extends WS(je){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new J9({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};v([S()],B0.prototype,"enabled",void 0),v([S()],B0.prototype,"rotationEnabled",void 0),B0=J9=v([B("esri.views.2d.constraints.RotationConstraint")],B0);const mN=B0;var K9;let Qr=K9=class extends WS(je){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:a,maxZoom:p}=this,y=-1,m=-1,_=!1,x=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(M=>M.clone()),e.sort((M,A)=>A.scale-M.scale),e.forEach((M,A)=>M.level=A);for(const M of e)!_&&i>0&&i>=M.scale&&(y=M.level,_=!0),!x&&r>0&&r>=M.scale&&(m=t?t.level:-1,x=!0),t=M;a===-1&&(a=i===0?0:y),p===-1&&(p=r===0?e.length-1:m),a=Math.max(a,0),a=Math.min(a,e.length-1),p=Math.max(p,0),p=Math.min(p,e.length-1),a>p&&([a,p]=[p,a]),i=e[a].scale,r=e[p].scale,e.splice(0,a),e.splice(p-a+1,e.length),e.forEach((M,A)=>{this._lodByScale[M.scale]=M,this._scales[A]=M.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",a),this._set("effectiveMaxZoom",p),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,a=t.targetGeometry,p=e&&e.targetGeometry,y=r!==0&&t.scale<r,m=i!==0&&t.scale>i;if(y||m){const _=m?i:r;if(e&&p){const x=(_-e.scale)/(t.scale-e.scale);a.x=p.x+(a.x-p.x)*x,a.y=p.y+(a.y-p.y)*x}t.scale=_}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),r=Math.round(t);return e[r]+(r-t)*(e[i]-e[r])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let a=0;a<e.length-1;a++){if(i=e[a],r=e[a+1],r===t)return a+this.effectiveMinZoom+1;if(i>t&&r<t)return a+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new K9({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};v([S({readOnly:!0})],Qr.prototype,"effectiveLODs",void 0),v([S({readOnly:!0})],Qr.prototype,"effectiveMinZoom",void 0),v([S({readOnly:!0})],Qr.prototype,"effectiveMaxZoom",void 0),v([S({readOnly:!0})],Qr.prototype,"effectiveMinScale",void 0),v([S({readOnly:!0})],Qr.prototype,"effectiveMaxScale",void 0),v([S()],Qr.prototype,"lods",void 0),v([S()],Qr.prototype,"minZoom",void 0),v([S()],Qr.prototype,"maxZoom",void 0),v([S()],Qr.prototype,"minScale",void 0),v([S()],Qr.prototype,"maxScale",void 0),v([S()],Qr.prototype,"snapToZoom",void 0),Qr=K9=v([B("esri.views.2d.constraints.ZoomConstraint")],Qr);const gN=Qr,_ie={base:null,key:"type",typeMap:{extent:vt,polygon:on}};let $i=class extends je{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new De}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,r;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new Bh({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new mN({rotationEnabled:this.rotationEnabled})}get _zoom(){var _;const e=this._get("_zoom"),i=this.lods||((_=this.view)==null?void 0:_.constraintsInfo.lods),r=this.minZoom,a=this.maxZoom,p=this.minScale,y=this.maxScale,m=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===a&&e.minScale===p&&e.maxScale===y&&e.snapToZoom===m?e:new gN({lods:i,minZoom:r,maxZoom:a,minScale:p,maxScale:y,snapToZoom:m})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};v([S({readOnly:!0})],$i.prototype,"effectiveLODs",null),v([S({readOnly:!0})],$i.prototype,"effectiveMinScale",null),v([S({readOnly:!0})],$i.prototype,"effectiveMaxScale",null),v([S({readOnly:!0})],$i.prototype,"effectiveMinZoom",null),v([S({readOnly:!0})],$i.prototype,"effectiveMaxZoom",null),v([S({types:_ie,value:null})],$i.prototype,"geometry",null),v([S({type:[Kl]})],$i.prototype,"lods",void 0),v([S()],$i.prototype,"minScale",void 0),v([S()],$i.prototype,"maxScale",void 0),v([S()],$i.prototype,"minZoom",void 0),v([S()],$i.prototype,"maxZoom",void 0),v([S()],$i.prototype,"rotationEnabled",void 0),v([S()],$i.prototype,"snapToZoom",void 0),v([S({type:De})],$i.prototype,"customConstraints",void 0),v([S()],$i.prototype,"view",void 0),v([S({readOnly:!0})],$i.prototype,"version",null),v([S({type:Bh,readOnly:!0})],$i.prototype,"_geometry",null),v([S({type:mN})],$i.prototype,"_rotation",null),v([S({readOnly:!0,type:gN})],$i.prototype,"_zoom",null),$i=v([B("esri.views.2d.MapViewConstraints")],$i);const vN=$i;let Sie=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},bN=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new _v(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=fi(this._schedule),this._task=fi(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const a=new AbortController;let p=null;i&&(p=Ss(i,()=>a.abort()));const y=()=>{const M=this._processingItems.get(e);M&&M.controller.abort(),m(),x.reject(hi())},m=()=>{_.remove(),p!=null&&p.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},_=sS(a.signal,y),x=rn();return this._deferreds.set(e,x),this._controllers.set(e,a),x.promise.then(m,m),this._queue.push(e),this._scheduleNext(),x.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=wd(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,a=new Sie(e,r);this._processingItems.set(e,a);try{i=this.process(e,r.signal)}catch(p){this._processError(a,p)}Ya(i)?(a.promise=i,i.then(p=>this._processResult(a,p),p=>this._processError(a,p))):this._processResult(a,i)}get test(){return{update:e=>this.runTask(e)}}};function xie(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const fw=new Set,Vy=[],Vc=new Map,N$=[0,0];let cl=class extends je{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new bN({concurrency:e,process:(r,a)=>{const p=this._keyToItem.get(r);return i(p,{signal:a})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue=Wt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const r=e.key.id+"-"+i;if(this.has(r))return this.get(r);const a=this._queue.push(r),p=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),a.then(p,p),this.notifyChange("updating"),a}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;e.forEach(M=>{const A=this._keyToItem.get(M),C=this.tileInfoView.getTileScale(A.key);Vc.has(C)||(Vc.set(C,[]),r=Math.max(C,r),a=Math.min(C,a)),Vc.get(C).push(A.key),fw.add(C)});let p=this.state.scale;Vc.has(p)||(xie(Vy,fw),Vy.sort((M,A)=>M-A),p=Vy.reduce((M,A)=>Math.abs(A-p)<Math.abs(M-p)?A:M,Vy[0])),p=Math.min(p,r),p=Math.max(p,a);const y=Vc.get(p),m=i.getClosestInfoForScale(p),_=m.getColumnForX(this.state.center[0]),x=m.getRowForY(this.state.center[1]);return y.sort((M,A)=>{const C=m.denormalizeCol(M.col,M.world),N=m.denormalizeCol(A.col,A.world);return Math.sqrt((_-C)*(_-C)+(x-M.row)*(x-M.row))-Math.sqrt((_-N)*(_-N)+(x-A.row)*(x-A.row))}),fw.clear(),Vc.clear(),y[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let a,p=Number.POSITIVE_INFINITY;return e.forEach(y=>{const m=this._keyToItem.get(y);i.getTileCoords(N$,m.key);const _=z1(N$,r);_<p&&(p=_,a=m.key)}),a.id}};v([S({constructOnly:!0})],cl.prototype,"concurrency",void 0),v([S({constructOnly:!0})],cl.prototype,"process",void 0),v([S()],cl.prototype,"state",void 0),v([S({constructOnly:!0})],cl.prototype,"strategy",void 0),v([S({constructOnly:!0})],cl.prototype,"tileInfoView",void 0),v([S({readOnly:!0})],cl.prototype,"updating",null),cl=v([B("esri.views.2d.tiling.PagedTileQueue")],cl);let Sc=class bh{static getId(e,i,r,a){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${a}`}constructor(e,i,r,a){this.set(e,i,r,a)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,a){this.set(e,i,r,a)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new bh(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,a){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[p,y,m,_]=e.split("/");this.level=parseFloat(p),this.row=parseFloat(y),this.col=parseFloat(m),this.world=parseFloat(_)}else this.level=+e,this.row=+i,this.col=+r,this.world=+a||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new bh(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,a=this.world;return[new bh(e,i,r,a),new bh(e,i,r+1,a),new bh(e,i+1,r,a),new bh(e,i+1,r+1,a)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};Sc.pool=new Cu(Sc,null,null,25,50);function pl(t,e){return[t,e]}function Hu(t,e,i){return t[0]=e,t[1]=i,t}function $ie(t,e,i,r,a){return t[0]=e,t[1]=i,t[2]=r,t[3]=a,t}const vn=new Sc("0/0/0/0");let Tie=class wN{static create(e,i,r=null){const a=Jn(e.spatialReference),p=i.origin||pl(e.origin.x,e.origin.y),y=pl(e.size[0]*i.resolution,e.size[1]*i.resolution),m=pl(-1/0,-1/0),_=pl(1/0,1/0),x=pl(1/0,1/0);r!=null&&(Hu(m,Math.max(0,Math.floor((r.xmin-p[0])/y[0])),Math.max(0,Math.floor((p[1]-r.ymax)/y[1]))),Hu(_,Math.max(0,Math.floor((r.xmax-p[0])/y[0])),Math.max(0,Math.floor((p[1]-r.ymin)/y[1]))),Hu(x,_[0]-m[0]+1,_[1]-m[1]+1));const{cols:M,rows:A}=i;let C,N,j,D;return!r&&M&&A&&(Hu(m,M[0],A[0]),Hu(_,M[1],A[1]),Hu(x,M[1]-M[0]+1,A[1]-A[0]+1)),e.isWrappable?(C=pl(Math.ceil(Math.round((a.valid[1]-a.valid[0])/i.resolution)/e.size[0]),x[1]),N=pl(Math.floor((a.origin[0]-p[0])/y[0]),m[1]),j=pl(C[0]+N[0]-1,_[1]),D=!0):(N=m,j=_,C=x,D=!1),new wN(i.level,i.resolution,i.scale,p,m,_,x,y,N,j,C,D)}constructor(e,i,r,a,p,y,m,_,x,M,A,C){this.level=e,this.resolution=i,this.scale=r,this.origin=a,this.first=p,this.last=y,this.size=m,this.norm=_,this.worldStart=x,this.worldEnd=M,this.worldSize=A,this.wrap=C}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){vn.set(i);const a=r?vn.col:this.denormalizeCol(vn.col,vn.world),p=vn.row;return $ie(e,this.getXForColumn(a),this.getYForRow(p+1),this.getXForColumn(a+1),this.getYForRow(p)),e}getTileCoords(e,i,r=!1){vn.set(i);const a=r?vn.col:this.denormalizeCol(vn.col,vn.world);return Array.isArray(e)?Hu(e,this.getXForColumn(a),this.getYForRow(vn.row)):(e.x=this.getXForColumn(a),e.y=this.getYForRow(vn.row)),e}},p1=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:r,lodInfo:a}=this,{level:p}=a;if(r.length!==0)for(const{row:y,colFrom:m,colTo:_}of r)for(let x=m;x<=_;x++)e.call(i,p,y,a.normalizeCol(x),a.getWorldForColumn(x))}};p1.pool=new Cu(p1);let yw=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const si=new Sc("0/0/0/0");let Iie=class _N{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,a]=e,[p,y]=i,m=p-r,_=y-a,x=_!==0?m/_:0,M=(Math.ceil(a)-a)*x,A=(Math.floor(a)-a)*x;return new _N(r,Math.floor(a),Math.ceil(y),x,m<0?M:A,m<0?A:M,m<0?p:r,m<0?r:p)}constructor(e,i,r,a,p,y,m,_){this.x=e,this.ymin=i,this.ymax=r,this.invM=a,this.leftAdjust=p,this.rightAdjust=y,this.leftBound=m,this.rightBound=_}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const as=[[0,0],[0,0],[0,0],[0,0]],Mie=1e-6;let Eie=class{constructor(e,i=null,r=e.lods[0].level,a=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const p=e.lods.filter(m=>m.level>=r&&m.level<=a);this.minScale=p[0].scale,this.maxScale=p[p.length-1].scale;const y=this._lodInfos=p.map(m=>Tie.create(e,m,i));p.forEach((m,_)=>{this._infoByLevel[m.level]=y[_],this._infoByScale[m.scale]=y[_],this.scales[_]=m.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){si.set(i);const a=this._infoByLevel[si.level];return a?a.getTileBounds(e,si,r):e}getTileCoords(e,i,r=!1){si.set(i);const a=this._infoByLevel[si.level];return a?a.getTileCoords(e,si,r):e}getTileCoverage(e,i=192,r=!0,a="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const p=a==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),y=p1.pool.acquire(p),m=this._wrap;let _,x,M,A=1/0,C=-1/0;const N=y.spans;as[0][0]=as[0][1]=as[1][1]=as[3][0]=-i,as[1][0]=as[2][0]=e.size[0]+i,as[2][1]=as[3][1]=e.size[1]+i;for(const W of as)e.toMap(W,W),W[0]=p.getColumnForX(W[0]),W[1]=p.getRowForY(W[1]);const j=[];let D=3;for(let W=0;W<4;W++){if(as[W][1]===as[D][1]){D=W;continue}const Y=Iie.create(as[W],as[D]);A=Math.min(Y.ymin,A),C=Math.max(Y.ymax,C),j[Y.ymin]===void 0&&(j[Y.ymin]=[]),j[Y.ymin].push(Y),D=W}if(A==null||C==null||C-A>100)return null;let z=[];for(_=A;_<C;){j[_]!=null&&(z=z.concat(j[_])),x=1/0,M=-1/0;for(let W=z.length-1;W>=0;W--){const Y=z[W];x=Math.min(x,Y.getLeftCol()),M=Math.max(M,Y.getRightCol())}if(x=Math.floor(x),M=Math.floor(M),_>=p.first[1]&&_<=p.last[1])if(m)if(p.size[0]<p.worldSize[0]){const W=Math.floor(M/p.worldSize[0]);for(let Y=Math.floor(x/p.worldSize[0]);Y<=W;Y++)N.push(new yw(_,Math.max(p.getFirstColumnForWorld(Y),x),Math.min(p.getLastColumnForWorld(Y),M)))}else N.push(new yw(_,x,M));else x>p.last[0]||M<p.first[0]||(x=Math.max(x,p.first[0]),M=Math.min(M,p.last[0]),N.push(new yw(_,x,M)));_+=1;for(let W=z.length-1;W>=0;W--){const Y=z[W];Y.ymax>=_?Y.incrRow():z.splice(W,1)}}return y}getTileParentId(e){si.set(e);const i=this._infoByLevel[si.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(si,this._lodInfos[r],si),si.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){si.set(i);const r=this._infoByLevel[si.level],a=e.lodInfo;if(a.resolution>r.resolution){this._getTileIdAtLOD(si,a,si);const y=a.denormalizeCol(si.col,si.world);for(const m of e.spans)if(m.row===si.row&&m.colFrom<=y&&m.colTo>=y)return!0}if(a.resolution<r.resolution){const[y,m,_,x]=e.spans.reduce((D,z)=>(D[0]=Math.min(D[0],z.row),D[1]=Math.max(D[1],z.row),D[2]=Math.min(D[2],z.colFrom),D[3]=Math.max(D[3],z.colTo),D),[1/0,-1/0,1/0,-1/0]),M=r.denormalizeCol(si.col,si.world),A=a.getColumnForX(r.getXForColumn(M)),C=a.getRowForY(r.getYForRow(si.row)),N=a.getColumnForX(r.getXForColumn(M+1))-1,j=a.getRowForY(r.getYForRow(si.row+1))-1;return!(A>x||N<_||C>m||j<y)}const p=a.denormalizeCol(si.col,si.world);return e.spans.some(y=>y.row===si.row&&y.colFrom<=p&&y.colTo>=p)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const a=Jn(this.tileInfo.spatialReference),p=-r*(a.valid[1]-a.valid[0]);e[0]+=p,e[2]+=p}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+Mie)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,a)=>Math.abs(a-e)<Math.abs(r-e)?a:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,r){const a=this._infoByLevel[r.level];return e.set(r),i.resolution<a.resolution?null:(i.resolution===a.resolution||(e.level=i.level,e.col=Math.floor(r.col*a.resolution/i.resolution+.01),e.row=Math.floor(r.row*a.resolution/i.resolution+.01)),e)}};function Aie(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const mw=new Set,Gy=[],Gc=new Map,R$=[0,0];let va=class extends je{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:r}=this;this._queue=new bN({concurrency:e,process:(a,p)=>{const y=this._keyToItem.get(a);return i(y,{signal:p})},peeker:r==="scale-first"?a=>this._peekByScaleFirst(a):a=>this._peekByCenterFirst(a)})}destroy(){this.clear(),this._queue=Wt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),a=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(a,a),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;e.forEach(M=>{const A=this._keyToItem.get(M),C=this.tileInfoView.getTileScale(A.key);Gc.has(C)||(Gc.set(C,[]),r=Math.max(C,r),a=Math.min(C,a)),Gc.get(C).push(A.key),mw.add(C)});let p=this.state.scale;Gc.has(p)||(Aie(Gy,mw),Gy.sort((M,A)=>M-A),p=Gy.reduce((M,A)=>Math.abs(A-p)<Math.abs(M-p)?A:M,Gy[0])),p=Math.min(p,r),p=Math.max(p,a);const y=Gc.get(p),m=i.getClosestInfoForScale(p),_=m.getColumnForX(this.state.center[0]),x=m.getRowForY(this.state.center[1]);return y.sort((M,A)=>{const C=m.denormalizeCol(M.col,M.world),N=m.denormalizeCol(A.col,A.world);return Math.sqrt((_-C)*(_-C)+(x-M.row)*(x-M.row))-Math.sqrt((_-N)*(_-N)+(x-A.row)*(x-A.row))}),mw.clear(),Gc.clear(),y[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,r=this.state.center;let a,p=Number.POSITIVE_INFINITY;return e.forEach(y=>{const m=this._keyToItem.get(y);i.getTileCoords(R$,m.key);const _=z1(R$,r);_<p&&(p=_,a=m.key)}),a.id}};v([S({constructOnly:!0})],va.prototype,"concurrency",void 0),v([S({constructOnly:!0})],va.prototype,"process",void 0),v([S()],va.prototype,"state",void 0),v([S({constructOnly:!0})],va.prototype,"strategy",void 0),v([S({constructOnly:!0})],va.prototype,"tileInfoView",void 0),v([S({readOnly:!0})],va.prototype,"updating",null),va=v([B("esri.views.2d.tiling.TileQueue")],va);const Rve=va;let kie=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,a=this._tileKeysPerLevel[r];L$(this._tilePerId,e);for(let p=0;p<a.length;p++)if(a[p].id===e){a.splice(p,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const a=i.level;this._tileKeysPerLevel[a]||(this._tileKeysPerLevel[a]=[]),this._tileKeysPerLevel[a].push(i)}prune(e,i,r){let a=this._tilePerId.size;if(a<=this.maxSize)return;let p=this._tileKeysPerLevel.length-1;for(;a>this.maxSize&&p>=0;)p!==e&&(a=this._pruneAroundCenterTile(a,i,r,p)),p--;a>this.maxSize&&(a=this._pruneAroundCenterTile(a,i,r,e))}_pruneAroundCenterTile(e,i,r,a){const p=this._tileKeysPerLevel[a];if(!p||p.length===0)return e;const{size:y,origin:m}=this._tileInfoView.tileInfo,_=r*y[0],x=r*y[1],M=[0,0],A=[0,0];for(p.sort((C,N)=>(M[0]=m.x+_*(C.col+.5),M[1]=m.y-x*(C.row+.5),A[0]=m.x+_*(N.col+.5),A[1]=m.y-x*(N.row+.5),Nv(M,i)-Nv(A,i)));p.length>0;){const C=p.pop();if(this._removeTile(C.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),L$(this._tilePerId,e)}};function L$(t,e){t.delete(e)}const Wu=new Sc(0,0,0,0),ea=new Map,Ju=[],gw=[];let jve=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new kie(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var W,Y;const{resampling:i,tileIndex:r}=this,{scale:a,center:p,resolution:y}=e.state,{minScale:m,maxScale:_}=this.tileInfoView,x=!e.stationary&&a>this._previousScale;if(this._previousScale=a,!i&&(a>m||a<_))return this.tiles.length=0,void this.clear();const M=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!M)return this.tiles.length=0,void this.clear();const{spans:A,lodInfo:C}=M,{level:N}=C;this.tiles.length=0,r.forEach(K=>K.visible=!0);let j=0,D=0;if(A.length>0)for(const{row:K,colFrom:ee,colTo:ne}of A)for(let oe=ee;oe<=ne;oe++){j++;const ue=Wu.set(N,K,C.normalizeCol(oe),C.getWorldForColumn(oe)).id;let ye=r.get(ue);if(ye)ye.isReady?(ea.set(ue,ye),D++):x||this._addParentTile(ue,ea);else{if((W=this._tileCache)!=null&&W.has(ue)){if(ye=this._tileCache.pop(ue),this.tileIndex.set(ue,ye),ye.isReady){ea.set(ue,ye),D++;continue}}else ye=this.acquireTile(Wu),this.tileIndex.set(ue,ye);x||this._addParentTile(ue,ea)}}const z=D===j;for(const[K,ee]of r){if(ea.has(K))continue;Wu.set(K);const ne=this.tileInfoView.intersects(M,Wu),oe=this.cachePolicy==="purge"?Wu.level!==N:Wu.level>N;!ne||!x&&z?!oe&&ne||Ju.push(ee):ee.isReady?oe&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Wu,N)?Ju.push(ee):gw.push(ee):oe&&Ju.push(ee)}for(const K of gw)K.isReady&&ea.set(K.key.id,K);for(const K of Ju)this._tileCache?this._tileCache.add(K):this.releaseTile(K),r.delete(K.key.id);for(const K of ea.values())this.tiles.push(K);for(const K of r.values())ea.has(K.key.id)||(K.visible=!1);(Y=this._tileCache)==null||Y.prune(N,p,y),p1.pool.release(M),gw.length=0,Ju.length=0,ea.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const r of this.tileIndex.values())this.tiles.includes(r)?e(r):Ju.push(r);for(const r of Ju)this.releaseTile(r),this.tileIndex.delete(r.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var p;let r=e,a=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(a=this.tileIndex.get(r),a==null?void 0:a.isReady){i.has(a.key.id)||i.set(a.key.id,a);break}}else if((p=this._tileCache)!=null&&p.has(r)&&(a=this._tileCache.pop(r),this.tileIndex.set(r,a),a==null?void 0:a.isReady)){i.has(a.key.id)||i.set(a.key.id,a);break}}_hasReadyAncestor(e,i){const r=Vo();this.tileInfoView.getTileBounds(r,e,!0);for(const a of this.tileIndex.values())if(a.isReady&&a.key.level>=i&&a.key.level<e.level){const p=Vo();if(this.tileInfoView.getTileBounds(p,a.key,!0),oH(p,r))return!0}return!1}};function SN(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function Oie(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Cie(t,e,i,r,a,p){const y=new Float32Array(6);return y[0]=t,y[1]=e,y[2]=i,y[3]=r,y[4]=a,y[5]=p,y}function Pie(t,e){return new Float32Array(t,e,6)}function xN(t,e,i,r){const a=e[r],p=e[r+1];t[r]=i[0]*a+i[2]*p+i[4],t[r+1]=i[1]*a+i[3]*p+i[5]}function Nie(t,e,i,r=0,a=0,p=2){const y=a||e.length/p;for(let m=r;m<y;m++)xN(t,e,i,m*p)}Object.freeze(Object.defineProperty({__proto__:null,clone:Oie,create:SN,createView:Pie,fromValues:Cie,transform:xN,transformMany:Nie},Symbol.toStringTag,{value:"Module"}));function Rie(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Lie(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function $N(t,e,i,r,a,p,y,m,_,x){return t[0]=e,t[1]=i,t[2]=r,t[3]=a,t[4]=p,t[5]=y,t[6]=m,t[7]=_,t[8]=x,t}function TN(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jie(t,e){if(t===e){const i=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Die(t,e){const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],m=e[5],_=e[6],x=e[7],M=e[8],A=M*y-m*x,C=-M*p+m*_,N=x*p-y*_;let j=i*A+r*C+a*N;return j?(j=1/j,t[0]=A*j,t[1]=(-M*r+a*x)*j,t[2]=(m*r-a*y)*j,t[3]=C*j,t[4]=(M*i-a*_)*j,t[5]=(-m*i+a*p)*j,t[6]=N*j,t[7]=(-x*i+r*_)*j,t[8]=(y*i-r*p)*j,t):null}function Fie(t,e){const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],m=e[5],_=e[6],x=e[7],M=e[8];return t[0]=y*M-m*x,t[1]=a*x-r*M,t[2]=r*m-a*y,t[3]=m*_-p*M,t[4]=i*M-a*_,t[5]=a*p-i*m,t[6]=p*x-y*_,t[7]=r*_-i*x,t[8]=i*y-r*p,t}function zie(t){const e=t[0],i=t[1],r=t[2],a=t[3],p=t[4],y=t[5],m=t[6],_=t[7],x=t[8];return e*(x*p-y*_)+i*(-x*a+y*m)+r*(_*a-p*m)}function B6(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=e[4],_=e[5],x=e[6],M=e[7],A=e[8],C=i[0],N=i[1],j=i[2],D=i[3],z=i[4],W=i[5],Y=i[6],K=i[7],ee=i[8];return t[0]=C*r+N*y+j*x,t[1]=C*a+N*m+j*M,t[2]=C*p+N*_+j*A,t[3]=D*r+z*y+W*x,t[4]=D*a+z*m+W*M,t[5]=D*p+z*_+W*A,t[6]=Y*r+K*y+ee*x,t[7]=Y*a+K*m+ee*M,t[8]=Y*p+K*_+ee*A,t}function Y9(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=e[4],_=e[5],x=e[6],M=e[7],A=e[8],C=i[0],N=i[1];return t[0]=r,t[1]=a,t[2]=p,t[3]=y,t[4]=m,t[5]=_,t[6]=C*r+N*y+x,t[7]=C*a+N*m+M,t[8]=C*p+N*_+A,t}function IN(t,e,i){const r=e[0],a=e[1],p=e[2],y=e[3],m=e[4],_=e[5],x=e[6],M=e[7],A=e[8],C=Math.sin(i),N=Math.cos(i);return t[0]=N*r+C*y,t[1]=N*a+C*m,t[2]=N*p+C*_,t[3]=N*y-C*r,t[4]=N*m-C*a,t[5]=N*_-C*p,t[6]=x,t[7]=M,t[8]=A,t}function Vie(t,e,i){const r=i[0],a=i[1],p=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=p*e[6],t[7]=p*e[7],t[8]=p*e[8],t}function Gie(t,e,i){const r=i[0],a=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t}function qie(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Uie(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Bie(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Hie(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Wie(t,e){const i=e[0],r=e[1],a=e[2],p=e[3],y=i+i,m=r+r,_=a+a,x=i*y,M=r*y,A=r*m,C=a*y,N=a*m,j=a*_,D=p*y,z=p*m,W=p*_;return t[0]=1-A-j,t[3]=M-W,t[6]=C+z,t[1]=M+W,t[4]=1-x-j,t[7]=N-D,t[2]=C-z,t[5]=N+D,t[8]=1-x-A,t}function Jie(t,e){const i=e[0],r=e[1],a=e[2],p=e[4],y=e[5],m=e[6],_=e[8],x=e[9],M=e[10],A=M*y-m*x,C=-M*p+m*_,N=x*p-y*_,j=i*A+r*C+a*N;if(!j)return null;const D=1/j;return t[0]=A*D,t[1]=(-M*r+a*x)*D,t[2]=(m*r-a*y)*D,t[3]=C*D,t[4]=(M*i-a*_)*D,t[5]=(-m*i+a*p)*D,t[6]=N*D,t[7]=(-x*i+r*_)*D,t[8]=(y*i-r*p)*D,t}function Kie(t,e){const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],m=e[5],_=e[6],x=e[7],M=e[8],A=e[9],C=e[10],N=e[11],j=e[12],D=e[13],z=e[14],W=e[15],Y=i*m-r*y,K=i*_-a*y,ee=i*x-p*y,ne=r*_-a*m,oe=r*x-p*m,ue=a*x-p*_,ye=M*D-A*j,Se=M*z-C*j,Ce=M*W-N*j,Ne=A*z-C*D,Le=A*W-N*D,He=C*W-N*z;let Pe=Y*He-K*Le+ee*Ne+ne*Ce-oe*Se+ue*ye;return Pe?(Pe=1/Pe,t[0]=(m*He-_*Le+x*Ne)*Pe,t[1]=(_*Ce-y*He-x*Se)*Pe,t[2]=(y*Le-m*Ce+x*ye)*Pe,t[3]=(a*Le-r*He-p*Ne)*Pe,t[4]=(i*He-a*Ce+p*Se)*Pe,t[5]=(r*Ce-i*Le-p*ye)*Pe,t[6]=(D*ue-z*oe+W*ne)*Pe,t[7]=(z*ee-j*ue-W*K)*Pe,t[8]=(j*oe-D*ee+W*Y)*Pe,t):null}function Yie(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Zie(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Xie(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function Qie(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function MN(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function ere(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function tre(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function ire(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function rre(t,e){const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],m=t[5],_=t[6],x=t[7],M=t[8],A=e[0],C=e[1],N=e[2],j=e[3],D=e[4],z=e[5],W=e[6],Y=e[7],K=e[8],ee=an();return Math.abs(i-A)<=ee*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-C)<=ee*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(a-N)<=ee*Math.max(1,Math.abs(a),Math.abs(N))&&Math.abs(p-j)<=ee*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(y-D)<=ee*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(m-z)<=ee*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(_-W)<=ee*Math.max(1,Math.abs(_),Math.abs(W))&&Math.abs(x-Y)<=ee*Math.max(1,Math.abs(x),Math.abs(Y))&&Math.abs(M-K)<=ee*Math.max(1,Math.abs(M),Math.abs(K))}function sre(t){const e=an(),i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],m=t[5],_=t[6],x=t[7],M=t[8];return Math.abs(1-(i*i+p*p+_*_))<=e&&Math.abs(1-(r*r+y*y+x*x))<=e&&Math.abs(1-(a*a+m*m+M*M))<=e}const nre=B6,ore=MN;Object.freeze(Object.defineProperty({__proto__:null,add:Qie,adjoint:Fie,copy:Lie,determinant:zie,equals:rre,exactEquals:ire,frob:Xie,fromMat2d:Hie,fromMat4:Rie,fromQuat:Wie,fromRotation:Uie,fromScaling:Bie,fromTranslation:qie,identity:TN,invert:Die,isOrthoNormal:sre,mul:nre,multiply:B6,multiplyScalar:ere,multiplyScalarAndAdd:tre,normalFromMat4:Kie,normalFromMat4Legacy:Jie,projection:Yie,rotate:IN,scale:Vie,scaleByVec2:Gie,set:$N,str:Zie,sub:ore,subtract:MN,translate:Y9,transpose:jie},Symbol.toStringTag,{value:"Module"}));function tg(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function are(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function lre(t,e,i,r,a,p,y,m,_){const x=new Float32Array(9);return x[0]=t,x[1]=e,x[2]=i,x[3]=r,x[4]=a,x[5]=p,x[6]=y,x[7]=m,x[8]=_,x}function ure(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:are,create:tg,createView:ure,fromValues:lre},Symbol.toStringTag,{value:"Module"}));function EN(){return new Float32Array(2)}function hre(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function yd(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function cre(t,e){return new Float32Array(t,e,2)}function AN(){return EN()}function kN(){return yd(1,1)}function ON(){return yd(1,0)}function CN(){return yd(0,1)}const pre=AN(),dre=kN(),fre=ON(),yre=CN();Object.freeze(Object.defineProperty({__proto__:null,ONES:dre,UNIT_X:fre,UNIT_Y:yre,ZEROS:pre,clone:hre,create:EN,createView:cre,fromValues:yd,ones:kN,unitX:ON,unitY:CN,zeros:AN},Symbol.toStringTag,{value:"Module"}));function mre(t){return t instanceof Float32Array&&t.length>=2}function gre(t){return Array.isArray(t)&&t.length>=2}function vw(t){return mre(t)||gre(t)}var Z9;const ta=[0,0];let Rl=Z9=class extends de{constructor(t){super(t),this._viewpoint2D={center:Ai(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new vt,this.id=0,this.inverseTransform=wu(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=wu(),this.transformNoRotation=wu(),this.displayMat3=tg(),this.displayViewMat3=tg(),this.viewMat3=tg(),this.viewMat2d=SN(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=so(i,t.viewpoint),this._set("size",h1(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new Z9({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return vw(e)?Oo(t,e,this.inverseTransform):(ta[0]=e,ta[1]=i,Oo(t,ta,this.inverseTransform))}toScreen(t,e,i){return vw(e)?Oo(t,e,this.transform):(ta[0]=e,ta[1]=i,Oo(t,ta,this.transform))}toScreenNoRotation(t,e,i){return vw(e)?Oo(t,e,this.transformNoRotation):(ta[0]=e,ta[1]=i,Oo(t,ta,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,a=this._get("size");return q6(t,i,a,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,a=this._get("pixelRatio")||1,p=this._get("size"),y=new Ro({targetGeometry:new Ue(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",y),!p||!e||!i)return;this.resolution=Nd(y),this.rotation=r,this.scale=i,this.spatialReference=e,h1(this.center,t);const m=p[0]!==0?2/p[0]:0,_=p[1]!==0?-2/p[1]:0;$N(this.displayMat3,m,0,0,0,_,0,-1,1,1);const x=TN(this.viewMat3),M=yd(p[0]/2,p[1]/2),A=yd(-p[0]/2,-p[1]/2),C=LS(r);Y9(x,x,M),IN(x,x,C),Y9(x,x,A),B6(this.displayViewMat3,this.displayMat3,x);const N=F6(this.viewMat2d,M);return J2(N,N,C),u1(N,N,A),tie(this.extent,y,p),U6(this.transform,y,p,a),j6(this.inverseTransform,this.transform),lie(this.transformNoRotation,y,p,a),this.worldScreenWidth=hie(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};v([S({readOnly:!0})],Rl.prototype,"id",void 0),v([S({value:1,json:{write:!0}})],Rl.prototype,"pixelRatio",null),v([S({json:{write:!0}})],Rl.prototype,"size",null),v([S()],Rl.prototype,"spatialReference",void 0),v([S({type:Ro,json:{write:!0}})],Rl.prototype,"viewpoint",null),Rl=Z9=v([B("esri.views.2d.ViewState")],Rl);const j$=Rl;var X9,Q9;let Pa=X9=class extends je{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new X9({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};v([S()],Pa.prototype,"left",void 0),v([S()],Pa.prototype,"top",void 0),v([S()],Pa.prototype,"right",void 0),v([S()],Pa.prototype,"bottom",void 0),Pa=X9=v([B("esri.views.2d.PaddedViewState.Padding")],Pa);let lp=Q9=class extends j${constructor(...t){super(...t),this.paddedViewState=new j$,this._updateContent=(()=>{const e=Ai();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const a=this.paddedViewState;ir(e,r.left+r.right,r.top+r.bottom),c1(e,i,e),h1(a.size,e);const p=a.viewpoint;p&&(this.viewpoint=p)}})(),this.addHandles(Ee(()=>[this.size,this.padding],()=>this._updateContent(),Cd)),this.padding=new Pa,this.size=[0,0]}set padding(t){this._set("padding",t||new Pa)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,pie(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=e.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new Q9({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};v([S()],lp.prototype,"paddedViewState",void 0),v([S({type:Pa})],lp.prototype,"padding",null),v([S()],lp.prototype,"viewpoint",null),lp=Q9=v([B("esri.views.2d.PaddedViewState")],lp);const vre=lp;let Fr=class extends je{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Ee(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Cd)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Ue({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(a){return void me.getLogger(this).error(new ie("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:a}))}const r=this.viewpoint;H9(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void me.getLogger(this).error(new ie("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(a){return void me.getLogger(this).error(new ie("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:a}))}const r=this.viewpoint;iie(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;fie(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;O$(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var p;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new ie("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new ie("mapview:invalid-viewpoint","geometry not defined"))}catch(y){r=new ie("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:y})}if(r)return void me.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const a=new Ro({targetGeometry:new Ue,scale:0,rotation:0});so(a,i),(p=this.constraints)==null||p.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this._set("viewpoint",a)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var a,p;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const y=this._get("extent");return void(y&&(this._set("extent",void 0),this._set("center",y.center)))}const i=((a=this.constraints)==null?void 0:a.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;O$(r,r,i),this.viewpoint=r,this._set("zoom",((p=this.constraints)==null?void 0:p.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,a=this._get("center"),p=this._get("extent"),y=this._get("scale"),m=this._get("rotation"),_=this._get("viewpoint"),x=this._get("zoom"),M=x!=null&&r!=null&&r.zoomToScale(x)||void 0;let A,C,N;const j=_==null?void 0:_.rotation,D=_==null?void 0:_.targetGeometry;(D==null?void 0:D.type)==="extent"?A=D:(D==null?void 0:D.type)==="point"&&(C=D,N=_==null?void 0:_.scale);const z=p??A;return{center:a??C??(z==null?void 0:z.center),rotation:m??j,scale:(y??M??N??(z&&Kp(z,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,a){var y;const p=e.targetGeometry;try{this._project(e,r)}catch(m){me.getLogger(this).warn(new sn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:p.toJSON(),spatialReference:r,error:m})),e.targetGeometry=a||new Ue({x:0,y:0,spatialReference:r})}(y=this.constraints)==null||y.fit(e),this._set("state",new vre({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:a,scale:p}=this.state.paddedViewState,y=new Ue({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",y),this._set("zoom",-1),this._set("rotation",a),this._set("scale",p),this._set("state",null)}changeSpatialReference(e){var _;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const x=i.viewpoint.clone();x.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=x}const r=i.clone(),[a,p]=i.center;let y=null;try{y=this._project(new Ue({x:a,y:p,spatialReference:i.spatialReference}),e)}catch(x){x6()||me.getLogger(this).warn(new sn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:y==null?void 0:y.toJSON(),spatialReference:e,error:x}))}y||(y=new Ue({x:0,y:0,spatialReference:e}));const m=H9(new Ro({targetGeometry:new Ue,scale:0,rotation:0}),i.viewpoint,y);r.viewpoint=m;try{const M=[i.size[0]/2,i.size[1]/2],A=[M[0]+20,M[1]],C=i.toMap([0,0],A),{x:N,y:j}=this._project(new Ue({x:C[0],y:C[1],spatialReference:i.spatialReference}),e);C[0]=N,C[1]=j,r.toScreen(C,C);const D=cie(M,C,A),z=Math.hypot(C[0]-M[0],C[1]-M[1])/20;!Number.isFinite(z)||Math.abs(z)>4?(m.rotation=0,m.targetGeometry=new Ue({x:0,y:0,spatialReference:e})):(m.scale*=z,m.scale>le("mapview-srswitch-adjust-rotation-scale-threshold")?m.rotation=0:m.rotation+=Number.isFinite(D)?D:0)}catch{}(_=this._get("constraints"))==null||_.constrain(m,void 0),this._get("state").viewpoint=m}resize(e,i){var y;if(!this.ready)return;const r=this.state;let a=this.state.paddedViewState.viewpoint;const p=this.state.paddedViewState.size.concat();r.size=[e,i],die(a,a,p,this.state.paddedViewState.size,this.resizeAlign),a=((y=this.constraints)==null?void 0:y.constrain(a,void 0))??a,this.state.viewpoint=a}toMap(e){if(!this.ready)return null;const i=[0,0],[r,a]=this.state.toMap(i,[e.x,e.y]),p=this.state.spatialReference;return new Ue({x:r,y:a,spatialReference:p})}toScreen(e){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),r=[i.x,i.y];return this.state.toScreen(r,r),Hr(r[0],r[1])}_project(e,i){var p;const r=e&&e.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||(p=r.spatialReference)!=null&&p.imageCoordinateSystem||Ci(i,r.spatialReference))return e;const a=Vu(r,i);if(!a)throw new ie("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return bre(e)?(e.targetGeometry=a,e):a}};function bre(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}v([S({type:Ue})],Fr.prototype,"center",null),v([S()],Fr.prototype,"constraints",void 0),v([S({type:vt})],Fr.prototype,"extent",null),v([S({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Fr.prototype,"padding",null),v([S()],Fr.prototype,"ready",void 0),v([S()],Fr.prototype,"resizeAlign",void 0),v([S({readOnly:!0})],Fr.prototype,"resolution",null),v([S({type:Number})],Fr.prototype,"rotation",null),v([S({type:Number})],Fr.prototype,"scale",null),v([S({readOnly:!0})],Fr.prototype,"state",void 0),v([S({type:Ro})],Fr.prototype,"viewpoint",null),v([S()],Fr.prototype,"zoom",null),Fr=v([B("esri.views.2d.ViewStateManager")],Fr);function H6(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let D$=class extends Zi{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){H6(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},wre=class extends Zi{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,a=>this._handleDoubleTapDrag(a))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:a,delta:p}=i,{view:y}=this,{mapViewNavigation:m}=y;switch(a){case"begin":{const{scale:_}=y;this._startScale=_,this._currentScale=_,this._previousDelta=p,m.begin();break}case"update":{if(this._previousDelta.y===p.y)return;this._previousDelta=p;const _=1.015**p.y,x=this._startScale*_,M=x/this._currentScale;m.setViewpointImmediate(M),this._currentScale=x;break}case"end":{const{constraints:_}=y,{effectiveLODs:x,snapToZoom:M}=_;if(!M||!x)return void m.end();const A=_.snapScale(this._currentScale),C=(p.y>0?Math.max(A,_.snapToPreviousScale(this._startScale)):Math.min(A,_.snapToNextScale(this._startScale)))/this._currentScale;m.zoom(C);break}}}},Y2=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,r;this._startEvent=e,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},_re=class extends Zi{constructor(e,i,r){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",r,a=>this._handleDrag(a)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new Y2({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&H6(r.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Sre=class extends Zi{constructor(e,i,r){super(!0),this._view=e,this.pointerAction=i;const a=this._view.mapViewNavigation;this._dragEventSeparator=new Y2({start:(p,y)=>{a.rotate.begin(this._view,y.data),y.stopPropagation()},update:(p,y)=>{a.rotate.update(this._view,y.data),y.stopPropagation()},end:(p,y)=>{a.rotate.end(),y.stopPropagation()},condition:(p,y)=>p===1&&H6(y.data,this.pointerAction)}),this.registerIncoming("drag",r,p=>this._dragEventSeparator.handle(p))}};function bn(t){let e=t*t;return t<0&&(e*=-1),e}function xre(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function $re(t,e,i){const r=i,a=t.state,p=t.device,y=e.tiltDirection==="forward-down"?1:-1,m=1;return p.deviceType==="standard"?(r.translation[0]=bn(a.axes[0]),r.translation[1]=bn(a.axes[1]),r.translation[2]=bn(a.buttons[7])-bn(a.buttons[6]),r.heading=bn(a.axes[2]),r.tilt=bn(a.axes[3])):p.deviceType==="spacemouse"&&(r.translation[0]=1.2*bn(a.axes[0]),r.translation[1]=1.2*bn(a.axes[1]),r.translation[2]=2*-bn(a.axes[2]),r.heading=1.2*bn(a.axes[5]),r.tilt=1.2*bn(a.axes[3])),r.tilt*=y,PA(r.translation,r.translation,m),r}function Tre(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let Ire=class extends Zi{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Ho,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Ee(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=sd({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},St)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,xre(this._transformation)):(this._currentDevice=e.data.device,$re(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(Tre(i))return;const r=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,p=Ere*a*e;K2(r,r,[i.translation[0]*p,-i.translation[1]*p]);const y=1+i.translation[2]*Are*e,m=this._view.constraints.rotationEnabled?-i.heading*Mre*e:0,_=this._view.size,x=[_[0]/2,_[1]];dN(r,r,y,m,x,_);const M=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=M}};const Mre=.06,Ere=.7,Are=6e-4;let kre=class extends Zi{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",r,a=>this._handleKeyUp(a)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=this._keyMap[e.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},Ore=class extends Zi{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",r,a=>this._handleKeyUp(a)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const a=this._keyToDirection[e.data.key];if(this._pressed=a!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),a){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var zp;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(zp||(zp={}));let Cre=class extends Zi{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,a=>this._handleKeyDown(a)),i.zoomIn.forEach(a=>this._keysToZoomAction[a]=zp.IN),i.zoomOut.forEach(a=>this._keysToZoomAction[a]=zp.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const a=this._keysToZoomAction[r],{mapViewNavigation:p}=this.view;let y=null;switch(a){case zp.IN:y=p.zoomIn();break;case zp.OUT:y=p.zoomOut();break;default:return}p.begin(),y.then(()=>p.end()),e.stopPropagation()}};const Pre=.6;let Nre=class extends Zi{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:a,deltaY:p}=e.data,y=1/Pre**(1/60*p),m=i.zoom(y,[r,a]);m&&(this._canZoom=!1,m.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},Rre=class extends Zi{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new Y2({start:(r,a)=>{i.pinch.begin(this.view,a.data),a.stopPropagation()},update:(r,a)=>{i.pinch.update(this.view,a.data),a.stopPropagation()},end:(r,a)=>{i.pinch.end(this.view),a.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function F$(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>Dre(i,t.axisThreshold))}:{buttons:[],axes:[]}}function Lre(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function jre(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function Dre(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let Fre=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=p=>{this._connectGamepad(p.gamepad)},this._onDisconnectGamepad=p=>{const y=p.gamepad,m=y.index,_=this._inputDevices[m];_&&(this._emitGamepadEvent(y,F$(_),!1),this._inputDevices.splice(m,1),this._latestUpdate.splice(m,1),this._input.gamepad.devices.remove(_),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,a=window.isSecureContext;this.supported=r&&a,this.supported&&(this._forEachGamepad(p=>this._connectGamepad(p)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new N6(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=sd({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(a=>{const p=this._inputDevices[a.index];if(!p)return;const y=this._latestUpdate[a.index],m=F$(p),_=r||jre(m);y&&(y.timestamp===a.timestamp||!y.active&&_||Lre(y.state,m))||this._emitGamepadEvent(a,m,!_)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const a=i[r];this._validate(a)&&e(a)}}_emitGamepadEvent(e,i,r){const a=this._latestUpdate[e.index],p=a&&a.active;if(!p&&!r)return;const y=!p&&r?"start":p&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:y})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const z$=le("edge"),zre=le("chrome"),Vre=le("ff"),Gre=le("safari"),V$="esri-view-surface",qc={touchNone:`${V$}--touch-none`,touchPan:`${V$}--touch-pan`};let PN=class NN{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Fre(e,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Wt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(bw[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&bw[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(bw[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?qc.touchNone:qc.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?qc.touchPan:qc.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(qc.touchNone),this._element.classList.remove(qc.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=jP(this._element,e);return NN.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const r=eee(i);r&&e==="key-up"&&this._keyDownState.delete(r);const a={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(a.key),this._callback(e,a)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_handleMouseWheel(e,i){let r=i.deltaY;switch(i.deltaMode){case 0:z$&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}z$?r*=.7:zre||Gre?r*=.6:Vre&&(r*=1.375);const a=100,p=Math.abs(r);p>a&&(r=r/p*200/(1+Math.exp(-.02*(p-a))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,y)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};PN.test={disableSubpixelCoordinates:!1};const bw={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let qre=class extends Zi{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function W6(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Ure(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function Bre(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Hr()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[K,ee]=t,[ne,oe]=[ee.x-K.x,ee.y-K.y];return e.radius=Math.sqrt(ne*ne+oe*oe)/2,e.center.x=(K.x+ee.x)/2,e.center.y=(K.y+ee.y)/2,e}let i=0,r=0;for(let K=0;K<t.length;K++)i+=t[K].x,r+=t[K].y;i/=t.length,r/=t.length;const a=t.map(K=>K.x-i),p=t.map(K=>K.y-r);let y=0,m=0,_=0,x=0,M=0,A=0,C=0;for(let K=0;K<a.length;K++){const ee=a[K],ne=p[K],oe=ee*ee,ue=ne*ne;y+=oe,m+=ue,_+=ee*ne,x+=oe*ee,M+=ue*ne,A+=ee*ue,C+=ne*oe}const N=.5*(x+A),j=.5*(M+C),D=y*m-_*_,z=(N*m-j*_)/D,W=(y*j-_*N)/D,Y=Hr(z+i,W+r);return{radius:Math.sqrt(z*z+W*W+(y+m)/t.length),center:Y}}function ac(t){const{native:e}=t,{pointerId:i,button:r,pointerType:a}=e;return a==="mouse"?`${i}:${r}`:`${a}`}const Qs={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let Hre=class extends Zi{constructor(e=Qs.maximumDoubleClickDelay,i=Qs.maximumDoubleClickDistance,r=Qs.maximumDoubleTouchDelay,a=Qs.maximumDoubleTouchDistance,p=bd){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=p,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=fi(e.doubleClickTimer))}get hasPendingInputs(){return m2(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=fi(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:r,button:a}=e.native;return r==="mouse"?`${i}:${a}`:`${r}`}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,a=this._getPointerId(i);if(!this._pointerState.has(a))return void this._startClick(e);const p=this._pointerState.get(a),{data:y,modifiers:m}=p.event,_=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;W6(y,i)>_?(this._clearDoubleClickTimer(a,!0),this._startClick(e)):(this._clearDoubleClickTimer(a,!1),p.pointerDownCount===2&&this._doubleClick.emit(y,void 0,m))}_handlePointerDown(e){const i=ac(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,a=ac(i),p=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(a),p),m=1;this._pointerState.set(a,{event:e,doubleClickTimer:y,pointerDownCount:m}),this.refreshHasPendingInputs()}},Wre=class extends Zi{constructor(e=Qs.maximumDoubleClickDelay,i=Qs.maximumDoubleClickDistance,r=Qs.maximumDoubleTouchDelay,a=Qs.maximumDoubleTouchDistance,p=bd){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=p,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Hr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Y2({start:(y,m)=>this._dragStart(y,m),update:(y,m)=>this._dragUpdate(m),end:(y,m)=>this._dragEnd(m)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=fi(e.doubleTapTimeout)})}get hasPendingInputs(){return m2(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=fi(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,r){const{button:a,buttons:p,pointer:y,pointers:m,pointerType:_,timestamp:x}=r;return{action:e,delta:i,button:a,buttons:p,pointer:y,pointers:m,pointerType:_,timestamp:x}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:a}=i,{center:p}=r;this._dragStartCenter=p;const y=this._createDoubleTapDragData("begin",Hr(0,0),r);this._doubleTapDrag.emit(y,void 0,a),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:a}=i,p=Hr(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",p,i);this._doubleTapDrag.emit(y,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:a}=i,p=Hr(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",p,i);this._doubleTapDrag.emit(y,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=ac(i),a=this._pointerState.get(r),{pointerType:p}=i.native;if(a){const y=p==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),W6(a.event.data,i)>y?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,a=ac(i),p=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(a),p);this._pointerState.set(a,{event:e,doubleTapTimeout:y}),this.refreshHasPendingInputs()}},Jre=class extends Zi{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,a){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:a,pointers:Kre(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=qy(this._activePointerMap).angle,a={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,a);const p=ig(a,RN(this._activePointerMap));a.initialAngle=p,a.lastAngle=p,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=qy(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=qy(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=ig(r,i)-e,r.lastAngle=ig(r,i)-e})}_emitEvent(e,i,r){const a=qy(this._activePointerMap);this._drag.emit(this._createPayload(e,i,a,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,a=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,a)):(this._addPointer(r),this._emitEvent("added",r,a),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,a))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function RN(t){const e=[];return t.forEach(i=>{e.push(Hr(i.event.x,i.event.y))}),Bre(e)}function qy(t){const e=RN(t);let i=0;return t.forEach(r=>{let a=ig(r,e),p=a-r.lastAngle;for(;p>Math.PI;)p-=2*Math.PI;for(;p<-Math.PI;)p+=2*Math.PI;a=r.lastAngle+p,r.lastAngle=a;const y=a-r.initialAngle;i+=y}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function Kre(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function ig(t,e){const i=t.event,r=i.x-e.center.x,a=i.y-e.center.y;return Math.atan2(a,r)}var G$;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(G$||(G$={}));let Yre=class extends Zi{constructor(e=Qs.maximumDoubleClickDelay,i=Qs.maximumDoubleClickDistance,r=Qs.maximumDoubleTouchDelay,a=Qs.maximumDoubleTouchDistance,p=bd){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=p,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=ac(i);if(!this._pointerState.has(r)){const a={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,a),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=ac(i),a=this._pointerState.get(r);if(a&&a.downButton===i.native.button){const p=a.immediateDoubleClick;if(p){p.timeoutHandle.remove();const y=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;W6(p,e.data)>y?this._startImmediateDoubleClick(e,a):(this._immediateDoubleClick.emit(e.data,void 0,p.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,a)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=ac(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const s0={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let Zre=class extends Zi{constructor(e=s0.maximumClickDelay,i=s0.movementUntilMouseDrag,r=s0.movementUntilPenDrag,a=s0.movementUntilTouchDrag,p=s0.holdDelay,y=bd){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=a,this._holdDelay=p,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",m=>{this._handlePointerLoss(m,"pointer-up")}),this.registerIncoming("pointer-capture-lost",m=>{this._handlePointerLoss(m,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",m=>{this._handlePointerLoss(m,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=fi(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let a=null;this._pointerState.size===0&&(a=this._clock.setTimeout(()=>{const y=this._pointerState.get(r);if(y){if(!y.isDragging){const m=y.previousEvent;this._pointerHold.emit(m,void 0,e.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this._holdDelay));const p={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(r,p),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,r){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,a=this._pointerState.get(r);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,i),void 0,a.modifiers):Ure(i,a.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),a.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(a=>{a.holdTimeout!=null&&(a.holdTimeout.remove(),a.holdTimeout=null),a.isDragging||(a.modifiers=e.modifiers,a.isDragging=!0,r===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,i)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,a=r.native.pointerId,p=this._pointerState.get(a);p&&(p.holdTimeout!=null&&(p.holdTimeout.remove(),p.holdTimeout=null),p.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",p,i==="pointer-up"?r:p.previousEvent),void 0,p.modifiers):i==="pointer-up"&&p.downButton===r.native.button&&e.timestamp-p.startTimestamp<=this._maximumClickDelay&&!p.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(a),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};const Uy={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let wh=class extends je{constructor(){super(...arguments),this._handles=new Ho}initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([qo(()=>!e(),()=>this._disconnect()),qo(e,()=>this._connect())])}destroy(){this._handles=Wt(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Wt(this._inputManager)}_connect(){const e=this.view.surface,i=new PN(e,this.view.input),r=[new Yre,new Zre,new Hre,new Jre(this.view.navigation),new Wre],a=new zs({eventSource:i,recognizers:r});a.installHandlers("prevent-context-menu",[new qre],bu.INTERNAL),a.installHandlers("navigation",[new Rre(this.view),new Ire(this.view),new Nre(this.view),new D$(this.view),new D$(this.view,[Uy.counter]),new _re(this.view,"primary"),new kre(this.view,Uy.pan),new Cre(this.view,Uy.zoom),new Ore(this.view,Uy.rotate),new Sre(this.view,"secondary"),new wre(this.view,"touch")],bu.INTERNAL),this.view.viewEvents.connect(a),this._source=i,this._inputManager=a,Ee(()=>{var p,y;return(y=(p=this.view)==null?void 0:p.navigation)==null?void 0:y.browserTouchPanEnabled},p=>{this._source&&(this._source.browserTouchPanningEnabled=!p)},St)}get test(){return{inputManager:this._inputManager}}};v([S()],wh.prototype,"view",void 0),v([S()],wh.prototype,"latestPointerType",null),v([S()],wh.prototype,"latestPointerLocation",null),v([S()],wh.prototype,"multiTouchActive",null),wh=v([B("esri.views.2d.input.MapViewInputManager")],wh);const Xre=wh;var n2e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q$,U$,B$,e5={exports:{}};e5.exports,q$=e5,U$=function(){function t(a,p,y,m,_){e(a,p,y||0,m||a.length-1,_||r)}function e(a,p,y,m,_){for(;m>y;){if(m-y>600){var x=m-y+1,M=p-y+1,A=Math.log(x),C=.5*Math.exp(2*A/3),N=.5*Math.sqrt(A*C*(x-C)/x)*(M-x/2<0?-1:1);e(a,p,Math.max(y,Math.floor(p-M*C/x+N)),Math.min(m,Math.floor(p+(x-M)*C/x+N)),_)}var j=a[p],D=y,z=m;for(i(a,y,p),_(a[m],j)>0&&i(a,y,m);D<z;){for(i(a,D,z),D++,z--;_(a[D],j)<0;)D++;for(;_(a[z],j)>0;)z--}_(a[y],j)===0?i(a,y,z):i(a,++z,m),z<=p&&(y=z+1),p<=z&&(m=z-1)}}function i(a,p,y){var m=a[p];a[p]=a[y],a[y]=m}function r(a,p){return a<p?-1:a>p?1:0}return t},(B$=U$())!==void 0&&(q$.exports=B$);const Qre=LN(e5.exports);function Lv(t,e){if(!(this instanceof Lv))return new Lv(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function ese(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function Uc(t,e){H0(t,0,t.children.length,e,t)}function H0(t,e,i,r,a){a||(a=up(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var p,y=e;y<i;y++)p=t.children[y],W0(a,t.leaf?r(p):p);return a}function W0(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function H$(t,e){return t.minX-e.minX}function W$(t,e){return t.minY-e.minY}function ww(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function By(t){return t.maxX-t.minX+(t.maxY-t.minY)}function tse(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function ise(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),a=Math.min(t.maxX,e.maxX),p=Math.min(t.maxY,e.maxY);return Math.max(0,a-i)*Math.max(0,p-r)}function _w(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Hy(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function up(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function J$(t,e,i,r,a){for(var p,y=[e,i];y.length;)(i=y.pop())-(e=y.pop())<=r||(p=e+Math.ceil((i-e)/r/2)*r,Qre(t,p,e,i,a),y.push(e,p,p,i))}Lv.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!Hy(t,e))return i;for(var a,p,y,m,_=[];e;){for(a=0,p=e.children.length;a<p;a++)y=e.children[a],Hy(t,m=e.leaf?r(y):y)&&(e.leaf?i.push(y):_w(t,m)?this._all(y,i):_.push(y));e=_.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Hy(t,e))return!1;for(var r,a,p,y,m=[];e;){for(r=0,a=e.children.length;r<a;r++)if(p=e.children[r],Hy(t,y=e.leaf?i(p):p)){if(e.leaf||_w(t,y))return!0;m.push(p)}e=m.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var a=this.data;this.data=r,r=a}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=up([]),this},remove:function(t,e){if(!t)return this;for(var i,r,a,p,y=this.data,m=this.toBBox(t),_=[],x=[];y||_.length;){if(y||(y=_.pop(),r=_[_.length-1],i=x.pop(),p=!0),y.leaf&&(a=ese(t,y.children,e))!==-1)return y.children.splice(a,1),_.push(y),this._condense(_),this;p||y.leaf||!_w(y,m)?r?(i++,y=r.children[i],p=!1):y=null:(_.push(y),x.push(i),i=0,r=y,y=y.children[0])}return this},toBBox:function(t){return t},compareMinX:H$,compareMinY:W$,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var a,p=i-e+1,y=this._maxEntries;if(p<=y)return Uc(a=up(t.slice(e,i+1)),this.toBBox),a;r||(r=Math.ceil(Math.log(p)/Math.log(y)),y=Math.ceil(p/Math.pow(y,r-1))),(a=up([])).leaf=!1,a.height=r;var m,_,x,M,A=Math.ceil(p/y),C=A*Math.ceil(Math.sqrt(y));for(J$(t,e,i,C,this.compareMinX),m=e;m<=i;m+=C)for(J$(t,m,x=Math.min(m+C-1,i),A,this.compareMinY),_=m;_<=x;_+=A)M=Math.min(_+A-1,x),a.children.push(this._build(t,_,M,r-1));return Uc(a,this.toBBox),a},_chooseSubtree:function(t,e,i,r){for(var a,p,y,m,_,x,M,A;r.push(e),!e.leaf&&r.length-1!==i;){for(M=A=1/0,a=0,p=e.children.length;a<p;a++)_=ww(y=e.children[a]),(x=tse(t,y)-_)<A?(A=x,M=_<M?_:M,m=y):x===A&&_<M&&(M=_,m=y);e=m||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,a=i?t:r(t),p=[],y=this._chooseSubtree(a,this.data,e,p);for(y.children.push(t),W0(y,a);e>=0&&p[e].children.length>this._maxEntries;)this._split(p,e),e--;this._adjustParentBBoxes(a,p,e)},_split:function(t,e){var i=t[e],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);var p=this._chooseSplitIndex(i,a,r),y=up(i.children.splice(p,i.children.length-p));y.height=i.height,y.leaf=i.leaf,Uc(i,this.toBBox),Uc(y,this.toBBox),e?t[e-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(t,e){this.data=up([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Uc(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,a,p,y,m,_,x,M;for(_=x=1/0,r=e;r<=i-e;r++)y=ise(a=H0(t,0,r,this.toBBox),p=H0(t,r,i,this.toBBox)),m=ww(a)+ww(p),y<_?(_=y,M=r,x=m<x?m:x):y===_&&m<x&&(x=m,M=r);return M},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:H$,a=t.leaf?this.compareMinY:W$;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,a)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var a,p,y=this.toBBox,m=H0(t,0,e,y),_=H0(t,i-e,i,y),x=By(m)+By(_);for(a=e;a<i-e;a++)p=t.children[a],W0(m,t.leaf?y(p):p),x+=By(m);for(a=i-e-1;a>=e;a--)p=t.children[a],W0(_,t.leaf?y(p):p),x+=By(_);return x},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)W0(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Uc(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var t5;const K$=new ft({upperLeft:"upper-left",lowerLeft:"lower-left"});let _h=t5=class extends de{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new t5(se({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};v([S({type:vt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],_h.prototype,"extent",void 0),v([S({type:["view","edit"],json:{write:!0}})],_h.prototype,"mode",void 0),v([S({type:String,json:{read:K$.read,write:K$.write}})],_h.prototype,"originPosition",void 0),v([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],_h.prototype,"tolerance",void 0),_h=t5=v([B("esri.rest.support.QuantizationParameters")],_h);const jN=_h;let Y$=class DN{constructor(e,i){this.key=new Sc(0,0,0,0),this.bounds=Vo(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return vt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=Ur.acquire();for(let r=0;r<e.length;r++)i[r]=new DN(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return jN.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Ku={added:[],removed:[]},Sw=new Set,rse=new Sc(0,0,0,0);let sse=class extends Wo{constructor(e){super(),this._tiles=new Map,this._index=Lv(9,le("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const a=new Y$(this.tileScheme,r);this._tiles.set(r,a),this._index.insert(a),i.added.push(a)}for(const r of e.removed)if(this.has(r)){const a=this.get(r);this._tiles.delete(r),this._index.remove(a),i.removed.push(a)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:a}=i,{level:p}=a;if(r.length>0)for(const{row:y,colFrom:m,colTo:_}of r)for(let x=m;x<=_;x++){const M=rse.set(p,y,a.normalizeCol(x),a.getWorldForColumn(x)).id;if(Sw.add(M),!this.has(M)){const A=new Y$(this.tileScheme,M);this._tiles.set(M,A),this._index.insert(A),this.tiles.push(A),Ku.added.push(A)}}for(let y=this.tiles.length-1;y>=0;y--){const m=this.tiles[y];Sw.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(y,1),this._index.remove(m),Ku.removed.push(m))}(Ku.added.length||Ku.removed.length)&&this.emit("update",Ku),p1.pool.release(i),Sw.clear(),Ku.added.length=0,Ku.removed.length=0}},Sh=class extends je{constructor(){super(...arguments),this.color=new tt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};v([S({type:tt})],Sh.prototype,"color",void 0),v([S({type:tt})],Sh.prototype,"haloColor",void 0),v([S()],Sh.prototype,"haloOpacity",void 0),v([S()],Sh.prototype,"fillOpacity",void 0),Sh=v([B("esri.views.2d.support.HighlightOptions")],Sh);const FN=Sh,nse=t=>t.includes("Brush");let zN=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),nse(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function ose(t,e,i,r,a,p,y,m){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let _=null;t.width!=null&&t.height!=null?_=[t.width,t.height]:t.width==null&&t.height!=null?_=[t.height,t.height]:t.width!=null&&t.height==null?_=[t.width,t.width]:t.width==null&&t.height==null&&(_=null);const x=i[0]-(r.left+r.right),M=i[1]-(r.top+r.bottom);let A,C,N=t.area||{x:0,y:0,width:x,height:M};if(_){const j=x/M,D=_[0]/_[1];if(D>j){const z=N.width/D;N={x:N.x,y:Math.round(N.y+(N.height-z)/2),width:N.width,height:Math.round(z)}}else{const z=N.height*D;N={x:Math.round(N.x+(N.width-z)/2),y:N.y,width:Math.round(z),height:N.height}}}else _=[N.width,N.height];return _[0]>N.width?(A=Math.min(_[0]/N.width,e),C=_[0]/N.width/A):(A=1,C=_[0]/N.width),{resolutionScale:A,cropArea:{x:Math.round((N.x+r.left)*A),y:Math.round((N.y+r.top)*A),width:Math.round(N.width*A),height:Math.round(N.height*A)},outputScale:C,format:a,quality:p,children:y,rotation:m}}function ase(t,e,i){const{ctx:r,canvas:a}=VN(t,i),p=r.getImageData(0,0,t.width,t.height),y=hse(a,e);return GN(a),{dataUrl:y,data:p}}function lse(t,e){const{ctx:i,canvas:r}=VN(t,e),a=i.getImageData(0,0,t.width,t.height);return GN(r),a}function VN(t,e){const i=use();e.premultipliedAlpha&&yse(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&fse(r),{ctx:r,canvas:i}}function GN(t){t.width=0,t.height=0}function use(){return xw==null&&(xw=document.createElement("canvas")),xw}let xw=null;function hse(t,e){const i=mse[e.format],r=e.quality/100;return t.toDataURL(i,r)}function cse(t,e){const i=dse(t),r=vse[i];return{format:i,quality:nn(e??r,0,100)}}function pse(t,e){return e/Math.max(t[0],t[1])}function u2e(t,e,i,r=0,a=0,p=t.width-r,y=t.height-a,m=!1){const{data:_}=t,{width:x,height:M,data:A}=e,C=p/x,N=y/M,j=Math.ceil(C/2),D=Math.ceil(N/2),z=t.width;for(let W=0;W<M;W++)for(let Y=0;Y<x;Y++){const K=4*(Y+(m?M-W-1:W)*x);let ee=0,ne=0,oe=0,ue=0,ye=0,Se=0;const Ce=(W+.5)*N;for(let Ne=Math.floor(W*N);Ne<(W+1)*N;Ne++){const Le=Math.abs(Ce-(Ne+.5))/D,He=(Y+.5)*C,Pe=Le*Le;for(let yt=Math.floor(Y*C);yt<(Y+1)*C;yt++){const yi=Math.abs(He-(yt+.5))/j,Nt=Math.sqrt(Pe+yi*yi);if(Nt>=1)continue;let ut=2*Nt*Nt*Nt-3*Nt*Nt+1;const ar=4*(r+yt+(a+Ne)*z);Se+=ut*_[ar+3],ne+=ut,!i&&_[ar+3]<255&&(ut=ut*_[ar+3]/255),oe+=ut*_[ar],ue+=ut*_[ar+1],ye+=ut*_[ar+2],ee+=ut}}A[K]=oe/ee,A[K+1]=ue/ee,A[K+2]=ye/ee,A[K+3]=Se/ne}return e}function dse(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return gse}}function fse(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function yse(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const a=e[r+3];if(a!==255&&a>0){const p=255/a;e[r]=e[r]*p,e[r+1]=e[r+1]*p,e[r+2]=e[r+2]*p}}}const mse={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Z$=98,gse="png",vse={png:100,jpg:Z$,jpeg:Z$};var Gi;function i5(t,e,i={}){const r=e===Gi.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const a of r){const p=t.getContext(a,i);if(p)return p}return null}function h2e(t,e,i={}){const r=qN(t);for(const a of r){const p=i5(e,a,i);if(p)return p}return null}function qN(t){if(t==="3d")return[Gi.WEBGL2];const e=le("esri-force-webgl");return e===Gi.WEBGL1||e===Gi.WEBGL2?[e]:le("mac")&&le("chrome")?[Gi.WEBGL1,Gi.WEBGL2]:[Gi.WEBGL2,Gi.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(Gi||(Gi={}));let $w,Tw;function bse(t){const e=qN(t);for(;e.length>1;){const i=X$(e.shift());if(i.available)return i}return X$(e.shift())}function X$(t){switch(t){case Gi.WEBGL1:return wse();case Gi.WEBGL2:return _se()}}function wse(){return $w||($w=$se()),$w}function _se(){return Tw||(Tw=Tse()),Tw}let UN=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},Sse=class extends UN{constructor(){super(...arguments),this.type=Gi.WEBGL1}},xse=class extends UN{constructor(){super(...arguments),this.type=Gi.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function BN(t,e){if(t===Gi.WEBGL1&&typeof WebGLRenderingContext>"u"||t===Gi.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let r=i5(i,t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=i5(i,t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;if(t===Gi.WEBGL1){const p=r.getParameter(r.VERSION),y=p==null?void 0:p.match(/^WebGL\s+([\d.]*)/);if(y){const m=parseFloat(y[1]);e.available=m>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const a=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return a&&(e.supportsHighPrecisionFragment=a.precision>0),r}function $se(){const t=new Sse,e=BN(Gi.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function Tse(){const t=new xse,e=BN(Gi.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Ise(t){const e=bse(t);if(!e.available)return new ie("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new ie("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new ie("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new ie("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Gi.WEBGL1){if(!e.supportsElementIndexUint)return new ie("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new ie("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new ie("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function Mse(t){return t&&"nodeType"in t}function Ese(t){return t&&typeof t.render=="function"}const Q$={component:"esri-component"};let xh=class extends je{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(Q$.component),i&&i.classList.remove(Q$.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||Mse(e)?(this._set("widget",null),k6(e)):(Ese(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};v([S({dependsOn:[]})],xh.prototype,"id",null),v([S()],xh.prototype,"node",null),v([It("node")],xh.prototype,"castNode",null),v([S({readOnly:!0})],xh.prototype,"widget",void 0),xh=v([B("esri.views.ui.Component")],xh);const rg=xh,HN="calcite-mode-";function Ase(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function kse(){return Ase().startsWith("dark")}function Ose(){return`${HN}${kse()?"dark":"light"}`}function Cse(t){Pse(t),t.classList.add(Ose())}function Pse(t){Array.from(t.classList).forEach(e=>{e.startsWith(HN)&&t.classList.remove(e)})}const Nse={left:0,top:0,bottom:0,right:0},WN={bottom:30,top:15,right:15,left:15},ia="esri-ui",Jr={ui:ia,corner:`${ia}-corner`,innerContainer:`${ia}-inner-container`,manualContainer:`${ia}-manual-container`,cornerContainer:`${ia}-corner-container`,topLeft:`${ia}-top-left`,topRight:`${ia}-top-right`,bottomLeft:`${ia}-bottom-left`,bottomRight:`${ia}-bottom-right`};function Rse(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function Wy(t){return t===0?"0":`${t}px`}function Iw(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function Mw(t,{top:e,bottom:i,left:r,right:a}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=a}let xo=class extends Wo.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=Kn(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&Mw(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&Mw(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Ee(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,St),Ee(()=>this.padding,this._applyUIPadding,St),Ee(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},St),AS(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Jr.ui),Cse(e),this._attachContainers(e)),i&&(i.classList.remove(Jr.ui),Mw(i,{top:"",bottom:"",left:"",right:""}),nP(i)),this._set("container",e))}get height(){var p;const e=((p=this.view)==null?void 0:p.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:a}=i;return Math.max(e-r-a,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...WN,...e}}get width(){var p;const e=((p=this.view)==null?void 0:p.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:a}=i;return Math.max(e-r-a,0)}add(e,i){let r,a,p;if(Array.isArray(e))return void e.forEach(m=>this.add(m,i));const y=Iw(e);y&&({index:r,position:i,component:e,key:a}=y),i&&typeof i=="object"&&({index:r,key:a,position:i,internal:p}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r,a,p)}remove(e,i){var a;if(!e)return;if(Array.isArray(e))return e.map(p=>this.remove(p,i));const r=this._find(e);if(r){if(this._componentMap.has(e)&&((a=this._componentMap.get(e))==null?void 0:a.key)!==i)return;const p=this._components.indexOf(r),y=r.node.parentNode;return y==null||y.removeChild(r.node),this._componentMap.delete(e),this._components.splice(p,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const p of e)this.empty(p,i);return}const r=this._positionNameToContainerLookup[e??"manual"],a=Array.prototype.slice.call(r.children).map(p=>this._findByNode(p)).filter(p=>{var y;return p==null?!1:!(((y=this._componentMap.get(p))==null?void 0:y.internal)??!1)||i.removeInternal});for(const p of a)this.remove(p)}move(e,i){if(Array.isArray(e)&&e.forEach(y=>this.move(y,i)),!e)return;let r;const a=Iw(e)||Iw(i);if(a&&(r=a.index,i=a.position,e=a.component||e),i&&!this._isValidPosition(i))return;const p=this.remove(e);p&&this.add(p,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.map(r=>this._getComponentsAtPosition(r,i)).flat():this._getComponentsAtPosition(e,i):this._components.filter(r=>{var a;return i.includeInternal||!((a=this._componentMap.get(r))!=null&&a.internal)}).map(({widget:r,node:a})=>r??a)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,a,p){e instanceof rg||(e=new rg({node:e})),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:a,internal:p})}_find(e){return e?e instanceof rg?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??Nse}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Jr.innerContainer,Jr.cornerContainer);const i=document.createElement("div");i.classList.add(Jr.innerContainer,Jr.manualContainer);const r=document.createElement("div");r.classList.add(Jr.topLeft,Jr.corner),e.appendChild(r);const a=document.createElement("div");a.classList.add(Jr.topRight,Jr.corner),e.appendChild(a);const p=document.createElement("div");p.classList.add(Jr.bottomLeft,Jr.corner),e.appendChild(p);const y=document.createElement("div");y.classList.add(Jr.bottomRight,Jr.corner),e.appendChild(y),this._innerContainer=e,this._manualContainer=i;const m=CQ();this._cornerNameToContainerLookup={"top-left":r,"top-right":a,"bottom-left":p,"bottom-right":y,"top-leading":m?a:r,"top-trailing":m?r:a,"bottom-leading":m?y:p,"bottom-trailing":m?p:y},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:a}=e,p=this._positionNameToContainerLookup[i],y=a!=null&&a>-1;if(Rse(r.widget)&&r.widget.startup(),!y)return void p.appendChild(r.node);const m=Array.from(p.children);if(a===0)return void(p.firstChild?W8(r.node,p.firstChild):p.appendChild(r.node));a>=m.length?p.appendChild(r.node):W8(r.node,m[a])}_toPixelPosition(e){return{top:Wy(e.top),left:Wy(e.left),right:Wy(e.right),bottom:Wy(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(a=>this._findByNode(a)).filter(Po).filter(a=>{var p;return i.includeInternal||!((p=this._componentMap.get(a))!=null&&p.internal)}).map(({widget:a,node:p})=>a??p)}};v([S()],xo.prototype,"_locale",void 0),v([S()],xo.prototype,"container",null),v([S()],xo.prototype,"height",null),v([S({value:WN})],xo.prototype,"padding",null),v([It("padding")],xo.prototype,"castPadding",null),v([S()],xo.prototype,"view",void 0),v([S()],xo.prototype,"width",null),xo=v([B("esri.views.ui.UI")],xo);const Lse=xo,jse="randomUUID"in crypto;function JN(){if(jse)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function m2e(){return`{${JN()}}`}const Dse={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},Fse={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},zse=t=>({...Fse,...t}),Vse=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},Gse=(t,e)=>t.find(e),eT=(t,e,i=!1)=>{let r=t;return e.forEach((a,p)=>{const y=r!=null&&r.children?Gse(r.children,m=>m.domNode===a):void 0;i&&!y&&p!==e.length-1||(r=y)}),r},qse=t=>{let e;const i={...Dse,...t},r=zse(i),a=r.performanceLogger;let p,y=!0,m=!1;const _=[],x=[],M=(C,N,j)=>{var W;let D;r.eventHandlerInterceptor=(Y,K,ee,ne)=>function(oe){let ue;a("domEvent",oe);const ye=Vse(oe.currentTarget,D.domNode),Se=ye.some(Ne=>{var Le;return customElements.get((Le=Ne==null?void 0:Ne.tagName)==null?void 0:Le.toLowerCase())});if(oe.eventPhase===Event.CAPTURING_PHASE||!Se)ye.reverse(),ue=eT(D.getLastRender(),ye);else{const Ne=oe.composedPath(),Le=Ne.slice(Ne.indexOf(oe.currentTarget),Ne.indexOf(D.domNode)).filter(He=>He.getRootNode()===He.ownerDocument).reverse();ue=eT(D.getLastRender(),Le,!0)}let Ce;return ue&&(Ce=i.handleInterceptedEvent(e,ue,this,oe)),a("domEventProcessed",oe),Ce},(W=i.postProcessProjectionOptions)==null||W.call(i,r);const z=j();D=C(N,z,r),_.push(D),x.push(j),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(D,z)};let A=()=>{if(p=void 0,y){y=!1,a("renderStart",void 0);for(let C=0;C<_.length;C++){const N=x[C]();a("rendered",void 0),_[C].update(N),a("patched",void 0)}a("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(A=i.modifyDoRenderImplementation(A,_,x)),e={renderNow:A,scheduleRender:()=>{p||m||(p=requestAnimationFrame(A))},stop:()=>{p&&(cancelAnimationFrame(p),p=void 0),m=!0},resume:()=>{m=!1,y=!0,e.scheduleRender()},append:(C,N)=>{M(du.append,C,N)},insertBefore:(C,N)=>{M(du.insertBefore,C,N)},merge:(C,N)=>{M(du.merge,C,N)},replace:(C,N)=>{M(du.replace,C,N)},detach:C=>{for(let N=0;N<x.length;N++)if(x[N]===C)return x.splice(N,1),_.splice(N,1)[0];throw new Error("renderFunction was not found")}},e},hp={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let cp,KN,Z2,YN=!1,jv=!1,J6=!1,gs=!1,tT=null,r5=!1;const Use=t=>{const e=new URL(t,nr.$resourcesUrl$);return e.origin!==U1.location.origin?e.href:e.pathname},Bse=t=>nr.$resourcesUrl$=t,xc=(t,e="")=>()=>{},iT="http://www.w3.org/1999/xlink",rT={},Hse="http://www.w3.org/2000/svg",Wse="http://www.w3.org/1999/xhtml",Jse=t=>t!=null,K6=t=>(t=typeof t,t==="object"||t==="function");function Kse(t){var e,i,r;return(r=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&r!==void 0?r:void 0}const ZN=(t,e,...i)=>{let r=null,a=null,p=null,y=!1,m=!1;const _=[],x=A=>{for(let C=0;C<A.length;C++)r=A[C],Array.isArray(r)?x(r):r!=null&&typeof r!="boolean"&&((y=typeof t!="function"&&!K6(r))&&(r=String(r)),y&&m?_[_.length-1].$text$+=r:_.push(y?Dv(null,r):r),m=y)};if(x(i),e){e.key&&(a=e.key),e.name&&(p=e.name);{const A=e.className||e.class;A&&(e.class=typeof A!="object"?A:Object.keys(A).filter(C=>A[C]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,_,Xse);const M=Dv(t,null);return M.$attrs$=e,_.length>0&&(M.$children$=_),M.$key$=a,M.$name$=p,M},Dv=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Yse={},Zse=t=>t&&t.$tag$===Yse,Xse={forEach:(t,e)=>t.map(sT).forEach(e),map:(t,e)=>t.map(sT).map(e).map(Qse)},sT=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Qse=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),ZN(t.vtag,i,...t.vchildren||[])}const e=Dv(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},ene=t=>Mne.map(e=>e(t)).find(e=>!!e),tne=(t,e)=>t!=null&&!K6(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,ine=t=>t,g2e=(t,e,i)=>{const r=ine(t);return{emit:a=>rne(r,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:a})}},rne=(t,e,i)=>{const r=nr.ce(e,i);return t.dispatchEvent(r),r},nT=new WeakMap,sne=(t,e,i)=>{let r=zv.get(t);kne&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,zv.set(t,r)},nne=(t,e,i,r)=>{var a;let p=XN(e,i);const y=zv.get(p);if(t=t.nodeType===11?t:Zn,y)if(typeof y=="string"){t=t.head||t;let m=nT.get(t),_;if(m||nT.set(t,m=new Set),!m.has(p)){{_=Zn.createElement("style"),_.innerHTML=y;const x=(a=nr.$nonce$)!==null&&a!==void 0?a:Kse(Zn);x!=null&&_.setAttribute("nonce",x),t.insertBefore(_,t.querySelector("link"))}m&&m.add(p)}}else t.adoptedStyleSheets.includes(y)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,y]);return p},one=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,r=e.$flags$,a=xc("attachStyles",e.$tagName$),p=nne(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);r&10&&(i["s-sc"]=p,i.classList.add(p+"-h"),r&2&&i.classList.add(p+"-s")),a()},XN=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),oT=(t,e,i,r,a,p)=>{if(i!==r){let y=hT(t,e),m=e.toLowerCase();if(e==="class"){const _=t.classList,x=aT(i),M=aT(r);_.remove(...x.filter(A=>A&&!M.includes(A))),_.add(...M.filter(A=>A&&!x.includes(A)))}else if(e==="style"){for(const _ in i)(!r||r[_]==null)&&(_.includes("-")?t.style.removeProperty(_):t.style[_]="");for(const _ in r)(!i||r[_]!==i[_])&&(_.includes("-")?t.style.setProperty(_,r[_]):t.style[_]=r[_])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):hT(U1,m)?e=m.slice(2):e=m[2]+e.slice(3),i&&nr.rel(t,e,i,!1),r&&nr.ael(t,e,r,!1);else{const _=K6(r);if((y||_&&r!==null)&&!a)try{if(t.tagName.includes("-"))t[e]=r;else{const M=r??"";e==="list"?y=!1:(i==null||t[e]!=M)&&(t[e]=M)}}catch{}let x=!1;m!==(m=m.replace(/^xlink\:?/,""))&&(e=m,x=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(x?t.removeAttributeNS(iT,e):t.removeAttribute(e)):(!y||p&4||a)&&!_&&(r=r===!0?"":r,x?t.setAttributeNS(iT,e,r):t.setAttribute(e,r))}}},ane=/\s/,aT=t=>t?t.split(ane):[],QN=(t,e,i,r)=>{const a=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,p=t&&t.$attrs$||rT,y=e.$attrs$||rT;for(r in p)r in y||oT(a,r,p[r],void 0,i,e.$flags$);for(r in y)oT(a,r,p[r],y[r],i,e.$flags$)},Fv=(t,e,i,r)=>{const a=e.$children$[i];let p=0,y,m,_;if(YN||(J6=!0,a.$tag$==="slot"&&(cp&&r.classList.add(cp+"-s"),a.$flags$|=a.$children$?2:1)),a.$text$!==null)y=a.$elm$=Zn.createTextNode(a.$text$);else if(a.$flags$&1)y=a.$elm$=Zn.createTextNode("");else{if(gs||(gs=a.$tag$==="svg"),y=a.$elm$=Zn.createElementNS(gs?Hse:Wse,a.$flags$&2?"slot-fb":a.$tag$),gs&&a.$tag$==="foreignObject"&&(gs=!1),QN(null,a,gs),Jse(cp)&&y["s-si"]!==cp&&y.classList.add(y["s-si"]=cp),a.$children$)for(p=0;p<a.$children$.length;++p)m=Fv(t,a,p,y),m&&y.appendChild(m);a.$tag$==="svg"?gs=!1:y.tagName==="foreignObject"&&(gs=!0)}return y["s-hn"]=Z2,a.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=KN,y["s-sn"]=a.$name$||"",_=t&&t.$children$&&t.$children$[i],_&&_.$tag$===a.$tag$&&t.$elm$&&d1(t.$elm$,!1)),y},d1=(t,e)=>{nr.$flags$|=1;const i=t.childNodes;for(let r=i.length-1;r>=0;r--){const a=i[r];a["s-hn"]!==Z2&&a["s-ol"]&&(iR(a).insertBefore(a,Y6(a)),a["s-ol"].remove(),a["s-ol"]=void 0,J6=!0),e&&d1(a,e)}nr.$flags$&=-2},eR=(t,e,i,r,a,p)=>{let y=t["s-cr"]&&t["s-cr"].parentNode||t,m;for(y.shadowRoot&&y.tagName===Z2&&(y=y.shadowRoot);a<=p;++a)r[a]&&(m=Fv(null,i,a,t),m&&(r[a].$elm$=m,y.insertBefore(m,Y6(e))))},tR=(t,e,i,r,a)=>{for(;e<=i;++e)(r=t[e])&&(a=r.$elm$,nR(r),jv=!0,a["s-ol"]?a["s-ol"].remove():d1(a,!0),a.remove())},lne=(t,e,i,r)=>{let a=0,p=0,y=0,m=0,_=e.length-1,x=e[0],M=e[_],A=r.length-1,C=r[0],N=r[A],j,D;for(;a<=_&&p<=A;)if(x==null)x=e[++a];else if(M==null)M=e[--_];else if(C==null)C=r[++p];else if(N==null)N=r[--A];else if(Jy(x,C))pp(x,C),x=e[++a],C=r[++p];else if(Jy(M,N))pp(M,N),M=e[--_],N=r[--A];else if(Jy(x,N))(x.$tag$==="slot"||N.$tag$==="slot")&&d1(x.$elm$.parentNode,!1),pp(x,N),t.insertBefore(x.$elm$,M.$elm$.nextSibling),x=e[++a],N=r[--A];else if(Jy(M,C))(x.$tag$==="slot"||N.$tag$==="slot")&&d1(M.$elm$.parentNode,!1),pp(M,C),t.insertBefore(M.$elm$,x.$elm$),M=e[--_],C=r[++p];else{for(y=-1,m=a;m<=_;++m)if(e[m]&&e[m].$key$!==null&&e[m].$key$===C.$key$){y=m;break}y>=0?(D=e[y],D.$tag$!==C.$tag$?j=Fv(e&&e[p],i,y,t):(pp(D,C),e[y]=void 0,j=D.$elm$),C=r[++p]):(j=Fv(e&&e[p],i,p,t),C=r[++p]),j&&iR(x.$elm$).insertBefore(j,Y6(x.$elm$))}a>_?eR(t,r[A+1]==null?null:r[A+1].$elm$,i,r,p,A):p>A&&tR(e,a,_)},Jy=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,Y6=t=>t&&t["s-ol"]||t,iR=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,pp=(t,e)=>{const i=e.$elm$=t.$elm$,r=t.$children$,a=e.$children$,p=e.$tag$,y=e.$text$;let m;y===null?(gs=p==="svg"?!0:p==="foreignObject"?!1:gs,p==="slot"||QN(t,e,gs),r!==null&&a!==null?lne(i,r,e,a):a!==null?(t.$text$!==null&&(i.textContent=""),eR(i,null,e,a,0,a.length-1)):r!==null&&tR(r,0,r.length-1),gs&&p==="svg"&&(gs=!1)):(m=i["s-cr"])?m.parentNode.textContent=y:t.$text$!==y&&(i.data=y)},rR=t=>{const e=t.childNodes;let i,r,a,p,y,m;for(r=0,a=e.length;r<a;r++)if(i=e[r],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,p=0;p<a;p++)if(m=e[p].nodeType,e[p]["s-hn"]!==i["s-hn"]||y!==""){if(m===1&&y===e[p].getAttribute("slot")){i.hidden=!0;break}}else if(m===1||m===3&&e[p].textContent.trim()!==""){i.hidden=!0;break}}rR(i)}},Gn=[],sR=t=>{let e,i,r,a,p,y,m=0;const _=t.childNodes,x=_.length;for(;m<x;m++){if(e=_[m],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,a=e["s-sn"],y=r.length-1;y>=0;y--)i=r[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(lT(i,a)?(p=Gn.find(M=>M.$nodeToRelocate$===i),jv=!0,i["s-sn"]=i["s-sn"]||a,p?p.$slotRefNode$=e:Gn.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&Gn.map(M=>{lT(M.$nodeToRelocate$,i["s-sn"])&&(p=Gn.find(A=>A.$nodeToRelocate$===i),p&&!M.$slotRefNode$&&(M.$slotRefNode$=p.$slotRefNode$))})):Gn.some(M=>M.$nodeToRelocate$===i)||Gn.push({$nodeToRelocate$:i}));e.nodeType===1&&sR(e)}},lT=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",nR=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(nR)},une=(t,e)=>{const i=t.$hostElement$,r=t.$cmpMeta$,a=t.$vnode$||Dv(null,null),p=Zse(e)?e:ZN(null,null,e);Z2=i.tagName,r.$attrsToReflect$&&(p.$attrs$=p.$attrs$||{},r.$attrsToReflect$.map(([y,m])=>p.$attrs$[m]=i[y])),p.$tag$=null,p.$flags$|=4,t.$vnode$=p,p.$elm$=a.$elm$=i.shadowRoot||i,cp=i["s-sc"],KN=i["s-cr"],YN=(r.$flags$&1)!==0,jv=!1,pp(a,p);{if(nr.$flags$|=1,J6){sR(p.$elm$);let y,m,_,x,M,A,C=0;for(;C<Gn.length;C++)y=Gn[C],m=y.$nodeToRelocate$,m["s-ol"]||(_=Zn.createTextNode(""),_["s-nr"]=m,m.parentNode.insertBefore(m["s-ol"]=_,m));for(C=0;C<Gn.length;C++)if(y=Gn[C],m=y.$nodeToRelocate$,y.$slotRefNode$){for(x=y.$slotRefNode$.parentNode,M=y.$slotRefNode$.nextSibling,_=m["s-ol"];_=_.previousSibling;)if(A=_["s-nr"],A&&A["s-sn"]===m["s-sn"]&&x===A.parentNode&&(A=A.nextSibling,!A||!A["s-nr"])){M=A;break}(!M&&x!==m.parentNode||m.nextSibling!==M)&&m!==M&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),x.insertBefore(m,M))}else m.nodeType===1&&(m.hidden=!0)}jv&&rR(p.$elm$),nr.$flags$&=-2,Gn.length=0}},hne=(t,e)=>{},Z6=(t,e)=>(t.$flags$|=16,hne(t,t.$ancestorComponent$),Cne(()=>cne(t,e))),cne=(t,e)=>{const i=t.$hostElement$,r=xc("scheduleUpdate",t.$cmpMeta$.$tagName$),a=i;let p;return e?p=Yp(a,"componentWillLoad"):p=Yp(a,"componentWillUpdate"),p=uT(p,()=>Yp(a,"componentWillRender")),r(),uT(p,()=>pne(t,a,e))},pne=async(t,e,i)=>{const r=t.$hostElement$,a=xc("update",t.$cmpMeta$.$tagName$);r["s-rc"],i&&one(t);const p=xc("render",t.$cmpMeta$.$tagName$);dne(t,e,r),p(),a(),fne(t)},dne=(t,e,i)=>{try{tT=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(hp.hasRenderFn||hp.reflect)&&(hp.vdomRender||hp.reflect)&&(hp.hydrateServerSide||une(t,e))}catch(m){q1(m,t.$hostElement$)}return tT=null,null},fne=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,r=xc("postUpdate",e),a=i;t.$ancestorComponent$,Yp(a,"componentDidRender"),t.$flags$&64?(Yp(a,"componentDidUpdate"),r()):(t.$flags$|=64,Yp(a,"componentDidLoad"),r())},v2e=t=>{{const e=G1(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&Z6(e,!1),i}},Yp=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(r){q1(r)}},uT=(t,e)=>t&&t.then?t.then(e):e(),yne=(t,e)=>G1(t).$instanceValues$.get(e),mne=(t,e,i,r)=>{const a=G1(t),p=t,y=a.$instanceValues$.get(e),m=a.$flags$,_=p;i=tne(i,r.$members$[e][0]);const x=Number.isNaN(y)&&Number.isNaN(i);if(i!==y&&!x){a.$instanceValues$.set(e,i);{if(r.$watchers$&&m&128){const A=r.$watchers$[e];A&&A.map(C=>{try{_[C](i,y,e)}catch(N){q1(N,p)}})}if((m&18)===2){if(_.componentShouldUpdate&&_.componentShouldUpdate(i,y,e)===!1)return;Z6(a,!1)}}}},gne=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const r=Object.entries(e.$members$),a=t.prototype;r.map(([p,[y]])=>{(y&31||y&32)&&Object.defineProperty(a,p,{get(){return yne(this,p)},set(m){mne(this,p,m,e)},configurable:!0,enumerable:!0})});{const p=new Map;a.attributeChangedCallback=function(y,m,_){nr.jmp(()=>{const x=p.get(y);if(this.hasOwnProperty(x))_=this[x],delete this[x];else if(a.hasOwnProperty(x)&&typeof this[x]=="number"&&this[x]==_)return;this[x]=_===null&&typeof this[x]=="boolean"?!1:_})},t.observedAttributes=r.filter(([y,m])=>m[0]&15).map(([y,m])=>{const _=m[1]||y;return p.set(_,y),m[0]&512&&e.$attrsToReflect$.push([y,_]),_})}}return t},vne=async(t,e,i,r,a)=>{if(!(e.$flags$&32)&&(a=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),a.style)){let y=a.style;typeof y!="string"&&(y=y[e.$modeName$=ene(t)]);const m=XN(i,e.$modeName$);if(!zv.has(m)){const _=xc("registerStyles",i.$tagName$);sne(m,y,!!(i.$flags$&1)),_()}}e.$ancestorComponent$,(()=>Z6(e,!0))()},bne=t=>{},wne=t=>{if(!(nr.$flags$&1)){const e=G1(t),i=e.$cmpMeta$,r=xc("connectedCallback",i.$tagName$);e.$flags$&1?(oR(t,e,i.$listeners$),bne(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&_ne(t),i.$members$&&Object.entries(i.$members$).map(([a,[p]])=>{if(p&31&&t.hasOwnProperty(a)){const y=t[a];delete t[a],t[a]=y}}),vne(t,e,i)),r()}},_ne=t=>{const e=t["s-cr"]=Zn.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Sne=t=>{if(!(nr.$flags$&1)){const e=G1(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},b2e=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const r=t.prototype.connectedCallback,a=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){Ine(this,i)},connectedCallback(){wne(this),r&&r.call(this)},disconnectedCallback(){Sne(this),a&&a.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,gne(t,i)},w2e=(t,e)=>e,oR=(t,e,i,r)=>{i&&i.map(([a,p,y])=>{const m=$ne(t,a),_=xne(e,y),x=Tne(a);nr.ael(m,p,_,x),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>nr.rel(m,p,_,x))})},xne=(t,e)=>i=>{try{hp.lazyLoad||t.$hostElement$[e](i)}catch(r){q1(r)}},$ne=(t,e)=>e&4?Zn:e&8?U1:e&16?Zn.body:t,Tne=t=>Ene?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,aR=new WeakMap,G1=t=>aR.get(t),Ine=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return oR(t,i,e.$listeners$),aR.set(t,i)},hT=(t,e)=>e in t,q1=(t,e)=>(0,console.error)(t,e),zv=new Map,Mne=[],U1=typeof window<"u"?window:{},Zn=U1.document||{head:{}},_2e=U1.HTMLElement||class{},nr={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,r)=>t.addEventListener(e,i,r),rel:(t,e,i,r)=>t.removeEventListener(e,i,r),ce:(t,e)=>new CustomEvent(t,e)},Ene=(()=>{let t=!1;try{Zn.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),Ane=t=>Promise.resolve(t),kne=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),s5=[],lR=[],uR=(t,e)=>i=>{t.push(i),r5||(r5=!0,e&&nr.$flags$&4?One(n5):nr.raf(n5))},cT=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){q1(i)}t.length=0},n5=()=>{cT(s5),cT(lR),(r5=s5.length>0)&&nr.raf(n5)},One=t=>Ane().then(t),S2e=uR(s5,!1),Cne=uR(lR,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */const hR="calcite-mode-auto",cR="calcite-mode-dark",Pne="calcite-mode-light",x2e={autoMode:hR,darkMode:cR,lightMode:Pne,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var pR=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Vv=pR.join(","),dR=typeof Element>"u",$c=dR?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Gv=!dR&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},qv=function t(e,i){var r;i===void 0&&(i=!0);var a=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),p=a===""||a==="true",y=p||i&&e&&t(e.parentNode);return y},Nne=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},fR=function(e,i,r){if(qv(e))return[];var a=Array.prototype.slice.apply(e.querySelectorAll(Vv));return i&&$c.call(e,Vv)&&a.unshift(e),a=a.filter(r),a},yR=function t(e,i,r){for(var a=[],p=Array.from(e);p.length;){var y=p.shift();if(!qv(y,!1))if(y.tagName==="SLOT"){var m=y.assignedElements(),_=m.length?m:y.children,x=t(_,!0,r);r.flatten?a.push.apply(a,x):a.push({scopeParent:y,candidates:x})}else{var M=$c.call(y,Vv);M&&r.filter(y)&&(i||!e.includes(y))&&a.push(y);var A=y.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(y),C=!qv(A,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(y));if(A&&C){var N=t(A===!0?y.children:A.children,!0,r);r.flatten?a.push.apply(a,N):a.push({scopeParent:y,candidates:N})}else p.unshift.apply(p,y.children)}}return a},mR=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},gR=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Nne(e))&&!mR(e)?0:e.tabIndex},Rne=function(e,i){var r=gR(e);return r<0&&i&&!mR(e)?0:r},Lne=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},vR=function(e){return e.tagName==="INPUT"},jne=function(e){return vR(e)&&e.type==="hidden"},Dne=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},Fne=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},zne=function(e){if(!e.name)return!0;var i=e.form||Gv(e),r=function(m){return i.querySelectorAll('input[type="radio"][name="'+m+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=r(window.CSS.escape(e.name));else try{a=r(e.name)}catch(y){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",y.message),!1}var p=Fne(a,e.form);return!p||p===e},Vne=function(e){return vR(e)&&e.type==="radio"},Gne=function(e){return Vne(e)&&!zne(e)},qne=function(e){var i,r=e&&Gv(e),a=(i=r)===null||i===void 0?void 0:i.host,p=!1;if(r&&r!==e){var y,m,_;for(p=!!((y=a)!==null&&y!==void 0&&(m=y.ownerDocument)!==null&&m!==void 0&&m.contains(a)||e!=null&&(_=e.ownerDocument)!==null&&_!==void 0&&_.contains(e));!p&&a;){var x,M,A;r=Gv(a),a=(x=r)===null||x===void 0?void 0:x.host,p=!!((M=a)!==null&&M!==void 0&&(A=M.ownerDocument)!==null&&A!==void 0&&A.contains(a))}}return p},pT=function(e){var i=e.getBoundingClientRect(),r=i.width,a=i.height;return r===0&&a===0},Une=function(e,i){var r=i.displayCheck,a=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var p=$c.call(e,"details>summary:first-of-type"),y=p?e.parentElement:e;if($c.call(y,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof a=="function"){for(var m=e;e;){var _=e.parentElement,x=Gv(e);if(_&&!_.shadowRoot&&a(_)===!0)return pT(e);e.assignedSlot?e=e.assignedSlot:!_&&x!==e.ownerDocument?e=x.host:e=_}e=m}if(qne(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return pT(e);return!1},Bne=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var a=i.children.item(r);if(a.tagName==="LEGEND")return $c.call(i,"fieldset[disabled] *")?!0:!a.contains(e)}return!0}i=i.parentElement}return!1},Uv=function(e,i){return!(i.disabled||qv(i)||jne(i)||Une(i,e)||Dne(i)||Bne(i))},o5=function(e,i){return!(Gne(i)||gR(i)<0||!Uv(e,i))},Hne=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Wne=function t(e){var i=[],r=[];return e.forEach(function(a,p){var y=!!a.scopeParent,m=y?a.scopeParent:a,_=Rne(m,y),x=y?t(a.candidates):m;_===0?y?i.push.apply(i,x):i.push(m):r.push({documentOrder:p,tabIndex:_,item:a,isScope:y,content:x})}),r.sort(Lne).reduce(function(a,p){return p.isScope?a.push.apply(a,p.content):a.push(p.content),a},[]).concat(i)},Jne=function(e,i){i=i||{};var r;return i.getShadowRoot?r=yR([e],i.includeContainer,{filter:o5.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Hne}):r=fR(e,i.includeContainer,o5.bind(null,i)),Wne(r)},$2e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=yR([e],i.includeContainer,{filter:Uv.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=fR(e,i.includeContainer,Uv.bind(null,i)),r},T2e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return $c.call(e,Vv)===!1?!1:o5(i,e)},Kne=pR.concat("iframe").join(","),I2e=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return $c.call(e,Kne)===!1?!1:Uv(i,e)};const Yne={getShadowRoot:!0};function M2e(t){const e="dir",i=`[${e}]`,r=Zne(t,i);return r?r.getAttribute(e):"ltr"}function X6(t){return t.getRootNode()}function E2e(t){const e=X6(t);return"host"in e?e:null}function bR(t){return t.host||null}function A2e(t,{selector:e,id:i}){function r(a){if(!a)return null;a.assignedSlot&&(a=a.assignedSlot);const p=X6(a),y=i?"getElementById"in p?p.getElementById(i):null:e?p.querySelector(e):null,m=bR(p);return y||(m?r(m):null)}return r(t)}function Zne(t,e){function i(r){return r?r.closest(e)||i(bR(X6(r))):null}return i(t)}function Xne(t,e){return wR(t,e)}function wR(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:r}=t;return wR(r instanceof ShadowRoot?r.host:r,e)}function k2e(t,e){return!!Xne(e,i=>i===t?!0:void 0)}function Qne(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function O2e(t){if(t)return Qne(t)?t.setFocus():t.focus()}function C2e(t){t&&(Jne(t,Yne)[0]||t).focus()}const f1=":not([slot])";function P2e(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const r=e?Array.isArray(e)?e.map(a=>`[slot="${a}"]`).join(","):`[slot="${e}"]`:f1;return i!=null&&i.all?eoe(t,r,i):toe(t,r,i)}function _R(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function eoe(t,e,i){let r=e===f1?_R(t,f1):Array.from(t.querySelectorAll(e));r=i&&i.direct===!1?r:r.filter(p=>p.parentElement===t),r=i!=null&&i.matches?r.filter(p=>p==null?void 0:p.matches(i.matches)):r;const a=i==null?void 0:i.selector;return a?r.map(p=>Array.from(p.querySelectorAll(a))).reduce((p,y)=>[...p,...y],[]).filter(p=>!!p):r}function toe(t,e,i){let r=e===f1?_R(t,f1)[0]||null:t.querySelector(e);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===t?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const a=i==null?void 0:i.selector;return a?r==null?void 0:r.querySelector(a):r}function N2e(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function R2e(t){return Boolean(t).toString()}function L2e(t){return noe(t)||roe(t)}function ioe(t){return soe(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function roe(t){return!!ioe(t)}function soe(t){return t.target.assignedNodes({flatten:!0})}function noe(t){return!!ooe(t).length}function ooe(t){return t.target.assignedElements({flatten:!0})}function j2e(t){return!!(t.isPrimary&&t.button===0)}function D2e(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */function dT(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(cR)||t.contains(hR)&&e?"dark":"light",r=y=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:y}})),a=y=>{p!==y&&r(y),p=y};let p=i();r(p),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",y=>a(y.matches?"dark":"light")),new MutationObserver(()=>a(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function aoe(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?dT():document.addEventListener("DOMContentLoaded",()=>dT(),{once:!0}))}const loe=aoe;loe();let SR;function uoe(){try{Use(".")}catch{Bse(bs(Ot(SR)))}}function xR(t){var i;const e=[];for(const r of Object.keys(t))customElements.get(`calcite-${r}`)||e.push((i=t[r])==null?void 0:i.call(t));return Promise.all(e)}SR="components/assets";const $R=Symbol("widget"),hoe=Symbol("widget-test-data"),coe=[],poe={},Bv=new WeakMap;function TR(t,e){let i=e.children;if(i&&i.length)for(let a=0;a<i.length;++a)i[a]=TR(t,i[a]);else i=coe;const r=e.vnodeSelector;if(Q6(r)){const a=e.properties||poe,p=a.key||r;return{vnodeSelector:"div",properties:{key:p,afterCreate:doe,afterUpdate:foe,afterRemoved:IR,parentWidget:t,widgetConstructor:r,widgetProperties:{...a,key:p,children:i}},children:void 0,text:void 0,domNode:null}}return e}function doe(t,e,i,{parentWidget:r,widgetConstructor:a,widgetProperties:p}){var m;const y=new a(p);y.container=t,Bv.set(t,y),(m=y.afterCreate)==null||m.call(y,y,t),r._internalHandles.add(jo(()=>IR(t)))}function foe(t,e,i,{widgetProperties:r}){var p;const a=Bv.get(t);a&&(a.set(r),(p=a.afterUpdate)==null||p.call(a,a,t))}function IR(t){var i;const e=Bv.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),Bv.delete(t))}function Q6(t){return typeof t=="function"&&t[$R]}const fT=new Set;function yoe(t){fT.add(t),t.finally(()=>fT.delete(t))}var MR;const moe="esri.widgets.Widget";let goe=0;const voe={widgetIcon:"esri-icon-checkbox-unchecked"};function ER(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?ER(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const boe=qse({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,a,p,y)=>{const m=e==null?void 0:e(r,a,p,y),_=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in p)||_){const x=r[2].toLowerCase()+r.slice(3),M=N=>m==null?void 0:m.call(p,N);p.addEventListener(x,M,_);const A=()=>p.removeEventListener(x,M,_),C=y.afterRemoved;y.afterRemoved=N=>{C==null||C(N),A()}}return m}},handleInterceptedEvent(t,e,i,r){const{eventPhase:a,type:p}=r,y=a===Event.CAPTURING_PHASE;let m=`on${p}${y?"capture":""}`;const _=e.properties;(_&&m in _||(m=`on${p[0].toUpperCase()}${p.slice(1)}${y?"Capture":""}`,_&&m in _))&&(wP(),t.scheduleRender(),_[m].call(_.bind||i,r))}});let Ew=!1,Li=class extends w2(Wo.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new Ho,this._projector=boe,this._readyForTrueRender=!1,this.iconClass=voe.widgetIcon,this.icon=null,this.key=this,this._loadLocale=rE(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const y=await qn(this._messageBundleProps.map(async({bundlePath:m,propertyName:_})=>{if(this.destroyed)return;let x=await CS(m);this.uiStrings&&Object.keys(this.uiStrings)&&(x=ER(se(x),this.uiStrings)),this[_]=x}));if(this.destroyed)return;for(const m of y)m.error&&me.getLogger(this).error("widget-intl:locale-error",this.declaredClass,m.error)}await this.loadLocale()}),uoe();const r="esri-widget-uid-"+JN(),a=this.render.bind(this);this._trackingTarget=new y2(()=>this.scheduleRender());const p=()=>{var M;if(!this._readyForTrueRender||this.destroyed)return null;const y=a();let{properties:m}=y;m||(y.properties=m={});const{key:_}=m;_||(m.key=r),this.visible?m.styles||(m.styles={}):(m.class="",m.styles={display:"none"}),m.styles.display||(m.styles.display="");let x=0;return(M=y.children)==null||M.forEach(A=>{if(Q6(A.vnodeSelector))return;let{properties:C}=A;C||(A.properties=C={}),C.key||(C.key=`${this.id}--${x++}`)}),TR(this,y)};this.render=()=>{if(Ew)return p();let y=TQ(this)??null;if(y)return y;this._trackingTarget.clear(),Ew=!0;try{y=qa(this._trackingTarget,p)}catch(m){throw console.error(m),m}finally{Ew=!1}return y&&IQ(this,y),y},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),yoe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(a7)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Wt(this._trackingTarget),Wt(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,lw(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return k6(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+goe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(MR=$R,hoe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(lw(this),this._projector.scheduleRender())}classes(...e){return OQ.apply(this,e)}renderNow(){lw(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(Ee(()=>this.viewModel,(r,a)=>{a&&this._internalHandles.remove("delegated-events"),r&&p2(r)&&this._internalHandles.add(this._delegatedEventNames.map(p=>d2(r,p,y=>{this.emit(p,y)})),"delegated-events")},St)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(a7),this.scheduleRender()};this._internalHandles.add([AS(e),Ee(()=>this.uiStrings,e),qo(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};Li[MR]=!0,v([S()],Li.prototype,"_readyForTrueRender",void 0),v([S({value:null})],Li.prototype,"container",null),v([It("container")],Li.prototype,"castContainer",null),v([S()],Li.prototype,"iconClass",void 0),v([S()],Li.prototype,"icon",void 0),v([S()],Li.prototype,"id",null),v([S()],Li.prototype,"label",null),v([S()],Li.prototype,"renderable",null),v([S()],Li.prototype,"uiStrings",void 0),v([S()],Li.prototype,"viewModel",void 0),v([S({value:!0})],Li.prototype,"visible",null),v([S()],Li.prototype,"key",void 0),v([S()],Li.prototype,"children",void 0),v([S()],Li.prototype,"afterCreate",void 0),v([S()],Li.prototype,"afterUpdate",void 0),v([S()],Li.prototype,"afterRemoved",void 0),Li=v([B(moe)],Li);const Yo=Li;function yT(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function woe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function Ky(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function _oe(t){return t.type==="bing-maps"}const dl=[];let dp=class extends kv{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new De,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(a=>Ee(()=>{var p;return[a.suspended,(p=a.layer)==null?void 0:p.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(a=>{this._pendingAttributions.delete(a),this._fetchedAttributionData.delete(a)}),this._updateAttributionItems()},this.handles.add([Tu(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),qo(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;dl.length=0,e&&i?(i.forEach(r=>{var y;if(r.suspended||!((y=r.layer)!=null&&y.attributionVisible))return;const a=r.layer;if(yT(a,"user"))return void Ky(dl,r,a.copyright);if(a.hasAttributionData){if(this._fetchedAttributionData.has(r)){const m=this._fetchedAttributionData.get(r);return void(m?Ky(dl,r,this._getDynamicAttribution(m,e,a)):yT(a)&&Ky(dl,r,a.copyright))}return void this._fetchAttributionData(r)}const p=a.get("portalItem.accessInformation");Ky(dl,r,p||a.copyright)}),woe(this.items,dl)&&(this.items.removeAll(),this.items.addMany(dl)),dl.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await _2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,_oe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,a={};if(!r)return a;for(let p=0;p<r.length;p++){const y=r[p],m=y.coverageAreas;if(!m)return;for(const _ of m){const x=_.bbox,M=_.zoomMin-(i&&_.zoomMin?1:0),A=_.zoomMax-(i&&_.zoomMax?1:0),C=new vt({xmin:x[1],ymin:x[0],xmax:x[3],ymax:x[2],spatialReference:Je.WGS84}),N={extent:vu(C),attribution:y.attribution||"",score:_.score!=null?_.score:100,id:p};for(let j=M;j<=A;j++)a[j]??(a[j]=[]),a[j].push(N)}}return a.maxKey=Math.max.apply(null,Object.keys(a)),a}_getDynamicAttribution(e,i,r){var M;const{extent:a,scale:p}=i;let y=((M=r.tileInfo)==null?void 0:M.scaleToZoom(p))??0;if(y=Math.min(e.maxKey??0,Math.round(y)),!a||y==null||y<=-1)return"";const m=e[y],_=T2(a.center.clone().normalize(),i.spatialReference),x=new Set;return m?m.filter(A=>{const C=A.id,N=!x.has(C)&&_&&A.extent&&I2(A.extent,_);return N&&x.add(C),N}).sort((A,C)=>C.score-A.score||A.objectId-C.objectId).map(A=>A.attribution).join(", "):""}};v([S({readOnly:!0,type:De})],dp.prototype,"items",void 0),v([S({readOnly:!0})],dp.prototype,"state",null),v([S()],dp.prototype,"view",void 0),dp=v([B("esri.widgets.Attribution.AttributionViewModel")],dp);const AR=dp;function vs(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:xoe(t[e])}}}function Soe(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function xoe(t){return function(e,...i){Soe(e)?xP(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function eo(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var $oe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},kR=function(t,e){for(var i=0,r=t.length;i<r;i++){var a=t[i];Array.isArray(a)?kR(a,e):a!=null&&a!==!1&&(a.hasOwnProperty("vnodeSelector")||(a=$oe(a)),e.push(a))}},Toe=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var a=[];return kR(i,a),{vnodeSelector:t,properties:e||void 0,children:a,text:void 0,domNode:null}};function fe(t,e,...i){return typeof t!="function"||Q6(t)?Toe(t,e,...i):t(e,...i)}const Bc="esri-attribution",fl={base:`${Bc} esri-widget`,poweredBy:`${Bc}__powered-by`,sources:`${Bc}__sources`,open:`${Bc}--open`,sourcesOpen:`${Bc}__sources--open`,link:`${Bc}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Ir=class extends Yo{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:a})=>this._checkSourceTextOverflow(a))),this.iconClass=fl.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new AR}initialize(){this.addHandles(Tu(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[fl.open]:this._isOpen};return fe("div",{bind:this,class:this.classes(fl.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return fe("div",{class:fl.poweredBy},"Powered by"," ",fe("a",{class:fl.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?"0":"",{attributionText:a}=this,p={[fl.sourcesOpen]:e,[fl.interactive]:i};return fe("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(fl.sources,p),innerHTML:a,tabindex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:a,scrollWidth:p}=e,y=p>a,m=this._attributionTextOverflowed!==y;if(this._attributionTextOverflowed=y,m&&(i=!0),this._isOpen){const _=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,_&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};v([S()],Ir.prototype,"_isOpen",void 0),v([S()],Ir.prototype,"_isInteractive",null),v([S()],Ir.prototype,"_attributionTextOverflowed",void 0),v([S()],Ir.prototype,"_prevSourceNodeHeight",void 0),v([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ir.prototype,"attributionText",null),v([S()],Ir.prototype,"iconClass",void 0),v([S()],Ir.prototype,"icon",void 0),v([S()],Ir.prototype,"itemDelimiter",void 0),v([S()],Ir.prototype,"label",null),v([S(),eo("esri/widgets/Attribution/t9n/Attribution")],Ir.prototype,"messages",void 0),v([S()],Ir.prototype,"view",null),v([S({type:AR})],Ir.prototype,"viewModel",void 0),v([vs()],Ir.prototype,"_toggleState",null),Ir=v([B("esri.widgets.Attribution")],Ir);const Ioe=Ir,OR=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return n2(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return v([S()],e.prototype,"goToOverride",void 0),v([S()],e.prototype,"view",void 0),e=v([B("esri.widgets.support.GoTo")],e),e},Moe="esri.widgets.CompassViewModel";let $h=class extends OR(je){constructor(e){super(e),this._handles=new Ho,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Ee(()=>this.view,this._updateRotationWatcher,St))}destroy(){fi(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const e={};((i=this.view)==null?void 0:i.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?Ee(()=>e==null?void 0:e.rotation,this._updateForRotation,St):Ee(()=>e==null?void 0:e.camera,this._updateForCamera,St))}};v([S({readOnly:!0})],$h.prototype,"canShowNorth",null),v([S()],$h.prototype,"orientation",void 0),v([S({readOnly:!0})],$h.prototype,"state",null),v([S()],$h.prototype,"view",void 0),$h=v([B(Moe)],$h);const CR=$h,yl={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let An=class extends Yo{constructor(e,i){super(e,i),this.iconClass=yl.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new CR}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,r=i==="disabled",a=(i==="rotation"?"rotation":"compass")=="compass",p=r?-1:0,y={[yl.disabled]:r,[yl.interactive]:!r},m={[yl.northIcon]:a,[yl.rotationIcon]:!a},{messages:_}=this;return fe("div",{bind:this,class:this.classes(yl.base,y),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:p,"aria-label":_.reset,title:_.reset},fe("span",{"aria-hidden":"true",class:this.classes(yl.icon,m),styles:this._toRotationTransform(e)}),fe("span",{class:yl.text},_.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};v([S()],An.prototype,"goToOverride",null),v([S()],An.prototype,"iconClass",void 0),v([S()],An.prototype,"icon",void 0),v([S()],An.prototype,"label",null),v([S(),eo("esri/widgets/Compass/t9n/Compass")],An.prototype,"messages",void 0),v([S()],An.prototype,"view",null),v([S({type:CR})],An.prototype,"viewModel",void 0),v([vs()],An.prototype,"_reset",null),An=v([B("esri.widgets.Compass")],An);const Eoe=An,Hc="esri-navigation-toggle",Os={base:`${Hc} esri-widget`,button:`${Hc}__button esri-widget--button`,activeButton:`${Hc}__button--active`,panButton:`${Hc}__button--pan`,rotateButton:`${Hc}__button--rotate`,isLayoutHorizontal:`${Hc}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let fp=class extends je{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(qo(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};v([S({readOnly:!0})],fp.prototype,"state",null),v([S()],fp.prototype,"navigationMode",void 0),v([S()],fp.prototype,"view",void 0),fp=v([B("esri.widgets.NavigationToggleViewModel")],fp);const PR=fp;let kn=class extends Yo{constructor(e,i){super(e,i),this.iconClass=Os.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new PR}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",r={[Os.disabled]:e,[Os.isLayoutHorizontal]:this.layout==="horizontal"},a={[Os.activeButton]:i},p={[Os.activeButton]:!i},y=e?-1:0,m=this.messages.toggle;return fe("div",{bind:this,class:this.classes(Os.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:y,"aria-label":m,title:m},fe("div",{class:this.classes(Os.button,Os.panButton,a)},fe("span",{class:Os.panIcon})),fe("div",{class:this.classes(Os.button,Os.rotateButton,p)},fe("span",{class:Os.rotationIcon})))}_toggle(){this.toggle()}};v([S()],kn.prototype,"iconClass",void 0),v([S()],kn.prototype,"icon",void 0),v([S()],kn.prototype,"label",null),v([S({value:"vertical"})],kn.prototype,"layout",null),v([S(),eo("esri/widgets/NavigationToggle/t9n/NavigationToggle")],kn.prototype,"messages",void 0),v([S()],kn.prototype,"view",null),v([S({type:PR})],kn.prototype,"viewModel",void 0),v([vs()],kn.prototype,"_toggle",null),kn=v([B("esri.widgets.NavigationToggle")],kn);const Aoe=kn,n0={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let ba=class extends Yo{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[n0.disabled]:!this.enabled,[n0.interactive]:this.enabled};return fe("div",{bind:this,class:this.classes(n0.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},fe("span",{"aria-hidden":"true",role:"presentation",class:this.classes(n0.icon,this.iconClass??"")}),fe("span",{class:n0.iconText},this.title))}_triggerAction(){this.action.call(this)}};v([S()],ba.prototype,"action",void 0),v([S()],ba.prototype,"enabled",void 0),v([S()],ba.prototype,"iconClass",void 0),v([S()],ba.prototype,"icon",void 0),v([S()],ba.prototype,"title",void 0),v([vs()],ba.prototype,"_triggerAction",null),ba=v([B("esri.widgets.IconButton")],ba);const mT=ba;let yp=class extends je{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};v([S({readOnly:!0})],yp.prototype,"canZoomIn",null),v([S({readOnly:!0})],yp.prototype,"canZoomOut",null),v([S()],yp.prototype,"view",void 0),yp=v([B("esri.widgets.Zoom.ZoomConditions2D")],yp);const koe=yp;let mp=class extends je{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};v([S({readOnly:!0})],mp.prototype,"canZoomIn",null),v([S({readOnly:!0})],mp.prototype,"canZoomOut",null),v([S()],mp.prototype,"view",void 0),mp=v([B("esri.widgets.Zoom.ZoomConditions3D")],mp);const Ooe=mp;let Ll=class extends je{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new koe({view:e}):e.type==="3d"&&(this._zoomConditions=new Ooe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():b3(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():b3(e.goTo({zoomFactor:.5}))}};v([S()],Ll.prototype,"_zoomConditions",void 0),v([S()],Ll.prototype,"canZoomIn",null),v([S()],Ll.prototype,"canZoomOut",null),v([S({readOnly:!0})],Ll.prototype,"state",null),v([S()],Ll.prototype,"view",null),Ll=v([B("esri.widgets.Zoom.ZoomViewModel")],Ll);const NR=Ll,o0={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let $o=class extends Yo{constructor(e,i){super(e,i),this.iconClass=o0.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new NR}initialize(){this._zoomInButton=new mT({action:this.zoomIn.bind(this),iconClass:o0.zoomInIcon}),this._zoomOutButton=new mT({action:this.zoomOut.bind(this),iconClass:o0.zoomOutIcon})}destroy(){this._zoomInButton=Wt(this._zoomInButton),this._zoomOutButton=Wt(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[o0.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:a}=e;this._zoomInButton.enabled=r,this._zoomOutButton.enabled=a;const{zoomIn:p,zoomOut:y}=this.messages;return this._zoomInButton.title=p,this._zoomOutButton.title=y,fe("div",{class:this.classes(o0.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};v([S()],$o.prototype,"iconClass",void 0),v([S()],$o.prototype,"icon",void 0),v([S()],$o.prototype,"label",null),v([S({value:"vertical"})],$o.prototype,"layout",null),v([S(),eo("esri/widgets/Zoom/t9n/Zoom")],$o.prototype,"messages",void 0),v([S()],$o.prototype,"view",null),v([S({type:NR})],$o.prototype,"viewModel",void 0),$o=v([B("esri.widgets.Zoom")],$o);const Coe=$o;function Poe(t){return(t==null?void 0:t.view)!==void 0}let sg=class extends Lse{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const a=this._find(r),p=a==null?void 0:a.widget;Poe(p)&&(p.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Ee(()=>this.components,this._componentsWatcher,St),Ee(()=>this.view,this._updateViewAwareWidgets,St)])}_add(e,i,r,a,p){let y=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;y=this._createComponent(e)}super._add(y,i,r,a,p)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new rg({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new Ioe({view:i});case"compass":return new Eoe({view:i});case"navigation-toggle":return new Aoe({view:i});case"zoom":return new Coe({view:i})}}};v([S()],sg.prototype,"components",void 0),sg=v([B("esri.views.ui.DefaultUI")],sg);const RR=sg;let ng=class extends RR{constructor(e){super(e),this.components=["attribution","zoom"]}};v([S()],ng.prototype,"components",void 0),ng=v([B("esri.views.ui.2d.DefaultUI2D")],ng);const LR=ng;var a5;let og=a5=class extends de{constructor(t){super(t),this.color=new tt([0,0,0,1])}clone(){return new a5(se({color:this.color}))}};v([S({type:tt,json:{write:!0}})],og.prototype,"color",void 0),og=a5=v([B("esri.webmap.background.ColorBackground")],og);const Noe=og;let jR,DR,FR,zR,VR,GR;async function Roe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:a,Stage:p}]=await Promise.all([we(()=>import("./webglDeps-3f7ee6d0.js"),["assets/webglDeps-3f7ee6d0.js","assets/VertexArrayObject-7660fad3.js","assets/Texture-46a0d29f.js","assets/enums-b14466b3.js","assets/ProgramTemplate-0a1f878c.js","assets/programUtils-fbe64589.js","assets/NestedMap-1b5db22e.js"]),we(()=>import("./mapViewDeps-58aaa438.js"),["assets/mapViewDeps-58aaa438.js","assets/CIMResourceManager-0042ada2.js","assets/fontUtils-ace31181.js","assets/Rasterizer-3dc1d9cd.js","assets/cimAnalyzer-139e1e4c.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-7685c378.js","assets/alignmentUtils-ae955d28.js","assets/definitions-838da113.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-ca0cc80d.js","assets/floatRGBA-94fad0a9.js","assets/rasterizingUtils-851cf3a3.js","assets/imageutils-bdba6a2b.js","assets/Container-dc903d08.js","assets/EffectView-88cf4334.js","assets/enums-b14466b3.js","assets/Texture-46a0d29f.js","assets/BufferPool-09d35b6c.js","assets/AttributeStoreView-f5278c8f.js","assets/TiledDisplayObject-9730a14f.js","assets/color-8a8b1498.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1a170e79.js","assets/VertexArrayObject-7660fad3.js","assets/ProgramTemplate-0a1f878c.js","assets/GeometryUtils-2c6d668c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-00ef0f46.js","assets/visualVariablesUtils-fe0435c8.js","assets/ExpandedCIM-b55558c6.js","assets/util-066d9298.js","assets/enums-fb086c25.js","assets/programUtils-fbe64589.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-a9e173bb.js","assets/Matcher-9cb7e617.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-fb05f5cb.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-a5c87195.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-4b162209.js","assets/arcadeTimeUtils-9f278e0b.js","assets/executionError-c92d3b85.js","assets/projectionSupport-ab9cb325.js","assets/json-48e3ea08.js","assets/RenderingContext-f6b2369a.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-8f8530bd.js","assets/normalizeUtilsSync-d204d375.js","assets/GraphicContainer-e8dfd68f.js","assets/BaseGraphicContainer-9510550c.js","assets/FeatureContainer-34b5ccc1.js","assets/TileContainer-ceba5fb3.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-f63fd398.js"])]);DR=t,FR=e,zR=i,VR=r,GR=a,jR=p}const gT=160,vT={flipY:!0,premultipliedAlpha:!0};let Ke=class extends CX(cee(ZQ(ete))){constructor(t){super(t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new ld({getCollections:()=>{var e,i;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new Fr({constraints:new vN({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new vie(this),this._pePromise=null,this.floors=new De,this.highlightOptions=new FN,this.inputManager=new Xre({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new zN,this.type="2d",this.ui=new LR,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Ee(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(gT)},Cd),this.on("resize",e=>this.stateManager.resize(e.width,e.height)),Ee(()=>{var e;return(e=this.animationManager)==null?void 0:e.animation},e=>{this.animation=e})]),sZ()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Wt(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new sse(this.featuresTilingScheme)}get constraintsInfo(){var i,r;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,e=this.spatialReference;return{lods:(r=t==null?void 0:t.spatialReference)!=null&&r.equals(e)?t.lods:null,spatialReference:e}}get state(){return this.stateManager.state}get initialExtentRequired(){var y;if(!this.stateManager)return!1;const{scale:t,constraints:e,center:i,viewpoint:r,extent:a}=this;let p=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)!=null&&y.viewpoint))&&!a&&(e!=null&&e.effectiveLODs||(p=-1),(!i||t===0&&p===-1)&&(!r||r.targetGeometry==null||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Cc()||(this._pePromise||(this._pePromise=Eu().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const e=this.spatialReference,i=t.targetGeometry;return!!Ja(i.spatialReference,e)||this._projectionEngineLoaded}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{var r;t===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame()),this.frameTask.animationInProgress=!1};t.when(i,i)}get background(){return joe(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const e=this.stateManager.constraints;this.stateManager.constraints=t,e==null||e.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){this.stateManager.rotation=t}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var e,i,r;const t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0));if(le("esri-2d-log-updating")){const a=this.allLayerViews.reduce((p,y)=>({...p,[y.layer.id]:!y.destroyed&&!("layerViews"in y)&&y.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(e=this.layerViewManager)==null?void 0:e.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(r=this.graphicsView)==null?void 0:r.updating}
-> allLayerViews: ${JSON.stringify(a)}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),s1(()=>this.ready,e).then(()=>{var a;const i={animate:!0,...e},r=Qte(t,this);return(a=this.animation)==null||a.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});me.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(t,e){const i=I$(t)?T$(this,t):t;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,a=!1,p=null,y=null;e!=null&&e.include?wT(e.include,bT(this,M=>r.add(M),M=>{p||(p=new Set),p.add(M)},M=>r.add(M),()=>a=!0)):(a=!0,r=new Set(this.allLayerViews)),e!=null&&e.exclude&&wT(e.exclude,bT(this,M=>r.delete(M),M=>{y||(y=new Set),y.add(M)}));const m=this.allLayerViews.filter(M=>!M.suspended&&r.has(M)).reverse(),_=this.toMap(i);let x=[...a?this.graphicsView.hitTest(_).map(M=>({type:"graphic",graphic:M,layer:null,mapPoint:_})):[],...await Promise.all(m.map(M=>M.hitTest(_,i)).toArray())].filter(Po).flat().filter(Po);return p&&(x=x.filter(M=>!("graphic"in M)||!M.graphic||(p==null?void 0:p.has(l5(M.graphic))))),y&&(x=x.filter(M=>!("graphic"in M)||!M.graphic||!(y!=null&&y.has(l5(M.graphic))))),{screenPoint:i,results:x}}async takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return ase(i,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},vT)}async _takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return lse(i,vT)}_createScreenshotPlan(t){t=t??{};const e=this.supersampleScreenshotsEnabled?Math.min(4,pse(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;t.layers?(i=[],t.layers.forEach(p=>{const y=this.allLayerViews.find(m=>m.layer.id===p.id);y&&"container"in y&&y.container&&i.push(y.container)})):i=this._stage.children;const{format:r,quality:a}=cse(t.format,t.quality);return ose(t,e,this.size,this.padding,r,a,i,t.rotation)}get test(){return{takeScreenshot:t=>this._takeScreenshot(t)}}toMap(t){if(!this.ready)return null;const e=I$(t)?T$(this,t):t;return this.stateManager.toMap(e)}toScreen(t){return this.stateManager.toScreen(t)}on(t,e,i,r){return this.inputManager&&this.viewEvents.on(t,e,i,r)||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t,e,i;return this.map&&"initialViewProperties"in this.map&&((e=(t=this.map)==null?void 0:t.initialViewProperties)==null?void 0:e.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(t){return P$.hasLayerViewModule(t)}importLayerView(t){return P$.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(me.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return this.hitTest(t).then(e=>({...e,mapPoint:this.toMap(t)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let t=Ise(this.type);return le("safari")&&le("safari")<9&&(t=new ie("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:le("safari")})),t!=null?(me.getLogger(this).warn("#validate()",t.message),Promise.reject(t)):Roe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new U9),this.animation}_cancellableGoTo(t,e,i){const r=()=>t===this._gotoTask,a=i.then(()=>{r()&&(this.animation=null)}).catch(y=>{throw r()&&(e&&!e.done&&(e.stop(),this.frameTask.animationInProgress=!1),this.animation=null),y}),p=new Promise(y=>y(a));return e.when().catch(()=>{r()&&p.cancel&&p.cancel()}),p}_gotoImmediate(t,e){const i=this._gotoTask,r=this.animation,a=t.then(p=>{if(Zt(e),i!==this._gotoTask)throw new ie("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=p,r.finish()});return this._cancellableGoTo(i,r,a)}_flipStationary(t){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<gT&&(this._stationaryTimer=this._flipStationary(e))},t)),this._stationaryTimer}_getDefaultViewpoint(){var D;const{constraints:t,initialExtent:e,map:i,padding:r,size:a}=this;if(!t)return null;const p=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,y=this.stateManager.getUserStartupOptions(this.size),m=p==null?void 0:p.viewpoint,_=((D=m==null?void 0:m.targetGeometry)==null?void 0:D.extent)??e,x=_==null?void 0:_.center,M=(m==null?void 0:m.rotation)??0,A=(m==null?void 0:m.scale)||_&&Kp(_,[a[0]-r.left-r.right,a[1]-r.top-r.bottom]),C=y.center??x,N=y.rotation??M,j=y.scale??A;return C&&j?new Ro({targetGeometry:C,scale:j,rotation:N}):null}_gotoAnimated(t,e){const i=this._gotoTask,r=this.animation;if(!r)return Promise.resolve();const a=t.then(p=>{if(Zt(e),i!==this._gotoTask)throw new ie("view:goto-interrupted","Goto was interrupted");return r.update(p),this.animationManager.animate(r,this.viewpoint,e),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,a)}_startup(){var y;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(y=this.defaultsFromMap.extent)==null?void 0:y.center),this.graphics.owner=this;const e=new jR(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=e,this._magnifierView=new GR,this._magnifierView.magnifier=this.magnifier;const i=new zR({view:this});this._set("labelManager",i);const r=new gie({view:this});this._set("animationManager",r);const a=new VR({view:this,animationManager:r});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),e.on("post-render",()=>this._set("rendering",e.renderRequested)),e.on("will-render",()=>this._set("rendering",e.renderRequested)),e.on("webgl-error",m=>this.fatalError=m.error),Ee(()=>this.stationary,m=>e.stationary=m,Ca),Ee(()=>this.background,m=>{e.backgroundColor=m==null?void 0:m.color,this._magnifierView.backgroundColor=m==null?void 0:m.color},Ca),Ee(()=>this.magnifier,m=>this._magnifierView.magnifier=m,Ca),Ee(()=>this.renderingOptions,m=>e.renderingOptions=m,Ca),Ee(()=>this.highlightOptions,m=>e.highlightOptions=m,Ca),Ee(()=>this.state.id,()=>e.state=this.state,Ca)],"map-view"),this._updateStageChildren();const p=this._resolveWhenReady;this._resolveWhenReady=[],p.forEach(m=>m(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new Eie(R9.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const e=new DR({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new FR(t)});this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const e of this.allLayerViews)e.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const e of this.allLayerViews)e.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Ke.type="2d",v([S({readOnly:!0})],Ke.prototype,"animationManager",void 0),v([S({constructOnly:!0})],Ke.prototype,"deactivatedWebGLExtensions",void 0),v([S({constructOnly:!0})],Ke.prototype,"debugWebGLExtensions",void 0),v([S({readOnly:!0})],Ke.prototype,"featuresTilingScheme",void 0),v([S({readOnly:!0})],Ke.prototype,"fullOpacity",void 0),v([S({readOnly:!0})],Ke.prototype,"graphicsTileStore",null),v([S()],Ke.prototype,"graphicsView",void 0),v([S()],Ke.prototype,"stateManager",void 0),v([S()],Ke.prototype,"constraintsInfo",null),v([S({readOnly:!0})],Ke.prototype,"state",null),v([S()],Ke.prototype,"initialExtentRequired",null),v([S()],Ke.prototype,"labelManager",void 0),v([S({readOnly:!0})],Ke.prototype,"resourceManager",null),v([S({readOnly:!0})],Ke.prototype,"textureManager",null),v([S({readOnly:!0})],Ke.prototype,"mapViewNavigation",void 0),v([S({constructOnly:!0})],Ke.prototype,"renderCanvas",void 0),v([S()],Ke.prototype,"renderingOptions",void 0),v([S({readOnly:!0})],Ke.prototype,"rendering",void 0),v([S({constructOnly:!0})],Ke.prototype,"supersampleScreenshotsEnabled",void 0),v([S({readOnly:!0})],Ke.prototype,"supportsGround",void 0),v([S()],Ke.prototype,"_stationaryTimer",void 0),v([S()],Ke.prototype,"_defaultsFromMapSettings",null),v([S()],Ke.prototype,"_pePromise",void 0),v([S({readOnly:!0})],Ke.prototype,"typeSpecificPreconditionsReady",null),v([S()],Ke.prototype,"animation",null),v([S({type:Noe})],Ke.prototype,"background",null),v([S()],Ke.prototype,"center",null),v([S({type:vN})],Ke.prototype,"constraints",null),v([S()],Ke.prototype,"extent",null),v([S()],Ke.prototype,"floors",void 0),v([S({type:FN})],Ke.prototype,"highlightOptions",void 0),v([S({readOnly:!0})],Ke.prototype,"inputManager",void 0),v([S()],Ke.prototype,"map",void 0),v([S()],Ke.prototype,"padding",null),v([S()],Ke.prototype,"resizeAlign",null),v([S({readOnly:!0})],Ke.prototype,"resolution",null),v([S()],Ke.prototype,"rotation",null),v([S()],Ke.prototype,"scale",null),v([S({constructOnly:!0})],Ke.prototype,"spatialReferenceLocked",void 0),v([S()],Ke.prototype,"stationary",null),v([S({type:zN,readOnly:!0})],Ke.prototype,"timeline",void 0),v([S({readOnly:!0})],Ke.prototype,"type",void 0),v([S({readOnly:!0})],Ke.prototype,"updating",null),v([S()],Ke.prototype,"viewpoint",null),v([S()],Ke.prototype,"zoom",null),v([S({readOnly:!0})],Ke.prototype,"navigating",null),v([S(),It(t=>t instanceof RR?t:hc(LR,t))],Ke.prototype,"ui",void 0),Ke=v([B("esri.views.MapView")],Ke);const Loe=Ke;function l5(t){var i,r;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((r=t.sourceLayer)==null?void 0:r.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function bT(t,e,i,r,a){return p=>{if(p instanceof Nr){if(p.layer===t)a==null||a();else{const y=t.allLayerViews.find(m=>m.layer===p.layer);y&&(r==null||r(y))}i(l5(p))}else{const y=t.allLayerViews.find(m=>m.layer===p);y&&e(y)}}}function wT(t,e){if(t)if(Rg(t))for(const i of t)if(Rg(i))for(const r of i)e(r);else e(i);else e(t)}function joe(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}function Doe(t,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const p=Object.getOwnPropertyDescriptor(r,a);p&&Object.defineProperty(t,a,p.get?p:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var ag={exports:{}};ag.exports,function(t,e){function i(){function a(h){if(typeof h=="number")return U.Uc.ah(h);if(h==null)return null;if(pn[h]!=null)return U.Uc.ah(pn[h]);throw Error("Unrecognised Unit Type")}function p(h){if(typeof h=="number")return U.Uc.ah(h);if(h==null)return null;if(ay[h]!=null)return U.Uc.ah(ay[h]);throw Error("Unrecognised Unit Type")}function y(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function m(h,k,b,u){if(b==null||b.B())return null;switch(b.K()){case U.sn.Point:return h.exportPoint(k,b,u);case U.sn.Polygon:return h.exportPolygon(k,b,u);case U.sn.Polyline:return h.exportPolyline(k,b,u);case U.sn.MultiPoint:return h.exportMultipoint(k,b,u);case U.sn.Envelope:return h.exportExtent(k,b,u)}return null}function _(h,k,b,u){if(b.K()!==U.sn.Point)throw Error("Geometry not Point");return h.exportPoint(k,b,u)}function x(h,k,b){return h.convertToGEGeometry(k,b)}function M(h){var k=h.wkid;h=h.wkt;var b=Xo.get(k||h);return b==null&&(k!==-1&&k!=null?(b=U.Gg.create(k),Xo.set(k,b)):h&&(b=U.Gg.lP(h),Xo.set(h,b)),tl.has(k||h)&&b.QW(tl.get(k||h))),b}function A(h){var k;if(h==null)return null;var b=M(h);return h=b.Id(),b=b.Mn(),(k={}).tolerance=b,k.unitType=h==null?-1:h.pd,k.unitID=h==null?-1:h.Fc(),k.unitBaseFactor=h==null?0:h.ci,k.unitSquareDerivative=h==null?0:U.Uc.WF(h).Fc(),k}function C(h,k,b,u){return b==null?null:(b=U.ac.clip(x(h,_e,b),x(h,_e,u),M(k)),m(h,_e,b,k))}function N(h,k,b,u){b=U.ac.fl(x(h,_e,b),x(h,_e,u),M(k)),u=[];for(var o=0;o<b.length;o++)u.push(m(h,_e,b[o],k));return u}function j(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.contains(x(h,_e,b),x(h,_e,u),M(k))}function D(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.wP(x(h,_e,b),x(h,_e,u),M(k))}function z(h,k,b,u,o){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.ub(x(h,_e,b),x(h,_e,u),M(k),a(o))}function W(h,k,b,u){return!(b==null&&u!=null||u==null&&b!=null)&&U.ac.Nb(x(h,_e,b),x(h,_e,u),M(k))}function Y(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.OS(x(h,_e,b),x(h,_e,u),M(k))}function K(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.touches(x(h,_e,b),x(h,_e,u),M(k))}function ee(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.mY(x(h,_e,b),x(h,_e,u),M(k))}function ne(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.OP(x(h,_e,b),x(h,_e,u),M(k))}function oe(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.yU(x(h,_e,b),x(h,_e,u),M(k))}function ue(h,k,b,u,o){if(b==null||u==null)throw Error("Illegal Argument Exception");return U.ac.tB(x(h,_e,b),x(h,_e,u),M(k),o)}function ye(h,k,b){if(b==null)throw Error("Illegal Argument Exception");return U.ac.ZS(x(h,_e,b),M(k))}function Se(h,k,b){if(b==null)throw Error("Illegal Argument Exception");return b=U.ac.$B(x(h,_e,b),M(k)),m(h,_e,b,k)}function Ce(h,k,b,u){if(u===void 0&&(u=!1),b==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){var o=u,s=[];for(u=0;u<b.length;u++)s.push(x(h,_e,b[u]));for(b=U.ac.eP(s,o),o=Array(b.length),u=0;u<b.length;u++)o[u]=m(h,_e,b[u],k);return o}return u=U.ac.dP(x(h,_e,b),M(k)),m(h,_e,u,k)}function Ne(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var o=[],s=0;s<b.length;s++)o.push(x(h,_e,b[s]));for(b=U.ac.LP(o,x(h,_e,u),M(k)),u=Array(b.length),s=0;s<b.length;s++)u[s]=m(h,_e,b[s],k);return u}return s=U.ac.km(x(h,_e,b),x(h,_e,u),M(k)),m(h,_e,s,k)}function Le(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var o=[],s=0;s<b.length;s++)o.push(x(h,_e,b[s]));for(b=U.ac.RX(o,x(h,_e,u),M(k)),u=Array(b.length),s=0;s<b.length;s++)u[s]=m(h,_e,b[s],k);return u}return s=U.ac.gp(x(h,_e,b),x(h,_e,u),M(k)),m(h,_e,s,k)}function He(h,k,b,u){if(b==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(b)){for(var o=[],s=0;s<b.length;s++)o.push(x(h,_e,b[s]));for(b=U.ac.MS(o,x(h,_e,u),M(k)),u=Array(b.length),s=0;s<b.length;s++)u[s]=m(h,_e,b[s],k);return u}return s=U.ac.Fa(x(h,_e,b),x(h,_e,u),M(k)),m(h,_e,s,k)}function Pe(h,k,b,u){if(b==null)return null;var o=[];if(Array.isArray(b)){if(b.length===0)return null;for(u=0;u<b.length;u++)o.push(x(h,_e,b[u]))}else o.push(x(h,_e,b)),u!=null&&o.push(x(h,_e,u));return m(h,_e,U.ac.fY(o,M(k)),k)}function yt(h,k,b,u,o,s,n,l){var c=0;if(s!=null)switch(s){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(b)){if(b==null)h=null;else if(b.length===0)h=[];else{var d=[];for(s=0;s<b.length;s++)d.push(x(h,_e,b[s]));for(b=U.ac.wU(d,M(k),u,c,n,l,a(o)),u=Array(b.length),s=0;s<b.length;s++)u[s]=m(h,_e,b[s],k);h=u}return h}return b=U.ac.offset(x(h,_e,b),M(k),u,c,n,l,a(o)),m(h,_e,b,k)}function yi(h,k,b,u,o,s){if(s===void 0&&(s=!1),Array.isArray(b)){if(!Array.isArray(u)){for(var n=[],l=0;l<b.length;l++)n.push(u);u=n}if(u.length!=b.length){if(u.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(l=0;l<b.length;l++)u[l]===void 0?n.push(c):(n.push(u[l]),c=u[l]);u=n}return ut(h,k,b,u,o,!1,s,"geodesic",NaN)}return b=U.ac.buffer(x(h,_e,b),M(k),u,a(o),!1,0,NaN),m(h,_e,b,k)}function Nt(h,k,b,u,o,s,n,l){if(Array.isArray(b)){if(!Array.isArray(u)){for(var c=[],d=0;d<b.length;d++)c.push(u);u=c}if(u.length!==b.length){if(u.length===0)throw Error("Illegal Argument Exception");c=[];var f=0;for(d=0;d<b.length;d++)u[d]===void 0?c.push(f):(c.push(u[d]),f=u[d]);u=c}return ut(h,k,b,u,o,!0,s,n,l)}return n===void 0&&(n=NaN),b=U.ac.buffer(x(h,_e,b),M(k),u,a(o),!0,y(s),n),m(h,_e,b,k)}function ut(h,k,b,u,o,s,n,l,c){if(c===void 0&&(c=NaN),b==null)return null;if(b.length===0)return[];for(var d=[],f=0;f<b.length;f++)d.push(x(h,_e,b[f]));for(b=U.ac.HN(d,M(k),u,a(o),s,n,y(l),c),u=Array(b.length),f=0;f<b.length;f++)u[f]=m(h,_e,b[f],k);return u}function ar(h,k,b,u,o){var s;return o===void 0&&(o=!0),b=U.ac.iz(x(h,_e,b),x(h,_e,u),o),(s={}).coordinate=_(h,_e,b.az(),k),s.distance=b.cz(),s.isRightSide=b.Nz(),s.vertexIndex=b.Va(),s.isEmpty=b.B(),s}function Nc(h,k,b,u){var o;return b=U.ac.jz(x(h,_e,b),x(h,_e,u)),(o={}).coordinate=_(h,_e,b.az(),k),o.distance=b.cz(),o.isRightSide=b.Nz(),o.vertexIndex=b.Va(),o.isEmpty=b.B(),o}function Zo(h,k,b,u,o,s){var n;for(b=U.ac.kz(x(h,_e,b),x(h,_e,u),o,s),u=[],o=0;o<b.length;o++)b[o].B()===!1&&u.push(((n={}).coordinate=_(h,_e,b[o].az(),k),n.distance=b[o].cz(),n.isRightSide=b[o].Nz(),n.vertexIndex=b[o].Va(),n.isEmpty=b[o].B(),n));return u}function Vd(h,k,b,u,o,s){return b=U.ac.LQ(x(h,_e,b),M(k),u,o,a(s)),m(h,_e,b,k)}function ry(h,k,b,u,o){return b=U.ac.Sr(x(h,_e,b),M(k),u,a(o)),m(h,_e,b,k)}function gb(h,k,b,u,o,s){return s===void 0&&(s=0),b=U.ac.Ry(x(h,_e,b),M(k),u,a(o),s),m(h,_e,b,k)}function vb(h,k,b,u){if(b==null)throw Error("Illegal Argument Exception");return U.ac.EU(x(h,_e,b),M(k),p(u))}function bb(h,k,b,u){if(b==null)throw Error("Illegal Argument Exception");return U.ac.FU(x(h,_e,b),M(k),a(u))}function sy(h,k,b,u,o){if(b==null)throw Error("Illegal Argument Exception");return U.ac.RQ(x(h,_e,b),M(k),p(u),y(o))}function wb(h,k,b,u,o){if(b==null)throw Error("Illegal Argument Exception");return U.ac.UQ(x(h,_e,b),M(k),a(u),y(o))}function _b(h){U.IL.bind(h)}function Sb(h,k,b,u,o){var s=null,n=null;if(u){if(!o)throw U.i.O("AOI missing Spatial Reference");s=x(h,_e,u),n=M(o).hh()}return(h=U.iu.SR(M(k).hh(),M(b).hh(),s,n))!==null?h:null}function xb(h,k,b,u,o){var s=null,n=null;if(u){if(!o)throw U.i.O("AOI missing Spatial Reference");s=x(h,_e,u),n=M(o).hh()}return U.iu.TR(M(k).hh(),M(b).hh(),s,n)}function $b(h,k,b,u,o,s){if(o===void 0&&(o=null),s===void 0&&(s=null),s){var n=new U.tC;n.Xu=s.densificationStep,n.Lr=s.centralMeridianOfOutputGCS,s.clipWithInputHorizon&&n.KW(s.clipWithInputHorizon),s.clipWithOutputHorizon&&n.LW(s.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(k.length===0)return[];if(o){if(!(s=o.getCachedGeTransformation(b,u)))e:{if(s=o,o=null,s){var l=s.getGTListEntry();if(l!==null){o=new U.rC(null);for(var c=0,d=l.steps;c<d.length;c++){l=d[c];var f=new U.Cx(l.geogtran);l.isInverse&&f.Lz(),o.add(f)}n=U.xr.Pr(M(b).hh(),M(u).hh(),o,n),s.assignCachedGe(b,u,n),s=n;break e}}if(o===null&&s&&s.steps&&0<s.steps.length){for(o=new U.rC(null),c=0,d=s.steps;c<d.length;c++)(l=d[c]).wkid!=-1&&l.wkid!=null?o.add(U.Cx.create(l.wkid,l.isInverse)):o.add(U.Cx.pP(l.wkt,l.isInverse));n=U.xr.Pr(M(b).hh(),M(u).hh(),o,n),s.assignCachedGe(b,u,n),s=n}else s=U.xr.Pr(M(b).hh(),M(u).hh(),o,n)}for(b=[],o=0;o<k.length;o++)n=k[o],b.push(ny(h,n,u,s))}else for(s=U.xr.Pr(M(b).hh(),M(u).hh(),null),b=[],o=0;o<k.length;o++)n=k[o],b.push(ny(h,n,u,s));return b}function ny(h,k,b,u){return k=U.ac.Bh(x(h,_e,k),u),m(h,_e,k,b)}function Tb(h,k){h!=null&&(h=h.wkid||h.wkt,tl.has(h),tl.set(h,k),Xo.has(h)&&Xo.delete(h))}function Ib(h){h!=null&&(h=h.wkid||h.wkt,tl.has(h)&&(tl.delete(h),Xo.has(h)&&Xo.delete(h)))}function Mb(h,k,b,u){if(b==null||u==null)return[];var o=[],s=0;for(b=U.ac.LS(x(h,_e,b),x(h,_e,u),M(k))||[];s<b.length;s++)o.push(m(h,_e,b[s],k));return o}var Pi,U,mr,oy,xt=this&&this.__extends||function(){function h(k,b){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var s in o)o.hasOwnProperty(s)&&(u[s]=o[s])})(k,b)}return function(k,b){function u(){this.constructor=k}h(k,b),k.prototype=b===null?Object.create(b):(u.prototype=b.prototype,new u)}}();(function(h){var k;(k=h.sn||(h.sn={}))[k.Unknown=0]="Unknown",k[k.Point=33]="Point",k[k.Line=322]="Line",k[k.Envelope=197]="Envelope",k[k.MultiPoint=550]="MultiPoint",k[k.Polyline=1607]="Polyline",k[k.Polygon=1736]="Polygon",function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"}(h.TK||(h.TK={}));var b=function(){function u(){this.description=null,this.QA=0}return u.prototype.K=function(){return 0},u.prototype.Eb=function(){return-1},u.prototype.Pf=function(o){this.wc(),o!=this.description&&this.un(o)},u.prototype.un=function(){},u.prototype.Ll=function(o){this.wc(),o!=this.description&&(o=h.fe.xR(this.description,o))!=this.description&&this.un(o)},u.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},u.prototype.se=function(o){this.wc(),this.description.hasAttribute(o)||(o=h.fe.wR(this.description,o),this.un(o))},u.prototype.Vg=function(){return null},u.prototype.dn=function(){},u.prototype.A=function(){},u.prototype.So=function(){},u.prototype.yc=function(o){this.A(o)},u.prototype.B=function(){return!0},u.prototype.Pa=function(){},u.prototype.Pc=function(){},u.prototype.Ja=function(){return null},u.prototype.copyTo=function(){},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.dG=function(){return this.hasAttribute(1)},u.uf=function(o){return 1+((192&o)>>6)>>1},u.Tn=function(o){return(32&o)!=0},u.PS=function(o){return(128&o)!=0},u.zd=function(o){return(256&o)!=0},u.zj=function(o){return(512&o)!=0},u.Ic=function(o){return(1024&o)!=0},u.prototype.Qf=function(){var o=this.Ja();return this.copyTo(o),o},u.prototype.ng=function(){return null},u.kg=function(o){var s=o.Ja();return o.copyTo(s),s},u.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},u.zx=function(o){var s=o.K();if(u.zj(s))return o.I();if(o.B())return 0;if(s==197)return 4;if(s==33)return 1;if(u.zd(s))return 2;throw h.i.ga("missing type")},u}();h.ba=b})(U||(U={})),mr=U||(U={}),oy=function(){function h(){this.y=this.x=0}return h.construct=function(k,b){var u=new h;return u.x=k,u.y=b,u},h.cl=function(k){var b=new h;return b.x=k.x,b.y=k.y,b},h.prototype.na=function(k,b){this.x=k,this.y=b},h.prototype.N=function(k){this.x=k.x,this.y=k.y},h.prototype.hq=function(k,b){return this.x===k&&this.y===b},h.prototype.Mz=function(k){return 2220446049250313e-31>=Math.abs(this.x-k.x)&&2220446049250313e-31>=Math.abs(this.y-k.y)},h.prototype.rb=function(k){return this.x===k.x&&this.y===k.y},h.prototype.Nb=function(k){return k==this||k instanceof h&&this.x==k.x&&this.y==k.y},h.prototype.sub=function(k){this.x-=k.x,this.y-=k.y},h.prototype.vc=function(k,b){this.x=k.x-b.x,this.y=k.y-b.y},h.prototype.add=function(k,b){b!==void 0?(this.x=k.x+b.x,this.y=k.y+b.y):(this.x+=k.x,this.y+=k.y)},h.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},h.prototype.nt=function(k){this.x=-k.x,this.y=-k.y},h.prototype.IS=function(k,b,u){this.x=k.x*(1-u)+b.x*u,this.y=k.y*(1-u)+b.y*u},h.prototype.Dt=function(k,b){this.x=this.x*k+b.x,this.y=this.y*k+b.y},h.prototype.BW=function(k,b,u){this.x=b.x*k+u.x,this.y=b.y*k+u.y},h.prototype.scale=function(k){this.x*=k,this.y*=k},h.prototype.compare=function(k){return this.y<k.y?-1:this.y>k.y?1:this.x<k.x?-1:this.x>k.x?1:0},h.prototype.normalize=function(){var k=this.length();k==0&&(this.x=1,this.y=0),this.x/=k,this.y/=k},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Uk=function(){return this.x*this.x+this.y*this.y},h.ub=function(k,b){return Math.sqrt(this.zc(k,b))},h.Jy=function(k,b,u,o){return k-=u,b-=o,Math.sqrt(k*k+b*b)},h.prototype.Sh=function(k){return this.x*k.x+this.y*k.y},h.prototype.aD=function(k){return Math.abs(this.x*k.x)+Math.abs(this.y*k.y)},h.prototype.yi=function(k){return this.x*k.y-this.y*k.x},h.prototype.Ct=function(k,b){var u=-this.x*b+this.y*k;this.x=this.x*k+this.y*b,this.y=u},h.prototype.Jv=function(){var k=this.x;this.x=-this.y,this.y=k},h.prototype.HG=function(k){this.x=-k.y,this.y=k.x},h.prototype.cr=function(){var k=this.x;this.x=this.y,this.y=-k},h.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.pu=function(k,b){var u=k.su(),o=b.su();return o==u?0>(k=k.yi(b))?1:0<k?-1:0:u<o?-1:1},h.zc=function(k,b){var u=k.x-b.x;return u*u+(k=k.y-b.y)*k},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Sc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(k,b){var u=h.ub(k,b),o=h.construct(this.x,this.y);if(u==0)return h.ub(o,k);var s=new h;return s.N(b),s.sub(k),o.sub(k),o.yi(s)/u},h.Wq=function(k,b,u){var o=new mr.Xb;o.set(b.x),o.sub(k.x);var s=new mr.Xb;s.set(u.y),s.sub(k.y);var n=new mr.Xb;n.set(b.y),n.sub(k.y);var l=new mr.Xb;return l.set(u.x),l.sub(k.x),o.Bg(s),n.Bg(l),o.sub(n),o.rs()?(o=new mr.jp(b.x),s=new mr.jp(k.x),n=new mr.jp(k.y),o=o.kt(s),k=(k=new mr.jp(u.y)).kt(n),b=(b=new mr.jp(b.y)).kt(n),u=(u=new mr.jp(u.x)).kt(s),o=o.nr(k),b=b.nr(u),(o=o.nr(b)).iT()?-1:o.aS()?1:0):0>(u=o.value())?-1:0<u?1:0},h.prototype.dc=function(){return mr.P.wj(mr.P.wj())},h}(),mr.h=oy,function(h){var k=function(){function b(u){this.Ay=this.Ot=0,this.KX=u}return b.prototype.reset=function(){this.Ay=this.Ot=0},b.prototype.add=function(u){u-=this.Ay;var o=this.Ot+u;this.Ay=o-this.Ot-u,this.Ot=o},b.prototype.sub=function(u){this.add(-u)},b.prototype.tm=function(){return this.KX+this.Ot},b}();h.Ex=k,h.mc=function(){function b(){}return b.En=function(u,o){return 0<=o?Math.abs(u):-Math.abs(u)},b.sign=function(u){return 0>u?-1:0<u?1:0},b.MK=function(u){return u-360*Math.floor(u/360)},b.round=function(u){return Math.floor(u+.5)},b.ox=function(u){return u*u},b.jq=function(u,o,s){return .5>=s?u+(o-u)*s:o-(o-u)*(1-s)},b.JG=function(u,o,s,n){.5>=s?(n.x=u.x+(o.x-u.x)*s,n.y=u.y+(o.y-u.y)*s):(n.x=o.x-(o.x-u.x)*(1-s),n.y=o.y-(o.y-u.y)*(1-s))},b.gT=function(u,o,s,n,l,c){.5>=l?(c.x=u+(s-u)*l,c.y=o+(n-o)*l):(c.x=s-(s-u)*(1-l),c.y=n-(n-o)*(1-l))},b}()}(U||(U={})),function(h){var k=function(b){function u(){var o=b.call(this)||this;return o.ta=0,o.oa=0,o.qa=0,o.ma=0,o.la=null,o}return xt(u,b),u.prototype.bc=function(){return h.h.construct(this.ta,this.oa)},u.prototype.$p=function(o){o.x=this.ta,o.y=this.oa},u.prototype.Ec=function(o){this.gm(0,o)},u.prototype.UB=function(o,s){this.gm(0,h.h.construct(o,s))},u.prototype.Vo=function(o){this.cD(0,o)},u.prototype.setStart=function(o){this.pD(0,o)},u.prototype.yv=function(o,s){return this.Pd(0,o,s)},u.prototype.TB=function(o,s,n){this.vn(0,o,s,n)},u.prototype.xc=function(){return h.h.construct(this.qa,this.ma)},u.prototype.Vr=function(o){o.x=this.qa,o.y=this.ma},u.prototype.Rc=function(o){this.gm(1,o)},u.prototype.Sl=function(o,s){this.gm(1,h.h.construct(o,s))},u.prototype.Ro=function(o){this.cD(1,o)},u.prototype.setEnd=function(o){this.pD(1,o)},u.prototype.jv=function(o,s){return this.Pd(1,o,s)},u.prototype.JB=function(o,s,n){this.vn(1,o,s,n)},u.prototype.Eb=function(){return 1},u.prototype.B=function(){return this.Bc()},u.prototype.Pa=function(){},u.prototype.He=function(){return 0},u.prototype.Fa=function(o,s,n,l,c){return this.FM(o,s,n,l,c)},u.prototype.isIntersecting=function(o,s){return this.Br(o,s,!1)!=0},u.prototype.ss=function(o,s){return this.tu(o,s,!1)},u.prototype.tu=function(){return null},u.prototype.Bc=function(){return!1},u.prototype.$x=function(o){if(this.wc(),this.la==null&&0<o)this.la=h.P.mg(2*o);else if(this.la!=null&&this.la.length<2*o){for(var s=this.la.slice(0),n=this.la.length;n<2*o;n++)s[n]=0;this.la=s}},u.bM=function(o,s,n){if(0<n)var l=0;for(var c=0;c<n;c++)s[0+l]=o[0],l++},u.prototype.gm=function(o,s){o!=0?(this.qa=s.x,this.ma=s.y):(this.ta=s.x,this.oa=s.y)},u.prototype.un=function(o){if(this.la!=null){for(var s=h.fe.Kw(o,this.description),n=[],l=u.Ig(this.description,0),c=u.Ig(this.description,1),d=u.Ig(o,0),f=u.Ig(o,1),g=0,w=1,$=o.Ba;w<$;w++){var T=o.ld(w),E=h.sa.Wa(T);if(s[w]==-1){var O=h.sa.te(T);for(T=0;T<E;T++)n[d+g]=O,n[f+g]=O,g++}else for(O=this.description.bk(s[w])-2,T=0;T<E;T++)n[d+g]=this.la[l+O],n[f+g]=this.la[c+O],g++,O++}this.la=n}this.description=o},u.prototype.cD=function(o,s){if(this.Bc())throw h.i.ga("empty geometry");s.Pf(this.description),s.Bc()&&s.wn();for(var n=0;n<this.description.Ba;n++)for(var l=this.description.Fd(n),c=0,d=h.sa.Wa(l);c<d;c++){var f=this.Pd(o,l,c);s.setAttribute(l,c,f)}},u.prototype.pD=function(o,s){if(this.wc(),s.Bc())throw h.i.ga("empty geometry");for(var n=s.description,l=0,c=n.Ba;l<c;l++)for(var d=n.Fd(l),f=h.sa.Wa(d),g=0;g<f;g++){var w=s.Vc(d,g);this.vn(o,d,g,w)}},u.prototype.Pd=function(o,s,n){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.");if(s==0)return o!=0?n!=0?this.ma:this.qa:n!=0?this.oa:this.ta;if(n>=h.sa.Wa(s))throw h.i.de();var l=this.description.Rf(s);return 0<=l?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.bk(l)-2+n]):h.sa.te(s)},u.prototype.vn=function(o,s,n,l){if(this.wc(),n>=h.sa.Wa(s))throw h.i.de();var c=this.description.Rf(s);0>c&&(this.se(s),c=this.description.Rf(s)),s==0?o!=0?n!=0?this.ma=l:this.qa=l:n!=0?this.oa=l:this.ta=l:(this.la==null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.bk(c)-2+n]=l)},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();o.description=this.description,o.$x(this.description.Be.length-2),u.bM(this.la,o.la,2*(this.description.Be.length-2)),o.ta=this.ta,o.oa=this.oa,o.qa=this.qa,o.ma=this.ma,o.wc(),this.qp(o)},u.prototype.Vg=function(o,s){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(n.pa=this.Pd(0,o,s),n.wa=n.pa,n.Nk(this.Pd(1,o,s)),n)},u.prototype.UI=function(o){this.Bc()?o.Pa():(o.pa=this.Pd(0,0,0),o.wa=o.pa,o.Nk(this.Pd(1,0,0)))},u.prototype.Vw=function(o,s){s.Pf(this.description),s.Db(this.ic(o));for(var n=1,l=this.description.Ba;n<l;n++)for(var c=this.description.Fd(n),d=h.sa.Wa(c),f=0;f<d;f++){var g=this.Vc(o,c,f);s.setAttribute(c,f,g)}},u.prototype.AM=function(o){if(this.description!=o.description||this.ta!=o.ta||this.qa!=o.qa||this.oa!=o.oa||this.ma!=o.ma)return!1;for(var s=0;s<2*(this.description.Be.length-2);s++)if(this.la[s]!=o.la[s])return!1;return!0},u.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},u.prototype.reverse=function(){var o=this.ta;this.ta=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=1;for(var s=this.description.Ba;o<s;o++)for(var n=this.description.ld(o),l=0,c=h.sa.Wa(n);l<c;l++){var d=this.Pd(0,n,l),f=this.Pd(1,n,l);this.vn(0,n,l,f),this.vn(1,n,l,d)}},u.prototype.Br=function(o,s,n){var l=o.K();if(this.K()===322){if(l==322)return h.zb.JM(this,o,s,n);throw h.i.Ra()}throw h.i.Ra()},u.prototype.FM=function(o,s,n,l,c){var d=o.K();if(this.K()===322){if(d==322)return h.zb.Yx(this,o,s,n,l,c);throw h.i.Ra()}throw h.i.Ra()},u.prototype.Sx=function(){return null},u.Ig=function(o,s){return s*(o.Be.length-2)},u.prototype.ic=function(o,s){if(s===void 0)return s=new h.h,this.ic(o,s),s;h.mc.gT(this.ta,this.oa,this.qa,this.ma,o,s)},u.prototype.ge=function(){return null},u.prototype.$F=function(){return null},u.prototype.fq=function(){return null},u.prototype.Di=function(){return null},u.prototype.Rn=function(){return null},u.prototype.lg=function(){return null},u.prototype.Tx=function(o,s){return s!==void 0?this.ux(s)-this.ux(o):this.ux(o)},u.prototype.qp=function(){},u.prototype.fl=function(){return null},u.prototype.dh=function(){},u.prototype.Vc=function(){return null},u.prototype.Me=function(){return null},u.prototype.ux=function(){return null},u.prototype.IG=function(){return null},u.prototype.ub=function(o,s){if(!s&&this.Br(o,0,!1)!=0)return 0;s=17976931348623157e292;var n=this.bc(),l=o.ge(n,!1);return n.sub(o.ic(l)),(n=n.length())<s&&(s=n),n=this.xc(),l=o.ge(n,!1),n.sub(o.ic(l)),(n=n.length())<s&&(s=n),n=o.bc(),l=this.ge(n,!1),n.sub(this.ic(l)),(n=n.length())<s&&(s=n),n=o.xc(),l=this.ge(n,!1),n.sub(this.ic(l)),(n=n.length())<s&&(s=n),s},u.prototype.ng=function(){return h.si.im(this,null)},u}(h.ba);h.NC=k}(U||(U={})),new U.h,function(h){var k;(k=h.VK||(h.VK={}))[k.Unknown=-1]="Unknown",k[k.Not=0]="Not",k[k.Weak=1]="Weak",k[k.Strong=2]="Strong",function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"}(h.HK||(h.HK={}));var b=function(u){function o(){var s=u.call(this)||this;return s.Jm=65535,s.xa=0,s.Rg=-1,s.Cb=null,s}return xt(o,u),o.prototype.qp=function(){},o.prototype.Zx=function(){},o.prototype.ey=function(){},o.prototype.I=function(){return this.xa},o.prototype.B=function(){return this.Bc()},o.prototype.Bc=function(){return this.xa==0},o.prototype.ck=function(s){return(this.Jm&s)!=0},o.prototype.Nf=function(s,n){this.Jm=n?this.Jm|s:this.Jm&~s},o.prototype.oc=function(){this.ck(32)&&this.XM()},o.prototype.vx=function(){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.")},o.prototype.we=function(s,n){if(0>s||s>=this.xa)throw h.i.ga("index out of bounds");this.oc(),n.Pf(this.description),n.B()&&n.wn();for(var l=0;l<this.description.Ba;l++)for(var c=this.description.Fd(l),d=0,f=h.sa.Wa(c);d<f;d++){var g=this.Aa[l].gg(f*s+d);n.setAttribute(c,d,g)}},o.prototype.It=function(s,n){this.oc();for(var l=n.description,c=0;c<l.Ba;c++)for(var d=l.Fd(c),f=h.sa.Wa(d),g=0;g<f;g++){var w=n.Vc(d,g);this.setAttribute(d,s,g,w)}},o.prototype.D=function(s,n){if(0>s||s>=this.I())throw h.i.de();this.oc(),this.Aa[0].uc(2*s,n)},o.prototype.Oa=function(s){var n=new h.h;return this.D(s,n),n},o.prototype.Hc=function(s,n){this.Aa[0].uc(2*s,n)},o.prototype.Db=function(s,n,l){if(0>s||s>=this.xa)throw h.i.de();this.oc();var c=this.Aa[0];l!==void 0?(c.write(2*s,n),c.write(2*s+1,l)):c.Vt(2*s,n),this.Qc(1993)},o.prototype.xz=function(){if(void 0>=this.I())throw h.i.de();this.oc();var s=this.Aa[0],n=new h.Od;return n.x=s.read(NaN),n.y=s.read(NaN),n.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):h.sa.te(1),n},o.prototype.ZB=function(s){if(0>s||s>=this.I())throw h.i.de();this.se(1),this.oc(),this.Qc(1993);var n=this.Aa[0];n.write(2*s,(void 0).x),n.write(2*s+1,(void 0).y),this.Aa[1].rr(s,(void 0).z)},o.prototype.Vc=function(s,n,l){if(0>n||n>=this.xa)throw h.i.de();var c=h.sa.Wa(s);if(l>=c)throw h.i.de();this.oc();var d=this.description.Rf(s);return 0<=d?this.Aa[d].gg(n*c+l):h.sa.te(s)},o.prototype.tF=function(s,n){return this.Vc(s,n,void 0)},o.prototype.setAttribute=function(s,n,l,c){if(0>n||n>=this.xa)throw h.i.de();var d=h.sa.Wa(s);if(l>=d)throw h.i.de();this.se(s),this.oc(),s=this.description.Rf(s),this.Qc(1993),this.Aa[s].rr(n*d+l,c)},o.prototype.vb=function(s){return this.vx(),this.se(s),this.oc(),this.Aa[this.description.Rf(s)]},o.prototype.kn=function(s,n){if(n!=null&&h.sa.Vp(s)!=n.Vp())throw h.i.O();this.se(s),s=this.description.Rf(s),this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Aa[s]=n,this.Qc(16777215)},o.prototype.un=function(s){var n=null;if(this.Aa!=null){var l=h.fe.Kw(s,this.description);n=[];for(var c=0,d=s.Ba;c<d;c++)l[c]!=-1&&(n[c]=this.Aa[l[c]])}this.description=s,this.Aa=n,this.Rg=-1,this.Qc(16777215)},o.prototype.vD=function(s){this.yu(!0),s instanceof h.l?this.aa.A(s):this.aa.So(s)},o.prototype.WM=function(s){this.yu(!1),s instanceof h.l?this.aa.A(s):this.aa.So(s)},o.prototype.dn=function(s){this.yu(!0),this.aa.copyTo(s)},o.prototype.A=function(s){this.vD(s)},o.prototype.So=function(s){this.vD(s)},o.prototype.yc=function(s){this.WM(s)},o.prototype.Vg=function(s,n){var l=new h.Oc;return this.Bc()?(l.Pa(),l):(this.yu(!0),this.aa.Vg(s,n))},o.prototype.dc=function(){var s=this.description.dc();if(!this.Bc())for(var n=this.I(),l=0,c=this.description.Ba;l<c;l++)s=this.Aa[l].Cn(s,0,n*h.sa.Wa(this.description.Fd(l)));return s},o.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof o&&this.description.Nb(s.description))||this.Bc()!=s.Bc())return!1;if(this.Bc())return!0;var n=this.I();if(n!=s.I())return!1;for(var l=0;l<this.description.Ba;l++){var c=this.description.ld(l),d=this.vb(c),f=s.vb(c);if(!d.Nb(f,0,n*h.sa.Wa(c)))return!1}return!0},o.prototype.copyTo=function(s){if(s.K()!=this.K())throw h.i.O();this.ZC(s)},o.prototype.ZC=function(s){this.oc(),s.description=this.description,s.Aa=null;var n=this.description.Ba,l=null;if(this.Aa!=null){l=[];for(var c=0;c<n;c++)this.Aa[c]!=null&&(l[c]=this.Aa[c].BB(this.I()*h.sa.Wa(this.description.Fd(c))))}this.aa!=null?(s.aa=this.aa.Ja(),this.aa.copyTo(s.aa)):s.aa=null,s.xa=this.xa,s.Jm=this.Jm,s.Aa=l;try{this.qp(s)}catch{throw s.Pa(),h.i.hu()}},o.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},o.prototype.Qc=function(s){s==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=s,this.gM(),this.wc()},o.prototype.yu=function(s){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new h.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(s);for(var n=1;n<this.description.Ba;n++)for(var l=this.description.Fd(n),c=h.sa.Wa(l),d=this.Aa[n],f=0;f<c;f++){var g=new h.Oc;g.Pa();for(var w=0;w<this.xa;w++){var $=d.gg(w*c+f);g.$b($)}this.aa.setInterval(l,f,g)}s&&this.Nf(192,!1)}},o.prototype.dy=function(){this.aa.Pa();for(var s=this.Aa[0],n=new h.h,l=0;l<this.xa;l++)s.uc(2*l,n),this.aa.$b(n)},o.prototype.Ap=function(s){s.Pa();for(var n=this.Aa[0],l=new h.h,c=0;c<this.xa;c++)n.uc(2*c,l),s.$b(l)},o.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var s=0;s<this.description.Ba;s++){var n=this.description.Fd(s);if(this.Aa[s]!=null){var l=h.sa.Wa(n),c=h.P.truncate(this.Aa[s].size/l);c<this.xa&&(c=h.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[s].resize(c*l,h.sa.te(n))),c<this.Rg&&(this.Rg=c)}else this.Aa[s]=h.Zc.TE(n,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},o.prototype.fm=function(s){if(0>s)throw h.i.O();s!=this.xa&&(this.xa=s,this.Qc(65535))},o.prototype.qm=function(s){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=s)return this.ck(8)?1:2}return-1},o.prototype.Eh=function(s,n){if(this.LT=n,s==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),s==0)this.Nf(2,!1),this.Nf(4,!1);else if(s==1)this.Nf(2,!0),this.Nf(4,!1);else{if(s!=2)throw h.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},o.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},o.prototype.fD=function(s,n,l,c){if(0>s||s>=this.xa||0>n||n>=this.xa)throw h.i.ga("index out of bounds");this.oc(),c.Pf(this.description),c.B()&&c.wn();for(var d=0;d<this.description.Ba;d++)for(var f=this.description.Fd(d),g=0,w=h.sa.Wa(f);g<w;g++){var $=this.Aa[d].gg(w*s+g),T=this.Aa[d].gg(w*n+g);c.setAttribute(f,g,h.mc.jq($,T,l))}},o.prototype.Ar=function(s,n){var l=this.Aa[0].o,c=l[2*s]-l[2*n];return s=l[2*s+1]-l[2*n+1],Math.sqrt(c*c+s*s)},o.prototype.FR=function(s){if(0>s||s>=this.xa)throw h.i.de();this.oc();var n=new h.Ta;n.Pf(this.description),n.B()&&n.wn();for(var l=0;l<this.description.Ba;l++)for(var c=this.description.ld(l),d=0,f=h.sa.Wa(c);d<f;d++){var g=this.Aa[l].gg(f*s+d);n.setAttribute(c,d,g)}return n},o.prototype.Fh=function(s,n){if(0>s||s>=this.xa)throw h.i.de();if(n.B())throw h.i.O();this.oc();for(var l=n.description,c=0;c<l.Ba;c++)for(var d=l.ld(c),f=h.sa.Wa(d),g=0;g<f;g++){var w=n.Vc(d,g);this.setAttribute(d,s,g,w)}},o.prototype.nu=function(){return null},o.prototype.hj=function(){return null},o}(h.ba);h.Fx=b}(U||(U={})),function(h){var k=function(){function b(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new h.ad(7),this.ao=null}return b.prototype.Xo=function(u){this.ao=u},b.prototype.MP=function(){this.Tv=!1},b.prototype.Ee=function(u){this.ob.Ee(u)},b.prototype.Rr=function(u){var o=this.ob.De();return this.nX(o),this.qX(u,o),o},b.prototype.HP=function(u){this.ob.kd(u)},b.prototype.addElement=function(u,o){return o==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),o=this.Ne),this.AD(u,0,o)},b.prototype.ED=function(u){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(u,1,this.Ne)},b.prototype.zn=function(u){this.Ne==-1&&(this.Ne=this.Rr(-1));var o=this.Ne,s=this.ob.o;if(o==-1||s[7*o]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(s=this.ob.o)[7*o]=u,this.xp(-1,u,o,s),u;var n=o==-1?-1:s[7*o+2];return u=this.ob.Nl([-1,-1,n,u,this.il(),-1,-1]),(s=this.ob.o)[7*n+1]=u,this.ky(u,s),s[7*u+2]===-1&&(s[7*o]=u),this.xp(-1,u,o,s),u},b.prototype.Bu=function(u,o,s,n){var l=-1;l==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),l=this.Ne);var c=this.ob.o;if(l==-1||c[7*l]==-1)return s=this.ob.Nl([-1,-1,-1,s,this.il(),-1,-1]),(c=this.ob.o)[7*l]=s,this.xp(-1,s,l,c),s;if(n){n=o!=-1?this.ao.compare(this,s,o):-1;var d=u!=-1?this.ao.compare(this,s,u):1}else n=-1,d=1;if(n==0||d==0)return c[7*l+3]=n==0?o:u,-1;for((o!=-1&&u!=-1?this.Vm>h.P.XA(this.Vm)>>1:o!=-1)?u=o:n=d,o=!0;;){if(0>n){if((d=c[7*u])==-1){n=u,s=this.ob.Nl([-1,-1,u,s,this.il(),-1,-1]),(c=this.ob.o)[7*u]=s;break}u=d}else{if((d=c[7*u+1])==-1){n=c[7*u+6],s=this.ob.Nl([-1,-1,u,s,this.il(),-1,-1]),(c=this.ob.o)[7*u+1]=s;break}u=d}o&&(n*=-1,o=!1)}return this.ky(s,c),c[7*s+2]===-1&&(c[7*l]=s),this.xp(n,s,l,c),s},b.prototype.AF=function(){return this.dR(this.Ne)},b.prototype.wd=function(u,o){o=o==-1?this.Ne:o,this.Tv?this.GP(u,o):this.eY(u,o)},b.prototype.search=function(u,o){for(o=this.uv(o);o!=-1;){var s=this.ao.compare(this,u,o);if(s==0)return o;o=0>s?this.nl(o):this.Zp(o)}return-1},b.prototype.DW=function(u){for(var o=this.uv(-1),s=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?o=this.nl(o):(s=o,o=this.Zp(o))}return s},b.prototype.pJ=function(u){for(var o=this.uv(-1),s=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?(s=o,o=this.nl(o)):o=this.Zp(o)}return s},b.prototype.ka=function(u){return this.ob.U(u,3)},b.prototype.nl=function(u){return this.ob.U(u,0)},b.prototype.Zp=function(u){return this.ob.U(u,1)},b.prototype.getParent=function(u){return this.ob.U(u,2)},b.prototype.lb=function(u){return this.ob.U(u,6)},b.prototype.xe=function(u){return this.ob.U(u,5)},b.prototype.sc=function(u){return u==-1?this.ml(this.Ne):this.ml(u)},b.prototype.Gc=function(u){return u==-1?this.bs(this.Ne):this.bs(u)},b.prototype.UR=function(u){return u==-1?this.XF(this.Ne):this.XF(u)},b.prototype.Uj=function(u,o){this.IB(u,o)},b.prototype.uv=function(u){return u==-1?this.TF(this.Ne):this.TF(u)},b.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},b.prototype.size=function(u){return u==-1?this.VF(this.Ne):this.VF(u)},b.prototype.FN=function(u,o){for(var s=o[7*u],n=o[7*u+1],l=o[7*u+4];s!=-1||n!=-1;){var c=s!=-1?o[7*s+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,l<=Math.min(c,n))break;c<=n?this.nJ(s,o):this.mJ(u,o),s=o[7*u],n=o[7*u+1]}},b.prototype.ky=function(u,o){if(this.Tv)for(var s=o[7*u+4],n=o[7*u+2];n!=-1&&o[7*n+4]>s;)o[7*n]==u?this.nJ(u,o):this.mJ(n,o),n=o[7*u+2]},b.prototype.mJ=function(u,o){var s=o[7*u+1];o[7*s+2]=o[7*u+2],o[7*u+2]=s;var n=o[7*s];o[7*u+1]=n,n!=-1&&(o[7*n+2]=u),o[7*s]=u,(n=o[7*s+2])!=-1&&(o[7*n]==u?o[7*n]=s:o[7*n+1]=s)},b.prototype.nJ=function(u,o){var s=o[7*u+2];o[7*u+2]=o[7*s+2],o[7*s+2]=u;var n=o[7*u+1];o[7*s]=n,n!=-1&&(o[7*n+2]=s),o[7*u+1]=s,(n=o[7*u+2])!=-1&&(o[7*n]===s?o[7*n]=u:o[7*n+1]=u)},b.prototype.Rk=function(u,o){this.ob.T(u,2,o)},b.prototype.OB=function(u,o){this.ob.T(u,0,o)},b.prototype.SB=function(u,o){this.ob.T(u,1,o)},b.prototype.RB=function(u,o){this.ob.T(u,5,o)},b.prototype.fx=function(u,o){this.ob.T(u,6,o)},b.prototype.SJ=function(u,o){this.ob.T(o,0,u)},b.prototype.nX=function(u){this.ob.T(u,4,0)},b.prototype.qX=function(u,o){this.ob.T(o,5,u)},b.prototype.TF=function(u){return u==-1?-1:this.ob.U(u,0)},b.prototype.ml=function(u){return u==-1?-1:this.ob.U(u,1)},b.prototype.bs=function(u){return u==-1?-1:this.ob.U(u,2)},b.prototype.dR=function(u){return u==-1?-1:this.ob.U(u,3)},b.prototype.VF=function(u){return u==-1?0:this.ob.U(u,4)},b.prototype.XF=function(u){return this.ob.U(u,5)},b.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},b.prototype.hl=function(u){u!=-1&&this.ob.kd(u)},b.prototype.il=function(){return this.Vm=h.P.XA(this.Vm),1073741823&this.Vm},b.prototype.AD=function(u,o,s){var n=this.ob.o;if(s==-1||n[7*s]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(n=this.ob.o)[7*s]=u,this.xp(-1,u,s,n),u;for(var l=s==-1?-1:n[7*s];;){var c=o==-1?1:this.ao.compare(this,u,l);if(0>c){if((c=this.nl(l))==-1){o=l,u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(n=this.ob.o)[7*l]=u;break}l=c}else{if(o==1&&c==0)return n[7*s+3]=l,-1;if((c=n[7*l+1])==-1){o=n[7*l+6],u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(n=this.ob.o)[7*l+1]=u;break}l=c}}return this.ky(u,n),n[7*u+2]===-1&&(n[7*s]=u),this.xp(o,u,s,n),u},b.prototype.xp=function(u,o,s,n){if(u!=-1){var l=n[7*u+5];n[7*u+5]=o}else l=s==-1?-1:n[7*s+2];n[7*o+5]=l,l!=-1&&(n[7*l+6]=o),n[7*o+6]=u,u==(s==-1?-1:n[7*s+1])&&(n[7*s+1]=o),u==-1&&(n[7*s+2]=o),n[7*s+4]=(s==-1?0:n[7*s+4])+1},b.prototype.vB=function(u,o){var s=this.ob.o,n=s[7*u+5];u=s[7*u+6],n!=-1?s[7*n+6]=u:s[7*o+1]=u,u!=-1?s[7*u+5]=n:s[7*o+2]=n,s[7*o+4]=o===-1?-1:s[7*o+4]-1},b.prototype.eY=function(u,o){this.vB(u,o);var s=this.nl(u),n=this.Zp(u),l=this.getParent(u),c=u;if(s!=-1&&n!=-1){this.Vm=h.P.XA(this.Vm);var d=1073741823<this.Vm?this.lb(u):this.xe(u),f=this.getParent(d)==u;this.ob.bC(u,d,0),this.ob.bC(u,d,1),this.ob.bC(u,d,2),l!=-1?this.nl(l)==u?this.OB(l,d):this.SB(l,d):this.SJ(d,o),f?(s==d?(this.OB(d,u),this.Rk(n,d)):n==d&&(this.SB(d,u),this.Rk(s,d)),this.Rk(u,d),l=d):(this.Rk(s,d),this.Rk(n,d),l=this.getParent(u),c=d),s=this.nl(u),n=this.Zp(u),s!=-1&&this.Rk(s,u),n!=-1&&this.Rk(n,u)}s=s!=-1?s:n,l==-1?this.SJ(s,o):this.nl(l)==c?this.OB(l,s):this.SB(l,s),s!=-1&&this.Rk(s,l),this.hl(u)},b.prototype.GP=function(u,o){var s=this.ob.o;s[7*u+4]=2147483647;var n=-1,l=-1,c=o===-1?-1:s[7*o],d=c==u;if(d&&(n=s[7*c],l=s[7*c+1],n==-1&&l==-1))return this.vB(c,o),this.hl(c),void(s[7*o]=-1);this.FN(u,s),(c=s[7*u+2])!=-1&&(s[7*c]==u?s[7*c]=-1:s[7*c+1]=-1),this.vB(u,o),this.hl(u),d&&(s[7*o]=n==-1||s[7*n+2]!=-1?l:n)},b.prototype.IB=function(u,o){this.ob.T(u,3,o)},b}();h.$j=k}(U||(U={})),function(h){var k=function(){function b(u,o){u!==void 0&&this.L(u,o)}return b.prototype.L=function(u,o){this.pa=u,this.wa=o,this.normalize()},b.prototype.isIntersecting=function(u){return this.pa<=u.pa?this.wa>=u.pa:u.wa>=this.pa},b.prototype.move=function(u){this.B()||(this.pa+=u,this.wa+=u)},b.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var u=this.pa;this.pa=this.wa,this.wa=u}isNaN(this.wa)&&this.Pa()}},b.prototype.Pa=function(){this.wa=this.pa=NaN},b.prototype.B=function(){return isNaN(this.pa)},b.prototype.$b=function(u){typeof u=="number"?this.B()?this.wa=this.pa=u:this.Nk(u):u.B()||(this.B()?(this.pa=u.pa,this.wa=u.wa):(this.pa>u.pa&&(this.pa=u.pa),this.wa<u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa()))},b.prototype.Nk=function(u){u<this.pa?this.pa=u:u>this.wa&&(this.wa=u)},b.prototype.contains=function(u){return typeof u=="number"?u>=this.pa&&u<=this.wa:u.pa>=this.pa&&u.wa<=this.wa},b.prototype.Fa=function(u){this.B()||u.B()?this.Pa():(this.pa<u.pa&&(this.pa=u.pa),this.wa>u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa())},b.prototype.X=function(u){this.B()||(this.pa-=u,this.wa+=u,this.wa<this.pa&&this.Pa())},b.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},b.prototype.FB=function(u,o){u>o?(this.pa=o,this.wa=u):(this.pa=u,this.wa=o)},b.prototype.Kt=function(u){return h.P.Tk(u,this.pa,this.wa)},b.prototype.S=function(){return this.wa-this.pa},b.prototype.tf=function(){return .5*(this.pa+this.wa)},b.prototype.Nb=function(u){return u==this||u instanceof b&&(!(!this.B()||!u.B())||this.pa==u.pa&&this.wa==u.wa)},b.prototype.dc=function(){return h.P.wj(h.P.wj())},b}();h.Oc=k}(U||(U={})),function(h){var k=new h.Oc,b=new h.Oc,u=function(){this.oe=null,this.pb=-1,this.tb=new h.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new h.Oc,this.Wf.FB(0,0)};h.EY=u;var o=function(){function s(n,l,c){this.g=n,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=l,this.Pq=10*l,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=c,this.OA=new u,this.TH=new u,h.P.truncate(3*n.gd/2)}return s.prototype.hG=function(n,l,c,d){n.oe=d===null?null:d[c[5*l]],n.Vv=n.oe!=null,n.Vv||((d=c[5*l+2])!==-1&&this.g.hW(c[5*l],c[5*d],n.tb),n.oe=n.tb,n.Wf.FB(n.tb.ta,n.tb.qa),n.Wf.wa+=this.ra,n.tb.mI(),n.Xv=n.tb.ma==n.tb.oa,n.Xv||(n.lA=(n.tb.qa-n.tb.ta)/(n.tb.ma-n.tb.oa)))},s.prototype.JO=function(n,l){var c=n.Br(l,this.ra,!0);return c!=0?c==2?this.Ly():this.zi():(n.$p(hn),n.Vr(no),l.$p(cn),l.Vr(oo),mi.na(this.Mq,this.Jk),hn.rb(cn)&&this.Jk==hn.y?0>no.compare(oo)?mi.N(no):mi.N(oo):hn.rb(oo)&&this.Jk==hn.y?0>no.compare(cn)?mi.N(no):mi.N(cn):cn.rb(no)&&this.Jk==cn.y?0>hn.compare(oo)?mi.N(hn):mi.N(oo):no.rb(oo)&&this.Jk==no.y&&(0>hn.compare(cn)?mi.N(hn):mi.N(cn)),n.Me(mi.y,mi.x)<l.Me(mi.y,mi.x)?-1:1)},s.prototype.HO=function(n,l){if(n.tb.oa==l.tb.oa&&n.tb.ta==l.tb.ta)return n.tb.ma==l.tb.ma&&n.tb.qa==l.tb.qa?this.bA?this.Ly():0:this.KE(n,l);if(n.tb.ma==l.tb.ma&&n.tb.qa==l.tb.qa)return this.JE(n,l);var c=this.JE(n,l);return n=this.KE(n,l),0>c&&0>n?-1:0<c&&0<n?1:this.zi()},s.prototype.DO=function(n,l){if(n.qa>l.qa){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&n.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(n.qa-n.ta)<this.Pq&&l.xi(n.qa,n.ma,this.ra))return this.zi();return 1},s.prototype.EO=function(n,l){if(n.ta<l.ta){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&n.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(n.ta-n.qa)<this.Pq&&l.xi(n.ta,n.oa,this.ra))return this.zi();return-1},s.prototype.FO=function(n,l){var c=new h.h;c.vc(l.xc(),l.bc()),c.cr(),c.normalize();var d=new h.h;d.vc(n.bc(),l.bc());var f=new h.h;f.vc(n.xc(),l.bc()),d=d.Sh(c),c=f.Sh(c),f=Math.abs(d);var g=Math.abs(c);if(f<g){if(f<this.Pq&&l.xi(n.ta,n.oa,this.ra))return this.zi()}else if(g<this.Pq&&l.xi(n.qa,n.ma,this.ra))return this.zi();return 0>d&&0>c?-1:0<d&&0<c?1:this.zi()},s.prototype.IE=function(n,l){return n.oa==l.oa&&n.ta==l.ta?this.DO(n,l):n.ma==l.ma&&n.qa==l.qa?this.EO(n,l):this.FO(n,l)},s.prototype.GO=function(n,l){return n.ma==l.ma&&n.qa==l.qa&&n.oa==l.oa&&n.ta==l.ta?this.bA?this.Ly():0:this.zi()},s.prototype.JE=function(n,l){var c=1;if(n.tb.oa<l.tb.oa){c=-1;var d=n;n=l,l=d}n=n.tb,d=l.tb;var f=n.ta-d.ta;l=l.lA*(n.oa-d.oa);var g=this.Pq;return f<l-g?-c:f>l+g?c:d.xi(n.ta,n.oa,this.ra)?this.zi():f<l?-c:c},s.prototype.KE=function(n,l){var c=1;if(l.tb.ma<n.tb.ma){c=-1;var d=n;n=l,l=d}n=n.tb,d=l.tb;var f=n.qa-d.ta;l=l.lA*(n.ma-d.oa);var g=this.Pq;return f<l-g?-c:f>l+g?c:d.xi(n.qa,n.ma,this.ra)?this.zi():f<l?-c:c},s.prototype.Ly=function(){return this.sg=!0,this.Pi=new h.Nd(5,this.No,this.ht),-1},s.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new h.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},s.prototype.IO=function(n,l,c,d){if(this.sg)return-1;var f=this.JH==this.Jk&&this.IH==this.Mq;if(f&&n==this.Ys)var g=this.KH;else g=NaN,this.Ys=-1;return f&&l==this.Zs?f=this.LH:(f=NaN,this.Zs=-1),c.oe.UI(k),d.oe.UI(b),k.wa<b.pa?-1:b.wa<k.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(g)&&(this.Ys=n,this.KH=g=n=c.oe.Me(this.Jk,this.Mq)),isNaN(f)&&(this.Zs=l,this.LH=f=n=d.oe.Me(this.Jk,this.Mq)),Math.abs(g-f)<=this.ra?this.JO(c.oe,d.oe):g<f?-1:g>f?1:0)},s.prototype.Mr=function(){this.sg=!1},s.prototype.tm=function(){return this.Pi},s.prototype.VJ=function(n,l){this.Jk=n,this.Mq=l,this.ht=this.No=this.Zs=this.Ys=-1},s.prototype.compare=function(n,l,c){return this.sg?-1:(n=n.ka(c),this.Fm=c,this.ME(l,l,n,n))},s.prototype.ME=function(n,l,c,d){if(this.No==l)var f=this.OA;else this.No=l,f=this.OA,this.OA.pb=n,this.hG(f,l,this.g.ud.o,this.g.Te);if(g==null){this.ht=d;var g=this.TH;this.TH.pb=c,this.hG(g,d,this.g.ud.o,this.g.Te)}return f.Vv||g.Vv?this.IO(l,d,f,g):f.Wf.wa<g.Wf.pa?-1:g.Wf.wa<f.Wf.pa?1:(n=f.Xv?1:0,(n|=g.Xv?2:0)==0?this.HO(f,g):n==1?this.IE(f.tb,g.tb):n==2?-1*this.IE(g.tb,f.tb):this.GO(f.tb,g.tb))},s}();h.PC=o}(U||(U={})),function(h){var k=function(){function b(u,o){this.g=u,this.ra=o,this.sg=!1,this.No=-1,this.Wf=new h.Oc,this.Iq=new h.h,this.Iq.Sc(),this.je=new h.zb,this.Fm=-1,this.wA=17976931348623157e292}return b.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},b.prototype.Fh=function(u){this.Iq.N(u)},b.prototype.compare=function(u,o){return this.NE(o,u.ka(o))},b.prototype.NE=function(u,o){var s=this.g.cc(o)!=null;if(s||(this.g.fd(o,this.je),this.Wf.FB(this.je.ta,this.je.qa)),s)throw h.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=u,this.sg=!0,0;this.je.mI(),s=this.je.bc(),(o=new h.h).vc(this.je.xc(),s),o.cr();var n=new h.h;return n.vc(this.Iq,s),s=o.Sh(n),(s/=o.length())<10*-this.ra?-1:s>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((o=Math.abs(s))<this.wA&&(this.Fm=u,this.wA=o),this.sg=!0,o<.25*this.ra)?0:0>s?-1:1},b}();h.WL=k}(U||(U={})),function(h){function k(u,o,s,n){s=new Float64Array(u.subarray(s,n)),u.set(s,o)}var b=function(){function u(o){this.Pb=this.rk=!1,this.o=null;var s=o;2>s&&(s=2),this.o=new Float64Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.ga("invalid_call");if(s<o||s>n||o>n)throw h.i.O();o!=s&&n!=s&&(this.pi(o,s-o,1),this.pi(s,n-s,1),this.pi(o,n-o,1))},u.rf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Dn=function(o){var s=new u(0);return s.o=new Float64Array(o.o),s.size=o.size,s},u.Nr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Float64Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Vt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,s){this.write(o,s)},u.prototype.Cn=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.P.wj(this.read(s));return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var d=this.size;if(this.resize(d+n),l)this.o.set(o.o.subarray(s,s+n),d);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[d+f+g]=o.o[s+l+g]}}},u.prototype.On=function(o,s,n,l,c,d,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>d||l%d!=0))throw h.i.O();var g=this.size-f;if(g<l&&this.resize(this.size+l-g),k(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=d)for(c-=d,g=0;g<d;g++)this.o[o+f+g]=s.o[n+c+g]},u.prototype.Dz=function(o,s,n,l,c,d){if(this.Pb)throw h.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(d-o)),c)for(c=0;c<l;c++)d=s[n++],this.o[o++]=d.x,this.o[o++]=d.y;else{c=0;for(var f=l-1;c<l;++c)d=s[n+f],this.o[o++]=d.x,this.o[o++]=d.y,f--}},u.prototype.Nn=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.xj=function(o,s,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Wt=function(o,s,n,l,c,d){if(0>o||0>s||0>l||!c&&(0>=d||s%d!=0)||n.size<l+s)throw h.i.O();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Cr(o,s,l,c,d);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-d,d==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.P.truncate(s/d);c<s;c++){for(var f=0;f<d;f++)this.o[o+f]=n.o[l+f];o+=d,l-=d}},u.prototype.Gn=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&k(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.pi=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var d=0;d<n;d++){var f=this.o[o+c+d];this.o[o+c+d]=this.o[o+s+d],this.o[o+s+d]=f}}},u.prototype.Yj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.O();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Cr=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.P.truncate(s/2);l<s;l++){for(var d=0;d<c;d++){var f=this.o[n+d];this.o[n+d]=this.o[o+d],this.o[o+d]=f}n+=c,o-=c}},u.prototype.qC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.O();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.pC=function(o,s,n){if(0>o||0>s)throw h.i.O();if(s!=0){this.size<(s<<1)+o&&this.resize((s<<1)+o),s+=0;for(var l=0;l<s;l++)this.o[o]=n[l][0],this.o[o+1]=n[l][1],o+=2}},u.prototype.Xw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.O();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.pB=function(o,s,n){if(0>o||0>s||this.size<(s>>1)+o)throw h.i.O();if(s!=0){s=0+s;for(var l=0;l<s;l++)n[l][0]=this.o[o],n[l][1]=this.o[o+1],o+=2}},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,s,n){Array.prototype.sort.call(this.o.subarray(o,s),n)},u.prototype.Vp=function(){return 1},u}();h.ce=b}(U||(U={})),function(h){function k(u,o,s,n){s=new Int32Array(u.subarray(s,n)),u.set(s,o)}h.nY=function(){this.random=1973};var b=function(){function u(o){this.Pb=this.rk=!1,this.o=null;var s=o;2>s&&(s=2),this.o=new Int32Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.ga("invalid_call");if(s<o||s>n||o>n)throw h.i.O();o!=s&&n!=s&&(this.pi(o,s-o,1),this.pi(s,n-s,1),this.pi(o,n-o,1))},u.rf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Dn=function(o){var s=new u(0);return s.o=new Int32Array(o.o),s.size=o.size,s},u.Nr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Int32Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Vt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,s){this.write(o,s)},u.prototype.Cn=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.P.Vh(this.read(s),o);return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var d=this.size;if(this.resize(d+n),l)this.o.set(o.o.subarray(s,s+n),d);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[d+f+g]=o.o[s+l+g]}}},u.prototype.On=function(o,s,n,l,c,d,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>d||l%d!=0))throw h.i.O();if(k(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=d){c-=d;for(var g=0;g<d;g++)this.o[o+f+g]=s.o[n+c+g]}},u.prototype.Dz=function(o,s,n,l,c,d){if(this.Pb)throw h.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(d-o)),c)for(c=0;c<l;c++)d=s[n++],this.o[o++]=d.x,this.o[o++]=d.y;else{c=0;for(var f=l-1;c<l;++c)d=s[n+f],this.o[o++]=d.x,this.o[o++]=d.y,f--}},u.prototype.Nn=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.xj=function(o,s,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Wt=function(o,s,n,l,c,d){if(0>o||0>s||0>l||!c&&(0>=d||s%d!=0)||n.size<l+s)throw h.i.O();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Cr(o,s,l,c,d);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-d,d==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.P.truncate(s/d);c<s;c++){for(var f=0;f<d;f++)this.o[o+f]=n.o[l+f];o+=d,l-=d}},u.prototype.Gn=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&k(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.pi=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var d=0;d<n;d++){var f=this.o[o+c+d];this.o[o+c+d]=this.o[o+s+d],this.o[o+s+d]=f}}},u.prototype.Yj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.O();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Cr=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.P.truncate(s/2);l<s;l++){for(var d=0;d<c;d++){var f=this.o[n+d];this.o[n+d]=this.o[o+d],this.o[o+d]=f}n+=c,o-=c}},u.prototype.qC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.O();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.Xw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.O();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,s,n){10>s-o?u.mG(this.o,o,s,n):u.lB(this.o,o,s-1,n)},u.prototype.Vp=function(){return 2},u.prototype.Gc=function(){return this.o[this.size-1]},u.prototype.Jf=function(){this.resize(this.size-1)},u.prototype.XW=function(o){this.o[this.size-1]=o},u.prototype.NV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.gF=function(o){for(var s=0,n=this.size;s<n;s++)if(this.o[s]==o)return s;return-1},u.prototype.cG=function(o){return 0<=this.gF(o)},u.mG=function(o,s,n,l){for(var c=s;c<n;c++){for(var d=o[c],f=c-1;f>=s&&0<l(o[f],d);)o[f+1]=o[f],f--;o[f+1]=d}},u.sx=function(o,s,n){var l=o[n];o[n]=o[s],o[s]=l},u.lB=function(o,s,n,l){if(!(s>=n))for(;;){if(9>n-s){u.mG(o,s,n+1,l);break}var c=o[s];u.sx(o,s,n);for(var d=s,f=s;f<n;f++)0>=l(o[f],c)&&(u.sx(o,d,f),d+=1);u.sx(o,d,n),d-s<n-d?(u.lB(o,s,d-1,l),s=d+1):(u.lB(o,d+1,n,l),n=d-1)}},u}();h.ja=b}(U||(U={})),function(h){function k(u,o,s,n){s=new Int8Array(u.subarray(s,n)),u.set(s,o)}var b=function(){function u(o){this.o=null;var s=o;2>s&&(s=2),this.o=new Int8Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.ga("invalid_call");if(s<o||s>n||o>n)throw h.i.O();o!=s&&n!=s&&(this.pi(o,s-o,1),this.pi(s,n-s,1),this.pi(o,n-o,1))},u.rf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Dn=function(o){var s=new u(0);return s.o=new Int8Array(o.o),s.size=o.size,s},u.Nr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Int8Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Vt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,s){this.write(o,s)},u.prototype.Cn=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.P.Vh(this.read(s),o);return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var d=this.size;if(this.resize(d+n),l)this.o.set(o.o.subarray(s,s+n),d);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var g=0;g<c;g++)this.o[d+f+g]=o.o[s+l+g]}}},u.prototype.On=function(o,s,n,l,c,d,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>d||l%d!=0))throw h.i.O();if(k(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=d){c-=d;for(var g=0;g<d;g++)this.o[o+f+g]=s.o[n+c+g]}},u.prototype.Nn=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.Dz=function(o,s,n,l,c,d){if(this.Pb)throw h.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(d-o)),c)for(c=0;c<l;c++)d=s[n++],this.o[o++]=d.x,this.o[o++]=d.y;else{c=0;for(var f=l-1;c<l;++c)d=s[n+f],this.o[o++]=d.x,this.o[o++]=d.y,f--}},u.prototype.xj=function(o,s,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Wt=function(o,s,n,l,c,d){if(0>o||0>s||0>l||!c&&(0>=d||s%d!=0)||n.size<l+s)throw h.i.O();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Cr(o,s,l,c,d);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-d,d==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.P.truncate(s/d);c<s;c++){for(var f=0;f<d;f++)this.o[o+f]=n.o[l+f];o+=d,l-=d}},u.prototype.Gn=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&k(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.pi=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var d=0;d<n;d++){var f=this.o[o+c+d];this.o[o+c+d]=this.o[o+s+d],this.o[o+s+d]=f}}},u.prototype.Yj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.O();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Cr=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.P.truncate(s/2);l<s;l++){for(var d=0;d<c;d++){var f=this.o[n+d];this.o[n+d]=this.o[o+d],this.o[o+d]=f}n+=c,o-=c}},u.prototype.qC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.O();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.Xw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.O();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,s,n){s=this.o.subarray(o,s),Array.prototype.sort.call(s,n),this.o.set(s,o)},u.prototype.uJ=function(o,s){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]|=s},u.prototype.FE=function(o,s){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]&=~s},u.prototype.Vp=function(){return 1},u}();h.rn=b}(U||(U={})),function(h){h.Zc=function(){function k(){}return k.Or=function(b,u){return h.rn.rf(b,u)},k.Fn=function(b,u){return h.ce.rf(b,u)},k.kP=function(b,u,o){switch(b){case 1:b=h.ce.rf(u,o);break;case 2:b=h.ja.rf(u,o);break;case 4:b=h.rn.rf(u,o);break;default:throw h.i.Ra()}return b},k.TE=function(b,u){return k.kP(h.sa.Vp(b),u*h.sa.Wa(b),h.sa.te(b))},k.Qh=function(b,u){return h.ja.rf(b,u)},k.lI=function(b){var u,o=[];for(u=0;u<b;u++)o.push(null);return o},k}()}(U||(U={})),function(h){h.ha=function(k){k===void 0&&(k=0),this.u=k}}(U||(U={})),function(h){h.IL=function(){function k(){}return k.bind=function(b){h.Tc=b.PeDefs,h.qf=b.PeFactory,h.IC=b.PeVertcs,h.gj=b.PeCSTransformations,h.HC=b.PeGTTransformations,h.GL=b.PeGeogtran,h.FL=b.PeFactoryCodechange,h.GC=b.PeGCSExtent,h.Eg=b.PePCSInfo,h.HL=b.PeHorizon,h.EL=b.PeCoordsys,h.np=b.PeGTlistExtended,h.np.PE_GTLIST_OPTS_USE_DEFAULT=128,h.qf.initialize(null),h.Lx=b.PeGTlistExtendedEntry,h.qf.fromString(h.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},k}(),h.qf=null,h.IC=null,h.EL=null,h.HL=null,h.Eg=null,h.np=null,h.Lx=null,h.GC=null,h.FL=null,h.GL=null,h.Tc=null,h.HC=null,h.gj=null}(U||(U={})),function(h){var k=function(){function b(){}return b.Mb=function(u,o){return 0<=o?b.R(u):-b.R(u)},b.R=function(u){return 0>u?-u:u},b.vi=function(u){return 3552713678800501e-30>u},b.FC=function(u,o,s){return b.R(u-o)<=s*(1+(b.R(u)+b.R(o))/2)},b.$=function(u,o){return b.FC(u,o,3552713678800501e-30)},b.AL=function(u){return 3552713678800501e-30>=b.R(u)},b.Dd=function(u){return b.AL(u)},b}();h.s=k,h.F=function(){function b(){}return b.ip=function(u,o){var s=0;return(u=k.R(u))+(o=k.R(o))!=0&&(u>o?(s=o/u,s=u*Math.sqrt(1+s*s)):(s=u/o,s=o*Math.sqrt(1+s*s))),s},b.Yq=function(u,o,s,n,l){for(var c=[0,0,0],d=[0,0,0],f=0;2>=f;f++)o[f]-=u[f],s[f]-=o[f];s=c[1]*d[2]-c[2]*d[1],o=c[2]*d[0]-c[0]*d[2],c=c[0]*d[1]-c[1]*d[0],u=-1*(s*u[0]+o*u[1]+c*u[2]),n[0]=s,n[1]=o,n[2]=c,n[3]=u,d=b.qn(n),n[0]/=d,n[1]/=d,n[2]/=d,n[3]/=d,l!=0&&(d=k.Dd(c)?k.Dd(u)?k.Mb(1,o):-k.Mb(1,u):k.Mb(1,c),d*=k.Mb(1,l),n[0]*=d,n[1]*=d,n[2]*=d,n[3]*=d)},b.yx=function(u,o,s){s[0]=u[1]*o[2]-o[1]*u[2],s[1]=u[2]*o[0]-o[2]*u[0],s[2]=u[0]*o[1]-o[0]*u[1]},b.Ut=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},b.qn=function(u){return b.ip(b.ip(u[0],u[1]),u[2])},b.el=function(u,o,s,n,l,c,d,f){u=b.n(u,o,s);var g=Math.cos(s);c.u=(u+l)*g*Math.cos(n),d.u=(u+l)*g*Math.sin(n),f.u=(u*(1-o)+l)*Math.sin(s)},b.eO=function(u,o,s,n,l,c,d){var f=b.ip(o,s),g=1*Math.sqrt(1-u),w=g/1;if(k.$(f,0))c.u=0,l.u=k.Mb(1.570796326794897,n),d.u=k.R(n)-g;else{c.u=Math.atan2(s,o),s=Math.atan2(1*n,g*f),c=Math.cos(s);var $=Math.sin(s);o=g*u/(1-u),u*=1,s=Math.atan2(n+o*$*$*$,f-u*c*c*c),3.141592653589793<k.R(s)&&(s=k.Mb(3.141592653589793,s)-s),s=Math.atan(w*Math.tan(s)),$=Math.sin(s),c=Math.cos(s),l.u=Math.atan2(n+o*$*$*$,f-u*c*c*c),1.570796326794897<k.R(l.u)&&(l.u=k.Mb(3.141592653589793,l.u)-l.u),s=Math.atan(w*Math.tan(l.u)),$=Math.sin(s),c=Math.cos(s),d.u=(n-g*$)*Math.sin(l.u)+(f-1*c)*Math.cos(l.u)}},b.n=function(u,o,s){return s=Math.sin(s),u/Math.sqrt(1-o*s*s)},b.pt=function(u,o){return Math.atan2(Math.sin(o)*(1-u),Math.cos(o))},b.Sj=function(u,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-u))},b.Tq=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var s=Math.sqrt(1-u),n=(1-s)/(1+s),l=n*n,c=n*l,d=n*c,f=n*d,g=n*f,w=n*g,$=1.572916666666667*c-3.2578125*f+4.295068359375*w;u=2.142578125*d-6.071484375*g,s=3.129296875*f-11.249837239583334*w;var T=4.775276692708333*g,E=7.958636765252976*w,O=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*f-.2688395182291667*w-$+s-E+O*(2*(1.3125*l-1.71875*d+1.650146484375*g)-4*u+6*T+O*(4*$-12*s+24*E+O*(8*u-32*T+O*(16*s-80*E+O*(32*T+64*O*E))))))}for(s=1-u,n=u/2,c=(l=k.R(o))*b.av(u)/(1.570796326794897*s),d=9999,g=l,l=0;1e-16<d&&50>l;l++)w=b.w(u,g),f=g-($=(f=(b.fG(g,u)-n*Math.sin(2*g)/w)/s-c)/(w=1/(w*w*w))),d=k.R($),g=f;return 0<=o?g:-g},b.lW=function(u,o){return k.vi(o)?u:u*b.av(o)/1.570796326794897},b.ca=function(u){return 0>(u=b.kF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>k.R(u)||k.$(k.R(u),3.141592653589793)?u:u-6.283185307179586},b.kF=function(u,o){return u-Math.floor(u/o)*o},b.Ch=function(u,o){if(.006884661117170036>o){var s=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=s*s;return u/(1+o)*(1+.25*s+.015625*n+.00390625*s*n)*1.570796326794897}return u*b.av(o)},b.Xq=function(u,o){var s=k.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=k.R(b.kF(o,3.141592653589793)))?o:3.141592653589793-o,(k.$(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-u)*Math.tan(o)))*s},b.q=function(u,o,s){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,l=o*n,c=o*l,d=o*c,f=o*d,g=o*f,w=-.7291666666666666*l+.2278645833333333*d+.03987630208333334*g,$=.615234375*c-.21533203125*f,T=-.54140625*d+.20302734375*g,E=.48876953125*f,O=-.4488699776785715*g,P=Math.cos(2*s);return u/(1+o)*((1+.25*n+.015625*c+.00390625*f)*s+Math.sin(2*s)*(-1.5*o+.1875*l+.0234375*d+.00732421875*g-w+T-O+P*(2*(.9375*n-.234375*c-.03662109375*f)-4*$+6*E+P*(4*w-12*T+24*O+P*(8*$-32*E+P*(16*T-80*O+P*(32*E+64*P*O)))))))}return u*(b.fG(s,o)-.5*o*Math.sin(2*s)/b.w(o,s))},b.w=function(u,o){return o=Math.sin(o),Math.sqrt(1-u*o*o)},b.av=function(u){return k.FC(u,1,2220446049250313e-31)?1:1>u?b.Zw(0,1-u)-u/3*b.Ww(0,1-u):NaN},b.fG=function(u,o){var s=k.Mb(1,u);u=k.R(u);var n=Math.floor(u/1.570796326794897);if(1<o)o=u==0?0:NaN;else if(k.Dd(n))o=(u=b.sin(u))*b.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*b.Ww(1-u*u,1-o*u*u);else{var l=h.P.truncate(n%2),c=b.av(o);0<l?o=c*(n+1)-(o=(u=Math.sin(1.570796326794897*(n+1)-u))*b.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*b.Ww(1-u*u,1-o*u*u)):o=c*n+(o=(u=Math.sin(u-1.570796326794897*n))*b.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*b.Ww(1-u*u,1-o*u*u))}return o*s},b.sin=function(u){u=b.ca(u);var o=k.Mb(1,u);return u=k.R(u),k.$(u,3.141592653589793)?0:k.$(u,1.570796326794897)?1*o:Math.sin(u)*o},b.Ww=function(u,o){var s,n,l,c,d=u,f=o,g=1;for(o=0,u=1;n=((s=.2*(d+f+3*g))-d)/s,l=(s-f)/s,c=(s-g)/s,!(1e-4>k.R(n)&&1e-4>k.R(l)&&1e-4>k.R(c));)c=Math.sqrt(f),o+=u/((s=Math.sqrt(g))*(g+(c=Math.sqrt(d)*(c+s)+c*s))),u*=.25,d=.25*(d+c),f=.25*(f+c),g=.25*(g+c);return f=(d=n*l)-(g=c*c),3*o+u*(1+(g=d-6*g)*(.10227272727272728*g-.2142857142857143-.1730769230769231*c*(n=g+f+f))+c*(.1666666666666667*n+c*(-.4090909090909091*f+.1153846153846154*c*d)))/(s*Math.sqrt(s))},b.Zw=function(u,o){for(var s,n,l,c,d=1;n=2-((s=(u+o+d)/3)+u)/s,l=2-(s+o)/s,c=2-(s+d)/s,!(1e-4>k.R(n)&&1e-4>k.R(l)&&1e-4>k.R(c));d=.25*(d+s))s=Math.sqrt(o),n=Math.sqrt(d),u=.25*(u+(s=Math.sqrt(u)*(s+n)+s*n)),o=.25*(o+s);return(1+(.04166666666666666*(u=n*l-c*c)-.1-.06818181818181818*(o=n*l*c))*u+.07142857142857142*o)/Math.sqrt(s)},b.Sw=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var s=u*u,n=u*s,l=u*n,c=u*l,d=u*c,f=u*d,g=-(.02708333333333333*n+.03430059523809524*l+.03149181547619048*c+.02634359154541446*d+.02156896735835538*f),w=.007669890873015873*l+.01299603174603175*c+.0148051353064374*d+.01454454953803912*f,$=-(.002275545634920635*c+.004830845032667949*d+.006558395368616723*f),T=.0006957236677288761*d+.001775193002406544*f,E=-.000217324089394402*f,O=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*u+.2083333333333333*s+.09375*n+.04878472222222222*l+.02916666666666667*c+.01938905423280423*d+.01388255931712963*f)-g+$-E+O*(2*(.1041666666666667*s+.0875*n+.06050347222222222*l+.04151785714285714*c+.02958958540013228*d+.02203667534722222*f)-4*w+6*T+O*(4*g-12*$+24*E+O*(8*w-32*T+O*(16*$-80*E+O*(32*T+64*O*E))))))}return o==0||k.$(k.R(o),1.570796326794897)?s=o:(l=(n=Math.sqrt(u))*Math.sin(o),s=Math.tan(.7853981633974483+o/2)*Math.pow((1-l)/(1+l),n/2),s=2*Math.atan(s)-1.570796326794897),s},b.tO=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var s=u*(T=u*($=u*(O=u*u))),n=u*(E=u*s),l=.05833333333333333*$+.07232142857142858*T+.05634300595238095*s+.0355325796406526*E+.020235546186067*n,c=.02653149801587302*T+.04379960317460317*s+.0429211791776896*E+.03255384637546096*n,d=.01294022817460318*s+.02668104344536636*E+.03155651254609588*n,f=.00659454790965208*E+.0163075268674227*n,g=.003463473736911237*n,w=Math.cos(2*o);return o+Math.sin(2*o)*(.5*u+.2083333333333333*O+.08333333333333333*$+.03611111111111111*T+.01875*s+.01195601851851852*E+.008863673941798942*n-l+d-g+w*(2*(.1458333333333333*O+.1208333333333333*$+.07039930555555556*T+.03616071428571429*s+.01839451058201058*E+.01017113095238095*n)-4*c+6*f+w*(4*l-12*d+24*g+w*(8*c-32*f+w*(16*d-80*g+w*(32*f+64*w*g))))))}var $=Math.sqrt(u),T=$/2,E=Math.tan(.7853981633974483+o/2);u=0,l=1;for(var O=o;l!=0;O=n)s=$*Math.sin(O),n=E*Math.pow((1+s)/(1-s),T),n=2*Math.atan(n)-1.570796326794897,u++,(k.$(n,O)||3e4<u)&&(l=0);return O},b}()}(U||(U={})),function(h){var k=function(){function b(u){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new h.h,this.SH=new h.h,this.FA=!1,this.xq=new h.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=u,this.Cs=h.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var o=u.getCode();0<o?(this.Mk=o,h.qf.getCode(u)):this.Mk=h.qf.getCode(u),0>this.Mk&&(this.Mk=0);var s=this.Re.getType();if(this.eH=s==h.Tc.PE_TYPE_PROJCS?2:1,s==h.Tc.PE_TYPE_PROJCS&&!u.loadConstants())throw h.i.O("PeProjcs.loadConstants failed");o=s==h.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),s!=h.Tc.PE_TYPE_GEOGCS&&h.qf.getCode(o),this.Go=u.getUnit(),this.MH=o.getPrimem().getLongitude(),this.rH=u=o.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.BA=u,s&h.Tc.PE_TYPE_PROJCS?(o=this.Re,this.CA=1/o.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=h.Eg.generate(o,h.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=h.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,s=1/o.getUnit().getUnitFactor(),this.uw=.001/o.getDatum().getSpheroid().getAxis()*s,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return b.prototype.cs=function(){return this.Mk},b.prototype.mk=function(){return this.vw},b.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.Mk==0&&o.Mk==0&&u.Cs===o.Cs},b.prototype.Xc=function(){return this.Bl},b.prototype.ih=function(u){u.L(this.uo)},b.prototype.rv=function(){return this.uo.v},b.prototype.qv=function(){return this.uo.C},b.prototype.BR=function(u){u.L(this.ww)},b.prototype.hY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){u=this.Re;var o=this.mk().getCentralMeridian(),s=u.getGeogcs();if(s==null)throw h.i.ga("internal error");o=[[o+(s=1/s.getUnit().getUnitFactor()*Math.PI),0]],h.gj.geogToProj(u,1,o),o=o[0][0],s=u.getParameters()[h.Tc.PE_PARM_X0].getValue();var n=this.ol();u=new h.l,n.A(u),o=(n=Math.abs(o-s))+s,s=-1*n+s,n=u.H,u=u.G;var l=new h.l;l.L(s,u,o,n),this.uo==null&&(this.uo=l)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");s=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-s,-s/2,s,s/2),this.uo==null&&(this.uo=u)}},b.prototype.iY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){var o=this.Re;if(u=this.mk().getCentralMeridian(),(o=o.getGeogcs())==null)throw h.i.ga("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var s=this.Xr(),n=new h.l;s.A(n),(s=new h.l).L(u-o,n.G,u+o,n.H),this.ww==null&&(this.ww=s)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");o=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-o,-o/2,o,o/2),this.ww==null&&(this.ww=u)}},b.prototype.bf=function(){return this.BA},b.prototype.rm=function(){return this.CA},b.prototype.Xr=function(){if(this.Bl)return this.wl;var u=this.wl;return u??(this.wx(),this.wl)},b.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},b.prototype.wx=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=this.Re,o=u.getGeogcs(),s=u.horizonGcsGenerate();if(s!=null){var n=s[0].getNump(),l=s[0].getKind();u=0<s[0].getInclusive();var c=this.bf(),d=90*c,f=360*c,g=370*c,w=180*c*h.Tc.PE_HORIZON_DELTA/Math.PI,$=new h.l,T=null;if(1<n){for(var E=1;E<n;E++)if(s[E].getKind()==h.Tc.PE_HORIZON_LINE){T==null&&(T=new h.Ua);var O=s[E].getCoord();T.rx(O[0][0],O[0][1]),T.Aj(O[1][0],O[1][1])}}if(l==h.Tc.PE_HORIZON_RECT)s=s[0].getCoord(),$.L(s[0][0],s[0][1]),$.$b(s[1][0],s[1][1]),Math.abs($.H-d)<1e-7*w&&($.H=d),Math.abs($.G+d)<1e-7*w&&($.G=-d),$.S()>g&&(s=-400*c,$.L(s,$.G,s+5*f,$.H)),s=new h.Hh($),this.wl==null&&(this.wl=s,this.Kv=u);else{if(g=new h.Ea,f=this.mk().isGcsHorizonMultiOverlap(),$=h.iu.XE(o,h.ju.Integer64),f){for(g=new h.bL,w=h.Ih.local().W(g,$,null),E=0;E<n;E++)if(s[E].getKind()==h.Tc.PE_HORIZON_POLY){for(o=s[E].getSize(),c=s[E].getCoord(),l=[],d=0;d<o;d++)l[d]=h.h.construct(c[d][0],c[d][1]);s[E].getInclusive(),f&&((c=new h.Ea).$k(l,o-1),g.VX(c),w.re())}g=w.next()}else for(E=0;E<n;E++)if(s[E].getKind()==h.Tc.PE_HORIZON_POLY){for(o=s[E].getSize(),c=s[E].getCoord(),f=[],d=0;d<o;d++)f[d]=h.h.construct(c[d][0],c[d][1]);s[E].getInclusive(),g.$k(f,o-1)}u?h.Zj.local().yn(g,$,1):h.mp.local().yn(g,$,1),h.fj.local().yn(g,$,1),this.wl==null&&(this.wl=g,this.Kv=u,this.TG=T)}}}},b.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},b.prototype.yK=function(){if(this.eH==2){var u=this.Re.horizonPcsGenerate();if(u!=null){var o=u[0].getKind();u[0].getInclusive();var s=u[0].getNump(),n=!1;if(o==h.Tc.PE_HORIZON_RECT)u=u[0].getCoord(),(s=new h.l).L(u[0][0],u[0][1]),s.$b(u[1][0],u[1][1]),u=new h.Hh(s);else{for(o=-1,n=0;n<s;n++)u[n].getKind()==h.Tc.PE_HORIZON_POLY&&(o=n);for(n=u[o].getSize()-1,u=u[o].getCoord(),s=[],o=0;o<n;o++)s[o]=h.h.construct(u[o][0],u[o][1]);u=o=new h.Ea,o.$k(s,n),n=!0}this.mk().isDensificationNeeded()&&(s=1e5*this.rm(),u=h.Zl.local().W(u,s,null)),n&&(n=new h.Hh,u.dn(n),u.He(),u.Rb(),u.kR(),h.Zj.local().yn(u,null,1)),this.Ws==null&&(this.Ws=u)}}},b.prototype.ol=function(){if(this.Bl)return this.Ws;var u=this.Ws;return u??(this.yK(),this.Ws)},b.prototype.jY=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],h.gj.geogToProj(this.Re,2,u);var o=this.mk(),s=o.getNorthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(s&&this.CH.na(u[0][0],u[0][1]),o&&this.SH.na(u[1][0],u[1][1]))}this.FA=!0},b.prototype.xK=function(){if(this.eH==1){var u=400*this.bf();this.xq.L(-u,-u,u,u)}else u=h.Eg.generate(this.Re,h.Eg.PE_PCSINFO_OPTION_DOMAIN),u=h.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.xq.B()&&this.xq.L(u)},b.prototype.cR=function(u){this.Bl&&u.L(this.xq),this.xq.B()&&this.xK(),u.L(this.xq)},b.prototype.Wp=function(){return this.MH},b.prototype.Bi=function(){return this.Xz},b.prototype.Id=function(){return this.Go},b.prototype.Zr=function(){return this.rH},b}();h.JC=k}(U||(U={})),function(h){var k=function(){function b(u){this.FT=u,this.Cs=h.Ab.zv(u,0,!0);var o=u.getCode();this.us=0<o?o:h.qf.getCode(u),0>this.us&&(this.us=0),this.Go=o=this.FT.getUnit(),this.DH=1/o.getUnitFactor(),h.qf.getCode(u)}return b.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.us==0&&o.us==0&&u.Cs===o.Cs},b.prototype.cs=function(){return this.us},b}();h.KL=k}(U||(U={})),function(h){h.$g=function(){function k(){}return k.ub=function(b,u,o,s,n,l,c,d){if(l!=null||c!=null||d!=null){s=h.F.ca(s),u=h.F.ca(u),o=h.F.ca(o),n=h.F.ca(n),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),1.570796326794897<h.s.R(n)&&(n=h.s.Mb(3.141592653589793,n)-n,s=h.F.ca(s+3.141592653589793));var f=h.F.ca(s-u);if(h.s.$(o,n)&&(h.s.$(u,s)||h.s.$(h.s.R(o),1.570796326794897)))l!=null&&(l.u=0),c!=null&&(c.u=0),d!=null&&(d.u=0);else{if(h.s.$(o,-n)){if(h.s.$(h.s.R(o),1.570796326794897))return l!=null&&(l.u=3.141592653589793*b),c!=null&&(c.u=0<o?h.F.ca(3.141592653589793-h.F.ca(s)):h.F.ca(s)),void(d!=null&&(d.u=0<o?h.F.ca(s):h.F.ca(3.141592653589793-h.F.ca(s))));if(h.s.$(h.s.R(f),3.141592653589793))return l!=null&&(l.u=3.141592653589793*b),c!=null&&(c.u=0),void(d!=null&&(d.u=0))}var g=h.s.R(o)==1.570796326794897?0:Math.cos(o),w=Math.sin(o),$=h.s.R(n)==1.570796326794897?0:Math.cos(n),T=Math.sin(n),E=h.s.R(f)==1.570796326794897?0:Math.cos(f),O=h.s.R(f)==3.141592653589793?0:Math.sin(f);if(l!=null){var P=Math.sin((n-o)/2);f=Math.sin(f/2),l.u=2*Math.asin(Math.sqrt(P*P+g*$*f*f))*b}c!=null&&(c.u=h.s.$(h.s.R(o),1.570796326794897)?0>o?s:h.F.ca(3.141592653589793-s):Math.atan2($*O,g*T-w*$*E)),d!=null&&(h.s.$(h.s.R(n),1.570796326794897)?d.u=0>n?u:h.F.ca(3.141592653589793-u):(d.u=Math.atan2(g*O,T*g*E-$*w),d.u=h.F.ca(d.u+3.141592653589793)))}}},k.sf=function(b,u,o,s,n,l,c){if(l!=null||c!=null){u=h.F.ca(u),o=h.F.ca(o),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),h.s.$(h.s.R(o),1.570796326794897)&&(u=0),n=h.F.ca(n);var d=h.s.$(h.s.R(n),1.570796326794897)?0:Math.cos(n),f=h.s.$(h.s.R(n),3.141592653589793)?0:Math.sin(n),g=h.s.$(h.s.R(o),1.570796326794897)?0:Math.cos(o),w=Math.sin(o);b=s/b,s=h.s.$(h.s.R(b),1.570796326794897)?0:Math.cos(b);var $=h.s.$(h.s.R(b),3.141592653589793)?0:Math.sin(b),T=Math.asin(w*s+g*$*d);c!=null&&(c.u=T),l!=null&&(l.u=h.s.$(h.s.R(T),1.570796326794897)?h.s.$(o,-T)?0>T?n:h.F.ca(3.141592653589793-n):u:h.s.$(h.s.R(o),1.570796326794897)&&h.s.$(b,3.141592653589793)?0>o?n:h.F.ca(3.141592653589793-n):h.F.ca(u+Math.atan2($*f,g*s-w*$*d)))}},k}()}(U||(U={})),function(h){h.Yk=function(){function k(){}return k.ub=function(b,u,o,s,n,l,c,d,f){var g=new h.ha(0),w=new h.ha(0),$=[0,0,0],T=[0,0,0],E=[0,0,0],O=new h.ha(0),P=new h.ha(0),R=new h.ha(0),F=new h.ha(0),V=new h.ha(0);if(c!=null||d!=null||f!=null)if(h.s.vi(u))h.$g.ub(b,o,s,n,l,c,d,f);else{n=h.F.ca(n),o=h.F.ca(o);var L=h.F.ca(n-o);if(h.s.$(s,l)&&(h.s.$(o,n)||h.s.$(h.s.R(s),1.570796326794897)))c!=null&&(c.u=0),d!=null&&(d.u=0),f!=null&&(f.u=0);else{if(h.s.$(s,-l)){if(h.s.$(h.s.R(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(b,u)),d!=null&&(d.u=0<s?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<s?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(L),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(b,u)),d!=null&&(d.u=0),f!=null&&(f.u=0))}else(h.s.$(h.s.R(s),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897))&&(h.s.$(h.s.R(s),1.570796326794897)?o=n:n=o);var G=0;if(0>L){G=1;var J=o;o=n,n=J,J=s,s=l,l=J}L=h.F.pt(u,s);var H=h.F.pt(u,l);d==null&&f==null||(h.$g.ub(b,o,L,n,H,null,g,w),g=Math.atan2(Math.sin(g.u)*Math.cos(s-L),Math.cos(g.u)),w=Math.atan2(Math.sin(w.u)*Math.cos(l-H),Math.cos(w.u)),G!=0&&(J=g,g=w,w=J),d!=null&&(d.u=g),f!=null&&(f.u=w)),c!=null&&(h.F.el(1,u,s,o,0,R,F,V),$[0]=R.u,$[1]=F.u,$[2]=V.u,h.F.el(1,u,l,n,0,R,F,V),T[0]=R.u,T[1]=F.u,T[2]=V.u,E[0]=$[1]*T[2]-T[1]*$[2],E[1]=-($[0]*T[2]-T[0]*$[2]),E[2]=$[0]*T[1]-T[0]*$[1],u=1-h.F.w(u,h.F.Xq(u,h.F.Sj(u,Math.acos(E[2]/Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]))))),u*=2-u,d=Math.atan2(-E[1],-E[0]),E=h.F.ca(d-1.570796326794897),d=h.F.ca(d+1.570796326794897),E=h.s.R(h.F.ca(o-E))<=h.s.R(h.F.ca(o-d))?E:d,h.$g.ub(1,E,0,o,L,O,null,null),h.$g.ub(1,E,0,n,H,P,null,null),3.141592653589793<O.u+P.u&&(E=h.F.ca(E+3.141592653589793),h.$g.ub(1,E,0,o,L,O,null,null),h.$g.ub(1,E,0,n,H,P,null,null)),O.u*=h.s.Mb(1,s),P.u*=h.s.Mb(1,l),O.u=h.F.Sj(u,O.u),P.u=h.F.Sj(u,P.u),o=h.F.q(b,u,O.u),b=h.F.q(b,u,P.u),c.u=h.s.R(b-o))}}},k.sf=function(b,u,o,s,n,l,c,d){var f=0,g=new h.ha(0),w=new h.ha(0),$=[0,0,0],T=[0,0,0],E=new h.ha(0),O=new h.ha(0),P=new h.ha(0);if(c!=null||d!=null)if(h.s.vi(u))h.$g.sf(b,o,s,n,l,c,d);else if(h.s.Dd(n))c!=null&&(c.u=o),d!=null&&(d.u=s);else if(l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),o=h.F.ca(o),s=h.F.ca(s),1.570796326794897<h.s.R(s)&&(o=h.F.ca(o+3.141592653589793),s=h.s.Mb(3.141592653589793,s)-s),h.s.$(h.s.R(s),1.570796326794897)&&(o=0),h.s.Dd(s)){var R=h.s.R(1.570796326794897-h.s.R(l));R=h.F.Sj(u,R),R=1-h.F.w(u,h.F.Xq(u,R)),R*=2-R,b=n/h.F.Ch(b,R)*1.570796326794897,b=h.F.Tq(R,b),b=h.F.pt(R,b),h.$g.sf(1,o,s,b,l,c,g),d!=null&&(f=g.u),d!=null&&(d.u=h.F.Sj(u,f))}else if(h.s.$(h.s.R(s),1.570796326794897))g=2*(f=h.F.Ch(b,u)),l=0<(b=h.s.Mb(1.570796326794897,s))?h.F.ca(3.141592653589793-l):l,s=f-n,h.s.R(s)<=f?c!=null&&(c.u=l):(s=Math.floor(n/g),h.P.truncate(s%2)==0?(c!=null&&(c.u=l),n-=s*g):(c!=null&&(c.u=h.F.ca(l+3.141592653589793)),n=(s+1)*g-n),s=f-n),d!=null&&(d.u=h.F.Tq(u,s/f*b));else{R=h.F.pt(u,s),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(s-R));var F=h.P.truncate(h.s.Mb(1,R))*(1.570796326794897>=h.s.R(l)?1:-1);l=h.F.ca(o+Math.atan(Math.tan(l)*-Math.sin(R))),h.$g.ub(b,l,0,o,R,null,w,null),R=h.s.R(1.570796326794897-h.s.R(w.u)),R=h.F.Sj(u,R),R=1-h.F.w(u,h.F.Xq(u,R)),R*=2-R,h.F.el(1,u,0,l,0,E,O,P),$[0]=E.u,$[1]=O.u,$[2]=P.u,h.F.el(1,u,s,o,0,E,O,P),T[0]=E.u,T[1]=O.u,T[2]=P.u,s=Math.acos(($[0]*T[0]+$[1]*T[1]+$[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),s=h.F.Sj(R,s),n=0<(s=h.F.q(b,R,s)+n*F)?w.u:h.F.ca(w.u+3.141592653589793),b=h.s.R(s)/h.F.Ch(b,R)*1.570796326794897,b=h.F.Tq(R,b),b=h.F.pt(R,b),h.$g.sf(1,l,0,b,n,c,g),d!=null&&(f=g.u),d!=null&&(d.u=h.F.Sj(u,f))}},k}()}(U||(U={})),function(h){h.eu=function(){function k(){}return k.ub=function(b,u,o,s,n,l,c,d,f){var g=0,w=0,$=0;if(c!=null||d!=null||f!=null)if(h.s.vi(u))h.$g.ub(b,o,s,n,l,c,d,f);else{var T=h.F.ca(n-o);if(h.s.$(s,l)&&(h.s.Dd(T)||h.s.$(h.s.R(s),1.570796326794897)))c!=null&&(c.u=0),d!=null&&(d.u=0),f!=null&&(f.u=0);else{if(h.s.$(s,-l)){if(h.s.$(h.s.R(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(b,u)),d!=null&&(d.u=0<s?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<s?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(T),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(b,u)),d!=null&&(d.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(s),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897)||h.s.Dd(T)||h.s.$(h.s.R(T),3.141592653589793))return void h.Yk.ub(b,u,o,s,n,l,c,d,f);var E=1-Math.sqrt(1-u),O=u/(1-u),P=b*(1-E);b=h.F.Xq(u,s);var R=h.F.Xq(u,l);u=h.s.R(b)==1.570796326794897?0:Math.cos(b);var F=Math.sin(b),V=h.s.R(R)==1.570796326794897?0:Math.cos(R),L=Math.sin(R),G=T,J=Math.cos(G),H=Math.sin(G),te=1,Q=0;do{var ae=G,pe=Math.sqrt(Math.pow(V*H,2)+Math.pow(u*L-F*V*J,2)),he=F*L+u*V*J,Ae=Math.atan2(pe,he);if(pe==0){te=0;break}var ve=u*V*H/pe;if(g=Math.cos(Math.asin(ve)),w=he-2*F*L/(g*=g),1<h.s.R(w)&&(w=h.s.Mb(1,w)),G=T+(1-(G=E/16*g*(4+E*(4-3*g))))*E*ve*(Ae+G*pe*(w+G*he*(2*($=w*w)-1))),J=Math.cos(G),H=Math.sin(G),Q++,3.141592653589793<h.s.R(G)&&30<Q){te=0;break}}while(5e3>=Q&&!h.s.$(ae,G));if(te!=0)E=(O*=g)*(256+O*(O*(74-47*O)-128))/1024,c!=null&&(c.u=P*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(Ae-E*pe*(w+E/4*(he*(2*$-1)-E/6*w*(4*pe*pe-3)*(4*$-3))))),d!=null&&(d.u=h.s.$(h.s.R(s),1.570796326794897)?0>s?n:h.F.ca(3.141592653589793-n):Math.atan2(V*H,u*L-F*V*J)),f!=null&&(h.s.$(h.s.R(l),1.570796326794897)?f.u=0>l?o:h.F.ca(3.141592653589793-o):(f.u=Math.atan2(u*H,u*L*J-F*V),f.u=h.F.ca(f.u+3.141592653589793)));else{G=h.s.Mb(3.141592653589793,T),he=F*L-u*V,Ae=Math.acos(he),pe=Math.sin(Ae),g=1,Q=ve=0;do $=ve,J=1-.25*(ve=E*(g*=g)*(1+E+E*E))+.1875*(w=E*E*(J=g*g)*(1+2.25*E))-.1953125*(te=E*E*E*J*g),ve=.25*ve-.25*w+.29296875*te,H=.03125*w-.05859375*te,te*=.00651041666666667,w=he-2*F*L/g,1<h.s.R(w)&&(w=h.s.Mb(1,w)),g=Math.acos(w),he=Math.cos(2*g),ae=Math.cos(3*g),H=(ve=h.s.$(s,-l)?h.F.ca(3.141592653589793-T)/(3.141592653589793*E*J):h.F.ca(G-T)/(E*(J*Ae+ve*pe*w+H*Math.sin(2*Ae)*he+te*Math.sin(3*Ae)*ae)))*pe/(u*V),G=1.570796326794897<h.s.R(T)?h.s.Mb(3.141592653589793,H)-Math.asin(H):Math.asin(H),J=Math.cos(G),pe=Math.sqrt(Math.pow(V*H,2)+Math.pow(u*L-F*V*J,2)),Ae=3.141592653589793-Math.asin(h.s.R(pe)),he=Math.cos(Ae),g=Math.cos(Math.asin(ve)),Q++;while(70>=Q&&!h.s.$($,ve));c!=null&&(J=1+(O*=g*=g)*(4096+O*(O*(320-175*O)-768))/16384,h.s.$(s,-l)?c.u=3.141592653589793*P*J:(w=he-2*F*L/g,g=Math.acos(w),he=Math.cos(2*g),ae=Math.cos(3*g),c.u=P*(J*Ae+O*(O*(128+O*(35*O-60))-512)/2048*pe*w+O*(5*O-4)/6144*O*O*Math.sin(2*Ae)*he+te*Math.sin(3*Ae)*ae+-762939453125e-16*O*O*O*O*Math.sin(4*Ae)*Math.cos(4*g)))),d!=null&&(h.s.Dd(s)&&h.s.Dd(l)?(g=Math.sqrt(1-ve*ve),d.u=Math.acos(g),0>T&&(d.u*=-1)):h.s.$(h.s.R(s),1.570796326794897)?d.u=0>s?n:h.F.ca(3.141592653589793-n):(c=ve/u,P=Math.sqrt(1-c*c),0>u*L-F*V*Math.cos(G)&&(P*=-1),d.u=Math.atan2(c,P),h.s.$(s,-l)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(0<s&&1.570796326794897>h.s.R(d.u)||0>s&&1.570796326794897<h.s.R(d.u))&&(d.u=h.s.Mb(3.141592653589793,d.u)-d.u))),f!=null&&(h.s.Dd(s)&&h.s.Dd(l)?(g=Math.sqrt(1-ve*ve),f.u=Math.acos(g),0<=T&&(f.u*=-1)):h.s.$(h.s.R(l),1.570796326794897)?f.u=0>l?o:h.F.ca(3.141592653589793-o):(T=ve/V,c=Math.sqrt(1-T*T),P=Math.sin(G/2),0>Math.sin(R-b)-2*u*L*P*P&&(c*=-1),f.u=Math.atan2(T,c),f.u=h.F.ca(f.u+3.141592653589793),h.s.$(s,-l)&&!h.s.Dd(s)&&!h.s.$(h.s.R(s),1.570796326794897)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(d!=null?P=d.u:(c=ve/u,P=Math.sqrt(1-c*c),0>u*L-F*V*Math.cos(G)&&(P*=-1),P=Math.atan2(c,P),h.s.$(s,-l)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(0<s&&1.570796326794897>h.s.R(P)||0>s&&1.570796326794897<h.s.R(P))&&(P=h.s.Mb(3.141592653589793,P)-P)),1.570796326794897>=h.s.R(P)&&1.570796326794897<h.s.R(f.u)||1.570796326794897<=h.s.R(P)&&1.570796326794897>h.s.R(f.u))&&(f.u=-1*h.F.ca(f.u+3.141592653589793))))}}}},k.sf=function(b,u,o,s,n,l,c,d){if(c!=null||d!=null)if(h.s.vi(u))h.$g.sf(b,o,s,n,l,c,d);else if(l=h.F.ca(l),h.s.$(h.s.R(s),1.570796326794897)||h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))h.Yk.sf(b,u,o,s,n,l,c,d);else{var f=h.s.R(l)==1.570796326794897?0:Math.cos(l),g=h.s.R(l)==3.141592653589793?0:Math.sin(l);h.s.$(h.s.R(s),1.570796326794897)&&(o=0),l=1-Math.sqrt(1-u);var w=h.F.Xq(u,s);s=h.s.R(w)==1.570796326794897?0:Math.cos(w);var $=Math.sin(w);w=Math.atan2(Math.tan(w),f);var T=s*g,E=T*T,O=1-E,P=u/(1-u)*O,R=(u=P*(256+P*(P*(74-47*P)-128))/1024)/4,F=u/6,V=n/(b*(1-l)*(1+P*(4096+P*(P*(320-175*P)-768))/16384)),L=V;do{var G=L;n=h.s.R(L)==1.570796326794897?0:Math.cos(L);var J=(P=h.s.R(L)==3.141592653589793?0:Math.sin(L))*P;L=u*P*((b=Math.cos(2*w+L))+R*(n*(2*(L=b*b)-1)-F*b*(4*J-3)*(4*L-3)))+V}while(!h.s.$(G,L));n=h.s.R(L)==1.570796326794897?0:Math.cos(L),P=h.s.R(L)==3.141592653589793?0:Math.sin(L),c!=null&&(g=Math.atan2(P*g,s*n-$*P*f),O=l/16*O*(4+l*(4-3*O)),b=Math.cos(2*w+L),c.u=h.F.ca(o+(g-(1-O)*l*T*(L+O*P*(b+O*n*(2*b*b-1)))))),d!=null&&(O=$*P-s*n*f,O=(1-l)*Math.sqrt(E+O*O),d.u=Math.atan2($*n+s*P*f,O))}},k}()}(U||(U={})),function(h){h.KC=function(){function k(){}return k.ub=function(b,u,o,s,n,l,c,d,f){var g=h.F.ca(n-o),w=h.s.$(h.s.R(s),1.570796326794897),$=h.s.$(h.s.R(l),1.570796326794897);if(h.s.$(s,l)&&(h.s.Dd(g)||w))c!=null&&(c.u=0),d!=null&&(d.u=0),f!=null&&(f.u=0);else{if(h.s.vi(u)){var T=Math.sin(s),E=Math.sin(l);T=Math.sqrt((1+T)/(1-T)),E=Math.sqrt((1+E)/(1-E)),T=Math.log(E)-Math.log(T),T=Math.atan2(g,T),c!=null&&(c.u=h.s.$(s,l)?h.s.R(b*Math.cos(s)*g):h.s.R((b*l-b*s)/Math.cos(T)))}else E=h.F.Sw(u,l),T=Math.sin(h.F.Sw(u,s)),E=Math.sin(E),T=Math.sqrt((1+T)/(1-T)),E=Math.sqrt((1+E)/(1-E)),T=Math.log(E)-Math.log(T),T=Math.atan2(g,T),c!=null&&(h.s.$(s,l)?c.u=h.s.R(b*g*Math.cos(s)/h.F.w(u,s)):(g=h.F.q(b,u,s),b=h.F.q(b,u,l),c.u=h.s.R((b-g)/Math.cos(T))));d==null&&f==null||(c=h.F.ca(T+3.141592653589793),w&&$||!w&&!$||(w?T=0>s?n:h.F.ca(3.141592653589793-n):$&&(c=0>l?o:h.F.ca(3.141592653589793-o))),d!=null&&(d.u=T),f!=null&&(f.u=c))}},k.sf=function(b,u,o,s,n,l,c,d){l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),h.s.vi(u)?h.s.$(h.s.R(s),1.570796326794897)?(o=0>s?l:h.F.ca(3.141592653589793-l),3.141592653589793>=(l=n/b%6.283185307179586)?b=s-h.s.Mb(l,s):(o=h.F.ca(o+3.141592653589793),b=-s+h.s.Mb(l-3.141592653589793,s))):h.s.$(h.s.R(l),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,l)/(b*Math.cos(s))),b=s):(b=s+n*Math.cos(l)/b,1.570796326794897<h.s.R(b)&&(b=1.570796326794897),h.s.$(h.s.R(b),1.570796326794897)&&(h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))||(1.570796316258184<h.s.R(b)&&(b=h.s.Mb(1.570796316258184,b)),u=Math.sin(s),s=Math.sin(b),u=Math.sqrt((1+u)/(1-u)),s=Math.sqrt((1+s)/(1-s)),u=Math.log(s)-Math.log(u),o=h.F.ca(o+Math.tan(l)*u))):h.s.$(h.s.R(s),1.570796326794897)?(o=0>s?l:h.F.ca(3.141592653589793-l),l=n/h.F.lW(b,u),3.141592653589793>=(l%=6.283185307179586)?b=s-h.s.Mb(l,s):(o=h.F.ca(o+3.141592653589793),b=-s+h.s.Mb(l-3.141592653589793,s)),b=h.F.Tq(u,b)):h.s.$(h.s.R(l),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,l)*h.F.w(u,s)/(b*Math.cos(s))),b=s):(b=1.570796326794897*(n*Math.cos(l)+h.F.q(b,u,s))/h.F.Ch(b,u),1.570796326794897<h.s.R(b)&&(b=h.s.Mb(1.570796326794897,b)),b=h.F.Tq(u,b),h.s.$(h.s.R(b),1.570796326794897)&&(h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))||(n=h.F.Sw(u,s),s=h.F.Sw(u,b),1.570796316258184<h.s.R(s)&&(s=h.s.Mb(1.570796316258184,b),b=h.F.tO(u,s)),u=Math.sin(n),s=Math.sin(s),u=Math.sqrt((1+u)/(1-u)),s=Math.sqrt((1+s)/(1-s)),u=Math.log(s)-Math.log(u),o=h.F.ca(o+Math.tan(l)*u))),c!=null&&(c.u=o),d!=null&&(d.u=b)},k}()}(U||(U={})),function(h){h.kb=function(){function k(){}return k.Sy=function(b,u,o,s,n,l,c){h.eu.ub(b,u,o,s,n,l,null,c,null)},k.Ai=function(b,u,o,s,n,l,c,d){h.eu.sf(b,u,o,s,n,l,c,d)},k.xd=function(b,u,o,s,n,l,c,d,f,g){switch(g){case 2:h.Yk.ub(b,u,o,s,n,l,c,d,f);break;case 3:h.LC.ub(b,u,o,s,n,l,c,d,f);break;case 1:h.KC.ub(b,u,o,s,n,l,c,d,f);break;default:h.eu.ub(b,u,o,s,n,l,c,d,f)}},k.qj=function(b,u,o,s,n,l,c,d,f){switch(f){case 2:h.Yk.sf(b,u,o,s,n,l,c,d);break;case 3:h.LC.sf(b,u,o,s,n,l,c,d);break;case 1:h.KC.sf(b,u,o,s,n,l,c,d);break;default:h.eu.sf(b,u,o,s,n,l,c,d)}},k}()}(U||(U={})),function(h){var k=function(){function u(){this.y=this.x=null}return u.construct=function(o){var s=new u;return s.x=new h.Xb,s.x.set(o.x),s.y=new h.Xb,s.y.set(o.y),s},u.QE=function(o,s){var n=new u;return n.x=new h.Xb,n.x.set(o),n.y=new h.Xb,n.y.set(s),n},u.prototype.rg=function(){return this.x.rg()&&this.y.rg()},u.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},u}();h.rY=k;var b=function(){function u(){this.z=this.y=this.x=null}return u.construct=function(o){var s=new u;return s.x=new h.Xb,s.x.set(o.x),s.y=new h.Xb,s.y.set(o.y),s.z=new h.Xb,s.z.set(o.z),s},u.QE=function(o,s,n){var l=new u;return l.x=new h.Xb,l.x.set(o),l.y=new h.Xb,l.y.set(s),l.z=new h.Xb,l.z.set(n),l},u.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},u.prototype.value=function(){return new h.Od(this.x.value(),this.y.value(),this.z.value())},u.prototype.Sh=function(o){var s=new h.Xb,n=new h.Xb,l=new h.Xb;return s.Ml(this.x,o.x),n.Ml(this.y,o.y),l.Ml(this.z,o.z),(o=new h.Xb).ZM(s,n),o.add(l),o},u.prototype.YE=function(o){var s=new u;s.x.Ml(this.y,o.z),s.y.Ml(this.z,o.x),s.z.Ml(this.x,o.y);var n=new h.Xb,l=new h.Xb,c=new h.Xb;return n.Ml(this.z,o.y),l.Ml(this.x,o.z),c.Ml(this.y,o.x),s.x.sub(n),s.y.sub(l),s.z.sub(c),s},u}();h.sY=b,h.Nx=function(){function u(){}return u.zP=function(o,s,n){var l=s.x;s=s.y,u.el(1,o,Math.cos(l),Math.sin(l),Math.cos(s),Math.sin(s),n)},u.yP=function(o,s){var n=new h.Od;return u.zP(o,s,n),n},u.el=function(o,s,n,l,c,d,f){o/=Math.sqrt(1-s*d*d),f.L(o*c*n,o*c*l,o*(1-s)*d)},u.$u=function(o,s){var n=new h.Xb,l=new h.Xb,c=new h.Xb,d=new h.Xb;n.cos(s.x),l.sin(s.x),c.cos(s.y),d.sin(s.y);var f=new h.Xb;return f.set(d),f.Bg(d),f.Po(o),f.Po(-1),f.fN(),f.sqrt(),(s=new h.Xb).set(1),s.lm(f),(f=new h.Xb).set(s),f.Bg(c),f.Bg(n),(n=new h.Xb).set(s),n.Bg(c),n.Bg(l),(l=new h.Xb).set(s),l.Po(1-o),l.Bg(d),b.QE(f,n,l)},u.NS=function(o,s,n,l){if(Math.abs(s.x-n.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&s.x!=n.x)return NaN;if(l=u.YA(l,Math.min(s.x,n.x),Math.max(s.x,n.x)),!new h.Oc(s.x,n.x).contains(l))return NaN;var c=k.construct(s);if(n=k.construct(n),c=u.$u(o,c),n=u.$u(o,n),(n=c.YE(n)).z.rg())return s.y;var d=new h.Xb;d.set(n.x),d.lm(n.z),d.Po(-1);var f=new h.Xb;f.set(n.y),f.lm(n.z),f.Po(-1);var g=new h.Xb;return g.set(f),g.Bg(f),(c=new h.Xb).set(d),c.Bg(d),c.add(g),c.sqrt(),c.rg()||d.rg()&&f.rg()?s.y:(s=Math.atan2(f.value(),d.value()),s=Math.atan2(c.value()*Math.cos(s-l),1-o),l=u.yP(o,h.h.construct(l,s)),o=new h.Od(l.x,l.y,-l.z),l=n.value().Sh(l),o=n.value().Sh(o),Math.abs(o)<Math.abs(l)&&(s=-s),s)},u.Jz=function(o,s,n,l,c){if(c[0]=NaN,c[1]=NaN,Math.abs(s.x-n.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&s.x!=n.x||Math.abs(l)>=.5*Math.PI||0<s.y&&0<n.y&&s.y>l&&n.y>l||0>s.y&&0>n.y&&s.y<l&&n.y<l)return 0;var d=k.construct(s),f=k.construct(n);d=u.$u(o,d),f=u.$u(o,f);var g=d.YE(f);if(g.z.rg())return new h.Oc(s.y,n.y).contains(l)?(c[0]=s.x,1):0;(f=new h.Xb).set(g.x),f.lm(g.z),f.Po(-1),(d=new h.Xb).set(g.y),d.lm(g.z),d.Po(-1),(g=new h.Xb).set(d),g.Bg(d);var w=new h.Xb;return w.set(f),w.Bg(f),w.add(g),w.sqrt(),w.rg()||f.rg()&&d.rg()?l==0?(c[0]=s.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(l)/w.value(),1<Math.abs(o)?0:(o=Math.acos(o),g=Math.atan2(d.value(),f.value()),f=Math.min(s.x,n.x),d=Math.max(s.x,n.x),n=u.YA(g-o,f,d),o=l!=0?u.YA(g+o,f,d):n,l=0,f<=n&&n<=d&&(c[l]=n,l++),o!=n&&f<=o&&o<=d&&(c[l]=o,++l==2&&Math.abs(c[0]-s.x)>Math.abs(c[1]-s.x)&&(s=c[0],c[0]=c[1],c[1]=s)),l))},u.YA=function(o,s,n){return o>n?o-=2*(s=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<s&&(o+=2*(s=Math.ceil((s-o)/(2*Math.PI)))*Math.PI),o},u}()}(U||(U={})),function(h){h.SK=function(){function k(){}return k.WX=function(b,u){var o=8,s=[0,0,0,0],n=new h.h;n.N(u),n.scale(h.cb.tc(b).Id().Fc()==9102?1:h.cb.tc(b).Id().ci/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var l=-180,c=180,d=(b=5*o)-1,f=(u=(b+31)/32)-1;0<=f;f--)for(var g=d-32*f,w=Math.min(32,b-32*f),$=1;$<w;$+=2){var T=.5*(c+l);n.x>=T?(s[f]|=1<<g,l=T):c=T,g-=2,d-=2}for(l=-90,c=90,d=b-2,f=u-1;0<=f;f--)for(g=d-32*f,w=Math.min(32,b-32*f),$=0;$<w;$+=2)T=.5*(c+l),n.y>=T?(s[f]|=1<<g,l=T):c=T,g-=2,d-=2;return k.VP(s,o,o)},k.VP=function(b,u,o){for(var s=[],n=0;n<u;n++)s[n]="";for(var l=n=0,c=0;c<u;c++){var d=b[n]>>l&31;if(31<(l+=5)){var f=37-l;d&=(1<<f)-1,l-=32,d|=(b[++n]&(1<<l)-1)<<f}s[u-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[d]}if(o>u)for(c=0;c<o-u;c++)s.push("0");else o<u&&(s.length=o);return s.join("")},k}()}(U||(U={})),function(h){var k={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},b={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.yr=function(){function u(){}return u.Ny=function(o){u.zp===!1&&u.zt();var s=u.AQ(o);if(s==-1){var n=u.Ax(o);n!=o&&(s=u.Ny(n))}return s==-1&&(n=u.AK(o))!=o&&(s=u.Ny(n)),s},u.AQ=function(o){return u.Hw[o]!==void 0?u.Hw[o]:-1},u.xQ=function(o){u.zp===!1&&u.zt();var s=u.iF(o);if(s==1e38){var n=u.Ax(o);if(n!=o&&(s=u.iF(n)),s==1e38)return 1e-10}return s},u.US=function(o){if(u.Ks[o]!==void 0)return!0;var s=u.Ax(o);return s!=o&&u.Ks[s]!==void 0},u.WS=function(o){if(u.zo[o]!==void 0)return!0;var s=u.Ax(o);return s!=o&&u.zo[s]!==void 0},u.iF=function(o){return u.zp===!1&&u.zt(),u.Ks[o]!==void 0?u.Ks[o]:u.zo[o]!==void 0?u.zo[o]:1e38},u.AK=function(o){return u.zp===!1&&u.zt(),u.RA[o]!==void 0?u.RA[o]:o},u.Ax=function(o){return u.zp===!1&&u.zt(),u.SA[o]!==void 0?u.SA[o]:o},u.zt=function(){for(var o,s=k,n=0;n<s.pcsid.length;n+=2)u.zo[s.pcsid[n]]=s.pcstol[2*s.pcsid[n+1]+1];for(n=0;n<s.pcsidc.length;n+=1)for(var l=(o=s.pcsidc[n])[0];l<=o[1];l++)u.zo[l]=s.pcstol[2*o[2]+1];for(n=0;n<s.gcsid.length;n+=2)u.Ks[s.gcsid[n]]=s.gcstol[2*s.gcsid[n+1]+1];for(n=0;n<s.gcsidc.length;n+=1)for(l=(o=s.gcsidc[n])[0];l<=o[1];l++)u.zo[l]=s.gcstol[2*o[2]+1];for(n=0;n<b.c.length;n+=1)for(l=(o=b.c[n])[0];l<=o[1];l++)u.Hw[l]=o[2];for(n=0;n<b.nc.length;n+=2)u.Hw[b.nc[n]]=b.nc[n+1];for(b=null,n=0;n<s.newtoold.length;n+=2)u.RA[s.newtoold[n+1]]=s.newtoold[n],u.SA[s.newtoold[n]]=s.newtoold[n+1];k=null,u.zp=!0},u.zp=!1,u.Ks=[],u.zo=[],u.RA=[],u.SA=[],u.Hw=[],u}()}(U||(U={})),function(h){function k(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var b=[];h.SC=function(){function u(){}return u.zQ=function(o){try{for(var s=0;s<b.length;s++)if(b[s].wkttext===o)return b[s].unit;for(var n,l=s="",c=!1,d=0;d<o.length;d++){var f=o[d];c===!0?f=='"'?o[d+1]=='"'?s+=f:c=c=!1:s+=f:/[\s]/.test(f)||(f==","?(l=s!==""?l+(k(s)+","):l+",",s=""):f==")"||f=="]"?(l=s!==""?l+(k(s)+"]}"):l+"]}",s=""):f=="("||f=="["?(l+='{ "entity": "'+s.toUpperCase().trim()+'", "values":[',s=""):f=='"'?(c=!0,s=""):s+=f)}n=JSON.parse(l);var g=u.hF(n);if(g===null)return null;for(n=null,f=0;f<g.values.length;f++)if(typeof g.values[f]=="object"&&g.values[f].entity==="UNIT"){n=g.values[f];break}if(n===null)return null;var w=h.Uc.UO(g.entity==="GEOGCS"?1:0,n.values[1],n.values[2]);return b.push({wkttext:o,unit:w}),10<b.length&&b.shift(),w}catch{return null}},u.hF=function(o){if(o===null)return null;if(o.entity==="GEOGCS"||o.entity==="PROJCS")return o;for(var s=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0){if(o.values[n].entity==="GEOGCS"||o.values[n].entity=="PROJCS")return o.values[n];s.push(o.values[n])}for(o=0;o<s.length;o++)if((n=u.hF(s[o]))!==null)return n;return null},u.yQ=function(o){var s=-1;if(o!=null&&0<o.length){var n=o.indexOf("PROJCS");if(0<=n){var l=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<l&&(s=.001/l)}else if(0<=(n=o.indexOf("GEOGCS"))){var d=0;if(l=0,0<(n=o.indexOf("SPHEROID",n+6))&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{d=parseFloat(o.substring(n,c))}catch{d=0}if(0<d&&0<=(n=o.indexOf("UNIT",c+1))&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1))))try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<d&&0<l&&(s=.001/(d*l))}}return s},u}()}(U||(U={})),function(h){var k;(k=h.$K||(h.$K={}))[k.NONE=0]="NONE",k[k.LINEAR=1]="LINEAR",k[k.ANGULAR=2]="ANGULAR",function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"}(h.LL||(h.LL={})),function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Kh||(h.Kh={}));var b=function(){function u(o,s){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,s!==void 0){for(this.Ba=s.Ba,this.Qq=s.Qq,this.dg=s.dg.slice(0),this.wh=s.wh.slice(0),this.yl=s.yl,this.Xs=[],o=s=0;o<this.Ba;o++)this.Xs[o]=s,s+=u.Wa(this.dg[o]);for(this.Qq=s,this.Be=[],o=0;o<this.Ba;o++){s=u.Wa(this.ld(o));for(var n=u.te(this.ld(o)),l=0;l<s;l++)this.Be[this.Xs[o]+l]=n}}else this.Qq=this.Ba=0}return u.prototype.ld=function(o){if(0>o||o>this.Ba)throw h.i.O();return this.dg[o]},u.prototype.Rf=function(o){return this.wh[o]},u.gz=function(o){return u.EM[o]},u.Vp=function(o){return u.NM[o]},u.Wa=function(o){return u.mM[o]},u.prototype.hasAttribute=function(o){return 0<=this.wh[o]},u.prototype.dG=function(){return this.hasAttribute(1)},u.te=function(o){return u.$C[o]},u.prototype.GR=function(o){return this.Xs[o]},u.yG=function(o,s){return u.$C[o]===s},u.prototype.Nb=function(o){return this===o},u.prototype.Cn=function(){for(var o=h.P.Vh(this.dg[0]),s=1;s<this.Ba;s++)o=h.P.Vh(this.dg[s],o);return o},u.prototype.bk=function(o){return this.Xs[o]},u.prototype.dc=function(){return this.yl},u.prototype.Fd=function(o){return this.dg[o]},u.$C=[0,0,NaN,0,0,0,0,0,0],u.EM=[1,1,1,0,2,1,1,1,0],u.NM=[1,1,1,2,0,0,0,0,2],u.mM=[2,1,1,1,3,1,2,3,2],u}();h.sa=b}(U||(U={})),function(h){function k(c,d,f){var g=d-(c=new l(c)).e,w=c.c;for(w.length>++d&&b(c,g,l.gu),w[0]?f?g=d:(w=c.c,g=c.e+g+1):++g;w.length<g;w.push(0));return g=c.e,f===1||f&&(d<=g||g<=o)?(0>c.Cd&&w[0]?"-":"")+(1<w.length?w[0]+"."+w.join("").slice(1):w[0])+(0>g?"e":"e+")+g:c.toString()}function b(c,d,f,g){var w=c.c,$=c.e+d+1;if(f===1?g=5<=w[$]:f===2?g=5<w[$]||w[$]==5&&(g||0>$||w[$+1]!==void 0||1&w[$-1]):f===3?g=g||w[$]!==void 0||0>$:(g=!1,f!==0&&u("!Big.RM!")),1>$||!w[0])g?(c.e=-d,c.c=[1]):c.c=[c.e=0];else{if(w.length=$--,g)for(;9<++w[$];)w[$]=0,$--||(++c.e,w.unshift(1));for($=w.length;!w[--$];w.pop());}return c}function u(c){throw(c=Error(c)).name="BigError",c}var o=-7,s=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function c(d){if(d instanceof c)this.Cd=d.Cd,this.e=d.e,this.c=d.c.slice();else{var f,g,w;for(d===0&&0>1/d?d="-0":n.test(d+="")||u(NaN),this.Cd=d.charAt(0)=="-"?(d=d.slice(1),-1):1,-1<(f=d.indexOf("."))&&(d=d.replace(".","")),0<(g=d.search(/e/i))?(0>f&&(f=g),f+=+d.slice(g+1),d=d.substring(0,g)):0>f&&(f=d.length),g=0;d.charAt(g)=="0";g++);if(g==(w=d.length))this.c=[this.e=0];else{for(;d.charAt(--w)=="0";);for(this.e=f-g-1,this.c=[],f=0;g<=w;this.c[f++]=+d.charAt(g++));}}}return c.prototype.abs=function(){var d=new c(this);return d.Cd=1,d},c.prototype.cmp=function(d){var f=this.c,g=(d=new c(d)).c,w=this.Cd,$=d.Cd,T=this.e,E=d.e;if(!f[0]||!g[0])return f[0]?w:g[0]?-$:0;if(w!=$)return w;if(d=0>w,T!=E)return T>(E^d)?1:-1;for(w=-1,$=(T=f.length)<(E=g.length)?T:E;++w<$;)if(f[w]!=g[w])return f[w]>(g[w]^d)?1:-1;return T==E?0:T>(E^d)?1:-1},c.prototype.lm=function(d){var f=this.c,g=(d=new c(d)).c,w=this.Cd==d.Cd?1:-1,$=c.tr;if(($!==~~$||0>$||1e6<$)&&u("!Big.DP!"),!f[0]||!g[0])return f[0]==g[0]&&u(NaN),g[0]||u(w/0),new c(0*w);var T,E,O=g.slice(),P=T=g.length,R=f.length,F=f.slice(0,T),V=F.length,L=d,G=L.c=[],J=0,H=$+(L.e=this.e-d.e)+1;for(L.Cd=w,w=0>H?0:H,O.unshift(0);V++<T;F.push(0));do{for(E=0;10>E;E++){if(T!=(V=F.length))var te=T>V?1:-1;else{var Q=-1;for(te=0;++Q<T;)if(g[Q]!=F[Q]){te=g[Q]>F[Q]?1:-1;break}}if(!(0>te))break;for(d=V==T?g:O;V;){if(F[--V]<d[V]){for(Q=V;Q&&!F[--Q];F[Q]=9);--F[Q],F[V]+=10}F[V]-=d[V]}for(;!F[0];F.shift());}G[J++]=te?E:++E,F[0]&&te?F[V]=f[P]||0:F=[f[P]]}while((P++<R||F[0]!==void 0)&&w--);return G[0]||J==1||(G.shift(),L.e--),J>H&&b(L,$,c.gu,F[0]!==void 0),L},c.prototype.aS=function(){return 0<this.cmp(0)},c.prototype.iT=function(){return 0>this.cmp(0)},c.prototype.kt=function(d){var f,g=this.Cd,w=(d=new c(d)).Cd;if(g!=w)return d.Cd=-w,this.oI(d);var $=this.c.slice(),T=this.e,E=d.c,O=d.e;if(!$[0]||!E[0])return E[0]?(d.Cd=-w,d):new c($[0]?this:0);if(g=T-O){for((f=0>g)?(g=-g,T=$):(O=T,T=E),T.reverse(),w=g;w--;T.push(0));T.reverse()}else for(T=((f=$.length<E.length)?$:E).length,g=w=0;w<T;w++)if($[w]!=E[w]){f=$[w]<E[w];break}if(f&&(T=$,$=E,E=T,d.Cd=-d.Cd),0<(w=(T=E.length)-(f=$.length)))for(;w--;$[f++]=0);for(w=f;T>g;){if($[--T]<E[T]){for(f=T;f&&!$[--f];$[f]=9);--$[f],$[T]+=10}$[T]-=E[T]}for(;$[--w]==0;$.pop());for(;$[0]==0;)$.shift(),--O;return $[0]||(d.Cd=1,$=[O=0]),d.c=$,d.e=O,d},c.prototype.oI=function(d){var f=this.Cd,g=(d=new c(d)).Cd;if(f!=g)return d.Cd=-g,this.kt(d);g=this.e;var w=this.c,$=d.e,T=d.c;if(!w[0]||!T[0])return T[0]?d:new c(w[0]?this:0*f);if(w=w.slice(),f=g-$){for(0<f?($=g,g=T):(f=-f,g=w),g.reverse();f--;g.push(0));g.reverse()}for(0>w.length-T.length&&(g=T,T=w,w=g),f=T.length,g=0;f;)g=(w[--f]=w[f]+T[f]+g)/10|0,w[f]%=10;for(g&&(w.unshift(g),++$),f=w.length;w[--f]==0;w.pop());return d.c=w,d.e=$,d},c.prototype.pow=function(d){var f=this,g=new c(1),w=g,$=0>d;for((d!==~~d||-1e6>d||1e6<d)&&u("!pow!"),d=$?-d:d;1&d&&(w=w.nr(f)),d>>=1;)f=f.nr(f);return $?g.lm(w):w},c.prototype.round=function(d,f){var g=this;return d==null?d=0:(d!==~~d||0>d||1e6<d)&&u("!round!"),b(g=new c(g),d,f??c.gu),g},c.prototype.sqrt=function(){var d=this.c,f=this.Cd,g=this.e,w=new c("0.5");if(!d[0])return new c(this);0>f&&u(NaN),(f=Math.sqrt(this.toString()))==0||f==1/0?((f=d.join("")).length+g&1||(f+="0"),(d=new c(Math.sqrt(f).toString())).e=((g+1)/2|0)-(0>g||1&g)):d=new c(f.toString()),f=d.e+(c.tr+=4);do g=d,d=w.nr(g.oI(this.lm(g)));while(g.c.slice(0,f).join("")!==d.c.slice(0,f).join(""));return b(d,c.tr-=4,c.gu),d},c.prototype.nr=function(d){var f=this.c,g=(d=new c(d)).c,w=f.length,$=g.length,T=this.e,E=d.e;if(d.Cd=this.Cd==d.Cd?1:-1,!f[0]||!g[0])return new c(0*d.Cd);if(d.e=T+E,w<$){var O=f;f=g,g=O,E=w,w=$,$=E}for(O=Array(E=w+$);E--;O[E]=0);for(T=$;T--;){for($=0,E=w+T;E>T;)$=O[E]+g[T]*f[E-T-1]+$,O[E--]=$%10,$=$/10|0;O[E]=(O[E]+$)%10}for($&&++d.e,O[0]||O.shift(),T=O.length;!O[--T];O.pop());return d.c=O,d},c.prototype.toString=function(){var d=this.e,f=this.c.join(""),g=f.length;if(d<=o||d>=s)f=f.charAt(0)+(1<g?"."+f.slice(1):"")+(0>d?"e":"e+")+d;else if(0>d){for(;++d;f="0"+f);f="0."+f}else if(0<d)if(++d>g)for(d-=g;d--;f+="0");else d<g&&(f=f.slice(0,d)+"."+f.slice(d));else 1<g&&(f=f.charAt(0)+"."+f.slice(1));return 0>this.Cd&&this.c[0]?"-"+f:f},c.prototype.toExponential=function(d){return d==null?d=this.c.length-1:(d!==~~d||0>d||1e6<d)&&u("!toExp!"),k(this,d,1)},c.prototype.toFixed=function(d){var f=o,g=s;if(o=-(s=1/0),d==null)var w=this.toString();else d===~~d&&0<=d&&1e6>=d&&(w=k(this,this.e+d),0>this.Cd&&this.c[0]&&0>w.indexOf("-")&&(w="-"+w));return o=f,s=g,w||u("!toFix!"),w},c.prototype.toPrecision=function(d){return d==null?this.toString():((d!==~~d||1>d||1e6<d)&&u("!toPre!"),k(this,d-1,2))},c.tr=20,c.gu=1,c}();h.jp=l}(U||(U={})),function(h){var k=function(){function b(u){this.lf=u}return b.prototype.qr=function(u,o,s){var n=new h.h,l=new h.h,c=this.lf;s.Wd(u,o,function(d,f){return c.uc(2*d,n),c.uc(2*f,l),n.compare(l)})},b.prototype.bq=function(u){return this.lf.read(2*u+1)},b}();h.si=function(){function b(){}return b.cq=function(u){if(u.B())return!1;var o=u.K();return o==1736?u.He()!=0:o==1607?(o=[!1],b.nE(u,!0,o),o[0]):!(o!=197&&(!h.ba.zd(o)||u.wG()))},b.im=function(u){var o=u.K();if(o==1736)return o=new h.Ua(u.description),u.B()||u.ZC(o),o;if(o==1607)return b.nE(u,!1,null);if(o==197)return o=new h.Ua(u.description),u.B()||o.bd(u,!1),o;if(h.ba.zd(o)){if(o=new h.ee(u.description),!u.B()&&!u.wG()){var s=new h.Ta;u.Vo(s),o.add(s),u.Ro(s),o.add(s)}return o}if(h.ba.Tn(o))return null;throw h.i.O()},b.nE=function(u,o,s){s!=null&&(s[0]=!1);var n=null;if(o||(n=new h.ee(u.description)),!u.B()){var l=new h.ja(0);l.Jb(2*u.ea());for(var c=0,d=u.ea();c<d;c++)if(0<u.Ka(c)&&!u.Pn(c)){var f=u.Ca(c);l.add(f),f=u.Wc(c)-1,l.add(f)}if(0<l.size){d=new h.Zt,c=u.vb(0),d.sort(l,0,l.size,new k(c)),d=new h.h,c.uc(2*l.get(0),d),f=0;for(var g=1,w=new h.Ta,$=new h.h,T=1,E=l.size;T<E;T++)if(c.uc(2*l.get(T),$),$.rb(d))l.get(f)>l.get(T)?(l.set(f,2147483647),f=T):l.set(T,2147483647),g++;else{if(!(1&g))l.set(f,2147483647);else if(o)return s!=null&&(s[0]=!0),null;d.N($),f=T,g=1}if(!(1&g))l.set(f,2147483647);else if(o)return s!=null&&(s[0]=!0),null;if(!o)for(l.Wd(0,l.size,function(O,P){return O-P}),T=0,E=l.size;T<E&&l.get(T)!=2147483647;T++)u.we(l.get(T),w),n.add(w)}}return o?null:n},b}()}(U||(U={})),function(h){var k=function(){function b(){this.zf=new h.ja(0),this.As=new h.ja(0),this.zH=1,this.Gs=NaN}return b.prototype.sort=function(u,o,s,n){if(32>s-o)n.qr(o,s,u);else{var l=!0;try{for(var c=1/0,d=-1/0,f=o;f<s;f++){var g=n.bq(u.get(f));g<c&&(c=g),g>d&&(d=g)}if(this.reset(s-o,c,d,s-o)){for(f=o;f<s;f++){var w=u.get(f);g=n.bq(w);var $=this.uF(g);this.zf.set($,this.zf.get($)+1),this.As.write(f-o,w)}var T=this.zf.get(0);this.zf.set(0,0),f=1;for(var E=this.zf.size;f<E;f++){var O=this.zf.get(f);this.zf.set(f,T),T+=O}for(f=o;f<s;f++){w=this.As.read(f-o),g=n.bq(w),$=this.uF(g);var P=this.zf.get($);u.set(P+o,w),this.zf.set($,P+1)}l=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(l)n.qr(o,s,u);else{for(f=s=0,E=this.zf.size;f<E;f++)l=s,(s=this.zf.get(f))>l&&n.qr(o+l,o+s,u);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},b.prototype.reset=function(u,o,s,n){return!(2>u||s==o)&&(u=Math.min(b.cL,u),this.zf.Jb(u),this.zf.resize(u),this.zf.Yj(0,0,this.zf.size),this.zH=o,this.As.resize(n),this.Gs=(s-o)/(u-1),!0)},b.prototype.uF=function(u){return h.P.truncate((u-this.zH)/this.Gs)},b.cL=65536,b}();h.Zt=k}(U||(U={})),function(h){var k,b;(b=k||(k={}))[b.enum_line=1]="enum_line",b[b.enum_arc=2]="enum_arc",b[b.enum_dummy=4]="enum_dummy",b[b.enum_concave_dip=8]="enum_concave_dip",b[b.enum_connection=3]="enum_connection";var u=function(){function c(){}return c.Su=function(d,f,g,w,$,T){var E=new c;return E.Km=new h.h,E.Xm=new h.h,E.cw=new h.h,E.Km.N(d),E.Xm.N(f),E.cw.N(g),E.Eo=w,E.sh=$,E.uh=T,E},c.construct=function(d,f,g,w){var $=new c;return $.Km=new h.h,$.Xm=new h.h,$.cw=new h.h,$.Km.N(d),$.Xm.N(f),$.cw.Sc(),$.Eo=4,$.sh=g,$.uh=w,$},c}(),o=function(){function c(d,f,g,w,$,T){this.$v=null,this.za=0,this.zA=d,this.XH=this.VH=0,this.La=f,this.Oj=g,this.xk=w,this.Fq=$,this.Vb=T}return c.prototype.next=function(){for(var d=new h.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,d),this.za++,!d.B())break}var f=!1;if(this.$v==null&&(this.VH=d.Ng(),this.XH=d.kh(),this.$v=l.buffer(d,this.La,this.Oj,this.xk,this.Fq,this.Vb),f=!0),this.za<this.zA.I()){var g=new h.Ea;this.$v.copyTo(g)}else g=this.$v;if(!f){f=new h.Ed;var w=d.Ng()-this.VH;d=d.kh()-this.XH,f.ig(w,d),g.Pc(f)}return g},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),s=function(){function c(d,f){this.Xa=d,this.za=0,this.qq=f}return c.prototype.next=function(){var d=this.Xa.Y;if(this.za<d.ea()){var f=this.za;if(this.za++,!d.Pn(f))for(var g=d.Oa(d.Wc(f)-1);this.za<d.ea();){var w=d.Oa(d.Ca(this.za));if(d.Pn(this.za)||w!=g)break;g=d.Oa(d.Wc(this.za)-1),this.za++}if(this.za-f==1)return this.Xa.fE(this.Xa.Y,f,this.qq);for((g=new h.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,f,!0),f+=1;f<this.za;f++)g.Fr(this.Xa.Y,f,0,d.tv(f),!1);return this.Xa.fE(g,0,this.qq)}return null},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),n=function(){function c(d){this.Xa=d,this.za=0}return c.prototype.next=function(){var d=this.Xa.Y;if(this.za<d.ea()){var f=this.za;for(d.Kr(this.za),this.za++;this.za<d.ea()&&!(0<d.Kr(this.za));)this.za++;return f==0&&this.za==d.ea()?this.Xa.ly(d,0,d.ea()):this.Xa.ly(d,f,this.za)}return null},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),l=function(){function c(d){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=d,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return c.buffer=function(d,f,g,w,$,T){if(d==null||0>w)throw h.i.O();if(d.B())return new h.Ea(d.description);var E=new h.l;return d.yc(E),0<f&&E.X(f,f),(T=new c(T)).Oj=g,T.Y=d,T.ra=h.ua.Xd(g,E,!0),T.dt=h.ua.Xd(null,E,!0),T.La=f,T.ET=d.K(),0>=$&&($=96),T.sb=Math.abs(T.La),T.Mv=T.sb!=0?1/T.sb:0,isNaN(w)||w==0?w=1e-5*T.sb:w>.5*T.sb&&(w=.5*T.sb),12>$&&($=12),(d=Math.abs(f)*(1-Math.cos(Math.PI/$)))>w?w=d:(d=Math.PI/Math.acos(1-w/Math.abs(f)))<$-1&&12>($=h.P.truncate(d))&&($=12,w=Math.abs(f)*(1-Math.cos(Math.PI/$))),T.xk=w,T.Fq=$,T.oA=Math.min(T.dt,.25*w),T.gE()},c.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var d=this.lE();d=h.P.truncate((d+3)/4);var f=.5*Math.PI/d;this.jA=f;for(var g=0;g<4*d;g++)this.Jd.push(null);var w=Math.cos(f);f=Math.sin(f);var $=h.h.construct(0,1);for(g=0;g<d;g++)this.Jd[g+0*d]=h.h.construct($.y,-$.x),this.Jd[g+1*d]=h.h.construct(-$.x,-$.y),this.Jd[g+2*d]=h.h.construct(-$.y,$.x),this.Jd[g+3*d]=$,($=h.h.construct($.x,$.y)).Ct(w,f)},c.prototype.gE=function(){var d=this.Y.K();if(h.ba.zd(d))return(d=new h.Ua(this.Y.description)).pc(this.Y,!0),this.Y=d,this.gE();if(this.La<=this.ra){if(!h.ba.PS(d))return new h.Ea(this.Y.description);if(0>=this.La&&(d=new h.l,this.Y.A(d),d.S()<=2*-this.La||d.da()<=2*this.La))return new h.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw h.i.Ra()}},c.prototype.MN=function(){if(this.zG(this.Y)){var d=new h.Ta;this.Y.we(0,d);var f=new h.l;return this.Y.A(f),d.Db(f.tf()),this.Iu(d)}return this.Y=this.RV(this.Y),d=new s(this,this.qq),h.Ih.local().W(d,this.Oj,this.Vb).next()},c.prototype.LN=function(){if(this.La==0)return this.Y;var d=h.$l.local();if(this.ev(),this.Y=d.W(this.Y,null,!1,this.Vb),0>this.La){var f=this.Y;return f=this.ly(f,0,f.ea()),d.W(f,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(d=new h.Ta,this.Y.we(0,d),f=new h.l,this.Y.A(f),d.Db(f.tf()),this.Iu(d)):(d=new n(this),h.Ih.local().W(d,this.Oj,this.Vb).next())},c.prototype.ly=function(d,f,g){for(var w=new h.Ea(d.description);f<g;f++)if(!(1>d.Ka(f))){var $=d.Kr(f),T=new h.l;if(d.Tj(f,T),0<this.La){if(0<$)if(this.AG(d,f))$=new h.Ta,d.we(d.Ca(f),$),$.Db(T.tf()),this.Au(w,$);else{var E=$=new h.Ua(d.description);E=h.au.EG(this.Y,f)||this.Bn(this.Y,f,E,!0,1)==2?this.eE(d,f):this.An($),w.add(E,!1)}else if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(E=$=new h.Ua(d.description),this.Bn(this.Y,f,E,!0,1),$.B()))){var O=new h.l;for(O.L(T),O.X(this.sb,this.sb),E.vp(O),T=1,$=(E=this.An($)).ea();T<$;T++)w.addPath(E,T,!0)}}else if(0<$){if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(E=$=new h.Ua(d.description),this.Bn(this.Y,f,E,!0,-1),$.B())))for(O=new h.l,E.yc(O),O.X(this.sb,this.sb),E.vp(O),T=1,$=(E=this.An($)).ea();T<$;T++)w.addPath(E,T,!0)}else for(E=$=new h.Ua(d.description),this.Bn(this.Y,f,E,!0,-1),T=0,$=(E=this.An($)).ea();T<$;T++)w.addPath(E,T,!0)}if(0<this.La)return 1<w.ea()?w=this.An(w):c.kx(w);if(d=new h.l,w.yc(d),w.B())return c.kx(w);for(d.X(this.sb,this.sb),w.vp(d),w=this.An(w),d=new h.Ea(w.description),T=1,$=w.ea();T<$;T++)d.addPath(w,T,!1);return c.kx(d)},c.prototype.KN=function(){return this.Iu(this.Y)},c.prototype.Iu=function(d){var f=new h.Ea(this.Y.description);return this.Au(f,d),this.oX(f)},c.prototype.JN=function(){var d=new o(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return h.Ih.local().W(d,this.Oj,this.Vb).next()},c.prototype.GN=function(){var d=new h.Ea(this.Y.description);if(0>=this.La){if(this.La==0)d.bd(this.Y,!1);else{var f=new h.Hh;this.Y.dn(f),f.X(this.La,this.La),d.bd(f,!1)}return d}return d.bd(this.Y,!1),this.Y=d,this.eE(d,0)},c.prototype.eE=function(d,f){this.ev();var g=new h.Ea(d.description),w=new h.h,$=new h.h,T=new h.h,E=new h.h,O=new h.h,P=new h.h,R=new h.h,F=new h.h,V=d.Ka(f),L=d.Ca(f),G=0;for(f=d.Ka(f);G<f;G++){if(d.D(L+G,$),d.D(L+(G+1)%V,E),d.D(L+(G+2)%V,P),R.vc(E,$),R.length()==0||(R.Jv(),R.normalize(),R.scale(this.sb),w.add(R,$),T.add(R,E),G==0?g.Nt(w):g.Ei(w),g.Ei(T),F.vc(P,E),F.length()==0))throw h.i.Ra();F.Jv(),F.normalize(),F.scale(this.sb),O.add(F,E),this.BD(g,E,T,O,!1)}return c.kx(g)},c.prototype.fE=function(d,f,g){if(this.ev(),1>d.Ka(f))return null;if(this.AG(d,f)&&0<this.La){g=new h.Ta,d.we(d.Ca(f),g);var w=new h.l;return d.Tj(f,w),g.Db(w.tf()),this.Iu(g)}if(w=new h.Ua(d.description),d.Pn(f))this.Bn(d,f,w,g,1),this.Bn(d,f,w,g,-1);else{var $=new h.Ua(d.description);$.addPath(d,f,!1),$.Fr(d,f,0,d.tv(f),!1),this.Bn($,0,w,g,1)}return this.An(w)},c.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw h.i.hu("user_canceled")},c.prototype.An=function(d){return h.Hg.Ok(d,this.dt,!0,!0,this.Vb)},c.prototype.lE=function(){if(this.xk==0)return this.Fq;var d=1-this.xk*Math.abs(this.Mv);return 4>(d=-1>d?4:2*Math.PI/Math.acos(d)+.5)?d=4:d>this.Fq&&(d=this.Fq),h.P.truncate(d)},c.prototype.BD=function(d,f,g,w,$){this.ev();var T=new h.h;T.vc(g,f),T.scale(this.Mv);var E=new h.h;E.vc(w,f),E.scale(this.Mv),0>(T=Math.atan2(T.y,T.x)/this.jA)&&(T=this.Jd.length+T),T=this.Jd.length-T,0>(E=Math.atan2(E.y,E.x)/this.jA)&&(E=this.Jd.length+E),(E=this.Jd.length-E)<T&&(E+=this.Jd.length);var O=h.P.truncate(E);E=h.P.truncate(Math.ceil(T)),(T=new h.h).N(this.Jd[E%this.Jd.length]),T.Dt(this.sb,f);var P=10*this.ra;for(T.sub(g),T.length()<P&&(E+=1),T.N(this.Jd[O%this.Jd.length]),T.Dt(this.sb,f),T.sub(w),T.length()<P&&--O,g=O-E,g++,O=0,E%=this.Jd.length;O<g;O++,E=(E+1)%this.Jd.length)T.N(this.Jd[E]),T.Dt(this.sb,f),d.Ei(T),this.Zq();$&&d.Ei(w)},c.prototype.Bn=function(d,f,g,w,$){var T=new h.hd,E=T.hN(d,f);if(T.Ip(this.oA,!1,!1),2>T.I(E))return 0>$||($=d,T=new h.Ta,$.we($.Ca(f),T),this.Au(g,T)),1;var O=T.Oa(T.Ya(T.Ob(E))),P=new h.Ed;if(P.ig(-O.x,-O.y),T.Pc(P),w&&(this.oQ(T,E,$),2>T.I(E)))return 0>$||($=d,T=new h.Ta,$.we($.Ca(f),T),this.Au(g,T)),1;this.$d.length=0;var R=T.Ob(E);f=T.Ya(R);var F=$==1?T.Na(f):T.V(f);d=$==1?T.V(f):T.Na(f);var V=!0;w=new h.h,E=new h.h;var L=new h.h,G=new h.h,J=new h.h,H=new h.h,te=new h.h,Q=new h.h,ae=new h.h,pe=new h.h,he=this.sb;R=T.Ka(R);for(var Ae=0;Ae<R;Ae++)T.D(d,E),V&&(T.D(f,w),T.D(F,L),Q.vc(w,L),Q.normalize(),pe.HG(Q),pe.scale(he),G.add(pe,w)),te.vc(E,w),te.normalize(),ae.HG(te),ae.scale(he),J.add(w,ae),F=Q.yi(te),V=Q.Sh(te),0>F||0>V&&F==0?this.$d.push(u.Su(G,J,w,2,this.$d.length+1,this.$d.length-1)):G.rb(J)||(this.$d.push(u.construct(G,w,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(u.construct(w,J,this.$d.length+1,this.$d.length-1,"dummy"))),H.add(E,ae),this.$d.push(u.Su(J,H,w,1,this.$d.length+1,this.$d.length-1)),G.N(H),pe.N(ae),L.N(w),w.N(E),Q.N(te),F=f,f=d,V=!1,d=$==1?T.V(f):T.Na(f);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(g),P.ig(O.x,O.y),g.TD(P,g.ea()-1),1},c.prototype.TV=function(d){for(var f=this.uO(),g=!0,w=f+1,$=f;w!=f;$=w){var T=this.$d[$];w=T.sh!=-1?T.sh:($+1)%this.$d.length,T.Eo!=0&&(g&&d.Nt(T.Km),T.Eo==2?this.BD(d,T.cw,T.Km,T.Xm,!0):d.Ei(T.Xm),g=!1)}},c.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var d=0,f=0,g=this.$d.length;f<g;){var w=this.$d[f];if(3&w.Eo){d=f;break}f=w.sh}for(g=d+1,f=d;g!=d;f=g){g=(w=this.$d[f]).sh;for(var $=1,T=null;g!=f&&!(3&(T=this.$d[g]).Eo);)g=T.sh,$++;$!=1&&(w.Eo&T.Eo)==1&&(this.Ns==null&&(this.Ns=new h.zb,this.nw=new h.zb),this.Ns.Ec(w.Km),this.Ns.Rc(w.Xm),this.nw.Ec(T.Km),this.nw.Rc(T.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(w.Xm.N(this.Ms[0]),T.Km.N(this.Ms[0]),w.sh=g,T.uh=f))}return d},c.prototype.Hv=function(d,f,g){var w=new h.h;if(w.vc(g,d),g=w.length(),0<(g=this.sb*this.sb-g*g*.25)){g=Math.sqrt(g),w.normalize(),w.cr();var $=new h.h;if($.vc(f,d),$.Sh(w)+g>=this.sb)return!0}return!1},c.prototype.oQ=function(d,f,g){for(var w=0;1>w;w++){var $=!1,T=d.Ob(f),E=d.Ka(T);if(E==0)break;var O=E;if(3>E)break;!d.ec(T)&&(O=E-1),T=d.Ya(T),E=0<g?d.Na(T):d.V(T);for(var P=0<g?d.V(T):d.Na(T),R=E,F=!0,V=new h.h,L=new h.h,G=new h.h,J=new h.h,H=new h.h,te=h.h.construct(0,0),Q=new h.h,ae=new h.h,pe=new h.h,he=new h.h,Ae=this.sb,ve=0,We=0;We<O&&(d.D(P,L),F&&(d.D(T,V),d.D(E,G),R=E),ae.vc(V,G),ae.normalize(),Q.vc(L,V),Q.normalize(),R!=P);){var Ve=ae.yi(Q),Te=ae.Sh(Q),Gt=!0;if(0>Ve||0>Te&&Ve==0||!this.Hv(G,V,L)||(te.N(L),Gt=!1,++ve,$=!0),Gt){if(0<ve)for(;(Ve=0<g?d.Na(R):d.V(R))!=T;){if(d.D(Ve,J),!this.Hv(J,G,te)){Ve!=P&&this.Hv(J,G,L)&&this.Hv(J,V,L)&&(G.N(J),R=Ve,Gt=!1,++ve);break}G.N(J),R=Ve,Gt=!1,++ve}if(!Gt)continue;if(0<ve){for(R=0<g?d.Na(E):d.V(E),F=1;F<ve;F++)Gt=0<g?d.Na(R):d.V(R),d.qd(R,!0),R=Gt;pe.vc(V,G),ve=Ae*Ae-(ve=pe.length())*ve*.25,Ae-(ve=Math.sqrt(ve))>.5*this.xk?(H.add(G,V),H.scale(.5),pe.normalize(),pe.cr(),he.N(pe),he.scale(Ae-ve),H.add(he),d.mf(E,H)):d.qd(E,!0),ve=0}G.N(V),R=T}V.N(L),E=T,T=P,P=0<g?d.V(T):d.Na(T),We++,F=!1}if(0<ve){for(R=0<g?d.Na(E):d.V(E),F=1;F<ve;F++)Gt=0<g?d.Na(R):d.V(R),d.qd(R,!0),R=Gt;H.add(G,V),H.scale(.5),pe.vc(V,G),ve=Ae*Ae-(ve=pe.length())*ve*.25,ve=Math.sqrt(ve),pe.normalize(),pe.cr(),he.N(pe),he.scale(Ae-ve),H.add(he),d.mf(E,H)}if(d.Ip(this.oA,!1,!1),!$)break}},c.prototype.AG=function(d,f){if(d.Ka(f)==1)return!0;var g=new h.l;return d.Tj(f,g),Math.max(g.S(),g.da())<.5*this.xk},c.prototype.zG=function(d){var f=new h.l;return d.A(f),Math.max(f.S(),f.da())<.5*this.xk},c.prototype.RV=function(d){for(var f=0,g=0,w=(d=h.zC.local().W(d,.25*this.xk,!1,this.Vb)).ea();g<w;g++)f=Math.max(d.Ka(g),f);return 32>f?(this.qq=!1,d):(this.qq=!0,h.Hg.Ok(d,this.dt,!1,!0,this.Vb))},c.prototype.Au=function(d,f){if(f=f.D(),this.Jd!=null&&this.Jd.length!==0){var g=new h.h;g.N(this.Jd[0]),g.Dt(this.sb,f),d.Nt(g);for(var w=1,$=this.Jd.length;w<$;w++)g.N(this.Jd[w]),g.Dt(this.sb,f),d.Ei(g)}else{w=this.lE(),g=h.P.truncate((w+3)/4),w=.5*Math.PI/g,$=Math.cos(w);for(var T=Math.sin(w),E=new h.h,O=3;0<=O;O--){switch(E.na(0,this.sb),O){case 0:for(w=0;w<g;w++)d.Aj(E.x+f.x,E.y+f.y),E.Ct($,T);break;case 1:for(w=0;w<g;w++)d.Aj(-E.y+f.x,E.x+f.y),E.Ct($,T);break;case 2:for(w=0;w<g;w++)d.Aj(-E.x+f.x,-E.y+f.y),E.Ct($,T);break;default:for(d.rx(E.y+f.x,-E.x+f.y),w=1;w<g;w++)E.Ct($,T),d.Aj(E.y+f.x,-E.x+f.y)}this.Zq()}}},c.kx=function(d){return d.Eh(1,0),d},c.prototype.oX=function(d){return d.Eh(2,this.ra),d.hm(),d},c}();h.CK=l}(U||(U={})),function(h){var k=function(){function b(u){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0)}return b.prototype.Nh=function(u,o,s){switch(o){case 0:if(u.v<s&&u.C<=s)break;return u.v>=s?1:-1;case 1:if(u.G<s&&u.H<=s)break;return u.G>=s?1:-1;case 2:if(u.v>=s&&u.C>s)break;return u.C<=s?1:-1;case 3:if(!(u.G>=s&&u.H>s))return u.H<=s?1:-1}return 0},b.prototype.vy=function(u,o){return u.K()==1736?this.xy(u,o):this.yy(u)},b.prototype.xy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var s=new h.l;u.yc(s),this.Y=this.g.Ib(u);var n=new h.l,l=new h.l,c=new h.h,d=new h.h,f=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0];new h.jg;var w=new h.zb,$=new h.ja(0);$.Jb(Math.min(100,u.I()));for(var T=!1,E=0;!T&&4>E;E++){var O=!1,P=(1&E)!=0,R=0;switch(E){case 0:R=this.Da.v,O=s.v<=R&&s.C>=R;break;case 1:R=this.Da.G,O=s.G<=R&&s.H>=R;break;case 2:R=this.Da.C,O=s.v<=R&&s.C>=R;break;case 3:R=this.Da.H,O=s.G<=R&&s.H>=R}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var F=-1,V=-1,L=this.g.Ya(O),G=L;do{var J=this.g.cc(G);J==null&&(J=w,this.g.D(G,c),J.Ec(c),this.g.D(this.g.V(G),d),J.Rc(d)),J.A(n);var H=this.Nh(n,E,R),te=0,Q=-1;if(H==-1){te=0<(J=J.fq(P,R,f,g))?this.g.Wl(G,g,J):0,te+=1;var ae=G,pe=this.g.V(ae);for(J=0;J<te;J++){if(this.g.D(ae,c),this.g.D(pe,d),(Q=this.g.cc(ae))==null&&((Q=w).Ec(c),Q.Rc(d)),Q.A(l),(Q=this.Nh(l,E,R))==-1){if(P)(Q=Math.abs(c.y-R))<(he=Math.abs(d.y-R))?(c.y=R,this.g.mf(ae,c)):(d.y=R,this.g.mf(pe,d));else{Q=Math.abs(c.x-R);var he=Math.abs(d.x-R);Q<he?(c.x=R,this.g.mf(ae,c)):(d.x=R,this.g.mf(pe,d))}(Q=this.g.cc(ae))==null&&((Q=w).Ec(c),Q.Rc(d)),Q.A(l),Q=this.Nh(l,E,R)}he=F,F=Q,V==-1&&(V=F),he==0&&F==1||he==1&&F==0||he!=0||F!=0||$.add(ae),F==1&&(T=!1),Q=ae=pe,pe=this.g.V(pe)}}te==0&&(he=F,F=H,V==-1&&(V=F),he==0&&F==1||he==1&&F==0||he!=0||F!=0||$.add(G),F==1&&(T=!1),Q=this.g.V(G)),G=Q}while(G!=L);for(V==0&&F==0&&$.add(L),J=0,F=$.size;J<F;J++)V=$.get(J),this.g.qd(V,!1);$.clear(!1),O=3>this.g.Ka(O)?this.g.ar(O):this.g.Sb(O)}}return T?u.Ja():(this.AB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},b.prototype.yy=function(u){var o=new h.l,s=new h.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new h.jg,d=u,f=new h.l;u.yc(f);for(var g=0;4>g;g++){var w=!1,$=(1&g)!=0,T=0;switch(g){case 0:T=this.Da.v,w=f.v<=T&&f.C>=T;break;case 1:T=this.Da.G,w=f.G<=T&&f.H>=T;break;case 2:T=this.Da.C,w=f.v<=T&&f.C>=T;break;case 3:T=this.Da.H,w=f.G<=T&&f.H>=T}if(w){w=d,d=u.Ja(),(w=w.Ha()).aj();for(var E,O=new h.h;w.ab();)for(var P,R=!0;w.Ia();){var F=w.ia();F.A(o);var V=this.Nh(o,g,T);if(V==-1){if(0<(V=F.fq($,T,n,l))){var L=0;E=F.bc();for(var G=0;G<=V;G++)if(L!=(P=G<V?l[G]:1)){F.dh(L,P,c);var J=c.get();J.Ec(E),G<V&&($?(O.x=n[G],O.y=T):(O.x=T,O.y=n[G]),J.Rc(O)),J.A(s);var H=this.Nh(s,g,T);if(H==-1){if(E=J.bc(),L=J.xc(),$)(H=Math.abs(E.y-T))<(te=Math.abs(L.y-T))?(E.y=T,J.Ec(E)):(L.y=T,J.Rc(L));else{H=Math.abs(E.x-T);var te=Math.abs(L.x-T);H<te?(E.x=T,J.Ec(E)):(L.x=T,J.Rc(L))}J.A(s),H=this.Nh(s,g,T)}E=J.xc(),L=P,(P=H)==1?(d.pc(J,R),R=!1):R=!0}}}else(P=V)==1?(d.pc(F,R),R=!1):R=!0}}}return d},b.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var s=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++,s=this.g.V(s))this.g.D(s,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(s,this.li,this.ed.size),this.ed.add(s));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},b.prototype.Hy=function(u){for(var o=new h.h,s=new h.h,n=h.P.mg(2048,0),l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l)){var c=this.g.Ya(l),d=c;do{var f=this.g.V(d);this.g.D(d,o);var g=-1;if(o.x==this.Da.v?(this.g.D(f,s),s.x==this.Da.v&&(g=1)):o.x==this.Da.C&&(this.g.D(f,s),s.x==this.Da.C&&(g=1)),o.y==this.Da.G?(this.g.D(f,s),s.y==this.Da.G&&(g=0)):o.y==this.Da.H&&(this.g.D(f,s),s.y==this.Da.H&&(g=0)),g!=-1&&(g=h.h.ub(o,s),!(1>=(g=h.P.truncate(Math.min(Math.ceil(g/u),2048)))))){for(var w=1;w<g;w++)n[w-1]=1*w/g;this.g.Wl(d,n,g-1)}d=f}while(d!=c)}},b.prototype.Xl=function(u,o){var s=this.g.Hd(),n=new h.h,l=new h.ja(0);l.Jb(100);for(var c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var d=this.g.Ya(c),f=0,g=this.g.Ka(c);f<g;f++){var w=this.g.V(d);this.g.D(d,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(this.g.Qa(d,s)!=1&&(l.add(d),this.g.Sa(d,s,1)),this.g.Qa(w,s)!=1&&(l.add(w),this.g.Sa(w,s,1)))),d=w}if(this.g.Ud(s),!(3>l.size)){var $=this;l.Wd(0,l.size,function(H,te){return $.Oh(H,te)}),s=new h.h,c=new h.h,d=new h.h,c.Sc();var T=-1;f=new h.ja(0),g=new h.ja(0),w=this.g.Hd();for(var E=this.g.Hd(),O=0,P=l.size;O<P;O++){var R=l.get(O);if(this.g.D(R,n),!n.rb(c)){if(T!=-1){for(var F=T;F<O;F++){T=l.get(F);var V=this.g.V(T);R=this.g.Na(T);var L=!1;0>this.Oh(T,V)&&(this.g.D(V,s),u?s.y==o:s.x==o)&&(f.add(T),L=!0,this.g.Sa(T,E,1)),0>this.Oh(T,R)&&(this.g.D(R,s),u?s.y==o:s.x==o)&&(L||f.add(T),this.g.Sa(T,w,1))}for(F=0,L=f.size;F<L;F++){if(T=f.get(F),R=this.g.Qa(T,w),V=this.g.Qa(T,E),R==1){R=this.g.Na(T),this.g.D(R,d);var G=[0];if(G[0]=0,!d.rb(n)){var J=h.h.ub(c,d);G[0]=h.h.ub(d,n)/J,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(R,G,1),R=this.g.Na(T),this.g.mf(R,n),g.add(R),this.g.Sa(R,w,1),this.g.Sa(R,E,-1)}}V==1&&(V=this.g.V(T),this.g.D(V,d),(G=[0])[0]=0,d.rb(n)||(J=h.h.ub(c,d),G[0]=h.h.ub(c,n)/J,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(T,G,1),R=this.g.V(T),this.g.mf(R,n),g.add(R),this.g.Sa(R,w,-1),this.g.Sa(R,E,1)))}T=f,f=g,(g=T).clear(!1)}T=O,c.N(n)}}this.g.Ud(w),this.g.Ud(E)}},b.prototype.Pl=function(u,o){var s=new h.h,n=new h.ja(0);n.Jb(100);for(var l=this.g.Hd(),c=0,d=this.ed.size;c<d;c++){var f=this.ed.get(c);if(f!=-1){var g=this.g.V(f);this.g.D(f,s),(u?s.y==o:s.x==o)&&(this.g.D(g,s),(u?s.y==o:s.x==o)&&(this.g.Qa(f,l)!=-2&&(n.add(f),this.g.Sa(f,l,-2)),this.g.Qa(g,l)!=-2&&(n.add(g),this.g.Sa(g,l,-2))))}}if(n.size!=0){var w=this;for(n.Wd(0,n.size,function(te,Q){return w.Oh(te,Q)}),c=0,d=n.size;c<d;c++){var $=n.get(c);this.g.Sa($,l,c)}f=new h.h,(g=new h.h).Sc();var T=-1;for(c=0,d=n.size;c<d;c++)if(($=n.get(c))!=-1&&(this.g.D($,s),!s.rb(g))){if(T!=-1)for(;;){$=!1;for(var E=1<c-T?c-1:c,O=T;O<E;O++){var P=n.get(O);if(P!=-1){var R=-1,F=this.g.V(P);0>this.Oh(P,F)&&(this.g.D(F,f),u?f.y==o:f.x==o)&&(R=F),F=-1;var V=this.g.Na(P);if(0>this.Oh(P,V)&&(this.g.D(V,f),u?f.y==o:f.x==o)&&(F=V),R!=-1&&F!=-1)this.Mh(P,n,l),this.g.qd(P,!1),this.Mh(R,n,l),this.g.qd(R,!1),$=!0;else if(R!=-1||F!=-1){for(V=O+1;V<c;V++){var L=n.get(V);if(L!=-1){var G=this.g.V(L),J=-1;0>this.Oh(L,G)&&(this.g.D(G,f),u?f.y==o:f.x==o)&&(J=G),G=this.g.Na(L);var H=-1;if(0>this.Oh(L,G)&&(this.g.D(G,f),u?f.y==o:f.x==o)&&(H=G),J!=-1&&H!=-1){this.Mh(L,n,l),this.g.qd(L,!1),this.Mh(J,n,l),this.g.qd(J,!1),$=!0;break}if(R!=-1&&H!=-1){this.At(n,P,R,L,H,l),$=!0;break}if(F!=-1&&J!=-1){this.At(n,L,J,P,F,l),$=!0;break}}}if($)break}}}if(!$)break}T=c,g.N(s)}}this.g.Ud(l)},b.prototype.Mh=function(u,o,s){s=this.g.Qa(u,s),o.set(s,-1),s=this.g.Qa(u,this.li),this.ed.set(s,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},b.prototype.At=function(u,o,s,n,l,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(s,l),this.g.Cc(l,s),this.Mh(n,u,c),this.g.oi(n,!1),this.Mh(l,u,c),this.g.oi(l,!0)},b.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var s=this.ed.get(u);s!=-1&&this.g.cj(s,-1)}for(var n=0,l=0,c=this.g.Ob(this.Y);c!=-1;){var d=this.g.Ya(c);if(d==-1||c!=this.g.cd(d)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{s=d,f=0;do this.g.cj(s,c),f++,s=this.g.V(s);while(s!=d);2>=f?(s=this.g.Qa(d,this.li),this.ed.set(s,-1),d=this.g.qd(d,!1),f==2&&(s=this.g.Qa(d,this.li),this.ed.set(s,-1),this.g.qd(d,!1)),f=c,c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)):(this.g.fp(c,!1),this.g.Yg(c,this.g.Na(d)),this.g.Xj(c,f),l+=f,n++,c=this.g.Sb(c))}}for(u=0,o=this.ed.size;u<o;u++)if((s=this.ed.get(u))!=-1&&(c=this.g.cd(s))==-1){c=this.g.wf(this.Y,-1),f=0,d=s;do this.g.cj(s,c),f++,s=this.g.V(s);while(s!=d);2>=f?(s=this.g.Qa(d,this.li),this.ed.set(s,-1),d=this.g.qd(d,!1),f==2&&(0<=(s=this.g.Qa(d,this.li))&&this.ed.set(s,-1),this.g.qd(d,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,d),this.g.Yg(c,this.g.Na(d)),this.g.fp(c,!1),l+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,l),u=0,o=this.g.md;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.XB(u)},b.wy=function(u,o,s){return new b(o).vy(u,s)},b.clip=function(u,o,s,n){if(u.B())return u;if(o.B())return u.Ja();if((s=u.K())==33)return n=u.D(),o.contains(n)?u:u.Ja();if(s==197)return n=new h.l,u.A(n),n.Fa(o)?(o=new h.Hh,u.copyTo(o),o.Zo(n),o):u.Ja();var l=new h.l;if(u.yc(l),o.contains(l))return u;if(!o.isIntersecting(l))return u.Ja();if((l=u.Cb)!=null&&(l=l.Hk)!=null){if((l=l.To(o))==1){if(s!=1736)throw h.i.Ra();return(u=new h.Ea(u.description)).vp(o),u}if(l==0)return u.Ja()}switch(s){case 550:s=null,l=u.I();for(var c=u.vb(0),d=0,f=0;f<l;f++)n=new h.h,c.uc(2*f,n),o.contains(n)||(d==0&&(s=u.Ja()),d<f&&s.Gd(u,d,f),d=f+1);return 0<d&&s.Gd(u,d,l),d==0?u:s;case 1736:case 1607:return b.wy(u,o,n);default:throw h.i.Ra()}},b.prototype.Oh=function(u,o){var s=new h.h;return this.g.D(u,s),u=new h.h,this.g.D(o,u),s.compare(u)},b}();h.Vd=k}(U||(U={})),function(h){var k=function(){function b(u,o){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0),this.od=o}return b.prototype.Nh=function(u,o,s){switch(o){case 0:if(u.v<s&&u.C<=s)break;return u.v>=s?1:-1;case 1:if(u.G<s&&u.H<=s)break;return u.G>=s?1:-1;case 2:if(u.v>=s&&u.C>s)break;return u.C<=s?1:-1;case 3:if(!(u.G>=s&&u.H>s))return u.H<=s?1:-1}return 0},b.prototype.vy=function(u,o){return u.K()==1736?this.xy(u,o):this.yy(u)},b.prototype.xy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var s=new h.l;u.yc(s),this.Y=this.g.Ib(u);var n=new h.l,l=new h.l,c=new h.h,d=new h.h,f=[0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0],w=new h.zb,$=new h.ja(0);$.Jb(256);for(var T=!1,E=0;!T&&4>E;E++){var O=!1,P=(1&E)!=0,R=0;switch(E){case 0:R=this.Da.v,O=s.v<=R&&s.C>=R;break;case 1:R=this.Da.G,O=s.G<=R&&s.H>=R;break;case 2:R=this.Da.C,O=s.v<=R&&s.C>=R;break;case 3:R=this.Da.H,O=s.G<=R&&s.H>=R}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var F=!0,V=-1,L=-1,G=this.g.Ya(O),J=G;do{var H=this.g.cc(J);H==null&&(H=w,this.g.D(J,c),H.Ec(c),this.g.D(this.g.V(J),d),H.Rc(d)),H.A(n);var te=this.Nh(n,E,R),Q=0,ae=-1;if(te==-1){Q=0<(H=H.fq(P,R,f,g))?this.g.HX(J,g,H):0,Q+=1;var pe=J,he=this.g.V(pe);for(H=0;H<Q;H++){if(this.g.D(pe,c),this.g.D(he,d),(ae=this.g.cc(pe))==null&&((ae=w).Ec(c),ae.Rc(d)),ae.A(l),(ae=this.Nh(l,E,R))==-1){if(P)(ae=Math.abs(c.y-R))<(Ae=Math.abs(d.y-R))?(c.y=R,this.g.mf(pe,c)):(d.y=R,this.g.mf(he,d));else{ae=Math.abs(c.x-R);var Ae=Math.abs(d.x-R);ae<Ae?(c.x=R,this.g.mf(pe,c)):(d.x=R,this.g.mf(he,d))}(ae=this.g.cc(pe))==null&&((ae=w).Ec(c),ae.Rc(d)),ae.A(l),ae=this.Nh(l,E,R)}Ae=V,V=ae,L==-1&&(L=V),Ae==0&&V==1||Ae==1&&V==0||Ae!=0||V!=0||$.add(pe),V==1&&(F=T=!1),ae=pe=he,he=this.g.V(he)}}if(Q==0&&(Ae=V,V=te,L==-1&&(L=V),Ae==0&&V==1||Ae==1&&V==0||Ae!=0||V!=0||$.add(J),V==1&&(F=T=!1),ae=this.g.V(J)),J=ae,256<=$.size){for(H=1,te=$.size-1;H<te;H++)Q=$.get(H),this.g.qd(Q,!1);$.set(1,$.Gc()),$.Dh(2)}}while(J!=G);if(!F)for(L==0&&V==0&&$.add(G),H=0,te=$.size;H<te;H++)Q=$.get(H),this.g.qd(Q,!1);$.clear(!1),O=F||this.g.Ka(O)==0?this.g.ar(O):this.g.Sb(O)}}return T?u.Ja():(this.AB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},b.prototype.yy=function(u){var o=new h.l,s=new h.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new h.jg,d=u,f=new h.l;u.yc(f);for(var g=new h.h,w=new h.h,$=null,T=null,E=0;4>E;E++){var O=!1,P=(1&E)!=0,R=0;switch(E){case 0:R=this.Da.v,O=f.v<=R&&f.C>=R;break;case 1:R=this.Da.G,O=f.G<=R&&f.H>=R;break;case 2:R=this.Da.C,O=f.v<=R&&f.C>=R;break;case 3:R=this.Da.H,O=f.G<=R&&f.H>=R}if(O)for(O=d,d=u.Ja(),(O=O.Ha()).aj();O.ab();)for(var F,V=!0;O.Ia();){var L=O.ia();L.A(o);var G=this.Nh(o,E,R);if(G==-1){if(0<(G=L.fq(P,R,n,l))){var J=0;L.$p(g);for(var H=0;H<=G;H++)if(J!=(F=H<G?l[H]:1)){L.dh(J,F,c);var te=c.get();te.Ec(g),H<G&&(P?(w.x=n[H],w.y=R):(w.x=R,w.y=n[H]),te.Rc(w)),te.A(s);var Q=this.Nh(s,E,R);Q==-1&&($==null&&($=new h.h),T==null&&(T=new h.h),te.$p($),te.Vr(T),P?(J=Math.abs($.y-R))<(Q=Math.abs(T.y-R))?($.y=R,te.Ec($)):(T.y=R,te.Rc(T)):(J=Math.abs($.x-R))<(Q=Math.abs(T.x-R))?($.x=R,te.Ec($)):(T.x=R,te.Rc(T)),te.A(s),Q=this.Nh(s,E,R)),te.Vr(g),J=F,(F=Q)==1?(d.pc(te,V),V=!1):V=!0}}}else(F=G)==1?(d.pc(L,V),V=!1):V=!0}}return d},b.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var s=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++,s=this.g.V(s))this.g.D(s,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(s,this.li,this.ed.size),this.ed.add(s));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},b.prototype.Hy=function(u){for(var o=new h.h,s=new h.h,n=null,l=null,c=h.P.mg(2048,0),d=this.g.Ob(this.Y);d!=-1;d=this.g.Sb(d)){var f=this.g.Ya(d),g=f;do{var w=this.g.V(g);this.g.D(g,o);var $=-1;if(o.x==this.Da.v?(this.g.D(w,s),s.x==this.Da.v&&($=1)):o.x==this.Da.C&&(this.g.D(w,s),s.x==this.Da.C&&($=1)),o.y==this.Da.G?(this.g.D(w,s),s.y==this.Da.G&&($=0)):o.y==this.Da.H&&(this.g.D(w,s),s.y==this.Da.H&&($=0)),$!=-1){if(n==null&&(n=new h.h),l==null&&(l=new h.h),n.N(o),l.na(0,0),$==0){var T=o.x-this.Da.v;l.x=h.mc.sign(s.x-o.x),n.x=u*h.mc.En(Math.floor(Math.abs(T/u)),T)+this.Da.v,0>n.x&&(n.x+=u)}else T=o.y-this.Da.G,l.y=h.mc.sign(s.y-o.y),n.y=u*h.mc.En(Math.floor(Math.abs(T/u)),T)+this.Da.G,0>n.y&&(n.y+=u);T=$!=0?s.y-o.y:s.x-o.x;var E=Math.abs(T);if(65536<E/u)throw h.i.ga("internal error");if(0<E){E=h.P.truncate(E/u)+2,c.length<E&&(c=h.P.mg(E));for(var O=E=0;;O++){var P=new h.h;if(P.x=n.x+l.x*O*u,P.y=n.y+l.y*O*u,1<=(P=($!=0?P.y-o.y:P.x-o.x)/T))break;0>=P||(c[E]=P,E++)}E!=0&&this.g.Wl(g,c,E)}}g=w}while(g!=f)}},b.prototype.Xl=function(u,o){for(var s=-1,n=new h.h,l=null,c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var d=this.g.Ya(c),f=0,g=this.g.Ka(c);f<g;f++){var w=this.g.V(d);this.g.D(d,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(s==-1&&(s=this.g.Hd()),l==null&&(l=new h.ja(0)).Jb(100),this.g.Qa(d,s)!=1&&(l.add(d),this.g.Sa(d,s,1)),this.g.Qa(w,s)!=1&&(l.add(w),this.g.Sa(w,s,1)))),d=w}if(s!=-1&&this.g.Ud(s),!(l==null||3>l.size)){var $=this;l.Wd(0,l.size,function(H,te){return $.Oh(H,te)}),s=new h.h,c=new h.h,d=new h.h,c.Sc();var T=-1;f=new h.ja(0),g=new h.ja(0),w=null;for(var E=this.g.Hd(),O=this.g.Hd(),P=0,R=l.size;P<R;P++){var F=l.get(P);if(this.g.D(F,n),!n.rb(c)){if(T!=-1){for(var V=T;V<P;V++){T=l.get(V);var L=this.g.V(T);F=this.g.Na(T);var G=!1;this.g.D(L,s),0>c.compare(s)&&(u?s.y==o:s.x==o)&&(f.add(T),G=!0,this.g.Sa(T,O,1)),this.g.D(F,s),0>c.compare(s)&&(u?s.y==o:s.x==o)&&(G||f.add(T),this.g.Sa(T,E,1))}for(V=0,G=f.size;V<G;V++){if(T=f.get(V),F=this.g.Qa(T,E),L=this.g.Qa(T,O),F==1&&(F=this.g.Na(T),this.g.D(F,d),!d.rb(n))){w==null&&(w=[]);var J=h.h.ub(c,d);w[0]=h.h.ub(d,n)/J,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Wl(F,w,1),F=this.g.Na(T),this.g.mf(F,n),g.add(F),this.g.Sa(F,E,1),this.g.Sa(F,O,-1)}L==1&&(L=this.g.V(T),this.g.D(L,d),d.rb(n)||(w==null&&(w=[]),J=h.h.ub(c,d),w[0]=h.h.ub(c,n)/J,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Wl(T,w,1),F=this.g.V(T),this.g.mf(F,n),g.add(F),this.g.Sa(F,E,-1),this.g.Sa(F,O,1)))}T=f,f=g,(g=T).clear(!1)}T=P,c.N(n)}}this.g.Ud(E),this.g.Ud(O)}},b.prototype.Pl=function(u,o){for(var s=new h.h,n=null,l=-1,c=0,d=this.ed.size;c<d;c++){var f=this.ed.get(c);if(f!=-1){var g=this.g.V(f);this.g.D(f,s),(u?s.y==o:s.x==o)&&(this.g.D(g,s),(u?s.y==o:s.x==o)&&(l==-1&&(l=this.g.Hd()),n==null&&(n=new h.ja(0)).Jb(100),this.g.Qa(f,l)!=-2&&(n.add(f),this.g.Sa(f,l,-2)),this.g.Qa(g,l)!=-2&&(n.add(g),this.g.Sa(g,l,-2))))}}if(n==null)l!=-1&&this.g.Ud(l);else{var w=this;for(n.Wd(0,n.size,function(te,Q){return w.Oh(te,Q)}),c=0,d=n.size;c<d;c++){var $=n.get(c);this.g.Sa($,l,c)}f=new h.h,(g=new h.h).Sc();var T=-1;for(c=0,d=n.size;c<d;c++)if(($=n.get(c))!=-1&&(this.g.D($,s),!s.rb(g))){if(T!=-1)for(;;){$=!1;for(var E=1<c-T?c-1:c,O=T;O<E;O++){var P=n.get(O);if(P!=-1){var R=-1,F=this.g.V(P);this.g.D(F,f),0>g.compare(f)&&(u?f.y==o:f.x==o)&&(R=F),F=-1;var V=this.g.Na(P);if(this.g.D(V,f),0>g.compare(f)&&(u?f.y==o:f.x==o)&&(F=V),R!=-1&&F!=-1)this.Mh(P,n,l),this.g.qd(P,!1),this.Mh(R,n,l),this.g.qd(R,!1),$=!0;else if(R!=-1||F!=-1){for(V=O+1;V<c;V++){var L=n.get(V);if(L!=-1){var G=this.g.V(L),J=-1;this.g.D(G,f),0>g.compare(f)&&(u?f.y==o:f.x==o)&&(J=G),G=this.g.Na(L);var H=-1;if(this.g.D(G,f),0>g.compare(f)&&(u?f.y==o:f.x==o)&&(H=G),J!=-1&&H!=-1){this.Mh(L,n,l),this.g.qd(L,!1),this.Mh(J,n,l),this.g.qd(J,!1),$=!0;break}if(R!=-1&&H!=-1){this.At(n,P,R,L,H,l),$=!0;break}if(F!=-1&&J!=-1){this.At(n,L,J,P,F,l),$=!0;break}}}if($)break}}}if(!$)break}T=c,g.N(s)}this.g.Ud(l)}},b.prototype.Mh=function(u,o,s){s=this.g.Qa(u,s),o.set(s,-1),s=this.g.Qa(u,this.li),this.ed.set(s,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},b.prototype.At=function(u,o,s,n,l,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(s,l),this.g.Cc(l,s),this.Mh(n,u,c),this.g.oi(n,!1),this.Mh(l,u,c),this.g.oi(l,!0)},b.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var s=this.ed.get(u);s!=-1&&this.g.cj(s,-1)}for(var n=0,l=0,c=this.g.Ob(this.Y);c!=-1;){var d=this.g.Ya(c);if(d==-1||c!=this.g.cd(d)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{s=d,f=0;do this.g.cj(s,c),f++,s=this.g.V(s);while(s!=d);this.g.fp(c,!1),this.g.Yg(c,this.g.Na(d)),this.g.Xj(c,f),l+=f,n++,c=this.g.Sb(c)}}for(u=0,o=this.ed.size;u<o;u++)if((s=this.ed.get(u))!=-1&&(c=this.g.cd(s))==-1){c=this.g.wf(this.Y,-1),f=0,d=s;do this.g.cj(s,c),f++,s=this.g.V(s);while(s!=d);2>=f?(s=this.g.Qa(d,this.li),this.ed.set(s,-1),d=this.g.qd(d,!1),f==2&&(0<=(s=this.g.Qa(d,this.li))&&this.ed.set(s,-1),this.g.qd(d,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,d),this.g.Yg(c,this.g.Na(d)),this.g.fp(c,!1),l+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,l),u=0,o=this.g.md;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.XB(u)},b.wy=function(u,o,s,n){return new b(o,n).vy(u,s)},b.clip=function(u,o,s,n,l){return b.Pu(u,o,null,s,n,l)},b.Pu=function(u,o,s,n,l,c){var d=u.K();if(d==33)return l=u.D(),o.contains(l)?u:u.Ja();if(d==197)return l=new h.l,u.A(l),l.Fa(o)?(o=new h.Hh,u.copyTo(o),o.Zo(l),o):u.Ja();if(u.B())return u;if(o.B())return u.Ja();var f=new h.l;if(u.yc(f),o.contains(f))return u;if(!o.isIntersecting(f))return u.Ja();if((s!=null||isNaN(n))&&h.ua.oy(s,o,!1),!h.ba.zj(d))throw h.i.O();if((s=u.Cb)!=null&&(s=s.Hk)!=null){if((s=s.To(o))==1){if(d!=1736)throw h.i.ga("internal error");return(u=new h.Ea(u.description)).vp(o),u}if(s==0)return u.Ja()}switch(d){case 550:for(c=null,d=u.I(),s=u.vb(0),n=0,l=new h.h,f=0;f<d;f++)s.uc(2*f,l),o.contains(l)||(n==0&&(c=u.Ja()),n<f&&c.Gd(u,n,f),n=f+1);return 0<n&&c.Gd(u,n,d),n==0?u:c;case 1736:case 1607:return b.wy(u,o,l,c);default:throw h.i.ga("internal error")}},b.prototype.Oh=function(u,o){var s=new h.h;return this.g.D(u,s),u=new h.h,this.g.D(o,u),s.compare(u)},b}();h.ti=k}(U||(U={})),function(h){var k=new h.h,b=function(){function o(s,n,l,c,d){this.Rm=new h.h,this.Fk=new h.h,this.Ri=new h.h,this.g=s,this.Cw=l,this.po=c,this.Rm=n,this.Al=d,this.Fk.Sc(),this.Ri.Sc()}return o.prototype.sE=function(s){this.g.D(s,this.Fk),s=h.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var n=h.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return u.eG(s,n)},o.prototype.ez=function(s){return this.g.Qa(s,this.Al)},o.prototype.Ky=function(s,n){return this.g.D(s,this.Fk),this.g.D(n,this.Ri),u.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},o}();h.oY=function(){};var u=function(){function o(){this.Rm=new h.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return o.dQ=function(s,n){var l=new o;return l.g=s,l.ra=n,l.Cw=n*n,l.bw=2*n,l.po=1/l.bw,l.wO()},o.Ev=function(s,n,l,c,d){return(s-=l)*s+(n-=c)*n<=d},o.eG=function(s,n){return h.P.Vh(n,h.P.Vh(s))},o.prototype.yO=function(s,n){this.g.Hc(s,k);for(var l=(k.y-this.Rm.y)*this.po,c=h.P.truncate((k.x-this.Rm.x)*this.po),d=h.P.truncate(l),f=l=0;1>=f;f+=1)for(var g=0;1>=g;g+=1){var w=o.eG(c+f,d+g),$=this.zl.lR(w);$!=-1&&(this.rq[l]=$,this.zs[l]=w,l++)}for(c=l-1;1<=c;c--)for($=this.rq[c],d=c-1;0<=d;d--)if($==this.rq[d]){this.zs[d]=-1,c!=--l&&(this.zs[c]=this.zs[l],this.rq[c]=this.rq[l]);break}for(d=0;d<l;d++)this.zO(s,this.zs[d],k,this.rq[d],n)},o.prototype.zO=function(s,n,l,c,d){for(var f=new h.h;c!=-1;c=this.zl.zR(c)){var g=this.zl.ka(c);s==g||n!=-1&&this.g.Qa(g,this.Al)!=n||(this.g.Hc(g,f),o.Ev(l.x,l.y,f.x,f.y,this.Cw)&&d.add(c))}},o.prototype.Zm=function(s,n,l){var c=this.g.Qa(s,this.so),d=this.g.Qa(n,this.so);return c==-1&&(c=this.Ad.Rh(),this.Ad.addElement(c,s),this.g.Sa(s,this.so,c)),d==-1?this.Ad.addElement(c,n):this.Ad.Cy(c,d),this.g.Sa(n,this.so,-2),n=this.TT(s,n),l&&(l=this.mw.sE(s),this.g.Sa(s,this.Al,l)),n},o.RT=function(s,n,l){s.Nb(n),l=s;var c=new h.h;o.ST(s.D(),n.D(),c),l.Db(c)},o.ST=function(s,n,l){var c=s.x;s.x!=n.x&&(c=(1*s.x+1*n.x)/2);var d=s.y;s.y!=n.y&&(d=(1*s.y+1*n.y)/2),l.na(c,d)},o.prototype.TT=function(s,n){var l=new h.h;this.g.D(s,l);var c=new h.h;this.g.D(n,c);var d=this.g.YF(s),f=d+(n=this.g.YF(n)),g=0,w=l.x;l.x!=c.x&&(w=(l.x*d+c.x*n)/f,g++);var $=l.y;return l.y!=c.y&&($=(l.y*d+c.y*n)/f,g++),0<g&&this.g.Db(s,w,$),this.g.rX(s,f),g!=0},o.prototype.wO=function(){var s=this.g.gd,n=this.g.DF();for(this.Rm=n.hz(),n=Math.max(n.da(),n.S())/2147483646,this.bw<n&&(this.bw=n,this.po=1/this.bw),this.Ad=new h.cu,this.Ad.Bt(h.P.truncate(this.g.gd/3+1)),this.Ad.hn(h.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new b(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new h.ZK(h.P.truncate(4*s/3),this.mw),this.zl.vW(this.g.gd),s=!1,n=this.g.md;n!=-1;n=this.g.ve(n))for(var l=this.g.Ob(n);l!=-1;l=this.g.Sb(l))for(var c=this.g.Ya(l),d=0,f=this.g.Ka(l);d<f;d++){var g=this.mw.sE(c);this.g.Sa(c,this.Al,g),this.zl.addElement(c,g),c=this.g.V(c)}var w=new h.ja(0);for(w.Jb(10),n=this.g.md;n!=-1;n=this.g.ve(n))for(l=this.g.Ob(n);l!=-1;l=this.g.Sb(l))for(c=this.g.Ya(l),d=0,f=this.g.Ka(l);d<f;d++){if(this.g.Qa(c,this.so)!=-2)for(g=this.g.Qa(c,this.Al),this.zl.kd(c,g);this.yO(c,w),w.size!=0;){g=!1;for(var $=0,T=w.size;$<T;$++){var E=w.get($),O=this.zl.ka(E);this.zl.wd(E),g=this.Zm(c,O,$+1==T)||g}if(s=s||g,w.clear(!1),!g)break}c=this.g.V(c)}return s&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),s},o.prototype.qN=function(){for(var s=new h.h,n=this.Ad.ke;n!=-1;n=this.Ad.lz(n)){var l=this.Ad.sc(n);for(this.g.D(this.Ad.ka(l),s),l=this.Ad.lb(l);l!=-1;l=this.Ad.lb(l))this.g.mf(this.Ad.ka(l),s)}},o}();h.$t=u}(U||(U={})),function(h){var k=function(){function b(u){u===void 0&&(u=null),this.zg=null,this.Pb=!1,this.zg=u===null?[]:u}return b.prototype.copyTo=function(u){if(u.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");for(var o=0;o<this.zg.length;o++)u.zg.push(this.zg[o].Qf())},b.prototype.count=function(){return this.zg.length},b.prototype.add=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(u.Qf())},b.prototype.clear=function(){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},b.prototype.remove=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(u,1)},b.prototype.kg=function(){var u=new b;return this.copyTo(u),u},b.prototype.Qf=function(){return this.kg()},b.prototype.transform=function(u,o,s,n){if(u.length<o)throw h.i.ga("invalid Argument");var l=s;for(s=0;s<this.zg.length;s++){var c=this.zg[s];if(c.sm()!=null){var d=c.Wn,f=d?1:0,g=d?c.sm().getGeogcs2():c.sm().getGeogcs1();if(g=l/(g=g.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(g-1))for(l=0;l<o;l++)u[l][0]*=g,u[l][1]*=g;h.HC.geogToGeog(c.sm(),o,u,null,f),l=(d?c.sm().getGeogcs1():c.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(g=l/n,3552713678800501e-30<Math.abs(g-1))for(l=0;l<o;l++)u[l][0]*=g,u[l][1]*=g;return o},b.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof b)||this.zg.length!=u.zg.length)return!1;for(var o=0;o<this.zg.length;o++)if(!this.zg[o].Nb(u.zg[o]))return!1;return!0},b.prototype.ix=function(){this.Pb=!0},b.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",o=0,s=this.count();o<s;++o)u+=this.zg[o].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},b.create=function(){return new b},b}();h.rC=k}(U||(U={})),function(h){var k,b=Math.PI,u=2*Math.PI,o=Math.PI/2,s=function(){function c(){}return c.OO=function(d,f){var g=new c;return g.x=d,g.y=f,g.type=0,g.Wh=0,g},c.cl=function(d){var f=new c;return f.x=d.x,f.y=d.y,f.type=0,f.Wh=0,f},c.NO=function(d){var f=new c;return f.x=d.x,f.y=d.y,f.type=d.type,f.Wh=d.Wh,f},c.Qd=function(d,f,g){var w=new c;return w.x=d.x+f*Math.cos(g),w.y=d.y+f*Math.sin(g),w.type=d.type,w.Wh=d.Wh,w},c.Ru=function(d,f){var g=new c;return g.x=.5*(d.x+f.x),g.y=.5*(d.y+f.y),g.type=d.type,g.Wh=d.Wh,g},c.OE=function(d,f){var g=new c;return g.x=d.x+.001*(f.x-d.x),g.y=d.y+.001*(f.y-d.y),g.type=d.type,g.Wh=d.Wh,g},c}(),n=function(){};(k=h.aL||(h.aL={}))[k.Round=0]="Round",k[k.Bevel=1]="Bevel",k[k.Miter=2]="Miter",k[k.Square=3]="Square";var l=function(){function c(d){this.IA=this.Zb=this.xg=null,this.od=d}return c.W=function(d,f,g,w,$,T){if(d==null||1>d.Eb())throw h.i.O();return f==0||d.B()?d:((T=new c(T)).mo=d,T.La=f,T.ra=$,T.Mi=g,T.xA=w,T.Qx())},c.prototype.$L=function(){var d=this.mo,f=d.bc(),g=d.xc(),w=new h.h;return w.vc(g,f),w.normalize(),w.Jv(),w.scale(this.La),f.add(w),g.add(w),w=d.Ja(),d.Ec(f),d.Rc(g),w},c.prototype.ZL=function(){var d=this.mo;if(0<this.La&&this.Mi!=2){var f=new h.Ea;return f.bd(d,!1),this.mo=f,this.Qx()}return(d=new h.Hh(d.aa)).X(this.La,this.La),d},c.prototype.oJ=function(d,f,g,w){return(f.x-d.x)*(w.x-g.x)+(f.y-d.y)*(w.y-g.y)},c.prototype.hc=function(d,f){if(f===void 0)this.Zb.push(d),this.gf++;else if(this.gf==0)this.hc(d);else{var g=this.Dw,w=this.xg[f==0?g-1:f-1],$=this.xg[f],T=this.oJ(w,$,this.Zb[this.gf-1],d);0<T?this.hc(d):0>T&&(0<this.oJ(w,$,$,this.Zb[this.gf-1])?($=this.xg[f==0?g-2:f==1?g-1:f-2],g=s.Qd(w,this.La,Math.atan2(w.y-$.y,w.x-$.x)-o),this.Zb[this.gf-1]=g,this.Mi==1||this.Mi==2?(g=s.Ru(g,w),this.hc(g),g=s.Qd(w,this.La,this.Lv+o),(w=s.Ru(g,w)).type|=256,this.hc(w)):(g=s.Qd(w,this.La,this.Lv+o)).type|=256,this.hc(g),this.hc(d,f)):(g=s.Qd($,this.La,this.Lv+o),this.hc(g),this.Mi==1||this.Mi==2?(g=s.Ru(g,$),this.hc(g),g=s.Qd($,this.La,this.Wz-o),(w=s.Ru(g,$)).type|=256,this.hc(w)):(g=s.Qd($,this.La,this.Wz-o)).type|=256,this.hc(g)))}},c.prototype.hE=function(){var d,f=this.Dw;this.gf=0;var g=.5*this.ra,w=0,$=0;for(d=0;d<f;d++){var T=this.xg[d],E=d==0?this.xg[f-1]:this.xg[d-1],O=d==f-1?this.xg[0]:this.xg[d+1],P=E.x-T.x,R=E.y-T.y,F=O.x-T.x,V=O.y-T.y,L=Math.atan2(R,P),G=Math.atan2(V,F);if(this.Lv=L,this.Wz=G,d==0&&(w=L,$=G),P=P*V-F*R,R=G,G<L&&(G+=u),0<P*this.La)this.Mi==1||this.Mi==2?(L=s.Qd(T,this.La,L+o),this.hc(L),L=s.OE(T,L),this.hc(L),L=s.Qd(T,this.La,G-o),(T=s.OE(T,L)).type|=256,this.hc(T),this.hc(L)):(P=.5*(G-L),P=this.La/Math.abs(Math.sin(P)),L=s.Qd(T,P,.5*(L+G)),this.hc(L,d));else if(512&T.type){for(P=1-g/Math.abs(this.La),E=1,O=0>this.La?-b:b,-1<P&&1>P&&(.017453292519943295>(R=2*Math.acos(P))&&(R=.017453292519943295),1<(E=h.P.truncate(b/R+1.5))&&(O/=E)),R=L+o,L=s.Qd(T,this.La,R),d==0&&(L.type|=1024),this.hc(L,d),P=this.La/Math.cos(O/2),R+=O/2,(L=s.Qd(T,P,R)).type|=1024,this.hc(L);0<--E;)R+=O,(L=s.Qd(T,P,R)).type|=1024,this.hc(L);(L=s.Qd(T,this.La,G-o)).type|=1024,this.hc(L)}else if(this.Mi==1)L=s.Qd(T,this.La,L+o),this.hc(L,d),L=s.Qd(T,this.La,G-o),this.hc(L);else if(this.Mi==0)for(P=1-g/Math.abs(this.La),E=1,O=G-o-(L+o),-1<P&&1>P&&(.017453292519943295>(R=2*Math.acos(P))&&(R=.017453292519943295),1<(E=h.P.truncate(Math.abs(O)/R+1.5))&&(O/=E)),P=this.La/Math.cos(.5*O),R=L+o+.5*O,L=s.Qd(T,P,R),this.hc(L,d);0<--E;)R+=O,L=s.Qd(T,P,R),this.hc(L);else this.Mi==2?(P=E.x-T.x,R=E.y-T.y,.99999999<(E=(P*(F=O.x-T.x)+R*(V=O.y-T.y))/Math.sqrt(P*P+R*R)/Math.sqrt(F*F+V*V))?(L=s.Qd(T,1.4142135623730951*this.La,G-.25*b),this.hc(L,d),L=s.Qd(T,1.4142135623730951*this.La,G+.25*b),this.hc(L)):(E=Math.abs(this.La/Math.sin(.5*Math.acos(E))))>(O=Math.abs(this.xA*this.La))?(P=.5*(G-L),P=this.La/Math.abs(Math.sin(P)),L=s.Qd(T,P,.5*(L+G)),G=h.h.construct(L.x,L.y),L=h.h.construct(T.x,T.y),(T=new h.h).vc(G,L),(G=new h.h).BW(O/T.length(),T,L),L=(E-O)*Math.abs(this.La)/Math.sqrt(E*E-this.La*this.La),0<this.La?T.Jv():T.cr(),T.scale(L/T.length()),(L=new h.h).add(G,T),(E=new h.h).vc(G,T),L=s.cl(L),this.hc(L,d),L=s.cl(E),this.hc(L)):(P=.5*(G-L),P=this.La/Math.abs(Math.sin(P)),L=s.Qd(T,P,.5*(L+G)),this.hc(L,d))):(G=R,0<this.La?(G>L&&(G-=u),E=L-G<o):(G<L&&(G+=u),E=G-L<o),E?(R=0>(P=1.4142135623730951*this.La)?L+.25*b:L+.75*b,L=s.Qd(T,P,R),this.hc(L,d),R=0>P?G-.25*b:G-.75*b,L=s.Qd(T,P,R),this.hc(L)):(P=.5*(G-L),P=this.La/Math.abs(Math.sin(P)),G<L&&(G+=u),L=s.Qd(T,P,(L+G)/2),this.hc(L,d)))}return this.Lv=w,this.Wz=$,this.hc(this.Zb[0],0),T=s.NO(this.Zb[this.gf-1]),this.Zb[0]=T,this.rW()},c.prototype.Cu=function(d,f){if(!(2>f))for(var g=0;g<f;g++){var w=this.Zb[d+g];g!=0?this.IA.Ei(h.h.construct(w.x,w.y)):this.IA.Nt(h.h.construct(w.x,w.y))}},c.prototype.aM=function(d,f,g){var w=d.Ca(f),$=d.Wc(f);if(this.Zb=[],this.IA=g,d.ec(f)){for(f=d.Oa(w);d.Oa($-1).rb(f);)$--;if(2<=$-w){for(this.Dw=$-w,this.xg=[],f=w;f<$;f++)this.xg.push(s.cl(d.Oa(f)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(f=d.Oa(w);w<$&&d.Oa(w+1).rb(f);)w++;for(f=d.Oa($-1);w<$&&d.Oa($-2).rb(f);)$--;if(2<=$-w){for(this.Dw=2*($-w)-2,this.xg=[],(g=s.cl(d.Oa(w))).type|=1536,this.xg.push(g),f=w+1;f<$-1;f++)g=s.cl(d.Oa(f)),this.xg.push(g);for((g=s.cl(d.Oa($-1))).type|=512,this.xg.push(g),f=$-2;f>=w+1;f--)(g=s.cl(d.Oa(f))).type|=1024,this.xg.push(g);if(this.hE())if(2<=this.Zb.length){for(d=-1,($=(1024&this.Zb[this.gf-1].type)!=0)||(d=0),f=1;f<this.gf;f++)(w=(1024&this.Zb[f].type)!=0)?$||1<($=f-1)-d+1&&this.Cu(d,$-d+1):$&&(d=f-1),$=w;$||1<($=this.gf-1)-d+1&&this.Cu(d,$-d+1)}else d=0,$=this.gf-1,0<=d&&1<=$-d&&this.Cu(d,$-d+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},c.prototype.rW=function(){for(var d=!1,f=0;f<this.gf;f++){var g=this.Zb[f];g.sh=f+1,g.uh=f-1,this.Zb[f]=g}for((g=this.Zb[0]).uh=this.gf-2,this.Zb[0]=g,(g=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=g,f=g=0;f<this.gf;f++)if(256&this.Zb[g].type){var w=this.BP(g);if(w==-1){d=!0;break}g=w}else g=this.Zb[g].sh;return!d&&(this.LO(g),!0)},c.prototype.BP=function(d){for(var f,g,w=this.gf-1,$=d,T=1;T<=w-2;T++){f=$=this.Zb[$].sh,g=d;for(var E=1;E<=T;E++){if(g=this.Zb[g].uh,(256&this.Zb[g].type)==0&&(256&this.Zb[f].type)==0){var O=this.bS(g,f);if(O!=-1)return O}f=this.Zb[f].uh}}return-1},c.prototype.bS=function(d,f){var g=this.Zb[this.Zb[d].uh],w=this.Zb[d],$=this.Zb[this.Zb[f].uh],T=this.Zb[f];if(!this.EW(g,w,$,T))return-1;var E=new n;return this.sQ(g,w,$,T,E)&&!E.XD&&h.P.XJ((w.x-g.x)*(T.y-$.y)-(w.y-g.y)*(T.x-$.x))!=h.P.XJ(this.La)?(g=this.Zb[d].uh,E.cn.type=w.type,E.cn.sh=f,E.cn.uh=g,this.Zb[d]=E.cn,E.cn=this.Zb[f],E.cn.uh=d,this.Zb[f]=E.cn,f):-1},c.prototype.EW=function(d,f,g,w){return Math.max(d.x,f.x)>=Math.min(g.x,w.x)&&Math.max(g.x,w.x)>=Math.min(d.x,f.x)&&Math.max(d.y,f.y)>=Math.min(g.y,w.y)&&Math.max(g.y,w.y)>=Math.min(d.y,f.y)},c.prototype.sQ=function(d,f,g,w,$){$.XD=!1;var T=(f.y-d.y)*(w.x-g.x)-(f.x-d.x)*(w.y-g.y),E=(g.y-d.y)*(f.x-d.x)-(g.x-d.x)*(f.y-d.y);if(0<=(T=T==0?2:E/T)&&1>=T){var O=T;if(T=(w.y-g.y)*(f.x-d.x)-(w.x-g.x)*(f.y-d.y),E=(d.y-g.y)*(w.x-g.x)-(d.x-g.x)*(w.y-g.y),0<=(T=T==0?2:E/T)&&1>=T)return $.cn=s.OO(d.x+T*(f.x-d.x),d.y+T*(f.y-d.y)),$.cn.Wh=g.Wh+O*(w.Wh-g.Wh),O!=0&&O!=1||T!=0&&T!=1||($.XD=!0),$.RY=T,$.SY=O,!((O==0||O==1)&&0<T&&1>T||(T==0||T==1)&&0<O&&1>O)}return!1},c.prototype.LO=function(d){for(;this.Zb[d].uh<d;)d=this.Zb[d].uh;var f=0,g=d;do g=this.Zb[g],this.Zb[f]=g,g=g.sh,f++;while(g!=d);this.Zb[f]=this.Zb[0],this.gf=f+1},c.prototype.VC=function(d){var f=this.mo,g=f.Ha();if(g!=null){g.aj();for(var w=-1;g.ab();)w++,this.aM(f,w,d)}},c.prototype.Qx=function(){var d=this.mo.K();return d==322?this.$L():d==197?this.ZL():h.ba.zd(d)?((d=new h.Ua).pc(this.mo,!0),this.mo=d,this.Qx()):d==1607?(d=new h.Ua,this.VC(d),d):d==1736?(d=new h.Ea,this.VC(d),d):null},c}();h.DK=l}(U||(U={})),function(h){var k=function(){function s(n){this.sk=n}return s.prototype.D=function(n,l){this.sk.g.D(n,l)},s.prototype.wd=function(n){var l=this.sk.Ga.ka(n);this.sk.Ga.wd(n,-1),this.sk.g.qd(l,!1)},s}(),b=function(){function s(n){this.sk=n}return s.prototype.D=function(n,l){this.sk.DT.D(n,l)},s.prototype.wd=function(n){this.sk.Ga.wd(n,-1)},s}(),u=function(){function s(n){this.sk=n}return s.prototype.D=function(n,l){l.N(this.sk.GT[n])},s.prototype.wd=function(n){this.sk.Ga.wd(n,-1)},s}(),o=function(){function s(n){n===void 0?(this.Ga=new h.$j,this.Ga.Ee(20),this.g=new h.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new k(this)):n instanceof Array?(this.Ga=new h.$j,this.Ga.Ee(20),this.GT=n,this.Zh=new u(this)):(this.Ga=new h.$j,this.Ga.Ee(20),this.DT=n,this.Zh=new b(this))}return s.prototype.Ib=function(n){var l=n.K();if(h.Fx.zj(l))this.eN(n);else if(h.Xk.zd(l))this.jN(n);else if(l==197)this.bN(n);else{if(l!=33)throw h.i.O("invalid shape type");this.iN(n)}},s.prototype.YQ=function(){var n=new h.Ta,l=this.Ga.sc(-1),c=new h.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(l),n),c.nf(n),l=this.Ga.lb(l);l!=-1;l=this.Ga.lb(l))this.g.Xi(this.Ga.ka(l),n),c.lineTo(n);return c},s.MO=function(n){var l=new s(n),c=n.I(),d=1,f=new h.h,g=new h.h,w=new h.h;for(n.D(0,f);n.D(d,g),g.Mz(f)&&d<c-1;)d++;for(l.Ga.addElement(0,-1),l.Ga.zn(d),c=d+1;c<n.I();c++)n.D(c,w),(d=l.kC(w))!=-1&&l.Ga.Uj(d,c);for(w=new h.Ta,d=l.Ga.sc(-1),c=new h.Ea(n.description),n.we(l.Ga.ka(d),w),c.nf(w),d=l.Ga.lb(d);d!=-1;d=l.Ga.lb(d))n.we(l.Ga.ka(d),w),c.lineTo(w);return c},s.construct=function(n,l,c){for(var d=new s(n),f=1,g=n[0];n[f].Mz(g)&&f<l-1;)f++;for(d.Ga.addElement(0,-1),d.Ga.zn(f),f+=1;f<l;f++)(g=d.kC(n[f]))!=-1&&d.Ga.Uj(g,f);for(n=0,l=d.Ga.sc(-1);l!=-1;l=d.Ga.lb(l))c[n++]=d.Ga.ka(l);return n},s.EG=function(n,l){var c=n.Ca(l),d=n.Wc(l);if(l=!n.ec(l)&&n.Pn(l),n=n.vb(0),d*=2,l&&(d-=2),6>d-(c*=2))return!0;l=new h.h;var f=new h.h,g=new h.h;n.uc(c,l),n.uc(c+2,f),n.uc(c+4,g);var w=s.Yu(f,g,l);if(w.rs()||!s.wm(w.value()))return!1;var $=h.h.construct(f.x,f.y),T=new h.h;for(c+=6;c<d;c+=2)if(T.N(f),f.N(g),n.uc(c,g),(w=s.Yu(f,g,l)).rs()||!s.wm(w.value())||(w=s.Yu($,g,l)).rs()||!s.wm(w.value())||(w=s.Yu(f,g,T)).rs()||!s.wm(w.value()))return!1;return!0},s.prototype.eN=function(n){for(var l=new h.Ta,c=new h.h,d=0;d<n.I();d++){n.D(d,c);var f=this.Er(c);if(f!=-1){n.we(d,l);var g=this.g.hc(this.Us,l);this.Ga.Uj(f,g)}}},s.prototype.bN=function(n){for(var l=new h.Ta,c=new h.h,d=0;4>d;d++){n.hB(d,c);var f=this.Er(c);if(f!=-1){n.If(d,l);var g=this.g.hc(this.Us,l);this.Ga.Uj(f,g)}}},s.prototype.jN=function(n){var l=new h.Ta,c=n.bc();if((c=this.Er(c))!=-1){n.Vo(l);var d=this.g.hc(this.Us,l);this.Ga.Uj(c,d)}c=n.xc(),(c=this.Er(c))!=-1&&(n.Ro(l),n=this.g.hc(this.Us,l),this.Ga.Uj(c,n))},s.prototype.iN=function(n){var l=n.D();(l=this.Er(l))!=-1&&(n=this.g.hc(this.Us,n),this.Ga.Uj(l,n))},s.prototype.Er=function(n){var l=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var c=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return n.Mz(c)||(l=this.Ga.zn(-5)),l}return this.kC(n)},s.prototype.kC=function(n){var l=-1;do{var c=this.Ga.sc(-1),d=this.Ga.Gc(-1),f=this.Ga.ka(c),g=this.Ga.ka(d),w=new h.h,$=new h.h;if(this.Zh.D(f,w),this.Zh.D(g,$),f=h.h.Wq($,n,w),s.wm(f))l=this.Ga.zn(-1),(w=this.iC(n,d,c))!=c&&this.jC(n,c,this.Ga.xe(w));else if(s.xG(f)){$=this.Ga.uv(-1);var T=this.Ga.sc(-1),E=this.Ga.Gc(-1);for(f=new h.h,g=new h.h;T!=this.Ga.xe(E);){var O=this.Ga.ka($);this.Zh.D(O,f),O=h.h.Wq(f,n,w),s.xG(O)?(E=$,$=this.Ga.nl($)):(T=$,$=this.Ga.Zp($))}if($=E,w=T,O=this.Ga.ka($),T=this.Ga.ka(w),this.Zh.D(O,f),this.Zh.D(T,g),w!=c&&(f=h.h.Wq(g,n,f),!s.wm(f)))continue;l=this.Ga.Bu(w,$,-2,!1),this.jC(n,$,d),this.iC(n,w,c)}else this.tb==null&&(this.tb=new h.zb),this.tb.Ec($),this.tb.Rc(w),0>(w=this.tb.ge(n,!0))?(w=this.Ga.xe(d),this.Ga.wd(d,-1),l=this.Ga.zn(-3),this.iC(n,w,c)):1<w&&(w=this.Ga.lb(c),this.Ga.wd(c,-1),l=this.Ga.Bu(-1,w,-3,!1),this.jC(n,w,d))}while(0);return l},s.prototype.jC=function(n,l,c){if(l!=c){var d=this.Ga.ka(l),f=this.Ga.lb(l),g=new h.h,w=new h.h;for(this.Zh.D(d,g);l!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),w),d=h.h.Wq(w,n,g),!s.wm(d));)d=l,l=f,g.N(w),f=this.Ga.lb(l),this.Zh.wd(d)}},s.prototype.iC=function(n,l,c){if(l==c)return c;var d=this.Ga.ka(l),f=this.Ga.xe(l),g=new h.h,w=new h.h;for(this.Zh.D(d,g);l!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),w),d=h.h.Wq(g,n,w),!s.wm(d));)d=l,l=f,g.N(w),f=this.Ga.xe(l),this.Zh.wd(d);return l},s.Yu=function(n,l,c){var d=new h.Xb;d.set(l.x),d.sub(n.x);var f=new h.Xb;f.set(c.y),f.sub(n.y);var g=new h.Xb;return g.set(l.y),g.sub(n.y),(l=new h.Xb).set(c.x),l.sub(n.x),d.Bg(f),g.Bg(l),d.sub(g),d},s.wm=function(n){return 0>n},s.xG=function(n){return 0<n},s}();h.au=o}(U||(U={})),function(h){var k=function(){function b(u){this.g=null,this.oH=!0,this.od=u}return b.uU=function(u,o,s){return u=h.ua.Gr(u),h.$t.Ev(o.Ng(),o.kh(),s.Ng(),s.kh(),h.mc.ox(u))},b.xO=function(u,o){var s=new h.Ta;return h.$t.RT(u,o,s),s},b.W=function(u,o,s,n){return(s=new b(s)).g=u,s.ra=o,s.oH=n,s.zM()},b.prototype.iM=function(u){return h.$t.dQ(this.g,u)},b.prototype.nM=function(u){return h.bu.W(this.g,u,this.od)},b.prototype.zM=function(){var u=this.ra,o=h.ua.Gr(u),s=1.00001*(u=h.ua.mN(u));u*=1.000001;for(var n=!1,l=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),c=0,d=this.g.eS();;c++){if(c>l)throw h.i.ga("Internal Error: max number of iterations exceeded");var f=this.iM(o);if(n=n||f,this.oH&&(f=this.g.Ip(o,!0,!1)!=0,n=n||f),f=!1,(c==0||d||h.bu.fI(!0,this.g,u,null,this.od))&&(f=this.nM(s),n=n||f),!f)break;h.op.Bp(this.od)}return n},b}();h.Vk=k}(U||(U={})),function(h){var k=function(){function u(o){this.ae=this.Nc=null,this.$s=0,this.Vb=o,this.Yz=!0}return u.prototype.wv=function(o,s){var n=this.g.cc(o);if(n==null){if(!this.g.fd(o,s))return null;n=s}return n},u.prototype.Zq=function(){var o;o===void 0&&(o=!1),this.$s++,(o||!(4095&this.$s))&&(this.$s=0,h.op.Bp(this.Vb))},u.prototype.iP=function(){var o=this.g.$q(!1),s=!1,n=new h.zb,l=new h.zb,c=new h.l;c.Pa();var d=new h.l;d.Pa();for(var f=new h.Ta,g=new h.OC,w=o.next();w!=-1;w=o.next()){h.op.Bp(this.Vb);var $=null,T=!1;if(!h.ba.Tn(this.g.jc(o.ek))){if(($=this.wv(w,n))==null)continue;if($.A(c),c.X(this.ra,this.ra),$.Di(this.ra)){if(!$.Di(0))continue;T=!0,$=null}}var E=this.g.$q(o),O=E.next();for(O!=-1&&(O=E.next());O!=-1;O=E.next()){var P=null,R=!1;if(!h.ba.Tn(this.g.jc(E.ek))){if((P=this.wv(O,l))==null)continue;if(P.A(d),P.Di(this.ra)){if(!P.Di(0))continue;R=!0,P=null}}var F=0,V=0;if($!=null&&P!=null)c.CG(d)&&(g.Qo($),g.Qo(P),g.Fa(this.ra,!1),0<(F=g.ql(0))+(V=g.ql(1))&&(this.g.lr(w,g,0,!0),this.g.lr(O,g,1,!0)),g.clear());else if($!=null){var L=new h.h;if(this.g.D(O,L),c.contains(L)){if(g.Qo($),this.g.Xi(O,f),g.Fz(this.ra,f,!1),0<(F=g.ql(0)))if(this.g.lr(w,g,0,!0),R){for(R=-1,L=this.g.V(O);L!=-1&&L!=O&&(R=L,(P=this.wv(L,l))!=null&&P.Di(0));L=this.g.V(L));for(L=O;L!=-1&&(this.g.Fh(L,g.Cf),L!=R);L=this.g.V(L));}else this.g.Fh(O,g.Cf);g.clear()}}else{if(P==null)continue;if(L=new h.h,this.g.D(w,L),d.X(this.ra,this.ra),d.contains(L)){if(g.Qo(P),this.g.Xi(w,f),g.Fz(this.ra,f,!1),0<(V=g.ql(0)))if(this.g.lr(O,g,0,!0),T){for(R=-1,L=this.g.V(w);L!=-1&&L!=w&&(R=L,(P=this.wv(L,l))!=null&&P.Di(0));L=this.g.V(L));for(L=w;L!=-1&&(this.g.Fh(L,g.Cf),L!=R);L=this.g.V(L));}else this.g.Fh(w,g.Cf);g.clear()}}if(F+V!=0){if(F!=0){if(($=this.g.cc(w))==null){if(!this.g.fd(w,n))continue;$=n,n.A(c)}else $.A(c);if($.Di(this.ra))break}s=!0}}}return s},u.prototype.jP=function(){return this.LU()},u.prototype.LU=function(){return new h.MC().LX(this.g,this.ra)},u.prototype.gI=function(){var o=!1;this.Nc==null&&(this.Nc=new h.$j);var s=new h.ja(0);s.Jb(this.g.gd+1);for(var n=this.g.$q(),l=n.next();l!=-1;l=n.next())s.add(l);this.g.nx(s,s.size),s.add(-1),n=this.g.Hd(),l=this.g.Hd(),this.ae=new h.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var c=new h.ja(0),d=new h.ja(0),f=0;new h.h;var g=this.g.ud;this.g.wb.oc();for(var w,$,T=this.g.wb.Aa[0].o,E=s.get(f++);E!=-1;){var O=w=T[2*($=g.U(E,0))],P=$=T[2*$+1];do{var R=g.U(E,2),F=g.U(E,1);if(R!=-1){var V=g.U(R,0),L=T[2*V];0>(P<(V=T[2*V+1])?-1:P>V?1:O<L?-1:O>L?1:0)&&(d.add(E),d.add(R))}F!=-1&&(L=T[2*(V=g.U(F,0))],0>(P<(V=T[2*V+1])?-1:P>V?1:O<L?-1:O>L?1:0)&&(d.add(F),d.add(F))),(L=this.g.Qa(E,n))!=-1&&(c.add(L),this.g.Sa(E,n,-1)),(L=this.g.Qa(E,l))!=-1&&(c.add(L),this.g.Sa(E,l,-1)),(E=s.get(f++))!==-1&&(O=T[2*(P=g.U(E,0))],P=T[2*P+1])}while(E!=-1&&O===w&&P===$);for(O=c.size==1&&d.size==2,L=P=-1,R=0,F=c.size;R<F;R++){V=c.get(R);var G=this.Nc.xe(V);if(G==-1||c.cG(G)||(P=G),(V=this.Nc.lb(V))==-1||c.cG(V)||(L=V),P!=-1&&L!=-1)break}for(this.ae.VJ($,w),R=0,F=c.size;R<F;R++)V=c.get(R),this.Nc.wd(V,-1);if(c.clear(!1),!O&&P!=-1&&L!=-1&&this.lO(P,L)){o=!0,this.Pi=this.ae.tm();break}for(R=0,F=d.size;R<F;R+=2){if($=d.get(R),w=d.get(R+1),O?($=this.Nc.Bu(P,L,$,!0),O=!1):$=this.Nc.addElement($,-1),this.ae.sg){this.Pi=this.ae.tm(),o=!0;break}this.g.Qa(w,n)==-1?this.g.Sa(w,n,$):this.g.Sa(w,l,$)}if(o)break;d.Dh(0)}return this.g.Ud(n),this.g.Ud(l),o},u.prototype.lO=function(o,s){return this.ae.compare(this.Nc,this.Nc.ka(o),s),o=this.ae.sg,this.ae.Mr(),o},u.tE=function(o){for(var s=o.md;s!=-1;s=o.ve(s))if(h.ba.Ic(o.jc(s)))return!0;return!1},u.aQ=function(o,s,n,l){return!!u.tE(o)&&((s=new u(l)).g=o,s.ra=n,15>o.gd?o=s.iP():s.jP())},u.W=function(o,s,n){return u.aQ(o,o.DF(),s,n)},u.fI=function(o,s,n,l,c){if(!u.tE(s))return!1;var d=new u(c);if(d.g=s,d.ra=n,d.Yz=o,d.gI())return l!=null&&l.Yt(d.Pi),!0;var f=new h.Ed;return f.VB(),s.Pc(f),(d=new u(c)).g=s,d.ra=n,d.Yz=o,o=d.gI(),f.VB(),s.Pc(f),!!o&&(l!=null&&l.Yt(d.Pi),!0)},u.Ol=function(o,s){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*s<1*o*s},u.gP=function(o,s,n,l){if(h.ba.Ic(s.K()))return new u(l).hP(o,s,n);throw h.i.ga("crack_A_with_B")},u.prototype.hP=function(o,s,n){var l=new h.l;o.yc(l);var c=new h.l;if(s.yc(c),c.X(n,n),!c.isIntersecting(l))return o;var d=o.Cb,f=null;d!=null&&(f=d.Gb),u.Ol(o,o.I())&&(f=h.ua.lj(o,c));var g=f!=null?f.getIterator():null,w=s.Ha();s=o.Ha();var $=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];w.ab();)for(;w.Ia();){var T=w.ia();if(f!=null){for(g.Wo(T,n),d=g.next();d!=-1;d=g.next())if(this.Zq(),s.Wb(f.ka(d),-1),s.Ia()){var E=(d=s.ia()).Fa(T,null,$,null,n);for(d=0;d<E;++d){var O=$[d];if(O!=0&&O!=1){var P=s.xb(),R=new b;R.t=O,R.index=P,c.push(R)}}}}else{var F=new h.l;if(T.yc(F),F.X(n,n),l.isIntersecting(F)){for(s.aj();s.ab();)for(;s.Ia();)if(this.Zq(),d=s.ia(),O=new h.l,d.yc(O),O.isIntersecting(F))for(E=d.Fa(T,null,$,null,n),d=0;d<E;++d)(O=$[d])!=0&&O!=1&&(P=s.xb(),(R=new b).t=O,R.index=P,c.push(R))}}}if(c.length==0)return o;for(c=c.sort(b.zy),o=o.Ja(),s.aj();s.ab()&&!s.Ia(););for(n=s.ia(),l=new h.jg,f=-1,d=0,g=c.length;d<g;){for($=c[d].index,w=d+1;w<g&&c[w].index==$;)++w;for(;s.xb()<$;){if(this.Zq(),T=s.Ia(),O=s.gb,(F=T||!s.Qn()||s.Rn())&&o.pc(n,f!=O),f=O,!T)for(;s.ab()&&!s.Ia(););n=s.ia()}for($=0;d<w;d++)(O=c[d].t)!=$&&(n.dh($,O,l),$=O,O=s.gb,o.pc(l.get(),f!=O),f=O);if((F=(T=s.Ia())||!s.Qn()||s.Rn())&&(n.dh($,1,l),o.pc(l.get(),!1)),T)n=s.ia();else{for(;s.ab()&&!s.Ia(););n=s.Ia()?s.ia():null}d=w}for(n!=null&&(O=s.gb,(F=(T=s.Ia())||!s.Qn()||s.Rn())&&o.pc(n,f!=O),f=O),T=s.Ia();;){if(!T){for(;s.ab()&&!(T=s.Ia()););if(!T)break}n=s.ia(),O=s.gb,(F=(T=s.Ia())||!s.Qn()||s.Rn())&&o.pc(n,f!=O),f=O}return o},u}();h.bu=k;var b=function(){function u(){}return u.zy=function(o,s){return o.index==s.index?o.t>s.t?1:o.t<s.t?-1:0:o.index>s.index?1:-1},u}()}(U||(U={})),function(h){var k;(k=h.FK||(h.FK={}))[k.Left=0]="Left",k[k.Right=1]="Right",k[k.Coincident=2]="Coincident",k[k.Undefined=3]="Undefined",k[k.Uncut=4]="Uncut";var b=function(s,n,l,c,d,f,g,w,$,T,E){this.Y=s,this.ct=n,this.Ps=l,this.ug=c,this.Nm=T,this.Cl=E};h.qY=b;var u=function(){function s(n,l){this.EH=n,this.Ji=l}return s.prototype.lM=function(n,l){var c=new h.h;this.Ji.D(n,c);var d=new h.h;return this.Ji.D(l,d),(c=c.compare(d))!=0?c:(n=this.Ji.Qa(n,this.EH))<(l=this.Ji.Qa(l,this.EH))?-1:n==l?0:1},s}(),o=function(s,n,l,c,d,f,g,w,$){this.ug=s,this.Ps=n,this.JA=l,this.PH=c,this.Gi=d,this.Cl=f,this.Nm=g,this.QH=w,this.JT=$};h.pY=o,h.GK=function(){function s(){}return s.EK=function(n,l,c,d,f,g){if(l.B())n=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else if(c.B())n=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{var w=new h.hd;if(w.Ib(l),w.Ib(c),h.Vk.W(w,d,g,!0),w.gd==0)n=new b(l.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{for(l=0,c=w.Hd(),d=w.md;d!=-1;d=w.ve(d))for(g=w.Ob(d);g!=-1;g=w.Sb(g))for(var $=w.Ya(g),T=0,E=w.Ka(g);T<E;$=w.V($),T++)w.Sa($,c,l++);l=s.CM(c,w),s.YL(n,l,w,f)}}},s.CM=function(n,l){for(var c=l.gd,d=new h.ja(0),f=l.md;f!=-1;f=l.ve(f))for(var g=l.Ob(f);g!=-1;g=l.Sb(g))for(var w=l.Ya(g),$=0,T=l.Ka(g);$<T;w=l.V(w),$++)d.add(w);var E=new u(n,l);d.Wd(0,c,function(pe,he){return E.lM(pe,he)}),n=[];var O=[],P=l.Hd(),R=l.Hd();f=l.md,g=l.ve(f),T=new h.h;var F=new h.h,V=d.get(0),L=l.cd(V),G=l.Sf(L);l.D(V,T);var J=1;for(w=0;J<c-1;){var H=!1;for($=J;$<c;$++)if($!=w){var te=d.get($),Q=l.cd(te),ae=l.Sf(Q);if(l.D(te,F),!T.rb(F))break;G==f&&ae==g&&(H=s.pM(P,R,l,n,O,L,V,Q,te))}if(H||w==J-1){if(H&&w==J-1&&J--,++w==c)break;V=d.get(w),L=l.cd(V),G=l.Sf(L),l.D(V,T)}H||(J=w+1)}for(c=[],f=l.md;f!=-1;f=l.ve(f))for(g=l.Ob(f);g!=-1;g=l.Sb(g))for(d=l.Ya(g),$=0,T=l.Ka(g);$<T;d=l.V(d),$++){if(0<=(w=l.Qa(d,R)))for(;w<O.length&&O[w].ug==d;)c.push(O[w++]);if(0<=(w=l.Qa(d,P)))for(;w<n.length&&n[w].ug==d;)c.push(n[w++])}return l.Ud(P),l.Ud(R),c},s.pM=function(n,l,c,d,f,g,w,$,T){var E=c.tj(g),O=c.tj($),P=c.Ya(g),R=c.Ya($),F=c.Na(w),V=c.Na(T),L=!1,G=!1,J=!1,H=!1;return w!=P&&(T!=R&&(L=s.qM(n,c,d,g,F,$,V)),T!=O&&(G=s.rM(n,c,d,g,F,$,T))),w!=E&&(T!=R&&(J=s.sM(l,c,f,g,w,$,V,P)),T!=O&&(H=s.tM(l,c,f,g,w,$,T,P))),L&&G&&J?(n=d.length-1,f[H?f.length-2:f.length-1].Gi==2&&(d[n-1]=d[n],--d.length)):L&&G&&H&&f[f.length-1].Gi==2&&(f=d[d.length-1],--d.length,c.Qa(f.ug,n)==d.length&&c.Sa(f.ug,n,-1)),L||G||J||H},s.qM=function(n,l,c,d,f,g,w){var $=new h.zb,T=new h.zb,E=[0,0],O=[0,0],P=l.cc(f);return P==null&&(l.fd(f,$),P=$),($=l.cc(w))==null&&(l.fd(w,T),$=T),2>(P=P.Fa($,null,E,O,0))&&(d=new o(f,d,E[0],NaN,P,w,g,O[0],NaN),c.push(d),0>(d=l.Qa(f,n))&&l.Sa(f,n,c.length-1)),!0},s.rM=function(n,l,c,d,f,g,w){var $=new h.zb,T=new h.zb,E=[0,0],O=[0,0],P=l.cc(f);return P==null&&(l.fd(f,$),P=$),($=l.cc(w))==null&&(l.fd(w,T),$=T),2>(P=P.Fa($,null,E,O,0))&&(d=new o(f,d,E[0],NaN,P,w,g,O[0],NaN),c.push(d),0>(d=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0)},s.sM=function(n,l,c,d,f,g,w,$){var T=new h.zb,E=new h.zb,O=[0,0],P=[0,0],R=l.cc(f);return R==null&&(l.fd(f,T),R=T),(T=l.cc(w))==null&&(l.fd(w,E),T=E),(R=R.Fa(T,null,O,P,0))==2?(d=new o(f,d,O[0],O[1],R,w,g,P[0],P[1]),c.push(d),0>(d=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0):(E=!1,f==$&&(d=new o(f,d,O[0],NaN,R,w,g,P[0],NaN),c.push(d),0>(d=l.Qa(f,n))&&l.Sa(f,n,c.length-1),E=!0),E)},s.tM=function(n,l,c,d,f,g,w,$){var T=new h.zb,E=new h.zb,O=[0,0],P=[0,0],R=l.cc(f);return R==null&&(l.fd(f,T),R=T),(T=l.cc(w))==null&&(l.fd(w,E),T=E),(R=R.Fa(T,null,O,P,0))==2?(d=new o(f,d,O[0],O[1],R,w,g,P[0],P[1]),c.push(d),0>(d=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0):(E=!1,f==$&&(d=new o(f,d,O[0],NaN,R,w,g,P[0],NaN),c.push(d),0>(d=l.Qa(f,n))&&l.Sa(f,n,c.length-1),E=!0),E)},s.YL=function(n,l,c,d){var f=[];f[0]=new h.h,f[1]=new h.h,f[2]=new h.h,f[3]=new h.h;var g=new h.h,w=new h.h,$=new h.h,T=new h.h,E=null;d!=null&&(E=new h.jg).Qr();var O=0,P=null,R=new h.zb;new h.zb;for(var F=c.Ob(c.md);F!=-1;F=c.Sb(F)){for(var V=4,L=-1,G=-1,J=-1,H=-1,te=NaN,Q=!0,ae=!1,pe=!0,he=!0,Ae=!0,ve=0,We=F,Ve=0,Te=c.Ya(F),Gt=c.Ka(F),xi=0;xi<Gt;Te=c.V(Te),xi++){var Ut=c.cc(Te);if(Ut==null){if(!c.fd(Te,R))continue;Ut=R}G==-1&&(G=Te);for(var bt=0;O<l.length&&Te==l[O].ug;){L=l[O].Ps;var wt=l[O].ug,rt=l[O].JA,Jt=l[O].Nm,it=l[O].Cl,os=l[O].QH;if(l[O].Gi==2){if(ae||(We=L,G=wt,Ve=rt,J=Jt,H=it,te=os,V=2,d!=null?P=new h.Ua:ve=0,Ae=!1,he=!0),rt=l[O].PH,os=l[O].JT,d!=null?(Ut.dh(bt,l[O].PH,E),P.pc(E.get(),he)):ve++,bt=rt,ae=!0,he=Q=!1,O+1==l.length||l[O+1].Gi!=2||l[O+1].ug==wt&&l[O+1].JA!=bt){if(d!=null){var dt=new b(P,2,L,wt,rt,V,We,G,Ve,Jt,it);d.push(dt)}else null.add(ve);We=L,G=wt,Ve=rt,J=Jt,H=it,te=os,V=2,ae=Q=!1,he=Ae=!0}}else{var lr=c.V(wt);if(O<l.length-1&&l[O+1].ug==lr&&l[O+1].Cl==it&&l[O+1].Gi==2)rt!=bt&&(Ae&&(d!=null?P=new h.Ua:ve=0),Q=0<O&&l[O-1].Ps==L?V==1?0:V==0?1:3:3,d!=null?(Ut.dh(bt,rt,E),P.pc(E.get(),he),dt=new b(P,Q,L,wt,rt,V,We,G,Ve,Jt,it),d.push(dt)):(ve++,null.add(ve)),bt=rt,We=L,G=wt,Ve=rt,J=Jt,H=it,te=os,V=Q,Q=pe=!1,he=Ae=!0);else if(!s.xM(n,c,l,O,g,w)){s.uM(c,l,O,F,Te,$,T);var Et=!1;if(lr=!1,dt=!0,!(g.rb($)||w.rb($)||g.rb(T)||w.rb(T))){f[0].N(g),f[1].N(w),f[2].N($),f[3].N(T),f.sort(h.h.pu);var Rc=f[0],Lc=f[1],jc=f[2],gr=f[3];Rc.rb(g)?Lc.rb(w)?n?(lr=Et=!0,dt=!1):Et=!1:gr.rb(w)?n?dt=lr=Et=!0:Et=!1:(Et=!0,dt=Lc.rb($)):Lc.rb(g)?jc.rb(w)?n?(lr=Et=!0,dt=!1):Et=!1:Rc.rb(w)?n?dt=lr=Et=!0:Et=!1:(Et=!0,dt=jc.rb($)):jc.rb(g)?gr.rb(w)?n?(lr=Et=!0,dt=!1):Et=!1:Lc.rb(w)?n?dt=lr=Et=!0:Et=!1:(Et=!0,dt=gr.rb($)):Rc.rb(w)?n?(lr=Et=!0,dt=!1):Et=!1:jc.rb(w)?n?dt=lr=Et=!0:Et=!1:(Et=!0,dt=Rc.rb($))}Et&&(Et=Te==wt,(rt!=bt||Et&&bt==0)&&(Ae&&(d!=null?P=new h.Ua:ve=0),d!=null?(Ut.dh(bt,rt,E),P.pc(E.get(),he)):ve++),dt?V!=1?((rt!=bt||Et&&bt==0)&&(d!=null?(dt=new b(P,1,L,wt,rt,V,We,G,Ve,Jt,it),d.push(dt)):null.add(ve)),lr?(O>=l.length-2||l[O+2].Ps!=L)&&(V=0):V=1):((rt!=bt||Et&&bt==0)&&(d!=null?(dt=new b(P,3,L,wt,rt,V,We,G,Ve,Jt,it),d.push(dt)):null.add(ve)),V=1):V!=0?((rt!=bt||Et&&bt==0)&&(d!=null?(dt=new b(P,0,L,wt,rt,V,We,G,Ve,Jt,it),d.push(dt)):null.add(ve)),lr?(O>=l.length-2||l[O+2].Ps!=L)&&(V=1):V=0):((rt!=bt||Et&&bt==0)&&(d!=null?(dt=new b(P,3,L,wt,rt,V,We,G,Ve,Jt,it),d.push(dt)):null.add(ve)),V=0),(rt!=bt||Et&&bt==0)&&(bt=rt,We=L,G=wt,Ve=rt,J=Jt,H=it,te=os,Q=pe=!1,he=Ae=!0))}}O++}bt!=1&&(Ae&&(d!=null?P=new h.Ua:ve=0),d!=null?(Ut.dh(bt,1,E),P.pc(E.get(),he)):ve++,he=Ae=!1,pe=!0)}pe&&(rt=1,wt=c.tj(F),wt=c.Na(wt),it=Jt=-1,os=NaN,Q?d!=null?(dt=new b(P,4,L,wt,rt,V,We,G,Ve,Jt,it),d.push(dt)):null.add(ve):(Q=V==1?0:V==0?1:3,d!=null?(dt=new b(P,Q,L,wt,rt,V,We,G,Ve,Jt,it),d.push(dt)):null.add(ve)))}},s.xM=function(n,l,c,d,f,g){var w=c[d].QH;if(w==1)return s.vM(n,l,c,d,f,g);if(w==0)return s.wM(n,l,c,d,f,g);throw h.i.Ra()},s.vM=function(n,l,c,d,f,g){var w=new h.zb,$=c[d].ug,T=c[d].Nm,E=c[d].Cl,O=-1,P=-1,R=-1,F=-1;if(!n&&0<d){var V=c[d-1];O=V.ug,P=V.Nm,R=V.Cl,F=V.Gi}var L=-1,G=-1,J=-1,H=-1;d<c.length-1&&(L=(V=c[d+1]).ug,G=V.Nm,J=V.Cl,H=V.Gi);var te=l.V($);return V=l.V(E),n?d==c.length-1||L!=$||G!=T||J!=V||H==2?((n=l.cc(E))==null&&(l.fd(E,w),n=w),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):((n=l.cc(E))==null&&(l.fd(E,w),n=w),f.N(n.lg()),(n=l.cc(V))==null&&(l.fd(V,w),n=w),g.N(n.lg()),f.Uq(),g.normalize(),f.normalize(),!1):0<d&&O==$&&P==T&&R==V&&F==2||d<c.length-1&&L==te&&G==T&&J==V&&H==2?((n=l.cc(E))==null&&(l.fd(E,w),n=w),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):!(d<c.length-1&&L==$&&G==T&&J==V)||((n=l.cc(E))==null&&(l.fd(E,w),n=w),f.N(n.lg()),(n=l.cc(V))==null&&(l.fd(V,w),n=w),g.N(n.lg()),f.Uq(),g.normalize(),f.normalize(),!1)},s.wM=function(n,l,c,d,f,g){var w=new h.zb,$=c[d].ug,T=c[d].Nm,E=c[d].Cl,O=-1,P=-1,R=-1,F=-1;if(!n&&d<c.length-1){var V=c[d+1];O=V.ug,P=V.Nm,R=V.Cl,F=V.Gi}var L=-1,G=-1,J=-1;V=-1,0<d&&(L=(V=c[d-1]).ug,G=V.Nm,J=V.Cl,V=V.Gi);var H=l.V($),te=l.Na(E);return n?d!=0&&L==$&&G==T&&J==te&&V!=2||((n=l.cc(E))==null&&(l.fd(E,w),n=w),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1):!(0<d&&L==$&&G==T&&J==te&&V==2||d<c.length-1&&O==H&&P==T&&R==te&&F==2)||((n=l.cc(E))==null&&(l.fd(E,w),n=w),g.N(n.lg()),f.nt(g),g.normalize(),f.normalize(),!1)},s.uM=function(n,l,c,d,f,g,w){var $=new h.zb,T=n.cc(f);if(T==null&&(n.fd(f,$),T=$),l=(c=l[c]).ug,c=c.JA,f=n.V(l),c==1)g.N(T.lg()),f!=-1&&f!=n.tj(d)?((T=n.cc(f))==null&&(n.fd(f,$),T=$),w.N(T.lg()),(T=n.cc(l))==null&&n.fd(l,$)):w.N(g),g.Uq(),w.normalize(),g.normalize();else{if(c!=0)throw h.i.Ra();w.N(T.lg()),g.nt(w),w.normalize(),g.normalize()}},s}()}(U||(U={})),function(h){var k;(k=h.XL||(h.XL={}))[k.Linear=0]="Linear",k[k.Angular=1]="Angular",k[k.Area=2]="Area";var b=function(){function d(f,g,w){this.pd=g,this.ci=w,this.qA=f}return d.prototype.Nb=function(f){return f instanceof d&&this.ci===f.ci},d.WF=function(f){return f.pd!==0?null:f.qA===-1?new d(-1,2,f.ci*f.ci):d.ah(l[f.qA])},d.ah=function(f){return(f=n[f])===void 0?null:f},d.UO=function(f,g,w){var $=null;if(w!=null)try{w.values[0]==="EPSG"&&($=d.ah(parseInt(w.values[1])))}catch{}return $===null&&($=new d(-1,f,g)),$},d.prototype.Fc=function(){return this.qA},d.prototype.xF=function(f){if(f.pd!=this.pd)throw h.i.Hb();return this.ci/f.ci},d.Ph=function(f,g,w){return g.xF(w)*f},d.SE=function(f,g,w,$,T){for(w=w.xF($),$=0;$<g;$++)T[$]=f[$]*w},d}();h.Uc=b;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],s=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],l=[],c=0;c<u.length;c+=2)n[u[c]]=new b(u[c],2,u[c+1]);for(u=null,c=0;c<o.length;c+=2)n[o[c]]=new b(o[c],1,o[c+1]);for(o=null,c=0;c<s.length;c+=3)n[s[c]]=new b(s[c],0,s[c+1]),l[s[c]]=s[c+2];s=null}(U||(U={})),function(h){var k=function(){function b(){this.yb=this.pb=0}return b.prototype.set=function(u,o){o!==void 0?(this.pb=u,this.yb=o):typeof u=="number"?(this.pb=u,this.yb=0):(this.pb=u.pb,this.yb=u.yb)},b.prototype.value=function(){return this.pb},b.prototype.add=function(u){var o=this.pb+u.pb;u=this.yb+u.yb+2220446049250313e-31*Math.abs(o),this.pb=o,this.yb=u},b.prototype.fN=function(){var u=this.pb+1,o=this.yb+2220446049250313e-31*Math.abs(u);this.pb=u,this.yb=o},b.prototype.ZM=function(u,o){this.pb=u.pb+o.pb,this.yb=u.yb+o.yb+2220446049250313e-31*Math.abs(this.pb)},b.prototype.sub=function(u){if(typeof u=="number"){var o=this.pb-u;u=this.yb+2220446049250313e-31*Math.abs(o)}else o=this.pb-u.pb,u=this.yb+u.yb+2220446049250313e-31*Math.abs(o);this.pb=o,this.yb=u},b.prototype.Bg=function(u){var o=this.pb*u.pb;this.yb=this.yb*Math.abs(u.pb)+u.yb*Math.abs(this.pb)+this.yb*u.yb+2220446049250313e-31*Math.abs(o),this.pb=o},b.prototype.Po=function(u){var o=this.pb*u;this.yb=this.yb*Math.abs(u)+2220446049250313e-31*Math.abs(o),this.pb=o},b.prototype.Ml=function(u,o){var s=Math.abs(u.pb)*Math.abs(o.pb);this.yb=u.yb*Math.abs(o.pb)+o.yb*Math.abs(u.pb)+u.yb*o.yb+2220446049250313e-31*Math.abs(s),this.pb=s},b.prototype.lm=function(u){var o=Math.abs(u.pb),s=this.pb/u.pb,n=(this.yb+Math.abs(s)*u.yb)/o;u.yb>.01*o&&(n*=1+(1+(u=u.yb/o))*u),this.pb=s,this.yb=n+2220446049250313e-31*Math.abs(s)},b.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),o=this.pb>10*this.yb?.5*this.yb/u:this.pb>this.yb?u-Math.sqrt(this.pb-this.yb):Math.max(u,Math.sqrt(this.pb+this.yb)-u);o+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.yb?o=u=NaN:(u=0,o=Math.sqrt(this.yb));this.pb=u,this.yb=o},b.prototype.sin=function(u){var o=Math.sin(u.pb),s=Math.cos(u.pb);this.pb=o,o=Math.abs(o),this.yb=(Math.abs(s)+.5*o*u.yb)*u.yb+2220446049250313e-31*o},b.prototype.cos=function(u){var o=Math.sin(u.pb),s=Math.cos(u.pb);this.pb=s,s=Math.abs(s),this.yb=(Math.abs(o)+.5*s*u.yb)*u.yb+2220446049250313e-31*s},b.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},b.prototype.rs=function(){return this.rg()&&this.yb!=0},b}();h.Xb=k}(U||(U={}));var mi=new U.h,hn=new U.h,no=new U.h,cn=new U.h,oo=new U.h;(function(h){var k,b;(b=k||(k={}))[b.closedPath=1]="closedPath",b[b.exteriorPath=2]="exteriorPath",b[b.ringAreaValid=4]="ringAreaValid";var u=function(){function o(s,n,l,c,d,f,g){n!==void 0?(this.ib=s,this.ek=n,this.dl=l,this.ki=c,this.za=f,this.cA=g,this.gw=d):(this.ib=s.ib,this.ek=s.ek,this.dl=s.dl,this.ki=s.ki,this.za=s.za,this.cA=s.cA,this.gw=s.gw),this.XG=!0}return o.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},o.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!h.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},o.vP=function(s,n,l,c,d,f,g){return new o(s,n,l,c,d,f,g)},o}();h.vY=u,k=function(){function o(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return o.prototype.Uh=function(s){return this.Te!=null?this.Te[s]:null},o.prototype.Zg=function(s,n){if(this.Te==null){if(n==null)return;this.Te=[];for(var l=0,c=this.wb.I();l<c;l++)this.Te.push(null)}this.Te[s]=n},o.prototype.ep=function(s,n){this.nd.T(s,1,n)},o.prototype.cp=function(s,n){this.nd.T(s,2,n)},o.prototype.QB=function(s,n){this.nd.T(s,6,n)},o.prototype.Up=function(s){return this.nd.U(s,6)},o.prototype.gx=function(s,n){this.nd.T(s,7,n)},o.prototype.sv=function(s){return this.nd.U(s,0)},o.prototype.JJ=function(s,n){this.dd.T(s,1,n)},o.prototype.NJ=function(s,n){this.dd.T(s,0,n)},o.prototype.EF=function(s){return this.dd.U(s,7)},o.prototype.ap=function(s,n){this.dd.T(s,3,n)},o.prototype.bp=function(s,n){this.dd.T(s,4,n)},o.prototype.pU=function(s){this.dd==null&&(this.dd=new h.ad(8));var n=this.dd.De();return this.dd.T(n,2,s),this.dd.T(n,5,0),this.dd.T(n,6,0),this.dd.T(n,7,n),n},o.prototype.JQ=function(s){this.dd.kd(s)},o.prototype.rU=function(s){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var n=this.nd.De();return this.nd.T(n,0,n),this.nd.T(n,3,0),this.nd.T(n,6,0),this.gx(n,s),n>=this.Qi.size&&(s=16>n?16:h.P.truncate(3*n/2),this.Qi.resize(s),this.xo.resize(s)),this.Qi.set(n,0),this.xo.set(n,0),n},o.prototype.nF=function(s){this.nd.kd(s)},o.prototype.Qy=function(s){this.ud.kd(s),this.gd--},o.prototype.jI=function(s){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var n=this.ud.De(),l=0<=s?s:n;if(this.ud.T(n,0,l),0>s){if(l>=this.wb.I()){if(s=16>l?16:h.P.truncate(3*l/2),this.wb.resize(s),this.Te!=null)for(var c=0;c<s;c++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(s),this.jt=this.wb.vb(0)}this.wb.Db(l,-1e38,-1e38),this.Te!=null&&(this.Te[l]=null),this.Ug!=null&&this.Ug.write(l,1)}return this.ud.T(n,4,2*l),this.gd++,n},o.prototype.yj=function(s,n,l){var c=n!=-1?this.Na(n):this.tj(s),d=c!=-1?this.V(c):-1,f=this.jI(l==null?this.gd:-1),g=this.Va(f);return l!=null&&this.wb.It(g,l),this.cj(f,s),this.Cc(f,d),this.Dc(f,c),d!=-1&&this.Dc(d,f),c!=-1&&this.Cc(c,f),l=this.ec(s),c=this.Ya(s),n==-1&&this.Yg(s,f),n==c&&this.Kf(s,f),l&&d==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(s,this.Ka(s)+1),s=this.Sf(s),this.Vj(s,this.I(s)+1),f},o.prototype.pm=function(){return this.lo==null&&(this.lo=new h.Ta(this.wb.description)),this.lo},o.prototype.$o=function(s,n){this.dd.T(s,2,-134217729&this.dd.U(s,2)||(n==1?134217728:0))},o.prototype.Kn=function(s){return 134217728&this.dd.U(s,2)?1:0},o.prototype.cN=function(s){var n=this.Kg(s.K(),s.description);return s.K()==1736&&this.$o(n,s.Kn()),this.PD(n,s),n},o.prototype.dN=function(s){var n=this.Kg(s.K(),s.description);return this.QD(n,s),n},o.prototype.SV=function(s,n){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0)),this.nd.Ee(this.nd.Jg+s),this.ud.Ee(this.ud.Jg+n),this.Qi.Jb(this.Qi.size+s),this.xo.Jb(this.xo.size+s)},o.prototype.PD=function(s,n){this.SV(n.ea(),n.I()),this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0);for(var l=this.Te!=null&&n.Se!=null,c=0,d=n.ea();c<d;c++)if(!(2>n.Ka(c))){var f=this.wf(s,-1);this.mn(f,n.ec(c));for(var g=n.Ca(c),w=n.Wc(c);g<w;g++){var $=this.yj(f,-1,null);if(l)if($=this.Va($),(1&n.UF(g))!=0)this.Zg($,null);else{var T=new h.jg;n.cc(g,T,!0),this.Zg($,T.get())}}}},o.prototype.QD=function(s,n){this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0),s=this.wf(s,-1);var l=0;for(n=n.I();l<n;l++)this.yj(s,-1,null)},o.prototype.JX=function(s,n,l){var c=this.V(s);if(c==-1)throw h.i.Ra();for(var d=this.pm(),f=this.cd(s),g=0,w=n.ql(l);g<w;g++){var $=this.Va(s),T=this.V(s),E=n.Xp(l,g);g==0&&(E.Vo(d),this.Fh(s,d)),E.K()==322?this.Zg($,null):this.Zg($,h.ba.kg(E)),E.Ro(d),g<w-1?s=this.yj(f,T,d):this.Fh(c,d)}},o.prototype.IX=function(s,n,l){var c=this.V(s);if(c==-1)throw h.i.Ra();for(var d=this.pm(),f=this.cd(s),g=0,w=n.ql(l);g<w;g++){var $=this.Va(s),T=this.V(s),E=n.Xp(l,w-g-1);g==0&&(E.Ro(d),this.Fh(s,d)),E.K()==322?this.Zg($,null):this.Zg($,h.ba.kg(E)),E.Vo(d),g<w-1?s=this.yj(f,T,d):this.Fh(c,d)}},o.prototype.DF=function(){var s=new h.l;s.Pa();for(var n=this.$q(),l=new h.h,c=!0,d=n.next();d!=-1;d=n.next())this.D(d,l),c?s.$b(l.x,l.y):s.Nk(l.x,l.y),c=!1;return s},o.prototype.Ib=function(s){var n=s.K();if(h.ba.Ic(n))return this.cN(s);if(n==550)return this.dN(s);throw h.i.Ra()},o.prototype.pN=function(s,n){var l=n.K();if(h.ba.Ic(l))this.PD(s,n);else{if(l!=550)throw h.i.Ra();this.QD(s,n)}},o.prototype.hN=function(s,n){var l=this.Kg(1736,s.description);if(2>s.Ka(n))return l;this.Kl.Gd(s,s.Ca(n),s.Wc(n)),this.jt=this.wb.vb(0);var c=this.wf(l,-1);this.mn(c,s.ec(n)||!0);var d=this.Te!=null&&s.Se!=null,f=s.Ca(n);for(n=s.Wc(n);f<n;f++){var g=this.yj(c,-1,null);if(d)if(g=this.Va(g),(1&s.UF(f))!=0)this.Zg(g,null);else{var w=new h.jg;s.cc(f,w,!0),this.Zg(g,w.get())}}return l},o.prototype.Ke=function(s){var n=this.jc(s),l=h.UK.Kg(n,this.Kl.description),c=this.I(s);if(c==0)return l;if(h.ba.Ic(n)){n=this.ea(s);for(var d=h.Zc.Qh(n+1),f=h.Zc.Or(n+1,0),g=l.description,w=0,$=g.Ba;w<$;w++){for(var T=g.ld(w),E=h.sa.Wa(T),O=h.Zc.TE(T,c),P=this.wb.vb(T),R=0,F=0,V=0,L=this.Ob(s);L!=-1;L=this.Sb(L)){var G=0;this.ec(L)&&(G|=1),this.TS(L)&&(G|=4),G!=0&&f.uJ(F,G);var J=this.Ka(L);if(d.write(F++,V),V+=J,T==0){J=P;var H=O,te=new h.h;for(G=this.Ya(L);R<V;G=this.V(G),R++){var Q=this.Va(G);J.uc(2*Q,te),H.Vt(2*R,te)}}else for(G=this.Ya(L);R<V;G=this.V(G),R++)for(Q=this.Va(G),H=0;H<E;H++)te=P.gg(Q*E+H),O.rr(R*E+H,te)}l.kn(T,O),d.write(n,c)}l.KJ(f),l.LJ(d),l.Qc(16777215)}else if(n==550){for(g=l.description,l.resize(c),w=0,$=g.Ba;w<$;w++){for(T=g.ld(w),E=h.sa.Wa(T),O=l.vb(T),P=this.wb.vb(T),R=0,L=this.Ob(s),J=this.Ka(L),G=this.Ya(L);R<J;G=this.V(G),R++)for(Q=this.Va(G),H=0;H<E;H++)te=P.gg(Q*E+H),O.rr(R*E+H,te);l.kn(T,O)}l.Qc(16777215)}return l},o.prototype.wB=function(s){for(var n=this.Ob(s);n!=-1;n=this.ar(n));n=this.KR(s);var l=this.ve(s);n!=-1?this.JJ(n,l):this.md=l,l!=-1?this.NJ(l,n):this.sw=n,this.JQ(s)},o.prototype.Kg=function(s,n){return n===void 0?this.VE(s,h.fe.pg()):this.VE(s,n)},o.prototype.VE=function(s,n){return s=this.pU(s),this.wb==null?this.wb=this.Kl=new h.ee(n):this.Kl.Ll(n),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=s:(this.NJ(s,this.sw),this.JJ(this.sw,s)),this.sw=s},o.prototype.ve=function(s){return this.dd.U(s,1)},o.prototype.KR=function(s){return this.dd.U(s,0)},o.prototype.jc=function(s){return 2147483647&this.dd.U(s,2)},o.prototype.CJ=function(s,n,l){n=this.yk[n],(s=this.EF(s))>=n.size&&n.resize(Math.max(h.P.truncate(1.25*s),16),-1),n.write(s,l)},o.prototype.FF=function(s,n){return(s=this.EF(s))<(n=this.yk[n]).size?n.read(s):-1},o.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var s=0;s<this.yk.length;s++)if(this.yk[s]==null)return this.yk[s]=h.Zc.Qh(0),s;return this.yk.push(h.Zc.Qh(0)),this.yk.length-1},o.prototype.sW=function(s){this.yk[s]=null},o.prototype.Ob=function(s){return this.dd.U(s,3)},o.prototype.mv=function(s){return this.dd.U(s,4)},o.prototype.I=function(s){return this.dd.U(s,5)},o.prototype.ea=function(s){return this.dd.U(s,6)},o.prototype.Ip=function(s,n,l){for(var c=0,d=this.md;d!=-1;d=this.ve(d)){var f=this.jc(d);if(h.ba.Ic(f)&&(!l||f==1736)){f=this.jc(d)==1736;for(var g=this.Ob(d);g!=-1;){for(var w=0,$=this.Ya(g);w<h.P.truncate(this.Ka(g)/2);){var T=this.V($);if(T==-1)break;var E=this.Va($),O=this.Uh(E);O!=null?E=O.Rb():(O=this.Va(T),E=this.wb.Ar(E,O)),E<=s?(E==0?c==0&&(c=-1):c=1,T!=this.tj(g)&&(this.gC(T,$),this.qd(T,!0))):$=this.V($),w++}for(w=this.Ya(g),$=this.ec(g)?w:this.tj(g);0<this.Ka(g);){if((T=this.Na($))==-1){this.qd($,!0),c==0&&(c=-1);break}var P=this.Va(T);if((O=this.Uh(P))!=null?E=O.Rb():(E=this.Va($),E=this.wb.Ar(E,P)),E<=s)E==0?c==0&&(c=-1):c=1,this.gC(T,$),this.qd(T,!1),w==T&&(w=this.Ya(g));else if(($=this.Na($))==w)break}$=this.Ka(g),n&&(f?3>$:2>$)?(g=this.ar(g),c=0<$?1:c==0?-1:c):g=this.Sb(g)}}}return c},o.prototype.gC=function(s,n){var l=this.Va(s),c=this.Va(n);if(this.Ug!=null&&(l=this.Ug.read(l),this.Ug.write(c,l)),this.di!=null){for(c=0,l=this.di.length;c<l;c++)if(this.di[c]!=null){var d=this.Qa(s,c);d!=-1&&this.Sa(n,c,d)}}},o.prototype.Wl=function(s,n,l){var c=0,d=this.V(s);if(d==-1)throw h.i.Ra();for(var f=this.Va(s),g=this.Va(d),w=this.Uh(f),$=w==null?this.wb.Ar(f,g):w.Rb(),T=0;T<l;T++){var E=n[T];if(0<E&&1>E){var O=E;w!=null&&(O=0<$?w.Tx(E)/$:0),this.wb.fD(f,g,O,this.pm());var P=this.yj(this.cd(s),d,this.pm());if(c++,w!=null){var R=w.fl(0,E);O=this.Va(this.Na(P)),this.Zg(O,R),this.mf(P,R.xc()),T!=l-1&&n[T+1]!=1||(E=w.fl(E,1),this.Zg(O,E))}}}return c},o.prototype.HX=function(s,n,l){var c=0,d=this.V(s);if(d==-1)throw h.i.ga("internal error");var f=this.Va(s),g=this.Va(d),w=this.Uh(f),$=w==null?this.wb.Ar(f,g):w.Rb(),T=0;s=this.cd(s);for(var E=0;E<l;E++){var O=n[E];if(T<O&&1>O){var P=O;if(w!=null&&(P=0<$?w.Tx(O)/$:0),this.wb.fD(f,g,P,this.pm()),P=this.tS(s,d,this.pm()),c++,w!=null){T=w.fl(T,O);var R=this.Va(this.Na(P));this.Zg(R,T),this.Db(P,T.qa,T.ma),E!=l-1&&n[E+1]!=1||(T=w.fl(O,1),P=this.Va(P),this.Zg(P,T))}}T=O}return c},o.prototype.tS=function(s,n,l){var c=n!=-1?this.Na(n):this.tj(s),d=c!=-1?this.V(c):-1,f=this.jI(l==null?this.gd:-1),g=this.Va(f);return l!=null&&this.wb.It(g,l),this.cj(f,s),this.Cc(f,d),this.Dc(f,c),d!=-1&&this.Dc(d,f),c!=-1&&this.Cc(c,f),l=this.ec(s),c=this.Ya(s),n==-1&&this.Yg(s,f),n==c&&(l&&c!=-1||this.Kf(s,f)),l&&d==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(s,this.Ka(s)+1),s=this.Sf(s),this.Vj(s,this.I(s)+1),f},o.prototype.pE=function(s,n,l){var c=this.Va(n),d=this.Va(l);if(0>c||d>this.gd-1)throw h.i.O("invalid call");if(c>d&&!this.ec(s))throw h.i.O("cannot iterate across an open path");for(s=0;n!=l;n=this.V(n))c=this.Va(n),(d=this.Uh(c))!=null?s+=d.Rb():(d=this.Va(this.V(n)),s+=this.wb.Ar(c,d));return s},o.prototype.Fh=function(s,n){var l=this.Va(s);this.wb.It(l,n),(l=this.Uh(l))!=null&&l.setStart(n),(s=this.Na(s))!=-1&&(s=this.Va(s),this.Uh(s)!=null&&l.setEnd(n))},o.prototype.Xi=function(s,n){s=this.Va(s),this.wb.we(s,n)},o.prototype.mf=function(s,n){this.Db(s,n.x,n.y)},o.prototype.Db=function(s,n,l){var c=this.Va(s);this.wb.Db(c,n,l),(c=this.Uh(c))!=null&&c.UB(n,l),(s=this.Na(s))!=-1&&(s=this.Va(s),this.Uh(s)!=null&&c.Sl(n,l))},o.prototype.D=function(s,n){this.wb.D(this.ud.U(s,0),n)},o.prototype.Hc=function(s,n){this.wb.Aa[0].uc(2*this.ud.U(s,0),n)},o.prototype.Oa=function(s){var n=new h.h;return this.wb.D(this.ud.U(s,0),n),n},o.prototype.ZF=function(s,n){this.jt.uc(2*s,n)},o.prototype.Vc=function(s,n,l){return this.wb.Vc(s,this.Va(n),l)},o.prototype.setAttribute=function(s,n,l,c){this.wb.setAttribute(s,this.Va(n),l,c)},o.prototype.Va=function(s){return this.ud.U(s,0)},o.prototype.kh=function(){var s=new h.h;return this.D(void 0,s),s.y},o.prototype.hq=function(s,n){s=this.Va(s),n=this.Va(n);var l=this.wb.Aa[0].o;return l[2*s]===l[2*n]&&l[2*s+1]===l[2*n+1]},o.prototype.Fv=function(s,n){s=this.Va(s);var l=this.wb.Aa[0].o;return l[2*s]===n.x&&l[2*s+1]===n.y},o.prototype.rX=function(s,n){if(1>n&&(n=1),this.Ug==null){if(n==1)return;this.Ug=h.Zc.Fn(this.wb.I(),1)}(s=this.Va(s))>=this.Ug.size&&this.Ug.resize(s+1,1),this.Ug.write(s,n)},o.prototype.YF=function(s){return s=this.Va(s),this.Ug==null||s>=this.Ug.size?1:this.Ug.read(s)},o.prototype.Sa=function(s,n,l){n=this.di[n],s=this.Va(s),n.size<this.wb.I()&&n.resize(this.wb.I(),-1),n.write(s,l)},o.prototype.Qa=function(s,n){return(s=this.Va(s))<(n=this.di[n]).size?n.read(s):-1},o.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var s=0;s<this.di.length;s++)if(this.di[s]==null)return this.di[s]=h.Zc.Qh(0,-1),s;return this.di.push(h.Zc.Qh(0,-1)),this.di.length-1},o.prototype.Ud=function(s){this.di[s]=null},o.prototype.cc=function(s){return this.Te!=null?(s=this.Va(s),this.Te[s]):null},o.prototype.fd=function(s,n){var l=this.ud.U(s,2);if(l==-1)return!1;if(this.aA){var c=new h.Ta;this.Xi(s,c),n.setStart(c),this.Xi(l,c),n.setEnd(c)}else this.wb.Hc(this.ud.U(s,0),mi),n.gm(0,mi),this.wb.Hc(this.ud.U(l,0),mi),n.gm(1,mi);return!0},o.prototype.hW=function(s,n,l){if(this.aA){var c=new h.Ta;this.Xi(s,c),l.setStart(c),this.Xi(n,c),l.setEnd(c)}else this.wb.Hc(s,mi),l.gm(0,mi),this.wb.Hc(n,mi),l.gm(1,mi)},o.prototype.wf=function(s,n){if(n!=-1){if(s!=this.Sf(n))throw h.i.Ra();var l=this.es(n)}else l=this.mv(s);var c=this.rU(s);return n!=-1&&this.ep(n,c),this.cp(c,n),this.ep(c,l),l!=-1?this.cp(l,c):this.ap(s,c),n==-1&&this.bp(s,c),this.Tl(s,this.ea(s)+1),c},o.prototype.iG=function(s,n,l,c){s=this.wf(s,-1);for(var d=0,f=n,g=!1;f==l&&(g=!0),this.cj(f,s),d++,(f=this.V(f))!=n;);return this.mn(s,!0),this.Xj(s,d),g&&(n=l),this.Kf(s,n),this.Yg(s,this.Na(n)),this.fp(s,!1),c!=null&&(c[0]=g),s},o.prototype.ar=function(s){var n=this.es(s),l=this.Sb(s),c=this.Sf(s);return n!=-1?this.cp(n,l):this.ap(c,l),l!=-1?this.ep(l,n):this.bp(c,n),this.vO(s),this.Tl(c,this.ea(c)-1),this.nF(s),l},o.prototype.vO=function(s){var n=this.Ya(s);if(n!=-1){for(var l=0,c=this.Ka(s);l<c;l++){var d=n;n=this.V(n),this.Qy(d)}n=this.Sf(s),this.Vj(n,this.I(n)-this.Ka(s))}this.Xj(s,0)},o.prototype.Sb=function(s){return this.nd.U(s,2)},o.prototype.es=function(s){return this.nd.U(s,1)},o.prototype.Ka=function(s){return this.nd.U(s,3)},o.prototype.ec=function(s){return(1&this.Up(s))!=0},o.prototype.mn=function(s,n){if(this.ec(s)!=n){if(0<this.Ka(s)){var l=this.Ya(s),c=this.tj(s);n?(this.Cc(c,l),this.Dc(l,c),l=this.Va(c)):(this.Cc(c,-1),this.Dc(l,-1),l=this.Va(c)),this.Zg(l,null)}this.QB(s,(1|this.Up(s))-1|(n?1:0))}},o.prototype.Sf=function(s){return this.nd.U(s,7)},o.prototype.TS=function(s){return(2&this.Up(s))!=0},o.prototype.KB=function(s,n){this.QB(s,(2|this.Up(s))-2|(n?2:0))},o.prototype.qz=function(s){if(this.YS(s))return this.Qi.get(this.sv(s));var n=new h.zb,l=this.Ya(s);if(l==-1)return 0;var c=new h.h;this.D(l,c);for(var d=0,f=0,g=this.Ka(s);f<g;f++,l=this.V(l)){var w=this.cc(l);if(w==null){if(!this.fd(l,n))continue;w=n}d+=w.Sx(c.x,c.y)}return this.fp(s,!0),this.Qi.set(this.sv(s),d),d},o.prototype.ir=function(s,n,l){n=this.Ek[n],s=this.sv(s),n.size<this.Qi.size&&n.resize(this.Qi.size,-1),n.write(s,l)},o.prototype.uj=function(s,n){return(s=this.sv(s))<(n=this.Ek[n]).size?n.read(s):-1},o.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var s=0;s<this.Ek.length;s++)if(this.Ek[s]==null)return this.Ek[s]=h.Zc.Qh(0),s;return this.Ek.push(h.Zc.Qh(0)),this.Ek.length-1},o.prototype.xB=function(s){this.Ek[s]=null},o.prototype.UT=function(s,n,l){if(l==-1)throw h.i.O();if(n!=l){var c=this.Sb(l),d=this.es(l),f=this.Sf(l);d==-1?this.ap(f,c):this.cp(d,c),c==-1?this.bp(f,d):this.ep(c,d),this.Vj(f,this.I(f)-this.Ka(l)),this.Tl(f,this.ea(f)-1),d=n==-1?this.mv(s):this.es(n),this.ep(l,d),this.cp(l,n),n==-1?this.bp(s,l):this.ep(n,l),d==-1?this.ap(s,l):this.cp(d,l),this.Vj(s,this.I(s)+this.Ka(l)),this.Tl(s,this.ea(s)+1),this.gx(l,s)}},o.prototype.kj=function(s,n){this.wb.we(this.Va(n),this.pm()),this.yj(s,-1,this.pm())},o.prototype.qd=function(s,n){var l=this.cd(s),c=this.Na(s),d=this.V(s);c!=-1&&this.Cc(c,d);var f=this.Ka(l);if(s==this.Ya(l)&&this.Kf(l,1<f?d:-1),d!=-1&&this.Dc(d,c),s==this.tj(l)&&this.Yg(l,1<f?c:-1),c!=-1&&d!=-1){c=this.Va(c);var g=this.Va(d);n?(n=this.Uh(c))!=null&&(c=new h.h,this.wb.D(g,c),n.Rc(c)):(g=this.Va(s),n=this.Uh(g),this.Zg(c,n),n!=null&&(c=this.wb.Oa(c),n.Ec(c)))}return this.Xj(l,f-1),l=this.Sf(l),this.Vj(l,this.I(l)-1),this.Qy(s),d},o.prototype.Ya=function(s){return this.nd.U(s,4)},o.prototype.tj=function(s){return this.nd.U(s,5)},o.prototype.V=function(s){return this.ud.U(s,2)},o.prototype.Na=function(s){return this.ud.U(s,1)},o.prototype.cd=function(s){return this.ud.U(s,3)},o.prototype.hc=function(s,n){return this.yj(s,-1,n)},o.prototype.$q=function(s){if(s===void 0)return this.$q(!1);if(s instanceof u)return new u(s);var n,l=-1,c=-1,d=-1,f=0,g=!1;for(n=this.md;n!=-1;n=this.ve(n))if(!s||h.ba.Ic(this.jc(n))){for(l=this.Ob(n);l!=-1;l=this.Sb(l))if(d=c=this.Ya(l),f=0,c!=-1){g=!0;break}if(g)break}return u.vP(this,n,l,c,d,f,s)},o.prototype.Pc=function(s){if(this.Kl.Pc(s),this.Te!=null)for(var n=0,l=this.Te.length;n<l;n++)this.Te[n]!=null&&this.Te[n].Pc(s)},o.prototype.lr=function(s,n,l,c){c?this.JX(s,n,l):this.IX(s,n,l)},o.prototype.Dc=function(s,n){this.ud.T(s,1,n)},o.prototype.Cc=function(s,n){this.ud.T(s,2,n)},o.prototype.cj=function(s,n){this.ud.T(s,3,n)},o.prototype.Xj=function(s,n){this.nd.T(s,3,n)},o.prototype.Kf=function(s,n){this.nd.T(s,4,n)},o.prototype.Yg=function(s,n){this.nd.T(s,5,n)},o.prototype.Tl=function(s,n){this.dd.T(s,6,n)},o.prototype.Vj=function(s,n){this.dd.T(s,5,n)},o.prototype.kJ=function(s){var n=s;do{var l=this.V(n);this.Cc(n,this.Na(n)),this.Dc(n,l),n=l}while(n!=s)},o.prototype.XB=function(s){this.gd=s},o.prototype.br=function(s){var n=this.es(s),l=this.Sb(s),c=this.Sf(s);n!=-1?this.cp(n,l):this.ap(c,l),l!=-1?this.ep(l,n):this.bp(c,n),this.Kf(s,-1),this.Yg(s,-1),this.nF(s)},o.prototype.oi=function(s,n){var l=this.Na(s),c=this.V(s);if(l!=-1&&this.Cc(l,c),c!=-1&&this.Dc(c,l),l!=-1&&c!=-1)if(l=this.Va(l),c=this.Va(c),n){if((n=this.Uh(l))!=null){var d=new h.h;this.wb.D(c,d),n.Rc(d)}}else n=this.Va(s),n=this.Uh(n),this.Zg(l,n),n!=null&&(d=new h.h,this.wb.D(l,d),n.Ec(d));this.Qy(s)},o.prototype.YS=function(s){return(4&this.Up(s))!=0},o.prototype.fp=function(s,n){this.QB(s,(4|this.Up(s))-4|(n?4:0))},o.prototype.nx=function(s,n){var l=this.ud.o;this.wb.oc();var c=this.wb.Aa[0].o;s.Wd(0,n,function(d,f){var g=l[5*d];d=l[5*f],f=c[2*g],g=c[2*g+1];var w=c[2*d];return g<(d=c[2*d+1])?-1:g>d?1:f<w?-1:f>w?1:0})},o.prototype.eS=function(){for(var s=this.md;s!=-1;s=this.ve(s))if(!h.ba.Ic(this.jc(s)))return!0;return!1},o.prototype.cC=function(s,n){for(var l=this.Ob(s),c=this.Ob(n),d=this.mv(s),f=this.mv(n),g=this.Ob(s);g!=-1;g=this.Sb(g))this.gx(g,n);for(g=this.Ob(n);g!=-1;g=this.Sb(g))this.gx(g,s);this.ap(s,c),this.ap(n,l),this.bp(s,f),this.bp(n,d),l=this.I(s),c=this.ea(s),d=this.ea(n),this.Vj(s,this.I(n)),this.Vj(n,l),this.Tl(s,d),this.Tl(n,c),l=this.dd.U(s,2),this.dd.T(s,2,this.dd.U(n,2)),this.dd.T(n,2,l)},o}(),h.hd=k})(U||(U={})),function(h){var k=function(b){function u(o,s,n,l){var c=b.call(this)||this;return c.aa=new h.l,o===void 0?c.PE():typeof o=="number"?c.QO(o,s,n,l):o instanceof h.Ta?s!==void 0?c.Su(o,s,n):c.RO(o):o instanceof h.sa?s!==void 0?c.TO(o,s):c.SO(o):o instanceof h.l?c.PO(o):c.PE(),c}return xt(u,b),u.prototype.Su=function(o,s,n){this.description=h.fe.pg(),this.aa.Pa(),o.B()||this.vu(o,s,n)},u.prototype.PO=function(o){this.description=h.fe.pg(),this.aa.L(o),this.aa.normalize()},u.prototype.SO=function(o){if(o==null)throw h.i.O();this.description=o,this.aa.Pa()},u.prototype.TO=function(o,s){if(o==null)throw h.i.O();this.description=o,this.aa.L(s),this.aa.normalize()},u.prototype.PE=function(){this.description=h.fe.pg(),this.aa.Pa()},u.prototype.RO=function(o){this.description=h.fe.pg(),this.aa.Pa(),o.B()||this.vu(o)},u.prototype.QO=function(o,s,n,l){this.description=h.fe.pg(),this.L(o,s,n,l)},u.prototype.L=function(o,s,n,l){if(this.wc(),typeof o=="number")this.aa.L(o,s,n,l);else for(this.Pa(),s=0,n=o.length;s<n;s++)this.$b(o[s])},u.prototype.Zo=function(o){if(this.wc(),!o.aT())throw h.i.O();this.aa.L(o)},u.prototype.Pa=function(){this.wc(),this.aa.Pa()},u.prototype.B=function(){return this.aa.B()},u.prototype.S=function(){return this.aa.S()},u.prototype.da=function(){return this.aa.da()},u.prototype.ik=function(){return this.aa.ik()},u.prototype.Lp=function(){return this.aa.Lp()},u.prototype.Kp=function(){return this.aa.tf()},u.prototype.$b=function(o){if(o instanceof h.h)this.wc(),this.aa.$b(o);else if(o instanceof h.l)this.wc(),this.aa.$b(o);else if(o instanceof h.Ta){if(this.wc(),!o.Bc()){var s=o.description;if(this.description!=s&&this.Ll(s),this.B())this.vu(o);else{this.aa.$b(o.D());for(var n=1,l=s.Ba;n<l;n++)for(var c=s.Fd(n),d=h.sa.Wa(c),f=0;f<d;f++){var g=o.Vc(c,f),w=this.Vg(c,f);w.$b(g),this.setInterval(c,f,w)}}}}else if(o instanceof u&&!o.B())for((s=o.description)!=this.description&&this.Ll(s),this.aa.$b(o.aa),n=1,l=s.Ba;n<l;n++)for(c=s.ld(n),d=h.sa.Wa(c),f=0;f<d;f++)g=o.Vg(c,f),(w=this.Vg(c,f)).$b(g),this.setInterval(c,f,w)},u.prototype.vu=function(o,s,n){if(s!==void 0){this.aa.L(o.D(),s,n),n=1;for(var l=(s=o.description).Ba;n<l;n++)for(var c=s.Fd(n),d=h.sa.Wa(c),f=0;f<d;f++){var g=o.Vc(c,f);this.setInterval(c,f,g,g)}}else for(this.aa.L(o.la[0],o.la[1]),n=1,l=(s=o.description).Ba;n<l;n++)for(c=s.Fd(n),d=h.sa.Wa(c),f=0;f<d;f++)g=o.Vc(c,f),this.setInterval(c,f,g,g)},u.prototype.setInterval=function(o,s,n,l){if(n=typeof n=="number"?new h.Oc(n,l):n,this.wc(),o==0)if(s==0)this.aa.v=n.pa,this.aa.C=n.wa;else{if(s!=1)throw h.i.de();this.aa.G=n.pa,this.aa.H=n.wa}else this.qD(0,o,s,n.pa),this.qD(1,o,s,n.wa)},u.prototype.X=function(o,s){this.wc(),this.aa.X(o,s)},u.prototype.Pc=function(o){if(o instanceof h.Ed)this.wc(),o.hC(this.aa);else if(this.wc(),!this.aa.B()){var s=new h.JK;this.So(s),s.SS()?s.Pa():o.hC(s)}},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();if(o.wc(),o.description=this.description,o.aa.L(this.aa),o.la=null,this.la!=null){o.qu();for(var s=0;s<2*(this.description.Be.length-2);s++)o.la[s]=this.la[s]}},u.prototype.Ja=function(){return new u(this.description)},u.prototype.He=function(){return this.aa.rF()},u.prototype.Rb=function(){return this.aa.tR()},u.prototype.K=function(){return 197},u.prototype.Eb=function(){return 2},u.prototype.dn=function(o){this.copyTo(o)},u.prototype.A=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H},u.prototype.So=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H,o.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},u.prototype.Vg=function(o,s){var n=new h.Oc;return n.L(this.Pd(0,o,s),this.Pd(1,o,s)),n},u.prototype.If=function(o,s){s.Pf(this.description);var n=this.description.Ba-1;switch(o){case 0:for(o=0;o<n;o++)for(var l=this.description.ld(o),c=h.sa.Wa(l),d=0;d<c;d++)s.setAttribute(l,d,this.Pd(0,l,d));s.Db(this.aa.v,this.aa.G);break;case 1:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),d=0;d<c;d++)s.setAttribute(l,d,this.Pd(1,l,d));s.Db(this.aa.v,this.aa.H);break;case 2:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),d=0;d<c;d++)s.setAttribute(l,d,this.Pd(0,l,d));s.Db(this.aa.C,this.aa.H);break;case 3:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),d=0;d<c;d++)s.setAttribute(l,d,this.Pd(1,l,d));s.Db(this.aa.C,this.aa.G);break;default:throw h.i.de()}},u.prototype.hB=function(o,s){o=this.aa.hB(o),s.na(o.x,o.y)},u.prototype.fR=function(o,s){return s*(o.Qq-2)},u.prototype.sF=function(o,s,n){if(this.aa.B())throw h.i.ga("empty geometry");if(s==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.sa.Wa(s))throw h.i.O();var l=this.description.Rf(s);return this.qu(),0<=l?this.la[this.fR(this.description,o)+this.description.GR(l)-2+n]:h.sa.te(s)},u.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var o=u.Ig(this.description,0),s=u.Ig(this.description,1),n=0,l=1,c=this.description.Ba;l<c;l++){var d=this.description.ld(l),f=h.sa.Wa(d);d=h.sa.te(d);for(var g=0;g<f;g++)this.la[o+n]=d,this.la[s+n]=d,n++}}},u.prototype.un=function(o){if(this.la!=null)if(2<o.Be.length){for(var s=h.fe.Kw(o,this.description),n=[],l=u.Ig(this.description,0),c=u.Ig(this.description,1),d=u.Ig(o,0),f=u.Ig(o,1),g=0,w=1,$=o.Ba;w<$;w++){var T=o.ld(w),E=h.sa.Wa(T);if(s[w]==-1){var O=h.sa.te(T);for(T=0;T<E;T++)n[d+g]=O,n[f+g]=O,g++}else for(O=this.description.bk(s[w])-2,T=0;T<E;T++)n[d+g]=this.la[l+O],n[f+g]=this.la[c+O],g++,O++}this.la=n}else this.la=null;this.description=o},u.prototype.Pd=function(o,s,n){if(this.aa.B())throw h.i.ga("This operation was performed on an Empty Geometry.");if(s==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.sa.Wa(s))throw h.i.de();var l=this.description.Rf(s);return 0<=l?(this.qu(),this.la[u.Ig(this.description,o)+this.description.bk(l)-2+n]):h.sa.te(s)},u.prototype.qD=function(o,s,n,l){if(this.wc(),s==0)o!=0?n!=0?this.aa.H=l:this.aa.C=l:n!=0?this.aa.G=l:this.aa.v=l;else{if(n>=h.sa.Wa(s))throw h.i.de();if(!this.hasAttribute(s)){if(h.sa.yG(s,l))return;this.se(s)}s=this.description.Rf(s),this.qu(),this.la[u.Ig(this.description,o)+this.description.bk(s)-2+n]=l}},u.Ig=function(o,s){return s*(o.Be.length-2)},u.prototype.Fa=function(o){this.wc();var s=new h.l;return o.A(s),this.aa.Fa(s)},u.prototype.isIntersecting=function(o){return o instanceof h.l?this.aa.isIntersecting(o):this.aa.isIntersecting(o.aa)},u.prototype.Lu=function(o,s){this.wc(),o.B()?this.Pa():s!==void 0?this.vu(o,s,void 0):this.aa.Lu(o.Ng(),o.kh())},u.prototype.offset=function(o,s){this.wc(),this.aa.offset(o,s)},u.prototype.normalize=function(){this.wc(),this.aa.normalize()},u.prototype.tf=function(o){if(o===void 0){if(o=new h.Ta(this.description),this.B())return o;for(s=this.description.Ba,n=1;n<s;n++)for(l=this.description.Fd(n),c=h.sa.Wa(l),d=0;d<c;d++)f=.5*(this.Pd(0,l,d)+this.Pd(1,l,d)),o.setAttribute(l,d,f);return o.Db(this.aa.ik(),this.aa.Lp()),o}if(o.Pf(this.description),this.B())o.Pa();else{for(var s=this.description.Ba,n=1;n<s;n++)for(var l=this.description.ld(n),c=h.sa.Wa(l),d=0;d<c;d++){var f=.5*(this.sF(0,l,d)+this.sF(1,l,d));o.setAttribute(l,d,f)}o.Db(this.aa.tf())}},u.prototype.hz=function(){return new h.Ta(this.aa.hz())},u.prototype.contains=function(o){return o instanceof h.Ta?!o.B()&&this.aa.contains(o.Ng(),o.kh()):this.aa.contains(o.aa)},u.prototype.ZO=function(o){return this.aa.contains(o)},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.aa.Nb(o.aa))return!1;for(var s=0,n=2*(this.description.Be.length-2);s<n;s++)if(this.la[s]!=o.la[s])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(o=h.P.Vh(o,this.aa.dc()),!this.B()&&this.la!=null)for(var s=0,n=2*(this.description.Be.length-2);s<n;s++)o=h.P.Vh(o,this.la[s]);return o},u.prototype.gs=function(){return this.aa.v},u.prototype.js=function(){return this.aa.G},u.prototype.fs=function(){return this.aa.C},u.prototype.hs=function(){return this.aa.H},u.prototype.ng=function(){return h.si.im(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},u}(h.ba);h.Hh=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n){u===void 0?this.Pa():(this.v=u,this.G=o,this.C=s,this.H=n)}return b.construct=function(u,o,s,n){var l=new b;return l.v=u,l.G=o,l.C=s,l.H=n,l},b.prototype.L=function(u,o,s,n){typeof u=="number"?s!==void 0?(this.v=u,this.G=o,this.C=s,this.H=n,this.normalize()):(this.v=u,this.G=o,this.C=u,this.H=o):u instanceof h.h?o!==void 0?(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*s,this.H=this.G+s,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof b?this.L(u.v,u.G,u.C,u.H):u instanceof h.Oc&&(u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa))},b.prototype.bx=function(u,o){if(o!==void 0)if(o==0)this.Pa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var s=1;s<o;s++){var n=u[s];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(u==null||u.length==0)this.Pa();else for(n=u[0],this.L(n.x,n.y),s=1;s<u.length;s++)o=u[s],this.Nk(o.x,o.y)},b.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.$b=function(u,o){typeof u=="number"?this.B()?(this.v=u,this.G=o,this.C=u,this.H=o):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)):u instanceof h.h||u instanceof h.Od?this.$b(u.x,u.y):u instanceof b&&!u.B()&&(this.$b(u.v,u.G),this.$b(u.C,u.H))},b.prototype.Nk=function(u,o){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)},b.prototype.X=function(u,o){this.B()||(this.v-=u,this.C+=u,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Pa())},b.prototype.scale=function(u){0>u&&this.Pa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},b.prototype.zoom=function(u,o){this.B()||this.L(this.tf(),u*this.S(),o*this.da())},b.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},b.prototype.CG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},b.prototype.Fa=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Pa(),u)},b.prototype.hB=function(u){switch(u){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.de()}},b.prototype.iB=function(u){if(u==null||4>u.length)throw h.i.O();u[0]!=null?u[0].na(this.v,this.G):u[0]=h.h.construct(this.v,this.G),u[1]!=null?u[1].na(this.v,this.H):u[1]=h.h.construct(this.v,this.H),u[2]!=null?u[2].na(this.C,this.H):u[2]=h.h.construct(this.C,this.H),u[3]!=null?u[3].na(this.C,this.G):u[3]=h.h.construct(this.C,this.G)},b.prototype.rF=function(){return this.B()?0:this.S()*this.da()},b.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},b.prototype.ik=function(){return(this.C+this.v)/2},b.prototype.Lp=function(){return(this.H+this.G)/2},b.prototype.S=function(){return this.C-this.v},b.prototype.da=function(){return this.H-this.G},b.prototype.move=function(u,o){this.B()||(this.v+=u,this.G+=o,this.C+=u,this.H+=o)},b.prototype.Lu=function(u,o){if(o!==void 0)this.move(u-this.ik(),o-this.Lp());else if(u instanceof h.h)this.Lu(u.x,u.y);else{if(!(u instanceof h.Ta))throw h.i.O();o=(this.C-this.v)/2;var s=(this.H-this.G)/2;this.v=u.Ng()-o,this.C=u.Ng()+o,this.G=u.kh()-s,this.H=u.kh()+s}},b.prototype.offset=function(u,o){this.v+=u,this.C+=u,this.G+=o,this.H+=o},b.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=u,this.C=o,u=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=u,this.H=o}},b.prototype.fn=function(u){u.na(this.v,this.G)},b.prototype.VI=function(u){u.na(this.C,this.G)},b.prototype.YI=function(u){u.na(this.v,this.H)},b.prototype.gn=function(u){u.na(this.C,this.H)},b.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},b.prototype.tf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},b.prototype.hz=function(){return h.h.construct(this.v,this.G)},b.prototype.contains=function(u,o){if(o!==void 0)return u>=this.v&&u<=this.C&&o>=this.G&&o<=this.H;if(u instanceof h.Ta)return this.contains(u.Ng(),u.kh());if(u instanceof h.h)return this.contains(u.x,u.y);if(u instanceof b)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw h.i.O()},b.prototype.jm=function(u,o){if(o!==void 0)return u>this.v&&u<this.C&&o>this.G&&o<this.H;if(u instanceof h.h)return this.jm(u.x,u.y);if(u instanceof b)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw h.i.O()},b.prototype.Nb=function(u){return u==this||u instanceof b&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},b.prototype.dc=function(){var u=this.v;u=h.P.truncate(u^u>>>32);var o=h.P.Vh(u);return u=this.C,u=h.P.truncate(u^u>>>32),o=h.P.Vh(u,o),u=this.G,u=h.P.truncate(u^u>>>32),o=h.P.Vh(u,o),u=this.H,u=h.P.truncate(u^u>>>32),h.P.Vh(u,o)},b.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},b.prototype.uy=function(u,o){var s=this.ak(u),n=this.ak(o);if(s&n)return 0;if(!(s|n))return 4;var l=(s!=0?1:0)|(n!=0?2:0);do{var c=o.x-u.x,d=o.y-u.y;if(c>d?s&b.TC?(s&b.lu?(u.y+=d*(this.v-u.x)/c,u.x=this.v):(u.y+=d*(this.C-u.x)/c,u.x=this.C),s=this.ak(u)):n&b.TC?(n&b.lu?(o.y+=d*(this.v-o.x)/c,o.x=this.v):(o.y+=d*(this.C-o.x)/c,o.x=this.C),n=this.ak(o)):s!=0?(s&b.mu?(u.x+=c*(this.G-u.y)/d,u.y=this.G):(u.x+=c*(this.H-u.y)/d,u.y=this.H),s=this.ak(u)):(n&b.mu?(o.x+=c*(this.G-o.y)/d,o.y=this.G):(o.x+=c*(this.H-o.y)/d,o.y=this.H),n=this.ak(o)):s&b.UC?(s&b.mu?(u.x+=c*(this.G-u.y)/d,u.y=this.G):(u.x+=c*(this.H-u.y)/d,u.y=this.H),s=this.ak(u)):n&b.UC?(n&b.mu?(o.x+=c*(this.G-o.y)/d,o.y=this.G):(o.x+=c*(this.H-o.y)/d,o.y=this.H),n=this.ak(o)):s!=0?(s&b.lu?(u.y+=d*(this.v-u.x)/c,u.x=this.v):(u.y+=d*(this.C-u.x)/c,u.x=this.C),s=this.ak(u)):(n&b.lu?(o.y+=d*(this.v-o.x)/c,o.x=this.v):(o.y+=d*(this.C-o.x)/c,o.x=this.C),n=this.ak(o)),(s&n)!=0)return 0}while(s|n);return l},b.prototype.ak=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},b.prototype.Di=function(u){return!this.B()&&(this.S()<=u||this.da()<=u)},b.prototype.ub=function(u){return u instanceof h.h?Math.sqrt(this.dK(u)):Math.sqrt(this.px(u))},b.prototype.px=function(u){var o=0,s=0,n=this.v-u.C;return n>o&&(o=n),(n=this.G-u.H)>s&&(s=n),(n=u.v-this.C)>o&&(o=n),(n=u.G-this.H)>s&&(s=n),o*o+s*s},b.prototype.dK=function(u){var o=0,s=0,n=this.v-u.x;return n>o&&(o=n),(n=this.G-u.y)>s&&(s=n),(n=u.x-this.C)>o&&(o=n),(n=u.y-this.H)>s&&(s=n),o*o+s*s},b.prototype.en=function(u){this.B()?u.Pa():u.L(this.v,this.C)},b.lu=1,b.mu=4,b.TC=3,b.UC=12,b}();h.l=k}(U||(U={})),function(h){var k,b;(b=k||(k={}))[b.initialize=0]="initialize",b[b.initializeRed=1]="initializeRed",b[b.initializeBlue=2]="initializeBlue",b[b.initializeRedBlue=3]="initializeRedBlue",b[b.sweep=4]="sweep",b[b.sweepBruteForce=5]="sweepBruteForce",b[b.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",b[b.sweepRedBlue=7]="sweepRedBlue",b[b.sweepRed=8]="sweepRed",b[b.sweepBlue=9]="sweepBlue",b[b.iterate=10]="iterate",b[b.iterateRed=11]="iterateRed",b[b.iterateBlue=12]="iterateBlue",b[b.iterateBruteForce=13]="iterateBruteForce",b[b.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",b[b.resetRed=15]="resetRed",b[b.resetBlue=16]="resetBlue";var u=function(){function o(s,n){this.ei=s,this.ZG=n}return o.prototype.qr=function(s,n,l){this.ei.FX(l,s,n,this.ZG)},o.prototype.bq=function(s){return this.ei.Tr(s,this.ZG)},o}();k=function(){function o(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new h.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return o.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},o.prototype.bd=function(s,n){if(!this.Rv)throw h.i.Hb();var l=new h.l;l.L(n),this.io.add(s),this.Fb.push(l)},o.prototype.Hp=function(){if(!this.Rv)throw h.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},o.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},o.prototype.DD=function(s,n){if(!this.Qv)throw h.i.Hb();var l=new h.l;l.L(n),this.io.add(s),this.Fb.push(l)},o.prototype.dF=function(){if(!this.Qv)throw h.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},o.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new h.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},o.prototype.zD=function(s,n){if(!this.Pv)throw h.i.Hb();var l=new h.l;l.L(n),this.ew.add(s),this.rd.push(l)},o.prototype.cF=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},o.prototype.next=function(){if(this.Jc)return!1;for(var s=!0;s;)switch(this.Yb){case 0:s=this.Bz();break;case 1:s=this.mS();break;case 2:s=this.jS();break;case 3:s=this.lS();break;case 4:s=this.QX();break;case 5:s=this.MX();break;case 6:s=this.NX();break;case 7:s=this.OX();break;case 8:s=this.tx();break;case 9:s=this.dC();break;case 10:s=this.Pz();break;case 11:s=this.eT();break;case 12:s=this.bT();break;case 13:s=this.cT();break;case 14:s=this.dT();break;case 15:s=this.fJ();break;case 16:s=this.eJ();break;default:throw h.i.Ra()}return!this.Jc},o.prototype.WB=function(s){this.ra=s},o.prototype.oz=function(s){return this.Fb[s]},o.prototype.Wy=function(s){return this.rd[s]},o.prototype.pl=function(s){return this.io.read(s)},o.prototype.jl=function(s){return this.ew.read(s)},o.Oz=function(s){return(1&s)==1},o.gq=function(s){return(1&s)==0},o.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},o.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var n=this.Fb[s];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},o.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var n=this.Fb[s];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},o.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.ff.mr();for(var s=0;s<this.rd.length;s++){var n=this.rd[s];this.ff.Dr(n.v,n.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),s=0;s<2*this.rd.length;s++)this.Ff.add(s);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},o.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.sd.mr();for(var s=0;s<this.Fb.length;s++){var n=this.Fb[s];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.ff.mr(),s=0;s<this.rd.length;s++)n=this.rd[s],this.ff.Dr(n.v,n.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),s=0;s<2*this.Fb.length;s++)this.Md.add(s);for(s=0;s<2*this.rd.length;s++)this.Ff.add(s);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},o.prototype.QX=function(){var s=this.Md.get(--this.qe),n=s>>1;return o.gq(s)?(this.sd.remove(n),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Xf=n,this.Yb=10,!0)},o.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},o.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},o.prototype.OX=function(){var s=this.Md.get(this.qe-1),n=this.Ff.get(this.Tg-1),l=this.Tr(s,!0),c=this.Tr(n,!1);return l>c?this.tx():l<c?this.dC():o.Oz(s)?this.tx():o.Oz(n)?this.dC():this.tx()},o.prototype.tx=function(){var s=this.Md.get(--this.qe),n=s>>1;if(o.gq(s))return this.Ef!=-1&&this.Kj.get(n)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(n)),this.Kj.set(n,-1)):this.sd.remove(n),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(s=this.Bd.sc(this.Df);s!=-1;){var l=this.Bd.getData(s);this.ff.xj(l),this.Jj.set(l,-1),l=this.Bd.lb(s),this.Bd.kd(this.Df,s),s=l}return 0<this.ff.size()?(this.qw.zB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Xf=n,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Kj=new h.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(n,this.Bd.addElement(this.Ef,n)),this.Yb=7),!0},o.prototype.dC=function(){var s=this.Ff.get(--this.Tg),n=s>>1;if(o.gq(s))return this.Df!=-1&&this.Jj.get(n)!=-1?(this.Bd.kd(this.Df,this.Jj.get(n)),this.Jj.set(n,-1)):this.ff.remove(n),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(s=this.Bd.sc(this.Ef);s!=-1;){var l=this.Bd.getData(s);this.sd.xj(l),this.Kj.set(l,-1),l=this.Bd.lb(s),this.Bd.kd(this.Ef,s),s=l}return 0<this.sd.size()?(this.qo.zB(this.rd[n].v,this.rd[n].C,this.ra),this.Bf=n,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Jj=new h.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(n,this.Bd.addElement(this.Df,n)),this.Yb=7),!0},o.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var s=this.Md.get(this.qe)>>1;return this.sd.xj(s),this.Yb=4,!0},o.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var s=this.Ff.get(this.Tg)>>1;return this.ff.xj(s),this.Yb=7,!0},o.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var s=this.Md.get(this.qe)>>1;return this.sd.xj(s),this.Yb=7,!0},o.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var s=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(s)||(this.Bf=this.Tg,!1)},o.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var s=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(s)||(this.Bf=this.Tg,!1)},o.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},o.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},o.prototype.Mt=function(s,n,l){this.Cm==null&&(this.Cm=new h.Zt),l=new u(this,l),this.Cm.sort(s,0,n,l)},o.prototype.FX=function(s,n,l,c){var d=this;s.Wd(n,l,function(f,g){var w=d.Tr(f,c),$=d.Tr(g,c);return w<$||w==$&&o.gq(f)&&o.Oz(g)?-1:1})},o.prototype.Tr=function(s,n){var l=.5*this.ra;return n?(n=this.Fb[s>>1],o.gq(s)?n.G-l:n.H+l):(n=this.rd[s>>1],o.gq(s)?n.G-l:n.H+l)},o}(),h.sC=k}(U||(U={})),function(h){var k=function(){function b(){}return b.construct=function(u,o,s,n,l,c){var d=new b;return d.v=u,d.G=o,d.Xe=s,d.C=n,d.H=l,d.Dg=c,d},b.prototype.Pa=function(){this.Xe=this.v=NaN},b.prototype.B=function(){return isNaN(this.v)},b.prototype.SS=function(){return isNaN(this.Xe)},b.prototype.L=function(u,o,s,n,l,c){n!==void 0?typeof u=="number"?(this.v=u,this.G=o,this.Xe=s,this.C=n,this.H=l,this.Dg=c):(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*s,this.H=this.G+s,this.Xe=u.z-.5*n,this.Dg=this.Xe+n):(this.v=u,this.G=o,this.Xe=s,this.C=u,this.H=o,this.Dg=s)},b.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Xe+=u.z,this.C+=u.x,this.H+=u.y,this.Dg+=u.z},b.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},b.prototype.Nk=function(u,o,s){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Xe)==0?this.Xe>s?this.Xe=s:this.Dg<s&&(this.Dg=s):this.Dg=this.Xe=s},b.prototype.$b=function(u,o,s){if(typeof u=="number")this.B()?(this.v=u,this.G=o,this.Xe=s,this.C=u,this.H=o,this.Dg=s):this.Nk(u,o,s);else if(u instanceof h.Od)this.$b(u.x,u.y,u.z);else{if(!(u instanceof b))throw h.i.O();u.B()||(this.$b(u.v,u.G,u.Xe),this.$b(u.C,u.H,u.Dg))}},b.prototype.construct=function(u,o,s){u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa,this.Xe=s.pa,this.Dg=s.wa)},b.prototype.iB=function(u){if(u==null||8>u.length)throw h.i.O();u[0]=new h.Od(this.v,this.G,this.Xe),u[1]=new h.Od(this.v,this.H,this.Xe),u[2]=new h.Od(this.C,this.H,this.Xe),u[3]=new h.Od(this.C,this.G,this.Xe),u[4]=new h.Od(this.v,this.G,this.Dg),u[5]=new h.Od(this.v,this.H,this.Dg),u[6]=new h.Od(this.C,this.H,this.Dg),u[7]=new h.Od(this.C,this.G,this.Dg)},b.prototype.bx=function(u){if(u==null||u.length==0)this.Pa();else{var o=u[0];for(this.L(o.x,o.y,o.z),o=1;o<u.length;o++){var s=u[o];this.Nk(s.x,s.y,s.z)}}},b}();h.JK=k}(U||(U={})),function(h){(function(k){k.Ra=function(){var b=Error();return b.message="Internal Error",b},k.Fe=function(){var b=Error();return b.message="Not Implemented",b},k.Zk=function(){var b=Error();return b.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",b},k.Hb=function(){var b=Error();return b.message="Invalid Call",b},k.O=function(b){var u=Error();return u.message="Illegal Argument Exception",b!==void 0&&(u.message+=": "+b),u},k.hu=function(b){var u=Error();return u.message=b!==void 0?"Runtime Exception: "+b:"Runtime Exception.",u},k.ga=function(b){var u=Error();return u.message="Geometry Exception: "+b,u},k.BK=function(){var b=Error();return b.message="Assert Failed Exception",b},k.de=function(){var b=Error();return b.message="IndexOutOfBoundsException",b},k.RC=function(){var b=Error();return b.message="UserCancelException",b}})(h.i||(h.i={}))}(U||(U={})),function(h){(h=h.dm||(h.dm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(U||(U={})),function(h){var k=function(){function o(s,n){this.Xa=s,this.AH=n,this.GH=-1,this.ul=!1}return o.prototype.re=function(){},o.prototype.next=function(){if(++this.GH==this.AH.I())return null;var s=this.AH.Oa(this.GH);s.scale(this.Xa.fc);var n=new h.Ea;return this.Xa.ny(s,this.ul,n),n},o.prototype.Ma=function(){return 0},o}(),b=function(){function o(s,n,l){this.Xa=s,this.tw=n,this.Zn=!1,this.fo=l,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new h.Ea,this.wk=[]}return o.prototype.re=function(){},o.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var s=h.ba.kg(this.sq);return h.Hg.Ok(s,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}s=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var n=this.wk.length=0,l=new h.h,c=new h.h,d=[0];this.td.Ia()&&8>this.AA;){var f=this.td.ia();if(l.N(f.bc()),c.N(f.xc()),l.scale(this.Xa.fc),c.scale(this.Xa.fc),h.ej.Ou(l,c)?l.x=c.x:h.ej.Mu(l,c)&&(c.x=l.x),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,l,c,this.Xa.LA,this.Xa.at,d,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(f=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,f,f.length-1)),h.ej.Nu(l,c)?(this.sq.Pa(),this.Xa.ny(l,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(d[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}s==null&&(s=new h.Ea).$k(null,0),this.JD(s),n++}if(this.dw[0]=0,0<n){for(d=this.td.xb();0<n;)this.td.ni(),l.N(this.tw.Oa(this.td.xb())),c.N(this.tw.Oa(this.td.kk())),l.scale(this.Xa.fc),c.scale(this.Xa.fc),this.ul&&(h.ej.Ou(l,c)?l.x=c.x:h.ej.Mu(l,c)&&(c.x=l.x)),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,c,l,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(s),n--;return l.N(this.tw.Oa(this.td.xb())),l.scale(this.Xa.fc),u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,l,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,s,NaN,NaN),this.td.Wb(d),this.td.ia(),n=h.ua.mj(null,s,!0),h.Hg.Ok(s,n,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),s=h.ba.kg(this.sq),h.Hg.Ok(s,this.Xa.Cq,!0,!0,this.Xa.Vb)},o.prototype.JD=function(s){var n=this.wk[0],l=this.Pj[0]-1.570796326794897,c=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var d=this.fi+1.570796326794897;l=d+3.141592653589793-(this.fi-this.Pj[0])}else l=(d=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var f=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),g=!1;if(Math.abs(l-d)<=.5*this.Xa.co)if(f){var w=s.Oa(s.I()-2);w.scale(this.Xa.fc);var $=new h.ha(0);for(h.kb.Sy(this.Xa.Ub,this.Xa.lc,n.x,n.y,w.x,w.y,$),w=$.u;w<=d;)w+=6.283185307179586;for(;w>d;)w-=6.283185307179586;w<l&&(g=!0)}else g=!0;g?(s.yB(0,s.I()-1),this.ul||((n=new h.h).N(s.Oa(s.I()-1)),n.scale(this.Xa.fc),-3.141592653589793>n.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<n.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),f||(l=.5*(l+d))):(f?((d=new h.h).N(n),d.scale(1/this.Xa.fc),s.xf(0,-1,d)):u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],d,l,this.Xa.co,this.ul,this.uk,s,NaN,NaN),this.AA+=1)}u.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,l,c,this.ul,this.uk,s),this.fi=this.Is[0]},o.prototype.sy=function(s,n){return this.Xa.sy(this.wk,s,this.Pj[0],this.Is[0],this.ul,n)},o.prototype.Ma=function(){return 0},o}(),u=function(){function o(){}return o.buffer=function(s,n,l,c,d,f){if(s==null)throw h.i.O("Geometry::Geodesic_bufferer::buffer");if(s.B())return new h.Ea(s.description);var g=new o;g.Sg=n,g.Kc=h.cb.tc(n);var w=h.cb.xv(g.Kc);if(g.Vb=f,g.Ub=h.cb.gv(g.Kc),g.lc=w*(2-w),g.fc=g.Kc.Id().ci,g.ra=g.Sg.Mn(),g.Cq=g.Kc.Mn(),g.at=g.Cq*g.fc,g.Bq=1.570796326794897/g.fc,g.KY=3.141592653589793/g.fc,g.Ls=6.283185307179586/g.fc,g.LY=g.Ls/6,g.GA=0,g.JY=1.5707963267948966*g.Ub/g.GA,l==4?(g.Ae=2,g.Yv=!0):(g.Ae=l,g.Yv=!1),g.La=c,g.sb=Math.abs(c),isNaN(d)||.001>d?g.tX():g.bo=d,l=s.K(),h.ba.zd(l)?((l=new h.Ua(s.description)).pc(s,!0),s=l,l=1607):l==197&&(l=new h.l,s.A(l),l.S()<=g.ra||l.da()<=g.ra?((l=new h.Ua(s.description)).bd(s,!1),s=l,l=1607):((l=new h.Ea(s.description)).bd(s,!1),s=l,l=1736)),g.uX(),h.ba.Tn(l)||g.vX(),g.sb<=.5*g.bo)return l!=1736?new h.Ea(s.description):g.Yv?s:h.ej.Sr(s,g.Sg,g.Ae,g.LA,-1,f);if(0>g.La&&l!=1736)return new h.Ea(s.description);if(g.Yv&&h.ba.Ic(l)?(n=h.ej.Sr(s,n,4,NaN,g.bo,f),s=h.cb.Bh(n,g.Sg,g.Kc)):s=h.cb.Bh(s,g.Sg,g.Kc),(s=h.Jh.nj(s,g.Kc)).B())return new h.Ea(s.description);switch(!g.Yv&&h.ba.Ic(l)&&(s=h.ej.kI(g.fc,s)),s=o.GX(s,g.Kc),l){case 1736:n=g.PN(s);break;case 1607:n=g.QN(s);break;case 550:n=g.NN(s);break;case 33:n=g.ON(s);break;default:throw h.i.ga("corrupted_geometry")}return(g=h.cb.Bh(n,g.Kc,g.Sg)).Ll(s.description),g},o.prototype.PN=function(s){var n=new h.Ea;s=new b(this,s,n),s=h.Ih.local().W(s,this.Kc,this.Vb).next(),s=h.kp.pj(s,this.Kc,2);var l=new h.Ed;return l.scale(1/this.fc,1/this.fc),n.Pc(l),n=h.kp.pj(n,this.Kc,2),0<=this.La?h.Ih.local().W(n,s,this.Kc,this.Vb):h.mp.local().W(n,s,this.Kc,this.Vb)},o.prototype.QN=function(s){return s=new b(this,s,null),s=h.Ih.local().W(s,this.Kc,this.Vb).next(),h.kp.pj(s,this.Kc,2)},o.prototype.NN=function(s){return s=new k(this,s),s=h.Ih.local().W(s,this.Kc,this.Vb).next(),h.kp.pj(s,this.Kc,2)},o.prototype.ON=function(s){(s=s.D()).scale(this.fc);var n=new h.Ea;return this.ny(s,!1,n),h.kp.pj(n,this.Kc,2)},o.prototype.sy=function(s,n,l,c,d,f){var g=s[0],w=s[s.length-1],$=g.y>w.y?g.y:w.y,T=h.F.q(this.Ub,this.lc,g.y<w.y?g.y:w.y);if($=h.F.q(this.Ub,this.lc,$),.001<this.GA-(T+n+this.sb)&&.001<this.GA+($-n-this.sb))return!1;T=(n=l-1.570796326794897)-3.141592653589793,$=n+3.141592653589793;var E=(l=c+1.570796326794897)+3.141592653589793,O=[NaN],P=[NaN],R=[NaN],F=[NaN];if(c=!1,o.ZI(this.Ub,this.lc,this.sb,g,n,T,w,l,O,P),o.ZI(this.Ub,this.lc,this.sb,w,E,l,g,T,R,F),(l<O[0]&&O[0]<E||l<P[0]&&P[0]<E)&&(c=!0),c||(T<R[0]&&R[0]<n||T<F[0]&&F[0]<n)&&(c=!0),!c&&d)return!1;for(var V=[],L=s.length-1;0<=L;L--)V.push(s[L]);return f.Pa(),f.$k(null,0),L=[0],o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,s,n,l,d,L,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,w,l,E,this.co,d,L,f,O[0],P[0]),o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,V,E,$,d,L,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,g,T,n,this.co,d,L,f,R[0],F[0]),s=!1,d||(s=this.DE(this.fc,f)),c||s},o.prototype.ny=function(s,n,l){l.Pa(),l.$k(null,0),o.Jr(this.Ub,this.lc,this.fc,this.sb,s,-this.co,6.283185307179586,this.co,n,[0],l,NaN,NaN),n||this.DE(this.fc,l)},o.prototype.DE=function(s,n){var l=this.qO(s,n);return s=this.rO(s,n),l||s},o.prototype.qO=function(s,n){var l=n.I(),c=!1,d=new h.l;if(n.A(d),!h.s.$(d.H*s,1.570796326794897)&&!h.s.$(d.G*s,-1.570796326794897))return!1;var f=new h.h;for(--l;0<=l;l--)n.D(l,f),(f.y==d.H&&h.s.$(f.y*s,1.570796326794897)||f.y==d.G&&h.s.$(f.y*s,-1.570796326794897))&&(c=!0,this.JI(f,l,n));return c},o.prototype.rO=function(s,n){var l=n.Oa(0),c=n.Oa(n.I()-1);return 3.141592653589793<Math.abs(l.x-c.x)*s?(this.QV(n),!0):this.pO(n)},o.prototype.pO=function(s){return 0>s.He()&&(this.PV(s),!0)},o.prototype.JI=function(s,n,l){var c=l.I(),d=0<n?n-1:c-1;if(c=l.Oa(n<c-1?n+1:0),d=l.Oa(d),!h.s.$(c.y,s.y)&&!h.s.$(c.x,s.x)){var f=new h.h;f.na(c.x,s.y),l.Db(n,f)}h.s.$(d.y,s.y)||h.s.$(d.x,s.x)||((c=new h.h).na(d.x,s.y),l.xf(0,n,c))},o.prototype.QV=function(s){var n=new h.Ea,l=new h.Ea,c=new h.Ed,d=s.Oa(0),f=s.Oa(s.I()-1),g=new h.h;d.x>f.x?(f=this.Bq,c.ig(-this.Ls,0)):(f=-this.Bq,c.ig(this.Ls,0)),n.add(s,!1),s.Pa(),l.add(n,!1),l.Pc(c),d=new h.l,l.A(d),d.X((this.Ls-d.S())/2,0),d.G=-this.Bq,d.H=this.Bq;for(var w=0;w<l.I();w++)l.D(w,g),n.xf(0,-1,g);for(l.Pc(c),w=0;w<l.I();w++)l.D(w,g),n.xf(0,-1,g);l=n.Oa(0),c=n.Oa(n.I()-1),g.na(c.x,f),n.xf(0,-1,g),g.na(.5*(c.x+l.x),f),n.xf(0,-1,g),g.na(l.x,f),n.xf(0,-1,g),n=h.Jh.ms(n,this.Kc,2,!0,d.v),n=h.Jh.ms(n,this.Kc,2,!0,d.C),n=h.Vd.clip(n,d,this.Cq,NaN),s.add(n,!1)},o.prototype.PV=function(s){var n=new h.l;s.A(n),n.X((this.Ls-n.S())/2,0),n.G=-this.Bq,n.H=this.Bq,s.$k(null,0);var l=new h.h;l.na(n.v,n.G),s.xf(1,-1,l),l.na(n.v,n.H),s.xf(1,-1,l),l.na(.5*(n.v+n.C),n.H),s.xf(1,-1,l),l.na(n.C,n.H),s.xf(1,-1,l),l.na(n.C,n.G),s.xf(1,-1,l),l.na(.5*(n.v+n.C),n.G),s.xf(1,-1,l)},o.my=function(s,n,l,c,d,f,g,w,$,T,E){var O=null;$||((O=new h.h).Sc(),0<E.I()&&(O.N(E.Oa(E.I()-1)),O.scale(l)));var P=new h.ha(0),R=new h.ha(0),F=new h.ha(0),V=new h.h,L=new h.h,G=f[f.length-1];l=1/l;for(var J=0;J<f.length;J++){var H=f[J];if(J==0)var te=g;else J==f.length-1?te=w:(h.kb.xd(s,n,G.x,G.y,H.x,H.y,null,null,P,d),te=P.u-1.570796326794897);h.kb.Ai(s,n,H.x,H.y,c,te,R,F),$?L.na(R.u,F.u):(V.na(R.u,F.u),o.bJ(H.x,V.x,O.x,T),L.na(T[0]+V.x,V.y),O.N(L)),L.scale(l),E.xf(0,-1,L)}},o.Jr=function(s,n,l,c,d,f,g,w,$,T,E,O,P){if(!(g-f<w)){var R=new h.ha(0),F=new h.ha(0),V=new h.h,L=new h.h,G=null;$||((G=new h.h).Sc(),0<E.I()&&(G.N(E.Oa(E.I()-1)),G.scale(l)));var J=h.P.truncate(Math.ceil(f/w)),H=J++*w;for(H==f&&(H=J++*w),l=1/l;H<g+w&&(f<O&&O<H?(H=O,J--):f<P&&P<H&&(H=P,J--),!(H>=g));)h.kb.Ai(s,n,d.x,d.y,c,H,R,F),$?L.na(R.u,F.u):(V.na(R.u,F.u),o.bJ(d.x,V.x,G.x,T),L.na(T[0]+V.x,V.y),G.N(L)),L.scale(l),E.xf(0,-1,L),f=H,H=J++*w}},o.ZI=function(s,n,l,c,d,f,g,w,$,T){var E=new h.h,O=new h.h,P=new h.ha(0),R=new h.ha(0);for(h.kb.Ai(s,n,c.x,c.y,l,d,P,R),E.na(P.u,R.u),h.kb.Ai(s,n,c.x,c.y,l,f,P,R),O.na(P.u,R.u),l=new h.ha(0),h.kb.Sy(s,n,g.x,g.y,E.x,E.y,l),$[0]=l.u,h.kb.Sy(s,n,g.x,g.y,O.x,O.y,l),T[0]=l.u;$[0]<=T[0];)$[0]+=6.283185307179586;for(;$[0]>T[0];)$[0]-=6.283185307179586;for(;$[0]>=w;)$[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;$[0]<w;)$[0]+=6.283185307179586,T[0]+=6.283185307179586},o.bJ=function(s,n,l,c){if(isNaN(l)){for(;3.141592653589793<c[0]+n-s;)c[0]-=6.283185307179586;for(;3.141592653589793<s-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-l?c[0]-=6.283185307179586:3.141592653589793<l-(c[0]+n)&&(c[0]+=6.283185307179586)},o.GX=function(s,n){var l=s.K(),c=h.ba.Ic(l)?s.ea():l==550?s.I():1;if(c==1)return s;var d=new h.ja(0);d.resize(c);for(var f=[],g=new h.l,w=0;w<c;w++){if(d.write(w,w),h.ba.Ic(l)){s.Tj(w,g);var $=g.tf()}else $=s.Oa(w);$=h.SK.WX(n,$),f[w]=$}for(d.Wd(0,d.size,function(T,E){return f[T]<f[E]?-1:f[T]>f[E]?1:0}),n=s.Ja(),w=0;w<c;w++)g=d.read(w),h.ba.Ic(l)?n.addPath(s,g,!0):n.Gd(s,g,g+1);return n},o.prototype.uX=function(){var s=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);s=Math.min(s,.39269908169872414*this.Ub);var n=new h.h;n.na(0,10*this.fc);var l=45*this.fc,c=new h.ha(0),d=new h.ha(0),f=new h.ha(0),g=new h.ha(0),w=new h.ha(0),$=new h.ha(0),T=new h.ha(0),E=new h.ha(0),O=new h.h,P=new h.h,R=new h.h,F=new h.h;h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,0,c,d),O.na(c.u,d.u),h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,l,f,g),P.na(f.u,g.u),c=new h.ha(0),d=new h.ha(0);for(var V=new h.ha(0);h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,.5*(0+l),w,$),R.na(w.u,$.u),h.kb.xd(this.Ub,this.lc,O.x,O.y,P.x,P.y,c,d,null,2),h.kb.qj(this.Ub,this.lc,O.x,O.y,.5*c.u,d.u,T,E,2),F.na(T.u,E.u),h.kb.xd(this.Ub,this.lc,R.x,R.y,F.x,F.y,V,null,null,2),!(V.u<=this.bo);)l*=.9,h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,l,f,g),P.na(f.u,g.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},o.prototype.vX=function(){var s=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);s=Math.min(s,.39269908169872414*this.Ub);var n=new h.h,l=new h.h;n.na(0,10*this.fc),l.na(10*this.fc,10*this.fc);var c=new h.ha(0),d=new h.ha(0),f=new h.ha(0);h.kb.xd(this.Ub,this.lc,n.x,n.y,l.x,l.y,f,c,d,this.Ae);var g=new h.ha(0),w=new h.ha(0),$=new h.ha(0),T=new h.ha(0),E=new h.h,O=new h.ha(0),P=new h.ha(0),R=new h.ha(0),F=new h.ha(0),V=new h.ha(0),L=new h.ha(0),G=new h.ha(0),J=new h.ha(0),H=new h.ha(0),te=new h.h,Q=new h.h,ae=new h.h,pe=new h.h,he=1;c=c.u,d=d.u+1.570796326794897,f=f.u,h.kb.Ai(this.Ub,this.lc,n.x,n.y,s,c-1.570796326794897,P,R),te.na(P.u,R.u),h.kb.Ai(this.Ub,this.lc,l.x,l.y,s,d,F,V),Q.na(F.u,V.u),P=new h.ha(0),R=new h.ha(0),d=new h.ha(0);for(var Ae=new h.ha(0);h.kb.qj(this.Ub,this.lc,n.x,n.y,.5*(0+he)*f,c,g,w,this.Ae),E.na(g.u,w.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,E.x,E.y,null,null,O,this.Ae),h.kb.Ai(this.Ub,this.lc,E.x,E.y,s,O.u+1.570796326794897,L,G),ae.na(L.u,G.u),h.kb.xd(this.Ub,this.lc,te.x,te.y,Q.x,Q.y,P,R,null,2),h.kb.qj(this.Ub,this.lc,te.x,te.y,.5*P.u,R.u,J,H,2),pe.na(J.u,H.u),h.kb.xd(this.Ub,this.lc,ae.x,ae.y,pe.x,pe.y,d,null,null,2),!(d.u<=this.bo);)he*=.9,h.kb.qj(this.Ub,this.lc,n.x,n.y,he*f,c,$,T,this.Ae),l.na($.u,T.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,l.x,l.y,null,null,Ae,this.Ae),h.kb.Ai(this.Ub,this.lc,l.x,l.y,s,Ae.u+1.570796326794897,F,V),Q.na(F.u,V.u);1e5<(s=he*f)&&(s=1e5),this.LA=s},o.prototype.tX=function(){var s=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/s&&(s=this.sb/500),.01>s&&(s=.01),this.bo=s},o}();h.QK=u}(U||(U={})),function(h){var k=function(){function b(){}return b.Of=function(u,o){var s=new h.h;s.N(o),u.push(s)},b.wp=function(u,o){u.add(o.x),u.add(o.y)},b.cB=function(u){u.Dh(u.size-2)},b.jB=function(u,o){o.na(u.get(u.size-2),u.get(u.size-1))},b.Sr=function(u,o,s,n,l,c){if(u==null)throw h.i.O();var d=u.K();if(u.B()||h.ba.Tn(d))return u;var f=new b;f.Sg=o,f.Kc=h.cb.tc(o);var g=h.cb.xv(f.Kc);if(f.Vb=c,f.Ub=h.cb.gv(f.Kc),f.lc=g*(2-g),f.fc=f.Kc.Id().ci,f.Cq=f.Kc.Mn(),f.at=f.Cq*f.fc,f.vA=n,f.uA=l,f.Ae=s,d==197?(s=new h.Ea(u.description)).bd(u,!1):h.ba.zd(d)?(s=new h.Ua(u.description)).pc(u,!0):s=u,f.Ae!=4){if((o=f.Sg.Nb(f.Kc)==0?h.cb.Bh(s,f.Sg,f.Kc):h.Jh.nj(s,f.Kc)).B())return o;o=b.kI(f.fc,o),o=f.Uy(o),o=h.kp.pj(o,f.Kc,f.Ae),f=h.cb.Bh(o,f.Kc,f.Sg)}else{if(h.Gg.Tb(o)==2?(u=h.cb.ol(),(o=h.Zj.local().W(s,u,o,c))==u&&(o=new h.Ea,u.copyTo(o))):o=h.Jh.nj(s,f.Kc),o.B())return o;f=f.yX(o)}return f},b.kI=function(u,o){var s=new h.l;if(o.yc(s),3.141592653589793>s.S()*u)return o;var n=!1;s=o.Ha();for(var l=new h.h,c=new h.h;s.ab();)for(;s.Ia();){var d=s.ia();if(l.N(d.bc()),c.N(d.xc()),l.scale(u),c.scale(u),3.141592653589793<Math.abs(l.x-c.x)){var f=b.Nu(l,c);if(!f){n=!0;break}if(6.283185307179586<Math.abs(l.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ja();var g=1<o.description.Ba,w=new h.h,$=new h.h,T=new h.h,E=new h.h,O=new h.Ta;for(s.aj();s.ab();)for(var P=NaN,R=[0];s.Ia();){if(d=s.ia(),l.N(d.bc()),c.N(d.xc()),l.scale(u),c.scale(u),isNaN(P)?(b.Yi(l.x,NaN,R),$.N(l)):$.N(T),P=$.x,f=b.Nu(l,c)){if(6.283185307179586<c.x-l.x)for(;6.283185307179586<c.x-l.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-l.x)for(;-6.283185307179586>c.x-l.x;)c.x+=6.283185307179586;b.Yi(c.x,NaN,R),T.N(c)}else w.N(c),b.vU(w),b.Yi(w.x,P,R),T.na(R[0]+w.x,w.y);.5>Math.abs(T.x-c.x)&&T.N(c),g?(d.Vw(0,O),E.N($),E.scale(1/u),O.Db(E),(f=s.xm())?n.nf(O):n.lineTo(O),s.Sn()&&!o.ec(s.gb)&&(d.Vw(1,O),E.N(T),E.scale(1/u),O.Db(E),n.lineTo(O))):((f=s.xm())&&n.Cz(null,0),d=n.ea()-1,E.N($),E.scale(1/u),n.xf(d,-1,E),s.Sn()&&!o.ec(s.gb)&&(E.N(T),E.scale(1/u),n.xf(d,-1,E)))}return n},b.oF=function(u,o,s,n,l,c,d,f,g,w,$,T){var E=new h.h,O=new h.h,P=0<n.compare(l);b.aJ(P,n,l,E,O),b.pF(u,o,s,E,O,c,NaN,d,f,g,w,null,$,T),P&&b.aC(g,w,null,$)},b.prototype.Uy=function(u){var o=u.Ja(),s=u.Ha(),n=[],l=null,c=null,d=1<u.description.Ba;d&&(l=new h.ce(0),c=new h.jg);for(var f=[0],g=new h.h,w=new h.h,$=new h.h,T=new h.h;s.ab();)for(f[0]=0;s.Ia();){var E=s.ia();g.N(E.bc()),w.N(E.xc()),g.scale(this.fc),w.scale(this.fc);var O=0<g.compare(w);b.aJ(O,g,w,$,T),n.length=0,l!=null&&l.Dh(0),0<this.vA?b.pF(this.Ub,this.lc,this.Ae,$,T,this.vA,this.uA,this.at,null,null,null,d?l:null,n,f):b.WQ(this.Ub,this.lc,this.Ae,$,T,this.uA,this.at,d?l:null,n,f),O&&b.aC(null,null,d?l:null,n),n[0].N(E.bc()),n[n.length-1].N(E.xc());for(var P=1;P<n.length-1;P++)n[P].scale(1/this.fc);d?(O=b.$I(O,E,c),b.OD(s.xm(),s.Sn()&&!u.ec(s.gb),E,O,l,n,o)):b.ND(s.xm(),s.Sn()&&!u.ec(s.gb),n,o)}return o},b.prototype.yX=function(u){var o=u.Ja(),s=u.Ha(),n=[],l=null,c=new h.jg,d=1<u.description.Ba;for(d&&(l=new h.ce(0));s.ab();)for(;s.Ia();){var f=s.ia(),g=f.bc(),w=f.xc();g=0<g.compare(w),w=b.$I(g,f,c),n.length=0,l!=null&&l.Dh(0),b.xX(this.Ub,this.lc,this.fc,w,this.Sg,this.vA,this.uA,d?l:null,n),g&&b.aC(null,null,d?l:null,n),d?b.OD(s.xm(),s.Sn()&&!u.ec(s.gb),f,w,l,n,o):b.ND(s.xm(),s.Sn()&&!u.ec(s.gb),n,o)}return o},b.ND=function(u,o,s,n){u&&n.Cz(null,0),u=n.ea()-1;var l=s.slice(0);n.lG(u,l,l.length-1),o&&n.xf(u,-1,s[s.length-1])},b.OD=function(u,o,s,n,l,c,d){var f=new h.Ta;if(s.Vo(f),u?d.nf(f):d.lineTo(f),2<c.length){u=n.Rb();for(var g=1;g<c.length-1;g++){var w=n.IG(l.get(g)*u);n.Vw(w,f),f.Db(c[g]),d.lineTo(f)}}o&&(s.Ro(f),d.lineTo(f))},b.pF=function(u,o,s,n,l,c,d,f,g,w,$,T,E,O){var P=new h.ha(0),R=new h.ha(0),F=new h.ha(0);h.kb.xd(u,o,n.x,n.y,l.x,l.y,F,P,R,s),F=F.u;var V=P=P.u;0>V&&(V+=6.283185307179586),0>(R=R.u)&&(R+=6.283185307179586),g!=null&&(g[0]=F),w!=null&&(w[0]=V),$!=null&&($[0]=R),w=g=NaN,T!=null&&(g=((w=h.F.Ch(u,o))-($=h.F.q(u,o,n.y)))/F,w=(w+$)/F),$=b.Ou(n,l),R=b.Mu(n,l),V=$||R;var L=b.AE(n,l,f),G=new h.ha(0),J=new h.ha(0),H=new h.h,te=new h.h,Q=new h.h;b.Yi(n.x,NaN,O);var ae=[O[0]];if(F<=c)b.Of(E,n),b.Yi(l.x,NaN,O),T!=null&&T.add(0),V?($&&b.fB(n,l,T,E),R&&b.dB(n,l,T,E)):L?b.eB(n,l,P,g,w,T,E):0<d&&(te.na(n.x-ae[0],n.y),H.na(l.x-O[0],l.y),b.Ty(u,o,s,n,F,P,te,H,0,1,d,T,E,ae)),b.Of(E,l);else{var pe=F/((c=1+h.P.truncate(Math.ceil(F/c)))-1),he=new h.h,Ae=0;b.Of(E,n),he.N(n),te.na(n.x-O[0],n.y),T!=null&&T.add(0);for(var ve=1;ve<c;ve++){if(ve<c-1){h.kb.qj(u,o,n.x,n.y,ve*pe,P,G,J,s),H.na(G.u,J.u),b.Yi(H.x,he.x,O),Q.na(O[0]+H.x,H.y);var We=ve/(c-1)}else b.Yi(l.x,NaN,O),H.na(l.x-O[0],l.y),Q.N(l),We=1;V?(ve==1&&$&&b.fB(n,Q,T,E),ve==c-1&&R&&b.dB(he,l,T,E)):L?b.zE(he,Q,f)&&(n.x<l.x?he.x>Q.x&&(O[0]+=6.283185307179586,Q.na(O[0]+H.x,H.y)):he.x<Q.x&&(O[0]-=6.283185307179586,Q.na(O[0]+H.x,H.y)),b.eB(he,Q,P,g,w,T,E)):0<d&&b.Ty(u,o,s,n,F,P,te,H,Ae,We,d,T,E,ae),b.Of(E,Q),T!=null&&T.add(We),he.N(Q),te.N(H),ae[0]=O[0],Ae=We}}},b.WQ=function(u,o,s,n,l,c,d,f,g,w){var $=new h.ha(0),T=new h.ha(0),E=new h.ha(0);h.kb.xd(u,o,n.x,n.y,l.x,l.y,E,$,T,s),T=E.u,$=$.u;var O=E=NaN;if(f!=null){O=h.F.Ch(u,o);var P=h.F.q(u,o,n.y);E=(O-P)/T,O=(O+P)/T}P=b.Ou(n,l);var R=b.Mu(n,l),F=P||R;d=b.AE(n,l,d);var V=b.Nu(n,l);V=F||d||V,b.Yi(n.x,NaN,w);var L=new h.h;b.Of(g,n),L.N(n),f!=null&&f.add(0),V?(F?(P&&b.fB(n,l,f,g),R&&b.dB(n,l,f,g)):d&&b.eB(n,l,$,E,O,f,g),b.Yi(l.x,NaN,w),b.Of(g,l)):T<=c?(b.Yi(l.x,NaN,w),b.Of(g,l)):(E=new h.h,d=new h.h,E.N(n),d.N(l),E.x-=w[0],d.x-=w[0],-3.141592653589793>d.x?d.x+=6.283185307179586:3.141592653589793<d.x&&(d.x-=6.283185307179586),b.Ty(u,o,s,n,T,$,E,d,0,1,c,f,g,w),b.Of(g,l),b.Yi(l.x,NaN,w)),f!=null&&f.add(1)},b.Ty=function(u,o,s,n,l,c,d,f,g,w,$,T,E,O){var P=new h.h,R=new h.h;P.na(d.x+O[0],d.y),new h.ha(0),new h.ha(0),new h.ha(0),new h.ha(0);var F=new h.ha(0),V=new h.ha(0),L=new h.ha(0),G=new h.h,J=new h.h,H=new h.h,te=new h.h;G.N(d),J.N(f),d=new h.ce(0),f=new h.ce(0),b.wp(d,J),f.add(w);var Q=new h.h,ae=new h.zb,pe=[];for(b.TJ(4,pe);0<d.size;){for(var he,Ae=!1,ve=NaN,We=0;3>We;We++)if(he=pe[We]*w+(1-pe[We])*g,h.kb.qj(u,o,n.x,n.y,he*l,c,F,V,s),H.na(F.u,V.u),We==0&&(ve=he,te.N(H)),b.RW(G,H,J,ae),ae.ic(ae.ge(H,!0),Q),h.kb.xd(u,o,H.x,H.y,Q.x,Q.y,L,null,null,2),L.u>$){Ae=!0;break}Ae?(J.N(te),w=ve,b.wp(d,J),f.add(w)):(b.cB(d),f.Gn(f.size-1,1,f.size-1),0<d.size&&(b.Yi(J.x,P.x,O),R.na(O[0]+J.x,J.y),b.Of(E,R),P.N(R),T!=null&&T.add(w),G.N(J),g=w,b.jB(d,J),w=f.get(f.size-1)))}},b.xX=function(u,o,s,n,l,c,d,f,g){var w=new h.h,$=new h.h,T=new h.h,E=new h.h,O=new h.h,P=new h.h,R=new h.h,F=new h.h,V=new h.h,L=new h.h,G=new h.ha(0),J=new h.ha(0),H=new h.h,te=[[],[]],Q=h.Gg.Tb(l)==1;l=l.Yd(0);var ae=n.bc(),pe=n.xc();Q?(P.na(ae.x*s,ae.y*s),R.na(pe.x*s,pe.y*s)):(te[0][0]=ae.x,te[0][1]=ae.y,te[1][0]=pe.x,te[1][1]=pe.y,h.cb.wt(),P.x=te[0][0]*s,P.y=te[0][1]*s,R.x=te[1][0]*s,R.y=te[1][1]*s);var he=0,Ae=0,ve=1,We=n.Rn();w.N(ae),$.N(pe),pe=new h.ce(0);var Ve=new h.ce(0),Te=new h.ce(0);b.wp(pe,$),b.wp(Ve,R),Te.add(ve),b.Of(g,w),f!=null&&f.add(Ae);var Gt=[],xi=0<d?We?5:3:We?5:1;b.TJ(xi,Gt);for(var Ut=new h.ha(0),bt=new h.ha(0),wt=new h.ha(0),rt=new h.ha(0),Jt=new h.ha(0),it=new h.ha(0),os=new h.ha(0);0<Ve.size;){var dt=!1,lr=NaN;for(h.kb.xd(u,o,P.x,P.y,R.x,R.y,Ut,bt,null,2),ae=0;ae<xi&&!(ae==0&&(!We&&0>=d&&Ut.u<=c&&3.141592653589793>Math.abs(P.x-R.x)||n.Tx(Ae,ve)<=l));ae++){var Et=Gt[ae]*ve+(1-Gt[ae])*Ae;if(n.ic(Et,T),Q?F.na(T.x*s,T.y*s):(te[0][0]=T.x,te[0][1]=T.y,h.cb.wt(),F.x=te[0][0]*s,F.y=te[0][1]*s),ae==0&&(lr=Et,O.N(T),L.N(F),0<c&&(Ut.u>c||3.141592653589793<=Math.abs(P.x-R.x)))){dt=!0;break}if(We&&0<c){if(h.kb.xd(u,o,P.x,P.y,F.x,F.y,wt,null,null,2),wt.u>c||3.141592653589793<=Math.abs(P.x-F.x)){dt=!0;break}}else if(0<d){if(We?(E.IS(w,$,Gt[ae]),Q?V.na(E.x*s,E.y*s):(te[0][0]=E.x,te[0][1]=E.y,h.cb.wt(),V.x=te[0][0]*s,V.y=te[0][1]*s)):(E.N(T),V.N(F)),h.kb.xd(u,o,P.x,P.y,V.x,V.y,rt,null,null,2),!(rt.u<=Ut.u)){dt=!0;break}if(h.kb.qj(u,o,P.x,P.y,rt.u,bt.u,G,J,2),H.na(G.u,J.u),h.kb.xd(u,o,H.x,H.y,F.x,F.y,Jt,null,null,2),Jt.u>d){dt=!0;break}if(We){if(h.kb.xd(u,o,H.x,H.y,V.x,V.y,it,null,null,2),it.u>d){dt=!0;break}if(h.kb.xd(u,o,V.x,V.y,F.x,F.y,os,null,null,2),os.u>d){dt=!0;break}}}}dt?($.N(O),R.N(L),ve=lr,b.wp(pe,$),b.wp(Ve,R),Te.add(ve)):(b.cB(pe),b.cB(Ve),Te.Gn(Te.size-1,1,Te.size-1),b.Of(g,$),he+=Ut.u,f!=null&&f.add(he),0<Ve.size&&(w.N($),P.N(R),Ae=ve,b.jB(pe,$),b.jB(Ve,R),ve=Te.get(Te.size-1)))}if(f!=null)for(u=1/he,ae=0;ae<f.size;ae++)f.write(ae,f.read(ae)*u)},b.aC=function(u,o,s,n){n.reverse(),s!=null&&s.pi(0,s.size,1),s=u!=null?u[0]:NaN,n=o!=null?o[0]:NaN,u!=null&&(u[0]=n),o!=null&&(o[0]=s)},b.aJ=function(u,o,s,n,l){u?(n.N(s),l.N(o)):(n.N(o),l.N(s))},b.$I=function(u,o,s){return u?(s.create(o.K()),o.copyTo(s.get()),s.get().reverse(),s.get()):o},b.Yi=function(u,o,s){if(isNaN(o)){for(;3.141592653589793<s[0]-u;)s[0]-=6.283185307179586;for(;3.141592653589793<u-s[0];)s[0]+=6.283185307179586}else 3.141592653589793<s[0]+u-o?s[0]-=6.283185307179586:3.141592653589793<o-(s[0]+u)&&(s[0]+=6.283185307179586)},b.RW=function(u,o,s,n){3.141592653589793>Math.abs(o.x-u.x)?(n.Ec(u),3.141592653589793<=s.x-u.x?n.Sl(s.x-6.283185307179586,s.y):3.141592653589793<=u.x-s.x?n.Sl(s.x+6.283185307179586,s.y):n.Sl(s.x,s.y)):(n.Ec(s),3.141592653589793<=u.x-s.x?n.Sl(u.x-6.283185307179586,u.y):3.141592653589793<=s.x-u.x?n.Sl(u.x+6.283185307179586,u.y):n.Sl(u.x,u.y))},b.TJ=function(u,o){for(var s=0;s<u;s++){var n=Math.ceil(s/2)/(u+1);s%2!=0&&(n=-n),o[s]=.5+n}},b.Ou=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&!h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&!h.s.$(o.y,-1.570796326794897))},b.Mu=function(u,o){return!!(h.s.$(o.y,1.570796326794897)&&!h.s.$(u.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897)&&!h.s.$(u.y,-1.570796326794897))},b.AE=function(u,o,s){return!(!b.zE(u,o,s)||h.s.$(u.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)||h.s.$(o.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897))},b.zE=function(u,o,s){return Math.abs(Math.abs(u.x-o.x)-3.141592653589793)<=s},b.Nu=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&h.s.$(o.y,-1.570796326794897))},b.fB=function(u,o,s,n){if(0<u.y){var l=new h.h;l.na(o.x,1.570796326794897)}else(l=new h.h).na(o.x,-1.570796326794897);h.s.$(u.x,l.x)||h.s.$(o.y,l.y)||(b.Of(n,l),s!=null&&s.add(0))},b.dB=function(u,o,s,n){if(0<o.y){var l=new h.h;l.na(u.x,1.570796326794897)}else(l=new h.h).na(u.x,-1.570796326794897);h.s.$(o.x,l.x)||h.s.$(u.y,l.y)||(b.Of(n,l),s!=null&&s.add(1))},b.eB=function(u,o,s,n,l,c,d){h.s.Dd(s)?(0<1.570796326794897-u.y&&((s=new h.h).na(u.x,1.570796326794897),b.Of(d,s),c!=null&&c.add(n)),0<1.570796326794897-o.y&&((s=new h.h).na(o.x,1.570796326794897),b.Of(d,s),c!=null&&c.add(n))):(0<1.570796326794897+u.y&&((s=new h.h).na(u.x,-1.570796326794897),b.Of(d,s),c!=null&&c.add(l)),0<1.570796326794897+o.y&&((s=new h.h).na(o.x,-1.570796326794897),b.Of(d,s),c!=null&&c.add(l)))},b.vU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},b}();h.ej=k}(U||(U={})),function(h){h.kp=function(){function k(){}return k.pj=function(b,u,o){if(b==null||u==null||!h.cb.Xc(u))throw h.i.O();if(b.B())return b;var s=b,n=s.K();if(h.ba.Ic(n)){s=h.Jh.nj(b,u),b=new h.l,s.A(b),n=h.ua.Xd(u,b,!1);for(var l=h.cb.ih(u),c=Math.floor((b.v-l.v)/l.S())*l.S()+l.v;c<b.C;)c>b.v+n&&c<b.C-n&&(s=h.Jh.ms(s,u,o,!0,c)),c+=l.S()}else{if(n==197)return(b=new h.Ea(s.description)).bd(s,!1),k.pj(b,u,o);if(h.ba.zd(n))return(b=new h.Ua(s.description)).pc(s,!0),k.pj(b,u,o)}return k.Py(s,u)},k.Py=function(b,u){if(b==null||u==null||!h.cb.Xc(u))throw h.i.O();if(b.B())return b;var o=b.K();return o==197?(o=new h.Ea(b.description)).bd(b,!1):h.ba.zd(o)?(o=new h.Ua(b.description)).pc(b,!0):o=b,(o=h.Jh.nj(o,u)).B()?o:h.Gg.Tb(u)==1?h.Jh.Hn(o,u,0,o!=b,0):k.IQ(o,u,o!=b)},k.IQ=function(b,u,o){if(!h.cb.Xc(u))throw h.i.O();if(b.B())return b;var s=h.cb.bf(u),n=-180*s;return s*=360,h.Gg.Tb(u)==2&&(s=(n=h.cb.ih(u)).C,s-=n=n.v),h.Jh.Jp(b,n,s,u,o,0,!0)},k}()}(U||(U={})),function(h){h.xY=function(){function k(){}return k.R=function(b){return 0>b?-b:b},k.Mb=function(b,u){return 0<=u?k.R(b):-k.R(b)},k.$=function(b,u){return b==u||k.R(b-u)<=k.EC*(1+(k.R(b)+k.R(u))/2)},k.Dd=function(b){return b==0||k.R(b)<=k.EC},k.Ch=function(b,u){var o=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return b/(1+u)*(1+o*(.25+o*(.015625+1/256*o)))*k.zL},k.zL=1.5707963267948966,k.EC=3552713678800501e-30,k}()}(U||(U={})),function(h){var k=function(u){this.Yf=u,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};h.zY=k;var b=function(){function u(o){o===void 0&&(o=null),this.Ej=null,this.Wn=!1,o!==null&&(this.Ej=new k(o))}return u.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},u.prototype.Qf=function(){var o=new u;return this.copyTo(o),o},u.prototype.copyTo=function(o){o.Ej=this.Ej,o.Wn=this.Wn},u.prototype.Lz=function(){this.Wn=!this.Wn},u.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},u.prototype.GJ=function(o){if(0>=o)throw h.i.O();if(o!=this.Fc()){if((o=h.qf.geogtran(o))==null)throw h.i.O("Geogtran not found.");this.Ej=new k(o)}},u.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},u.prototype.pX=function(o){if(o==null)throw h.i.O();var s=null;try{s=h.qf.fromString(h.Tc.PE_TYPE_GEOGTRAN,o)}catch{throw h.i.O()}this.Ej=new k(s)},u.prototype.Nb=function(o){return o==this||!(!(o instanceof u)||(0>=this.Fc()||this.Fc()!=o.Fc())&&!this.sm().isEqual(o.sm()))&&this.Wn==o.Wn},u.prototype.toString=function(){var o="GeographicTransformation: "+this.wz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},u.create=function(o,s){var n=new u;return n.GJ(o),s&&n.Lz(),n},u.pP=function(o,s){var n=new u;return n.pX(o),s&&n.Lz(),n},u}();h.Cx=b}(U||(U={})),function(h){var k=function(){function u(){}return u.construct=function(o,s,n,l){var c=new u;return c.jw=o,c.kw=s,c.MY=n,c.NY=l,c},u.zy=function(o,s){return o.jw==s.jw?o.kw==s.kw?0:o.kw<s.kw?-1:1:o.jw<s.jw?-1:1},u}(),b=function(){function u(){this.tT=[],this.uT=[],this.sp()}return u.fz=function(){return u.eK==null&&(u.eK=new u),u.eK},u.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},u.prototype.dD=function(o){try{var s=[];s=s.sort(k.zy);for(var n=0;n<s.length;n++)o.push(s[n])}catch{}},u}();h.yY=b}(U||(U={})),function(h){var k=function(){function b(){}return b.prototype.tD=function(u){this.Hk=u},b.prototype.RM=function(u){this.Gb=u},b.prototype.sD=function(u){this.Bo=u},b.xE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736)},b.vE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},b.wE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},b}();h.Wk=k}(U||(U={})),function(h){h.ac=function(){function k(){}return k.OT=function(b){var u=new h.Ea;return u.rx(b.gs(),b.js()),u.Aj(b.gs(),b.hs()),u.Aj(b.fs(),b.hs()),u.Aj(b.fs(),b.js()),u},k.Bh=function(b,u){return b===null?null:h.Gx.local().W(b,u,null)},k.fY=function(b,u){var o=h.Ih.local();return b=new h.$c(b),o.W(b,u,null).next()},k.km=function(b,u,o){return h.mp.local().W(b,u,o,null)},k.gp=function(b,u,o){return h.Jx.local().W(b,u,o,null)},k.RX=function(b,u,o){var s=h.Jx.local();for(b=new h.$c(b),u=new h.$c(u),o=s.W(b,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},k.Nb=function(b,u,o){return h.fj.local().W(3,b,u,o,null)},k.OP=function(b,u,o){return h.fj.local().W(4,b,u,o,null)},k.MS=function(b,u,o){var s=h.Zj.local();for(b=new h.$c(b),u=new h.$c(u),o=s.W(b,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},k.LP=function(b,u,o){var s=h.mp.local();for(b=new h.$c(b),u=new h.$c(u),o=s.W(b,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},k.Fa=function(b,u,o){return h.Zj.local().W(b,u,o,null)},k.LS=function(b,u,o){if((b=h.Zj.local().W(b,u,o,null,1))===null)return[];if(b.K()===550){for(u=[],o=0;o<b.xa;o++)u.push(b.FR(o));return u}return b.K()===33?[b]:[]},k.mY=function(b,u,o){return h.fj.local().W(2,b,u,o,null)},k.contains=function(b,u,o){return h.fj.local().W(1,b,u,o,null)},k.wP=function(b,u,o){return h.fj.local().W(16,b,u,o,null)},k.touches=function(b,u,o){return h.fj.local().W(8,b,u,o,null)},k.yU=function(b,u,o){return h.fj.local().W(32,b,u,o,null)},k.OS=function(b,u,o){return h.fj.local().W(1073741824,b,u,o,null)},k.tB=function(b,u,o,s){return h.uL.local().W(b,u,o,s,null)},k.ub=function(b,u,o,s){var n=null;if(o!=null){if(n=o.Id(),s!=null&&n.Fc()!=s.Fc()&&n.pd!=s.pd)throw h.i.Zk()}else if(s!=null)throw h.i.O();return b=h.lL.local().W(b,u,null),n!==null&&s!==null&&(b=h.Uc.Ph(b,n,s)),b},k.clip=function(b,u,o){return h.fL.local().W(b,h.l.construct(u.gs(),u.js(),u.fs(),u.hs()),o,null)},k.fl=function(b,u,o){if(b==null||u==null)return null;for(b=h.hL.local().W(!0,b,u,o,null),u=[];(o=b.next())!=null;)o.B()||u.push(o);return u.slice(0)},k.HN=function(b,u,o,s,n,l,c,d){if(n===!0)return k.IN(b,u,o,s,l,c,d);if(n=o,u!=null){if(c=u.Id(),s!=null&&c.Fc()!=s.Fc()){if(c.pd!=s.pd)throw h.i.Zk();n=[],h.Uc.SE(o,o.length,s,c,n)}}else if(s!=null)throw h.i.O();if(o=h.vC.local(),l){for(b=new h.$c(b),u=o.W(b,u,n,l,null),b=[];(l=u.next())!=null;)b.push(l);l=b.slice(0)}else for(l=[],s=0;s<b.length;s++)l[s]=o.W(b[s],u,n[s],null);return l},k.IN=function(b,u,o,s,n,l,c){if(u===null||(s==null&&(s=u.Fc()!==4326?u.Id():h.Uc.ah(9001)),s.pd!==0))throw h.i.O();if(h.Uc.SE(o,o.length,s,h.Uc.ah(9001),o),s=h.AC.local(),n){for(b=new h.$c(b),u=s.W(b,u,l,o,c,!1,n,null),o=[];(l=u.next())!=null;)o.push(l);n=o.slice(0)}else{n=[];for(var d=0;d<b.length;d++)n[d]=s.W(b[d],u,l,o[d],c,!1,null)}return n},k.buffer=function(b,u,o,s,n,l,c){var d=o;if(n===!1){if(u!=null){if(n=u.Id(),s!=null&&n.Fc()!=s.Fc()){if(n.pd!=s.pd)throw h.i.Zk();d=h.Uc.Ph(o,s,n)}}else if(s!=null)throw h.i.O();b=h.vC.local().W(b,u,d,null)}else{if(u===null||(s==null&&(s=u.Fc()!==4326?u.Id():h.Uc.ah(9001)),s.pd!==0))throw h.i.O();d=h.Uc.Ph(o,s,h.Uc.ah(9001)),b=h.AC.local().W(b,u,l,d,c,!1,null)}return b},k.wU=function(b,u,o,s,n,l,c){if(u!=null){var d=u.Id();if(c!=null&&d.Fc()!=c.Fc()){if(d.pd!=c.pd)throw h.i.Zk();o=h.Uc.Ph(o,c,d)}}else if(c!=null)throw h.i.O();for(b=new h.$c(b),u=h.DC.local().W(b,u,o,s,n,l,null),o=[];(s=u.next())!=null;)o.push(s);return o.slice(0)},k.offset=function(b,u,o,s,n,l,c){if(u!=null){var d=u.Id();if(c!=null&&d.Fc()!=c.Fc()){if(d.pd!=c.pd)throw h.i.Zk();o=h.Uc.Ph(o,c,d)}}else if(c!=null)throw h.i.O();return h.DC.local().W(b,u,o,s,n,l,null)},k.dP=function(b){return h.xC.local().W(b,null)},k.eP=function(b,u){var o=h.xC.local();for(b=new h.$c(b),u=o.W(b,u,null),o=[];(b=u.next())!=null;)o.push(b);return o},k.iz=function(b,u,o){return h.Hx.local().iz(b,u,o)},k.jz=function(b,u){return h.Hx.local().jz(b,u)},k.kz=function(b,u,o,s){return h.Hx.local().kz(b,u,o,s)},k.$B=function(b,u){return h.$l.local().W(b,u,!1,null)},k.ZS=function(b,u){return h.$l.local().ts(b,u,null)},k.LQ=function(b,u,o,s,n){var l=h.zC.local();if(u!=null){if(u=u.Id(),n!=null&&u.Fc()!=n.Fc()){if(u.pd!=n.pd)throw h.i.Zk();o=h.Uc.Ph(o,n,u)}}else if(n!=null)throw h.i.O();return l.W(b,o,s,null)},k.Sr=function(b,u,o,s){var n=h.Zl.local();if(u!=null){if(u=u.Id(),s!=null&&u.Fc()!=s.Fc()){if(u.pd!=s.pd)throw h.i.Zk();o=h.Uc.Ph(o,s,u)}}else if(s!=null)throw h.i.O();return n.W(b,o,null)},k.Ry=function(b,u,o,s,n){n===void 0&&(n=0);var l=h.nL.local();if(n==4||n!==0)throw h.i.Fe();if(s!==null){if(s.pd!==0)throw h.i.O("Unit must be a linear unit type");o=h.Uc.Ph(o,s,h.Uc.ah(9001))}return l.W(b,o,u,n,null)},k.RQ=function(b,u,o,s){if(b===null)return 0;if(s==4||s!==0)throw h.i.Fe();if(b.K()==197)b=k.OT(b);else if(b.K()!=1736)return 0;if(s=h.cb.tc(u),b=h.cb.Bh(b,u,s),b=h.PK.SQ([b])[0],o!==null){if(o.pd!==2)throw h.i.O("Unit must be a area unit type");b=h.Uc.Ph(b,h.Uc.ah(109404),o)}return b},k.UQ=function(b,u,o,s){if(b=h.qL.local().W(b,u,s,null),o!==null){if(o.pd!==0)throw h.i.O("Unit must be a linear unit type");b=h.Uc.Ph(b,h.Uc.ah(9001),o)}return b},k.EU=function(b,u,o){if(b===null)return 0;var s=null;if(u!=null){if((s=u.Id()).pd==0&&(s=h.Uc.WF(s))==null&&o!==null)throw h.i.O();if(o!=null&&s.Fc()!=o.Fc()&&s.pd!=o.pd)throw h.i.Zk()}else if(o!=null)throw h.i.O();return b.K()==1736||b.K()==197?(b=b.He(),o!==null?h.Uc.Ph(b,s,o):b):0},k.FU=function(b,u,o){if(b===null||b.B()||1>b.Eb())return 0;var s=null;if(u!=null){if(s=u.Id(),o!=null&&s.Fc()!=o.Fc()&&s.pd!=o.pd)throw h.i.Zk()}else if(o!=null)throw h.i.O();b.K()==1736||b.K()==197?u=b.ng():h.ba.zd(b.K())?(u=new h.Ua(b.description)).pc(b,!0):u=b,b=0,u=u.Ha();for(var n=new h.h,l=new h.h;u.ab();)for(;u.Ia();){var c=u.ia();c.$p(n),c.Vr(l),b+=h.h.ub(n,l)}return s!==null&&o!==null&&(b=h.Uc.Ph(b,s,o)),b},k.aP=function(b){return b.points!==void 0?k.hS(b,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM):b.rings!==void 0?k.gG(b.rings,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"P"):b.paths!==void 0?k.gG(b.paths,b.hasZ!==void 0&&b.hasZ,b.hasM!==void 0&&b.hasM,"L"):b.x!==void 0?k.iS(b):b.xmin!==void 0?k.gS(b):null},k.iS=function(b){if(b.x==null||b.x=="NaN")return new h.Ta;var u=new h.Ta(b.x,b.y);return b.z!==void 0&&b.z!==null&&u.sX(b.z),b.m!==void 0&&b.m!==null&&u.cX(b.m),u},k.gS=function(b){if(b.xmin==null||b.xmin=="NaN")return new h.Hh;var u=new h.Hh(b.xmin,b.ymin,b.xmax,b.ymax);return b.zmin!==void 0&&b.zmin!==null&&u.setInterval(1,0,b.zmin,b.zmax),b.mmin!==void 0&&b.mmin!==null&&u.setInterval(2,0,b.mmin,b.mmax),u},k.hS=function(b,u,o){var s=0,n=new h.ee,l=3*b.points.length;l%2!=0&&l++,2>l&&(l=2);var c=h.P.truncate(3*b.points.length/2);4>c?c=4:16>c&&(c=16),l=h.Zc.Fn(l,0);var d=h.Zc.Fn(c);c=h.Zc.Fn(c);for(var f=0;f<b.points.length;f++)l.write(2*f,b.points[f][0]),l.write(2*f+1,b.points[f][1]),d.write(f,u||o?b.points[f][2]:NaN),c.write(f,o&&u?b.points[f][3]:NaN),s++;return s!=0&&(n.resize(s),n.kn(0,l)),u&&(n.se(1),n.kn(1,d)),o&&(n.se(2),n.kn(2,u==0?d:c)),n.Qc(16777215),n},k.gG=function(b,u,o,s){var n=0,l=2;if(s=="P"){var c=new h.Ea;n=1,l=3}else c=new h.Ua;for(var d=h.Zc.Qh(0),f=h.Zc.Or(0),g=0,w=0,$=[],T=[],E=0;E<b.length;E++){var O=b[E].length;if($[E]=!1,s==="P"&&b[E][0][0]===b[E][b[E].length-1][0]&&b[E][0][1]===b[E][b[E].length-1][1]){var P=o==0||b[E][0][3]===b[E][b[E].length-1][3]||b[E][0][3]===void 0&&b[E][b[E].length-1][3]===void 0;(u==0||b[E][0][2]===b[E][b[E].length-1][2]||b[E][0][2]===void 0&&b[E][b[E].length-1][2]===void 0)&&P&&($[E]=!0,--O)}O>=l?(T[E]=!1,w+=1,d.add(g),f.add(n),g+=O):T[E]=!0}for((s=3*g)%2!=0&&s++,2>s&&(s=2),4>(E=h.P.truncate(3*g/2))?E=4:16>E&&(E=16),s=h.Zc.Fn(s,0),n=h.Zc.Fn(E),l=h.Zc.Fn(E),E=O=0;E<b.length;E++)if(T[E]===!1)for(P=0;P<b[E].length;P++){var R=!1;P===b[E].length-1&&$[E]===!0&&(R=!0),R||(s.write(2*O,b[E][P][0]),s.write(2*O+1,b[E][P][1]),n.write(O,u||o?b[E][P][2]:NaN),l.write(O,o&&u?b[E][P][3]:NaN),O++)}return g!=0&&(b=c,d.resize(w),f.resize(w),0<g&&(d.add(g),f.add(0)),b.kn(0,s),b.KJ(f),b.LJ(d)),u&&(c.se(1),c.kn(1,n)),o&&(c.se(2),c.kn(2,u==0?n:l)),c.Qc(16777215),c},k}()}(U||(U={})),function(h){h.Dx=function(){function k(){}return k.dr=function(b){var u,o=0,s=b.length,n=b[0];for(u=0;u<s-1;u++){var l=b[u+1];o+=(l[0]-n[0])*(l[1]+n[1]),n=l}return 0<=o},k.rotate=function(b,u,o){u=u*Math.PI/180;var s=Math.cos(u),n=Math.sin(u);if(b.paths!==void 0){u={paths:[]};for(var l=0;l<b.paths.length;l++){for(var c=b.paths[l],d=[],f=0;f<c.length;f++){var g=c[f].slice(0);d.push(g);var w=s*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,$=n*(c[f][0]-o.x)+s*(c[f][1]-o.y)+o.y;g[0]=w,g[1]=$}u.paths.push(d),b.hasZ!==void 0&&(u.hasZ=b.hasZ),b.hasM!==void 0&&(u.hasM=b.hasM)}return u}if(b.rings!==void 0){for(u={rings:[]},l=0;l<b.rings.length;l++){c=b.rings[l],d=[];var T=k.dr(c);for(f=0;f<c.length;f++)g=c[f].slice(0),d.push(g),w=s*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,$=n*(c[f][0]-o.x)+s*(c[f][1]-o.y)+o.y,g[0]=w,g[1]=$;k.dr(d)!==T&&d.reverse(),u.rings.push(d),b.hasZ!==void 0&&(u.hasZ=b.hasZ),b.hasM!==void 0&&(u.hasM=b.hasM)}return u}if(b.x!==void 0)return u={x:s*(b.x-o.x)-n*(b.y-o.y)+o.x,y:n*(b.x-o.x)+s*(b.y-o.y)+o.y},b.z!==void 0&&(u.z=b.z),b.m!==void 0&&(u.m=b.m),b.hasZ!==void 0&&(u.hasZ=b.hasZ),b.hasM!==void 0&&(u.hasM=b.hasM),u;if(b.points!==void 0){for(u={points:[]},l=b.points,f=0;f<l.length;f++)(c=l[f].slice(0))[0]=s*(l[f][0]-o.x)-n*(l[f][1]-o.y)+o.x,c[1]=n*(l[f][0]-o.x)+s*(l[f][1]-o.y)+o.y,u.points.push(c);return b.hasZ!==void 0&&(u.hasZ=b.hasZ),b.hasM!==void 0&&(u.hasM=b.hasM),u}return null},k.EQ=function(b,u){if(b.paths!==void 0){for(var o={paths:[]},s=0;s<b.paths.length;s++){for(var n=b.paths[s],l=[],c=0;c<n.length;c++){var d=n[c].slice(0);l.push(d);var f=u.x-n[c][0];d[0]=n[c][0]+2*f}o.paths.push(l)}return b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o}if(b.rings!==void 0){for(o={rings:[]},s=0;s<b.rings.length;s++){n=b.rings[s];var g=k.dr(n);for(l=[],c=0;c<n.length;c++)d=n[c].slice(0),l.push(d),f=u.x-n[c][0],d[0]=n[c][0]+2*f;k.dr(l)!==g&&l.reverse(),o.rings.push(l)}return b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o}if(b.x!==void 0)return f=u.x-b.x,o={x:b.x+2*f,y:b.y},b.z!==void 0&&(o.z=b.z),b.m!==void 0&&(o.m=b.m),b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o;if(b.points!==void 0){for(o={points:[]},s=b.points,c=0;c<s.length;c++)n=s[c].slice(0),f=u.x-n[0],n[0]+=2*f,o.points.push(n);return b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o}return b.xmin!==void 0?(o={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(o.zmin=b.zmin,o.zmax=b.zmax),b.mmin!==void 0&&(o.mmin=b.mmin,o.mmax=b.mmax),f=u.x-b.xmin,o.xmax=b.xmin+2*f,f=u.x-b.xmax,o.xmin=b.xmax+2*f,b.zmin!==void 0&&(o.zmin=b.zmin),b.zmax!==void 0&&(o.zmax=b.zmax),b.mmin!==void 0&&(o.mmin=b.mmin),b.mmax!==void 0&&(o.mmax=b.mmax),b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o):null},k.FQ=function(b,u){if(b.paths!==void 0){for(var o={paths:[]},s=0;s<b.paths.length;s++){for(var n=b.paths[s],l=[],c=0;c<n.length;c++){var d=n[c].slice(0);l.push(d);var f=u.y-n[c][1];d[1]=n[c][1]+2*f}o.paths.push(l)}return b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o}if(b.rings!==void 0){for(o={rings:[]},s=0;s<b.rings.length;s++){n=b.rings[s];var g=k.dr(n);for(l=[],c=0;c<n.length;c++)d=n[c].slice(0),l.push(d),f=u.y-n[c][1],d[1]=n[c][1]+2*f;k.dr(l)!==g&&l.reverse(),o.rings.push(l)}return b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o}if(b.x!==void 0)return f=u.y-b.y,o={y:b.y+2*f,x:b.x},b.z!==void 0&&(o.z=b.z),b.m!==void 0&&(o.m=b.m),b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o;if(b.points!==void 0){for(o={points:[]},s=b.points,c=0;c<s.length;c++)n=s[c].slice(0),f=u.y-n[1],n[1]+=2*f,o.points.push(n);return b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o}return b.xmin!==void 0?(o={v:b.xmin,G:b.ymin,C:b.xmax,H:b.ymax},b.zmin!==void 0&&(o.zmin=b.zmin,o.zmax=b.zmax),b.mmin!==void 0&&(o.mmin=b.mmin,o.mmax=b.mmax),f=u.y-b.ymin,o.ymax=b.ymin+2*f,f=u.y-b.ymax,o.ymin=b.ymax+2*f,b.zmin!==void 0&&(o.zmin=b.zmin),b.zmax!==void 0&&(o.zmax=b.zmax),b.mmin!==void 0&&(o.mmin=b.mmin),b.mmax!==void 0&&(o.mmax=b.mmax),b.hasZ!==void 0&&(o.hasZ=b.hasZ),b.hasM!==void 0&&(o.hasM=b.hasM),o):null},k}()}(U||(U={})),function(h){h.UK=function(){function k(){}return k.Kg=function(b,u){switch(u==null&&(u=h.fe.pg()),b){case 33:return new h.Ta(u);case 322:return new h.zb(u);case 197:return new h.Hh(u);case 550:return new h.ee(u);case 1607:return new h.Ua(u);case 1736:return new h.Ea(u);default:throw h.i.ga("invalid argument.")}},k}()}(U||(U={})),function(h){var k=function(){function b(u,o){this.Qe=h.ja.rf(u,-1),this.va=new h.cu,this.yl=o}return b.prototype.vW=function(u){this.va.Bt(Math.min(this.Qe.size,u)),this.va.hn(u)},b.prototype.addElement=function(u,o){if(o===void 0)return this.$M(u);o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);return s==-1&&(s=this.va.Rh(),this.Qe.set(o,s)),this.va.addElement(s,u)},b.prototype.$M=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);return s==-1&&(s=this.va.Rh(),this.Qe.set(o,s)),this.va.addElement(s,u)},b.prototype.kd=function(u,o){if(o===void 0)this.FP(u);else{o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);if(s==-1)throw h.i.O();for(var n=this.va.sc(s),l=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(s,l,n),this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(o,-1))):l=n,n=c}}},b.prototype.FP=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);if(s==-1)throw h.i.O();for(var n=this.va.sc(s),l=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(s,l,n),this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(o,-1))):l=n,n=c}},b.prototype.lR=function(u){return u=h.P.truncate(u%this.Qe.size),(u=this.Qe.get(u))==-1?-1:this.va.sc(u)},b.prototype.zR=function(u){return this.va.lb(u)},b.prototype.wd=function(u){var o=this.yl.ez(this.ka(u));o=h.P.truncate(o%this.Qe.size);var s=this.Qe.get(o);if(s==-1)throw h.i.O();for(var n=this.va.sc(s),l=-1;n!=-1;){if(n==u)return this.va.kd(s,l,n),void(this.va.sc(s)==-1&&(this.va.eh(s),this.Qe.set(o,-1)));l=n,n=this.va.lb(n)}throw h.i.O()},b.prototype.ka=function(u){return this.va.ka(u)},b.prototype.clear=function(){this.Qe=h.ja.rf(this.Qe.size,-1),this.va.clear()},b.prototype.size=function(){return this.va.OF()},b}();h.ZK=k}(U||(U={})),function(h){var k=function(){function b(){this.Ni=new h.ad(3),this.va=new h.ad(6),this.mT=!1,this.ke=-1}return b.prototype.hl=function(u){this.Ni.kd(u)},b.prototype.Rw=function(){return this.Ni.De()},b.prototype.dv=function(u){this.va.kd(u)},b.prototype.VA=function(){return this.va.De()},b.prototype.RB=function(u,o){this.Ni.T(u,1,o)},b.prototype.fx=function(u,o){this.Ni.T(u,2,o)},b.prototype.bX=function(u,o){this.Ni.T(u,3,o)},b.prototype.PB=function(u,o){this.va.T(u,4,o)},b.prototype.eX=function(u,o){this.va.T(u,3,o)},b.prototype.OJ=function(u,o){this.va.T(u,2,o)},b.prototype.Rh=function(u){var o=this.VA();return this.va.T(o,3,this.ke),this.va.T(o,4,0),this.va.T(o,5,u),this.ke!=-1&&this.OJ(this.ke,o),this.ke=o},b.prototype.eh=function(u){this.GE(u);var o=this.va.U(u,2),s=this.va.U(u,3);return o!=-1?this.eX(o,s):this.ke=s,s!=-1&&this.OJ(s,o),this.dv(u),s},b.prototype.Bt=function(u){this.va.Ee(u)},b.prototype.KF=function(u){return this.va.U(u,5)},b.prototype.aX=function(u,o){this.va.T(u,5,o)},b.prototype.addElement=function(u,o){return this.oS(u,o)},b.prototype.oS=function(u,o){var s=this.Rw();this.fx(s,-1),this.va.U(u,0)==-1&&this.va.T(u,0,s);var n=this.va.U(u,1);return this.RB(s,n),n!=-1&&this.fx(n,s),this.va.T(u,1,s),this.setData(s,o),this.PB(u,this.ds(u)+1),this.mT&&this.bX(s,u),s},b.prototype.kd=function(u,o){var s=this.xe(o),n=this.lb(o);return s!=-1?this.fx(s,n):this.va.T(u,0,n),n!=-1?this.RB(n,s):this.va.T(u,1,s),this.hl(o),this.PB(u,this.ds(u)-1),n},b.prototype.hn=function(u){this.Ni.Ee(u)},b.prototype.getData=function(u){return this.Ni.U(u,0)},b.prototype.setData=function(u,o){this.Ni.T(u,0,o)},b.prototype.lb=function(u){return this.Ni.U(u,2)},b.prototype.xe=function(u){return this.Ni.U(u,1)},b.prototype.sc=function(u){return this.va.U(u,0)},b.prototype.Gc=function(u){return this.va.U(u,1)},b.prototype.clear=function(){for(var u=this.ke;u!=-1;)u=this.eh(u)},b.prototype.GE=function(u){for(var o=this.Gc(u);o!=-1;){var s=o;o=this.xe(s),this.hl(s)}this.va.T(u,0,-1),this.va.T(u,1,-1),this.PB(u,0)},b.prototype.B=function(){return this.Ni.size==0},b.prototype.OF=function(){return this.Ni.size},b.prototype.ds=function(u){return this.va.U(u,4)},b.prototype.lz=function(u){return this.va.U(u,3)},b}();h.lp=k}(U||(U={})),function(h){var k=function(){function b(u){u===void 0?(this.vg=new h.ad(2),this.va=new h.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new h.ad(2),this.va=new h.ad(u?4:2),this.ke=-1,this.Sv=u)}return b.prototype.hl=function(u){this.vg.kd(u)},b.prototype.Rw=function(){return this.vg.De()},b.prototype.dv=function(u){this.va.kd(u)},b.prototype.VA=function(){return this.va.De()},b.prototype.Rh=function(){var u=this.VA();return this.Sv&&(this.va.T(u,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,u),this.ke=u),u},b.prototype.eh=function(u){for(var o=this.sc(u);o!=-1;){var s=o;o=this.lb(o),this.hl(s)}this.Sv&&(o=this.va.U(u,2),s=this.va.U(u,3),o!=-1?this.va.T(o,3,s):this.ke=s,s!=-1&&this.va.T(s,2,o)),this.dv(u)},b.prototype.Bt=function(u){this.va.Ee(u)},b.prototype.addElement=function(u,o){var s=this.va.U(u,1),n=this.Rw();return s!=-1?this.vg.T(s,1,n):this.va.T(u,0,n),this.va.T(u,1,n),this.vg.T(n,0,o),n},b.prototype.hn=function(u){this.vg.Ee(u)},b.prototype.kd=function(u,o,s){o!=-1?(this.vg.T(o,1,this.vg.U(s,1)),this.va.U(u,1)==s&&this.va.T(u,1,o)):(this.va.T(u,0,this.vg.U(s,1)),this.va.U(u,1)==s&&this.va.T(u,1,-1)),this.hl(s)},b.prototype.Cy=function(u,o){var s=this.va.U(u,1),n=this.va.U(o,0);n!=-1&&(s!=-1?this.vg.T(s,1,n):this.va.T(u,0,n),this.va.T(u,1,this.va.U(o,1))),this.Sv&&(u=this.va.U(o,2),s=this.va.U(o,3),u!=-1?this.va.T(u,3,s):this.ke=s,s!=-1&&this.va.T(s,2,u)),this.dv(o)},b.prototype.ka=function(u){return this.vg.U(u,0)},b.prototype.Uj=function(u,o){this.vg.T(u,0,o)},b.prototype.lb=function(u){return this.vg.U(u,1)},b.prototype.sc=function(u){return this.va.U(u,0)},b.prototype.Ln=function(u){return this.ka(this.sc(u))},b.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},b.prototype.B=function(){return this.vg.size==0},b.prototype.OF=function(){return this.vg.size},b.prototype.lz=function(u){return this.va.U(u,3)},b}();h.cu=k}(U||(U={})),function(h){h.ua=function(){function k(){}return k.Xd=function(b,u,o){return u=u.zr(),b=b!=null&&b.Yd!==void 0?b.Yd(0):0,o&&(u*=4,b*=1.1),Math.max(b,u)},k.Gr=function(b){return 2*Math.sqrt(2)*b},k.mN=function(b){return Math.sqrt(2)*b},k.mj=function(b,u,o){var s=new h.l;return u.A(s),k.Xd(b,s,o)},k.rE=function(b,u,o){return u=u.Vg(1,0).zr(),b=b!=null?b.Yd(1):0,o&&(u*=4,b*=1.1),Math.max(b,u)},k.ov=function(b,u){var o=new h.l;return b.yc(o),b=new h.l,u.yc(b),o.$b(b),o},k.TN=function(b){var u=new h.l;if(b.yc(u),u.B())return null;var o=new h.fu(u,8),s=-1,n=new h.l,l=!1;do for(var c=0,d=b.ea();c<d;c++){if(b.Tj(c,n),(s=o.Ez(c,n,s))==-1){if(l)throw h.i.ga("internal error");b.Ap(u,!1),l=!0,o.reset(u,8);break}l=!1}while(l);return o},k.iE=function(b){var u=new h.l;b.yc(u);for(var o=new h.fu(u,8),s=-1,n=b.Ha(),l=new h.l,c=!1;n.ab();)for(;n.Ia();){var d=n.ia(),f=n.xb();if(d.A(l),(s=o.Ez(f,l,s))==-1){if(c)throw h.i.Ra();b.Ap(u,!1),c=!0,o.reset(u,8),n.aj();break}}return o},k.lj=function(b,u){var o=new h.l;b.yc(o);for(var s=new h.fu(o,8),n=-1,l=new h.l,c=b.Ha(),d=!1;c.ab();)for(;c.Ia();){var f=c.ia(),g=c.xb();if(f.A(l),l.isIntersecting(u)&&(n=s.Ez(g,l,n))==-1){if(d)throw h.i.ga("internal error.");b.Ap(o,!1),d=!0,s.reset(o,8),c.aj();break}}return s},k.jE=function(b,u){for(var o=new h.fu(u,8),s=new h.h,n=!1,l=new h.l,c=0;c<b.I();c++)if(b.D(c,s),u.contains(s)&&(l.L(s),o.xj(c,l)==-1)){if(n)throw h.i.Ra();n=!0,c=new h.l,b.Ap(c,!1),o.reset(c,8),c=-1}return o},k.gR=function(b,u,o){var s=new h.l,n=new h.l;b.yc(s),u.yc(n),s.X(o,o),n.X(o,o);var l=new h.l;l.L(s),l.Fa(n),b=b.Ha(),u=u.Ha();var c=new h.sC;c.WB(o);var d=!1;for(c.kK();b.ab();)for(;b.Ia();)b.ia().A(s),s.isIntersecting(l)&&(d=!0,(o=new h.l).L(s),c.DD(b.xb(),o));if(c.dF(),!d)return null;for(s=!1,c.jK();u.ab();)for(;u.Ia();)u.ia().A(n),n.isIntersecting(l)&&(s=!0,(o=new h.l).L(n),c.zD(u.xb(),o));return c.cF(),s?c:null},k.hR=function(b,u,o,s,n){var l=b.K(),c=u.K(),d=new h.l,f=new h.l;b.yc(d),u.yc(f),d.X(o,o),f.X(o,o);var g=new h.l;g.L(d),g.Fa(f);var w=new h.sC;w.WB(o);var $=!1;w.kK();var T=0;for(o=b.ea();T<o;T++)s&&l==1736&&!b.Gv(T)||(b.Tj(T,d),d.isIntersecting(g)&&($=!0,w.DD(T,d)));if(w.dF(),!$)return null;for(b=!1,w.jK(),s=0,o=u.ea();s<o;s++)n&&c==1736&&!u.Gv(s)||(u.Tj(s,f),f.isIntersecting(g)&&(b=!0,w.zD(s,f)));return w.cF(),b?w:null},k.Tu=function(b,u,o){if(b!=u)for(var s=0;s<o;s++)b[s]==null?b[s]=h.h.cl(u[s]):b[s].N(u[s])},k.Ey=function(b,u,o,s){var n=0;for(s+=0;n<s;o++,n++)b[n]==null&&(b[n]=[0,0]),b[n][0]=u[o].x,b[n][1]=u[o].y},k.Dy=function(b,u,o,s){var n=u,l=0;for(u=s+u;n<u;l++,n++)b[n]==null?b[n]=h.h.construct(o[l][0],o[l][1]):b[n].na(o[l][0],o[l][1])},k.fP=function(b,u,o){if(b!=u)for(var s=0;s<o;s++)b[s]==null?b[s]=new h.Ta(u[s]):u[s].copyTo(b[s])},k.qE=function(b,u,o,s){var n=0;return b!=null&&(n=b.Yd(0),s&&!o||b==null||(n+=1.01*b.pz(0))),o&&(u*=4,n*=1.01),Math.max(n,u)},k.oy=function(b,u,o){return k.qE(b,u.zr(),o,!1)},k.bO=function(b,u){var o=new h.l;return u.A(o),k.oy(b,o,!0)},k.py=function(b,u){return k.qE(b,u.zr(),!1,!0)},k.Ju=function(b,u){var o=new h.l;return u.A(o),k.py(b,o)},k.vG=function(b,u,o,s){s*=s;var n=new h.h;if(n.vc(b,u),(b=new h.h).vc(o,u),u=n.Uk(),o=b.Uk(),u<=s&&o<=s)return!0;var l=h.mc.ox(n.yi(b));return(l<=s*u||l<=s*o)&&0<=n.Sh(b)},k.ZJ=function(b,u,o,s){for(var n=0;n<u;n++){var l=b[n].y,c=h.P.Tk(l,o,s);c!=l&&(b[n].y=c)}},k}()}(U||(U={})),function(h){var k,b,u=function(){function l(c){this.Za=c}return l.prototype.compare=function(c,d,f){c=c.ka(f),f=this.Za.qk(d);var g=this.Za.qk(c);return f<g?-1:f==g?n.iq(d)&&n.Iv(c)?-1:n.iq(c)&&n.Iv(d)?1:0:1},l}(),o=function(){function l(c){this.Za=c}return l.prototype.qr=function(c,d,f){this.Za.CX(f,c,d)},l.prototype.bq=function(c){return this.Za.qk(c)},l}();(b=k||(k={}))[b.initialize=0]="initialize",b[b.pIn=1]="pIn",b[b.pL=2]="pL",b[b.pR=3]="pR",b[b.pT=4]="pT",b[b.right=5]="right",b[b.left=6]="left",b[b.all=7]="all";var s=function(){function l(){this.Za=null,this.Si=new h.Oc,this.ji=new h.ja(0),this.tg=[0,0]}return l.prototype.Zi=function(c,d){this.Si.pa=c.pa-d,this.Si.wa=c.wa+d,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.zB=function(c,d,f){if(c>d)throw h.i.O();this.Si.pa=c-f,this.Si.wa=d+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.Wo=function(c,d){this.Si.pa=c-d,this.Si.wa=c+d,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.next=function(){if(!this.Za.nq)throw h.i.Hb();if(0>this.ie)return-1;for(var c=!0;c;)switch(this.tg[this.ie]){case 1:c=this.AU();break;case 2:c=this.BU();break;case 3:c=this.CU();break;case 4:c=this.DU();break;case 5:c=this.AW();break;case 6:c=this.fT();break;case 7:c=this.oN();break;case 0:c=this.Bz();break;default:throw h.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},l.construct=function(c){var d=new l;return d.Za=c,d.ji.Jb(20),d.ie=-1,d},l.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},l.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var c=this.Za.Pp(this.Mc);return this.Si.wa<c?(c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=6),!0):c<this.Si.pa?(c=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),!0)},l.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var c=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.tg[++this.ie]=5),!0}return c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),(c=this.Za.nk(this.Mc))!=-1&&this.ji.add(c),!0},l.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var c=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=6),!0}return c=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),(c=this.Za.sj(this.Mc))!=-1&&this.ji.add(c),!0},l.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var c=this.Za.pk(this.Mc);return c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},l.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&n.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},l.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},l.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},l.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},l}();h.AY=s;var n=function(){function l(c){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=c,this.nq=this.Uv=!1}return l.prototype.mr=function(){this.Pk(!0)},l.prototype.Dr=function(c,d){if(!this.Uv)throw h.i.Hb();this.Hj.push(new h.Oc(c,d))},l.prototype.Hp=function(){if(!this.Uv)throw h.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},l.prototype.xj=function(c){if(!this.Uf||!this.nq)throw h.i.O("invalid call");if(this.kf==-1){var d=this.Hj.length;if(this.dA){var f=new h.ja(0);f.Jb(2*d),this.XI(f),this.bi.Jb(2*d),this.bi.resize(0),this.WI(f),this.Mm.resize(d,-1),this.Mm.Yj(-1,0,d),this.dA=!1}else this.Mm.Yj(-1,0,d);this.kf=this.Vu()}d=this.kG(c<<1,this.kf),f=this.bg.addElement(1+(c<<1),this.rz(d)),this.QJ(d,f),this.Mm.set(c,d),this.aw++},l.prototype.remove=function(c){if(!this.Uf||!this.nq)throw h.i.ga("invalid call");var d=this.Mm.get(c);if(d==-1)throw h.i.O("the interval does not exist in the interval tree");this.Mm.set(c,-1),this.aw--;var f=this.rz(d),g=this.bg.UR(f);this.bg.wd(this.rR(d),f),this.bg.wd(this.OR(d),f),(c=this.bg.size(f))==0&&(this.bg.HP(f),this.UJ(g,-1)),this.Gj.kd(d),f=this.PF(g);var w=this.sj(g),$=this.nk(g);for(d=0;!(0<c||g==this.kf||w!=-1&&$!=-1);)g==this.sj(f)?w!=-1?(this.Qk(f,w),this.Wj(w,f),this.Qk(g,-1)):$!=-1?(this.Qk(f,$),this.Wj($,f),this.Sk(g,-1)):this.Qk(f,-1):w!=-1?(this.Sk(f,w),this.Wj(w,f),this.Qk(g,-1)):$!=-1?(this.Sk(f,$),this.Wj($,f),this.Sk(g,-1)):this.Sk(f,-1),this.Wj(g,-1),d++,g=f,c=(f=this.pk(g))!=-1?this.bg.size(f):0,w=this.sj(g),$=this.nk(g),f=this.PF(g)},l.prototype.reset=function(){if(!this.Uf||!this.nq)throw h.i.O("invalid call");this.Pk(!1)},l.prototype.size=function(){return this.aw},l.prototype.getIterator=function(){return s.construct(this)},l.prototype.XI=function(c){for(var d=this.Hj.length,f=0;f<2*d;f++)c.add(f);this.DX(c,2*d)},l.prototype.WI=function(c){for(var d=NaN,f=0;f<c.size;f++){var g=c.get(f),w=this.qk(g);w!=d&&(this.bi.add(g),d=w)}},l.prototype.qS=function(){var c=this.Hj.length,d=new h.ja(0);d.Jb(2*c),this.XI(d),this.bi.Jb(2*c),this.bi.resize(0),this.WI(d),this.Gj.Ee(c),this.Vi.hn(2*c);var f=h.Zc.Qh(c);for(f.Yj(-1,0,c),this.kf=this.Vu(),c=0;c<d.size;c++){var g=d.get(c),w=f.get(g>>1);w!=-1?this.QJ(w,this.Vi.addElement(this.rz(w),g)):(w=this.kG(g,this.kf),f.set(g>>1,w))}},l.prototype.kG=function(c,d){var f=d,g=d,w=-1,$=0,T=this.bi.size-1,E=0,O=c>>1,P=NaN,R=NaN,F=!0,V=this.yR(O);for(O=this.vR(O);F;){$<T?(E=$+h.P.truncate((T-$)/2),this.bz(f)==-1&&this.AJ(f,this.bi.get(E),this.bi.get(E+1))):this.bz(f)==-1&&this.AJ(f,this.bi.get($),this.bi.get($));var L=this.Pp(f);if(O<L)d!=-1&&(d==f?(g=f,P=L,R=(d=this.sj(f))!=-1?this.Pp(d):NaN):R>L&&(L<P?this.Qk(g,f):this.Sk(g,f),this.Sk(f,d),this.Uf&&(this.Wj(f,g),this.Wj(d,f)),g=f,P=L,d=-1,R=NaN)),(T=this.sR(f))==-1&&(T=this.Vu(),this.ZW(f,T)),f=T,T=E;else if(V>L)d!=-1&&(d==f?(g=f,P=L,R=(d=this.nk(f))!=-1?this.Pp(d):NaN):R<L&&(L<P?this.Qk(g,f):this.Sk(g,f),this.Qk(f,d),this.Uf&&(this.Wj(f,g),this.Wj(d,f)),g=f,P=L,d=-1,R=NaN)),($=this.PR(f))==-1&&($=this.Vu(),this.jX(f,$)),f=$,$=E+1;else{(F=this.pk(f))==-1&&(F=this.uP(f),this.UJ(f,F));var G=this.aN(F,c);w=this.sP(),this.mX(w,F),this.YW(w,G),f!=d&&(L<P?this.Qk(g,f):this.Sk(g,f),this.Uf&&this.Wj(f,g),d!=-1&&(R<L?this.Qk(f,d):this.Sk(f,d),this.Uf&&this.Wj(d,f))),F=!1}}return w},l.prototype.Vu=function(){return this.ne.De()},l.prototype.uP=function(c){return this.Uf?this.bg.Rr(c):this.Vi.Rh(c)},l.prototype.sP=function(){return this.Gj.De()},l.prototype.Pk=function(c){c?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=h.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=h.Zc.Qh(0),this.bg=new h.$j,this.bg.Xo(new u(this))):this.bg.clear():this.Vi==null?this.Vi=new h.lp:this.Vi.clear(),this.ne==null?(this.Gj=new h.ad(3),this.ne=new h.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},l.prototype.AJ=function(c,d,f){this.SW(c,d),this.TW(c,f)},l.prototype.Pp=function(c){var d=this.bz(c);return d==-1?NaN:(d=this.qk(d))==(c=this.qk(this.bR(c)))?d:.5*(d+c)},l.prototype.SW=function(c,d){this.ne.T(c,0,d)},l.prototype.TW=function(c,d){this.ne.T(c,1,d)},l.prototype.ZW=function(c,d){this.ne.T(c,3,d)},l.prototype.jX=function(c,d){this.ne.T(c,4,d)},l.prototype.UJ=function(c,d){this.ne.T(c,2,d)},l.prototype.Qk=function(c,d){this.ne.T(c,5,d)},l.prototype.Sk=function(c,d){this.ne.T(c,6,d)},l.prototype.Wj=function(c,d){this.ne.T(c,7,d)},l.prototype.mX=function(c,d){this.Gj.T(c,0,d)},l.prototype.aN=function(c,d){return this.Uf?this.bg.addElement(d,c):this.Vi.addElement(c,d)},l.prototype.YW=function(c,d){this.Gj.T(c,1,d)},l.prototype.QJ=function(c,d){this.Gj.T(c,2,d)},l.prototype.ml=function(c){return this.Uf?this.bg.sc(c):this.Vi.sc(c)},l.prototype.bs=function(c){return this.Uf?this.bg.Gc(c):this.Vi.Gc(c)},l.iq=function(c){return(1&c)==0},l.Iv=function(c){return(1&c)==1},l.prototype.bz=function(c){return this.ne.U(c,0)},l.prototype.bR=function(c){return this.ne.U(c,1)},l.prototype.pk=function(c){return this.ne.U(c,2)},l.prototype.sR=function(c){return this.ne.U(c,3)},l.prototype.PR=function(c){return this.ne.U(c,4)},l.prototype.sj=function(c){return this.ne.U(c,5)},l.prototype.nk=function(c){return this.ne.U(c,6)},l.prototype.PF=function(c){return this.ne.U(c,7)},l.prototype.rz=function(c){return this.Gj.U(c,0)},l.prototype.rR=function(c){return this.Gj.U(c,1)},l.prototype.OR=function(c){return this.Gj.U(c,2)},l.prototype.yR=function(c){return this.Hj[c].pa},l.prototype.vR=function(c){return this.Hj[c].wa},l.prototype.DX=function(c,d){this.Cm==null&&(this.Cm=new h.Zt);var f=new o(this);this.Cm.sort(c,0,d,f)},l.prototype.CX=function(c,d,f){var g=this;c.Wd(d,f,function(w,$){var T=g.qk(w),E=g.qk($);return T<E||T==E&&l.iq(w)&&l.Iv($)?-1:1})},l.prototype.qk=function(c){var d=this.Hj[c>>1];return l.iq(c)?d.pa:d.wa},l}();h.ur=n}(U||(U={})),function(h){var k=function(){function b(u){if(u==null)throw h.i.ga("Invalid arguement");this.hf=u;var o=u.iR();o.cS()?u.ef.DG()?this.no=h.ui.PannableFold:this.no=h.ui.Clip:this.no=h.ui.DontClip,o.dS()?u.$f.DG()?this.Sm=h.ui.PannableFold:this.Sm=h.ui.Clip:this.Sm=h.ui.DontClip,this.Dm=o.Lr,this.hH=o.Xu,u=this.hf.nH,this.WG=u.ks(2147483648),this.Wv=u.ks(1073741824)}return b.Bh=function(u,o,s){return o.yw.Bh(u,s)},b.Tt=function(u,o,s,n){return u.yw.Tt(o,s,n)},b.St=function(u,o,s,n){if(s=0>s?o.length:s,(u=u.yw.Tt(o,s,n))==s)return u;for(var l=o=0;l<s;l++){var c=n[l];c.isNaN()||(o<l&&n[o].N(c),o++)}for(;o<s;o++)n[o].Sc();return u},b.transform=function(u,o,s,n,l){if(u.isIdentity())return h.ua.fP(n,o,s),s;for(var c=[],d=0,f=0;f<s;){for(var g=Math.min(c.length,s-f),w=f,$=0;w<g;w++,$++)c[$]==null?c[$]=o[w].D():o[w].D(c[$]);var T=l?b.St(u,c,g,c):b.Tt(u,c,g,c);for($=w=0;w<T;w++,$++)n[f]==null&&(n[f]=new h.Ta(o[f])),n[f].Db(c[$]);f+=g,d+=T}return d},b.prototype.Tt=function(u,o,s){if(this.hf.isIdentity())return u!=s&&h.ua.Tu(s,u,o),o;var n=this.hf.ef,l=this.hf.$f,c=n.Tb(),d=l.Tb();if(c==0&&c===d){var f=n.Sp();return l=f/(l=l.Sp()),(f=new h.Ed).Jt(l,l),f.aY(u,o,s),o}if(f=h.P.Hu(Math.min(o,64)),c==3){var g=n.Li;c=(n=g.hk()).Tb(),s!=u&&h.ua.Tu(s,u,o),h.Ab.bl(g,s,o,!0),g.St(h.dm.forward,s,o),h.Ab.al(g,s,o,!0)}if(c==3||d===3)throw h.i.ga("image: transform_in_place_");if(c==2)this.no==h.ui.Clip?(s!=u&&h.ua.Tu(s,u,o),u=n.ol(),h.Ab.JS(u,n,s,o)):(s!=u&&h.ua.Tu(s,u,o),n.Xc()&&(c=n.Yd(0),g=n.Le(),h.Ab.AX(s,o,g,c),h.Ab.lF(s,o,n,0))),h.Ab.DL(n,s,o,f);else for(c=n.Yd(0),g=n.Le(),n=0;n<o;n++)h.Ab.BX(u[n],g,c,s[n]);for(h.Ab.BL(this.hf,s,o,f),u=0,(d=d==2)?u=l.Bi():isNaN(this.Dm)||(u=this.Dm),d&&this.Sm!=h.ui.Clip||h.Ab.lF(s,o,l.tc(),u),d&&(h.Ab.tG(s,o,l,this.Sm),h.Ab.CL(l,s,o,f)),u=o,n=0;n<o;++n)s[n].isNaN()&&u--;return u},b.prototype.Bh=function(u,o){if(this.hf.isIdentity()||u.B())return u;if(u.K()==33)return this.SI(u);var s=this.hf.ef,n=this.hf.$f,l=s.Tb(),c=n.Tb();if(l==0&&l==c)return o=s.Sp(),o/=n=n.Sp(),(n=new h.Ed).Jt(o,o),(u=h.ba.kg(u)).Pc(n),u;switch(u.K()){case 1607:case 1736:u=this.QI(u,o);break;case 550:u=this.aW(u,o);break;case 197:u=this.$V(u,o);break;default:throw h.i.ga("")}return u},b.prototype.SI=function(u){var o=u.D(),s=[];return s[0]=o,this.Tt(s,1,s),(u=new h.Ta(u)).Db(s[0]),u},b.prototype.QI=function(u,o){if(u.vm())throw h.i.ga("curves not supported");var s=u.K();if(s==1736)return this.bW(u,o);if(s==1607)return this.cW(u,o);throw h.i.ga("projectMultiPath")},b.prototype.bW=function(u,o){var s=this.hf.ef,n=this.hf.$f,l=s.Tb(),c=n.Tb(),d=h.P.Hu(Math.min(u.I(),64)),f=h.Ea.kg(u);l==3&&(l=(s=(u=s.Li).hk()).Tb(),f=u.bl(f,!0),this.yp(u,h.dm.forward,f),f=u.al(f,!0)),u=null,c==3&&(c=(n=(u=n.Li).hk()).Tb());var g=l==2,w=c==2,$=w?n.tc():n,T=!w&&!this.Wv;c=!1;var E=f;if(g){if((E=h.Ab.OI(E,s,this.no,o)).B())return E}else{if(f=new h.l,E.yc(f),l=s.Le(),f.G<l.G||f.H>l.H){var O=h.l.construct(f.v-1,l.G,f.C+1,l.H);if((E=h.ti.Pu(E,O,s,NaN,0,o)).B())return E}f.S()>2*l.S()&&(E=h.Ab.Jp(E,-2*l.S(),2*l.S(),s,!0,0,!0,o))}f=this.hH,(l=!isNaN(f))&&(E=h.Zl.local().W(E,f,o)),O=w?n.mk():null;var P=NaN;g&&(P=s.Bi());var R=n.Yr()!=null;if(this.WG)g&&(h.Ab.wr(s,P,E,d),l&&(g=s.jh(),f*=(P=s.tc().jh())/g)),h.Ab.vr(this.hf,E,T,d),l&&(g=s.tc().jh(),f*=(P=n.tc().jh())/g),s=E;else{var F=new h.Ua(E.description);F.yD(E),g&&(h.Ab.wr(s,P,F,d),l&&(g=s.jh(),f*=(P=s.tc().jh())/g)),h.Ab.vr(this.hf,F,T,d),l&&(g=s.tc().rm(),f*=(P=n.tc().rm())/g),T=NaN,w?(O=n.mk(),T=n.Bi()):isNaN(this.Dm)||(T=this.Dm),g=b.vv(s)|b.vv(n),P=10*$.Yd(0),this.Wv&&(g=3,P=0),s=h.Ab.PQ(E,s,F,$,T,o,g,P)}return R&&(s=h.Ab.SD(s,n,o)),w&&(c||(w=$.Le().S(),s.Vg(0,0).S()>=w-$.Yd(0)&&($=O.getNorthPoleLocation(),w=O.getSouthPoleLocation(),E=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),T=0,E==h.Eg.PE_POLE_POINT&&$!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),O==h.Eg.PE_POLE_POINT&&w!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(c=!0))),s=h.Ab.Hz(s,n,this.Sm,o),l&&(s=h.Zl.local().W(s,f,o)),h.Ab.Kx(n,s,d)),s.B()||(c&&(s=h.$l.local().W(s,n,!1,o)),u!=null&&(s=u.al(s,!1),this.yp(u,h.dm.reverse,s),s=u.bl(s,!1))),s},b.vv=function(u){if(u.Tb()!=2)return 0;var o=0,s=u.mk();u=s.getNorthPoleLocation();var n=s.getSouthPoleLocation(),l=s.getNorthPoleGeometry();return s=s.getSouthPoleGeometry(),l==h.Eg.PE_POLE_POINT&&u!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),s==h.Eg.PE_POLE_POINT&&n!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},b.prototype.cW=function(u,o){var s=this.hf.ef,n=this.hf.$f,l=s.Tb(),c=n.Tb(),d=h.P.Hu(Math.min(u.I(),64)),f=h.Ua.kg(u);l==3&&(l=(s=(u=s.Li).hk()).Tb(),f=u.bl(f,!0),this.yp(u,h.dm.forward,f),f=u.al(f,!0)),u=null,c==3&&(c=(n=(u=n.Li).hk()).Tb());var g=l==2;l=(c=c==2)?n.tc():n;var w=!c&&!this.Wv;if(g){if((f=h.Ab.OI(f,s,this.no,o)).B())return f}else{var $=new h.l;f.yc($);var T=s.Le();if(($.G<T.G||$.H>T.H)&&($=h.l.construct($.v-1,T.G,$.C+1,T.H),(f=h.ti.Pu(f,$,s,NaN,0,o)).B()))return f}var E=NaN;g&&(E=s.Bi()),$=n.Yr()!=null,T=this.hH;var O=!isNaN(T);if(O&&(f=h.Zl.local().W(f,T,o)),this.WG)g&&h.Ab.wr(s,E,f,d),O&&(g=s.jh(),T*=(E=s.tc().jh())/g),h.Ab.vr(this.hf,f,w,d),O&&(g=s.tc().jh(),T*=(E=n.tc().jh())/g),s=f;else{var P=new h.Ua(f.description);P.yD(f),g&&(h.Ab.wr(s,E,P,d),O&&(g=s.jh(),T*=(E=s.tc().jh())/g)),h.Ab.vr(this.hf,P,w,d),O&&(g=s.tc().jh(),T*=(E=n.tc().jh())/g),w=NaN,c?w=n.Bi():isNaN(this.Dm)||(w=this.Dm),g=b.vv(s)|b.vv(n),E=10*l.Yd(0),this.Wv&&(g=3,E=0),s=h.Ab.QQ(f,s,P,l,w,o,g,E)}return $&&(s=h.Ab.SD(s,n,o)),c&&(s=h.Ab.Hz(s,n,this.Sm,o),O&&(s=h.Zl.local().W(s,T,o)),h.Ab.Kx(n,s,d)),s.B()||u!=null&&(s=u.al(s,!1),this.yp(u,h.dm.reverse,s),s=u.bl(s,!1)),s},b.prototype.$V=function(u,o){var s=(u.da()+u.S())/400;return s!=0?(s=h.Zl.local().W(u,s,o),s=this.QI(s,o),o=u.Ja(),s.dn(o)):(o=new h.Ta(u.Kp()),s=this.SI(o),o=u.Ja(),s.B()?o.Pa():(u.copyTo(o),u=s.D(),o.L(u.x,u.y,u.x,u.y))),o},b.prototype.aW=function(u,o){u=h.ba.kg(u);var s=this.hf.ef,n=this.hf.$f,l=s.Tb(),c=n.Tb(),d=h.P.Hu(Math.min(u.I(),64));if(l==3){var f=s.Li;l=(s=f.hk()).Tb(),u=f.al(u,!0),this.yp(f,h.dm.forward,u),u=f.bl(u,!0)}if(l==2){if(this.no==h.ui.Clip?u=h.Zj.local().W(u,s.ol(),s,o):s.Xc()&&(l=new h.l,u.yc(l),s.Le().contains(l)||(this.no==h.ui.PannableFold&&(u=h.Ab.nj(u,s)),h.Ab.Lt(u,s.Le(),s.Yd(0),!0),u=h.Ab.Hn(u,s,0,!0,0,o))),u.B())return u;h.Ab.wr(s,0,u,d)}else h.Ab.Lt(u,s.Le(),s.Yd(0),!0);return h.Ab.vr(this.hf,u,!1,d),s=0,l=!1,f=null,c==3&&(l=!0,c=(n=(f=n.Li).hk()).Tb()),(c=c==2)?s=n.Bi():isNaN(this.Dm)||(s=this.Dm),c&&this.Sm!=h.ui.Clip||(u=h.Ab.Hn(u,n.tc(),s,!1,0,o)),c&&(u=h.Ab.Hz(u,n,this.Sm,o),h.Ab.Kx(n,u,d),u.B())||l&&(u=f.al(u,!0),this.yp(f,h.dm.reverse,u),u=f.bl(u,!0)),u},b.prototype.yp=function(u,o,s){var n=s.I();if(n!=0){for(var l=s.vb(0),c=h.P.mg(200,0),d=[],f=0;f<n;){var g=Math.min(100,n-f);l.Xw(2*f,2*g,c,2,!0);for(var w=0;w<g;++w)d[w]=h.h.construct(c[2*f],c[2*f+1]);u.St(o,d,g),f+=g}s.Qc(1993)}},b.Py=function(u,o,s){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var n=u.K();return n==197?(n=new h.Ea(u.description)).bd(u,!1):h.ba.zd(n)?(n=new h.Ua(u.description)).pc(u,!0):n=u,(n=h.Ab.nj(n,o)).B()?n:h.Ab.Hn(n,o,0,n!=u,0,s)},b.pj=function(u,o,s,n){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var l=u.K();if(h.ba.Ic(l)){u=h.Ab.nj(u,o),l=new h.l,u.A(l);for(var c=h.ua.oy(o,l,!1),d=o.ih(),f=Math.floor((l.v-d.v)/d.S())*d.S()+d.v;f<l.C;)f>l.v+c&&f<l.C-c&&(u=h.Ab.pS(u,o,s,f)),f+=d.S()}else{if(l==197)return(l=new h.Ea(u.description)).bd(u,!1),b.pj(l,o,s,n);if(h.ba.zd(l))return(l=new h.Ua(u.description)).pc(u,!0),b.pj(l,o,s,n)}return b.Py(u,o,n)},b}();h.du=k}(U||(U={})),function(h){var k=function(b){function u(o,s,n,l){var c=b.call(this)||this;return o===void 0?c.description=h.fe.pg():n===void 0?c.description=o:(c.description=h.fe.pg(),c.UB(o,s),c.Sl(n,l)),c}return xt(u,b),u.prototype.K=function(){return 322},u.prototype.Rb=function(){var o=this.ta-this.qa,s=this.oa-this.ma;return Math.sqrt(o*o+s*s)},u.prototype.Di=function(o){var s=this.ta-this.qa,n=this.oa-this.ma;return Math.sqrt(s*s+n*n)<=o},u.prototype.Rn=function(){return!1},u.prototype.lg=function(){var o=new h.h;return o.vc(this.xc(),this.bc()),o},u.YO=function(o,s){return new u(o.x,o.y,s.x,s.y)},u.prototype.dn=function(o){o.Pa(),o.Pf(this.description);var s=new h.l;this.A(s),o.Zo(s),s=1;for(var n=this.description.Ba;s<n;s++)for(var l=this.description.ld(s),c=h.sa.Wa(l);s<c;s++){var d=this.Vg(l,0);o.setInterval(l,0,d)}},u.prototype.A=function(o){o.L(this.ta,this.oa,this.qa,this.ma),o.normalize()},u.prototype.So=function(o){o.Pa(),o.$b(this.ta,this.oa,this.Pd(0,1,0)),o.$b(this.qa,this.ma,this.Pd(1,1,0))},u.prototype.Pc=function(o){if(o instanceof h.Ed){this.wc();var s=new h.h;s.x=this.ta,s.y=this.oa,o.Gh(s,s),this.ta=s.x,this.oa=s.y,s.x=this.qa,s.y=this.ma,o.Gh(s,s),this.qa=s.x,this.ma=s.y}else this.wc(),(s=new h.Od).x=this.ta,s.y=this.oa,s.z=this.Pd(0,1,0),s=o.hp(s),this.ta=s.x,this.oa=s.y,this.vn(0,1,0,s.z),s.x=this.qa,s.y=this.ma,s.z=this.Pd(1,1,0),s=o.hp(s),this.qa=s.x,this.ma=s.y,this.vn(1,1,0,s.z)},u.prototype.Ja=function(){return new u(this.description)},u.prototype.Sx=function(o,s){return(this.qa-o-(this.ta-o))*(this.ma-s+(this.oa-s))*.5},u.prototype.ux=function(o){return o*this.Rb()},u.prototype.IG=function(o){return o/this.Rb()},u.prototype.yF=function(o){return h.mc.jq(this.ta,this.qa,o)},u.prototype.aR=function(o){return h.mc.jq(this.oa,this.ma,o)},u.prototype.fl=function(o,s){var n=new h.jg;return this.dh(o,s,n),n.get()},u.prototype.dh=function(o,s,n){if(n==null)throw h.i.O();n.Qr(),(n=n.get()).Pf(this.description);var l=new h.h;this.ic(o,l),n.UB(l.x,l.y),this.ic(s,l),n.Sl(l.x,l.y),l=1;for(var c=this.description.Ba;l<c;l++)for(var d=this.description.Fd(l),f=h.sa.Wa(d),g=0;g<f;g++){var w=this.Vc(o,d,g);n.TB(d,g,w),w=this.Vc(s,d,g),n.JB(d,g,w)}},u.prototype.Vc=function(o,s,n){if(s==0)return n==0?this.ic(o).x:this.ic(o).y;switch(h.sa.gz(s)){case 0:return .5>o?this.yv(s,n):this.jv(s,n);case 1:var l=this.yv(s,n);return s=this.jv(s,n),h.mc.jq(l,s,o);case 2:throw h.i.ga("not implemented")}throw h.i.Ra()},u.prototype.ge=function(o,s){var n=this.qa-this.ta,l=this.ma-this.oa,c=n*n+l*l;return c==0?.5:(o=((o.x-this.ta)*n+(o.y-this.oa)*l)/c,s||(0>o?o=0:1<o&&(o=1)),o)},u.prototype.fq=function(o,s,n,l){if(o){if((o=this.ma-this.oa)==0)return s==this.ma?-1:0;if(0>(s=(s-this.oa)/o)||1<s)return 0;n!=null&&(n[0]=this.yF(s))}else{if((o=this.qa-this.ta)==0)return s==this.qa?-1:0;if(0>(s=(s-this.ta)/o)||1<s)return 0;n!=null&&(n[0]=this.aR(s))}return l!=null&&(l[0]=s),1},u.prototype.Me=function(o,s){var n=this.ma-this.oa;return n==0?o==this.ma?s:NaN:(o=(o-this.oa)/n,s=this.yF(o),o==1&&(s=this.qa),s)},u.prototype.tu=function(o,s,n){return 0<=this.tp(o.x,o.y,s,n)},u.prototype.xi=function(o,s,n){return 0<=this.tp(o,s,n,!0)},u.prototype.ss=function(o,s){return this.tu(o,s,!1)},u.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var o=this.ta;this.ta=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=0;for(var s=this.description.Qq-2;o<s;o++){var n=this.la[o];this.la[o]=this.la[o+s],this.la[o+s]=n}}},u.prototype.wu=function(o,s){(s=h.h.construct(o,s)).sub(this.bc());var n=new h.h;return n.vc(this.xc(),this.bc()),(o=n.yi(s))>(s=8881784197001252e-31*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x)))?-1:o<-s?1:0},u.prototype.tp=function(o,s,n,l){var c=this.ta,d=this.oa,f=o-c,g=s-d;if((f=Math.sqrt(f*f+g*g))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:0;if(f=o-this.qa,g=s-this.ma,(f=Math.sqrt(f*f+g*g))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:1;if(f=this.qa-this.ta,g=this.ma-this.oa,0<(l=Math.sqrt(f*f+g*g))){var w=1/l,$=o-c,T=s-d,E=$*(f*=w)+T*(g*=w),O=17763568394002505e-31*(Math.abs($*f)+Math.abs(T*g)),P=f;if(f=-g,g=P,E<-(O=Math.max(n,O))||E>l+O)return NaN;if(Math.abs($*f+T*g)<=Math.max(n,17763568394002505e-31*(Math.abs($*f)+Math.abs(T*g)))&&(.5>=(f=h.P.Tk(E*w,0,1))?(g=this.ta+(this.qa-this.ta)*f,l=this.oa+(this.ma-this.oa)*f):(g=this.qa-(this.qa-this.ta)*(1-f),l=this.ma-(this.ma-this.oa)*(1-f)),h.h.Jy(g,l,o,s)<=n)){if(.5>f){if(h.h.Jy(g,l,c,d)<=n)return 0}else if(h.h.Jy(g,l,this.qa,this.ma)<=n)return 1;return f}}return NaN},u.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.AM(o))},u.prototype.mD=function(o,s,n){var l=n?this.ta:this.qa;n=n?this.oa:this.ma;var c=new h.h;return c.x=o.qa-l,c.y=o.ma-n,!(s.Sh(c)>6661338147750939e-31*s.aD(c))||(c.x=o.ta-l,c.y=o.oa-n,s.Sh(c)<=6661338147750939e-31*s.aD(c))},u.prototype.lD=function(o){var s=new h.h;return s.x=this.qa-this.ta,s.y=this.ma-this.oa,!!this.mD(o,s,!1)&&(s.Uq(),!!this.mD(o,s,!0))},u.IM=function(o,s){var n=o.wu(s.ta,s.oa),l=o.wu(s.qa,s.ma);return!(0>n&&0>l||0<n&&0<l)&&(n=s.wu(o.ta,o.oa),l=s.wu(o.qa,o.ma),!(0>n&&0>l||0<n&&0<l)&&((n=o.Rb())>(l=s.Rb())?o.lD(s):s.lD(o)))},u.GM=function(o,s,n){var l=h.h.construct(NaN,NaN),c=o.qa-o.ta,d=o.ma-o.oa,f=s.qa-s.ta,g=s.ma-s.oa,w=f*d-c*g;if(w==0)return l;var $=8881784197001252e-31*(Math.abs(f*d)+Math.abs(c*g)),T=s.ta-o.ta,E=s.oa-o.oa,O=f*E-T*g,P=O/w,R=Math.abs(w);return P<-(f=(8881784197001252e-31*(Math.abs(f*E)+Math.abs(T*g))*R+$*Math.abs(O))/(w*w)+2220446049250313e-31*Math.abs(P))||P>1+f||(f=(g=c*E-T*d)/w)<-(c=(8881784197001252e-31*(Math.abs(c*E)+Math.abs(T*d))*R+$*Math.abs(g))/(w*w)+2220446049250313e-31*Math.abs(f))||f>1+c||(P=h.P.Tk(P,0,1),c=h.P.Tk(f,0,1),d=o.ic(P),w=s.ic(c),($=new h.h).vc(d,w),$.length()>n&&($.add(d,w),$.scale(.5),P=o.ge($,!1),c=s.ge($,!1),o=o.ic(P),s=s.ic(c),o.sub(s),o.length()>n)||l.na(P,c)),l},u.JM=function(o,s,n,l){var c=0;if((o.ta==s.ta&&o.oa==s.oa||o.ta==s.qa&&o.oa==s.ma)&&(c++,!l))return 1;if(o.qa==s.ta&&o.ma==s.oa||o.qa==s.qa&&o.ma==s.ma){if(++c==2)return 2;if(!l)return 1}return s.xi(o.ta,o.oa,n)||s.xi(o.qa,o.ma,n)||o.xi(s.ta,s.oa,n)||o.xi(s.qa,s.ma,n)?1:l&&c!=0||u.IM(o,s)==0?0:1},u.Yx=function(o,s,n,l,c,d){var f=0,g=o.tp(s.ta,s.oa,d,!1),w=o.tp(s.qa,s.ma,d,!1),$=s.tp(o.ta,o.oa,d,!1),T=s.tp(o.qa,o.ma,d,!1);return isNaN(g)||(l!=null&&(l[f]=g),c!=null&&(c[f]=0),n!=null&&(n[f]=h.h.construct(s.ta,s.oa)),f++),isNaN(w)||(l!=null&&(l[f]=w),c!=null&&(c[f]=1),n!=null&&(n[f]=h.h.construct(s.qa,s.ma)),f++),f==2||isNaN($)||g==0&&$==0||w==0&&$==1||(l!=null&&(l[f]=0),c!=null&&(c[f]=$),n!=null&&(n[f]=h.h.construct(o.ta,o.oa)),f++),f==2||isNaN(T)||g==1&&T==0||w==1&&T==1||(l!=null&&(l[f]=1),c!=null&&(c[f]=T),n!=null&&(n[f]=h.h.construct(s.qa,s.ma)),f++),0<f?(f==2&&l!=null&&l[0]>l[1]&&(o=l[0],l[0]=l[1],l[1]=o,c!=null&&(l=c[0],c[0]=c[1],c[1]=l),n!=null&&(c=h.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),f):(f=u.GM(o,s,d),isNaN(f.x)?0:(n!=null&&(n[0]=o.ic(f.x)),l!=null&&(l[0]=f.x),c!=null&&(c[0]=f.y),1))},u.prototype.$F=function(){return 0},u.prototype.qp=function(){},u.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},u}(h.NC);h.zb=k}(U||(U={})),function(h){var k=function(){function b(){this.Lm=[],this.za=-1}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var u=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),u}return this.Lm=null},b.prototype.VX=function(u){this.Lm.push(u)},b.prototype.re=function(){},b}();h.bL=k}(U||(U={})),function(h){var k;(k=h.NL||(h.NL={}))[k.enumFillRuleOddEven=0]="enumFillRuleOddEven",k[k.enumFillRuleWinding=1]="enumFillRuleWinding";var b=function(u){function o(s,n){var l=u.call(this)||this;if(l.yf=!1,l.Gq=null,l.uq=0,l.tq=0,l.Cj=null,l.Og=!1,l.nb=null,l.mb=null,l.Se=null,l.Nj=null,l.Td=null,l.vq=0,l.gb=0,l.zq=0,n===void 0)l.yf=s,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=h.fe.pg();else{if(n==null)throw h.i.O();l.yf=s,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=n}return l.Cj=null,l.gb=0,l}return xt(o,u),o.prototype.vm=function(){return 0<this.vq},o.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new h.Ta(this.description):this.Gq.Pf(this.description)},o.prototype.rx=function(s,n){var l=new h.h;l.x=s,l.y=n,this.Nt(l)},o.prototype.Nt=function(s){this.Xx(),this.Gq.Db(s),this.Og=!0},o.prototype.nf=function(s){if(s.B())throw h.i.O();this.Ll(s.description),this.Xx(),s.copyTo(this.Gq),this.Og=!0},o.prototype.Rx=function(){var s=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=h.Zc.Qh(2),this.nb.write(0,0),this.mb=h.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),s++);var n=this.xa;this.nb.write(this.nb.size-1,this.xa+s),this.fm(n+s),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(n,this.Gq),this.Og=!1)},o.prototype.Aj=function(s,n){this.Rx(),this.Db(this.xa-1,s,n)},o.prototype.Ei=function(s){this.Rx(),this.Db(this.xa-1,s)},o.prototype.lineTo=function(s){this.Rx(),this.It(this.xa-1,s)},o.prototype.xU=function(s){if(this.wc(),this.yf)throw h.i.Ra();var n=this.ea();if(s>n)throw h.i.Ra();if(this.ec(s)){if(this.mb==null)throw h.i.Ra();var l=this.xa,c=this.Ca(s),d=this.Wc(s);this.fm(this.xa+1),this.oc();for(var f=0,g=this.description.Ba;f<g;f++)if(this.Aa[f]!=null){var w=h.sa.Wa(this.description.Fd(f));this.Aa[f].On(w*d,this.Aa[f],w*c,w,!0,1,w*l)}for(;n>s;n--)l=this.nb.read(n),this.nb.write(n,l+1);this.mb.FE(s,1)}},o.prototype.Cp=function(){if(this.vx(),s===void 0){this.Og=!1;var s=this.ea()-1}var n=this.mb.read(s);this.mb.write(s,1|n),this.Se!=null&&(s=this.Wc(s)-1,this.Se.write(s,1),this.Nj.write(s,-1))},o.prototype.ec=function(s){return(1&this.mb.read(s))!=0},o.prototype.Pn=function(s){if(this.ec(s))return!0;var n=this.Ca(s);return!(n>(s=this.Wc(s)-1))&&(n=this.Oa(n),s=this.Oa(s),n.rb(s))},o.prototype.Av=function(s){return(2&this.mb.read(s))!=0},o.prototype.pc=function(s,n){if(this.Ll(s.description),s.K()!=322)throw h.i.Ra();var l=new h.Ta;(n||this.B())&&(s.Vo(l),this.nf(l)),s.Ro(l),this.lineTo(l)},o.prototype.vp=function(s){var n=this.xa==0;this.rx(s.v,s.G),this.Aj(s.v,s.H),this.Aj(s.C,s.H),this.Aj(s.C,s.G),this.Cp(),this.Og=!1,n&&this.Nf(256,!1)},o.prototype.bd=function(s,n){if(!s.B()){for(var l=this.xa==0,c=new h.Ta(this.description),d=0;4>d;d++)s.If(n?4-d-1:d,c),d==0?this.nf(c):this.lineTo(c);this.Cp(),this.Og=!1,l&&!n&&this.Nf(256,!1)}},o.prototype.add=function(s,n){for(var l=0;l<s.ea();l++)this.addPath(s,l,!n)},o.prototype.addPath=function(s,n,l){this.wf(-1,s,n,l)},o.prototype.$k=function(s,n){this.Cz(s,n)},o.prototype.Fr=function(s,n,l,c,d){if(d||this.ea()!=0||(d=!0),0>n&&(n=s.ea()-1),n>=s.ea()||0>l||0>c||c>s.tv(n))throw h.i.ga("index out of bounds");if(c!=0){var f=s.ec(n)&&l+c==s.tv(n);if(!f||c!=1){if(this.Og=!1,this.Ll(s.description),l=s.Ca(n)+l+1,d&&(c++,l--),f&&c--,f=this.xa,this.fm(this.xa+c),this.oc(),d){if(c==0)return;this.nb.add(this.xa),d=s.mb.read(n),d&=-5,this.yf&&(d|=1),this.mb.write(this.mb.size-1,d),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);d=0;for(var g=this.description.Ba;d<g;d++){var w=this.description.ld(d),$=h.sa.Wa(w),T=s.description.Rf(w);0>T||s.Aa[T]==null?this.Aa[d].Nn($*f,h.sa.te(w),c*$,$*f):this.Aa[d].On($*f,s.Aa[T],$*l,c*$,!0,$,$*f)}if(this.vm()||s.Av(n))throw h.i.Ra();this.Qc(1993)}}},o.prototype.jJ=function(){for(var s=0,n=this.ea();s<n;s++)this.zW(s)},o.prototype.zW=function(s){if(this.oc(),s>=this.ea())throw h.i.O();var n=this.Ca(s),l=this.Ka(s);s=this.ec(s)?1:0;for(var c=0,d=this.description.Ba;c<d;c++)if(this.Aa[c]!=null){var f=h.sa.Wa(this.description.Fd(c));this.Aa[c].pi(f*(n+s),f*(l-s),f)}this.Qc(1993)},o.prototype.ar=function(s){this.oc();var n=this.ea();if(0>s&&(s=n-1),s>=n)throw h.i.O();for(var l=this.Ca(s),c=this.Ka(s),d=0,f=this.description.Ba;d<f;d++)if(this.Aa[d]!=null){var g=h.sa.Wa(this.description.Fd(d));this.Aa[d].Gn(g*l,g*c,g*this.xa)}for(l=s+1;l<=n;l++)d=this.nb.read(l),this.nb.write(l-1,d-c);if(this.mb==null)for(l=s+1;l<=n;l++)s=this.mb.read(l),this.mb.write(l-1,s);this.nb.resize(n),this.mb.resize(n),this.xa-=c,this.Rg-=c,this.Qc(1993)},o.prototype.wf=function(s,n,l,c){if(n==this||l>=n.ea())throw h.i.O();var d=this.ea();if(s>d)throw h.i.O();0>s&&(s=d),0>l&&(l=n.ea()-1),this.Og=!1,this.Ll(n.description),n.oc();var f=n.Ca(l),g=n.Ka(l),w=this.xa,$=n.ec(l)&&!c?1:0;this.fm(this.xa+g),this.oc();for(var T=s<d?this.Ca(s):w,E=0,O=this.description.Ba;E<O;E++){var P=this.description.Fd(E),R=n.description.Rf(P),F=h.sa.Wa(P);0<=R&&n.Aa[R]!=null?($!=0&&this.Aa[E].On(T*F,n.Aa[R],F*f,F,!0,F,F*w),this.Aa[E].On((T+$)*F,n.Aa[R],F*(f+$),F*(g-$),c,F,F*(w+$))):this.Aa[E].Nn(T*F,h.sa.te(P),F*g,F*w)}for(this.nb.add(w+g),c=d;c>=s+1;c--)f=this.nb.read(c-1),this.nb.write(c,f+g);for(n.Av(l),this.mb.add(0),c=d-1;c>=s+1;c--)d=this.mb.read(c),d&=-5,this.mb.write(c+1,d);d=n.ER().read(l),d&=-5,this.yf&&(d|=1),this.mb.write(s,d)},o.prototype.Cz=function(s,n){var l=-1,c=this.ea();if(l>c)throw h.i.O();0>l&&(l=c),this.Og=!1;var d=this.xa;this.fm(this.xa+n),this.oc();var f=l<c?this.Ca(l):d;if(s!=null)this.Aa[0].Dz(2*f,s,0,n,!0,2*d);else{var g=h.sa.te(0);this.Aa[0].Nn(2*f,g,2*n,2*d)}s=1;for(var w=this.description.Ba;s<w;s++){g=this.description.ld(s);var $=h.sa.Wa(g);g=h.sa.te(g),this.Aa[s].Nn(f*$,g,$*n,$*d)}for(this.nb.add(this.xa),d=c;d>=l+1;d--)f=this.nb.read(d-1),this.nb.write(d,f+n);for(this.mb.add(0),d=c-1;d>=l+1;d--)n=this.mb.read(d),n&=-5,this.mb.write(d+1,n);this.yf&&this.mb.write(l,1)},o.prototype.lG=function(s,n,l){var c=-1;if(0>s&&(s=this.ea()),s>this.ea()||c>this.Ka(s)||l>n.length)throw h.i.ga("index out of bounds");if(l!=0){s==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ka(s)),this.oc();var d=this.xa;this.fm(this.xa+l),this.oc();for(var f=0,g=this.description.Ba;f<g;f++){var w=this.description.Fd(f),$=h.sa.Wa(w);this.Aa[f].Wt($*(this.Ca(s)+c+l),(d-this.Ca(s)-c)*$,this.Aa[f],$*(this.Ca(s)+c),!0,$),f==0?this.Aa[f].qC($*(this.Ca(s)+c),l,n,0,!0):this.Aa[f].Yj(h.sa.te(w),(this.Ca(s)+c)*$,l*$)}for(this.vm()&&(this.Se.Wt(this.Ca(s)+c+l,d-this.Ca(s)-c,this.Se,this.Ca(s)+c,!0,1),this.Nj.Wt(this.Ca(s)+c+l,d-this.Ca(s)-c,this.Nj,this.Ca(s)+c,!0,1),this.Se.Yj(1,this.Ca(s)+c,l),this.Nj.Yj(-1,this.Ca(s)+c,l)),s+=1,n=this.ea();s<=n;s++)this.nb.write(s,this.nb.read(s)+l)}},o.prototype.xf=function(s,n,l){var c=this.ea();if(0>s&&(s=this.ea()),s>=c||n>this.Ka(s))throw h.i.ga("index out of bounds");s==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ka(s));var d=this.xa;this.fm(this.xa+1),this.oc();var f=this.Ca(s);this.Aa[0].xj(2*(f+n),l,2*d),l=1;for(var g=this.description.Ba;l<g;l++){var w=this.description.Fd(l),$=h.sa.Wa(w);this.Aa[l].Nn($*(f+n),h.sa.te(w),$,$*d)}for(s+=1;s<=c;s++)this.nb.write(s,this.nb.read(s)+1)},o.prototype.yB=function(s,n){var l=this.ea();if(0>s&&(s=l-1),s>=l||n>=this.Ka(s))throw h.i.ga("index out of bounds");this.oc();var c=this.Ca(s);0>n&&(n=this.Ka(s)-1),n=c+n,c=0;for(var d=this.description.Ba;c<d;c++)if(this.Aa[c]!=null){var f=h.sa.Wa(this.description.Fd(c));this.Aa[c].Gn(f*n,f,f*this.xa)}for(;l>=s+1;l--)n=this.nb.read(l),this.nb.write(l,n-1);this.xa--,this.Rg--,this.Qc(1993)},o.prototype.pE=function(s,n,l,c){if(s=this.Ca(s)+n,(l=this.Ca(l)+c)<s||0>s||l>this.I()-1)throw h.i.O();n=0,(c=this.Ha()).Wb(s);do{for(;c.Ia()&&(s=c.ia(),c.xb()!=l);)n+=s=s.Rb();if(c.xb()==l)break}while(c.ab());return n},o.prototype.aO=function(s,n,l){if(n=this.Ca(s)+n,l=this.Ca(s)+l,0>n||l>this.I()-1)throw h.i.O();var c=this.Ha();if(n>l){if(!this.ec(s))throw h.i.O("cannot iterate across an open path");c.EB()}var d=s=0;c.Wb(n);do d+=s,s=c.ia().Rb();while(c.xb()!=l);return d},o.prototype.ng=function(){return h.si.im(this,null)},o.prototype.FS=function(s,n,l){for(var c=s;c<l-1;c++)if(this.ec(c))throw h.i.O("cannot interpolate across closed paths");if((c=this.description.Ba)!=1){var d=this.pE(s,n,l,void 0);if(d!=0)for(var f=1;f<c;f++){var g=this.description.ld(f);if(h.sa.gz(g)!=2)for(var w=h.sa.Wa(g),$=0;$<w;$++)this.HS(g,s,n,l,d,$)}}},o.prototype.ES=function(s,n,l){var c=this.description.Ba;if(c!=1){var d=this.aO(s,n,l);if(d!=0)for(var f=1;f<c;f++){var g=this.description.ld(f);if(h.sa.gz(g)!=2)for(var w=h.sa.Wa(g),$=0;$<w;$++)this.GS(g,s,n,l,d,$)}}},o.prototype.HS=function(s,n,l,c,d,f){var g=this.Ha(),w=this.Ca(n)+l;c=this.Ca(c)+void 0,n=this.Vc(s,w,f),l=this.Vc(s,c,f);var $=n,T=0;g.Wb(w);do if(g.Ia()){if(g.ia(),g.xb()==c)break;this.setAttribute(s,g.xb(),f,$),g.ni();do{if(w=g.ia(),g.kk()==c)return;T+=w=w.Rb(),$=h.mc.jq(n,l,T/d),g.Qn()||this.setAttribute(s,g.kk(),f,$)}while(g.Ia())}while(g.ab())},o.prototype.GS=function(s,n,l,c,d,f){var g=this.Ha(),w=this.Ca(n)+l;if((n=this.Ca(n)+c)!=w){c=this.Vc(s,w,f),l=this.Vc(s,n,f);var $=0;g.Wb(w),g.EB(),w=c;do{var T=g.ia();this.setAttribute(s,g.xb(),f,w),$+=w=T.Rb(),w=h.mc.jq(c,l,$/d)}while(g.kk()!=n)}},o.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},o.prototype.Pc=function(s){s instanceof h.Ed?this.TD(s,-1):this.rN(s)},o.prototype.TD=function(s,n){if(!this.B()&&!s.isIdentity()){this.oc();var l=this.Aa[0],c=new h.h,d=new h.h;if(0>n){var f=this.vm(),g=0;n=this.xa}else f=this.Av(n),g=this.Ca(n),n=this.Wc(n);for(;g<n;g++){if(c.x=l.read(2*g),c.y=l.read(2*g+1),f){var w=this.Nj.read(g);if(0<=w)switch(7&this.Se.read(g)){case 2:d.x=this.Td.read(w),d.y=this.Td.read(w+1),s.Gh(d,d),this.Td.write(w,d.x),this.Td.write(w+1,d.y),d.x=this.Td.read(w+3),d.y=this.Td.read(w+4),s.Gh(d,d),this.Td.write(w+3,d.x),this.Td.write(w+4,d.y);break;case 4:throw h.i.Ra()}}s.Gh(c,c),l.write(2*g,c.x),l.write(2*g+1,c.y)}this.Qc(1993)}},o.prototype.rN=function(s){if(!this.B()){this.se(1),this.oc();for(var n=this.Aa[0],l=this.Aa[1],c=new h.Od,d=new h.Od,f=this.vm(),g=0;g<this.xa;g++){if(c.x=n.read(2*g),c.y=n.read(2*g+1),c.z=l.read(g),f){var w=this.Nj.read(g);if(0<=w)switch(7&this.Se.read(g)){case 2:d.x=this.Td.read(w),d.y=this.Td.read(w+1),d.z=this.Td.read(w+2),d=s.hp(d),this.Td.write(w,d.x),this.Td.write(w+1,d.y),this.Td.write(w+1,d.z),d.x=this.Td.read(w+3),d.y=this.Td.read(w+4),d.z=this.Td.read(w+5),d=s.hp(d),this.Td.write(w+3,d.x),this.Td.write(w+4,d.y),this.Td.write(w+5,d.z);break;case 4:throw h.i.Ra()}}c=s.hp(c),n.write(2*g,c.x),n.write(2*g+1,c.y),l.write(g,c.z)}this.Qc(1993)}},o.prototype.ey=function(){this.nb==null&&(this.nb=h.Zc.Qh(1,0),this.mb=h.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},o.prototype.qp=function(s){s.Og=!1,s.vq=this.vq,s.zq=this.zq,s.nb=this.nb!=null?h.ja.Dn(this.nb):null,s.mb=this.mb!=null?h.rn.Dn(this.mb):null,s.Nj=this.Nj!=null?h.ja.Dn(this.Nj):null,s.Se=this.Se!=null?h.rn.Dn(this.Se):null,s.Td=this.Td!=null?h.ce.Dn(this.Td):null,s.uq=this.uq,s.tq=this.tq,s.Cj=this.ck(1024)?null:this.Cj},o.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var s=this.Ha(),n=new h.Ex(0);s.ab();)for(;s.Ia();)n.add(s.ia().Rb());return this.uq=n.tm(),this.Nf(512,!1),n.tm()},o.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof o&&u.prototype.Nb.call(this,s)))return!1;var n=this.ea();return!(n!=s.ea()||this.nb!=null&&!this.nb.Nb(s.nb,0,n+1)||this.zq!=s.zq||this.mb!=null&&!this.mb.Nb(s.mb,0,n))&&u.prototype.Nb.call(this,s)},o.prototype.Ha=function(){return new h.TL(this)},o.prototype.dy=function(s){if(u.prototype.dy.call(this,s),this.vm())for(s=this.Ha();s.ab();)s.Ia()},o.prototype.Ap=function(s,n){if(u.prototype.Ap.call(this,s,n),this.vm())for(s=this.Ha();s.ab();)s.Ia()},o.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},o.prototype.Gv=function(s){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(s)):(4&this.mb.read(s))!=0)},o.prototype.Kr=function(s){return this.yf?(this.zu(),this.Cj.read(s)):0},o.prototype.zu=function(){if(this.ck(1024)){var s=this.ea();this.Cj==null?this.Cj=new h.ce(s):this.Cj.size!=s&&this.Cj.resize(s),s=new h.Ex(0);for(var n=new h.Ex(0),l=new h.h,c=0,d=this.Ha();d.ab();){for(n.reset(),this.D(this.Ca(d.gb),l);d.Ia();)n.add(d.ia().Sx(l.x,l.y));s.add(n.tm());var f=c++;this.Cj.write(f,n.tm())}this.tq=s.tm(),this.Nf(1024,!1)}},o.prototype.AR=function(){if(this.yf){this.hm();for(var s=this.ea(),n=0;n<s;n++)4&this.mb.read(n)}},o.prototype.hm=function(){if(this.ck(8)){this.zu();var s=this.ea();(this.mb==null||this.mb.size<s)&&(this.mb=h.Zc.Or(s+1));for(var n=1,l=0;l<s;l++){var c=this.Cj.read(l);l==0&&(n=0<c?1:-1),0<c*n?this.mb.uJ(l,4):this.mb.FE(l,4)}this.Nf(8,!1)}},o.prototype.nz=function(s){var n=this.gb,l=this.ea();if(0<=n&&n<l){if(s<this.Wc(n)){if(s>=this.Ca(n))return n;n--}else n++;if(0<=n&&n<l&&s>=this.Ca(n)&&s<this.Wc(n))return this.gb=n}if(5>l){for(n=0;n<l;n++)if(s<this.Wc(n))return this.gb=n;throw h.i.ga("corrupted geometry")}for(n=0,--l;l>n;){var c=n+(l-n>>1);if(s<this.Ca(c))l=c-1;else{if(!(s>=(n=this.Wc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.sz=function(){var s=this.I();if(!this.yf){s-=this.ea();for(var n=0,l=this.ea();n<l;n++)this.ec(n)&&s++}return s},o.prototype.tv=function(s){var n=this.Ka(s);return this.ec(s)||n--,n},o.prototype.Ja=function(){return new o(this.yf,this.description)},o.prototype.Eb=function(){return this.yf?2:1},o.prototype.K=function(){return this.yf?1736:1607},o.prototype.LJ=function(s){this.nb=s,this.Qc(16777215)},o.prototype.QR=function(){return this.vx(),this.Se},o.prototype.ER=function(){return this.vx(),this.mb},o.prototype.KJ=function(s){this.mb=s,this.Qc(16777215)},o.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Wc=function(s){return this.nb.read(s+1)},o.prototype.Ka=function(s){return this.nb.read(s+1)-this.nb.read(s)},o.prototype.Ca=function(s){return this.nb.read(s)},o.prototype.nu=function(s,n){this.Cb==null&&(this.Cb=new h.Wk),n=h.Mx.kW(n);var l=this.Cb.Hk;if(l!=null){if(!(l.Kk<s||n>l.MR()))return!0;this.Cb.tD(null)}return l=h.Mx.create(this,s,n),this.Cb.tD(l),!0},o.prototype.dc=function(){var s=u.prototype.dc.call(this);if(!this.Bc()){var n=this.ea();this.nb!=null&&this.nb.Cn(s,0,n+1),this.mb!=null&&this.mb.Cn(s,0,n)}return s},o.prototype.UF=function(s){return this.Se!=null?this.Se.read(s):1},o.prototype.cc=function(s,n,l){var c=this.nz(s);if(s==this.Wc(c)-1&&!this.ec(c))throw h.i.ga("index out of bounds");this.oc();var d=this.Se,f=1;if(d!=null&&(f=7&d.read(s)),f!==1)throw h.i.Ra();if(n.Qr(),n=n.get(),l?n.Pf(h.fe.pg()):n.Pf(this.description),c=s==this.Wc(c)-1&&this.ec(c)?this.Ca(c):s+1,d=new h.h,this.D(s,d),n.Ec(d),this.D(c,d),n.Rc(d),!l)for(l=1,d=this.description.Ba;l<d;l++){f=this.description.Fd(l);for(var g=h.sa.Wa(f),w=0;w<g;w++){var $=this.Vc(f,s,w);n.TB(f,w,$),$=this.Vc(f,c,w),n.JB(f,w,$)}}},o.prototype.Tj=function(s,n){if(s>=this.ea())throw h.i.O();if(this.B())n.Pa();else{if(this.Av(s))throw h.i.ga("not implemented");var l=this.vb(0),c=new h.h,d=new h.l;d.Pa();var f=this.Ca(s);for(s=this.Wc(s);f<s;f++)l.uc(2*f,c),d.$b(c);n.L(d)}},o.prototype.hj=function(s){return this.Cb==null&&(this.Cb=new h.Wk),!(s==0||16>this.I())&&(s=h.ua.iE(this),this.Cb.RM(s),!0)},o.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new h.Wk),this.Cb.Bo==null){this.Cb.sD(null);var s=h.ua.TN(this);this.Cb.sD(s)}},o.prototype.$o=function(s){this.zq=s},o.prototype.Kn=function(){return this.zq},o.prototype.yD=function(s){if(this==s)throw h.i.ga("MultiPathImpl.add");for(var n=this.ea(),l=0;l<s.ea();l++)this.addPath(s,l,!0),this.xU(n),n++},o.prototype.fO=function(s){var n=this.nz(s),l=this.Ca(n);if(l!=s){if(s>=(n=this.Wc(n))||s<l)throw h.i.ga("change_ring_start_point");for(var c=0,d=this.description.Ba;c<d;c++){var f=this.description.ld(c);f=h.sa.Wa(f),this.Aa[c].rotate(l*f,s*f,n*f)}}},o}(h.Fx);h.Xk=b}(U||(U={})),function(h){var k=function(b){function u(o){var s=b.call(this)||this;if(o!==void 0){if(o==null)throw h.i.O();s.description=o}else s.description=h.fe.pg();return s.xa=0,s}return xt(u,b),u.prototype.Ja=function(){return new u(this.description)},u.prototype.add=function(o){this.resize(this.xa+1),this.Fh(this.xa-1,o)},u.prototype.Du=function(o,s){this.resize(this.xa+1);var n=new h.h;n.na(o,s),this.Db(this.xa-1,n)},u.prototype.Gd=function(o,s,n){if(n=0>n?o.I():n,0>s||s>o.I()||n<s)throw h.i.O();if(s!=n){this.Ll(o.description),n-=s;var l=this.xa;this.resize(this.xa+n),this.oc();for(var c=0,d=o.description.Ba;c<d;c++){var f=o.description.Fd(c),g=h.sa.Wa(f),w=this.vb(f);f=o.vb(f),w.On(l*g,f,s*g,n*g,!0,1,l*g)}}},u.prototype.CD=function(o,s){var n=o.length;if(s=0>s?n:s,0>n||0>s)throw h.i.O();if(s!=0){n=s-0,s=this.xa,this.resize(this.xa+n);for(var l=0;l<n;l++)this.Db(s+l,o[0+l])}},u.prototype.yB=function(o){if(0>o||o>=this.I())throw h.i.ga("index out of bounds");this.oc();for(var s=0,n=this.description.Ba;s<n;s++)if(this.Aa[s]!=null){var l=h.sa.Wa(this.description.Fd(s));this.Aa[s].Gn(l*o,l,l*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},u.prototype.resize=function(o){this.fm(o)},u.prototype.qp=function(){},u.prototype.Pa=function(){b.prototype.rD.call(this)},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(this.B())return;this.oc();for(var s=this.Aa[0],n=new h.h,l=0;l<this.xa;l++)n.x=s.read(2*l),n.y=s.read(2*l+1),o.Gh(n,n),s.write(2*l,n.x),s.write(2*l+1,n.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),s=this.Aa[0],n=this.Aa[1];var c=new h.Od;for(l=0;l<this.xa;l++){c.x=s.read(2*l),c.y=s.read(2*l+1),c.z=n.read(l);var d=o.hp(c);s.write(2*l,d.x),s.write(2*l+1,d.y),n.write(l,d.z)}}this.Qc(1993)},u.prototype.Eb=function(){return 0},u.prototype.K=function(){return 550},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.Nb=function(o){return o==this||o instanceof u&&b.prototype.Nb.call(this,o)},u.prototype.gW=function(o,s){var n=this.xa;if(n=Math.min(n,s+1e3),0>s||s>=this.xa||n<s||o.length!=1e3)throw h.i.O();var l=n-s,c=[];for(this.vb(0).Xw(2*s,2*l,c,0,!0),s=0;s<l;s++)o[s]=h.h.construct(c[2*s],c[2*s+1]);return n},u.prototype.Zx=function(){},u.prototype.ey=function(){},u.prototype.nu=function(){return!1},u.prototype.hj=function(){return!1},u.prototype.ng=function(){return null},u}(h.Fx);h.ee=k}(U||(U={})),function(h){var k;(k=h.dL||(h.dL={}))[k.NotDetermined=0]="NotDetermined",k[k.Structure=1]="Structure",k[k.DegenerateSegments=2]="DegenerateSegments",k[k.Clustering=3]="Clustering",k[k.Cracking=4]="Cracking",k[k.CrossOver=5]="CrossOver",k[k.RingOrientation=6]="RingOrientation",k[k.RingOrder=7]="RingOrder",k[k.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",k[k.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",k[k.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var b=function(){function u(o,s,n){o===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=o,this.Lo=s,this.Mo=n)}return u.prototype.Yt=function(o){this.Lj=o.Lj,this.Lo=o.Lo,this.Mo=o.Mo},u}();h.Nd=b}(U||(U={})),function(h){h.P=function(){function k(){}return k.assert=function(b){if(b===!1)throw h.i.BK()},k.XJ=function(b){return isNaN(b)?NaN:b===0?b:0<b?1:-1},k.Hu=function(b){var u;u===void 0&&(u=0);for(var o=[],s=0;s<b;s++)o[s]=k.mg(2,u);return o},k.mg=function(b,u){u===void 0&&(u=0);for(var o=[],s=0;s<b;s++)o[s]=u;return o},k.bv=function(b,u){var o,s;for(o===void 0&&(o=0),s===void 0&&(s=b.length-1);o<=s;o++)b[o]=u},k.Tk=function(b,u,o){return b<u?u:b>o?o:b},k.Vh=function(b,u){var o=5381;return((o=((o=((o=u!==void 0?(u<<5)+u+(255&b):(o<<5)+o+(255&b))<<5)+o+(b>>8&255))<<5)+o+(b>>16&255))<<5)+o+(b>>24&255)&2147483647},k.wj=function(){throw Error("Not Implemented")},k.XA=function(b){return k.WT(b)+12345&2147483647},k.SG=function(b){var u=32,o=b%k.Px|0,s=b/k.Px|0;return(u&=63)==0?b:(32>u?(b=o>>>u|s<<32-u,u=s>>u):(b=s>>u-32,u=0<=s?0:-1),u*k.Px+(b>>>0))},k.WT=function(b){var u=1103515245,o=65535&u;return((u-o)*(b|=0)|0)+(o*b|0)|0},k.truncate=function(b){return 0>b?-1*Math.floor(Math.abs(b)):Math.floor(b)},k.MAX_SAFE_INTEGER=Math.pow(2,53)-1,k.MIN_SAFE_INTEGER=-k.MAX_SAFE_INTEGER,k.QC=65536,k.Px=k.QC*k.QC,k}()}(U||(U={})),function(h){var k;(k=h.xL||(h.xL={}))[k.Project=0]="Project",k[k.Union=1]="Union",k[k.Difference=2]="Difference",k[k.Proximity2D=3]="Proximity2D",k[k.Relate=4]="Relate",k[k.Equals=5]="Equals",k[k.Disjoint=6]="Disjoint",k[k.Intersects=7]="Intersects",k[k.Within=8]="Within",k[k.Contains=9]="Contains",k[k.Crosses=10]="Crosses",k[k.Touches=11]="Touches",k[k.Overlaps=12]="Overlaps",k[k.Buffer=13]="Buffer",k[k.Distance=14]="Distance",k[k.Intersection=15]="Intersection",k[k.Clip=16]="Clip",k[k.Cut=17]="Cut",k[k.DensifyByLength=18]="DensifyByLength",k[k.DensifyByAngle=19]="DensifyByAngle",k[k.LabelPoint=20]="LabelPoint",k[k.GeodesicBuffer=21]="GeodesicBuffer",k[k.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",k[k.ShapePreservingDensify=23]="ShapePreservingDensify",k[k.GeodeticLength=24]="GeodeticLength",k[k.GeodeticArea=25]="GeodeticArea",k[k.Simplify=26]="Simplify",k[k.SimplifyOGC=27]="SimplifyOGC",k[k.Offset=28]="Offset",k[k.Generalize=29]="Generalize",k[k.SymmetricDifference=30]="SymmetricDifference",k[k.ConvexHull=31]="ConvexHull",k[k.Boundary=32]="Boundary",k[k.SimpleRelation=33]="SimpleRelation";var b=function(){function u(){}return u.prototype.K=function(){return null},u.prototype.yn=function(){},u.prototype.Ku=function(){return!1},u}();h.Ge=b}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c){return o instanceof h.ba?(c=new h.$c(o),this.W(c,s,[n],!1,l).next()):l===!0?(n=new h.wC(o,s,n,!1,c),h.Ih.local().W(n,s,c)):new h.wC(o,s,n,!1,c)},u.instance=null,u}(h.Ge);h.vC=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n,l){this.za=-1,this.Sd=u,this.Vz=o,this.Es=s,this.nT=new h.l,this.nT.Pa(),this.ho=-1,this.Vb=l}return b.prototype.next=function(){for(var u;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(u,this.Es[this.ho]);return null},b.prototype.Ma=function(){return this.za},b.prototype.buffer=function(u,o){return h.CK.buffer(u,o,this.Vz,NaN,96,this.Vb)},b.prototype.re=function(){},b}();h.wC=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l).next()):new h.gL(o,s,n,l)},u.instance=null,u}(h.Ge);h.fL=k}(U||(U={})),function(h){var k=function(){function b(u,o,s){if(this.za=-1,u==null)throw h.i.O();this.aa=o,this.Ak=u,this.ra=h.ua.Xd(s,o,!1)}return b.prototype.next=function(){var u;return(u=this.Ak.next())!=null?(this.za=this.Ak.Ma(),h.Vd.clip(u,this.aa,this.ra,0)):null},b.prototype.Ma=function(){return this.za},b.prototype.re=function(){},b}();h.gL=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n){return o instanceof h.ba?h.yC.mE(o):new h.yC(s,o,n)},u.instance=null,u}(h.Ge);h.xC=k}(U||(U={})),function(h){var k=function(){function b(u,o,s){if(this.pA=new h.au,this.za=-1,o==null)throw h.i.O();this.YG=u,this.Jc=!1,this.Ak=o,this.Vb=s}return b.prototype.next=function(){if(this.YG){if(!this.Jc){var u=this.ZN(this.Ak);return this.Jc=!0,u}return null}if(!this.Jc){if((u=this.Ak.next())!=null)return this.za=this.Ak.Ma(),b.mE(u);this.Jc=!0}return null},b.prototype.Ma=function(){return this.za},b.prototype.ZN=function(u){for(var o;(o=u.next())!=null;)this.pA.Ib(o);return this.pA.YQ()},b.prototype.re=function(){if(!this.Jc){if(!this.YG)throw h.i.ga("Invalid call for non merging convex hull.");var u=this.Ak.next();if(u==null)throw h.i.ga("Expects a non-null geometry.");this.pA.Ib(u)}},b.mE=function(u){if(b.QS(u))return u;var o=u.K();if(h.Xk.zd(o))return(o=new h.Ua(u.description)).pc(u,!0),o;if(o==550&&u.I()==2){var s=new h.Ta;return o=new h.Ua(u.description),u.we(0,s),o.nf(s),u.we(1,s),o.lineTo(s),o}return h.au.MO(u)},b.QS=function(u){if(u.B())return!0;var o=u.K();return o==33||o==197||!h.Xk.zd(o)&&(o==550?u.I()==1:o==1607?u.ea()==1&&2>=u.I():u.ea()==1&&(2>=u.I()||h.au.EG(u,0)))},b}();h.yC=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c){return new h.iL(o,s,n,l,c)},u.instance=null,u}(h.Ge);h.hL=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n,l){if(this.Vf=null,o==null||s==null)throw h.i.ga("invalid argument");this.kT=u,this.iA=o,this.gH=s,u=h.ua.ov(o,s),this.ra=h.ua.Xd(n,u,!0),this.fH=-1,this.od=l}return b.prototype.Ma=function(){return 0},b.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},b.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},b.prototype.OQ=function(){var u=new h.Ua,o=new h.Ua,s=new h.Ua;this.Vf.push(u),this.Vf.push(o);var n=[];h.GK.EK(this.kT,this.iA,this.gH,this.ra,n,this.od);for(var l=0;l<n.length;l++){var c=n[l];if(c.ct==0)u.add(c.Y,!1);else if(c.ct==1||c.ct==2)o.add(c.Y,!1);else if(c.ct==3)this.Vf.push(c.Y);else{if(c.ct!=4)throw h.i.ga("internal");s.add(c.Y,!1)}}s.B()||u.B()&&o.B()&&!(3<=this.Vf.length)||this.Vf.push(s),u.B()&&o.B()&&3>this.Vf.length&&(this.Vf.length=0)},b.prototype.NQ=function(){var u=new h.ja(0),o=new h.hd,s=o.WE(),n=o.Ib(this.iA),l=o.Ib(this.gH),c=new h.Hg;try{c.Gt(o,this.ra,this.od),c.fl(s,n,l,u);var d=o.Ke(n),f=new h.Ea,g=new h.Ea;for(this.Vf.length=0,this.Vf.push(f),this.Vf.push(g),n=0;n<u.size;n++){var w=new h.hd,$=w.Ib(d),T=w.Ib(o.Ke(u.get(n)));c.fr(w,this.od);var E=c.Cv($,T),O=w.Ke(E);if(!O.B()){var P=o.FF(u.get(n),s);P==2?f.add(O,!1):P==1?g.add(O,!1):this.Vf.push(O);var R=new h.hd;$=R.Ib(d),T=R.Ib(o.Ke(u.get(n))),c.fr(R,this.od),d=R.Ke(c.km($,T))}}!d.B()&&0<u.size&&this.Vf.push(d),f.B()&&g.B()&&(this.Vf.length=0)}finally{c.Wg()}},b.prototype.re=function(){},b}();h.iL=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n){if(o instanceof h.ba)return o=new h.$c(o),this.W(o,s,n).next();if(0>=s)throw h.i.O();return new h.jL(o,s,n)},u.instance=null,u}(h.Ge);h.Zl=k}(U||(U={})),function(h){var k=function(){function b(u,o){this.za=-1,this.Sd=u,this.Rs=o}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){var u;return(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(u)):null},b.prototype.IP=function(u){if(u.B()||1>u.Eb())return u;var o=u.K();if(o==1736||o==1607)return this.Iy(u);if(h.ba.zd(o))return this.KP(u);if(o==197)return this.JP(u);throw h.i.Ra()},b.prototype.KP=function(u){if(u.Rb()<=this.Rs)return u;var o=new h.Ua(u.description);return o.pc(u,!0),this.Iy(o)},b.prototype.JP=function(u){var o=new h.Ea(u.description);o.bd(u,!1);var s=new h.l;return u.A(s),u=s.da(),s.S()<=this.Rs&&u<=this.Rs?o:this.Iy(o)},b.prototype.Iy=function(u){for(var o=u.Ja(),s=u.Ha();s.ab();)for(var n=!0;s.Ia();){var l=s.ia();if(l.K()!=322)throw h.i.ga("not implemented");var c=s.Qn(),d=l.Rb();if(d>this.Rs){var f=Math.ceil(d/this.Rs);d=new h.Ta(u.description),n&&(l.Vo(d),o.nf(d));var g=n=1/f,w=0;for(--f;w<f;w++)l.Vw(g,d),o.lineTo(d),g+=n;c?o.Cp():(l.Ro(d),o.lineTo(d))}else c?o.Cp():o.pc(l,n);n=!1}return o},b.prototype.re=function(){},b}();h.jL=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 2},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),s=new h.$c(s),this.W(o,s,n,l).next()):new h.kL(o,s,n,l)},u.km=function(o,s,n,l){if(o.B()||s.B())return o;var c=o.Eb(),d=s.Eb();if(c>d)return o;var f=o.K(),g=s.K(),w=new h.l,$=new h.l,T=new h.l;o.A(w),s.A($),T.L(w),T.$b($);var E=(T=h.ua.Xd(n,T,!0))*Math.sqrt(2)*1.00001,O=new h.l;if(O.L(w),O.X(E,E),!O.isIntersecting($))return o;if(c==1&&d==2)return u.FV(o,s,g,n,l);if(f==33)switch(h.Xk.zd(g)?(n=new h.Ua(s.description),n.pc(s,!0)):n=s,g){case 1736:return u.SU(o,n,T);case 1607:return u.TU(o,n,T);case 550:return u.QU(o,n,T);case 197:return u.PU(o,n,T);case 33:return u.RU(o,n,T);default:throw h.i.O()}else if(f==550)switch(g){case 1736:return u.iU(o,s,T);case 197:return u.gU(o,s,T);case 33:return u.hU(o,s,T)}return h.Hg.km(o,s,n,l)},u.SU=function(o,s,n){return h.jd.FG(s,o,n)==0?o:o.Ja()},u.TU=function(o,s,n){var l=o.D();s=s.Ha();for(var c=n*Math.sqrt(2)*1.00001,d=c*c,f=new h.l;s.ab();)for(;s.Ia();){var g=s.ia();if(g.A(f),f.X(c,c),f.contains(l)){if(g.ss(l,n))return o.Ja();var w=g.bc();if(h.h.zc(l,w)<=d||(w=g.xc(),h.h.zc(l,w)<=d))return o.Ja()}}return o},u.QU=function(o,s,n){var l=s.vb(0);s=s.I();var c=o.D(),d=new h.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var f=0;f<s;f++)if(l.uc(2*f,d),h.h.zc(d,c)<=n)return o.Ja();return o},u.PU=function(o,s,n){var l=new h.l;return s.A(l),l.X(n,n),s=o.D(),l.contains(s)?o.Ja():o},u.RU=function(o,s,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D();return s=s.D(),h.h.zc(l,s)<=n?o.Ja():o},u.iU=function(o,s,n){var l=new h.l;s.A(l),l.X(n,n);for(var c=o.I(),d=!1,f=[],g=0;g<c;g++)f[g]=!1;var w=new h.h;for(g=0;g<c;g++)o.D(g,w),l.contains(w)&&h.jd.Zd(s,w,n)!=0&&(d=!0,f[g]=!0);if(!d)return o;for(s=o.Ja(),g=0;g<c;g++)f[g]||s.Gd(o,g,g+1);return s},u.gU=function(o,s,n){var l=new h.l;s.A(l),l.X(n,n),s=o.I();var c=!1;n=[];for(var d=0;d<s;d++)n[d]=!1;var f=new h.h;for(d=0;d<s;d++)o.D(d,f),l.contains(f)&&(c=!0,n[d]=!0);if(!c)return o;for(l=o.Ja(),d=0;d<s;d++)n[d]||l.Gd(o,d,d+1);return l},u.hU=function(o,s,n){var l=o.vb(0),c=o.I(),d=s.D(),f=new h.h,g=!1;s=[];for(var w=0;w<c;w++)s[w]=!1;for(n=(w=n*Math.sqrt(2)*1.00001)*w,w=0;w<c;w++)l.uc(2*w,f),h.h.zc(f,d)<=n&&(g=!0,s[w]=!0);if(!g)return o;for(l=o.Ja(),w=0;w<c;w++)s[w]||l.Gd(o,w,w+1);return l},u.FV=function(o,s,n,l,c){var d=new h.Hh;o.dn(d);var f=new h.l;return s.A(f),d.$b(f),d.X(.1*d.S(),.1*d.da()),(f=new h.Ea).bd(d,!1),n==1736?f.add(s,!0):f.bd(s,!0),h.Zj.local().W(o,f,l,c)},u.instance=null,u}(h.Ge);h.mp=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n){this.vs=o==null,this.za=-1,this.Sd=u,this.Vz=s,this.rT=o.next(),this.Vb=n}return b.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.mp.km(u,this.rT,this.Vz,this.Vb)):null;var u},b.prototype.Ma=function(){return this.za},b.prototype.re=function(){},b}();h.kL=k}(U||(U={})),function(h){var k=function(){function u(o){this.od=o,this.Dj=new h.l,this.Dj.Pa(),this.qh=new h.l,this.qh.Pa()}return u.prototype.Pt=function(){var o=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=o,o=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=o,o=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=o,o=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=o},u.prototype.$P=function(o,s){if(this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");var n=!this.Dj.isIntersecting(this.qh);return h.ba.Ic(o.K())&&h.ba.Ic(s.K())?o.I()>s.I()?this.bE(o,s,n):(this.Pt(),o=this.bE(s,o,n),this.Pt(),o):o.K()==550&&h.ba.Ic(s.K())?(o=this.cE(s,o,n),this.Pt(),o):s.K()==550&&h.ba.Ic(o.K())?this.cE(o,s,n):o.K()==550&&s.K()==550?o.I()>s.I()?this.dE(o,s):(this.Pt(),o=this.dE(s,o),this.Pt(),o):0},u.prototype.bE=function(o,s,n){var l=o.Ha(),c=s.Ha(),d=new h.l,f=new h.l,g=17976931348623157e292;if(!n&&this.lY(o,s,l,c))return 0;for(;l.ab();)for(;l.Ia();)if((o=l.ia()).A(d),!(d.px(this.qh)>g)){for(;c.ab();)for(;c.Ia();)if((s=c.ia()).A(f),d.px(f)<g&&(s=o.ub(s,n),(s*=s)<g)){if(s==0)return 0;g=s}c.aj()}return Math.sqrt(g)},u.prototype.cE=function(o,s,n){var l=o.Ha(),c=new h.l,d=17976931348623157e292,f=new h.h,g=s.I();for(n=!n&&o.K()==1736;l.ab();)for(;l.Ia();){var w=l.ia();if(w.A(c),!(1<g&&c.px(this.qh)>d)){for(var $=0;$<g;$++){if(s.D($,f),n&&h.jd.Zd(o,f,0)!=0)return 0;var T=w.ge(f,!1);if(f.sub(w.ic(T)),(T=f.Uk())<d){if(T==0)return 0;d=T}}n=!1}}return Math.sqrt(d)},u.prototype.dE=function(o,s){for(var n,l=17976931348623157e292,c=new h.h,d=new h.h,f=o.I(),g=s.I(),w=0;w<f;w++)if(o.D(w,c),!(1<g&&this.qh.dK(c)>l)){for(var $=0;$<g;$++)if(s.D($,d),(n=h.h.zc(c,d))<l){if(n==0)return 0;l=n}}return Math.sqrt(l)},u.prototype.lY=function(o,s,n,l){if(o.K()==1736){for(;l.ab();)if(l.Ia()){var c=l.ia();if(h.jd.Zd(o,c.xc(),0)!=0)return!0}l.aj()}if(s.K()==1736){for(;n.ab();)if(n.Ia()&&(o=n.ia(),h.jd.Zd(s,o.xc(),0)!=0))return!0;n.aj()}return!1},u.prototype.im=function(o,s){return o.B()||s.B()?NaN:(o.A(this.Dj),s.A(this.qh),this.$P(o,s))},u}(),b=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return xt(o,u),o.prototype.W=function(s,n,l){if(s==null||n==null)throw h.i.O();if(s.B()||n.B())return NaN;var c=s.K(),d=n.K();if(c==33){if(d==33)return h.h.ub(s.D(),n.D());if(d==197)return l=new h.l,n.A(l),l.ub(s.D());(c=new h.ee).add(s),s=c}else if(c==197){if(d==197)return d=new h.l,s.A(d),l=new h.l,n.A(l),l.ub(d);(c=new h.Ea).bd(s,!1),s=c}return d==33?((d=new h.ee).add(n),n=d):d==197&&((d=new h.Ea).bd(n,!1),n=d),new k(l).im(s,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 14},o.instance=null,o}(h.Ge);h.lL=b}(U||(U={})),function(h){var k=function(){function b(u,o,s,n){this.uH=u,this.yH=o,this.od=n,this.VG=s}return b.prototype.next=function(){var u=this.uH.next();return u==null?null:this.uC(u)},b.prototype.Ma=function(){return this.uH.Ma()},b.prototype.uC=function(u){var o=u.K();if(h.ba.Tn(o))return u;if(o==197)return(o=new h.Ea(u.description)).bd(u,!1),this.uC(o);if(u.B())return u;if(u==null)throw h.i.Ra();o=u.Ja();for(var s=new h.zb,n=0,l=u.ea();n<l;n++)this.OK(u,n,o,s);return o},b.prototype.OK=function(u,o,s,n){if(!(2>u.Ka(o))){var l=u.Ca(o),c=u.Wc(o)-1,d=u.vb(0),f=u.ec(o),g=new h.ja(0);g.Jb(u.Ka(o)+1);var w=new h.ja(0);for(w.Jb(u.Ka(o)+1),g.add(f?l:c),g.add(l),l=new h.h;1<g.size;){var $=g.Gc();g.Jf();var T=g.Gc();u.D($,l),n.Ec(l),u.D(T,l),n.Rc(l),0<=(T=this.NK(n,l,d,$,T,c))?(g.add(T),g.add($)):w.add($)}if(f||w.add(g.get(0)),w.size==g.size)s.addPath(u,o,!0);else if(2<=w.size&&(!this.VG||w.size!=2||!(f||h.h.ub(u.Oa(w.get(0)),u.Oa(w.get(1)))<=this.yH))){for(o=new h.Ta,n=0,c=w.size;n<c;n++)u.we(w.get(n),o),n==0?s.nf(o):s.lineTo(o);f&&(this.VG||w.size!=2||s.lineTo(o),s.Cp())}}},b.prototype.NK=function(u,o,s,n,l,c){var d=l-1;for(l<=n&&(d=c),c=l=-1,n+=1;n<=d;n++){s.uc(2*n,o);var f=o.x,g=o.y;u.ic(u.ge(o,!1),o),o.x-=f,o.y-=g,(f=o.length())>this.yH&&f>c&&(l=n,c=f)}return l},b.prototype.re=function(){},b}();h.mL=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 29},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l).next()):new h.mL(o,s,n,l)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.zC=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c,d,f,g){return o instanceof h.ba?(g=new h.$c(o),this.W(g,s,n,[l],c,d,!1,f).next()):f===!0?(n=new h.BC(o,s,n,l,c,!1,!1,g),h.Ih.local().W(n,s,g)):new h.BC(o,s,n,l,c,!1,!1,g)},u.instance=null,u}(h.Ge);h.AC=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n,l,c,d,f){if(c)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Os=u,this.wg=o,this.Ae=s,this.Es=n,this.bo=l,this.ho=-1,this.Vb=f,this.oT=new h.l,this.oT.Pa()}return b.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(u,this.Es[this.ho]);return null},b.prototype.Ma=function(){return this.za},b.prototype.VQ=function(u,o){return h.QK.buffer(u,this.wg,this.Ae,o,this.bo,this.Vb)},b.prototype.re=function(){},b}();h.BC=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n){if(s==null)throw h.i.O();if(o.B()||1>o.Eb())return 0;if(n==4)throw h.i.Fe();var l=h.cb.tc(s),c=h.cb.xv(l),d=h.cb.gv(l);c*=2-c;var f=l.Id().ci,g=o.K();if(g==1736||g==197)var w=o.ng();else h.ba.zd(g)?(w=new h.Ua(o.description)).pc(o,!0):w=o;if(l.Nb(s)==0){if(h.cb.Xc(s)){w=h.Jh.nj(w,s),g==1607&&w==o&&(w=h.ba.kg(o)),o=new h.Oc,h.cb.ih(s).en(o),g=0;for(var $=w.I();g<$;g++){var T=w.Oa(g);T.x=h.Jh.an(T.x,o),w.Db(g,T)}}o=w.Ja(),w=h.Jh.RI(s,l,w,o)?o:h.cb.Bh(w,s,l)}return this.cQ(w,n,d,c,f)},u.prototype.cQ=function(o,s,n,l,c){var d=new h.ha(0),f=0;for(o=o.Ha();o.ab();)for(;o.Ia();){var g=o.ia(),w=g.bc();g=g.xc(),w.scale(c),g.scale(c),h.kb.xd(n,l,w.x,w.y,g.x,g.y,d,null,null,s),f+=d.u}return f},u.instance=null,u}(h.Ge);h.qL=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l,c).next()):new h.oL(o,n,l,s,-1,-1,c)},u.instance=null,u}(h.Ge);h.nL=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n,l,c){if(0<c||s!=4&&0<l)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Os=u,this.wg=o,this.Ae=s,this.yT=n,this.xT=l}return b.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(u);return null},b.prototype.Ma=function(){return this.za},b.prototype.Uy=function(u){return h.ej.Sr(u,this.wg,this.Ae,this.yT,this.xT,this.Vb)},b.prototype.re=function(){},b}();h.oL=k}(U||(U={})),function(h){(function(k){k[k.Unknown=0]="Unknown",k[k.Contains=1]="Contains",k[k.Within=2]="Within",k[k.Equals=3]="Equals",k[k.Disjoint=4]="Disjoint",k[k.Touches=8]="Touches",k[k.Crosses=16]="Crosses",k[k.Overlaps=32]="Overlaps",k[k.NoThisRelation=64]="NoThisRelation",k[k.Intersects=1073741824]="Intersects",k[k.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.YK||(h.YK={})),h.rL=function(){function k(){}return k.iW=function(b,u){var o=b.K(),s=u.K();if(h.ba.zj(o)){var n=b.Cb;if(n!=null&&(n=n.Hk)!=null){if(s==33){var l=u.D();n=n.Uo(l.x,l.y)}else l=new h.l,u.A(l),n=n.To(l);if(n==1)return 1;if(n==0)return 4}}if(h.ba.zj(s)&&(n=u.Cb)!=null&&(n=n.Hk)!=null){if(o==33?(b=b.D(),n=n.Uo(b.x,b.y)):(u=new h.l,b.A(u),n=n.To(u)),n==1)return 2;if(n==0)return 4}return 0},k}()}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 15},u.prototype.W=function(o,s,n,l,c){return o instanceof h.ba?(o=new h.$c(o),s=new h.$c(s),this.W(o,s,n,l,c===void 0?-1:c).next()):c===void 0?new h.CC(o,s,n,l,-1):new h.CC(o,s,n,l,c)},u.prototype.yn=function(o,s,n){this.Ku(o)&&(s=h.ua.mj(s,o,!1),o.hj(n)||o.nu(s,n))},u.prototype.Ku=function(o){return h.Mx.uE(o)},u.instance=null,u}(h.Ge);h.Zj=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n,l){if(this.vs=o==null,this.za=-1,this.Sd=u,this.wg=s,this.Pe=o.next(),this.Fj=this.Pe.K(),this.Vb=n,this.Hi=l,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw h.i.O("bad dimension mask")}return b.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var u=this.Bw.next();if(u!=null)return u;this.Bw=null}for(;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?u=this.Fa(u):(this.Bw=this.KS(u),u=this.Bw.next()),u;return null},b.prototype.Ma=function(){return this.za},b.prototype.Fa=function(u){var o=this.uK(u);if(o!=null)return o;o=h.ua.ov(this.Pe,u);var s=h.ua.Xd(this.wg,o,!0);o=new h.l,this.Pe.A(o);var n=new h.l;return u.A(n),o.X(2*s,2*s),o.Fa(n),o.X(100*s,100*s),s=h.Vd.clip(this.Pe,o,0,0),u=h.Vd.clip(u,o,0,0),h.Hg.Cv(u,s,this.wg,this.Vb)},b.prototype.KI=function(u,o,s){var n=0;if(1&o)s[0]==null&&(s[0]=new h.ee(u)),n++;else for(var l=0;l<s.length-1;l++)s[l]=s[l+1];if(2&o)s[n]==null&&(s[n]=new h.Ua(u)),n++;else for(l=n;l<s.length-1;l++)s[l]=s[l+1];if(4&o)s[n]==null&&(s[n]=new h.Ea(u)),n++;else for(l=n;l<s.length-1;l++)s[l]=s[l+1];if(n!=3){for(u=[],l=0;l<n;l++)u[l]=s[l];return new h.$c(u)}return new h.$c(s)},b.prototype.KS=function(u){var o=this.uK(u);if(o!=null){var s=[null,null,null];return s[o.Eb()]=o,this.KI(u.description,this.Hi,s)}o=h.ua.ov(this.Pe,u),s=h.ua.Xd(this.wg,o,!0),o=new h.l,this.Pe.A(o),o.X(2*s,2*s);var n=new h.l;return u.A(n),o.Fa(n),o.X(100*s,100*s),s=h.Vd.clip(this.Pe,o,0,0),o=h.Vd.clip(u,o,0,0),s=h.Hg.Kz(o,s,this.wg,this.Vb),this.KI(u.description,this.Hi,s)},b.prototype.uK=function(u){var o=h.ua.ov(u,this.Pe),s=h.ua.Xd(this.wg,o,!0);o=u.K();var n=u.B(),l=this.Pe.B();if(!(l=n||l)){l=new h.l,u.A(l);var c=new h.l;this.Pe.A(c),c.X(2*s,2*s),l=!l.isIntersecting(c)}if(!l)if((c=h.rL.iW(this.Pe,u))==4)l=!0;else{if(2&c)return this.Pe;if(1&c)return u}if(l)return(s=h.ba.uf(o))<(l=h.ba.uf(this.Fj))?b.CB(u,n):s>l||s==0&&o==550&&this.Fj==33?this.iJ():b.CB(u,n);if((this.Hi==-1||this.Hi==4)&&o==197&&this.Fj==197)return s=this.Pe,o=new h.l,u.A(o),n=new h.l,s.A(n),o.Fa(n),s=new h.Hh,u.copyTo(s),s.Zo(o),s;if(o==197&&h.ba.uf(this.Fj)==0||this.Fj==197&&h.ba.uf(o)==0)return n=o==197?u:this.Pe,u=o==197?this.Pe:u,o=new h.l,n.A(o),h.Vd.clip(u,o,s,0);if(h.ba.uf(o)==0&&0<h.ba.uf(this.Fj)||0<h.ba.uf(o)&&h.ba.uf(this.Fj)==0){if(s=h.ua.mj(this.wg,u,!1),o==550||o==33)return h.Hg.uG(u,this.Pe,s);if(this.Fj==550||this.Fj==33)return h.Hg.uG(this.Pe,u,s);throw h.i.Ra()}return this.Hi!=-1&&this.Hi!=2||o!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||o!=1736||this.Fj!=1607?null:this.rK(this.Pe,u):this.rK(u,this.Pe)},b.prototype.rK=function(u,o){var s=u,n=o,l=h.ua.mj(this.wg,o,!1),c=new h.l;n.A(c);var d=new h.l;s.A(d),d.X(2*l,2*l),c.Fa(d),c.X(10*l,10*l),s=u=h.Vd.clip(u,c,0,0),d=new h.ja(0);var f=-1,g=n.Cb;if(g!=null){var w=g.Hk;if(w!=null){f=0,d.Jb(s.I()+s.ea());for(var $=new h.l,T=s.Ha();T.ab();)for(;T.Ia();){T.ia().A($);var E=w.To($);E==1?d.add(1):E==0?d.add(0):(d.add(-1),f++)}}}if(5<o.I()&&(g=(n=o=h.Vd.clip(o,c,0,0)).Cb),0>f&&(f=s.sz()),c=s.I()+n.I(),f*n.I()>Math.log(c)*c*4)return null;c=null,f=n.Ha(),g!=null&&g.Gb!=null&&(c=g.Gb),c==null&&20<n.I()&&(c=h.ua.iE(n)),u=u.Ja(),n=null,g=s.Ha(),w=[0,0,0,0,0,0,0,0,0],$=new h.ce(0),T=new h.jg,E=-1;for(var O=0,P=0,R=0<d.size,F=-1;g.ab();){F=g.gb;var V=0;for(E=-1,O=0;g.Ia();){var L=R?h.P.truncate(d.get(P)):-1;P++;var G=g.ia();if(0>L){if(c!=null)for(n==null?n=c.qR(G,l):n.Wo(G,l),L=n.next();L!=-1;L=n.next()){f.Wb(c.ka(L)),L=f.ia();var J=G.Fa(L,null,w,null,l);for(L=0;L<J;L++)$.add(w[L])}else for(f.aj();f.ab();)for(;f.Ia();)for(L=f.ia(),J=G.Fa(L,null,w,null,l),L=0;L<J;L++)$.add(w[L]);if(0<$.size){$.Wd(0,$.size,function(pe,he){return pe-he});var H=0;$.add(1),J=-1,L=0;for(var te=$.size;L<te;L++){var Q=$.get(L);if(Q!=H){var ae=!1;if(H!=0||Q!=1?(G.dh(H,Q,T),H=T.get()):(H=G,ae=!0),2<=V){if(u.Fr(s,F,E,O,V==3),this.LD(o,H.bc(),l)!=1&&this.MD(o,H,l)!=1)return null;u.pc(H,!1),V=1,O=0}else switch(J=this.MD(o,H,l),J){case 1:ae?2>V?(E=g.xb()-s.Ca(F),O=1,V=V==0?3:2):O++:(u.pc(H,V==0),V=1);break;case 0:V=0,E=-1,O=0;break;default:return null}H=Q}}}else{if(0>(L=this.LD(o,G.bc(),l)))return null;L==1?(2>V&&(E=g.xb()-s.Ca(F),V=V==0?3:2),O++):(E=-1,O=0)}$.clear(!1)}else L!=0&&L==1&&(V==0?(V=3,E=g.xb()-s.Ca(F)):V==1?(V=2,E=g.xb()-s.Ca(F)):O++)}2<=V&&(u.Fr(s,F,E,O,V==3),E=-1)}return u},b.prototype.LD=function(u,o,s){return h.Fg.ym(u,o,s)},b.prototype.MD=function(u,o,s){var n=o.bc();o=o.xc();var l=h.Fg.ym(u,n,s),c=h.Fg.ym(u,o,s);return l==1&&c==0||l==0&&c==1?-1:l==0||c==0?0:l==1||c==1?1:((l=new h.h).add(n,o),l.scale(.5),(u=h.Fg.ym(u,l,s))==0?0:u==1?1:-1)},b.CB=function(u,o){return o?u:u.Ja()},b.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},b.prototype.re=function(){},b}();h.CC=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l,c,d,f){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l,c,d,f).next()):new h.sL(o,s,n,l,c,d,f)},u.instance=null,u}(h.Ge);h.DC=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n,l,c,d){this.za=-1,this.Sd=u,this.Oj=o,this.La=s,this.Mi=n,this.xA=l,this.pH=c,this.od=d}return b.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),this.eL(u)):null},b.prototype.Ma=function(){return this.za},b.prototype.eL=function(u){var o=0>=this.pH?h.ua.mj(this.Oj,u,!1):this.pH;return h.DK.W(u,this.La,this.Mi,this.xA,o,this.od)},b.prototype.re=function(){},b}();h.sL=k}(U||(U={})),function(h){var k;(k=h.IK||(h.IK={}))[k.clipToDomainOnly=1]="clipToDomainOnly",k[k.clipWithHorizon=2]="clipWithHorizon",k[k.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var b=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return xt(o,u),o.prototype.K=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.W=function(s,n,l){return s instanceof h.ba?(s=new h.$c(s),this.W(s,n,l).next()):new h.tL(s,n,l)},o.prototype.transform=function(s,n,l,c){return h.du.transform(s,n,l,c,!0)},o.prototype.St=function(s,n,l,c){return h.du.St(s,n,l,c)},o.instance=null,o}(h.Ge);h.Gx=b}(U||(U={})),function(h){var k=function(){function b(u,o,s){this.za=-1,this.Sd=u,this.HT=o,this.od=s}return b.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),h.du.Bh(u,this.HT,this.od)):null},b.prototype.Ma=function(){return this.za},b.prototype.re=function(){},b}();h.tL=k}(U||(U={})),function(h){var k=function(){function u(){}return u.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},u.prototype.vQ=function(o,s,n){for(o.Wb(s,n);o.Ia();){var l=o.ia();if((l=l.Rb())!=0)return o.xb()}for(o.Wb(s,n);o.zz();)if((l=(l=o.ni()).Rb())!=0)return o.xb();return-1},u.prototype.wQ=function(o,s){for(o.Wb(s,-1);o.zz();)if(o.ni().Rb()!=0)return o.xb();return-1},u.prototype.uQ=function(o,s){for(o.Wb(s,-1),o.ia();o.Ia();)if(o.ia().Rb()!=0)return o.xb();return-1},u.prototype.tQ=function(o,s,n,l){if(this.zk=this.vQ(s,n,l),this.zk!=-1){s.Wb(this.zk,-1);var c=s.ia(),d=c.ic(c.ge(o,!1));if(n=h.h.zc(d,o),(l=new h.h).N(d),l.sub(c.bc()),(d=new h.h).N(o),d.sub(c.bc()),this.mq=0>l.yi(d),this.rh=this.uQ(s,this.zk),this.rh!=-1){s.Wb(this.rh,-1);var f=(c=s.ia()).ge(o,!1);f=c.ic(f);var g=h.h.zc(f,o);g>n?this.rh=-1:(l.N(f),l.sub(c.bc()),d.N(o),d.sub(c.bc()),this.ws=0>l.yi(d))}this.rh==-1&&(this.rh=this.wQ(s,this.zk),this.rh!=-1&&(s.Wb(this.rh,-1),f=(c=s.ia()).ge(o,!1),f=c.ic(f),(g=h.h.zc(f,o))>n?this.rh=-1:(l.N(f),l.sub(c.bc()),d.N(o),d.sub(c.bc()),this.ws=0>l.yi(d),o=this.zk,this.zk=this.rh,this.rh=o,o=this.mq,this.mq=this.ws,this.ws=o)))}},u.prototype.YN=function(o,s,n,l,c){return n=n.Ha(),this.tQ(o,n,l,c),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(n.Wb(this.zk,-1),o=n.ia().lg(),n.Wb(this.rh,-1),s=n.ia().lg(),0<=o.yi(s)):s},u}(),b=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return xt(o,u),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 3},o.prototype.iz=function(s,n,l){var c;if(c===void 0&&(c=!1),s.B())return new h.bm;n=n.D();var d=s,f=s.K();switch(f==197&&((d=new h.Ea).bd(s,!1),f=1736),f){case 33:return this.sI(d,n);case 550:return this.eI(d,n);case 1607:case 1736:return this.XT(d,n,l,c);default:throw h.i.ga("not implemented")}},o.prototype.jz=function(s,n){if(s.B())return new h.bm;n=n.D();var l=s,c=s.K();switch(c==197&&((l=new h.Ea).bd(s,!1),c=1736),c){case 33:return this.sI(l,n);case 550:case 1607:case 1736:return this.eI(l,n);default:throw h.i.ga("not implemented")}},o.prototype.kz=function(s,n,l,c){if(0>c)throw h.i.O();if(s.B())return[];n=n.D();var d=s,f=s.K();switch(f==197&&((d=new h.Ea).bd(s,!1),f=1736),f){case 33:return this.OU(d,n,l,c);case 550:case 1607:case 1736:return this.oU(d,n,l,c);default:throw h.i.ga("not implemented")}},o.prototype.XT=function(s,n,l,c){if(s.K()==1736&&l&&(l=new h.l,s.A(l),l=h.ua.Xd(null,l,!1),(c?h.jd.Zd(s,n,0):h.jd.Zd(s,n,l))!=0)){var d=new h.bm(n,0,0);return c&&d.RJ(!0),d}var f=s.Ha();d=new h.h;for(var g=l=-1,w=17976931348623157e292,$=0;f.ab();)for(;f.Ia();){var T=f.ia();T=T.ic(T.ge(n,!1));var E=h.h.zc(T,n);E<w?($=1,d=T,l=f.xb(),g=f.gb,w=E):E==w&&$++}return d=new h.bm(d,l,Math.sqrt(w)),c&&(f.Wb(l,g),T=f.ia(),c=0>h.h.Wq(n,T.bc(),T.xc()),1<$&&(($=new k).reset(),c=$.YN(n,c,s,l,g)),d.RJ(c)),d},o.prototype.sI=function(s,n){return s=s.D(),n=h.h.ub(s,n),new h.bm(s,0,n)},o.prototype.eI=function(s,n){for(var l=s.vb(0),c=s.I(),d=s=0,f=0,g=17976931348623157e292,w=0;w<c;w++){var $=new h.h;l.uc(2*w,$);var T=h.h.zc($,n);T<g&&(d=$.x,f=$.y,s=w,g=T)}return(n=new h.bm).by(d,f,s,Math.sqrt(g)),n},o.prototype.OU=function(s,n,l,c){return c==0?[]:(l*=l,s=s.D(),(n=h.h.zc(s,n))<=l?(l=[],(c=new h.bm).by(s.x,s.y,0,Math.sqrt(n)),l[0]=c):l=[],l)},o.prototype.oU=function(s,n,l,c){if(c==0)return[];var d=s.vb(0),f=s.I();s=[],l*=l;for(var g=0;g<f;g++){var w=d.read(2*g),$=d.read(2*g+1),T=n.x-w,E=n.y-$;(T=T*T+E*E)<=l&&((E=new h.bm).by(w,$,g,Math.sqrt(T)),s.push(E))}return n=s.length,s.sort(function(O,P){return O.La<P.La?-1:O.La==P.La?0:1}),c>=n||(s.length=c),s.slice(0)},o.instance=null,o}(h.Ge);h.Hx=b}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 4},u.prototype.W=function(o,s,n,l,c){return h.cm.tB(o,s,n,l,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(o){return h.Xt.ry(o)},u.prototype.yn=function(o,s,n){h.Xt.xD(o,s,n)},u.instance=null,u}(h.Ge);h.uL=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 33},u.prototype.W=function(o,s,n,l,c){return o===1073741824?!h.vd.uB(s,n,l,4,c):h.vd.uB(s,n,l,o,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(o){return h.Xt.ry(o)},u.prototype.yn=function(o,s,n){h.Xt.xD(o,s,n)},u.instance=null,u}(h.Ge);h.fj=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n){if(this.od=n,this.lT=s,this.za=-1,u==null)throw h.i.O();this.Ak=u,this.Oj=o}return b.prototype.next=function(){var u;if((u=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");return this.$B(u)}return null},b.prototype.Ma=function(){return this.za},b.prototype.$B=function(u){if(u==null)throw h.i.O();return h.Ix.YJ(u,this.Oj,this.lT,this.od)},b.prototype.re=function(){},b}();h.vL=k}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 26},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,s,n,l).next()):new h.vL(o,s,n,l)},u.prototype.ts=function(o,s,n,l,c){return 0<(l!==void 0?h.Ix.ts(o,s,n,l,c):h.Ix.ts(o,s,!1,null,n))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.$l=k}(U||(U={})),function(h){var k=function(){function c(){this.Aq=0}return c.prototype.iX=function(d){this.Aq&=-2,this.Aq|=d?1:0},c.prototype.Yp=function(){return(1&this.Aq)!=0},c.prototype.SF=function(){return this.Yp()?0:1},c}();h.tY=k;var b=function(){},u=function(c,d,f,g){this.x=c,this.y=d,this.Ci=f,this.zm=g},o=function(){function c(d){this.Ce=d}return c.prototype.compare=function(d,f,g){return d=d.ka(g),f=this.Ce.lf.read(2*f),0>(f-=d=this.Ce.lf.read(2*d))?-1:0<f?1:0},c}(),s=function(){function c(d){this.Ce=d}return c.prototype.compare=function(d,f,g){f=this.Ce.hb[f],d=this.Ce.hb[d.ka(g)];var w=f.Yp(),$=d.Yp();g=f.oe.Me(this.Ce.Oo,0);var T=d.oe.Me(this.Ce.Oo,0);return g==T&&((w=.5*((g=Math.min(w?f.oe.oa:f.oe.ma,$?d.oe.oa:d.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(w=g),g=f.oe.Me(w,0),T=d.oe.Me(w,0)),g<T?-1:g>T?1:0},c}(),n=function(){function c(d,f){this.TI=new h.h,this.parent=d,this.ZR=f}return c.prototype.qr=function(d,f,g){var w=this.parent,$=this.ZR;g.Wd(d,f,function(T,E){return w.Oh(T,E,$)})},c.prototype.bq=function(d){return d=this.parent.ii.get(d),this.parent.lf.uc(2*(d>>1),this.TI),this.TI.y+(1&d?this.parent.Qj:-this.parent.Qj)},c}(),l=function(){function c(d,f,g,w,$){this.iH=d.description,this.Y=d,this.Sg=f,this.Qj=h.ua.mj(this.Sg,d,!1),this.Do=h.ua.mj(this.Sg,d,!0),this.sA=g,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new h.lp,this.fb=new h.$j,this.le=new h.Nd,this.UG=this.sl=$}return c.prototype.$S=function(){return this.UG=!0,(!h.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?h.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},c.prototype.fC=function(d,f){var g=this.lf.read(2*d);d=this.lf.read(2*d+1);var w=this.lf.read(2*f);f=this.lf.read(2*f+1);var $=!h.$t.Ev(g,d,w,f,this.Qj*this.Qj);return $||this.Y.Eb()!=0&&g==w&&d==f},c.prototype.BE=function(){for(var d=this.Y,f=d.yf?3:2,g=0,w=d.ea();g<w;g++)if(d.Ka(g)<f)return this.le=new h.Nd(1,g,0),!1;return!0},c.prototype.yE=function(d){var f=this.Y,g=f.Ha(),w=f.hasAttribute(1);for(f=w?h.ua.rE(this.Sg,f,!1):0;g.ab();)for(;g.Ia();){var $=g.ia();if(!($.Rb()>this.Qj)){if(d&&w){var T=$.yv(1,0);if($=$.yv(1,0),Math.abs($-T)>f)continue}return this.le=new h.Nd(2,g.xb(),-1),!1}}return!0},c.prototype.hO=function(){var d=this.Y,f=null;h.ba.Ic(this.Y.K())&&(f=this.Y);var g=(this.UG||this.sl)&&f!=null,w=d.I();this.lf=d.vb(0),this.ii=new h.ja(0),this.ii.Jb(2*w),this.hi=new h.ja(0),this.hi.Jb(2*w),g&&(this.Hl==null&&(this.Hl=new h.ja(0)),this.Hl.Jb(w));for(var $=d=0;$<w;$++)if(this.ii.add(2*$),this.ii.add(2*$+1),this.hi.add(2*$),this.hi.add(2*$+1),g){for(;$>=f.Wc(d);)d++;this.Hl.add(d)}for(new h.Zt().sort(this.hi,0,2*w,new n(this,g)),this.fb.clear(),this.fb.Xo(new o(this)),this.fb.Ee(w),f=0,w*=2;f<w;f++)if(g=this.hi.get(f),g=(d=this.ii.get(g))>>1,(1&d)==0){if(d=this.fb.addElement(g,-1),($=this.fb.xe(d))!=-1&&!this.fC(this.fb.ka($),g))return this.le=new h.Nd(3,g,this.fb.ka($)),!1;var T=this.fb.lb(d);if(T!=-1&&!this.fC(this.fb.ka(T),g))return this.le=new h.Nd(3,g,this.fb.ka(T)),!1}else if(d=this.fb.search(g,-1),$=this.fb.xe(d),T=this.fb.lb(d),this.fb.wd(d,-1),$!=-1&&T!=-1&&!this.fC(this.fb.ka($),this.fb.ka(T)))return this.le=new h.Nd(3,this.fb.ka($),this.fb.ka(T)),!1;return!0},c.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},c.prototype.jO=function(){var d=new h.hd;d.Ib(this.Y);var f=new h.Nd;return!h.bu.fI(!1,d,this.Qj,f,this.od)||(f.Lo=d.Va(f.Lo),f.Mo=d.Va(f.Mo),this.le.Yt(f),!1)},c.prototype.iO=function(){var d=this.Y,f=d.Ha();for(d=d.Ha();f.ab();)for(;f.Ia();){var g=f.ia();if(!f.Sn()||!f.VS()){d.wW(f);do for(;d.Ia();){var w=d.ia();if((w=g.Br(w,this.Qj,!0))!=0)return this.le=new h.Nd(w==2?5:4,f.xb(),d.xb()),!1}while(d.ab())}}return!0},c.prototype.nO=function(){var d=this.Y;this.hb.length=0,this.ro.length=0,this.ag=d.Ha(),this.ag.EB();var f=new h.ja(0);f.Jb(10);var g=NaN,w=0,$=0;for(d=2*d.I();$<d;$++){var T=this.hi.get($);if(!(1&(T=this.ii.get(T)))){T>>=1;var E=this.lf.read(2*T),O=this.lf.read(2*T+1);if(f.size!=0&&(E!=g||O!=w)){if(!this.LI(f))return!1;f!=null&&f.clear(!1)}f.add(T),g=E,w=O}}return!!this.LI(f)},c.prototype.mO=function(){for(var d=this.Y,f=Array(d.ea()),g=0,w=d.ea();g<w;g++)f[g]=d.Pn(g);w=new b;var $=new h.h;g=this.hi.get(0);var T=(g=this.ii.get(g))>>1;this.lf.uc(2*T,$);var E=f[g=this.Hl.get(T)],O=d.Ca(g),P=d.Wc(g)-1;w.gl=T==O||T==P,w.jy=this.sl?!E&&w.gl:w.gl,w.Ci=g,w.x=$.x,w.y=$.y,w.zm=T;for(var R=new b,F=1,V=this.hi.size;F<V;F++)if(g=this.hi.get(F),(1&(g=this.ii.get(g)))==0){T=g>>1,this.lf.uc(2*T,$),(g=this.Hl.get(T))!=w.Ci&&(E=f[g],O=d.Ca(g),P=d.Wc(g)-1);var L=T==O||T==P,G=this.sl?!E&&w.gl:w.gl;if(R.x=$.x,R.y=$.y,R.Ci=g,R.zm=T,R.jy=G,R.gl=L,R.x==w.x&&R.y==w.y){if(this.sl){if(!(R.jy&&w.jy||R.Ci==w.Ci&&(R.gl||w.gl)))return this.le=new h.Nd(8,R.zm,w.zm),!1}else if(!R.gl||!w.gl)return this.le=new h.Nd(5,R.zm,w.zm),!1}g=w,w=R,R=g}return!0},c.prototype.EE=function(){for(var d=this.Y,f=[],g=-1,w=!1,$=0,T=d.ea();$<T;$++)d.Gv($)&&(w=!1,g++,$<T-1&&(d.Gv($+1)||(w=!0))),f[$]=w?g:-1;w=new h.h,$=this.hi.get(0);var E=($=this.ii.get($))>>1;this.lf.uc(2*E,w),$=this.Hl.get(E),g=new u(w.x,w.y,$,E,f[$]),d=[];var O=1;for(T=this.hi.size;O<T;O++)if($=this.hi.get(O),(1&($=this.ii.get($)))==0){if(E=$>>1,this.lf.uc(2*E,w),$=this.Hl.get(E),($=new u(w.x,w.y,$,E,f[$])).x==g.x&&$.y==g.y){if($.Ci==g.Ci)return this.le=new h.Nd(9,$.zm,g.zm),!1;0<=f[$.Ci]&&f[$.Ci]==f[g.Ci]&&(d.length!=0&&d[d.length-1]==g||d.push(g),d.push($))}g=$}if(d.length==0)return!0;for($=new h.lp(!0),h.P.bv(f,-1),w=-1,(O=new h.h).Sc(),g=0,T=d.length;g<T;g++){(E=d[g]).x==O.x&&E.y==O.y||(w=$.Rh(0),O.x=E.x,O.y=E.y);var P=f[E.Ci];P==-1&&(P=$.Rh(2),f[E.Ci]=P),$.addElement(P,w),$.addElement(w,P)}for((T=new h.ja(0)).Jb(10),g=$.ke;g!=-1;g=$.lz(g))if(!(1&(d=$.KF(g)))&&2&d){for(d=-1,T.add(g),T.add(-1);0<T.size;){if(w=T.Gc(),T.Jf(),O=T.Gc(),T.Jf(),(1&(E=$.KF(O)))!=0){d=2&E?O:w;break}for($.aX(O,1|E),E=$.sc(O);E!=-1;E=$.lb(E))(P=$.getData(E))!=w&&(T.add(P),T.add(O))}if(d!=-1){for($=-1,g=0,T=f.length;g<T;g++)if(f[g]==d){$=g;break}return this.le=new h.Nd(10,$,-1),!1}}return!0},c.prototype.oO=function(){var d=this.Y;if(0>=d.He())return this.le=new h.Nd(6,d.ea()==1?1:-1,-1),0;if(d.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=h.ja.rf(d.ea(),0),this.EA=h.ja.rf(d.ea(),-1);for(var f=-1,g=0,w=0,$=d.ea();w<$;w++){var T=d.Kr(w);if(this.vo.write(w,0>T?0:256),0<T)f=w,g=T;else{if(T==0)return this.le=new h.Nd(6,w,-1),0;if((0>f||g<Math.abs(T))&&(this.le=new h.Nd(7,w,-1),this.sl))return 0;this.EA.write(w,f)}}for(this.et=d.ea(),this.Qm=new h.ja(0),this.Qm.Jb(10),$=d.I(),this.Oo=NaN,(d=new h.ja(0)).Jb(10),this.Sq=h.ja.rf($,-1),this.Jw=h.ja.rf($,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new h.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new s(this)),f=0,$*=2;0<this.et&&f<$;f++)if(g=this.hi.get(f),(1&(g=this.ii.get(g)))==0){if(g>>=1,(w=this.lf.read(2*g+1))!=this.Oo&&d.size!=0){if(!this.vt(d))return 0;d!=null&&d.clear(!1)}d.add(g),this.Oo=w}return 0<this.et&&!this.vt(d)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},c.prototype.LI=function(d){if(d.size==1)return!0;for(var f=0,g=d.size;f<g;f++){var w=d.get(f);this.ag.Wb(w);var $=this.ag.ni();this.hb.push(this.Uu($,w,this.ag.gb,!0)),this.ag.ia(),$=this.ag.ia(),this.hb.push(this.Uu($,w,this.ag.gb,!1))}var T=this;for(this.hb.sort(function(P,R){return T.SP(P,R)}),(w=this.oh.ke)==-1&&(w=this.oh.Rh(0)),this.oh.hn(this.hb.length),f=0,g=this.hb.length;f<g;f++)this.oh.addElement(w,f);f=!0;for(var E=g=-1;f&&(f=!1,($=this.oh.sc(w))!=-1);)for(var O=this.oh.lb($);O!=-1;)if(g=this.oh.getData($),E=this.oh.getData(O),(g=this.hb[g].Ko)!=(E=this.hb[E].Ko))$=O,O=this.oh.lb($);else if(f=!0,this.oh.kd(w,$),$=this.oh.xe(O),(O=this.oh.kd(w,O))==-1||$==-1)break;if(f=this.oh.ds(w),this.oh.GE(w),0<f)return this.le=new h.Nd(5,g,E),!1;for(f=0,g=d.size;f<g;f++)this.qB(this.hb[f]);return this.hb.length=0,!0},c.prototype.vt=function(d){for(var f=0,g=d.size;f<g;f++){var w=d.get(f),$=this.Sq.read(w);if($!=-1){var T=this.fb.ka($);this.Bj.add(T),this.fb.wd($,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Sq.write(w,-1)}($=this.Jw.read(w))!=-1&&(T=this.fb.ka($),this.Bj.add(T),this.fb.wd($,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Jw.write(w,-1))}for(f=0,g=d.size;f<g;f++){if(w=d.get(f),this.ag.Wb(w),($=this.ag.ni()).oa>$.ma){var E=this.ag.xb(),O=this.Uu($,w,this.ag.gb,!0);0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),$=this.fb.addElement(T,-1),this.Sq.read(E)==-1?this.Sq.write(E,$):this.Jw.write(E,$),!(3&this.vo.read(this.ag.gb))&&this.Qm.add($)}this.ag.ia(),($=this.ag.ia()).oa<$.ma&&(E=this.ag.kk(),O=this.Uu($,w,this.ag.gb,!1),0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),$=this.fb.addElement(T,-1),this.Sq.read(E)==-1?this.Sq.write(E,$):this.Jw.write(E,$),!(3&this.vo.read(this.ag.gb))&&this.Qm.add($))}for(f=0,g=this.Qm.size;f<g&&0<this.et;f++)if($=this.Qm.get(f),(3&this.vo.read(this.hb[this.fb.ka($)].DA))==0){d=-1,w=this.fb.xe($);var P=$;O=null,T=-1;for(var R=0;w!=-1&&(T=this.fb.ka(w),T=(O=this.hb[T]).DA,(3&(R=this.vo.read(T)))==0);)P=w,w=this.fb.xe(w);w==-1?(E=1,w=P):(d=(3&R)==1?T:this.EA.read(T),E=O.SF()!=0?0:1,w=this.fb.lb(w));do{if(T=this.fb.ka(w),T=(O=this.hb[T]).DA,(3&(P=this.vo.read(T)))==0){if(E!=O.SF())return this.le=new h.Nd(6,T,-1),!1;if(P=252&P|(R=E==0||O.Yp()?2:1),this.vo.write(T,R),R==2&&this.le.Lj==0&&this.EA.read(T)!=d&&(this.le=new h.Nd(7,T,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&P)==1&&(d=T),P=w,w=this.fb.lb(w),E=E!=0?0:1}while(P!=$)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new h.ja(0),!0},c.prototype.Uu=function(d,f,g,w){if(d.K()!=322)throw h.i.Ra();return(d=this.nP(d)).Ko=f,d.DA=g,d.Aq=0,d.iX(w),d},c.prototype.nP=function(d){if(0<this.ro.length){var f=this.ro[this.ro.length-1];--this.ro.length,d.copyTo(f.oe)}else(f=new k).oe=h.NC.kg(d);return f},c.prototype.qB=function(d){d.oe.K()==322&&this.ro.push(d)},c.prototype.fU=function(){for(var d=this.Y.I(),f=new h.ja(0),g=0;g<d;g++)f.add(g);var w=this;for(f.Wd(0,d,function($,T){return w.Qu($,T)}),g=1;g<d;g++)if(this.Qu(f.get(g-1),f.get(g))==0)return this.le=new h.Nd(3,f.get(g-1),f.get(g)),0;return 2},c.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},c.prototype.jV=function(){return this.$S()},c.prototype.kU=function(){for(var d=this.Y.I(),f=new h.ja(0),g=0;g<d;g++)f.add(g);var w=this;f.Wd(0,d,function(P,R){return w.KO(P,R)});var $=Array(d);for(h.P.bv($,!1),$[f.get(0)]=!0,g=1;g<d;g++){var T=f.get(g-1),E=f.get(g);this.Qu(T,E)==0?$[E]=!1:$[E]=!0}f=this.Y.Ja(),T=this.Y,E=0;var O=1;for(g=0;g<d;g++)$[g]?O=g+1:(E<O&&f.Gd(T,E,O),E=g+1);return E<O&&f.Gd(T,E,O),f.Eh(2,this.Do),f},c.prototype.IV=function(){var d=this.Y,f=d.Ha(),g=d.Ha(),w=this.Y.Ja(),$=this.Y,T=d.hasAttribute(1),E=T?h.ua.rE(this.Sg,d,!0):0,O=new h.ja(0),P=new h.ja(0);for(O.Jb(h.P.truncate(d.I()/2+1)),P.Jb(h.P.truncate(d.I()/2+1));f.ab();)if(g.ab(),!(2>d.Ka(f.gb))){g.yW();for(var R,F,V=!0;f.Ia();){var L=f.ia(),G=g.ni();if(f.xb()>g.xb())break;V&&(O.add(f.xb()),P.add(g.kk()),V=!1),F=O.Gc();var J=f.kk();if(1<J-F){var H=new h.h;H.vc(d.Oa(F),d.Oa(J)),R=H.length()}else R=L.Rb();F=P.Gc(),1<(J=g.xb())-F?((H=new h.h).vc(d.Oa(F),d.Oa(J)),F=H.length()):F=G.Rb(),R>this.Do?O.add(f.kk()):T&&(R=d.Vc(1,O.Gc(),0),L=L.jv(1,0),Math.abs(L-R)>E&&O.add(f.kk())),F>this.Do?P.add(g.xb()):T&&(R=d.Vc(1,P.Gc(),0),L=G.jv(1,0),Math.abs(L-R)>E&&P.add(g.xb()))}if(O.Gc()<P.Gc()?O.size>P.size?O.Jf():P.Jf():(O.Gc()!=P.Gc()&&P.Jf(),P.Jf()),2<=P.size+O.size){for(V=new h.Ta,G=0,L=O.size;G<L;G++)$.we(O.get(G),V),G==0?w.nf(V):w.lineTo(V);for(G=P.size-1;0<G;G--)$.we(P.get(G),V),w.lineTo(V);$.ec(f.gb)?w.Cp():0<P.size&&($.we(P.get(0),V),w.lineTo(V))}O!=null&&O.clear(!1),P!=null&&P.clear(!1)}return w.Eh(2,this.Do),w},c.prototype.mV=function(){return this.zX()},c.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?h.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new h.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&h.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&h.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},c.ts=function(d,f,g,w,$){if(w!=null&&(w.Lj=0,w.Lo=-1,w.Mo=-1),d.B())return 1;var T=d.K();if(T==33)return 1;var E=h.ua.mj(f,d,!1);if(T==197)return f=new h.l,d.A(f),f.Di(E)?(w!=null&&(w.Lj=2,w.Lo=-1,w.Mo=-1),0):1;if(h.ba.zd(T))return(E=new h.Ua(d.description)).pc(d,!0),c.ts(E,f,g,w,$);var O=d.qm(E);if((g=g?-1:O)!=-1)return g;if(f=new c(d,f,g,$,!1),T==550)g=f.fU();else if(T==1607)g=f.EV();else{if(T!=1736)throw h.i.Ra();g=f.jV()}return d.Eh(g,E),w!=null&&g==0&&w.Yt(f.le),g},c.YJ=function(d,f,g,w){if(d.B())return d;var $=d.K();if($==33)return d;var T=h.ua.mj(f,d,!1);if($==197)return f=new h.l,d.A(f),f.Di(T)?d.Ja():d;if(h.ba.zd($))return($=new h.Ua(d.description)).pc(d,!0),c.YJ($,f,g,w);if(T=d.qm(T),(g=g?-1:T)==2)return d;if(d=new c(d,f,g,w,!1),$==550)d=d.kU();else if($==1607)d=d.IV();else{if($!=1736)throw h.i.Ra();d=d.mV()}return d},c.prototype.Oh=function(d,f,g){if(d==f)return 0;d=this.ii.get(d);var w=this.ii.get(f);f=d>>1;var $=w>>1,T=new h.h,E=new h.h;return this.lf.uc(2*f,T),T.y+=1&d?this.Qj:-this.Qj,this.lf.uc(2*$,E),E.y+=1&w?this.Qj:-this.Qj,(d=T.compare(E))==0&&g?0>(g=this.Hl.get(f)-this.Hl.get($))?-1:0<g?1:0:d},c.prototype.Qu=function(d,f){if(d==f)return 0;var g=this.Y,w=g.Oa(d),$=g.Oa(f);if(w.x<$.x)return-1;if(w.x>$.x)return 1;if(w.y<$.y)return-1;if(w.y>$.y)return 1;for(w=1;w<this.jT;w++){$=this.iH.ld(w);for(var T=h.sa.Wa($),E=0;E<T;E++){var O=g.Vc($,d,E),P=g.Vc($,f,E);if(O<P)return-1;if(O>P)return 1}}return 0},c.prototype.KO=function(d,f){var g=this.Qu(d,f);return g==0?d<f?-1:1:g},c.prototype.SP=function(d,f){if(d===f)return 0;var g=d.oe.lg();d.Yp()&&g.Uq(),d=f.oe.lg(),f.Yp()&&d.Uq(),f=g.su();var w=d.su();return w==f?(f=g.yi(d),Math.abs(f)<=8881784197001252e-31*(Math.abs(d.x*g.y)+Math.abs(d.y*g.x))&&(f--,f++),0>f?1:0<f?-1:0):f<w?-1:1},c}();h.Ix=l}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,s,n,l){return o instanceof h.ba?(o=new h.$c(o),s=new h.$c(s),this.W(o,s,n,l).next()):new h.wL(o,s,n,l)},u.gp=function(o,s,n,l){var c=o.Eb(),d=s.Eb();if(o.B()&&s.B())return c>d?o:s;if(o.B())return s;if(s.B())return o;var f=new h.l,g=new h.l,w=new h.l;return o.A(f),s.A(g),w.L(f),w.$b(g),f=h.ua.Xd(n,w,!0),g=o.K(),w=s.K(),g==33&&w==33?u.WU(o,s,f):g!=w?0<c||0<d?c>d?o:s:g==550?u.dI(o,s,f):u.dI(s,o,f):h.Hg.gp(o,s,n,l)},u.WU=function(o,s,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D(),c=s.D(),d=new h.ee(o.description);return h.h.zc(l,c)>n&&(d.add(o),d.add(s)),d},u.dI=function(o,s,n){var l=o.vb(0),c=o.I(),d=s.D(),f=o.Ja();n=n*Math.sqrt(2)*1.00001;var g=new h.l;if(o.A(g),g.X(n,n),g.contains(d)){n*=n,g=!1;for(var w=[],$=0;$<c;$++)w[$]=!1;for($=0;$<c;$++){var T=l.read(2*$),E=l.read(2*$+1);(T-=d.x)*T+(E-=d.y)*E<=n&&(g=!0,w[$]=!0)}if(g)for($=0;$<c;$++)w[$]||f.Gd(o,$,$+1);else f.Gd(o,0,c),f.add(s)}else f.Gd(o,0,c),f.add(s);return f},u.instance=null,u}(h.Ge);h.Jx=k}(U||(U={})),function(h){var k=function(){function b(u,o,s,n){this.vs=o==null,this.za=-1,this.Sd=u,this.wg=s,this.IT=o.next(),this.Vb=n}return b.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.Jx.gp(u,this.IT,this.wg,this.Vb)):null;var u},b.prototype.Ma=function(){return this.za},b.prototype.re=function(){},b}();h.wL=k}(U||(U={})),function(h){var k=function(){function o(){}return o.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},o}(),b=function(){function o(){this.Ir=0,this.rj=[]}return o.prototype.kN=function(s){this.Ir+=s.zx,this.rj.push(s)},o.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},o.prototype.iy=function(){return this.rj[this.rj.length-1]},o.prototype.Nb=function(s){return s===this},o}(),u=function(){function o(s,n,l){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=s,this.wg=n,this.Vb=l}return o.ZD=function(s){var n=[],l=0;for(s=Object.keys(s);l<s.length;l++)n.push(Number(s[l]));return n.sort(function(c,d){return c-d}),n},o.prototype.aG=function(s){var n=this.Fo[s],l=o.ZD(n)[0],c=n[l],d=c.iy().Vy;return c=c.iy().vK,delete n[l],c&&(d=h.$l.local().W(d,this.wg,!1,this.Vb),s==0&&d.K()==33&&(s=new h.ee(d.description),d.B()||s.add(d),d=s)),d},o.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw h.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},o.prototype.Ma=function(){return this.za},o.prototype.lK=function(){if(this.Jc)return!0;var s=null;if(this.Sd!=null&&(s=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),h.op.Bp(this.Vb),s!=null){var n=s.Eb();this.vH[n]=!0,n>=this.Bk&&!this.eA&&(this.HD(n,!1,s),n>this.Bk&&!this.eA&&this.uW(n))}if(0<this.kq)for(n=0;n<=this.Bk;n++)for(;1<this.wq[n]&&(s=this.AO(n)).length!=0;)s=h.Hg.QP(s,this.wg,this.Vb),this.HD(n,!0,s);return this.Jc},o.prototype.AO=function(s){for(var n=[],l=[],c=this.Fo[s],d=o.ZD(c),f=0;f<d.length;f++){var g=d[f],w=c[g];if(this.Jc||1e4<w.Ir&&1<w.rj.length){for(this.wq[s]-=w.rj.length,this.kq-=w.rj.length;0<w.rj.length;)n.push(w.iy().Vy),w.OV();l.push(g)}}for(f=0;f<l.length;f++)delete c[l[f]];return n},o.prototype.uW=function(s){for(var n=0;n<s;n++)this.Fo[n]=[],this.kq-=this.wq[n],this.wq[n]=0},o.prototype.HD=function(s,n,l){var c=new k;if(c.Az(),c.Vy=l,l=o.$R(l),c.zx=l,l=o.YR(l),s+1>this.Fo.length)for(var d=0,f=Math.max(2,s+1);d<f;d++)this.Fo.push([]);(d=this.Fo[s][l])===void 0&&(d=new b,this.Fo[s][l]=d),c.vK=n,d.kN(c),this.wq[s]++,this.kq++,this.Bk=Math.max(this.Bk,s)},o.YR=function(s){return 0<s?h.P.truncate(Math.log(s)/Math.log(4)+.5):0},o.$R=function(s){var n=s.K();if(h.ba.zj(n))return s.I();if(n==33)return 1;if(n==197)return 4;if(h.ba.zd(n))return 2;throw h.i.Ra()},o.prototype.re=function(){this.lK()},o}();h.yL=u}(U||(U={})),function(h){var k=function(b){function u(){return b!==null&&b.apply(this,arguments)||this}return xt(u,b),u.prototype.K=function(){return 1},u.prototype.W=function(o,s,n,l){return l===void 0?new h.yL(o,s,n):this.bQ(o,s,n,l)},u.prototype.bQ=function(o,s,n,l){return o=new h.$c([o,s]),this.W(o,n,l).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.Ih=k}(U||(U={})),function(h){var k,b;(b=k||(k={}))[b.nextPath=0]="nextPath",b[b.nextSegment=1]="nextSegment",b[b.iterate=2]="iterate",k=function(){function u(o,s,n,l){this.Vs=new h.l,this.BT=o,this.CT=s,this.oq=l,this.wo=-1,this.tl=!1;var c=o.Cb;c!=null&&(c=l?c.Bo:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,l?this.wo=s.ea():this.td=s.Ha()),this.tl||(c=s.Cb)!=null&&(c=l?c.Bo:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,l?this.wo=o.ea():this.td=o.Ha()),this.tl||(this.ei=l?h.ua.hR(o,s,n,1<=o.qm(0),1<=s.qm(0)):h.ua.gR(o,s,n))}return u.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var o=!0;o;)switch(this.Yb){case 0:o=this.sU();break;case 1:o=this.tU();break;case 2:o=this.Pz();break;default:throw h.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},u.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},u.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},u.prototype.oz=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},u.prototype.Wy=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},u.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},u.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var o=this.td.ia();return this.zw.Wo(o,this.ra),this.Yb=2,!0},u.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},u}(),h.am=k}(U||(U={})),function(h){(h=h.JL||(h.JL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(U||(U={})),function(h){h.LC=function(){function k(){}return k.ub=function(b,u,o,s,n,l,c,d,f){var g=[0,0,0],w=[0,0,0],$=[0,0,0],T=[0,0,0,0],E=new h.ha(0),O=new h.ha(0),P=new h.ha(0);if(c!=null||d!=null||f!=null)if(h.s.vi(u))h.$g.ub(b,o,s,n,l,c,d,f);else{n=h.F.ca(n),o=h.F.ca(o);var R=h.F.ca(n-o);if(h.s.$(s,l)&&(h.s.$(o,n)||h.s.$(h.s.R(s),1.570796326794897)))c!=null&&(c.u=0),d!=null&&(d.u=0),f!=null&&(f.u=0);else{if(h.s.$(s,-l)){if(h.s.$(h.s.R(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(b,u)),d!=null&&(d.u=0<s?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<s?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(R),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(b,u)),d!=null&&(d.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(s),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897)||h.s.$(o,n)||h.s.$(h.s.R(R),3.141592653589793)||h.s.Dd(s))return void h.Yk.ub(b,u,o,s,n,l,c,d,f);var F=Math.sqrt(1-u);n=h.F.ca(n-o),o=0,h.F.el(1,u,s,o,0,E,O,P),g[0]=E.u,g[1]=O.u,g[2]=P.u,h.F.el(1,u,l,n,0,E,O,P),w[0]=E.u,w[1]=O.u,w[2]=P.u,$[0]=0,$[1]=0,$[2]=-1*u*h.F.n(1,u,s)*Math.sin(s),0>n?h.F.Yq($,w,g,T,0):h.F.Yq($,g,w,T,0),O=[0,0,0],P=[0,0,0];var V=[0,0,0];g=[0,0,0],E=[0,0,0];var L=Math.acos(T[2]/1),G=1-u,J=Math.tan(L),H=1+J*J/G,te=2*$[2]*J/G;for(G=(-te+(J=Math.sqrt(te*te-4*H*($[2]*$[2]/G-1))))/(H*=2),te=(-te-J)/H,J=Math.tan(L),L=(G+te)/2,$=((H=J*G+$[2])+(J*te+$[2]))/2,J=h.F.ip(G-L,H-$),G=$/F*1.570796326794897,te=0;100>te&&(H=(H=h.F.w(u,G))*H/Math.cos(G)*(Math.sin(G)-$*H/(1-u)),!h.s.Dd(H));te++)G-=H;$=h.F.n(1,u,G)*Math.cos(G),J=1-J/($=Math.sqrt(($-L)*($+L))),J*=2-J,H=h.F.qn(O),L=h.F.qn(P),G=h.F.qn(V);var Q=h.F.Ut(V,O);te=h.F.Ut(V,P),h.F.yx(V,O,g),h.F.yx(V,P,E),O=Math.acos(Q/(G*H)),P=Math.acos(te/(G*L)),P*=h.s.Mb(1,h.F.Ut(g,E)),(1.570796326794897<=h.s.R(O)&&1.570796326794897<=h.s.R(P)||3.141592653589793<h.s.R(O-P))&&(O=(3.141592653589793-h.s.R(O))*h.s.Mb(1,O),P=(3.141592653589793-h.s.R(P))*h.s.Mb(1,P)),g=h.F.Sj(J,P),E=h.F.q($,J,h.F.Sj(J,O)),g=h.F.q($,J,g),g=h.s.R(g-E)*b,O=new h.ha(0),P=new h.ha(0),V=T[1]/1,V*=-h.s.Mb(1,R),E=Math.acos(V)*h.s.Mb(1,R),k.sf(b,u,o,s,g,E,O,P),h.s.$(n,O.u)&&h.s.$(l,P.u)||(J=h.F.ip(h.F.ca(n-O.u),l-P.u),k.sf(b,u,o,s,g,h.F.ca(E+3.141592653589793),O,P),(H=h.F.ip(h.F.ca(n-O.u),l-P.u))<J&&(E=h.F.ca(E+3.141592653589793))),O=[0,0,0,0],P=[0,0,0,0],J=[0,0,0],b=[0,0,0],o=[0,0,0],s=[0,0,0],V=[0,0,0],($=[0,0,0])[0]=0,$[1]=0,$[2]=F,J[0]=0,J[1]=0,J[2]=0,h.F.Yq(J,$,w,O,0),h.s.Dd(l)?(b[0]=w[0],b[1]=w[1],b[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(u=h.F.n(1,u,l)*Math.cos(l),b[0]=0,b[1]=0,w[2]+=Math.tan(1.570796326794897-h.s.R(l))*u*h.s.Mb(1,l),o[0]=u*Math.cos(n)-u*Math.sin(n),o[1]=u*Math.sin(n)+u*Math.cos(n)),o[2]=w[2],h.F.Yq(w,o,b,P,1),h.F.yx(P,O,s),h.F.yx(P,T,V),V=h.F.Ut(s,V)/(h.F.qn(s)*h.F.qn(V)),V*=h.s.Mb(1,R),n=Math.acos(V)*-h.s.Mb(1,R),(0<E&&0<n||0>E&&0>n)&&(n=h.F.ca(n+3.141592653589793)),c!=null&&(c.u=g),d!=null&&(d.u=E),f!=null&&(f.u=n)}}},k.sf=function(b,u,o,s,n,l,c,d){var f=[0,0,0],g=[0,0,0],w=[0,0,0],$=[0,0,0],T=[0,0,0],E=[0,0,0],O=[0,0,0],P=[0,0,0,0],R=new h.ha(0),F=new h.ha(0),V=new h.ha(0),L=new h.ha(0),G=new h.ha(0),J=new h.ha(0);if(c!=null&&d!=null)if(h.s.vi(u))h.$g.sf(b,o,s,n,l,c,d);else if(h.s.Dd(n))c!=null&&(c.u=o),d!=null&&(d.u=s);else if(l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),o=h.F.ca(o),s=h.F.ca(s),1.570796326794897<h.s.R(s)&&(o=h.F.ca(o+3.141592653589793),s=h.s.Mb(3.141592653589793,s)-s),h.s.$(h.s.R(s),1.570796326794897)||h.s.Dd(s)||h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))h.Yk.sf(b,u,o,s,n,l,c,d);else{var H=Math.sqrt(1-u);for(b=n/b,h.F.el(1,u,s,0,0,L,G,J),f[0]=L.u,f[1]=G.u,f[2]=G.u,O[0]=0,O[1]=0,O[2]=-1*u*h.F.n(1,u,s)*Math.sin(s),L=h.F.n(1,u,s),G=h.F.ca(1.570796326794897-l),J=Math.sin(G),n=Math.cos(s),s=Math.sin(s),T[0]=L*n-s*J,T[1]=Math.cos(G),T[2]=(1-u)*L*s+n*J,0>l?h.F.Yq(O,T,f,P,0):h.F.Yq(O,f,T,P,0),f=Math.acos(P[2]/1),P=Math.atan2(-P[1],-P[0]),s=1-u,G=1+(T=Math.tan(f))*T/s,s=(-(L=2*O[2]*T/s)+(T=Math.sqrt(L*L-4*G*(O[2]*O[2]/s-1))))/(G*=2),L=(-L-T)/G,T=Math.tan(f),f=(s+L)/2,O=((G=T*s+O[2])+(T*L+O[2]))/2,T=h.F.ip(s-f,G-O),H=O/H*1.570796326794897,s=0;100>s&&(L=(L=h.F.w(u,H))*L/Math.cos(H)*(Math.sin(H)-O*L/(1-u)),!h.s.Dd(L));s++)H-=L;H=h.F.n(1,u,H)*Math.cos(H),O=1-T/(H=Math.sqrt((H-f)*(H+f))),O*=2-O,E=Math.acos(h.F.Ut(E,g)/(h.F.qn(E)*h.F.qn(g))),E*=h.s.Mb(1,g[0]),l=(h.F.q(H,O,h.F.Sj(O,E))+b*h.s.Mb(1,l))/h.F.Ch(H,O),l=h.F.ca(1.570796326794897*l),l=h.F.Tq(O,l),h.F.n(H,O,l),T=h.F.ca(P+o),o=Math.cos(T),l=Math.sin(T),w[0]=$[0]*o+$[1]*-l,w[1]=$[0]*l+$[1]*o,w[2]=$[2],h.F.eO(u,w[0],w[1],w[2],V,F,R),c!=null&&(c.u=F.u),d!=null&&(d.u=V.u)}},k}()}(U||(U={})),function(h){var k=function(){function n(l){this.Za=null,this.xt=new h.h,this.yt=new h.h,this.g=l}return n.prototype.compare=function(l,c,d){return this.g.Hc(c,this.xt),this.g.Hc(l.ka(d),this.yt),this.xt.compare(this.yt)},n}(),b=function(){function n(l){this.Cf=new h.h,this.Fk=new h.h,this.g=l}return n.prototype.Fh=function(l){this.Cf.N(l)},n.prototype.compare=function(l,c){return this.g.Hc(l.ka(c),this.Fk),this.Cf.compare(this.Fk)},n}(),u=function(n){function l(c){var d=n.call(this,c.g,c.ra,!1)||this;return d.ib=c,d}return xt(l,n),l.prototype.compare=function(c,d,f){if(this.sg)return-1;var g=this.ib.Rd.Ln(this.ib.Th(d));c=c.ka(f);var w=this.ib.Rd.Ln(this.ib.Th(c));return this.Fm=f,this.ME(d,g,c,w)},l}(h.PC),o=function(n){function l(c){var d=n.call(this,c.g,c.ra)||this;return d.ib=c,d}return xt(l,n),l.prototype.compare=function(c,d){return this.sg?-1:(c=this.ib.Rd.Ln(this.ib.Th(c.ka(d))),this.Fm=d,this.NE(d,c))},l}(h.WL),s=function(){function n(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new h.h,this.Ri=new h.h,this.hb=new h.ad(8),this.Ad=new h.ad(5),this.nh=new h.cu,this.Rd=new h.cu,this.Pg=!1,this.xh=new h.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new h.$j,this.Nc=new h.$j,this.ph=new h.ja(0),this.Ik=new h.OC,this.Gf=new h.ja(0),this.Ck=new h.ja(0),this.lo=new h.Ta}return n.prototype.LX=function(l,c){var d=new h.Ed;return d.VB(),l.Pc(d),this.gr(l),this.Yn=!1,this.ra=c,this.PA=c*c,c=this.eC(),l.Pc(d),c||(this.lQ(),c||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},n.prototype.PX=function(l,c){this.gr(l),this.Yn=!1,this.ra=c,this.PA=c*c,this.Pg=!1,this.eC(),this.Pg||(this.Pg=l.Ip(c,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},n.prototype.qg=function(l,c){return this.hb.U(l,0+c)},n.prototype.GB=function(l,c,d){this.hb.T(l,0+c,d)},n.prototype.Th=function(l){return this.hb.U(l,2)},n.prototype.UW=function(l,c){this.hb.T(l,2,c)},n.prototype.MF=function(l,c){return this.hb.U(l,3+c)},n.prototype.Rp=function(l){return this.hb.U(l,7)},n.prototype.Rl=function(l,c){this.hb.T(l,7,c)},n.prototype.Tp=function(l,c){return this.hb.U(l,3+this.Qp(l,c))},n.prototype.hr=function(l,c,d){this.hb.T(l,3+this.Qp(l,c),d)},n.prototype.IR=function(l,c){return this.hb.U(l,5+this.Qp(l,c))},n.prototype.jr=function(l,c,d){this.hb.T(l,5+this.Qp(l,c),d)},n.prototype.Ur=function(l){return this.Ad.U(l,0)},n.prototype.PW=function(l,c){this.Ad.T(l,0,c)},n.prototype.$y=function(l){return this.Ad.U(l,4)},n.prototype.er=function(l,c){this.Ad.T(l,4,c)},n.prototype.kl=function(l){return this.Ad.U(l,1)},n.prototype.nn=function(l,c){this.Ad.T(l,1,c)},n.prototype.Zy=function(l){return this.Ad.U(l,3)},n.prototype.Ft=function(l,c){this.Ad.T(l,3,c)},n.prototype.$m=function(l){var c=this.Ad.De(),d=this.nh.Rh();return this.PW(c,d),l!=-1?(this.nh.addElement(d,l),this.g.Sa(l,this.zh,c),this.er(c,this.g.Va(l))):this.er(c,-1),c},n.prototype.CP=function(l){this.Ad.kd(l)},n.prototype.FD=function(l,c){this.nh.addElement(this.Ur(l),c),this.g.Sa(c,this.zh,l)},n.prototype.ot=function(l){var c=this.hb.De(),d=this.Rd.Rh();return this.UW(c,d),l!=-1&&this.Rd.addElement(d,l),c},n.prototype.GD=function(l,c){this.Rd.addElement(this.Th(l),c)},n.prototype.Wu=function(l){this.hb.kd(l),0<=(l=this.ph.gF(l))&&this.ph.NV(l)},n.prototype.jj=function(l,c){if(this.qg(l,0)==-1)this.GB(l,0,c);else{if(this.qg(l,1)!=-1)throw h.i.Ra();this.GB(l,1,c)}this.gy(l,c)},n.prototype.gy=function(l,c){var d=this.kl(c);if(d!=-1){var f=this.Tp(d,c);this.jr(f,c,l),this.hr(l,c,f),this.hr(d,c,l),this.jr(l,c,d)}else this.jr(l,c,l),this.hr(l,c,l),this.nn(c,l)},n.prototype.Qp=function(l,c){return this.qg(l,0)==c?0:1},n.prototype.Zm=function(l,c){var d,f=this.Zy(c);if(f!=-1&&(this.df.wd(f,-1),this.Ft(c,-1)),(f=this.kl(c))!=-1){var g=d=f;do{var w=!1,$=this.Qp(d,c),T=this.MF(d,$);if(this.qg(d,$+1&1)==l){if(this.Zu(d),this.Rd.eh(this.Th(d)),this.Wu(d),d==T){f=-1;break}f==d&&(f=this.kl(c),g=T,w=!0)}d=T}while(d!=g||w);if(f!=-1){do $=this.Qp(d,c),T=this.MF(d,$),this.GB(d,$,l),d=T;while(d!=g);(d=this.kl(l))!=-1?(g=this.Tp(d,l),w=this.Tp(f,l),g==d?(this.nn(l,f),this.gy(d,l),this.nn(l,d)):w==f&&this.gy(f,l),this.hr(f,l,g),this.jr(g,l,f),this.hr(d,l,w),this.jr(w,l,d)):this.nn(l,f)}}for(f=this.Ur(l),d=this.Ur(c),g=this.nh.sc(d);g!=-1;g=this.nh.lb(g))this.g.Sa(this.nh.ka(g),this.zh,l);this.nh.Cy(f,d),this.CP(c)},n.prototype.PT=function(l,c){var d=this.qg(l,0),f=this.qg(l,1),g=this.qg(c,0),w=this.qg(c,1);this.Rd.Cy(this.Th(l),this.Th(c)),c==this.kl(d)&&this.nn(d,l),c==this.kl(f)&&this.nn(f,l),this.Zu(c),this.Wu(c),d==g&&f==w||f==g&&d==w||(this.Jn(d,this.Ao),this.Jn(g,this.Ri),this.Ao.rb(this.Ri)?(d!=g&&this.Zm(d,g),f!=w&&this.Zm(f,w)):(f!=g&&this.Zm(f,g),d!=w&&this.Zm(d,w)))},n.prototype.Zu=function(l){var c=this.qg(l,1);this.ZE(l,this.qg(l,0)),this.ZE(l,c)},n.prototype.ZE=function(l,c){var d=this.Tp(l,c),f=this.IR(l,c),g=this.kl(c);d!=l?(this.hr(f,c,d),this.jr(d,c,f),g==l&&this.nn(c,d)):this.nn(c,-1)},n.prototype.RD=function(l,c,d){var f=this.Rd.sc(l),g=this.Rd.ka(f);l=this.Ie(g);var w=this.Ie(this.g.V(g));for(this.g.lr(g,c,d,!0),f=this.Rd.lb(f);f!=-1;f=this.Rd.lb(f)){g=this.Rd.ka(f);var $=this.Ie(g)==l;this.g.lr(g,c,d,$)}f=c.Xp(d,0).bc(),c=c.Xp(d,c.ql(d)-1).xc(),this.wK(l,f),this.wK(w,c)},n.prototype.UE=function(l,c,d){var f=this.Th(l),g=this.qg(l,0),w=this.qg(l,1),$=this.ot(-1);for(this.ph.add($),this.Rl($,-3),this.Gf.add($),this.jj($,g),l=1,c=c.ql(d);l<c;l++)d=this.$m(-1),this.Ck.add(d),this.Gf.add(d),this.jj($,d),$=this.ot(-1),this.ph.add($),this.Rl($,-3),this.Gf.add($),this.jj($,d);for(this.jj($,w),f=this.Rd.sc(f);f!=-1;f=this.Rd.lb(f))if(w=this.Rd.ka(f),this.Ie(w)==g){l=0;do 0<l&&($=this.Gf.get(l-1),this.FD($,w),this.$y($)==-1&&this.er($,this.g.Va(w))),$=this.Gf.get(l),l+=2,this.GD($,w),w=this.g.V(w);while(l<this.Gf.size)}else{l=this.Gf.size-1;do l<this.Gf.size-2&&($=this.Gf.get(l+1),this.FD($,w),0>this.$y($)&&this.er($,this.g.Va(w))),$=this.Gf.get(l),l-=2,this.GD($,w),w=this.g.V(w);while(0<=l)}this.Gf.clear(!1)},n.prototype.Ie=function(l){return this.g.Qa(l,this.zh)},n.prototype.NI=function(l,c,d){var f=this.qg(c,0),g=new h.h;this.Jn(f,g);var w=new h.h,$=this.qg(c,1);this.Jn($,w);var T=d.ql(l),E=d.Xp(l,0),O=new h.h;if(E.$p(O),!g.rb(O)){if(!this.Pg){var P=g.compare(this.xh);0>P*(O=O.compare(this.xh))&&(this.Pg=!0)}this.qF(f,this.Gf),this.Ck.add(f)}for(!this.Pg&&1<T&&(P=g.compare(w),E=E.xc(),(g.compare(E)!=P||E.compare(w)!=P||0>E.compare(this.xh))&&(this.Pg=!0)),l=(E=d.Xp(l,T-1)).xc(),w.rb(l)||(this.Pg||0>(P=w.compare(this.xh))*(O=l.compare(this.xh))&&(this.Pg=!0),this.qF($,this.Gf),this.Ck.add($)),this.Gf.add(c),w=0,$=this.Gf.size;w<$;w++)l=this.Gf.get(w),d=this.Rp(l),h.ad.GG(d)&&(this.Nc.wd(d,-1),this.Rl(l,-1)),l!=c&&this.Rp(l)!=-3&&(this.ph.add(l),this.Rl(l,-3));this.Gf.clear(!1)},n.prototype.gO=function(l,c){this.ae.compare(this.Nc,this.Nc.ka(l),c),this.ae.sg&&(this.ae.Mr(),this.jF(l,c))},n.prototype.jF=function(l,c){this.Yn=!0,l=this.Nc.ka(l),c=this.Nc.ka(c);var d=this.Rd.Ln(this.Th(l)),f=this.Rd.Ln(this.Th(c)),g=this.g.cc(d);g==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(d,this.je),g=this.je),(d=this.g.cc(f))==null&&(this.Pm==null&&(this.Pm=new h.zb),this.g.fd(f,this.Pm),d=this.Pm),this.Ik.Qo(g),this.Ik.Qo(d),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(l,c,-1,this.Ik),this.Ik.clear()},n.prototype.BQ=function(l,c){this.Yn=!0,c=this.Nc.ka(c);var d=this.Rd.Ln(this.Th(c)),f=this.g.cc(d);f==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(d,this.je),f=this.je),d=this.wF(l),this.Ik.Qo(f),this.g.Xi(d,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(c,-1,l,this.Ik),this.Ik.clear()},n.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var l=this.ph.Gc();this.ph.Jf(),this.Rl(l,-1),this.RS(l)!=-1&&this.rS(l),this.Xn=!1}},n.prototype.rS=function(l){if(this.Xn){var c=this.Nc.Bu(this.HH,this.BH,l,!0);this.Xn=!1}else c=this.Nc.ED(l);c==-1?this.PT(this.Nc.ka(this.Nc.AF()),l):(this.Rl(l,c),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,c)))},n.prototype.RS=function(l){var c=this.qg(l,0);if(l=this.qg(l,1),this.Jn(c,this.Ao),this.Jn(l,this.Ri),h.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var d=this.Ao.compare(this.xh),f=this.Ri.compare(this.xh);return 0>=d&&0<f?l:0>=f&&0<d?c:-1},n.prototype.jQ=function(){var l=new h.ja(0);l.Jb(this.g.gd);for(var c=this.g.$q(),d=c.next();d!=-1;d=c.next())this.g.Qa(d,this.zh)!=-1&&l.add(d);this.g.nx(l,l.size),this.kQ(l)},n.prototype.kQ=function(l){this.df.clear(),this.df.Ee(l.size),this.df.Xo(new k(this.g));var c=new h.h;c.Sc();for(var d=-1,f=new h.h,g=0,w=l.size;g<w;g++){var $=l.get(g);this.g.Hc($,f),f.rb(c)?($=this.g.Qa($,this.zh),this.Zm(d,$)):(d=this.Ie($),this.g.Hc($,c),$=this.df.zn($),this.Ft(d,$))}},n.prototype.lQ=function(){var l=new h.ja(0);l.Jb(this.g.gd);for(var c=this.df.sc(-1);c!=-1;c=this.df.lb(c))l.add(this.df.ka(c));this.df.clear(),this.g.nx(l,l.size),c=0;for(var d=l.size;c<d;c++){var f=l.get(c),g=this.Ie(f);f=this.df.zn(f),this.Ft(g,f)}},n.prototype.qF=function(l,c){var d=this.kl(l);if(d!=-1){var f=d;do h.ad.GG(this.Rp(f))&&c.add(f),f=this.Tp(f,l);while(f!=d)}},n.prototype.wK=function(l,c){for(l=this.nh.sc(this.Ur(l));l!=-1;l=this.nh.lb(l))this.g.mf(this.nh.ka(l),c)},n.prototype.cK=function(l,c,d,f){this.Zu(l),c!=-1&&this.Zu(c),this.NI(0,l,f),c!=-1&&this.NI(1,c,f),d!=-1&&(f.Cf.D(this.Ao),this.Jn(d,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(d)),d=0;for(var g=this.Ck.size;d<g;d++){var w=this.Ck.get(d),$=this.Zy(w);$!=-1&&(this.df.wd($,-1),this.Ft(w,-1))}for(d=this.Th(l),g=c!=-1?this.Th(c):-1,this.RD(d,f,0),c!=-1&&this.RD(g,f,1),this.UE(l,f,0),c!=-1&&this.UE(c,f,1),this.Rd.eh(d),this.Wu(l),c!=-1&&(this.Rd.eh(g),this.Wu(c)),d=0,g=this.Ck.size;d<g;d++)(w=this.Ck.get(d))==this.Lq&&(this.Zv=!0),($=this.Zy(w))==-1&&(($=this.df.ED(this.wF(w)))==-1?(l=this.Ie(this.df.ka(this.df.AF())),this.Zm(l,w)):this.Ft(w,$));this.Ck.clear(!1)},n.prototype.Jn=function(l,c){this.g.ZF(this.$y(l),c)},n.prototype.wF=function(l){return this.nh.Ln(this.Ur(l))},n.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new u(this),this.Nc.ao=this.ae);var l=new h.ja(0),c=null,d=null;this.BH=this.HH=-1,this.Xn=!1;for(var f=this.df.sc(-1);f!=-1;){this.Xn=!1;var g=this.df.ka(f);this.Lq=this.Ie(g),this.g.Hc(g,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var w=this.kl(this.Lq),$=w==-1;if(!$){g=w;do{var T=this.Rp(g);T==-1?(this.ph.add(g),this.Rl(g,-3)):T!=-3&&l.add(T),g=this.Tp(g,this.Lq)}while(g!=w)}if(0<l.size){for(this.Xn=l.size==1&&this.ph.size==1,$=0,w=l.size;$<w;$++)g=this.Nc.ka(l.get($)),this.Rl(g,-2);var E=-2,O=-2;for($=0,w=l.size;$<w;$++){if(T=l.get($),E==-2){var P=this.Nc.xe(T);P!=-1?(g=this.Nc.ka(P),(g=this.Rp(g))!=-2&&(E=P)):E=-1}if(O==-2&&((T=this.Nc.lb(T))!=-1?(g=this.Nc.ka(T),(g=this.Rp(g))!=-2&&(O=T)):O=-1),E!=-2&&O!=-2)break}for($=0,w=l.size;$<w;$++)T=l.get($),g=this.Nc.ka(T),this.Nc.wd(T,-1),this.Rl(g,-1);l.clear(!1),this.HH=E!=-1?E:-1,this.BH=O!=-1?O:-1,E!=-1&&O!=-1?this.Xn||this.gO(E,O):E==-1&&O==-1&&(this.Xn=!1)}else $&&(c==null&&(c=new o(this)),c.Fh(this.xh),this.Nc.pJ(c),c.sg&&(c.Mr(),this.BQ(this.Lq,c.Fm)));this.sS(),this.Zv?(this.Zv=!1,d==null&&(d=new b(this.g)),d.Fh(this.xh),f=this.df.pJ(d)):f=this.df.lb(f)}return this.Yn},n.prototype.gr=function(l){for(this.g=l,this.zh=this.g.Hd(),this.hb.Ee(l.gd+32),this.Ad.Ee(l.gd),this.nh.Bt(l.gd),this.nh.hn(l.gd),this.Rd.Bt(l.gd+32),this.Rd.hn(l.gd+32),l=this.g.md;l!=-1;l=this.g.ve(l))if(h.ba.Ic(this.g.jc(l)))for(T=this.g.Ob(l);T!=-1;T=this.g.Sb(T)){var c=this.g.Ka(T),d=this.g.Ya(T),f=this.$m(d),g=this.ot(d);for(this.jj(g,f),E=this.g.V(d),d=0,c-=2;d<c;d++){var w=this.g.V(E),$=this.$m(E);this.jj(g,$),g=this.ot(E),this.jj(g,$),E=w}this.g.ec(T)?($=this.$m(E),this.jj(g,$),g=this.ot(E),this.jj(g,$),this.jj(g,f)):($=this.$m(E),this.jj(g,$))}else for(var T=this.g.Ob(l);T!=-1;T=this.g.Sb(T)){var E=this.g.Ya(T);for(f=0,c=this.g.Ka(T);f<c;f++)this.$m(E),E=this.g.V(E)}this.jQ()},n}();h.MC=s}(U||(U={})),function(h){var k=function(b){function u(o,s,n){var l=b.call(this)||this;if(o!==void 0)if(n!==void 0){l.description=h.fe.pg();var c=new h.Od;c.L(o,s,n),l.ZB(c)}else if(s!==void 0)l.description=h.fe.pg(),l.Db(o,s);else if(o instanceof h.sa)l.description=o;else if(o instanceof h.h)l.description=h.fe.pg(),l.Db(o);else{if(!(o instanceof u))throw h.i.O();l.description=o.description,l.Db(o.Ng(),o.kh()),o.la!==null&&(l.la=o.la.slice(0))}else l.description=h.fe.pg();return l}return xt(u,b),u.prototype.D=function(o){if(o===void 0){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return(o=new h.h).na(this.la[0],this.la[1]),o}if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");o.na(this.la[0],this.la[1])},u.prototype.Db=function(o,s){typeof o=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=o,this.la[1]=s):(this.wc(),this.Db(o.x,o.y))},u.prototype.xz=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");var o=new h.Od;return o.x=this.la[0],o.y=this.la[1],o.z=this.description.dG()?this.la[2]:h.sa.te(1),o},u.prototype.ZB=function(o){this.wc();var s=this.hasAttribute(1);s||h.sa.yG(1,o.z)||(this.se(1),s=!0),this.la==null&&this.wn(),this.la[0]=o.x,this.la[1]=o.y,s&&(this.la[2]=o.z)},u.prototype.Ng=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},u.prototype.YB=function(o){this.setAttribute(0,0,o)},u.prototype.kh=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},u.prototype.WJ=function(o){this.setAttribute(0,1,o)},u.prototype.XR=function(){return this.Vc(1,0)},u.prototype.sX=function(o){this.setAttribute(1,0,o)},u.prototype.uR=function(){return this.Vc(2,0)},u.prototype.cX=function(o){this.setAttribute(2,0,o)},u.prototype.Fc=function(){return this.tF(3,0)},u.prototype.GJ=function(o){this.setAttribute(3,0,o)},u.prototype.Vc=function(o,s){var n=this.description.Rf(o);return 0<=n?this.la[this.description.bk(n)+s]:h.sa.te(o)},u.prototype.tF=function(o,s){var n=this.description.Rf(o);return 0<=n?this.la[this.description.bk(n)+s]:h.sa.te(o)},u.prototype.setAttribute=function(o,s,n){this.wc();var l=this.description.Rf(o);0>l&&(this.se(o),l=this.description.Rf(o)),this.la==null&&this.wn(),this.la[this.description.bk(l)+s]=n},u.prototype.K=function(){return 33},u.prototype.Eb=function(){return 0},u.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},u.prototype.un=function(o){if(this.la!=null){for(var s=h.fe.Kw(o,this.description),n=[],l=0,c=0,d=o.Ba;c<d;c++){var f=o.ld(c),g=h.sa.Wa(f);if(s[c]==-1){var w=h.sa.te(f);for(f=0;f<g;f++)n[l]=w,l++}else for(w=this.description.bk(s[c]),f=0;f<g;f++)n[l]=this.la[w],l++,w++}this.la=n}this.description=o},u.prototype.wn=function(){this.gJ(this.description.Be.length),u.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(!this.Bc()){var s=this.D();o.Gh(s,s),this.Db(s)}}else this.Bc()||(this.se(1),s=this.xz(),this.ZB(o.hp(s)))},u.prototype.copyTo=function(o){if(o.K()!=33)throw h.i.O();o.wc(),this.la==null?(o.Pa(),o.la=null,o.Pf(this.description)):(o.Pf(this.description),o.gJ(this.description.Be.length),u.YD(this.la,o.la,this.description.Be.length))},u.prototype.Ja=function(){return new u(this.description)},u.prototype.B=function(){return this.Bc()},u.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},u.prototype.dn=function(o){o.Pa(),this.description!=o.description&&o.Pf(this.description),o.$b(this)},u.prototype.A=function(o){this.Bc()?o.Pa():(o.v=this.la[0],o.G=this.la[1],o.C=this.la[0],o.H=this.la[1])},u.prototype.So=function(o){if(this.Bc())o.Pa();else{var s=this.xz();o.v=s.x,o.G=s.y,o.Xe=s.z,o.C=s.x,o.H=s.y,o.Dg=s.z}},u.prototype.Vg=function(o,s){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(o=this.Vc(o,s),n.pa=o,n.wa=o,n)},u.prototype.gJ=function(o){if(this.la==null)this.la=h.P.mg(o);else if(this.la.length<o){for(var s=this.la.slice(0),n=this.la.length;n<o;n++)s[n]=0;this.la=s}},u.YD=function(o,s,n){if(0<n)for(n=0;n<o.length;n++)s[n]=o[n]},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.Bc())return!!o.Bc();for(var s=0,n=this.description.Be.length;s<n;s++)if(this.la[s]!=o.la[s])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(!this.Bc())for(var s=0,n=this.description.Be.length;s<n;s++){var l=this.la[s];l=h.P.truncate(l^l>>>32),o=h.P.Vh(l,o)}return o},u.prototype.ng=function(){return null},u}(h.ba);h.Ta=k}(U||(U={})),function(h){var k=function(){function b(u,o,s){u!==void 0&&(this.x=u,this.y=o,this.z=s)}return b.construct=function(u,o,s){var n=new b;return n.x=u,n.y=o,n.z=s,n},b.prototype.L=function(u,o,s){this.x=u,this.y=o,this.z=s},b.prototype.lx=function(){this.z=this.y=this.x=0},b.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},b.prototype.sub=function(u){return new b(this.x-u.x,this.y-u.y,this.z-u.z)},b.prototype.Bg=function(u){new b(this.x*u,this.y*u,this.z*u)},b.prototype.Sh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},b}();h.Od=k}(U||(U={})),function(h){var k=function(){function b(u,o,s){this.Iw=this.yA=null,this.Zf=o,this.AT=o.y-s,this.zT=o.y+s,this.Gw=0,this.Zz=u,this.ra=s,this.MT=s*s,this.$z=s!=0,this.Nv=!1}return b.prototype.result=function(){return this.Gw!=0?1:0},b.prototype.UM=function(u){return u=u.ic(u.ge(this.Zf,!1)),h.h.zc(u,this.Zf)<=this.MT},b.prototype.aF=function(u){if(!this.$z&&(this.Zz&&this.Zf.rb(u.bc())||this.Zf.rb(u.xc())))this.Nv=!0;else if(u.oa==this.Zf.y&&u.oa==u.ma){if(this.Zz&&!this.$z){var o=Math.max(u.ta,u.qa);this.Zf.x>Math.min(u.ta,u.qa)&&this.Zf.x<o&&(this.Nv=!0)}}else{var s=!1;if(o=Math.max(u.ta,u.qa),this.Zf.x>o?s=!0:this.Zf.x>=Math.min(u.ta,u.qa)&&(s=0<u.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),s){if(this.Zf.y==u.bc().y){if(this.Zf.y<u.xc().y)return}else if(this.Zf.y==u.xc().y&&this.Zf.y<u.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(u.bc().y>u.xc().y?1:-1)}}},b.prototype.MI=function(u){var o=u.Vg(0,1);if(o.pa>this.zT||o.wa<this.AT)return!1;if(this.$z&&this.UM(u))return!0;if(o.pa>this.Zf.y||o.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(o=u.$F()))for(u=0;u<o;u++){var s=this.yA[u].get();if(this.aF(s),this.Nv)return!0}else if(this.aF(u),this.Nv)return!0;return!1},b.KM=function(u,o,s){for(o=new b(u.Kn()==0,o,s),u=u.Ha();u.ab();)for(;u.Ia();)if(s=u.ia(),o.MI(s))return-1;return o.result()},b.LM=function(u,o,s,n){var l=new h.l;u.yc(l),l.X(n,n);var c=new b(u.Kn()==0,s,n);u=u.Ha();var d=new h.l;for(d.L(l),d.C=s.x+n,d.G=s.y-n,d.H=s.y+n,n=(s=o.HF(d,n)).next();n!=-1;n=s.next())if(u.Wb(o.ka(n)),u.Ia()&&(n=u.ia(),c.MI(n)))return-1;return c.result()},b.ym=function(u,o,s){if(u.B())return 0;var n=new h.l;if(u.yc(n),n.X(s,s),!n.contains(o))return 0;if((n=u.Cb)!=null){var l=n.Hk;if(l!=null){if((l=l.Uo(o.x,o.y))==1)return 1;if(l==0)return 0}if((n=n.Gb)!=null)return b.LM(u,n,o,s)}return b.KM(u,o,s)},b.XS=function(u,o,s){return o.B()?0:b.ym(u,o.D(),s)},b.Ol=function(u,o){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*o<1*u*o},b}();h.Fg=k}(U||(U={})),function(h){var k=function(b){function u(o){return b.call(this,!0,o)||this}return xt(u,b),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 2},u.prototype.K=function(){return 1736},u.prototype.sG=function(o,s,n){this.ES(o,s,n)},u.prototype.kR=function(){this.AR()},u}(h.Xk);h.Ea=k}(U||(U={})),function(h){(function(k){k[k.PiPOutside=0]="PiPOutside",k[k.PiPInside=1]="PiPInside",k[k.PiPBoundary=2]="PiPBoundary"})(h.ML||(h.ML={})),h.jd=function(){function k(){}return k.FG=function(b,u,o){return(b=h.Fg.XS(b,u,o))==0?0:b==1?1:2},k.Zd=function(b,u,o){return(b=h.Fg.ym(b,u,o))==0?0:b==1?1:2},k.SX=function(b,u,o,s,n){if(u.length<o||n.length<o)throw h.i.O();for(var l=0;l<o;l++)n[l]=k.Zd(b,u[l],s)},k.nK=function(b,u,o,s,n){if(b.K()==1736)k.SX(b,u,o,s,n);else{if(b.K()!=197)throw h.i.ga("invalid_call");var l=new h.l;b.A(l),k.VM(l,u,o,s,n)}},k.VM=function(b,u,o,s,n){if(u.length<o||n.length<o)throw h.i.O();if(b.B())for(s=0;s<o;s++)n[s]=0;else for(b.X(.5*-s,.5*-s),b.X(.5*s,.5*s),s=0;s<o;s++)b.contains(u[s])?n[s]=1:b.contains(u[s])?n[s]=2:n[s]=0},k.UX=function(b,u,o,s,n){for(var l=0;l<o;l++)n[l]=b.ss(u[l],s)?2:0},k.TX=function(b,u,o,s,n){var l=b.Cb,c=null;l!=null&&(c=l.Hk),l=o;for(var d=0;d<o;d++)if(n[d]=1,c!=null){var f=u[d];c.Uo(f.x,f.y)==0&&(n[d]=0,l--)}if(l!=0)for(b=b.Ha();b.ab()&&l!=0;)for(;b.Ia()&&l!=0;)for(c=b.ia(),d=0;d<o&&l!=0;d++)n[d]==1&&c.ss(u[d],s)&&(n[d]=2,l--);for(d=0;d<o;d++)n[d]==1&&(n[d]=0)},k.oK=function(b,u,o,s,n){var l=b.K();if(l==1607)k.TX(b,u,o,s,n);else{if(!h.ba.zd(l))throw h.i.ga("Invalid call.");k.UX(b,u,o,s,n)}},k}()}(U||(U={})),function(h){var k=function(b){function u(o,s){if(arguments.length==2){var n=b.call(this,!1,o.description)||this;n.nf(o),n.lineTo(s)}else n=b.call(this,!1,o)||this;return n}return xt(u,b),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 1},u.prototype.K=function(){return 1607},u.prototype.sG=function(o,s,n){this.FS(o,s,n)},u}(h.Xk);h.Ua=k}(U||(U={})),function(h){var k=function(){function b(){}return b.prototype.progress=function(){return!0},b.Bp=function(u){if(u!=null&&!u.progress(-1,-1))throw h.i.RC()},b}();h.op=k}(U||(U={})),function(h){var k;(k=h.KK||(h.KK={}))[k.clipWithInputHorizon=1]="clipWithInputHorizon",k[k.clipWithOutputHorizon=2]="clipWithOutputHorizon";var b=function(){function s(){this.Mg=3,this.Xu=this.Lr=NaN}return s.prototype.KW=function(n){this.LB(1,n)},s.prototype.LW=function(n){this.LB(2,n)},s.prototype.cS=function(){return this.ks(1)},s.prototype.dS=function(){return this.ks(2)},s.prototype.LB=function(n,l){this.Mg=l?this.Mg|n:this.Mg&~n},s.prototype.ks=function(n){return(this.Mg&n)!=0},s.prototype.Qf=function(){var n=new s;return n.Lr=this.Lr,n.Xu=this.Xu,n.Mg=this.Mg,n},s}();h.tC=b,function(s){s[s.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",s[s.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.LK||(h.LK={}));var u=function(){function s(){this.Mg=0}return s.prototype.LB=function(n,l){this.Mg=l?this.Mg|n:this.Mg&~n},s.prototype.ks=function(n){return(this.Mg&n)!=0},s.kg=function(n){var l=new s;return l.Mg=n.Mg,l},s.prototype.hM=function(n){this.Mg=n.Mg},s}();h.wY=u;var o=function(){function s(n,l,c){this.ef=n,this.$f=l,this.Wf=new h.l,this.Wf.L(c),this.vT=n.dc()+l.dc()+this.Wf.dc().toString()}return s.prototype.dc=function(){return this.vT},s.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.$f.Nb(n.$f)&&this.Wf.Nb(n.Wf)},s}();h.BY=o,o=function(){function s(){this.$f=this.ef=null,this.mH=new b,this.nH=new u,this.yw=this.Yf=null,this.ow=this.Vn=!0}return s.Pr=function(n,l,c,d){var f;d===void 0&&(d=null),f===void 0&&(f=null);var g=new s;return g.sp(n,l,c,d,f),g},s.prototype.sp=function(n,l,c,d,f){if(n==null||l==null)throw h.i.ga("invalidArgument");if(this.ef=n,this.$f=l,this.ow=this.Vn=!1,d!=null&&(this.mH=d.Qf()),f!=null&&this.nH.hM(f),f=!1,l.Tb()==1&&d!=null&&(d=d.Lr,isNaN(d)||d==0||(f=!0)),n==l)this.Vn=!f,this.ow=!0;else{d=n.Tb();var g=l.Tb();if(d==0||g==0){if(c!=null)throw h.i.O();n.Id()!=null&&l.Id()!=null&&(this.Vn=n.Id().Nb(l.Id()))}else d==3||g==3?this.Vn=n.Nb(l):this.ef.fS(this.$f)?this.Vn=!f:this.Vn=!1,this.Yf=c,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},s.prototype.isIdentity=function(){return this.Vn},s.prototype.iR=function(){return this.mH.Qf()},s.prototype.Nb=function(n){return n==this||!!(n instanceof s&&this.ef.Nb(n.ef)&&this.$f.Nb(n.$f))&&(this.Yf==n.Yf||!(this.Yf==null||n.Yf==null||!this.Yf.Nb(n.Yf)))},s.prototype.kY=function(){this.yw=new h.du(this)},s}(),h.xr=o}(U||(U={})),function(h){var k=function(){function b(){}return b.Ep=function(u){return u*b.jW},b.mx=function(u,o){return b.bP(o-u)},b.cP=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=h.mc.MK(u))&&(u+=360),u)},b.bP=function(u){return 180<(u=b.cP(u))&&(u-=360),u},b.jW=57.29577951308232,b}();h.sr=k,h.Jh=function(){function b(){}return b.nj=function(u,o){var s=new h.l;u.A(s);var n=h.cb.ih(o),l=new h.l;return l.L(n),l.v=s.v,l.C=s.C,l.X(.01*l.da(),0),o=h.ua.Xd(o,s,!1),l.contains(s)?u:h.Vd.clip(u,l,o,0)},b.ms=function(u,o,s,n,l){if(!h.cb.Xc(o))throw h.i.O();var c=h.ua.mj(o,u,!1),d=h.cb.ih(o),f=h.cb.tc(o),g=f.Id().ci,w=h.cb.xv(f);f=h.cb.gv(f),w*=2-w;var $=new h.Oc;d.en($);var T=[[0,0],[0,0]];if(h.Gg.Tb(o)==2?n?(T[0][0]=b.an(l,$),T[0][1]=d.Lp(),h.cb.wt(),d=T[0][0]*g):(T[0][0]=d.ik(),T[0][1]=l,h.cb.wt(),d=T[0][1]*g):d=l*g,!n&&d!=0)throw h.i.O();var E=new h.ha,O=new h.hd;u=O.Ib(u);for(var P=[0],R=new h.h,F=new h.h,V=new h.h,L=new h.h,G=new h.h,J=new h.h,H=O.Ob(u);H!=-1;H=O.Sb(H)){var te=O.Ya(H);O.D(te,V);for(var Q=!1,ae=te=O.V(te);ae!=-1;ae=O.V(ae)){if(ae==te){if(Q)break;Q=!0}if(O.D(ae,L),n&&c<l-V.x&&L.x-l>c||c<l-L.x&&V.x-l>c||!n&&c<-V.y&&L.y>c||c<-L.y&&V.y>c)do if(!(Math.abs(V.x-L.x)>=.5*$.S())){if(h.Gg.Tb(o)==2?(T[0][0]=b.an(V.x,$),T[0][1]=V.y,T[1][0]=b.an(L.x,$),T[1][1]=L.y,h.cb.ZV(),G.x=T[0][0]*g,G.y=T[0][1]*g,J.x=T[1][0]*g,J.y=T[1][1]*g):(G.x=V.x*g,G.y=V.y*g,J.x=L.x*g,J.y=L.y*g),J.x=6.283185307179586*(L.x-V.x)/$.S()+G.x,n){if(F.x=d,F.y=b.Iz(f,w,G,J,d,s),isNaN(F.y))break}else{if(F.x=b.Gz(f,w,G,J,s),isNaN(F.x))break;F.y=0}h.kb.xd(f,w,G.x,G.y,J.x,J.y,E,null,null,s);var pe=E.u;h.kb.xd(f,w,G.x,G.y,F.x,F.y,E,null,null,s);var he=E.u;h.Gg.Tb(o)==2?(T[0][0]=F.x/g,T[0][1]=F.y/g,h.cb.XQ(),n?(R.y=T[0][1],R.x=l):(R.x=b.qs(T[0][0],V.x,L.x,$),R.y=l)):n?(R.x=l,R.y=F.y/g):(R.x=b.qs(F.x/g,V.x,L.x,$),R.y=l),P[0]=0<pe?h.P.Tk(he/pe,0,1):.5,P[0]!=0&&P[0]!=1&&(pe=O.Na(ae),O.Wl(pe,P,1),O.Db(O.V(pe),R.x,R.y))}while(0);V.N(L)}}return O.Ke(u)},b.Hn=function(u,o,s,n,l){if(u.B())return u;var c=h.cb.bf(o);return b.Jp(u,s-180*c,360*c,o,n,l,!0)},b.Iz=function(u,o,s,n,l,c){if(3.141592653589793<=Math.abs(s.x-n.x)||!b.Un(s.x,n.x,l))return NaN;if(s.x>n.x)var d=n;else d=s,s=n;n=new h.ha(0);var f=new h.ha(0),g=new h.ha(0);h.kb.xd(u,o,d.x,d.y,s.x,s.y,f,n,null,c);var w=f.u,$=0,T=1,E=new h.h;for(E.N(d);w*(T-$)>1e-12*u;){var O=.5*($+T);if(h.kb.qj(u,o,d.x,d.y,w*O,n.u,f,g,c),E.x=f.u,E.y=g.u,E.x==l)break;if(b.Un(d.x,E.x,l))T=O;else{if(!b.Un(s.x,E.x,l))return NaN;$=O}}return E.y},b.Un=function(u,o,s){return u=k.Ep(u),o=k.mx(u,k.Ep(o)),(s=k.mx(u,k.Ep(s)))==0||0<o&&0<s&&s<=o||0>o&&0>s&&s>=o},b.an=function(u,o){var s=o.wa-o.pa;return o.Kt(u-Math.floor((u-o.pa)/s)*s)},b.qs=function(u,o,s,n){var l=new h.Oc;for(l.L(o,s),s=n.S(),u=Math.floor((u-o)/s)*s+u,l=l.tf();Math.abs(u-l)>Math.abs(u+s-l);)u+=s;return u},b.Gz=function(u,o,s,n,l){if(s.y>n.y)var c=n;else c=s,s=n;if((n=new h.Oc).L(c.y,s.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-s.x))return NaN;if(c.x==s.x)return c.x;var d=new h.ha(0),f=new h.ha(0),g=new h.ha(0);h.kb.xd(u,o,c.x,c.y,s.x,s.y,f,d,null,l);var w=f.u,$=0,T=1,E=new h.h;for(E.N(c);w*(T-$)>1e-12*u;){var O=.5*($+T);if(h.kb.qj(u,o,c.x,c.y,w*O,d.u,f,g,l),E.x=f.u,E.y=g.u,n.L(c.y,E.y),E.y==0)break;if(n.contains(0))T=O;else{if(n.L(s.y,E.y),!n.contains(0))return NaN;$=O}}return E.x},b.Jp=function(u,o,s,n,l,c,d){var f=new h.l;if(u.A(f),f.B())return u;var g=new h.Oc;f.en(g);var w=new h.Oc;if(w.L(o,o+s),w.contains(g)&&w.wa!=g.wa)return u;var $=new h.l;$.L(f);var T=u.K();if(T==33)return((f=($=l?u:u.Qf()).Ng())<w.pa||f>=w.wa||d&&f==w.wa)&&(f+=Math.ceil((w.pa-f)/s)*s,f=w.Kt(f),$.YB(f)),$;if(T==550){for(n=($=l?u:u.Qf()).vb(0),T=2*$.I(),u=!1,l=0;l<T;l+=2)((f=n.read(l))<w.pa||f>=w.wa||d&&f==w.wa)&&(u=!0,f+=Math.ceil((w.pa-f)/s)*s,f=w.Kt(f),n.write(l,f));return u&&$.Qc(1993),$}if(w.contains(g))return u;if(T==197)return s=l?u:u.Qf(),f.Fa($),s.Zo(f),s;var E=.1*Math.max(f.da(),f.S());for($.X(0,E),d=u,w=n.Yd(0),u=h.Ih.local(),l=new h.Ed;;){var O=Math.floor((g.pa-o)/s),P=Math.ceil((g.wa-o)/s);if(!(3<P-O))break;O=Math.floor(.5*(P+O)),$.v=f.v-E,$.C=o+s*O;var R=h.Vd.clip(d,$,w,c);$.v=$.C,$.C=f.C+E;var F=h.Vd.clip(d,$,w,c);l.ig((O-P)*s,0),F.Pc(l),T==1736?d=u.W(R,F,n,null):(d=R).add(F,!1),d.A(f),f.en(g)}for($.v=o,$.C=o+s,(o=new h.l).L($),o.X(w,0),(o=Math.floor((f.v-$.v)/s)*s)!=0?($.move(o,0),l.ig(-o,0)):l.MB(),o=T==1607?new h.Ua(d.description):new h.Ea(d.description),c=new h.l,g=new h.l;f.C>$.v;)(E=h.Vd.clip(d,$,w,0)).A(g),(T==1607?!E.B()&&(g.S()>w||g.da()>w):!E.B()&&(T!=1736||g.S()>w))&&(E.Pc(l),E.A(g),o.A(c),c.X(w,w),c.isIntersecting(g)&&T==1736?o=u.W(o,E,n,null):o.add(E,!1)),$.move(s,0),l.shift(-s,0);return o},b.RI=function(u,o,s,n){var l=new h.ee(s.description);l.Gd(s,0,-1),l=h.cb.Bh(l,u,o);var c=s.I();if(n.Pa(),!h.cb.Xc(u)||c!=l.I())return!1;var d=new h.l;s.A(d);var f=new h.l;if(l.A(f),d=d.S(),f=f.S(),d!=0&&f!=0){if(f/=d,u=h.cb.ih(o).S()/h.cb.ih(u).S(),1e-10<Math.abs(f/u-1))return!1}else if(d!=0||f!=0)return!1;for(n.add(s,!1),s=0;s<c;s++)u=l.Oa(s),n.Db(s,u);return!0},b.Jz=function(){throw h.i.Fe()},b}()}(U||(U={})),function(h){var k,b,u;(b=k=h.ui||(h.ui={}))[b.Clip=0]="Clip",b[b.DontClip=1]="DontClip",b[b.PannableFold=2]="PannableFold",function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"}(u=h.RK||(h.RK={})),h.Ab=function(){function o(){}return o.zv=function(s,n,l){if(l||0<n){for(s=s.toString(h.Tc.PE_STR_NAME_CANON|h.Tc.PE_STR_AUTH_NONE),n=[],l=0;l<s.length;l++)n[l]="a"<=s[l]&&"z">=s[l]?n[l]=s[l].toUpperCase():s[l];return n.join()}return s.toString(h.Tc.PE_STR_AUTH_TOP)},o.wr=function(s,n,l,c){var d=c.length,f=l.I();if(f!=0){var g=l.vb(0),w=Math.min(f,d),$=0,T=s.gh();isNaN(n)&&(n=0);for(var E=s.Xc(),O=179*(s=E?s.tc().Le().S():0)/360;0<f;){if(g.pB($<<1,w,c),h.gj.projToGeogCenter(T,w,c,n),E)for(var P=0;P<w;P++){var R=c[P][0]-n,F=h.mc.sign(R),V=g.read(2*($+P));0>F*h.mc.sign(V)&&Math.abs(R)>O&&(c[P][0]+=-F*s)}g.pC($<<1,w,c),$+=w,f-=w,w=Math.min(f,d)}l.Qc(1993)}},o.DL=function(s,n,l,c){var d=0,f=s.gh();isNaN(d)&&(d=0);var g=s.Xc(),w=s.bf();s=360*w,w*=179;for(var $=c.length,T=0;T<l;){for(var E=T;E<l&&n[E].isNaN();++E)T++;var O=Math.min($,l-T);if(0<O){E=1;for(var P=T+1;E<O;++E,++P)if(n[P].isNaN()){O=E;break}if(h.ua.Ey(c,n,T,O),h.gj.projToGeogCenter(f,O,c,d),g)for(E=0,P=T;E<O;++E,++P){var R=n[P].x,F=c[E][0]-d,V=h.mc.sign(F);0>V*h.mc.sign(R)&&Math.abs(F)>w&&(c[E][0]-=V*s)}h.ua.Dy(n,T,c,O),T+=O}}},o.Kx=function(s,n,l){var c=l.length,d=n.I();if(!(1>d)){var f=n.vb(0),g=Math.min(d,c),w=0,$=s.gh(),T=s.Xc(),E=T?s.Le().S():0,O=179*E/360,P=0;for(T&&(P=s.Bi());0<d;){if(f.pB(w<<1,g,l),h.gj.geogToProj($,g,l),T)for(s=0;s<g;s++){var R=l[s][0],F=h.mc.sign(R),V=f.read(2*(w+s))-P;0>F*h.mc.sign(V)&&Math.abs(R)>O&&(l[s][0]+=-F*E)}f.pC(w<<1,g,l),w+=g,d-=g,g=Math.min(d,c)}n.Qc(1993)}},o.CL=function(s,n,l,c){if(l!=0){var d=s.gh(),f=s.Xc(),g=f?s.Le().S():0,w=179*g/360,$=0;for(f&&($=s.Bi()),s=0;s<l;){for(var T=s;T<l&&n[T].isNaN();++T)s++;var E=Math.min(c.length,l-s);if(0<E){T=1;for(var O=s+1;T<E;++T,++O)if(n[O].isNaN()){E=T;break}if(h.ua.Ey(c,n,s,E),h.gj.geogToProj(d,E,c),f)for(T=0,O=s;T<E;T++){var P=c[T][0],R=h.mc.sign(P);0>R*h.mc.sign(n[O].x-$)&&Math.abs(P)>w&&(c[T][0]-=R*g)}h.ua.Dy(n,s,c,E),s+=E}}}},o.vr=function(s,n,l,c){var d=n.I();if(d!=0){var f=n.vb(0),g=s.ef,w=s.$f,$=g.tc().Sp(),T=w.tc().Sp(),E=g.bf(),O=w.bf();if((s=s.Yf)==null||s.count()==0){for(l=$/T,c=(g.Wp()-w.Wp())*O,T=-90*E,s=90*E,$=!1,O=1,g=2*d;O<g;)E=f.get(O),(w=h.P.Tk(E,T,s))!=E&&(f.set(O,w),$=!0),O+=2;if(c!=0||l!=1)for($=!0,T=new h.h,O=0;O<d;O++)f.uc(2*O,T),T.x*=l,T.x+=c,T.y*=l,f.Vt(2*O,T);$&&n.Qc(1993)}else{g=c.length,w=Math.min(d,g);var P=h.P.mg(w),R=null,F=0,V=NaN,L=NaN,G=360*O,J=O/E;l&&(L=90*O,V=89.9*E,R=h.P.mg(w));for(var H=!0,te=0;d!=0;){for(E=!1,f.pB(F<<1,w,c),O=0;O<w;O++)P[O]=c[O][0];if(l)for(O=0;O<w;O++){var Q=Math.abs(c[O][1])-V;0<Q&&(E=c[O][1],c[O][1]=h.mc.En(V,E),R[O]=h.mc.En(Q,E),E=!0)}for(O=c[0][0],s.transform(c,w,$,T),H&&(te=c[0][0]-J*O,H=!1),O=0;O<w;O++)Q=c[O][0]-P[O]*J-te,200<Math.abs(Q)&&(c[O][0]=0<Q?c[O][0]-G:c[O][0]+G);if(E){for(O=0;O<w;O++)R[O]!=0&&(c[O][1]+=J*R[O],c[O][1]>L?c[O][1]=L:c[O][1]<-L&&(c[O][1]=-L));for(E=0;E<w;E++)R[E]=0}f.pC(F<<1,w,c),F+=w,d-=w,w=Math.min(d,g)}n.Qc(1993)}}},o.BL=function(s,n,l,c){if(s.ow)c=90*s.ef.bf(),h.ua.ZJ(n,l,-c,c);else{var d=s.Yf,f=s.ef,g=s.$f;s=f.Zr();var w=g.Zr(),$=f.bf(),T=90*$,E=g.bf();if(d==null||d.count()==0){if(c=s/w,d=(f.Wp()-g.Wp())*E,h.ua.ZJ(n,l,-T,T),d!=0||c!=1)for(E=0;E<l;E++)n[E].x*=c,n[E].x+=d,n[E].y*=c}else{f=Math.min(l,c.length),T=h.P.mg(f),g=360*E,$=E/$;for(var O=!0,P=0,R=0;l!=0;){for(E=0;E<f;E++)T[E]=n[E+R].x;for(E=n[0].x,h.ua.Ey(c,n,R,f),d.transform(c,f,s,w),h.ua.Dy(n,R,c,f),O&&(P=n[0].x-$*E,O=!1),E=0;E<f;E++){var F=n[R+E].x-T[E]*$-P;200<Math.abs(F)&&(n[R+E].x=0<F?n[R+E].x-g:n[R+E].x+g)}R+=f,l-=f,f=Math.min(l,c.length)}}}},o.fv=function(s,n){return s=s.ih(),isNaN(n)||s.Lu(n,0),s},o.PQ=function(s,n,l,c,d,f,g,w){for(var $=o.fv(c,d),T=$.S(),E=T/360,O=o.kE*E,P=s.vb(0),R=n.Xc(),F=R?T/n.Le().S():0,V=!1,L=new h.Ea(l.description),G=0,J=l.ea();G<J;++G){var H=R,te=new h.Ua(l.description);if(te.addPath(l,G,!0),g!=0){var Q=o.KD(!0,te,$.H-w,$.H,g);(V=V||Q)&&(H=!1)}var ae=-1;H&&(ae=s.Ca(G));var pe=te.vb(0),he=te.I(),Ae=0,ve=pe.read(0),We=0;Q=3*c.Yd(0);var Ve=!1,Te=new h.h;Te.Sc();var Gt=new h.h;Gt.Sc();for(var xi=!1,Ut=1;Ut<he;++Ut){var bt=h.h.construct(pe.gg(2*Ut),pe.gg(2*Ut+1)),wt=bt.x,rt=wt+Ae,Jt=rt-ve;if(bt.x=rt,Math.abs(Jt)>O){if(H){var it=ae+(Ut+1<he?Ut:0),os=P.read(2*(ae+Ut-1));it=(P.read(2*it)-os)*F,Math.abs(Jt-it)>1*E&&(H=!1)}H||(rt=wt+(Ae-=h.mc.En(T,rt-ve)),++We,xi=Ae!=0,bt.x=rt)}else Ve||h.ua.vG(Gt,Te,bt,Q)&&(Ve=!0);xi&&pe.write(2*Ut,rt),ve=rt,Gt.N(Te),Te.N(bt)}0<We&&te.Qc(1993),H=te.Oa(0),he=te.Oa(he-1),te=h.h.ub(H,he)<Q?o.pQ(te,c,d,f,Ve):o.qQ(s,G,te,c,d),L.add(te,!1)}return d=c.Yd(0),l=$.S()/180,o.Lt(L,$,.1*d,!1),L=L!=(d=h.ti.clip(L,$,d,l,f)),s=s.He(),g=0,0<(w=d.He())&&0>s?g=1:0>=w&&0<s&&(w==0?(w=NaN,n.Tb()==2?w=n.ol().He():n.Tb()==1&&(w=n.Le().rF()),s>.99*w&&(g=-1)):g=-1),g!=0&&((n=new h.Ea(d.description)).vp($),(n=h.Zl.local().W(n,l,f)).add(d,!1),L=!0,d=n),L&&(d=h.$l.local().W(d,c,!1,f)),d},o.qQ=function(s,n,l,c,d){var f=l.I(),g=l.Oa(0),w=l.Oa(f-1);d=(c=o.fv(c,d)).S(),g=h.mc.sign(w.x-g.x);var $=new h.l;l.yc($);var T=c.ik();if(w=T-d,T+=d,0<=g){var E=Math.ceil((w-$.v)/d);for(E*=d;w>$.v+E;)E+=d;for(;w<$.C+E;)E-=d;var O=E;720<$.S()&&(T=w+360*Math.ceil($.S()/360))}else{for(E=Math.ceil((T-$.C)/d),E*=d;T<$.C+E;)E-=d;for(;T>$.v+E;)E+=d;O=E,720<$.S()&&(w=T-360*Math.ceil($.S()/360))}E=g*d;var P=h.l.construct($.v,$.G,$.C,$.H);P.move(O,0);var R=new h.Ed;R.ig(O,0),l.Pc(R),($=new h.Ua(l.description)).add(l,!1),O=l.Oa(f-1),d=0;for(var F=$.Oa(0).x,V=0;0<g?P.C<T:P.v>w;)1024<=V&&(V=0),P.move(E,0),R.Lb=E,l.Pc(R),F+=E,c.v<=F&&c.C>=F&&(d=$.I()-1),l.Db(0,O),O=l.Oa(f-1),$.Fr(l,0,0,f-1,!1);return l=new h.Ea($.description),f=0<s.Kr(n),l.add($,!1),s=$.Oa(0),w=$.Oa($.I()-1),n=l.ea()-1,(0>g?f:!f)?(g=h.h.construct(w.x,c.H),l.Ei(g),g=h.h.construct(c.ik(),c.H),l.Ei(g),c=h.h.construct(s.x,c.H)):(g=h.h.construct(w.x,c.G),l.Ei(g),g=h.h.construct(c.ik(),c.G),l.Ei(g),c=h.h.construct(s.x,c.G)),l.Ei(c),l.sG(0,n,0),l.fO(d),l},o.pQ=function(s,n,l,c,d){var f=new h.Ea(s.description);f.add(s,!1),f.yB(0,f.I()-1);var g=new h.l;f.yc(g);var w=(l=o.fv(n,l)).S(),$=Math.ceil((l.v-g.v)/w);for($*=w;l.v>g.v+$;)$+=w;for(;l.v<g.C+$;)$-=w;if(($+=w)!=0){g.move($,0);var T=new h.Ed;T.ig($,0),f.Pc(T)}if(l.v<=g.v&&l.C>g.C)return d&&(d=f.He(),n=(f=h.$l.local().W(f,n,!0,c)).He(),(n=h.mc.sign(d)!=h.mc.sign(n))&&f.jJ()),f;for((s=new h.Ea(s.description)).add(f,!1),d=d||g.S()>w-n.Yd(0);g.v<l.C;)g.move(w,0),(T=new h.Ed).ig(w,0),f.Pc(T),s.add(f,!1);return d&&(d=s.He(),s.$o(1),n=(s=h.$l.local().W(s,n,!0,c)).He(),(n=h.mc.sign(d)!=h.mc.sign(n))&&s.jJ()),s},o.KD=function(s,n,l,c,d){for(var f=n.vb(0),g=n.I(),w=!1,$=0;$<g;$++){var T=h.h.construct(f.gg(2*$),f.gg(2*$+1));if(1&d&&T.y>=l){w=!0;break}if(2&d&&T.y<=-l){w=!0;break}}if(!w)return!1;f=!1,s&&(f=n.Pn(0)),g=(s=new h.hd).Ib(n),w=s.Ob(g);var E=-1,O=!0,P=new h.h;P.Sc(),$=new h.Ta;for(var R=-1,F=s.Ya(w);F!=-1;F=s.V(F)){T=s.Oa(F);var V=1&d&&90<=T.y?1:0;if(V|=2&d&&T.y<=-l?2:0,0<E&&E!=V){if(P.x!=T.x){P.x=T.x,s.Xi(s.Na(F),$);var L=s.yj(w,F,$);s.mf(L,P)}if(f)for(R=R!=-1?s.V(R):s.Ya(w),L=s.Na(F);R!=L;)R=s.qd(R,!1);R=-1}0<V&&(T.y=h.mc.En(c,T.y),s.mf(F,T),O||E==V||(T.x!=P.x?(s.Xi(F,$),L=s.yj(w,F,$),s.Db(L,P.x,T.y),R=L):R=F)),E=V,P=T,O=!1}if(f){if(R!=-1)for(R=s.V(R);R!=-1;)R=s.qd(R,!1);l=s.Ya(w),s.hq(l,s.tj(w))||(s.Xi(l,$),s.yj(w,-1,$))}return s.Ke(g).copyTo(n),!0},o.Hz=function(s,n,l,c){var d=s;if(d.B()||l==k.DontClip)return d;var f=d.K();if(f==33)return d=[(c=d).D()],o.tG(d,1,n,l),d[0].isNaN()?c.Pa():c.Db(d[0]),s;var g=(s=n.tc()).bf(),w=90*g,$=180*g,T=360*g,E=n.Bi(),O=.5*g,P=new h.l;d.A(P);var R=n.Xr(),F=n.KQ(),V=R.K()==197;if(n=new h.l,R.A(n),l==k.PannableFold&&(l=s.Le().S(),n.v=E-.5*l,n.C=n.v+l),P.G<-w||P.H>w){if(new h.l().L(P.v-g,-w,P.C+g,w),(d=h.ti.Pu(d,n,s,NaN,0,c)).B())return d;d.A(P)}if(F&&(n.H<P.G||n.G>P.H))return d.Ja();if(P.S()>T&&(d=o.Jp(d,E-$,T,s,!0,0,!0,c)).A(P),(w=o.$N(P.v,P.C,n.v,n.C,T))!=0&&P.move(w,0),P.C>n.C||P.v<n.v){if(P.C>n.C)for(;P.v>=n.C;)P.move(-T,0),w-=T;for(;P.v<n.C-T;)P.move(T,0),w+=T}if(l=h.ua.Ju(s,R),w!=0&&((g=new h.Ed).ig(w,0),d.Pc(g)),F){if(V&&n.contains(P))return d;for(F=[null,null],w=0;2>w;w++){if(V?g=h.ba.Ic(f)?h.ti.clip(d,n,l,O,c):h.ti.clip(d,n,l,0,c):(g=h.Zj.local().W(d,R,s,c))==R&&(g=h.ba.kg(g)),n.v<=P.v&&n.C>=P.C||n.v>=P.v&&n.C<=P.C)return g;F[w]=g,w==0&&(P.move(-T,0),(g=new h.Ed).ig(-T,0),d.Pc(g))}if(f==550)F[0].Gd(F[1],0,-1);else if(h.ba.Ic(f))F[0].add(F[1],!1);else{if(f!=33)throw h.i.ga("intersect_with_GCS_horizon: unexpected geometry type");F[0].B()&&(F[0]=F[1])}return F[0]}if(n.H<P.G||n.G>P.H)return d;for(f=0;!d.B()&&P.C>n.v;)f!=0&&((g=new h.Ed).ig(f,0),d.Pc(g)),h.fj.local().W(4,d,R,s,c)||R==(d=h.mp.local().W(d,R,s,c))&&(d=h.ba.kg(d)),f!=0&&((O=new h.Ed).ig(-f,0),d.Pc(O)),f-=T,P.move(-T,0);return d},o.tG=function(s,n,l,c){if(n!=0&&c!=k.DontClip)if(c==k.PannableFold){c=l.CR();for(var d=n,f=0;f<n;f++)(s[f].y>c.H||s[f].y<c.G)&&(s[f].Sc(),d--);d!=0&&o.cv(s,n,c.v,c.S())}else{var g=90*(c=l.bf()),w=180*c;for(c*=360,d=n,f=0;f<n;f++)(s[f].y>g||s[f].y<-g)&&(s[f].Sc(),d--);if(d!=0){(d=new h.l).bx(s,n),g=l.Xr();var $=l.kv();f=g.K()==197;var T=new h.l;if(g.A(T),!$||!(T.H<d.G||T.G>d.H))if($)if(o.cv(s,n,T.ik()-w,c),d=n,f)for(f=0;f<n;f++)T.contains(s[f])||(s[f].Sc(),d--);else for(l=h.ua.Ju(l.tc(),g),f=0;f<n;f++)(w=h.jd.Zd(g,s[f],l)!=0)||(s[f].Sc(),d--);else for(o.cv(s,n,-w,c),d=n,l=h.ua.Ju(l.tc(),g),f=0;f<n;f++)(w=s[f]).isNaN()&&d--,$=o.oE(w.x,T.v,T.C,c),w.x+=$,(w=h.jd.Zd(g,w,l)!=0)&&(s[f].Sc(),d--)}}},o.Jp=function(s,n,l,c,d,f,g,w){var $=s.K(),T=n+l;if($===33){var E=(c=d?s:s.Qf()).Ng();return(E<n||E>=T||g&&E==T)&&(E+=Math.ceil((n-E)/l)*l,E=h.P.Tk(E,n,T),c.YB(E)),c}if(s.B()||(E=new h.l,s.A(E),E.B()))return s;var O=new h.Oc;E.en(O);var P=new h.Oc;if(P.L(n,T),P.contains(O))return s;if((T=new h.l).L(E),$===550){for(w=(c=d?s:s.Qf()).vb(0),$=2*c.I(),T=!1,n=0;n<$;n+=2)((E=w.read(n))<P.pa||E>=P.wa||g&&E==P.wa)&&(T=!0,E+=Math.ceil((P.pa-E)/l)*l,E=P.Kt(E),w.write(n,E));return T&&c.Qc(1993),c}if($==197)return l=d?s:s.Qf(),E.Fa(T),l.Zo(E),l;var R=.1*Math.max(E.da(),E.S());for(T.X(0,R),g=s,P=c.Yd(0),s=h.Ih.local(),d=new h.Ed;;){var F=Math.floor((O.pa-n)/l),V=Math.ceil((O.wa-n)/l);if(!(3<V-F))break;F=Math.floor(.5*(V+F)),T.v=E.v-R,T.C=n+l*F;var L=h.ti.clip(g,T,P,f,w);T.v=T.C,T.C=E.C+R;var G=h.ti.clip(g,T,P,f,w);d.ig((F-V)*l,0),G.Pc(d),$==1736?g=s.W(L,G,c,null):(g=L).add(G,!1),g.A(E),E.en(O)}for(T.v=n,T.C=n+l,(n=new h.l).L(T),n.X(P,0),(n=Math.floor((E.v-T.v)/l)*l)!=0?(T.move(n,0),d.ig(-n,0)):d.MB(),n=$==1607?new h.Ua(g.description):new h.Ea(g.description),f=new h.l,O=new h.l;E.C>T.v;)(R=h.ti.clip(g,T,P,0,w)).A(O),($==1607?!R.B()&&(O.S()>P||O.da()>P):!R.B()&&($!=1736||O.S()>P))&&(R.Pc(d),R.A(O),n.A(f),f.X(P,P),f.isIntersecting(O)&&$==1736?n=s.W(n,R,c,null):n.add(R,!1)),T.move(l,0),d.shift(-l,0);return n},o.cv=function(s,n,l,c){for(var d=l+c,f=0;f<n;f++){var g=s[f].x;l<=g&&g<d||!(g<l||g>d||g==d)||(g+=Math.ceil((l-g)/c)*c,g=h.P.Tk(g,l,d),s[f].x=g)}},o.Hn=function(s,n,l,c,d,f){if(!n.Xc())throw h.i.ga("fold_into_360_degree_range");if(s.B())return s;if(n.Tb()==2){l=n.rv();var g=n.qv()-l}else{var w=n.bf();g=360*w,l-=180*w}return o.Jp(s,l,g,n,c,d,!0,f)},o.lF=function(s,n,l,c){if(l.Tb()==2)c=l.rv(),l=l.qv()-c;else{var d=l.bf();l=360*d,c-=180*d}o.cv(s,n,c,l)},o.nj=function(s,n){var l=n.Le();if(s.K()==33){var c=s.kh();return l.G<=c&&c<=l.H?s:s.Ja()}c=new h.l,s.A(c);var d=new h.l;return d.L(l),d.v=c.v,d.C=c.C,d.X(.01*d.da(),0),l=h.ua.py(n,c),d.contains(c)?s:h.ti.clip(s,d,l,0,null)},o.kr=function(s,n,l){return s>n.C&&s-n.C<l?n.C:s<n.v&&n.v-s<l?n.v:s},o.BX=function(s,n,l,c){c.x=o.kr(s.x,n,l),c.y=s.y},o.AX=function(s,n,l,c){for(var d=0;d<n;d++)s[d].y<l.G||s[d].y>l.H?s[d].Sc():s[d].x=o.kr(s[d].x,l,c)},o.Lt=function(s,n,l,c){if(!s.B()){var d=s.K();if(!c||d!=1736)if(h.ba.zj(d)){c=s.vb(0),d=0;for(var f=s.I();d<f;d++){var g=c.read(2*d),w=o.kr(g,n,l);w!=g&&c.write(2*d,w)}s.Qc(1993)}else if(d==197)c=new h.l,s.A(c),c.v=o.kr(c.v,n,l),c.C=o.kr(c.C,n,l),s.Zo(c);else{if(d!=33)throw h.i.ga("internal error");s.YB(o.kr(s.Ng(),n,l))}}},o.pS=function(s,n,l,c){var d=new h.hd,f=d.Ib(s);return s=h.ua.Ju(n,s),o.ms(d,f,n,s,l,!0,c),d.Ke(f)},o.ms=function(s,n,l,c,d,f,g){if(!l.Xc())throw h.i.O("invalid call");var w=l.Le(),$=l.tc(),T=$.gh().getDatum().getSpheroid();$=$.Id().ci;var E=T.getFlattening();T=T.getAxis(),E*=2-E;var O=new h.Oc;w.en(O);var P=null,R=[[0,0],[0,0]];if(l.Tb()==2?(P=l.gh(),f?(R[0][0]=o.an(g,O),R[0][1]=w.Lp(),h.gj.projToGeog(P,1,R),w=R[0][0]*$):(R[0][0]=w.ik(),R[0][1]=g,h.gj.projToGeog(P,1,R),w=R[0][1]*$)):w=g*$,!f&&w!=0&&d!=u.GreatElliptic)throw h.i.ga("invalid argument");var F=new h.ha,V=[0],L=new h.h,G=new h.h,J=new h.h,H=[null,null],te=new h.h,Q=new h.h,ae=new h.h,pe=new h.h;for(n=s.Ob(n);n!=-1;n=s.Sb(n)){var he=s.Ya(n);s.D(he,te);for(var Ae=!1,ve=he=s.V(he);ve!=-1;ve=s.V(ve)){if(ve==he){if(Ae)break;Ae=!0}if(s.D(ve,Q),f&&(c<g-te.x&&Q.x-g>c||c<g-Q.x&&te.x-g>c)||!f&&(g!=0||c<-te.y&&Q.y>c||c<-Q.y&&te.y>c))do if(!(Math.abs(te.x-Q.x)>=.5*O.S())){if(l.Tb()==2?(R[0][0]=o.an(te.x,O),R[0][1]=te.y,R[1][0]=o.an(Q.x,O),R[1][1]=Q.y,h.gj.projToGeogCenter(P,2,R,0),ae.x=R[0][0]*$,ae.y=R[0][1]*$,pe.y=R[1][1]*$):(ae.x=te.x*$,ae.y=te.y*$,pe.y=Q.y*$),pe.x=2*(Q.x-te.x)*Math.PI/O.S()+ae.x,f){if(G.x=w,G.y=o.Iz(T,E,ae,pe,w,d),isNaN(G.y))break;H[0]=G;var We=1}else if(d==u.GreatElliptic){var Ve=[0,0];if((We=h.Nx.Jz(E,ae,pe,w,Ve))==0)break;G.x=Ve[0],G.y=w,H[0]=G,We==2&&(J.x=Ve[1],J.y=w,H[1]=J)}else{if(G.x=o.Gz(T,E,ae,pe,d),isNaN(G.x))break;G.y=0,H[0]=G,We=1}var Te=-1;for(Ve=0;Ve<We;Ve++){h.kb.xd(T,E,ae.x,ae.y,pe.x,pe.y,F,null,null,d);var Gt=F.u;h.kb.xd(T,E,ae.x,ae.y,H[Ve].x,H[Ve].y,F,null,null,d);var xi=F.u;if(l.Tb()==2?(R[0][0]=H[Ve].x/$,R[0][1]=H[Ve].y/$,h.gj.geogToProj(P,1,R),f?(L.y=R[0][1],L.x=g):(L.x=o.qs(R[0][0],te.x,Q.x,O),L.y=g)):f?(L.x=g,L.y=H[Ve].y/$):(L.x=o.qs(H[Ve].x/$,te.x,Q.x,O),L.y=g),V[0]=0<Gt?h.P.Tk(xi/Gt,0,1):.5,V[0]==0||V[0]==1)break;Te>V[0]||(Te=s.Na(ve),s.Wl(Te,V,1),s.Db(s.V(Te),L.x,L.y),Te=V[0])}}while(0);te.N(Q)}}},o.an=function(s,n){var l=n.wa-n.pa;return n.Kt(s-Math.floor((s-n.pa)/l)*l)},o.qs=function(s,n,l,c){var d=new h.Oc;for(d.L(n,l),l=c.S(),s=Math.floor((s-n)/l)*l+s,d=d.tf();Math.abs(s-d)>Math.abs(s+l-d);)s+=l;return s},o.Un=function(s,n,l){return s=h.sr.Ep(s),n=h.sr.mx(s,h.sr.Ep(n)),(l=h.sr.mx(s,h.sr.Ep(l)))==0||0<n&&0<l&&l<=n||0>n&&0>l&&l>=n},o.Iz=function(s,n,l,c,d,f){if(f==u.GreatElliptic)return h.Nx.NS(n,l,c,d);if(Math.abs(l.x-c.x)>=Math.PI||!o.Un(l.x,c.x,d))return NaN;if(l.x>c.x)var g=c;else g=l,l=c;c=new h.ha;var w=new h.ha,$=new h.ha;h.kb.xd(s,n,g.x,g.y,l.x,l.y,w,c,null,f);var T=w.u,E=0,O=1,P=new h.h;for(P.N(g);T*(O-E)>1e-12*s;){var R=.5*(E+O);if(h.kb.qj(s,n,g.x,g.y,T*R,c.u,w,$,f),P.x=w.u,P.y=$.u,P.x==d)break;if(o.Un(g.x,P.x,d))O=R;else{if(!o.Un(l.x,P.x,d))return NaN;E=R}}return P.y},o.Gz=function(s,n,l,c,d){if(d==u.GreatElliptic)return s=[0,0],h.Nx.Jz(n,l,c,0,s),s[0];if(l.y>c.y)var f=c;else f=l,l=c;if((c=new h.Oc).L(f.y,l.y),!c.contains(0)||Math.abs(f.x-l.x)>=Math.PI)return NaN;if(f.x==l.x)return f.x;var g=new h.ha,w=new h.ha,$=new h.ha;h.kb.xd(s,n,f.x,f.y,l.x,l.y,w,g,null,d);var T=w.u,E=0,O=1,P=new h.h;for(P.N(f);T*(O-E)>1e-12*s;){var R=.5*(E+O);if(h.kb.qj(s,n,f.x,f.y,T*R,g.u,w,$,d),P.x=w.u,P.y=$.u,c.L(f.y,P.y),P.y==0)break;if(c.contains(0))O=R;else{if(c.L(l.y,P.y),!c.contains(0))return NaN;E=R}}return P.x},o.RI=function(s,n,l,c){if(!s.ef.Xc())return!1;var d=new h.ee(n.description);if(d.Gd(n,0,-1),c=h.Gx.local().W(d,s,c),d=n.I(),l.Pa(),d!=c.I())return!1;var f=new h.l;n.A(f);var g=new h.l;if(c.A(g),f=f.S(),g=g.S(),f!=0&&g!=0){if(g/=f,s=s.$f.ih().S()/s.ef.ih().S(),1e-10<Math.abs(g/s-1))return!1}else if(f!=0||g!=0)return!1;for(l.add(n,!1),n=new h.h,s=0;s<d;s++)c.D(s,n),l.Db(s,n);return!0},o.lN=function(s,n){return(s%=360*n)>=180*n&&(s-=360*n),s},o.OI=function(s,n,l,c){if(l==k.Clip){var d=n.ol();d.K()==197?(l=new h.l,d.A(l),d=h.ua.py(n,l),s=h.ti.clip(s,l,d,5e4*n.rm(),c)):h.fj.local().W(1,d,s,n,c)||(s=h.Zj.local().W(s,d,n,c))==d&&(s=h.Xk.kg(s))}else n.Xc()&&(c=new h.l,s.yc(c),n.Le().contains(c)||(o.Lt(s,n.Le(),n.Yd(0),!0),l==k.PannableFold&&(s=o.nj(s,n)),s=o.Hn(s,n,0,!0,1e5*n.rm(),null)));return s},o.SD=function(s,n,l){var c=n.Yr();if(c==null)return s;var d=(n=n.tc()).Le().S(),f=new h.l;s.yc(f);var g=new h.Oc;f.en(g),f=c.Ha(),c=null;for(var w=new h.Ed;f.ab();)for(;f.Ia();){var $=f.ia(),T=$.Vg(0,0),E=new h.Oc;for(E.L(T.pa,T.wa),T=0;E.wa>g.pa;)E.move(-d),--T;for(;E.pa<=g.wa;){if(E.isIntersecting(g)){c==null&&(c=new h.Ua);var O=h.zb.YO($.bc(),$.xc());T!=0&&(w.ig(T*d,0),O.Pc(w)),c.pc(O,!0)}E.move(d),++T}}return c!=null?(n=h.ua.bO(n,c),n=h.ua.Gr(n),h.bu.gP(s,c,n,l)):s},o.$N=function(s,n,l,c,d){return s>=l&&n<=c?0:o.oE(.5*(n+s),l,c,d)},o.oE=function(s,n,l,c){return h.mc.round((.5*(l+n)-s)/c)*c},o.QQ=function(s,n,l,c,d,f,g,w){var $=o.fv(c,d),T=$.S(),E=T/360,O=o.kE*E,P=s.vb(0),R=n.Xc(),F=R?T/n.Le().S():0;n=s.Ja();for(var V=0,L=l.ea();V<L;++V){var G=R,J=new h.Ua(l.description);J.addPath(l,V,!0);var H=l.ec(V);g!=0&&(H=o.KD(H,J,$.H-w,$.H,g))&&(G=!1);var te=-1;H=J.I();var Q=!1;G&&(te=s.Ca(V),Q=s.ec(V));var ae=J.vb(0),pe=0,he=ae.read(0),Ae=0,ve=3*c.Yd(0),We=!1,Ve=new h.h;Ve.Sc();var Te=new h.h;Te.Sc();for(var Gt=!1,xi=1;xi<H;++xi){var Ut=h.h.construct(ae.gg(2*xi),ae.gg(2*xi+1)),bt=Ut.x,wt=bt+pe,rt=wt-he;if(Ut.x=wt,Math.abs(rt)>O){if(G){var Jt=te+xi-1,it=te;(!Q||xi+1<H)&&(it+=xi),Jt=P.read(2*Jt),it=(P.read(2*it)-Jt)*F,Math.abs(rt-it)>1*E&&(R=!1)}G||(wt=bt+(pe-=h.mc.En(T,wt-he)),++Ae,Gt=pe!=0,Ut.x=wt)}else We||h.ua.vG(Ve,Te,Ut,ve)&&(We=!0);Gt&&ae.write(2*xi,wt),he=wt,Ve.N(Te),Te.N(Ut)}Ae!=0&&J.Qc(1993),G=J.Oa(0),H=J.Oa(H-1),h.h.ub(G,H),J=o.rQ(J,c,isNaN(d)?0:d,f),n.add(J,!1)}return s=c.Yd(0),l=$.S()/180,o.Lt(n,$,.1*s,!1),h.ti.clip(n,$,s,l,f)},o.rQ=function(s,n,l,c){return o.Hn(s,n,l,!0,0,c)},o.JS=function(s,n,l,c){var d=s.K();if(d==1736)for(n=n!=null?n.Yd(0):0,d=0;d<c;d++)h.jd.Zd(s,l[d],n)!=1&&l[d].Sc();else{if(d!=197)throw h.i.O();for(d=0;d<c;d++)s.ZO(l[d])||l[d].Sc()}},o.bl=function(s,n,l,c){if(32>l)for(var d=new h.Ta,f=0;f<l;f++)d.Db(n[f]),s.bl(d,c).D(n[f]);else{var g=new h.ee;for(g.se(3),g.CD(n,l),d=g.vb(3),f=0;f<l;f++)d.write(f,f);for(f=s.bl(g,c),s=f.vb(0),d=f.vb(3),c=h.h.construct(NaN,NaN),g=0;g<l;g++)n[g]=c;for(l=f.I(),f=0;f<l;f++)c=d.read(f),s.uc(2*f,n[c])}},o.al=function(s,n,l,c){if(32>l)for(var d=new h.Ta,f=0;f<l;f++)d.Db(n[f]),s.al(d,c).D(n[f]);else{var g=new h.ee;for(g.se(3),g.CD(n,l),d=g.vb(3),f=0;f<l;f++)d.write(f,f);for(f=s.al(g,c),s=f.vb(0),d=f.vb(3),c=h.h.construct(NaN,NaN),g=0;g<l;g++)n[g]=c;for(l=f.I(),f=0;f<l;f++)c=d.read(f),s.uc(2*f,n[c])}},o.kE=210,o}()}(U||(U={})),function(h){var k;(k=h.PL||(h.PL={}))[k.rightSide=1]="rightSide";var b=function(){function u(o,s,n){this.Ds=new h.h,o===void 0?this.Ko=-1:(this.Ds.N(o),this.Ko=s,this.La=n,this.pw=0)}return u.prototype.RJ=function(o){this.pw=o?1|this.pw:-2&this.pw},u.prototype.B=function(){return 0>this.Ko},u.prototype.az=function(){if(this.B())throw h.i.ga("invalid call");return new h.Ta(this.Ds.x,this.Ds.y)},u.prototype.Va=function(){if(this.B())throw h.i.ga("invalid call");return this.Ko},u.prototype.cz=function(){if(this.B())throw h.i.ga("invalid call");return this.La},u.prototype.Nz=function(){return(1&this.pw)!=0},u.prototype.by=function(o,s,n,l){this.Ds.x=o,this.Ds.y=s,this.Ko=n,this.La=l},u}();h.bm=b}(U||(U={})),function(h){var k=function(){function u(){}return u.prototype.Wo=function(o,s){this.vh.resize(0),this.Ki.length=0,this.vk=-1,o.yc(this.Gk),this.Gk.X(s,s),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=h.ba.zd(o.K()))?(this.OH=o.bc(),this.NH=o.xc(),this.ra=s):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},u.prototype.Zi=function(o,s){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(o),this.Gk.X(s,s),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},u.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var o=null,s=null,n=null,l=null;this.xs&&(o=new h.h,s=new h.h,n=new h.l);for(var c=!1;!c;){for(;this.vk!=-1;){var d=this.Gb.Xy(this.Gb.hv(this.vk));if(d.isIntersecting(this.Gk)){if(!this.xs){c=!0;break}if(o.N(this.OH),s.N(this.NH),n.L(d),n.X(this.ra,this.ra),0<n.uy(o,s)){c=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){d=this.vh.Gc();var f=this.Ki[this.Ki.length-1];for(l==null&&((l=[])[0]=new h.l,l[1]=new h.l,l[2]=new h.l,l[3]=new h.l),b.zJ(f,l),this.vh.Jf(),--this.Ki.length,f=0;4>f;f++){var g=this.Gb.Np(d,f);if(g!=-1&&0<this.Gb.RR(g)&&l[f].isIntersecting(this.Gk))if(this.xs){if(o.N(this.OH),s.N(this.NH),n.L(l[f]),n.X(this.ra,this.ra),0<n.uy(o,s)){var w=new h.l;w.L(l[f]),this.vh.add(g),this.Ki.push(w)}}else(w=new h.l).L(l[f]),this.vh.add(g),this.Ki.push(w)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},u.XO=function(o,s,n){var l=new u;return l.Gb=o,l.Gk=new h.l,l.vh=new h.ja(0),l.Ki=[],l.Wo(s,n),l},u.WO=function(o,s,n){var l=new u;return l.Gb=o,l.Gk=new h.l,l.vh=new h.ja(0),l.Ki=[],l.Zi(s,n),l},u.VO=function(o){var s=new u;return s.Gb=o,s.Gk=new h.l,s.vh=new h.ja(0),s.Ki=[],s},u}();h.CY=k;var b=function(){function u(o,s){this.jf=new h.ad(11),this.ai=new h.ad(5),this.ys=[],this.iw=new h.ja(0),this.Da=new h.l,this.Pk(o,s)}return u.prototype.reset=function(o,s){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(o,s)},u.prototype.xj=function(o,s){return this.Bv(o,s,0,this.Da,this.kf,!1,-1)},u.prototype.Ez=function(o,s,n){n=n==-1?this.kf:this.RF(n);var l=this.da(n),c=this.jR(n);return this.Bv(o,s,l,c,n,!1,-1)},u.prototype.ka=function(o){return this.eR(o)},u.prototype.BF=function(o){return this.Xy(this.hv(o))},u.prototype.da=function(o){return this.lv(o)},u.prototype.jR=function(o){var s=new h.l;s.L(this.Da);var n=this.lv(o);o=this.LF(o);for(var l=0;l<2*n;l+=2){var c=h.P.truncate(3&o>>l);c==0?(s.v=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):c==1?(s.C=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):(c==2?s.C=.5*(s.v+s.C):s.v=.5*(s.v+s.C),s.H=.5*(s.G+s.H))}return s},u.prototype.RR=function(o){return this.vz(o)},u.prototype.qR=function(o,s){return k.XO(this,o,s)},u.prototype.HF=function(o,s){return k.WO(this,o,s)},u.prototype.getIterator=function(){return k.VO(this)},u.prototype.Pk=function(o,s){if(0>s||32<2*s)throw h.i.O("invalid height");this.wT=s,this.Da.L(o),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},u.prototype.Bv=function(o,s,n,l,c,d,f){if(!l.contains(s))return n==0?-1:this.Bv(o,s,0,this.Da,this.kf,d,f);if(!d)for(var g=c;g!=-1;g=this.DR(g))this.jx(g,this.vz(g)+1);(g=new h.l).L(l),l=c;var w=[];for(w[0]=new h.l,w[1]=new h.l,w[2]=new h.l,w[3]=new h.l;n<this.wT&&this.dO(l);n++){u.zJ(g,w);for(var $=!1,T=0;4>T;T++)if(w[T].contains(s)){$=!0;var E=this.Np(l,T);E==-1&&(E=this.mP(l,T)),this.jx(E,this.vz(E)+1),l=E,g.L(w[T]);break}if(!$)break}return this.nS(o,s,n,g,l,d,c,f)},u.prototype.nS=function(o,s,n,l,c,d,f,g){var w=this.IF(c);if(d){if(c==f)return g;this.NP(g),d=g}else d=this.oP(),this.IB(d,o),this.FW(this.hv(d),s);return this.hX(d,c),w!=-1?(this.hx(d,w),this.ex(w,d)):this.BJ(c,d),this.NB(c,d),this.dx(c,this.nv(c)+1),this.cO(c)&&this.HQ(n,l,c),d},u.prototype.NP=function(o){var s=this.RF(o),n=this.IF(s),l=this.JR(o),c=this.pv(o);this.Wr(s)==o?(c!=-1?this.hx(c,-1):this.NB(s,-1),this.BJ(s,c)):n==o?(this.ex(l,-1),this.NB(s,l)):(this.hx(c,l),this.ex(l,c)),this.hx(o,-1),this.ex(o,-1),this.dx(s,this.nv(s)-1)},u.zJ=function(o,s){var n=.5*(o.v+o.C),l=.5*(o.G+o.H);s[0].L(n,l,o.C,o.H),s[1].L(o.v,l,n,o.H),s[2].L(o.v,o.G,n,l),s[3].L(n,o.G,o.C,l)},u.prototype.cO=function(o){return this.nv(o)==8&&!this.bG(o)},u.prototype.HQ=function(o,s,n){var l=this.Wr(n);do{var c=this.hv(l),d=this.ai.U(l,0);c=this.Xy(c),this.Bv(d,c,o,s,n,!0,l),l=d=this.pv(l)}while(l!=-1)},u.prototype.dO=function(o){return 8<=this.nv(o)||this.bG(o)},u.prototype.bG=function(o){return this.Np(o,0)!=-1||this.Np(o,1)!=-1||this.Np(o,2)!=-1||this.Np(o,3)!=-1},u.prototype.mP=function(o,s){var n=this.jf.De();return this.JW(o,s,n),this.jx(n,0),this.dx(n,0),this.Rk(n,o),this.FJ(n,this.lv(o)+1),this.IJ(n,s<<2*this.lv(o)|this.LF(o)),n},u.prototype.oP=function(){var o=this.ai.De();if(0<this.iw.size){var s=this.iw.Gc();this.iw.Jf()}else s=this.ys.length,this.ys.push(new h.l);return this.GW(o,s),o},u.prototype.Np=function(o,s){return this.jf.U(o,s)},u.prototype.JW=function(o,s,n){this.jf.T(o,s,n)},u.prototype.Wr=function(o){return this.jf.U(o,4)},u.prototype.BJ=function(o,s){this.jf.T(o,4,s)},u.prototype.IF=function(o){return this.jf.U(o,5)},u.prototype.NB=function(o,s){this.jf.T(o,5,s)},u.prototype.LF=function(o){return this.jf.U(o,6)},u.prototype.IJ=function(o,s){this.jf.T(o,6,s)},u.prototype.nv=function(o){return this.jf.U(o,7)},u.prototype.vz=function(o){return this.jf.U(o,8)},u.prototype.dx=function(o,s){this.jf.T(o,7,s)},u.prototype.jx=function(o,s){this.jf.T(o,8,s)},u.prototype.DR=function(o){return this.jf.U(o,9)},u.prototype.Rk=function(o,s){this.jf.T(o,9,s)},u.prototype.lv=function(o){return this.jf.U(o,10)},u.prototype.FJ=function(o,s){this.jf.T(o,10,s)},u.prototype.eR=function(o){return this.ai.U(o,0)},u.prototype.IB=function(o,s){this.ai.T(o,0,s)},u.prototype.JR=function(o){return this.ai.U(o,1)},u.prototype.pv=function(o){return this.ai.U(o,2)},u.prototype.hx=function(o,s){this.ai.T(o,1,s)},u.prototype.ex=function(o,s){this.ai.T(o,2,s)},u.prototype.RF=function(o){return this.ai.U(o,3)},u.prototype.hX=function(o,s){this.ai.T(o,3,s)},u.prototype.hv=function(o){return this.ai.U(o,4)},u.prototype.GW=function(o,s){this.ai.T(o,4,s)},u.prototype.Xy=function(o){return this.ys[o]},u.prototype.FW=function(o,s){this.ys[o].L(s)},u}();h.fu=b}(U||(U={})),function(h){var k;(k=h.WK||(h.WK={}))[k.Outside=0]="Outside",k[k.Inside=1]="Inside",k[k.Border=2]="Border";var b=function(){function o(s,n){this.KT=n,this.Xh=s}return o.prototype.ax=function(s,n){this.dH!=n&&s.flush(),this.dH=n},o.prototype.bF=function(s,n){for(var l=0;l<n;)for(var c=s[l++],d=s[l++],f=s[l++]*this.KT;c<d;c++)this.Xh[f+(c>>4)]|=this.dH<<2*(15&c)},o}();h.DY=b;var u=function(){function o(s,n,l){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(s,n,l)}return o.create=function(s,n,l){if(!o.uE(s))throw h.i.O();return o.rP(s,n,l)},o.kW=function(s){switch(s){case 0:s=1024;break;case 1:s=16384;break;case 2:s=262144;break;default:throw h.i.ga("Internal Error")}return s},o.uE=function(s){return!(s.B()||s.K()!=1607&&s.K()!=1736)},o.prototype.mQ=function(s,n){n=n.Ha();for(var l=new h.h,c=new h.h;n.ab();)for(;n.Ia();){var d=n.ia();if(d.K()!=322)throw h.i.ga("Internal Error");s.Gh(d.bc(),l),s.Gh(d.xc(),c),this.Ti.fy(l.x,l.y,c.x,c.y)}this.Ti.dJ(h.Ox.Bx)},o.prototype.nQ=function(){throw h.i.ga("Internal Error")},o.prototype.My=function(s,n){for(var l=1;4>l;l++)s.fy(n[l-1].x,n[l-1].y,n[l].x,n[l].y);s.fy(n[3].x,n[3].y,n[0].x,n[0].y),this.Ti.dJ(h.Ox.Bx)},o.prototype.mK=function(s,n,l){for(var c=[null,null,null,null],d=0;d<c.length;d++)c[d]=new h.h;n=n.Ha(),l=this.Lk.$X(l)+1.5,d=new h.h;for(var f=new h.h,g=new h.h,w=new h.h,$=new h.h,T=new h.l,E=new h.h;n.ab();){var O=!1,P=!0;for(E.na(0,0);n.Ia();){var R=n.ia();if(w.x=R.ta,w.y=R.oa,$.x=R.qa,$.y=R.ma,T.Pa(),T.$b(w.x,w.y),T.Nk($.x,$.y),this.xl.CG(T)){this.Lk.Gh($,$),P?(this.Lk.Gh(w,w),E.N(w),P=!1):w.N(E),d.vc($,w);var F=.5>(R=d.length());R==0?d.na(1,0):(F||E.N($),d.scale(l/R),f.na(-d.y,d.x),g.na(d.y,-d.x),w.sub(d),$.add(d),c[0].add(w,f),c[1].add(w,g),c[2].add($,g),c[3].add($,f),F?O=!0:this.My(s,c))}else O&&(this.My(s,c),O=!1),P=!0}O&&this.My(s,c)}},o.prototype.nC=function(s){return h.P.truncate(s*this.lH+this.WH)},o.prototype.oC=function(s){return h.P.truncate(s*this.Gs+this.YH)},o.rP=function(s,n,l){return new o(s,n,l)},o.prototype.Az=function(s,n,l){this.Hf=Math.max(h.P.truncate(2*Math.sqrt(l)+.5),64),this.Wm=h.P.truncate((2*this.Hf+31)/32),this.xl=new h.l,this.Kk=n,l=0;for(var c=this.Hf,d=this.Wm;8<=c;)l+=c*d,c=h.P.truncate(c/2),d=h.P.truncate((2*c+31)/32);this.Xh=h.P.mg(l,0),this.Ti=new h.Ox,l=new b(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,l),s.A(this.xl),this.xl.X(n,n),c=new h.l;var f=n*(d=h.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(n*=d.da(),c.L(this.xl.tf(),Math.max(f,this.xl.S()),Math.max(n,this.xl.da())),this.NA=this.Kk,this.Lk=new h.Ed,this.Lk.kS(c,d),new h.Ed,s.K()){case 550:l.ax(this.Ti,2),this.nQ();break;case 1607:l.ax(this.Ti,2),this.mK(this.Ti,s,this.NA);break;case 1736:l.ax(this.Ti,1),this.mQ(this.Lk,s),l.ax(this.Ti,2),this.mK(this.Ti,s,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},o.prototype.SN=function(){this.Ti.flush();for(var s=0,n=this.Hf*this.Wm,l=this.Hf,c=h.P.truncate(this.Hf/2),d=this.Wm,f=h.P.truncate((2*c+31)/32);8<l;){for(l=0;l<c;l++)for(var g=2*l,w=2*l+1,$=0;$<c;$++){var T=2*$,E=2*$+1,O=T>>4;T=2*(15&T);var P=E>>4;E=2*(15&E);var R=this.Xh[s+d*g+O]>>T&3;R|=this.Xh[s+d*g+P]>>E&3,R|=this.Xh[s+d*w+O]>>T&3,R|=this.Xh[s+d*w+P]>>E&3,this.Xh[n+f*l+($>>4)]|=R<<2*(15&$)}l=c,d=f,s=n,c=h.P.truncate(l/2),f=h.P.truncate((2*c+31)/32),n=s+d*l}},o.prototype.Uo=function(s,n){return this.xl.contains(s,n)?(s=this.nC(s),n=this.oC(n),0>s||s>=this.Hf||0>n||n>=this.Hf||(n=this.Xh[this.Wm*n+(s>>4)]>>2*(15&s)&3)==0?0:n==1?1:2):0},o.prototype.To=function(s){if(!s.Fa(this.xl))return 0;var n=this.nC(s.v),l=this.nC(s.C),c=this.oC(s.G);if(s=this.oC(s.H),0>n&&(n=0),0>c&&(c=0),l>=this.Hf&&(l=this.Hf-1),s>=this.Hf&&(s=this.Hf-1),n>l||c>s)return 0;for(var d=Math.max(l-n,1)*Math.max(s-c,1),f=0,g=this.Wm,w=this.Hf,$=0;;){if(32>d||16>w){for(d=c;d<=s;d++)for(var T=n;T<=l;T++)if(1<($=this.Xh[f+g*d+(T>>4)]>>2*(15&T)&3))return 2;if($==0)return 0;if($==1)return 1}f+=g*w,w=h.P.truncate(w/2),g=h.P.truncate((2*w+31)/32),n=h.P.truncate(n/2),c=h.P.truncate(c/2),l=h.P.truncate(l/2),s=h.P.truncate(s/2),d=Math.max(l-n,1)*Math.max(s-c,1)}},o.prototype.MR=function(){return this.Hf*this.Wm},o}();h.Mx=u}(U||(U={})),function(h){var k;(k=h.QL||(h.QL={}))[k.contains=1]="contains",k[k.within=2]="within",k[k.equals=3]="equals",k[k.disjoint=4]="disjoint",k[k.touches=8]="touches",k[k.crosses=16]="crosses",k[k.overlaps=32]="overlaps",k[k.unknown=0]="unknown",k[k.intersects=1073741824]="intersects";var b=function(){function o(){}return o.construct=function(s,n,l,c,d,f,g,w){var $=new o;return $.rw=s,$.Om=n,$.Mj=l,$.Ui=c,$.wH=d,$.OY=f,$.PY=g,$.QY=w,$},o}();h.Xt=function(){function o(){}return o.xD=function(s,n,l){if(o.ry(s)){var c=h.ua.mj(n,s,!1);n=!1,h.Wk.xE(s)&&(n=n||s.nu(c,l)),(c=s.K())!=1736&&c!=1607||!h.Wk.vE(s)||l==0||(n=n||s.hj(l)),c!=1736&&c!=1607||!h.Wk.wE(s)||l==0||n||s.cM()}},o.ry=function(s){return h.Wk.xE(s)||h.Wk.vE(s)||h.Wk.wE(s)},o}();var u=function(){function o(){this.th=[]}return o.uB=function(s,n,l,c,d){var f=s.K(),g=n.K();if(f==197){if(g==197)return o.oW(s,n,l,c);if(g==33)return c==2?c=1:c==1&&(c=2),o.cJ(n,s,l,c)}else if(f==33){if(g==197)return o.cJ(s,n,l,c);if(g==33)return o.qW(s,n,l,c)}if(s.B()||n.B())return c==4;var w=new h.l;s.A(w);var $=new h.l;n.A($);var T=new h.l;if(T.L(w),T.$b($),l=h.ua.Xd(l,T,!1),o.fk(w,$,l))return c==4;switch(w=!1,h.Xk.zd(f)&&((f=new h.Ua(s.description)).pc(s,!0),s=f,f=1607),h.Xk.zd(g)&&((g=new h.Ua(n.description)).pc(n,!0),n=g,g=1607),f!=197&&g!=197?(s.Eb()<n.Eb()||f==33&&g==550)&&(c==2?c=1:c==1&&(c=2)):f!=1736&&g!=197&&(c==2?c=1:c==1&&(c=2)),f){case 1736:switch(g){case 1736:w=o.st(s,n,l,c,d);break;case 1607:w=o.bn(s,n,l,c,d);break;case 33:w=o.rt(s,n,l,c);break;case 550:w=o.qt(s,n,l,c,d);break;case 197:w=o.BI(s,n,l,c,d)}break;case 1607:switch(g){case 1736:w=o.bn(n,s,l,c,d);break;case 1607:w=o.bB(s,n,l,c,d);break;case 33:w=o.ut(s,n,l,c,d);break;case 550:w=o.tt(s,n,l,c,d);break;case 197:w=o.HI(s,n,l,c)}break;case 33:switch(g){case 1736:w=o.rt(n,s,l,c);break;case 1607:w=o.ut(n,s,l,c,d);break;case 550:w=o.mt(n,s,l,c)}break;case 550:switch(g){case 1736:w=o.qt(n,s,l,c,d);break;case 1607:w=o.tt(n,s,l,c,d);break;case 550:w=o.UA(s,n,l,c,d);break;case 33:w=o.mt(s,n,l,c);break;case 197:w=o.cI(s,n,l,c)}break;case 197:switch(g){case 1736:w=o.BI(n,s,l,c,d);break;case 1607:w=o.HI(n,s,l,c);break;case 550:w=o.cI(n,s,l,c)}}return w},o.oW=function(s,n,l,c){if(s.B()||n.B())return c==4;var d=new h.l,f=new h.l,g=new h.l;switch(s.A(d),n.A(f),g.L(d),g.$b(f),s=h.ua.Xd(l,g,!1),c){case 4:return o.fk(d,f,s);case 2:return o.eF(f,d,s);case 1:return o.eF(d,f,s);case 3:return o.gk(d,f,s);case 8:return o.YP(d,f,s);case 32:return o.XP(d,f,s);case 16:return o.WP(d,f,s)}return!1},o.cJ=function(s,n,l,c){if(s.B()||n.B())return c==4;s=s.D();var d=new h.l,f=new h.l;switch(n.A(d),f.L(s),f.$b(d),n=h.ua.Xd(l,f,!1),c){case 4:return o.Tw(s,d,n);case 2:return o.$A(s,d,n);case 1:return o.MU(s,d,n);case 3:return o.qI(s,d,n);case 8:return o.ZA(s,d,n)}return!1},o.qW=function(s,n,l,c){if(s.B()||n.B())return c==4;s=s.D(),n=n.D();var d=new h.l;switch(d.L(s),d.$b(n),l=h.ua.Xd(l,d,!1),c){case 4:return o.NU(s,n,l);case 2:return o.pI(n,s,l);case 1:return o.pI(s,n,l);case 3:return o.rI(s,n,l)}return!1},o.st=function(s,n,l,c,d){switch(c){case 4:return o.fV(s,n,l);case 2:return o.Uw(n,s,l,d);case 1:return o.Uw(s,n,l,d);case 3:return o.iV(s,n,l);case 8:return o.qV(s,n,l);case 32:return o.lV(s,n,l,d)}return!1},o.bn=function(s,n,l,c,d){switch(c){case 4:return o.gV(s,n,l);case 1:return o.aB(s,n,l,d);case 8:return o.rV(s,n,l,d);case 16:return o.bV(s,n,l)}return!1},o.rt=function(s,n,l,c){switch(c){case 4:return o.eV(s,n,l);case 1:return o.ZU(s,n,l);case 8:return o.pV(s,n,l)}return!1},o.qt=function(s,n,l,c){switch(c){case 4:return o.dV(s,n,l);case 1:return o.YU(s,n,l);case 8:return o.oV(s,n,l);case 16:return o.aV(s,n,l)}return!1},o.BI=function(s,n,l,c,d){if(o.cV(s,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.sV(s,n,l);case 1:return o.XU(s,n,l);case 3:return o.hV(s,n,l);case 8:return o.nV(s,n,l,d);case 32:return o.kV(s,n,l,d);case 16:return o.$U(s,n,l,d)}return!1},o.bB=function(s,n,l,c){switch(c){case 4:return o.BV(s,n,l);case 2:return o.FI(n,s,l);case 1:return o.FI(s,n,l);case 3:return o.DV(s,n,l);case 8:return o.II(s,n,l);case 32:return o.HV(s,n,l);case 16:return o.GI(s,n,l)}return!1},o.ut=function(s,n,l,c){switch(c){case 4:return o.AV(s,n,l);case 1:return o.vV(s,n,l);case 8:return o.LV(s,n,l)}return!1},o.tt=function(s,n,l,c){switch(c){case 4:return o.zV(s,n,l);case 1:return o.uV(s,n,l);case 8:return o.KV(s,n,l);case 16:return o.xV(s,n,l)}return!1},o.HI=function(s,n,l,c){if(o.yV(s,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.MV(s,n,l);case 1:return o.tV(s,n,l);case 3:return o.CV(s,n,l);case 8:return o.JV(s,n,l);case 32:return o.GV(s,n,l);case 16:return o.wV(s,n,l)}return!1},o.UA=function(s,n,l,c){switch(c){case 4:return o.bU(s,n,l);case 2:return o.$H(n,s,l);case 1:return o.$H(s,n,l);case 3:return o.dU(s,n,l);case 32:return o.jU(s,n,l)}return!1},o.mt=function(s,n,l,c){switch(c){case 4:return o.aI(s,n,l);case 2:return o.nU(s,n,l);case 1:return o.ZT(s,n,l);case 3:return o.Pw(s,n,l)}return!1},o.cI=function(s,n,l,c){switch(c){case 4:return o.aU(s,n,l);case 2:return o.mU(s,n,l);case 1:return o.YT(s,n,l);case 3:return o.cU(s,n,l);case 8:return o.lU(s,n,l);case 16:return o.$T(s,n,l)}return!1},o.iV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.gk(c,d,l)&&(c=o.rc(s,n,!1))!=4&&c!=1&&c!=2&&(!!o.ZH(s,n,l)||(c=s.Rb(),d=n.Rb(),!(Math.abs(c-d)>4*Math.max(s.I(),n.I())*l)&&o.Rz(s,n,l,!0)))},o.fV=function(s,n,l){var c=o.rc(s,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.zI(s,n,l)},o.qV=function(s,n,l){var c=o.rc(s,n,!1);return c!=4&&c!=1&&c!=2&&o.DI(s,n,l,null)},o.lV=function(s,n,l,c){var d=o.rc(s,n,!1);return d!=4&&d!=1&&d!=2&&o.AI(s,n,l,c)},o.Uw=function(s,n,l,c){var d=new h.l,f=new h.l;return s.A(d),n.A(f),!!o.Ac(d,f,l)&&(d=o.rc(s,n,!1))!=4&&d!=2&&(d==1||o.wI(s,n,l,c))},o.gV=function(s,n,l){var c=o.rc(s,n,!0);return c==4||c!=1&&c!=1073741824&&o.zI(s,n,l)},o.rV=function(s,n,l,c){var d=o.rc(s,n,!1);return d!=4&&d!=1&&o.EI(s,n,l,c)},o.bV=function(s,n,l){var c=o.rc(s,n,!1);return c!=4&&c!=1&&o.yI(s,n,l,null)},o.aB=function(s,n,l,c){var d=new h.l,f=new h.l;return s.A(d),n.A(f),!!o.Ac(d,f,l)&&(d=o.rc(s,n,!1))!=4&&(d==1||o.xI(s,n,l,c))},o.eV=function(s,n,l){return h.jd.FG(s,n,l)==0},o.pV=function(s,n,l){return n=n.D(),o.CI(s,n,l)},o.ZU=function(s,n,l){return n=n.D(),o.vI(s,n,l)},o.dV=function(s,n,l){var c=o.rc(s,n,!1);if(c==4)return!0;if(c==1)return!1;c=new h.l,s.A(c),c.X(l,l);for(var d=new h.h,f=0;f<n.I();f++)if(n.D(f,d),c.contains(d)){var g=h.jd.Zd(s,d,l);if(g==1||g==2)return!1}return!0},o.oV=function(s,n,l){var c=this.rc(s,n,!1);if(c==4||c==1)return!1;c=new h.l,s.A(c),c.X(l,l);for(var d=!1,f=s,g=!1,w=0;w<n.I();w++){var $=n.Oa(w);if(c.contains($)){if(($=h.jd.Zd(f,$,l))==2)d=!0;else if($==1)return!1}g||(!h.Fg.Ol(s,n.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?f=s:(f=new h.Ea,s.copyTo(f),f.hj(1)),g=!0)}return!!d},o.aV=function(s,n,l){var c=this.rc(s,n,!1);if(c==4||c==1)return!1;var d=new h.l;c=new h.l;var f=new h.l;s.A(d),n.A(f),c.L(d),c.X(l,l),f=d=!1;for(var g=s,w=!1,$=0;$<n.I();$++){var T=n.Oa($);if(c.contains(T)?(T=h.jd.Zd(g,T,l))==0?f=!0:T==1&&(d=!0):f=!0,d&&f)return!0;w||(!h.Fg.Ol(s,n.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?g=s:(g=new h.Ea,s.copyTo(g),g.hj(1)),w=!0)}return!1},o.YU=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),!this.Ac(c,d,l)||(d=this.rc(s,n,!1))==4)return!1;if(d==1)return!0;d=!1;for(var f=s,g=!1,w=0;w<n.I();w++){var $=n.Oa(w);if(!c.contains($))return!1;if(($=h.jd.Zd(f,$,l))==1)d=!0;else if($==0)return!1;g||(!h.Fg.Ol(s,n.I()-1)||s.Cb!=null&&s.Cb.Gb!=null?f=s:(f=new h.Ea,s.copyTo(f),f.hj(1)),g=!0)}return d},o.hV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.gk(c,d,l)&&((c=new h.Ea).bd(n,!1),o.Rz(s,c,l,!0))},o.cV=function(s,n,l){var c=o.rc(s,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var d=new h.l;if(c=new h.l,s.A(d),n.A(c),o.Ac(c,d,l)||(d=new h.h,c.fn(d),(n=h.jd.Zd(s,d,l))!=0)||(c.VI(d),(n=h.jd.Zd(s,d,l))!=0)||(c.gn(d),(n=h.jd.Zd(s,d,l))!=0)||(c.YI(d),(n=h.jd.Zd(s,d,l))!=0))return!1;n=s.vb(0),(d=new h.l).L(c),d.X(l,l);for(var f=0,g=s.I();f<g;f++){var w=n.read(2*f),$=n.read(2*f+1);if(d.contains(w,$))return!1}return!o.NG(s,c,l)},o.nV=function(s,n,l,c){var d=o.rc(s,n,!1);if(d==4||d==1||d==2)return!1;d=new h.l;var f=new h.l;return s.A(d),n.A(f),!o.Ac(f,d,l)&&(f.S()<=l&&f.da()<=l?(n=n.Kp(),o.CI(s,n,l)):f.S()<=l||f.da()<=l?(d=new h.Ua,f=new h.Ta,n.If(0,f),d.nf(f),n.If(2,f),d.lineTo(f),o.EI(s,d,l,c)):((d=new h.Ea).bd(n,!1),o.DI(s,d,l,c)))},o.kV=function(s,n,l,c){var d=o.rc(s,n,!1);if(d==4||d==1||d==2)return!1;d=new h.l;var f=new h.l;return s.A(d),n.A(f),!(o.Ac(f,d,l)||f.S()<=l||f.da()<=l)&&((d=new h.Ea).bd(n,!1),o.AI(s,d,l,c))},o.sV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),o.Ac(d,c,l)},o.XU=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.Ac(c,d,l)&&(c=o.rc(s,n,!1))!=4&&c!=2&&(c==1||(d.S()<=l&&d.da()<=l?(n=n.Kp(),o.vI(s,n,l)):d.S()<=l||d.da()<=l?(d=new h.Ua,c=new h.Ta,n.If(0,c),d.nf(c),n.If(2,c),d.lineTo(c),o.xI(s,d,l,null)):((d=new h.Ea).bd(n,!1),o.wI(s,d,l,null))))},o.$U=function(s,n,l,c){var d=new h.l,f=new h.l;return s.A(d),n.A(f),!(o.Ac(f,d,l)||f.da()>l&&f.S()>l||f.da()<=l&&f.S()<=l)&&(d=new h.Ua,f=new h.Ta,n.If(0,f),d.nf(f),n.If(2,f),d.lineTo(f),o.yI(s,d,l,c))},o.DV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(!o.gk(c,d,l)||o.rc(s,n,!1)==4)&&(!!o.ZH(s,n,l)||o.Rz(s,n,l,!1))},o.BV=function(s,n,l){return this.rc(s,n,!1)==4||!!new h.am(s,n,l,!0).next()&&!this.OG(s,n,l)},o.II=function(s,n,l){if(o.rc(s,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(s,n,l,c)!=0)return!1;for(var d=new h.ee,f=0;f<c.size;f+=2){var g=c.read(f),w=c.read(f+1);d.Du(g,w)}return s=s.ng(),n=n.ng(),s.Gd(n,0,n.I()),o.Ow(s,d,l)},o.GI=function(s,n,l){if(o.rc(s,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(s,n,l,c)!=0)return!1;for(var d=new h.ee,f=0;f<c.size;f+=2){var g=c.read(f),w=c.read(f+1);d.Du(g,w)}return s=s.ng(),n=n.ng(),s.Gd(n,0,n.I()),!o.Ow(s,d,l)},o.HV=function(s,n,l){return o.rc(s,n,!1)!=4&&o.QG(s,n,l)},o.FI=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(!o.Ac(c,d,l)||o.rc(s,n,!1)==4)&&o.Am(n,s,l,!1)},o.AV=function(s,n,l){return o.rc(s,n,!1)==4||(n=n.D(),!o.Tz(s,n,l))},o.LV=function(s,n,l){return o.rc(s,n,!1)!=4&&(n=n.D(),o.Uz(s,n,l))},o.vV=function(s,n,l){return o.rc(s,n,!1)!=4&&(n=n.D(),o.MG(s,n,l))},o.zV=function(s,n,l){return o.rc(s,n,!1)==4||!o.PG(s,n,l,!1)},o.KV=function(s,n,l){if(this.rc(s,n,!1)==4)return!1;var c=s.Ha(),d=new h.l,f=new h.l,g=new h.l;s.A(d),n.A(f),d.X(l,l),f.X(l,l),g.L(d),g.Fa(f),d=null;var w=s.Cb;if(w!=null){var $=w.Gb;d=w.Bo,$==null&&($=w=h.ua.lj(s,g))}else $=w=h.ua.lj(s,g);var T=$.getIterator(),E=null;d!=null&&(E=d.getIterator());var O=new h.h,P=new h.h,R=!1,F=l*l;for(d=new h.rn(n.I()),w=0;w<n.I();w++)d.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,O),g.contains(O)){if(f.L(O.x,O.y,O.x,O.y),E!=null&&(E.Zi(f,l),E.next()==-1))continue;T.Zi(f,l);for(var V=T.next();V!=-1;V=T.next())if(c.Wb($.ka(V)),(V=c.ia()).ic(V.ge(O,!1),P),h.h.zc(O,P)<=F){d.write(w,1),R=!0;break}}if(!R)return!1;for(s=s.ng(),c=new h.ee,f=new h.h,w=0;w<n.I();w++)d.read(w)!=0&&(n.D(w,f),c.Du(f.x,f.y));return this.Ow(s,c,l)},o.xV=function(s,n,l){if(this.rc(s,n,!1)==4)return!1;var c=s.Ha(),d=new h.l,f=new h.l,g=new h.l;s.A(d),n.A(f),d.X(l,l),f.X(l,l),g.L(d),g.Fa(f),d=null;var w=s.Cb;if(w!=null){var $=w.Gb;d=w.Bo,$==null&&($=w=h.ua.lj(s,g))}else $=w=h.ua.lj(s,g);var T=$.getIterator(),E=null;d!=null&&(E=d.getIterator());var O=new h.h,P=new h.h,R=!1,F=!1,V=l*l;for(d=new h.rn(n.I()),w=0;w<n.I();w++)d.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,O),g.contains(O)){if(f.L(O.x,O.y,O.x,O.y),E!=null&&(E.Zi(f,l),E.next()==-1)){F=!0;continue}T.Zi(f,l);for(var L=!1,G=T.next();G!=-1;G=T.next())if(c.Wb($.ka(G)),(G=c.ia()).ic(G.ge(O,!1),P),h.h.zc(O,P)<=V){d.write(w,1),L=R=!0;break}L||(F=!0)}else F=!0;if(!R||!F)return!1;for(s=s.ng(),c=new h.ee,f=new h.h,w=0;w<n.I();w++)d.read(w)!=0&&(n.D(w,f),c.Du(f.x,f.y));return!this.Ow(s,c,l)},o.uV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(!o.Ac(c,d,l)||o.rc(s,n,!1)==4||!o.PG(s,n,l,!0))&&(s=s.ng(),!o.bI(s,n,l))},o.CV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(d.da()>l&&d.S()>l)&&o.gk(c,d,l)},o.yV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!o.Ac(d,c,l)&&!o.NG(s,d,l)},o.JV=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),d.da()<=l&&d.S()<=l)return d=n.Kp(),o.Uz(s,d,l);if(d.da()<=l||d.S()<=l)return d=new h.Ua,c=new h.Ta,n.If(0,c),d.nf(c),n.If(2,c),d.lineTo(c),o.II(s,d,l);s=s.Ha(),n=new h.l,c=new h.l,n.L(d),c.L(d),n.X(-l,-l),c.X(l,l),d=!1;for(var f=new h.l,g=new h.l;s.ab();)for(;s.Ia();){if(s.ia().A(f),g.L(n),g.Fa(f),!g.B()&&(g.da()>l||g.S()>l))return!1;g.L(c),g.Fa(f),g.B()||(d=!0)}return d},o.GV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(o.Ac(c,d,l)||o.Ac(d,c,l)||o.Ac(d,c,l)||d.da()>l&&d.S()>l||d.da()<=l&&d.S()<=l)&&(c=new h.Ua,d=new h.Ta,n.If(0,d),c.nf(d),n.If(2,d),c.lineTo(d),o.QG(s,c,l))},o.MV=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),!o.Ac(d,c,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l)return o.Ac(d,c,l);s=s.Ha(),(n=new h.l).L(d),n.X(-l,-l),d=!1,c=new h.l;for(var f=new h.l;s.ab();)for(;s.Ia();)s.ia().A(c),n.jm(c)?d=!0:(f.L(n),f.Fa(c),!f.B()&&(f.da()>l||f.S()>l)&&(d=!0));return d},o.tV=function(s,n,l){var c=new h.l,d=new h.l;return n.A(d),s.A(c),!(!o.Ac(c,d,l)||d.da()>l&&d.S()>l)&&(d.da()<=l&&d.S()<=l?(n=n.Kp(),o.MG(s,n,l)):(c=new h.Ua,d=new h.Ta,n.If(0,d),c.nf(d),n.If(2,d),c.lineTo(d),o.Am(c,s,l,!1)))},o.wV=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),o.Ac(d,c,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l)return c=new h.Ua,d=new h.Ta,n.If(0,d),c.nf(d),n.If(2,d),c.lineTo(d),o.GI(s,c,l);s=s.Ha(),n=new h.l,(c=new h.l).L(d),n.L(d),c.X(-l,-l),n.X(l,l);for(var f=d=!1,g=new h.l,w=new h.l;s.ab();)for(;s.Ia();)if(s.ia().A(g),f||n.contains(g)||(f=!0),d||(w.L(c),w.Fa(g),!w.B()&&(w.da()>l||w.S()>l)&&(d=!0)),d&&f)return!0;return!1},o.dU=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.gk(c,d,l)&&(!!o.eU(s,n,l)||o.TA(s,n,l,!1,!0,!1))},o.bU=function(s,n,l){return!o.bI(s,n,l)},o.jU=function(s,n,l){return o.TA(s,n,l,!1,!1,!0)},o.$H=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.Ac(c,d,l)&&o.TA(n,s,l,!0,!1,!1)},o.Ow=function(s,n,l){l*=l;for(var c=new h.h,d=new h.h,f=0;f<n.I();f++){n.D(f,d);for(var g=!1,w=0;w<s.I();w++)if(s.D(w,c),h.h.zc(c,d)<=l){g=!0;break}if(!g)return!1}return!0},o.Pw=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),o.gk(c,d,l)},o.aI=function(s,n,l){return n=n.D(),o.lt(s,n,l)},o.nU=function(s,n,l){return o.Pw(s,n,l)},o.ZT=function(s,n,l){return!o.aI(s,n,l)},o.cU=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(d.da()>l||d.S()>l)&&o.gk(c,d,l)},o.aU=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),o.Ac(d,c,l))return!1;for((n=new h.l).L(d),n.X(l,l),l=new h.h,d=0;d<s.I();d++)if(s.D(d,l),n.contains(l))return!1;return!0},o.lU=function(s,n,l){var c=new h.l,d=new h.l,f=new h.l;if(n.A(c),c.da()<=l&&c.S()<=l)return!1;if(c.da()<=l||c.S()<=l){n=new h.h;var g=!1;d.L(c),f.L(c),d.X(l,l),c.da()>l?f.X(0,-l):f.X(-l,0);for(var w=0;w<s.I();w++)if(s.D(w,n),d.contains(n)){if(c.da()>l){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;g=!0}return g}for(d.L(c),f.L(c),d.X(l,l),f.X(-l,-l),n=new h.h,g=!1,w=0;w<s.I();w++)if(s.D(w,n),d.contains(n)){if(f.jm(n))return!1;g=!0}return g},o.mU=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),!o.Ac(d,c,l))return!1;if(d.da()<=l&&d.S()<=l)return o.gk(c,d,l);if(d.da()<=l||d.S()<=l){n=!1,c=new h.l;var f=new h.l;c.L(d),f.L(d),d.da()>l?c.X(0,-l):c.X(-l,0),f.X(l,l);for(var g=new h.h,w=0;w<s.I();w++){if(s.D(w,g),!f.contains(g))return!1;d.da()>l?g.y>c.G&&g.y<c.H&&(n=!0):g.x>c.v&&g.x<c.C&&(n=!0)}return n}for(n=!1,c=new h.l,f=new h.l,c.L(d),f.L(d),c.X(-l,-l),f.X(l,l),g=new h.h,w=0;w<s.I();w++){if(s.D(w,g),!f.contains(g))return!1;c.jm(g)&&(n=!0)}return n},o.YT=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(!o.Ac(c,d,l)||d.da()>l||d.S()>l)&&(n=n.Kp(),!o.lt(s,n,l))},o.$T=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),o.Ac(d,c,l)||d.da()<=l&&d.S()<=l)return!1;if(d.da()<=l||d.S()<=l){n=new h.l,c=new h.l,n.L(d),d.da()>l?n.X(0,-l):n.X(-l,0),c.L(d),c.X(l,l);for(var f=new h.h,g=!1,w=!1,$=0;$<s.I();$++)if(s.D($,f),g||(d.da()>l?f.y>n.G&&f.y<n.H&&(g=!0):f.x>n.v&&f.x<n.C&&(g=!0)),w||c.contains(f)||(w=!0),g&&w)return!0;return!1}for(n=new h.l,c=new h.l,n.L(d),n.X(-l,-l),c.L(d),c.X(l,l),f=new h.h,w=g=!1,$=0;$<s.I();$++)if(s.D($,f),!g&&n.jm(f)&&(g=!0),w||c.contains(f)||(w=!0),g&&w)return!0;return!1},o.rI=function(s,n,l){return h.h.zc(s,n)<=l*l},o.NU=function(s,n,l){return h.h.zc(s,n)>l*l},o.pI=function(s,n,l){return o.rI(s,n,l)},o.qI=function(s,n,l){var c=new h.l;return c.L(s),o.gk(c,n,l)},o.Tw=function(s,n,l){var c=new h.l;return c.L(n),c.X(l,l),!c.contains(s)},o.ZA=function(s,n,l){if(n.da()<=l&&n.S()<=l)return!1;var c=new h.l,d=new h.l;if(c.L(n),c.X(l,l),!c.contains(s))return!1;if(n.da()<=l||n.S()<=l){if(d.L(n),n.da()>l?d.X(0,-l):d.X(-l,0),n.da()>l){if(s.y>d.G&&s.y<d.H)return!1}else if(s.x>d.v&&s.x<d.C)return!1;return!0}return d.L(n),d.X(-l,-l),!d.jm(s)},o.$A=function(s,n,l){if(n.da()<=l&&n.S()<=l)return!0;if(n.da()<=l||n.S()<=l){var c=new h.l;c.L(n),n.da()>l?c.X(0,-l):c.X(-l,0);var d=!1;return n.da()>l?s.y>c.G&&s.y<c.H&&(d=!0):s.x>c.v&&s.x<c.C&&(d=!0),d}return(c=new h.l).L(n),c.X(-l,-l),c.jm(s)},o.MU=function(s,n,l){return o.qI(s,n,l)},o.gk=function(s,n,l){return o.Ac(s,n,l)&&o.Ac(n,s,l)},o.fk=function(s,n,l){var c=new h.l;return c.L(n),c.X(l,l),!s.isIntersecting(c)},o.YP=function(s,n,l){if(s.da()<=l&&s.S()<=l){var c=s.tf();return o.ZA(c,n,l)}if(n.da()<=l&&n.S()<=l)return c=n.tf(),o.ZA(c,s,l);if(s.da()>l&&s.S()>l&&(n.da()<=l||n.S()<=l)?c=n:(c=s,s=n),c.da()<=l||c.S()<=l){if(s.da()<=l||s.S()<=l){n=new h.zb;var d=new h.zb,f=[0,0],g=[0,0],w=new h.h;return c.fn(w),n.Ec(w),c.gn(w),n.Rc(w),s.fn(w),d.Ec(w),s.gn(w),d.Rc(w),n.Fa(d,null,f,g,l),n.Fa(d,null,null,null,l)==1&&(f[0]==0||f[1]==1||g[0]==0||g[1]==1)}return n=new h.l,d=new h.l,n.L(s),n.X(-l,-l),d.L(n),d.Fa(c),!(!d.B()&&(d.da()>l||d.S()>l))}return s.X(l,l),(d=new h.l).L(c),d.Fa(s),!(d.B()||!d.B()&&d.da()>l&&d.S()>l)},o.XP=function(s,n,l){if(o.Ac(s,n,l)||o.Ac(n,s,l)||s.da()<=l&&s.S()<=l||n.da()<=l&&n.S()<=l)return!1;if(s.da()<=l||s.S()<=l){if(n.da()>l&&n.S()>l)return!1;var c=new h.zb,d=new h.zb,f=[0,0],g=[0,0],w=new h.h;return s.fn(w),c.Ec(w),s.gn(w),c.Rc(w),n.fn(w),d.Ec(w),n.gn(w),d.Rc(w),c.Fa(d,null,f,g,l),c.Fa(d,null,null,null,l)==2&&(0<f[0]||1>f[1])&&(0<g[0]||1>g[1])}return!(n.da()<=l||n.S()<=l)&&((c=new h.l).L(s),c.Fa(n),!(c.B()||c.da()<=l||c.S()<=l))},o.eF=function(s,n,l){if(!o.Ac(s,n,l))return!1;if(s.da()<=l&&s.S()<=l)return s=s.tf(),o.$A(s,n,l);if(n.da()<=l&&n.S()<=l)return n=n.tf(),o.$A(n,s,l);if(s.da()<=l||s.S()<=l)return o.Ac(s,n,l);if(n.da()<=l||n.S()<=l){var c=new h.l;return c.L(s),c.X(-l,-l),c.jm(n)?!0:((s=new h.l).L(c),s.Fa(n),!(s.B()||s.da()<=l&&s.S()<=l))}return o.Ac(s,n,l)},o.WP=function(s,n,l){if(o.Ac(s,n,l)||o.Ac(n,s,l)||s.da()<=l&&s.S()<=l||n.da()<=l&&n.S()<=l||n.da()>l&&n.S()>l&&s.da()>l&&s.S()>l)return!1;if(s.da()>l&&s.S()>l)var c=n;else c=s,s=n;if(s.da()>l&&s.S()>l){n=new h.l;var d=new h.l;return d.L(s),d.X(-l,-l),n.L(d),n.Fa(c),!(n.B()||n.da()<=l&&n.S()<=l)}n=new h.zb,d=new h.zb;var f=[0,0],g=[0,0],w=new h.h;return c.fn(w),n.Ec(w),c.gn(w),n.Rc(w),s.fn(w),d.Ec(w),s.gn(w),d.Rc(w),n.Fa(d,null,f,g,l),n.Fa(d,null,null,null,l)==1&&0<f[0]&&1>f[1]&&0<g[0]&&1>g[1]},o.zI=function(s,n,l){var c=new h.l,d=new h.l,f=new h.am(s,n,l,!0);if(!f.next())return!0;if(this.OG(s,n,l))return!1;var g=s,w=null;n.K()==1736&&(w=n);var $=!1,T=!1;do{var E=f.pl(),O=f.jl();if(O=n.Oa(n.Ca(O)),c.L(f.oz()),c.X(l,l),c.contains(O)&&(O=h.jd.Zd(g,O,0))!=0||n.K()==1736&&(E=s.Oa(s.Ca(E)),d.L(f.Wy()),d.X(l,l),d.contains(E)&&(O=h.jd.Zd(w,E,0))!=0))return!1;$||(!h.Fg.Ol(s,n.ea()-1)||s.Cb!=null&&s.Cb.Gb!=null?g=s:(g=new h.Ea,s.copyTo(g),g.hj(1)),$=!0),n.K()!=1736||T||(T=n,!h.Fg.Ol(T,s.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(w=new h.Ea,T.copyTo(w),w.hj(1)),T=!0)}while(f.next());return!0},o.Ac=function(s,n,l){var c=new h.l;return c.L(s),c.X(l,l),c.contains(n)},o.ns=function(s,n,l){var c=new h.l;return c.L(n),c.X(l,l),n=new h.h,s.fn(n),!c.contains(n)||(s.VI(n),!c.contains(n)||(s.YI(n),!c.contains(n)||(s.gn(n),!c.contains(n))))},o.ZH=function(s,n,l){if(s.ea()!=n.ea()||s.I()!=n.I())return!1;var c=new h.h,d=new h.h,f=!0;l*=l;for(var g=0;g<s.ea();g++){if(s.Wc(g)!=n.Wc(g)){f=!1;break}for(var w=s.Ca(g);w<n.Wc(g);w++)if(s.D(w,c),n.D(w,d),h.h.zc(c,d)>l){f=!1;break}if(!f)break}return!!f},o.eU=function(s,n,l){if(s.I()!=n.I())return!1;var c=new h.h,d=new h.h,f=!0;l*=l;for(var g=0;g<s.I();g++)if(s.D(g,c),n.D(g,d),h.h.zc(c,d)>l){f=!1;break}return!!f},o.TA=function(s,n,l,c,d,f){var g=!1;if(s.I()>n.I()){c&&(c=!1,g=!0);var w=n}else w=s,s=n;if(n=null,d||f||g){n=new h.rn(s.I());for(var $=0;$<s.I();$++)n.write($,0)}$=new h.l;var T=new h.l,E=new h.l;w.A($),s.A(T),$.X(l,l),T.X(l,l),E.L($),E.Fa(T),T=new h.h;for(var O=new h.h,P=!0,R=h.ua.jE(s,E),F=R.getIterator(),V=l*l,L=0;L<w.I();L++)if(w.D(L,T),E.contains(T)){var G=!1;$.L(T.x,T.y,T.x,T.y),F.Zi($,l);for(var J=F.next();J!=-1&&(J=R.ka(J),s.D(J,O),!(h.h.zc(T,O)<=V&&((d||f||g)&&n.write(J,1),G=!0,c)));J=F.next());if(!G&&(P=!1,d||c))return!1}else{if(d||c)return!1;P=!1}if(f&&P)return!1;if(c)return!0;for($=0;$<s.I();$++)if(n.read($)==1){if(f)return!0}else if(d||g)return!1;return!f},o.bI=function(s,n,l){if(s.I()>n.I())var c=n;else c=s,s=n;n=new h.l;var d=new h.l,f=new h.l;c.A(n),s.A(d),n.X(l,l),d.X(l,l),f.L(n),f.Fa(d),d=new h.h;for(var g=new h.h,w=l*l,$=h.ua.jE(s,f),T=$.getIterator(),E=0;E<c.I();E++)if(c.D(E,d),f.contains(d)){n.L(d.x,d.y,d.x,d.y),T.Zi(n,l);for(var O=T.next();O!=-1;O=T.next())if(s.D($.ka(O),g),h.h.zc(d,g)<=w)return!0}return!1},o.Rz=function(s,n,l,c){return o.Am(s,n,l,c)&&o.Am(n,s,l,c)},o.Am=function(s,n,l,c){function d(Ae,ve){return O.LE(Ae,ve)}var f,g=!0,w=[0,0],$=[0,0],T=0,E=new h.ja(0),O=new o,P=new h.l,R=new h.l,F=new h.l;s.A(P),n.A(R),P.X(l,l),R.X(l,l),F.L(P),F.Fa(R),s=s.Ha(),R=n.Ha();var V=null,L=V=null,G=n.Cb;for(G!=null?(V=G.Gb,L=G.Bo,V==null&&(V=h.ua.lj(n,F))):V=h.ua.lj(n,F),n=V.getIterator(),G=null,L!=null&&(G=L.getIterator());s.ab();)for(;s.Ia();){var J=!1,H=s.ia();if(H.A(P),!P.isIntersecting(F)||G!=null&&(G.Zi(P,l),G.next()==-1))return!1;for(L=H.Rb(),n.Wo(H,l),f=n.next();f!=-1;f=n.next()){R.Wb(V.ka(f)),f=R.ia();var te=H.Fa(f,null,w,$,l);if(te==2&&(!c||$[0]<=$[1])){te=w[0];var Q=w[1],ae=$[0],pe=$[1];if(te*L<=l&&(1-Q)*L<=l){J=!0,T=0,E.resize(0),O.th.length=0;var he=s.xb();for(ae=!0;ae;){if(s.Ia()){if(L=(H=s.ia()).Rb(),(te=H.Fa(f,null,w,$,l))==2&&(!c||$[0]<=$[1])&&(te=w[0],Q=w[1],te*L<=l&&(1-Q)*L<=l)){he=s.xb();continue}if(R.Ia()&&(f=R.ia(),(te=H.Fa(f,null,w,$,l))==2&&(!c||$[0]<=$[1])&&(te=w[0],Q=w[1],te*L<=l&&(1-Q)*L<=l))){he=s.xb();continue}}ae=!1}he!=s.xb()&&(s.Wb(he),s.ia());break}he=s.xb(),f=b.construct(he,s.gb,te,Q,R.xb(),R.gb,ae,pe),O.th.push(f),E.add(E.size)}}if(!J){if(T==O.th.length)return!1;for(1<E.size-T&&E.Wd(T,E.size,d),J=0;T<O.th.length;T++)if(!((f=O.th[E.get(T)]).Mj<J&&f.Ui<J)){if(L*(f.Mj-J)>l)return!1;if(L*(1-(J=f.Ui))<=l||J==1)break}if(L*(1-J)>l)return!1;T=0,E.resize(0),O.th.length=0}}return g},o.QG=function(s,n,l){if(1>o.Sz(s,n,l,null))return!1;var c=new h.l,d=new h.l;s.A(c),n.A(d);var f=o.ns(c,d,l);return c=o.ns(d,c,l),!(!f||!c)||(f&&!c?!o.Am(n,s,l,!1):c&&!f?!o.Am(s,n,l,!1):!o.Am(s,n,l,!1)&&!o.Am(n,s,l,!1))},o.Sz=function(s,n,l,c){function d(Te,Gt){return P.LE(Te,Gt)}if(s.sz()>n.sz())var f=n,g=s;else f=s,g=n;s=f.Ha(),n=g.Ha();var w=[0,0],$=[0,0],T=-1,E=0,O=new h.ja(0),P=new o,R=new h.l,F=new h.l,V=new h.l;f.A(R),g.A(F),R.X(l,l),F.X(l,l),V.L(R),V.Fa(F),f=null,c!=null&&(f=new h.h);var L=F=F=null,G=g.Cb;for(G!=null?(F=G.Gb,L=G.Bo,F==null&&(F=h.ua.lj(g,V))):F=h.ua.lj(g,V),g=F.getIterator(),G=null,L!=null&&(G=L.getIterator());s.ab();)for(L=0;s.Ia();){var J=s.ia();if(J.A(R),R.isIntersecting(V)){if(G!=null&&(G.Zi(R,l),G.next()==-1))continue;var H=J.Rb();g.Wo(J,l);for(var te=g.next();te!=-1;te=g.next()){var Q=F.ka(te);n.Wb(Q);var ae=n.ia(),pe=ae.Rb(),he=J.Fa(ae,null,w,$,l);if(0<he){te=w[0],T=$[0];var Ae=he==2?w[1]:NaN,ve=he==2?$[1]:NaN;if(he==2){if(H*(Ae-te)>l)return 1;var We=H*(Ae-te);if(n.Ia()){if(ae=n.ia(),(he=J.Fa(ae,null,w,null,l))==2){he=w[0];var Ve=w[1];if(We+(he=H*(Ve-he))>l)return 1}n.Wb(Q),n.ia()}if(!n.xm()){if(n.ni(),ae=n.ni(),(he=J.Fa(ae,null,w,null,l))==2&&(he=w[0],We+(he=H*((Ve=w[1])-he))>l))return 1;n.Wb(Q),n.ia()}if(s.Ia()){if(Q=s.xb(),(he=(J=s.ia()).Fa(ae,null,w,null,l))==2&&(he=w[0],We+(he=H*((Ve=w[1])-he))>l))return 1;s.Wb(Q),s.ia()}if(!s.xm()){if(Q=s.xb(),s.ni(),(he=(J=s.ni()).Fa(ae,null,w,null,l))==2&&(he=w[0],We+(he=pe*((Ve=w[1])-he))>l))return 1;s.Wb(Q),s.ia()}ae=b.construct(s.xb(),s.gb,te,Ae,n.xb(),n.gb,T,ve),P.th.push(ae),O.add(O.size)}T=0,c!=null&&(J.ic(te,f),c.add(f.x),c.add(f.y))}}if(E<P.th.length){for(O.Wd(E,O.size,d),J=0,te=P.th[O.get(E)].Om;E<P.th.length;E++)if(!((ae=P.th[O.get(E)]).Mj<J&&ae.Ui<J))if(H*(ae.Mj-J)>l)L=H*(ae.Ui-ae.Mj),J=ae.Ui,te=ae.Om;else{if(ae.Om!=te?(L=H*(ae.Ui-ae.Mj),te=ae.Om):L+=H*(ae.Ui-ae.Mj),L>l)return 1;if((J=ae.Ui)==1)break}H*(1-J)>l&&(L=0),E=0,O.resize(0),P.th.length=0}}}return T},o.OG=function(s,n,l){var c=s.Ha(),d=n.Ha();for(s=new h.am(s,n,l,!1);s.next();){n=s.pl();var f=s.jl();if(c.Wb(n),d.Wb(f),n=c.ia(),0<d.ia().Fa(n,null,null,null,l))return!0}return!1},o.PG=function(s,n,l,c){var d=s.Ha(),f=new h.l,g=new h.l,w=new h.l;s.A(f),n.A(g),f.X(l,l),f.contains(g),g.X(l,l),w.L(f),w.Fa(g),(f=s.Cb)!=null?(f=f.Gb)==null&&(f=h.ua.lj(s,w)):f=h.ua.lj(s,w),s=f.getIterator();for(var $=new h.h,T=new h.h,E=l*l,O=0;O<n.I();O++)if(n.D(O,$),w.contains($)){g.L($.x,$.y,$.x,$.y),s.Zi(g,l);for(var P=!1,R=s.next();R!=-1;R=s.next())if(d.Wb(f.ka(R)),(R=d.ia()).ic(R.ge($,!1),T),h.h.zc(T,$)<=E){P=!0;break}if(c){if(!P)return!1}else if(P)return!0}return!!c},o.Tz=function(s,n,l){var c=new h.h,d=l*l,f=s.Ha();if((s=s.Cb)!=null&&(s=s.Gb)!=null){var g=new h.l;for(g.L(n),g=(l=s.HF(g,l)).next();g!=-1;g=l.next())if(f.Wb(s.ka(g)),f.Ia()){var w=(g=f.ia()).ge(n,!1);if(g.ic(w,c),h.h.zc(n,c)<=d)return!0}return!1}for(s=new h.l;f.ab();)for(;f.Ia();)if((g=f.ia()).A(s),s.X(l,l),s.contains(n)&&(w=g.ge(n,!1),g.ic(w,c),h.h.zc(n,c)<=d))return!0;return!1},o.MG=function(s,n,l){return o.Tz(s,n,l)&&!o.Uz(s,n,l)},o.Uz=function(s,n,l){return s=s.ng(),!o.lt(s,n,l)},o.NG=function(s,n,l){if(s.vm()){var c=new h.zb(n.v,n.G,n.v,n.H),d=new h.zb(n.v,n.H,n.C,n.H),f=new h.zb(n.C,n.H,n.C,n.G);for(n=new h.zb(n.C,n.G,n.v,n.G),s=s.Ha();s.ab();)for(;s.Ia();){var g=s.ia();if(g.isIntersecting(c,l)||g.isIntersecting(d,l)||g.isIntersecting(f,l)||g.isIntersecting(n,l))return!0}}else{(c=new h.l).L(n),c.X(l,l),l=s.vb(0),d=new h.h,f=new h.h,n=new h.h,g=new h.h;for(var w=0,$=s.ea();w<$;w++)for(var T=!0,E=s.Ca(w),O=s.Wc(w);E<O;E++)if(T)l.uc(2*E,f),T=!1;else{if(l.uc(2*E,d),n.N(f),g.N(d),c.uy(n,g)!=0)return!0;f.N(d)}}return!1},o.rc=function(s,n,l){var c=s.K(),d=n.K();if(h.ba.zj(c)){var f=s.Cb;if(f!=null&&(f=f.Hk)!=null)if(d==33){var g=n.D();if((g=f.Uo(g.x,g.y))==1)return 1;if(g==0)return 4}else{if(g=new h.l,n.A(g),(g=f.To(g))==1)return 1;if(g==0)return 4;if(l&&h.ba.zj(d)&&o.CE(n,f))return 1073741824}}if(h.ba.zj(d)&&(f=n.Cb)!=null&&(f=f.Hk)!=null)if(c==33){if(s=s.D(),(g=f.Uo(s.x,s.y))==1)return 2;if(g==0)return 4}else{if(n=new h.l,s.A(n),(g=f.To(n))==1)return 2;if(g==0)return 4;if(l&&h.ba.zj(c)&&o.CE(s,f))return 1073741824}return 0},o.CE=function(s,n){for(var l=s.I(),c=new h.h,d=0;d<l;d++)if(s.D(d,c),n.Uo(c.x,c.y)==1)return!0;return!1},o.DI=function(s,n,l,c){for(var d=1<=s.qm(0)&&1<=n.qm(0),f=s.Ha(),g=n.Ha(),w=[0,0],$=[0,0],T=new h.am(s,n,l,!1),E=!1;T.next();){var O=T.pl(),P=T.jl();if(f.Wb(O),g.Wb(P),O=f.ia(),(P=g.ia().Fa(O,null,$,w,l))==2){if(E=w[0],P=w[1],O=O.Rb(),d&&(P-E)*O>l)return!1;E=!0}else if(P!=0){if(E=w[0],O=$[0],0<E&&1>E&&0<O&&1>O)return!1;E=!0}}return!!E&&(f=new h.l,g=new h.l,d=new h.l,s.A(f),n.A(g),f.X(1e3*l,1e3*l),g.X(1e3*l,1e3*l),d.L(f),d.Fa(g),!(10<s.I()&&(s=h.Vd.clip(s,d,l,0),s.B())||10<n.I()&&(n=h.Vd.clip(n,d,l,0),n.B()))&&h.cm.st(s,n,l,"F********",c))},o.AI=function(s,n,l,c){var d=1<=s.qm(0)&&1<=n.qm(0),f=new h.l,g=new h.l,w=new h.l;s.A(f),n.A(g);for(var $=!1,T=o.ns(f,g,l),E=o.ns(g,f,l),O=s.Ha(),P=n.Ha(),R=[0,0],F=[0,0],V=new h.am(s,n,l,!1);V.next();){var L=V.pl(),G=V.jl();if(O.Wb(L),P.Wb(G),G=O.ia(),(L=P.ia().Fa(G,null,F,R,l))==2){L=R[0];var J=R[1];if(G=G.Rb(),d&&(J-L)*G>l&&($=!0,T&&E))return!0}else if(L!=0&&(L=R[0],G=F[0],0<L&&1>L&&0<G&&1>G))return!0}if(d=new h.l,O=new h.l,d.L(f),d.X(1e3*l,1e3*l),O.L(g),O.X(1e3*l,1e3*l),w.L(d),w.Fa(O),f="",f=$?f+"**":f+"T*",T){if(10<n.I()&&(n=h.Vd.clip(n,w,l,0)).B())return!1;f+="****"}else f+="T***";if(E){if(10<s.I()&&(s=h.Vd.clip(s,w,l,0)).B())return!1;f+="***"}else f+="T**";return h.cm.st(s,n,l,f.toString(),c)},o.wI=function(s,n,l,c){var d=[!1],f=o.uI(s,n,l,d);return d[0]?f:(d=new h.l,n.A(d),d.X(1e3*l,1e3*l),!(10<s.I()&&(s=h.Vd.clip(s,d,l,0),s.B()))&&h.cm.Uw(s,n,l,c))},o.uI=function(s,n,l,c){c[0]=!1;for(var d=s.Ha(),f=n.Ha(),g=[0,0],w=[0,0],$=new h.am(s,n,l,!1),T=!1;$.next();){var E=$.pl(),O=$.jl();if(d.Wb(E,-1),f.Wb(O,-1),E=d.ia(),(E=f.ia().Fa(E,null,w,g,l))!=0&&(T=!0,E==1&&(E=g[0],O=w[0],0<E&&1>E&&0<O&&1>O)))return c[0]=!0,!1}if(!T){for(c[0]=!0,g=new h.l,s.A(g),g.X(l,l),$=s,T=!1,w=new h.l,c=0,d=n.ea();c<d;c++)if(0<n.Ka(c)){if(n.Tj(c,w),!g.isIntersecting(w)||(f=n.Oa(n.Ca(c)),(f=h.Fg.ym($,f,0))==0))return!1;T||(!h.Fg.Ol(s,n.ea()-1)||s.Cb!=null&&s.Cb.Gb!=null?$=s:(f=new h.Ea,s.copyTo(f),f.hj(1),$=f),T=!0)}if(s.ea()==1||n.K()==1607)return!0;for(g=new h.l,n.A(g),g.X(l,l),w=n,$=!1,l=new h.l,c=0,d=s.ea();c<d;c++)if(0<s.Ka(c)){if(s.Tj(c,l),g.isIntersecting(l)&&(f=s.Oa(s.Ca(c)),(f=h.Fg.ym(w,f,0))==1))return!1;$||(!h.Fg.Ol(n,s.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(f=new h.Ea,n.copyTo(f),f.hj(1),w=f),$=!0)}return!0}return!1},o.EI=function(s,n,l,c){for(var d=s.Ha(),f=n.Ha(),g=[0,0],w=[0,0],$=new h.am(s,n,l,!1),T=!1;$.next();){var E=$.pl(),O=$.jl();if(d.Wb(E),f.Wb(O),E=d.ia(),(E=f.ia().Fa(E,null,w,g,l))==2)T=!0;else if(E!=0){if(T=g[0],E=w[0],0<T&&1>T&&0<E&&1>E)return!1;T=!0}}return!!T&&(f=new h.l,g=new h.l,d=new h.l,s.A(f),n.A(g),f.X(1e3*l,1e3*l),g.X(1e3*l,1e3*l),d.L(f),d.Fa(g),!(10<s.I()&&(s=h.Vd.clip(s,d,l,0),s.B())||10<n.I()&&(n=h.Vd.clip(n,d,l,0),n.B()))&&h.cm.bn(s,n,l,"F********",c))},o.yI=function(s,n,l,c){for(var d=s.Ha(),f=n.Ha(),g=[0,0],w=[0,0],$=new h.am(s,n,l,!1),T=!1;$.next();){var E=$.pl(),O=$.jl();if(d.Wb(E),f.Wb(O),E=d.ia(),(E=f.ia().Fa(E,null,w,g,l))==2)T=!0;else if(E!=0){if(T=g[0],E=w[0],0<T&&1>T&&0<E&&1>E)return!0;T=!0}}return!!T&&(f=new h.l,g=new h.l,w=new h.l,$=new h.l,d=new h.l,s.A(f),n.A(g),o.ns(g,f,l)?(w.L(f),w.X(1e3*l,1e3*l),$.L(g),$.X(1e3*l,1e3*l),d.L(w),d.Fa($),!(10<s.I()&&(s=h.Vd.clip(s,d,l,0),s.B())||10<n.I()&&(n=h.Vd.clip(n,d,l,0),n.B()))&&(l=h.cm.bn(s,n,l,"T********",c))):l=h.cm.bn(s,n,l,"T*****T**",c))},o.xI=function(s,n,l,c){var d=[!1],f=o.uI(s,n,l,d);return d[0]?f:(d=new h.l,n.A(d),d.X(1e3*l,1e3*l),!(10<s.I()&&(s=h.Vd.clip(s,d,l,0),s.B()))&&h.cm.aB(s,n,l,c))},o.vI=function(s,n,l){return h.jd.Zd(s,n,l)==1},o.CI=function(s,n,l){return h.jd.Zd(s,n,l)==2},o.lt=function(s,n,l){var c=new h.h;l*=l;for(var d=0;d<s.I();d++)if(s.D(d,c),h.h.zc(c,n)<=l)return!1;return!0},o.prototype.LE=function(s,n){return s=this.th[s],n=this.th[n],s.Om<n.Om||s.Om==n.Om&&(s.rw<n.rw||s.rw==n.rw&&(s.Mj<n.Mj||s.Mj==n.Mj&&(s.Ui<n.Ui||s.Ui==n.Ui&&s.wH<n.wH)))?-1:1},o}();h.vd=u}(U||(U={})),function(h){var k,b,u;(b=k||(k={}))[b.InteriorInterior=0]="InteriorInterior",b[b.InteriorBoundary=1]="InteriorBoundary",b[b.InteriorExterior=2]="InteriorExterior",b[b.BoundaryInterior=3]="BoundaryInterior",b[b.BoundaryBoundary=4]="BoundaryBoundary",b[b.BoundaryExterior=5]="BoundaryExterior",b[b.ExteriorInterior=6]="ExteriorInterior",b[b.ExteriorBoundary=7]="ExteriorBoundary",b[b.ExteriorExterior=8]="ExteriorExterior",function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"}(u||(u={})),k=function(){function o(){this.me=0,this.j=new h.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return o.tB=function(s,n,l,c,d){if(c.length!=9)throw h.i.ga("relation string length has to be 9 characters");for(var f=0;9>f;f++){var g=c.charAt(f);if(g!="*"&&g!="T"&&g!="F"&&g!="0"&&g!="1"&&g!="2")throw h.i.ga("relation string")}if((f=this.HR(c,s.Eb(),n.Eb()))!=0)return h.vd.uB(s,n,l,f,d);f=new h.l,s.A(f),g=new h.l,n.A(g);var w=new h.l;if(w.L(f),w.$b(g),l=h.ua.Xd(l,w,!1),s=this.RE(s,l),n=this.RE(n,l),s.B()||n.B())return this.pW(s,n,c);switch(f=n.K(),g=!1,s.K()){case 1736:switch(f){case 1736:g=this.st(s,n,l,c,d);break;case 1607:g=this.bn(s,n,l,c,d);break;case 33:g=this.rt(s,n,l,c);break;case 550:g=this.qt(s,n,l,c,d)}break;case 1607:switch(f){case 1736:g=this.bn(n,s,l,this.aq(c),d);break;case 1607:g=this.bB(s,n,l,c,d);break;case 33:g=this.ut(s,n,l,c,d);break;case 550:g=this.tt(s,n,l,c,d)}break;case 33:switch(f){case 1736:g=this.rt(n,s,l,this.aq(c));break;case 1607:g=this.ut(n,s,l,this.aq(c),d);break;case 33:g=this.VU(s,n,l,c);break;case 550:g=this.mt(n,s,l,this.aq(c))}break;case 550:switch(f){case 1736:g=this.qt(n,s,l,this.aq(c),d);break;case 1607:g=this.tt(n,s,l,this.aq(c),d);break;case 550:g=this.UA(s,n,l,c,d);break;case 33:g=this.mt(s,n,l,c)}break;default:g=!1}return g},o.st=function(s,n,l,c,d){var f=new o;f.$i(),f.dj(c),f.sJ();var g=new h.l,w=new h.l;return s.A(g),n.A(w),c=!1,h.vd.fk(g,w,l)&&(f.Eu(s,n),c=!0),c||((g=h.vd.rc(s,n,!1))==4?(f.Eu(s,n),c=!0):g==1?(f.hy(n),c=!0):g==2&&(f.UD(s),c=!0)),c||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,d),f.Dp(s,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.Uw=function(s,n,l,c){var d=new o;d.$i(),d.dj("T*****F**"),d.sJ();var f=new h.l,g=new h.l;s.A(f),n.A(g);var w=!1;return h.vd.fk(f,g,l)&&(d.Eu(s,n),w=!0),w||((f=h.vd.rc(s,n,!1))==4?(d.Eu(s,n),w=!0):f==1?(d.hy(n),w=!0):f==2&&(d.UD(s),w=!0)),w?this.hg(d.J,d.Yc):(s=(w=new h.hd).Ib(s),f=w.Ib(n),h.Vk.W(w,l,c,!1),l=w.Ke(f).ng(),w.Ip(0,!0,!0),h.tn.W(w,s,-1,!1,c),w.I(s)!=0&&(h.tn.W(w,f,-1,!1,c),d.gr(w,c),(n=w.I(f)==0)||(d.Dp(s,f),d.j.Wg(),f=this.hg(d.J,d.Yc))?(s=w.Ke(s),s=(w=new h.hd).Ib(s),f=w.Ib(l),d.gr(w,c),d.me=0,d.$i(),d.dj(n?"T*****F**":"******F**"),d.DB(),d.Dp(s,f),d.j.Wg(),this.hg(d.J,d.Yc)):f))},o.bn=function(s,n,l,c,d){var f=new o;f.$i(),f.dj(c),f.DB();var g=new h.l,w=new h.l;return s.A(g),n.A(w),c=!1,h.vd.fk(g,w,l)&&(f.Fu(s,n),c=!0),c||((g=h.vd.rc(s,n,!1))==4?(f.Fu(s,n),c=!0):g==1&&(f.VD(n),c=!0)),c||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,d),f.mh=f.j.Fp(),o.Lw(n,f.j,f.mh),f.Dp(s,n),f.j.Gp(f.mh),f.j.Wg()),o.hg(f.J,f.Yc)},o.aB=function(s,n,l,c){var d=new o;d.$i(),d.dj("T*****F**"),d.DB();var f=new h.l,g=new h.l;s.A(f),n.A(g);var w=!1;return h.vd.fk(f,g,l)&&(d.Fu(s,n),w=!0),w||((f=h.vd.rc(s,n,!1))==4?(d.Fu(s,n),w=!0):f==1&&(d.VD(n),w=!0)),w?this.hg(d.J,d.Yc):(s=(w=new h.hd).Ib(s),n=w.Ib(n),d.Yo(w,l,c),w.I(s)!=0&&(d.Dp(s,n),d.j.Wg(),this.hg(d.J,d.Yc)))},o.qt=function(s,n,l,c,d){var f=new o;f.$i(),f.dj(c),f.tJ();var g=new h.l,w=new h.l;return s.A(g),n.A(w),c=!1,h.vd.fk(g,w,l)&&(f.Gu(s),c=!0),c||((g=h.vd.rc(s,n,!1))==4?(f.Gu(s),c=!0):g==1&&(f.uN(),c=!0)),c||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,d),f.By(s,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.bB=function(s,n,l,c,d){var f=new o;f.$i(),f.dj(c),f.$W(),c=new h.l;var g=new h.l;s.A(c),n.A(g);var w=!1;return h.vd.fk(c,g,l)&&(f.KG(s,n),w=!0),w||h.vd.rc(s,n,!1)!=4||(f.KG(s,n),w=!0),w||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,d),f.$h=f.j.Fp(),f.mh=f.j.Fp(),o.Lw(s,f.j,f.$h),o.Lw(n,f.j,f.mh),f.Dp(s,n),f.j.Gp(f.$h),f.j.Gp(f.mh),f.j.Wg()),o.hg(f.J,f.Yc)},o.tt=function(s,n,l,c,d){var f=new o;f.$i(),f.dj(c),f.HJ(),c=new h.l;var g=new h.l;s.A(c),n.A(g);var w=!1;return h.vd.fk(c,g,l)&&(f.Qz(s),w=!0),w||h.vd.rc(s,n,!1)!=4||(f.Qz(s),w=!0),w||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,d),f.$h=f.j.Fp(),o.Lw(s,f.j,f.$h),f.By(s,n),f.j.Gp(f.$h),f.j.Wg()),o.hg(f.J,f.Yc)},o.UA=function(s,n,l,c,d){var f=new o;f.$i(),f.dj(c),f.MJ(),c=new h.l;var g=new h.l;s.A(c),n.A(g);var w=!1;return h.vd.fk(c,g,l)&&(f.tI(),w=!0),w||(s=(c=new h.hd).Ib(s),n=c.Ib(n),f.Yo(c,l,d),f.By(s,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.rt=function(s,n,l,c){var d=new o;d.$i(),d.dj(c),d.tJ();var f=new h.l;s.A(f),n=n.D();var g=!1;return h.vd.Tw(n,f,l)&&(d.Gu(s),g=!0),g||((l=h.jd.Zd(s,n,l))==1?(d.J[0]=0,d.J[2]=2,d.J[3]=-1,d.J[5]=1,d.J[6]=-1):l==2?(d.J[6]=-1,s.He()!=0?(d.J[0]=-1,d.J[3]=0,d.J[2]=2,d.J[5]=1):(d.J[0]=0,d.J[3]=-1,d.J[5]=-1,l=new h.l,s.A(l),d.J[2]=l.da()==0&&l.S()==0?-1:1)):d.Gu(s)),this.hg(d.J,c)},o.ut=function(s,n,l,c,d){var f=new o;f.$i(),f.dj(c),f.HJ();var g=new h.l;s.A(g),c=n.D();var w=!1;if(h.vd.Tw(c,g,l)&&(f.Qz(s),w=!0),!w){g=null;var $=w=!1;(f.fa[0]||f.fa[6])&&(h.vd.Tz(s,c,l)?(f.fa[0]&&(g=h.si.im(s,d),$=!h.vd.lt(g,c,l),w=!0,f.J[0]=$?-1:0),f.J[6]=-1):(f.J[0]=-1,f.J[6]=0)),f.fa[3]&&(g!=null&&g.B()?f.J[3]=-1:(w||(g==null&&(g=h.si.im(s,d)),$=!h.vd.lt(g,c,l),w=!0),f.J[3]=$?0:-1)),f.fa[5]&&(g!=null&&g.B()?f.J[5]=-1:w&&!$?f.J[5]=0:(g==null&&(g=h.si.im(s,d)),d=h.vd.Pw(g,n,l),f.J[5]=d?-1:0)),f.fa[2]&&(s.Rb()!=0?f.J[2]=1:((d=new h.ee(s.description)).Gd(s,0,s.I()),s=h.vd.Pw(d,n,l),f.J[2]=s?-1:0))}return this.hg(f.J,f.Yc)},o.mt=function(s,n,l,c){var d=new o;d.$i(),d.dj(c),d.MJ();var f=new h.l;s.A(f),n=n.D();var g=!1;if(h.vd.Tw(n,f,l)&&(d.tI(),g=!0),!g){f=!1,g=!0,l*=l;for(var w=0;w<s.I();w++){var $=s.Oa(w);if(h.h.zc($,n)<=l?f=!0:g=!1,f&&!g)break}f?(d.J[0]=0,d.J[2]=g?-1:0,d.J[6]=-1):(d.J[0]=-1,d.J[2]=0,d.J[6]=0)}return o.hg(d.J,c)},o.VU=function(s,n,l,c){s=s.D(),n=n.D();for(var d=[],f=0;9>f;f++)d[f]=-1;return h.h.zc(s,n)<=l*l?d[0]=0:(d[2]=0,d[6]=0),d[8]=2,o.hg(d,c)},o.hg=function(s,n){for(var l=0;9>l;l++)switch(n.charAt(l)){case"T":if(s[l]==-1)return!1;break;case"F":if(s[l]!=-1)return!1;break;case"0":if(s[l]!=0)return!1;break;case"1":if(s[l]!=1)return!1;break;case"2":if(s[l]!=2)return!1}return!0},o.pW=function(s,n,l){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(s.B()&&n.B()){for(var d=0;9>d;d++)c[d]=-1;return this.hg(c,l)}return d=!1,s.B()&&(s=n,d=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=s.K(),h.ba.Ic(n)?n==1736?s.He()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new h.l,s.A(n),c[2]=n.da()==0&&n.S()==0?0:1):(n=s.Rb()!=0,c[2]=n?1:0,c[5]=h.si.cq(s)?0:-1):(c[2]=0,c[5]=-1),d&&this.qK(c),this.hg(c,l)},o.HR=function(s,n,l){return o.ZP(s)?3:o.PP(s)?4:o.ZX(s,n,l)?8:o.xP(s,n,l)?16:o.$O(s)?1:o.zU(s,n,l)?32:0},o.ZP=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="F"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="F"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},o.PP=function(s){return s.charAt(0)=="F"&&s.charAt(1)=="F"&&s.charAt(2)=="*"&&s.charAt(3)=="F"&&s.charAt(4)=="F"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},o.ZX=function(s,n,l){return(n!=0||l!=0)&&((n!=2||l!=2)&&(s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="T"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"||n==1&&l==1&&s.charAt(0)=="F"&&s.charAt(1)=="T"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")||l!=0&&s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="T"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")},o.xP=function(s,n,l){return n>l?s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*":n==1&&l==1&&s.charAt(0)=="0"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},o.$O=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},o.zU=function(s,n,l){if(n==l){if(n!=1)return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*";if(s.charAt(0)=="1"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*")return!0}return!1},o.Lw=function(s,n,l){s=n.Ma(s);for(var c=n.Oe;c!=-1;c=n.Tf(c))if(n.yd(c)&s){var d=n.Je(c);if(d==-1)n.pn(c,l,0);else{var f=d,g=0;do n.fh(f)&s&&g++,f=n.kc(n.ya(f));while(f!=d);n.pn(c,l,g)}}},o.aq=function(s){var n=""+s.charAt(0);return n+=s.charAt(3),n+=s.charAt(6),n+=s.charAt(1),n+=s.charAt(4),n+=s.charAt(7),n+=s.charAt(2),(n+=s.charAt(5))+s.charAt(8)},o.prototype.$i=function(){for(var s=0;9>s;s++)this.J[s]=-2,this.$a[s]=-2},o.qK=function(s){var n=s[1],l=s[2],c=s[5];s[1]=s[3],s[2]=s[6],s[5]=s[7],s[3]=n,s[6]=l,s[7]=c},o.prototype.dj=function(s){for(this.Yc=s,s=0;9>s;s++)this.Yc.charAt(s)!="*"?(this.fa[s]=!0,this.me++):this.fa[s]=!1},o.prototype.PJ=function(){for(var s=0;9>s;s++)this.fa[s]&&this.J[s]==-2&&(this.J[s]=-1,this.fa[s]=!1)},o.prototype.qc=function(s){return this.J[s]!=-2&&(this.J[s]==-1?(this.fa[s]=!1,this.me--,!0):this.Yc.charAt(s)!="T"&&this.Yc.charAt(s)!="F"?!(this.J[s]<this.$a[s])&&(this.fa[s]=!1,this.me--,!0):(this.fa[s]=!1,this.me--,!0))},o.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.sN=function(s,n,l){var c=!0;return this.fa[0]&&(this.xS(s,n,l),c=c&&this.qc(0)),this.fa[1]&&(this.nG(s,n,1),c=c&&this.qc(1)),this.fa[2]&&(this.oG(s,n,l,2),c=c&&this.qc(2)),this.fa[3]&&(this.nG(s,l,3),c=c&&this.qc(3)),this.fa[4]&&(this.wN(s,n,l),c=c&&this.qc(4)),this.fa[5]&&(this.$D(s,l,5),c=c&&this.qc(5)),this.fa[6]&&(this.oG(s,l,n,6),c=c&&this.qc(6)),this.fa[7]&&(this.$D(s,n,7),c=c&&this.qc(7)),c},o.prototype.Eu=function(s,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(n,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},o.prototype.Hr=function(s,n,l,c,d){n==-1&&c==-1||((l!="T"&&l!="F"&&n!=-1||d!="T"&&d!="F"&&c!=-1)&&s.He()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(l=new h.l,s.A(l),this.J[n]=l.da()==0&&l.S()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.hy=function(s){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(s,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},o.prototype.UD=function(s){this.hy(s),o.qK(this.J)},o.prototype.Fu=function(s,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var l=this.Yc.charAt(6);l=l=="T"||l=="F"||n.Rb()!=0,this.J[6]=l?1:0}this.fa[7]&&(n=h.si.cq(n),this.J[7]=n?0:-1),this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.VD=function(s){if(this.fa[0]){var n=this.Yc.charAt(0);n=n=="T"||n=="F"||s.Rb()!=0,this.J[0]=n?1:0}this.fa[1]&&(s=h.si.cq(s),this.J[1]=s?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Gu=function(s){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(s,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.KG=function(s,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var l=this.Yc.charAt(2);l=l=="T"||l=="F"||s.Rb()!=0,this.J[2]=l?1:0}this.fa[5]&&(s=h.si.cq(s),this.J[5]=s?0:-1),this.fa[6]&&(l=(l=this.Yc.charAt(6))=="T"||l=="F"||n.Rb()!=0,this.J[6]=l?1:0),this.fa[7]&&(n=h.si.cq(n),this.J[7]=n?0:-1)},o.prototype.Qz=function(s){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var n=this.Yc.charAt(2);n=n=="T"||n=="F"||s.Rb()!=0,this.J[2]=n?1:0}this.fa[5]&&(s=h.si.cq(s),this.J[5]=s?0:-1),this.J[6]=0},o.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.tN=function(s,n,l){var c=!0;return this.fa[0]&&(this.yS(s,n),c=c&&this.qc(0)),this.fa[1]&&(this.uS(s,n,l,this.mh),c=c&&this.qc(1)),this.fa[2]&&(this.vS(s,n),c=c&&this.qc(2)),this.fa[3]&&(this.AN(s,n,l,this.mh),c=c&&this.qc(3)),this.fa[4]&&(this.xN(s,n,l,this.mh),c=c&&this.qc(4)),this.fa[5]&&(this.yN(s,n,l),c=c&&this.qc(5)),this.fa[6]&&(this.gQ(s,n),c=c&&this.qc(6)),this.fa[7]&&(this.fQ(s,n,l,this.mh),c=c&&this.qc(7)),c},o.prototype.hT=function(s,n,l){var c=!0;return this.fa[0]&&(this.BS(s,n,l,this.$h,this.mh),c=c&&this.qc(0)),this.fa[1]&&(this.pG(s,n,l,this.$h,this.mh,1),c=c&&this.qc(1)),this.fa[2]&&(this.qG(s,n,l,2),c=c&&this.qc(2)),this.fa[3]&&(this.pG(s,l,n,this.mh,this.$h,3),c=c&&this.qc(3)),this.fa[4]&&(this.CN(s,n,l,this.$h,this.mh),c=c&&this.qc(4)),this.fa[5]&&(this.aE(s,l,this.$h,5),c=c&&this.qc(5)),this.fa[6]&&(this.qG(s,l,n,6),c=c&&this.qc(6)),this.fa[7]&&(this.aE(s,n,this.mh,7),c=c&&this.qc(7)),c},o.prototype.WD=function(s,n,l){var c=!0;return this.fa[0]&&(this.zS(s,n),c=c&&this.qc(0)),this.fa[2]&&(this.wS(s,n),c=c&&this.qc(2)),this.fa[3]&&(this.BN(s,n,l),c=c&&this.qc(3)),this.fa[5]&&(this.zN(s,n),c=c&&this.qc(5)),this.fa[6]&&(this.hQ(s,n),c=c&&this.qc(6)),c},o.prototype.LG=function(s,n,l){var c=!0;return this.fa[0]&&(this.CS(s,n,l,this.$h),c=c&&this.qc(0)),this.fa[2]&&(this.AS(s,l),c=c&&this.qc(2)),this.fa[3]&&(this.EN(s,n,l,this.$h),c=c&&this.qc(3)),this.fa[5]&&(this.DN(s,n,l,this.$h),c=c&&this.qc(5)),this.fa[6]&&(this.iQ(s,n,l),c=c&&this.qc(6)),c},o.prototype.UU=function(s,n,l){var c=!0;return this.fa[0]&&(this.DS(s,n,l),c=c&&this.qc(0)),this.fa[2]&&(this.rG(s,n,l,2),c=c&&this.qc(2)),this.fa[6]&&(this.rG(s,l,n,6),c=c&&this.qc(6)),c},o.prototype.xS=function(s,n,l){this.J[0]!=2&&(s=this.j.af(s))&n&&s&l&&(this.J[0]=2)},o.prototype.nG=function(s,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.ya(s));this.j.af(s)&n&&c&n&&(this.J[l]=1)}},o.prototype.oG=function(s,n,l,c){this.J[c]!=2&&(s=this.j.af(s))&n&&!(s&l)&&(this.J[c]=2)},o.prototype.wN=function(s,n,l){if(this.J[4]!=1){var c=this.j.fh(s);c&n&&c&l?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.yd(this.j.vf(s)))&n&&s&l&&(this.J[4]=0)}},o.prototype.$D=function(s,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.ya(s));!(this.j.af(s)&n)&&!(c&n)&&(this.J[l]=1)}},o.prototype.yS=function(s,n){if(this.J[0]!=1){var l=this.j.af(this.j.ya(s));this.j.af(s)&n&&l&n&&(this.J[0]=1)}},o.prototype.uS=function(s,n,l,c){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var d=this.j.vf(s),f=this.j.yd(d);!(f&n)&&this.j.af(s)&n&&(s=this.j.og(d,c),f&l&&s%2!=0&&(this.J[1]=0))}},o.prototype.vS=function(s,n){this.J[2]!=2&&this.j.fh(s)&n&&(this.J[2]=2)},o.prototype.AN=function(s,n,l,c){if(this.J[3]!=1){var d=this.j.fh(s);d&n&&d&l?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(d=this.j.vf(s),(s=this.j.yd(d))&n&&(n=this.j.og(d,c),s&l&&n%2==0&&(this.J[3]=0)))}},o.prototype.xN=function(s,n,l,c){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var d=this.j.vf(s);(s=this.j.yd(d))&n&&(n=this.j.og(d,c),s&l&&n%2!=0&&(this.J[4]=0))}},o.prototype.yN=function(s,n,l){this.J[5]!=1&&(s=this.j.fh(s))&n&&!(s&l)&&(this.J[5]=1)},o.prototype.gQ=function(s,n){if(this.J[6]!=1){var l=this.j.af(this.j.ya(s));!(this.j.af(s)&n)&&!(l&n)&&(this.J[6]=1)}},o.prototype.fQ=function(s,n,l,c){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){var d=this.j.vf(s),f=this.j.yd(d);!(f&n)&&!(this.j.af(s)&n)&&(s=this.j.og(d,c),f&l&&s%2!=0&&(this.J[7]=0))}},o.prototype.BS=function(s,n,l,c,d){if(this.J[0]!=1){var f=this.j.fh(s);f&n&&f&l?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.vf(s),(f=this.j.yd(s))&n&&f&l&&(n=this.j.og(s,c),d=this.j.og(s,d),n%2==0&&d%2==0&&(this.J[0]=0)))}},o.prototype.pG=function(s,n,l,c,d,f){if(this.J[f]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){s=this.j.vf(s);var g=this.j.yd(s);g&n&&g&l&&(n=this.j.og(s,c),d=this.j.og(s,d),n%2==0&&d%2!=0&&(this.J[f]=0))}},o.prototype.qG=function(s,n,l,c){this.J[c]!=1&&(s=this.j.fh(s))&n&&!(s&l)&&(this.J[c]=1)},o.prototype.CN=function(s,n,l,c,d){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1){s=this.j.vf(s);var f=this.j.yd(s);f&n&&f&l&&(n=this.j.og(s,c),d=this.j.og(s,d),n%2!=0&&d%2!=0&&(this.J[4]=0))}},o.prototype.aE=function(s,n,l,c){this.J[c]!=0&&this.j.Bb(this.j.ue(this.j.ya(s)),this.Wi)!=1&&(s=this.j.vf(s),!(this.j.yd(s)&n)&&this.j.og(s,l)%2!=0&&(this.J[c]=0))},o.prototype.zS=function(s,n){this.J[0]!=0&&!(this.j.yd(s)&n)&&this.j.jk(this.j.Yy(s))&n&&(this.J[0]=0)},o.prototype.wS=function(s,n){this.J[2]!=2&&this.j.yd(s)&n&&(this.J[2]=2)},o.prototype.BN=function(s,n,l){this.J[3]!=0&&(s=this.j.yd(s))&n&&s&l&&(this.J[3]=0)},o.prototype.zN=function(s,n){this.J[5]!=1&&this.j.yd(s)&n&&(this.J[5]=1)},o.prototype.hQ=function(s,n){this.J[6]!=0&&!(this.j.yd(s)&n)&&!(this.j.jk(this.j.Yy(s))&n)&&(this.J[6]=0)},o.prototype.CS=function(s,n,l,c){if(this.J[0]!=0){var d=this.j.yd(s);d&n&&d&l&&this.j.og(s,c)%2==0&&(this.J[0]=0)}},o.prototype.AS=function(s,n){this.J[2]!=1&&(this.j.Je(s)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.yd(s)&n)&&(this.J[2]=0))},o.prototype.EN=function(s,n,l,c){if(this.J[3]!=0){var d=this.j.yd(s);d&n&&d&l&&this.j.og(s,c)%2!=0&&(this.J[3]=0)}},o.prototype.DN=function(s,n,l,c){if(this.J[5]!=0){var d=this.j.yd(s);d&n&&!(d&l)&&this.j.og(s,c)%2!=0&&(this.J[5]=0)}},o.prototype.iQ=function(s,n,l){this.J[6]!=0&&!((s=this.j.yd(s))&n)&&s&l&&(this.J[6]=0)},o.prototype.DS=function(s,n,l){this.J[0]!=0&&(s=this.j.yd(s))&n&&s&l&&(this.J[0]=0)},o.prototype.rG=function(s,n,l,c){this.J[c]!=0&&(s=this.j.yd(s))&n&&!(s&l)&&(this.J[c]=0)},o.prototype.Dp=function(s,n){var l=!1;s=this.j.Ma(s),n=this.j.Ma(n),this.Wi=this.j.bh();for(var c=this.j.Oe;c!=-1;c=this.j.Tf(c)){var d=this.j.Je(c);if(d==-1){if(this.Um!=-1)switch(this.Um){case 3:l=this.WD(c,s,n);break;case 4:l=this.LG(c,s,n);break;default:throw h.i.ga("internal error")}}else{var f=d;do{var g=f;if(this.j.Bb(g,this.Wi)!=1)do{switch(this.xw){case 0:l=this.sN(g,s,n);break;case 1:l=this.tN(g,s,n);break;case 2:l=this.hT(g,s,n);break;default:throw h.i.ga("internal error")}if(l)break;this.j.Kb(g,this.Wi,1),g=this.j.kc(g)}while(g!=f&&!l);if(l)break;f=this.j.kc(this.j.ya(g))}while(f!=d);if(l)break}}l||this.PJ(),this.j.Lg(this.Wi)},o.prototype.By=function(s,n){var l=!1;s=this.j.Ma(s),n=this.j.Ma(n);for(var c=this.j.Oe;c!=-1;c=this.j.Tf(c)){switch(this.Um){case 3:l=this.WD(c,s,n);break;case 4:l=this.LG(c,s,n);break;case 5:l=this.UU(c,s,n);break;default:throw h.i.Ra()}if(l)break}l||this.PJ()},o.prototype.gr=function(s,n){this.j.fr(s,n)},o.prototype.Yo=function(s,n,l){this.TP(s,n,l),this.gr(s,l)},o.prototype.TP=function(s,n,l){for(h.Vk.W(s,n,l,!1),s.Ip(0,!0,!0),n=s.md;n!=-1;n=s.ve(n))s.jc(n)==1736&&h.tn.W(s,n,-1,!1,l)},o.RE=function(s,n){var l=s.K();return h.ba.zd(l)?((n=new h.Ua(s.description)).pc(s,!0),n):l==197?(l=new h.l,s.A(l),l.da()<=n&&l.S()<=n?(n=new h.Ta(s.description),s.tf(n),n):l.da()<=n||l.S()<=n?(n=new h.Ua(s.description),l=new h.Ta,s.If(0,l),n.nf(l),s.If(2,l),n.lineTo(l),n):((n=new h.Ea(s.description)).bd(s,!1),n)):s},o}(),h.cm=k}(U||(U={})),function(h){var k=function(){function o(s){this.Gm=new h.ja(0),this.fw=new h.ja(0),this.xt=new h.h,this.yt=new h.h,this.g=s,this.Js=-1}return o.prototype.cc=function(s){return this.g.cc(this.uz(s))},o.prototype.Dv=function(s){var n=this.dz(s);if(s=this.CF(s),this.g.Na(n)==s){var l=n;n=s,s=l}return this.g.Hc(n,this.xt),this.g.Hc(s,this.yt),this.xt.y<this.yt.y},o.prototype.uz=function(s){var n=this.dz(s);return s=this.CF(s),this.g.V(n)==s?n:s},o.prototype.dz=function(s){return this.Gm.get(s)},o.prototype.CF=function(s){return this.fw.get(s)},o.prototype.mF=function(s){this.Gm.set(s,this.Js),this.Js=s},o.prototype.iI=function(s){if(this.Js!=-1){var n=this.Js;return this.Js=this.Gm.get(n),this.Gm.set(n,s),this.fw.set(n,this.g.V(s)),n}return this.Gm==null&&(this.Gm=new h.ja(0),this.fw=new h.ja(0)),n=this.Gm.size,this.Gm.add(s),this.fw.add(this.g.V(s)),n},o.prototype.mz=function(s){return this.g.cd(this.dz(s))},o}();h.uY=k;var b=function(){function o(s){this.Ce=s,this.je=new h.zb,this.Pm=new h.zb,this.xH=0,this.Co=null,this.tA=-1}return o.prototype.compare=function(s,n,l){l=s.ka(l);var c=this.Ce.hb;if(this.tA==n)var d=this.xH;else this.Co=c.cc(n),this.Co==null?((s=c.g).fd(c.uz(n),this.je),this.Co=this.je,d=this.je.Me(this.Ce.Ah,0)):d=this.Co.Me(this.Ce.Ah,0),this.xH=d,this.tA=n;if((s=c.cc(l))==null){(s=c.g).fd(c.uz(l),this.Pm),s=this.Pm;var f=this.Pm.Me(this.Ce.Ah,0)}else f=s.Me(this.Ce.Ah,0);return d==f&&(n=c.Dv(n),l=c.Dv(l),(n=.5*((l=Math.min(n?this.Co.ma:this.Co.oa,l?s.ma:s.oa))+this.Ce.Ah))==this.Ce.Ah&&(n=l),d=this.Co.Me(n,0),f=s.Me(n,0)),d<f?-1:d>f?1:0},o.prototype.reset=function(){this.tA=-1},o}(),u=function(){function o(){this.Ym=this.Il=null,this.fb=new h.$j,this.fb.MP(),this.ae=new b(this),this.fb.Xo(this.ae)}return o.prototype.CQ=function(){var s=!1;if(this.hw&&(s=this.DQ()),this.g.ea(this.Y)==1){var n=this.g.Ob(this.Y);return s=this.g.qz(n),this.g.KB(n,!0),0>s&&(s=this.g.Ya(n),this.g.kJ(s),this.g.Yg(n,this.g.Na(s)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),n=this.g.Ob(this.Y);n!=-1;n=this.g.Sb(n))this.g.ir(n,this.Gl,0),this.g.ir(n,this.yo,-1);n=new h.ja(0),this.Ah=NaN;var l=new h.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var c=this.Il.sc(this.Il.ke);c!=-1;c=this.Il.lb(c)){var d=this.Il.getData(c);if(this.g.Hc(d,l),l.y!=this.Ah&&n.size!=0&&(s=this.vt(n)||s,this.ae.reset(),n.clear(!1)),n.add(d),this.Ah=l.y,this.ft==0)break}for(0<this.ft&&(s=this.vt(n)||s,n.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),n=this.g.Ob(this.Y);n!=-1;)if(this.g.uj(n,this.Gl)==3){for(this.g.KB(n,!0),l=n,n=this.g.uj(n,this.yo);n!=-1;)c=this.g.uj(n,this.yo),this.g.UT(this.Y,this.g.Sb(l),n),l=n,n=c;n=this.g.Sb(l)}else this.g.KB(n,!1),n=this.g.Sb(n);return this.g.xB(this.Gl),this.g.xB(this.yo),s},o.prototype.vt=function(s){return this.VV(s)},o.prototype.VV=function(s){var n=!1;this.hb==null&&(this.hb=new k(this.g)),this.Ym==null?(this.Ym=new h.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(s);for(var l=0,c=s.size;l<c;l++){var d=s.get(l);d!=-1&&this.jG(d,-1)}for(l=0;l<this.Ym.size&&0<this.ft;l++)if(s=this.Ym.get(l),d=this.hb.mz(this.fb.ka(s)),c=-1,this.g.uj(d,this.Gl)==0){d=this.fb.xe(s);for(var f,g=s;d!=-1;){var w=this.fb.ka(d),$=this.hb.mz(w),T=this.g.uj($,this.Gl);if(T!=0){c=$;break}g=d,d=this.fb.xe(d)}d==-1?(f=!0,d=g):(w=this.fb.ka(d),f=this.hb.Dv(w),d=this.fb.lb(d),f=!f);do{if(w=this.fb.ka(d),$=this.hb.mz(w),(T=this.g.uj($,this.Gl))==0&&(f!=this.hb.Dv(w)&&(n=this.g.Ya($),this.g.kJ(n),this.g.Yg($,this.g.Na(n)),n=!0),this.g.ir($,this.Gl,f?3:2),f||(g=this.g.uj(c,this.yo),this.g.ir(c,this.yo,$),this.g.ir($,this.yo,g)),this.ft--,this.ft==0))return n;c=$,g=d,d=this.fb.lb(d),f=!f}while(g!=s)}return n},o.prototype.UV=function(s){for(var n=0,l=s.size;n<l;n++){var c=s.get(n),d=this.g.Qa(c,this.to),f=this.g.Qa(c,this.Ts);if(d!=-1){var g=this.fb.ka(d);this.hb.mF(g),this.g.Sa(c,this.to,-1)}f!=-1&&(g=this.fb.ka(f),this.hb.mF(g),this.g.Sa(c,this.Ts,-1)),g=-1,d!=-1&&f!=-1?(this.fb.wd(d,-1),this.fb.wd(f,-1),s.set(n,-1)):g=d!=-1?d:f,g!=-1&&(this.jG(c,g)||this.fb.wd(g,-1),s.set(n,-1))}},o.prototype.jG=function(s,n){var l=new h.h,c=new h.h;this.g.Hc(s,l);var d=this.g.V(s);this.g.Hc(d,c);var f=!1;if(l.y<c.y){f=!0;var g=this.hb.iI(s);if(n==-1)var w=this.fb.addElement(g,-1);else w=n,this.fb.Uj(w,g);(g=this.g.Qa(d,this.to))==-1?this.g.Sa(d,this.to,w):this.g.Sa(d,this.Ts,w),d=this.g.cd(s),this.g.uj(d,this.Gl)==0&&this.Ym.add(w)}return d=this.g.Na(s),this.g.Hc(d,c),l.y<c.y&&(f=!0,g=this.hb.iI(d),n==-1?w=this.fb.addElement(g,-1):(w=n,this.fb.Uj(w,g)),(g=this.g.Qa(d,this.to))==-1?this.g.Sa(d,this.to,w):this.g.Sa(d,this.Ts,w),d=this.g.cd(s),this.g.uj(d,this.Gl)==0&&this.Ym.add(w)),f},o.W=function(s,n,l,c){var d=new o;return d.g=s,d.Y=n,d.Il=l,d.hw=c,d.CQ()},o.prototype.DQ=function(){var s=new h.ja(0),n=new h.ja(0),l=-1,c=-1,d=new h.h;d.Sc();for(var f=-1,g=-1,w=-1,$=new h.h,T=this.Il.sc(this.Il.ke);T!=-1;T=this.Il.lb(T)){var E=this.Il.getData(T);this.g.Hc(E,$);var O=this.g.cd(E);d.rb($)&&g==O?(c==-1&&(l=this.g.Fy(),c=this.g.Hd()),w==-1&&(w=n.size,this.g.Sa(f,c,w),n.add(1),this.g.uj(O,l)==-1&&(this.g.ir(O,l,f),s.add(O))),this.g.Sa(E,c,w),n.XW(n.Gc()+1)):(w=-1,d.N($)),f=E,g=O}if(s.size==0)return!1;for(d=new h.ja(0),f=new h.ja(0),g=0,w=s.size;g<w;g++){O=s.get(g);var P=this.g.uj(O,l);for(E=this.g.Qa(P,c),d.clear(!1),f.clear(!1),d.add(P),f.add(E),E=this.g.V(P);E!=P;E=this.g.V(E)){var R=E;if(($=this.g.Qa(R,c))!=-1)if(f.size==0)f.add($),d.add(R);else if(f.Gc()==$){T=d.Gc();var F=this.g.V(T);P=this.g.V(R),this.g.Cc(T,P),this.g.Dc(P,T),this.g.Cc(R,F),this.g.Dc(F,R),R=[!1],F=this.g.iG(this.Y,F,this.g.Ya(O),R),this.g.Sa(E,c,-1),R[0]&&this.g.Kf(O,P),E=this.g.Ka(O),E-=P=this.g.Ka(F),this.g.Xj(O,E),n.set($,n.get($)-1),n.get($)==1&&(n.set($,0),f.Jf(),d.Jf()),E=P=T}else d.add(E),f.add($)}}return this.g.xB(l),this.g.Ud(c),!0},o}();h.RL=u}(U||(U={})),function(h){var k=function(){function b(){}return b.prototype.jg=function(){this.KA=this.tb=null},b.prototype.get=function(){return this.KA},b.prototype.set=function(u){if(this.KA=u,u!=null)throw u.K()==322&&(this.tb=u),h.i.Ra()},b.prototype.create=function(u){if(u!=322)throw h.i.ga("Not Implemented");this.Qr()},b.prototype.Qr=function(){this.tb==null&&(this.tb=new h.zb),this.KA=this.tb},b}();h.jg=k}(U||(U={})),function(h){(h=h.SL||(h.SL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(U||(U={})),function(h){var k=function(u){this.bj=u,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},b=function(){function u(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new h.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return u.prototype.rB=function(o){if(o!=null){for(var s=0,n=o.length;s<n;s++)this.mW(o[s]);o.length=0}},u.prototype.mW=function(o){o.bj=null,this.Kq.push(o)},u.prototype.Qw=function(o){if(this.Kq.length===0)var s=new k(o);else(s=this.Kq[this.Kq.length-1]).bj=o,--this.Kq.length;return s},u.prototype.NR=function(o,s){return o==0?this.bt[s]:this.Aw[s]},u.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new h.jg);var o=this.HA[this.Ew];return this.Ew++,o},u.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},u.prototype.Qo=function(o){this.oo.push(this.Qw(o))},u.prototype.ql=function(o){return o==0?this.bt.length:this.Aw.length},u.prototype.Xp=function(o,s){return this.NR(o,s).bj},u.prototype.Fa=function(o,s){if(this.oo.length!=2)throw h.i.Ra();this.ra=o;var n=h.mc.ox(.01*o),l=!1,c=this.oo[0],d=this.oo[1];if(s||5&c.bj.Br(d.bj,o,!0)){if(c.bj.K()==322){var f=c.bj;if(d.bj.K()==322){s=d.bj;var g=h.zb.Yx(f,s,null,this.Hq,this.Dk,o);if(g==0)throw h.zb.Yx(f,s,null,this.Hq,this.Dk,o),h.i.Ra();o=Array(9),h.P.bv(o,null);for(var w=0;w<g;w++){var $=this.Hq[w],T=this.Dk[w],E=c.nB,O=1;$==0?(E=c.oB,O=c.mC):$==1&&(E=c.mB,O=c.lC);var P=d.nB,R=1;T==0?(P=d.oB,R=d.mC):T==1&&(P=d.mB,R=d.lC);var F=new h.h;E==P?(E=new h.h,f.ic($,E),$=new h.h,s.ic(T,$),R/=T=O+R,h.mc.JG(E,$,R,F),h.h.zc(F,E)+h.h.zc(F,$)>n&&(l=!0)):E>P?(f.ic($,F),$=new h.h,s.ic(T,$),h.h.zc(F,$)>n&&(l=!0)):(s.ic(T,F),E=new h.h,f.ic($,E),h.h.zc(F,E)>n&&(l=!0)),o[w]=F}for(c=0,d=-1,w=0;w<=g;w++)(R=w<g?this.Hq[w]:1)!=c&&(n=this.WA(),f.dh(c,R,n),d!=-1&&n.get().Ec(o[d]),w!=g&&n.get().Rc(o[w]),c=R,this.bt.push(this.Qw(n.get()))),d=w;for(f=[0,0,0,0,0,0,0,0,0],w=0;w<g;w++)f[w]=w;for(1<g&&this.Dk[0]>this.Dk[1]&&(R=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=R,w=f[0],f[0]=f[1],f[1]=w),c=0,d=-1,w=0;w<=g;w++)(R=w<g?this.Dk[w]:1)!=c&&(n=this.WA(),s.dh(c,R,n),d!=-1&&(c=f[d],n.get().Ec(o[c])),w!=g&&(c=f[w],n.get().Rc(o[c])),c=R,this.Aw.push(this.Qw(n.get()))),d=w;return l}}throw h.i.Ra()}return!1},u.prototype.Fz=function(o,s,n){if(s.copyTo(this.Cf),this.oo.length!=1)throw h.i.Ra();this.ra=o;var l=this.oo[0];if(n||l.bj.tu(s.D(),o,!0)){if(l.bj.K()!=322)throw h.i.Ra();var c=(o=l.bj).ge(s.D(),!1);this.Hq[0]=c;var d=l.nB;for(n=1,c==0?(d=l.oB,n=l.mC):c==1&&(d=l.mB,n=l.lC),l=new h.h,d==0?(d=new h.h,o.ic(c,d),s=s.D(),h.mc.JG(d,s,1/(n+1),l)):0<d?(l=new h.h,o.ic(c,l)):l=s.D(),n=0,c=-1,d=0;1>=d;d++){if((s=1>d?this.Hq[d]:1)!=n){var f=this.WA();o.dh(n,s,f),c!=-1&&f.get().Ec(l),d!=1&&f.get().Rc(l),n=s,this.bt.push(this.Qw(f.get()))}c=d}this.Cf.Db(l)}},u}();h.OC=b}(U||(U={})),function(h){var k=function(){function b(u){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=u,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new h.h}return b.prototype.wW=function(u){if(this.ib!=u.ib)throw h.i.Hb();this.Af=u.Af,this.Kd=u.Kd,this.gb=u.gb,this.El=u.El,this.cg=u.cg,this.Bm=u.Bm,this.tk=null},b.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw h.i.de();this.Kd++}return this.tk},b.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw h.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},b.prototype.xW=function(){this.Af=-1,this.Kd=0},b.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},b.prototype.Wb=function(u,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.ea()){var s=this.DM();if(u>=s&&u<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=u-s)}o=0<=o&&o<this.ib.ea()&&u>=this.ib.Ca(o)&&u<this.ib.Wc(o)?o:this.ib.nz(u),this.El=o+1,this.gb=o,this.Af=-1,this.Kd=u-this.ib.Ca(o),this.cg=this.Vx(o),this.ib.Ca(this.gb),this.ib.ec(this.gb)},b.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},b.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},b.prototype.Vx=function(u){if(this.ib.Bc())return 0;var o=1;return this.ib.ec(u)&&(o=0),this.ib.Ka(u)-o},b.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},b.prototype.EB=function(){this.Bm=!0},b.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},b.prototype.DM=function(){return this.ib.Ca(this.gb)},b.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},b.prototype.xm=function(){return this.Af==0},b.prototype.Sn=function(){return this.Af==this.cg-1},b.prototype.Ia=function(){return this.Kd<this.cg},b.prototype.zz=function(){return 0<this.Kd},b.prototype.Qf=function(){var u=new b(this.ib);return u.Af=this.Af,u.Kd=this.Kd,u.cg=this.cg,u.gb=this.gb,u.El=this.El,u.ib=this.ib,u.Bm=this.Bm,u},b.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw h.i.de();this.Af=this.Kd;var u=this.xb();this.ib.oc();var o=this.ib.Se,s=1;switch(o!=null&&(s=7&o.read(u)),o=this.ib.description,s){case 1:this.tb==null&&(this.tb=new h.zb),this.tk=this.tb;break;case 2:throw h.i.ga("internal error");default:throw h.i.Ra()}this.tk.Pf(o),s=this.kk(),this.ib.Hc(u,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(s,this.Fs),this.tk.Rc(this.Fs);for(var n=1,l=o.Ba;n<l;n++)for(var c=o.ld(n),d=h.sa.Wa(c),f=0;f<d;f++){var g=this.ib.Vc(c,u,f);this.tk.TB(c,f,g),g=this.ib.Vc(c,s,f),this.tk.JB(c,f,g)}},b.prototype.VS=function(){return this.gb==this.ib.ea()-1},b.prototype.Rn=function(){var u=this.ib.QR();return u!=null&&(7&u.read(this.Af))!=1},b}();h.TL=k}(U||(U={})),function(h){var k=function(){function b(u){u instanceof h.ba?(this.sH=u,this.za=-1,this.Gi=1):(this.qT=u.slice(0),this.za=-1,this.Gi=u.length)}return b.prototype.Ma=function(){return this.za},b.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},b.prototype.re=function(){},b}();h.$c=k}(U||(U={})),function(h){var k=function(){this.next=null},b=function(){function u(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return u.prototype.wX=function(o,s,n){this.ri=o,this.rl=s,this.Lh=this.Yl=null,this.Vq=0,this.qy=n,this.jn==null&&(this.jn=h.P.mg(384,0)),this.iK()},u.prototype.S=function(){return this.ri},u.prototype.da=function(){return this.rl},u.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},u.prototype.iK=function(){if(0<this.Vq){for(var o=0;o<this.rl;o++){for(var s=this.Yl[o];s!=null;){var n=s;s=s.next,n.next=null}this.Yl[o]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},u.prototype.dJ=function(o){for(this.fF=o==u.Bx,o=this.Nw;o<=this.Mw;o++)this.nN(),this.gN(o),this.UP();this.iK()},u.prototype.fy=function(o,s,n,l){if(s!=l){var c=1;if(s>l&&(c=o,o=n,n=c,c=s,s=l,l=c,c=-1),!(0>l||s>=this.rl)){0>o&&0>n?n=o=-1:o>=this.ri&&n>=this.ri&&(n=o=this.ri);var d=(n-o)/(l-s);l>this.rl&&(n=d*((l=this.rl)-s)+o),0>s&&(o=d*(0-s)+o,s=0);var f=Math.max(this.ri+1,8388607);-8388607>o?(s=(0-o)/d+s,o=0):o>f&&(s=(this.ri-o)/d+s,o=this.ri),-8388607>n?l=(0-o)/d+s:n>f&&(l=(this.ri-o)/d+s),(s=h.P.truncate(s))!=(l=h.P.truncate(l))&&((n=new k).x=h.P.truncate(4294967296*o),n.y=s,n.H=l,n.RP=h.P.truncate(4294967296*d),n.dir=c,this.Yl==null&&(this.Yl=h.P.mg(this.rl,null)),n.next=this.Yl[n.y],this.Yl[n.y]=n,n.y<this.Nw&&(this.Nw=n.y),n.H>this.Mw&&(this.Mw=n.H),this.Vq++)}}},u.prototype.nN=function(){if(this.Lh!=null){for(var o=!1,s=null,n=this.Lh;n!=null;)if(n.y++,n.y==n.H){var l=n;n=n.next,s!=null?s.next=n:this.Lh=n,l.next=null}else n.x+=n.RP,s!=null&&s.x>n.x&&(o=!0),s=n,n=n.next;o&&(this.Lh=this.aK(this.Lh))}},u.prototype.gN=function(o){if(!(o>=this.rl)){var s=this.Yl[o];if(s!=null){this.Yl[o]=null,s=this.aK(s),this.Vq-=this.bK,o=this.Lh;for(var n=!0,l=s,c=null;o!=null&&l!=null;)o.x>l.x?(n&&(this.Lh=l),n=l.next,l.next=o,c!=null&&(c.next=l),c=l,l=n):(n=o.next,o.next=l,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Lh==null&&(this.Lh=s)}}},u.$J=function(o,s){return 0>o?0:o>s?s:o},u.prototype.UP=function(){if(this.Lh!=null){for(var o=0,s=this.Lh,n=h.P.truncate(h.P.SG(s.x)),l=s.next;l!=null;l=l.next)if(o=this.fF?1^o:o+l.dir,l.x>s.x){var c=h.P.truncate(h.P.SG(l.x));o!=0&&(s=u.$J(n,this.ri),(n=u.$J(c,this.ri))>s&&s<this.ri&&(this.jn[this.Ql++]=s,this.jn[this.Ql++]=n,this.jn[this.Ql++]=l.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),s=l,n=c}}},u.prototype.aK=function(o){for(var s=0,n=o;n!=null;n=n.next)s++;if(this.bK=s,s==1)return o;this.Lf==null?this.Lf=h.P.mg(Math.max(s,16),null):this.Lf.length<s&&(this.Lf=h.P.mg(Math.max(s,2*this.Lf.length),null));var l=0;for(n=o;n!=null;n=n.next)this.Lf[l++]=n;for(s==2?this.Lf[0].x>this.Lf[1].x&&(o=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=o):u.vN(this.Lf,s,function(c,d){return c==d?0:c.x<d.x?-1:c.x>d.x?1:0}),o=this.Lf[0],this.Lf[0]=null,n=o,l=1;l<s;l++)n.next=this.Lf[l],n=this.Lf[l],this.Lf[l]=null;return n.next=null,o},u.vN=function(o,s,n){if(s==o.length)o.sort(n);else{var l=o.slice(0,0),c=o.slice(s);s=o.slice(0,s).sort(n),o.length=0,o.push.apply(o,l.concat(s).concat(c))}},u.Bx=0,u}();h.Ox=b}(U||(U={})),function(h){var k=function(){function b(){}return b.prototype.wi=function(u,o){var s=this.g.Qa(u,this.Rq);if(this.Fl==s&&(this.Fl=this.pe.lb(this.Fl)),this.jo==s&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,s),this.dk(u),o&&(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u){var n=this.g.V(u);if(n!=u){if((s=this.g.cd(n))==o)return void this.g.Kf(o,n);if((n=this.g.Na(u))!=u&&(s=this.g.cd(n))==o)return void this.g.Kf(o,n)}this.g.Kf(o,-1),this.g.Yg(o,-1)}},b.prototype.kD=function(){for(var u=!1,o=new h.h;;){this.Yh==null?(this.Yh=new h.ja(0),this.Bs=new h.ja(0),this.ye=new h.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var s=this.jo,n=0,l=!0;s!=this.Fl;){var c=this.pe.getData(s),d=new h.h;this.g.Hc(c,d),l&&(this.g.Hc(c,o),l=!1),d=this.g.Na(c);var f=this.g.V(c);this.g.Qa(d,this.Ag)!=-559038737&&(this.Yh.add(d),this.g.Sa(d,this.Ag,-559038737),this.Bs.add(c),this.ye.add(n++)),this.g.Qa(f,this.Ag)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.Ag,-559038737),this.Bs.add(c),this.ye.add(n++)),s=this.pe.lb(s)}if(2>this.Yh.size)break;var g=this;for(this.ye.Wd(0,this.ye.size,function(w,$){return g.kM(w,$)}),s=0,n=this.ye.size;s<n;s++)l=this.ye.get(s),l=this.Yh.get(l),this.g.Sa(l,this.Ag,s),d=new h.h,this.g.Hc(l,d);for(d=this.OM(o),s=0,n=this.ye.size;s<n;s++)(l=this.ye.get(s))!=-1&&(l=this.Yh.get(l),this.g.Sa(l,this.Ag,-1));if(!d)break;u=!0}return u},b.prototype.OM=function(u){for(var o=!1,s=!0;s;){s=!1;var n=0;this.ye.get(n)==-1&&(n=this.em(n));for(var l=this.em(n),c=0,d=this.ye.size;c<d&&n!=-1&&l!=-1&&n!=l;c++){var f=this.ye.get(n);l=this.ye.get(l),f=this.Yh.get(f),l=this.Yh.get(l);var g=this.g.V(f);this.g.Fv(g,u)||(g=this.g.Na(f));var w=this.g.V(l);this.g.Fv(w,u)||(w=this.g.Na(l));var $=this.ru(g,f),T=this.ru(w,l),E=$?this.g.Na(g):this.g.V(g),O=T?this.g.Na(w):this.g.V(w),P=!1;(this.up(g)||this.up(w)||this.up(f)||this.up(l)||this.up(E)||this.up(O))&&(P=!0),!P&&this.g.hq(f,l)&&(P=!0,this.oD($,T,g,f,w,l)),!P&&this.g.hq(E,O)&&(P=!0,this.oD(!$,!T,g,E,w,O)),P&&(o=!0),s=s||P,n=this.em(n),l=this.em(n)}}if(!o)for(n=0,this.ye.get(n)==-1&&(n=this.em(n)),l=this.em(n),c=0,d=this.ye.size;c<d&&n!=-1&&l!=-1&&n!=l;c++)f=this.ye.get(n),l=this.ye.get(l),f=this.Yh.get(f),l=this.Yh.get(l),g=this.g.V(f),this.g.Fv(g,u)||(g=this.g.Na(f)),w=this.g.V(l),this.g.Fv(w,u)||(w=this.g.Na(l)),$=this.ru(g,f),T=this.ru(w,l),E=$?this.g.Na(g):this.g.V(g),O=T?this.g.Na(w):this.g.V(w),this.yM($,T,f,g,E,l,w,O)&&(o=!0),n=this.em(n),l=this.em(n);return o},b.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new h.Hg().HU(this.hw,this.g,this.Y,this.od);var u=!1,o=!0;this.Ag=this.Rq=-1;var s=this.g.I(this.Y),n=new h.ja(0);n.Jb(s);for(var l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l))for(var c=this.g.Ya(l),d=0,f=this.g.Ka(l);d<f;d++)n.add(c),c=this.g.V(c);var g=this.g.ud.o,w=this.g.ud.Mf;this.g.wb.oc();var $=this.g.wb.Aa[0].o;for(n.Wd(0,s,function(E,O){var P=g[w*E],R=g[w*O],F=$[2*P];P=$[2*P+1];var V=$[2*R];return(F=P<(R=$[2*R+1])?-1:P>R?1:F<V?-1:F>V?1:0)==0&&(F=(E=g[w*E+3])<(O=g[w*O+3])?-1:E==O?0:1),F}),this.Rq=this.g.Hd(),this.pe=new h.lp,this.MA=this.pe.Rh(0),this.pe.hn(s),l=0;l<s;l++)c=n.get(l),d=this.pe.addElement(this.MA,c),this.g.Sa(c,this.Rq,d);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(u=!0);o;){o=!1,s=0,n=!1;do{n=!1,this.jo=-1,f=0,l=new h.h,d=new h.h;for(var T=this.pe.sc(this.MA);T!=-1;)c=this.pe.getData(T),this.jo!=-1?(this.g.Hc(c,d),l.rb(d)?f++:(l.N(d),this.Fl=T,0<f&&(c=this.kD())&&(n=!0,this.Fl!=-1&&(c=this.pe.getData(this.Fl),this.g.Hc(c,l))),this.jo=T=this.Fl,f=0)):(this.jo=T,this.g.Hc(this.pe.getData(T),l),f=0),T!=-1&&(T=this.pe.lb(T));if(this.Fl=-1,0<f&&(c=this.kD())&&(n=!0),10<s++)throw h.i.Ra();n&&this.BM(),this.YC()&&(n=!0),o=o||n&&!1,u=u||n}while(n)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),h.RL.W(this.g,this.Y,this.pe,this.hw)||u},b.prototype.ru=function(u,o){return this.g.V(o)!=u},b.prototype.yM=function(u,o,s,n,l,c,d,f){if(n==d)return this.dk(s),this.dk(c),!1;var g=this.g.Qa(s,this.Ag),w=this.g.Qa(l,this.Ag),$=this.g.Qa(c,this.Ag),T=this.g.Qa(f,this.Ag),E=[0,0,0,0];for((s=[0,0,0,0,0,0,0,0])[0]=0,E[0]=g,s[1]=0,E[1]=w,s[2]=1,E[2]=$,s[3]=1,E[3]=T,g=1;4>g;g++){for(w=E[g],$=s[g],T=g-1;0<=T&&E[T]>w;)E[T+1]=E[T],s[T+1]=s[T],T--;E[T+1]=w,s[T+1]=$}return E=0,s[0]!=0&&(E|=1),s[1]!=0&&(E|=2),s[2]!=0&&(E|=4),s[3]!=0&&(E|=8),(E==5||E==10)&&(u==o?u?(this.g.Cc(f,n),this.g.Dc(n,f),this.g.Cc(l,d),this.g.Dc(d,l)):(this.g.Dc(f,n),this.g.Cc(n,f),this.g.Dc(l,d),this.g.Cc(d,l)):u?(this.g.Dc(n,c),this.g.Cc(c,n),this.g.Dc(d,l),this.g.Cc(l,d)):(this.g.Cc(n,c),this.g.Dc(c,n),this.g.Cc(d,l),this.g.Dc(l,d)),!0)},b.prototype.oD=function(u,o,s,n,l,c){this.IY?this.QM():this.PM(u,o,s,n,l,c)},b.prototype.QM=function(){throw h.i.ga("not implemented.")},b.prototype.PM=function(u,o,s,n,l,c){if(u!=o)u?(this.g.Cc(s,l),this.g.Dc(l,s),this.g.Cc(c,n),this.g.Dc(n,c),this.xn(l,s),this.wi(l,!0),this.g.oi(l,!0),this.dk(s),this.xn(c,n),this.wi(c,!0),this.g.oi(c,!1)):(this.g.Cc(l,s),this.g.Dc(s,l),this.g.Cc(n,c),this.g.Dc(c,n),this.xn(l,s),this.wi(l,!0),this.g.oi(l,!1),this.dk(s),this.xn(c,n),this.wi(c,!0),this.g.oi(c,!0)),this.dk(n);else{var d=u?s:n,f=o?l:c;for(u=u?n:s,o=o?c:l,l=!1,this.g.Cc(d,f),this.g.Cc(f,d),this.g.Dc(u,o),this.g.Dc(o,u),c=o;c!=f;)s=this.g.Na(c),n=this.g.V(c),this.g.Dc(c,n),this.g.Cc(c,s),l=l||c==d,c=n;l||(s=this.g.Na(f),n=this.g.V(f),this.g.Dc(f,n),this.g.Cc(f,s)),this.xn(f,d),this.wi(f,!0),this.g.oi(f,!1),this.dk(d),this.xn(o,u),this.wi(o,!0),this.g.oi(o,!1),this.dk(u)}},b.prototype.YC=function(){for(var u=!1,o=this.g.Ob(this.Y);o!=-1;){for(var s=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l&&1<l;){var c=this.g.Na(s),d=this.g.V(s);this.g.hq(c,d)?(u=!0,this.wi(s,!1),this.g.qd(s,!0),this.wi(d,!1),this.g.qd(d,!0),s=c,n=0,l=this.g.Ka(o)):(s=d,n++)}if(2>this.g.Ka(o)){for(u=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++)this.wi(u,!1),u=this.g.V(u);o=this.g.ar(o),u=!0}else o=this.g.Sb(o)}return u},b.prototype.up=function(u){for(var o=!1;;){var s=this.g.V(u),n=this.g.Na(u);if(s==u)return this.wi(u,!0),this.g.oi(u,!1),!0;if(!this.g.hq(s,n)||(o=!0,this.dk(n),this.dk(s),this.wi(u,!0),this.g.oi(u,!1),this.xn(s,n),this.wi(s,!0),this.g.oi(s,!0),s==n))break;u=n}return o},b.prototype.BM=function(){for(var u=0,o=this.pe.sc(this.pe.ke);o!=-1;o=this.pe.lb(o)){var s=this.pe.getData(o);this.g.cj(s,-1)}for(var n=0,l=this.g.Ob(this.Y);l!=-1;)if((o=this.g.Ya(l))==-1||this.g.cd(o)!=-1)s=l,l=this.g.Sb(l),this.g.br(s);else{this.g.cj(o,l);var c=1;for(s=this.g.V(o);s!=o;s=this.g.V(s))this.g.cj(s,l),c++;this.g.fp(l,!1),this.g.Xj(l,c),this.g.Yg(l,this.g.Na(o)),n+=c,u++,l=this.g.Sb(l)}for(o=this.pe.sc(this.pe.ke);o!=-1;o=this.pe.lb(o))s=this.pe.getData(o),this.g.cd(s)==-1&&(l=this.g.iG(this.Y,s,s,null),n+=this.g.Ka(l),u++);for(this.g.Tl(this.Y,u),this.g.Vj(this.Y,n),u=0,n=this.g.md;n!=-1;n=this.g.ve(n))u+=this.g.I(n);this.g.XB(u)},b.prototype.em=function(u){for(var o=0,s=this.ye.size-1;o<s;o++)if(u=(u+1)%this.ye.size,this.ye.get(u)!=-1)return u;return-1},b.prototype.xn=function(u,o){var s=this.g.Qa(o,this.Rq),n=this.g.Qa(o,this.Ag);this.g.gC(u,o),this.g.Sa(o,this.Rq,s),this.g.Sa(o,this.Ag,n)},b.prototype.dk=function(u){var o=this.g.Qa(u,this.Ag);o!=-1&&(this.ye.set(o,-1),this.g.Sa(u,this.Ag,-1))},b.W=function(u,o,s,n,l){var c=new b;return c.g=u,c.Y=o,c.sA=s,c.hw=n,c.od=l,c.SM()},b.prototype.kM=function(u,o){var s=this.Yh.get(u),n=new h.h;this.g.Hc(s,n),s=new h.h;var l=this.Yh.get(o);return this.g.Hc(l,s),n.rb(s)?0:(l=this.Bs.get(u),u=new h.h,this.g.Hc(l,u),l=this.Bs.get(o),o=new h.h,this.g.Hc(l,o),(l=new h.h).vc(n,u),(n=new h.h).vc(s,o),h.h.pu(l,n))},b}();h.tn=k}(U||(U={})),function(h){var k;(k=h.VL||(h.VL={}))[k.Local=0]="Local",k[k.Geographic=1]="Geographic",k[k.Projected=2]="Projected",k[k.Image=3]="Image",k[k.Unknown=4]="Unknown",function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"}(h.OL||(h.OL={}));var b=function(){function u(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return u.prototype.Fc=function(){return this.fg},u.prototype.QF=function(){return 1},u.prototype.QW=function(o){this.hA=o},u.prototype.Yd=function(){if(this.hA!==null)return this.hA;var o=.001;return this.fg!=0?o=h.yr.xQ(this.fg):this.yh!=null&&(o=h.SC.yQ(this.yh)),o},u.prototype.wz=function(){return this.yh},u.prototype.Id=function(){return this.fg!=0?h.Uc.ah(h.yr.Ny(this.fg)):this.yh!=null?h.SC.zQ(this.yh):void 0},u.Tb=function(o){if(o.fg!=0){if(h.yr.US(o.fg)===!0)return 1;if(h.yr.WS(o.fg)===!0)return 2}return 4},u.prototype.cs=function(){var o=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=h.yr.AK(o),this.Jo!=-1?this.Jo:o)},u.create=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var s=new u;return s.fg=o,s},u.lP=function(o){if(o==null||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var s=new u;return s.yh=o,s},u.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.fg==o.fg&&(this.fg!=0||this.yh===o.yh)},u.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},u.prototype.dc=function(){if(this.rp!=="")return this.rp;var o=this.toString();if(Array.prototype.reduce)return this.rp="S"+o.split("").reduce(function(l,c){return(l=(l<<5)-l+c.charCodeAt(0))&l},0);var s=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)s=(s<<5)-s+o.charCodeAt(n),s&=s;return this.rp="S"+s},u.prototype.Mn=function(){return this.Yd(0)},u.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=h.iu.tP(this)},u.UN=2147483645,u.VN=9007199254740990,u}();h.Gg=b}(U||(U={})),function(h){var k=function(b){function u(){var o=b!==null&&b.apply(this,arguments)||this;return o.Li=null,o.NT=null,o.Jq=new h.UL,o.Go=null,o.lw=null,o}return xt(u,b),u.tP=function(o){var s=new u;if(s.fg=o.fg,s.Jo=o.Jo,s.UH=o.UH,s.yh=o.yh,s.yh!==""&&s.yh!==null){o=u.fM(s.yh);var n=u.dM(s.yh);s.Jq.Wx(o,n,h.ju.Integer64),s.ay(o),s.cy(n),s.fg=o.cs()}else o=u.eM(s.fg),s.ay(o),s.cy(null),s.Jq.Wx(o,null,h.ju.Integer64);return s},u.prototype.Yd=function(o){return this.Jq.Mn(o)},u.dM=function(o){if(0>=o.length)throw h.i.O();var s=null;try{s=h.IC.fromString(o)}catch{s=null}return s==null?null:u.XC(s,!0)},u.prototype.ay=function(o){this.Ld=o,this.Go=this.Ld.Id()},u.prototype.cy=function(o){this.FH=o,this.NT=this.FH!=null?this.FH.Go:null},u.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},u.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},u.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},u.prototype.rm=function(){return this.Ld.rm()},u.prototype.bf=function(){return this.Ld.bf()},u.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},u.prototype.Wp=function(){return this.Ld.Wp()},u.prototype.Yr=function(){return this.Ld.Yr()},u.prototype.mk=function(){return this.Ld.mk()},u.prototype.fS=function(o){return h.JC.Ky(this.Ld,o.Ld)},u.prototype.ol=function(){return this.Ld.ol()},u.prototype.Xr=function(){return this.Ld.Xr()},u.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},u.prototype.ih=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.ih(o),o},u.prototype.Le=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.uo},u.prototype.CR=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.BR(o),o},u.prototype.rv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.rv()},u.prototype.qv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.qv()},u.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},u.prototype.KQ=function(){return this.Ld.kv()},u.prototype.Sp=function(){return this.Go.getUnitFactor()},u.prototype.pz=function(o){return this.Jq.pz(o)},u.prototype.tc=function(){var o=this.Tb();if(o==1)return this;if(o==3)return this.Li.hk().tc();if(o==0||o===4)throw h.i.ga("invalid call");if(this.lw!==null)return this.lw;if((o=this.gh().getGeogcs())==null)throw h.i.Ra();return this.lw=u.XE(o,this.Jq.QF())},u.XE=function(o,s){if(o==null)throw h.i.O("null pointer.");var n=new u;return o=u.ou(o,!0),n.Jq.Wx(o,null,s),n.ay(o),n.cy(null),n.fg=o.cs(),n},u.prototype.Tb=function(){var o=this.gh();if(o!=null)switch(o.getType()){case h.Tc.PE_TYPE_GEOGCS:return 1;case h.Tc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.kv=function(){return this.Ld.kv()},u.ou=function(o,s){var n=o.getCode();if(0>=n&&0<(n=h.qf.getCode(o))){if((o=h.qf.coordsys(n))==null)throw h.i.O("Text to wkid mapping had failed: "+n);return u.ou(o,s)}if(s&&0<n&&(s=u.qx[n]))return s;s=h.Ab.zv(o,n,!1);var l=u.gK[s];return l||(o=0>=n?o:h.qf.coordsys(n),o=new h.JC(o),u.gK[s]=o,0<n&&(u.qx[n]=o),o)},u.eM=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var s=u.qx[o];if(s!=null)return s;if((s=h.qf.coordsys(o))==null)throw h.i.O("Invalid or unsupported wkid: "+o);return(s=u.ou(s,!1)).cs()!=o&&(u.qx[o]=s),s},u.fM=function(o){if(o==null||o===void 0||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var s=null;try{s=h.qf.fromString(h.Tc.PE_TYPE_COORDSYS,o)}catch(n){throw h.i.O("Cannot create SpatialReference from text. "+n.message)}if(s===null)throw h.i.O("Cannot create SpatialReference from text. ");return u.ou(s,!0)},u.XC=function(o,s){var n,l=o.getCode();if(0>=l&&0<(l=h.qf.getCode(o))){if((l=h.qf.vertcs(l))===null)throw h.i.O();return u.XC(l,s)}if(s&&0<l&&(s=u.fK[l])||(o=h.Ab.zv(o,l,!1),s=u.hK[o]))return s;if(0>=l||(n=h.qf.vertcs(l)),n===null)throw h.i.O();return n=new h.KL(n),u.hK[o]=n,0<l&&(u.fK[l]=n),n},u.nI=function(o,s){if(s===null||s.B())return null;var n=new h.l;if(s!==null&&o.Tb()!=1){var l=o.tc(),c=l.gh();o=h.xr.Pr(o,l,null,null),(s=h.Gx.local().W(s,o,null)).A(n)}else c=o.gh(),s.A(n);return s=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new h.GC(n.v,n.G,n.C,n.H,s,c)},u.gD=function(o){var s={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var l=o[n],c={HY:!1,VY:"",UY:-1,geogtran:null};l.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var d=l.getGeogtran().getCode();-1<d?c.wkid=d:c.wkt=l.getGeogtran().toString(),s.steps.push(c)}return s},u.SR=function(o,s,n,l){return n===void 0&&(n=null),n=u.nI(l,n),o=h.np.getGTlist(o.gh(),s.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,n,1),s=null,o&&0<o.length&&(s=this.gD(o[0]),h.Lx.destroy(o)),n!==null&&n.destroy(),s},u.TR=function(o,s,n,l){var c;if(n===void 0&&(n=null),l===void 0&&(l=null),c===void 0&&(c=30),n=u.nI(l,n),o=h.np.getGTlist(o.gh(),s.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,n,c),s=[],o&&0<o.length){for(c=0;c<o.length;c++)s.push(this.gD(o[c]));h.Lx.destroy(o)}return n!==null&&n.destroy(),s},u.qx={},u.gK={},u.fK={},u.hK={},u}(h.Gg);h.iu=k}(U||(U={})),function(h){var k,b;(b=k=h.ju||(h.ju={}))[b.Integer32=0]="Integer32",b[b.Integer64=1]="Integer64",b[b.FloatingPoint=2]="FloatingPoint";var u=function(){function o(){this.sp()}return o.prototype.assign=function(s){this.Hm=s.Hm,this.Im=s.Im,this.Rj=s.Rj,this.nA=s.nA,this.Ho=s.Ho,this.mA=s.mA,this.Kk=s.Kk,this.Oq=s.Oq,this.Nq=s.Nq,this.Tm=s.Tm},o.prototype.QF=function(){return this.Tm},o.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=k.FloatingPoint},o.prototype.Wx=function(s,n,l){if(this.sp(),this.Tm=l,l!=k.FloatingPoint){var c=new h.l;s.cR(c),this.Hm=c.v,this.Im=c.G}else this.Im=this.Hm=-17976931348623157e292;(c=s.Re.getType())==h.Tc.PE_TYPE_GEOGCS?(c=(l==k.Integer64?1e-9:1/18e5)*s.bf(),this.Rj=1/c):c==h.Tc.PE_TYPE_PROJCS&&(c=(l==k.Integer64?1e-4:.001)*s.rm(),this.Rj=1/c),n!=null?(c=(l==k.Integer32?.001:1e-4)*n.DH,this.Ho=1/c):this.Ho=1e4,this.TM(),this.Kk=s.uw,this.Oq=n!=null?.001*n.DH:.001,this.Nq=2220446049250313e-29},o.prototype.TM=function(){if(this.Tm!=k.FloatingPoint){var s=this.Tm==k.Integer64?h.Gg.VN:h.Gg.UN,n=s/this.Rj,l=this.Hm+n,c=h.P.truncate((l-this.Hm)*this.Rj);c>s&&(this.Rj=s/(l-this.Hm)),n=this.Im+n,(c=h.P.truncate((n-this.Im)*this.Rj))>s&&(this.Rj=s/(n-this.Im))}},o.prototype.WB=function(s){switch(s){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},o.prototype.Mn=function(s){switch(s){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},o.prototype.pz=function(s){if(this.Tm==k.FloatingPoint)return 0;switch(s){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},o.prototype.toString=function(){var s="SRPD [m_toleranceXY: "+this.Kk.toString();return(s=(s=(s=(s=(s=(s=(s=(s=(s=s+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},o}();h.UL=u}(U||(U={})),function(h){function k(l,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function b(l,c,d){return l=l/6378137*57.29577951308232,d?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function u(l,c,d){var f=l.Qf();if(l.K()===33)c=c(f.Ng(),f.kh()),f.Db(c[0],c[1]);else if(l.K()===197){var g=c(l.gs(),l.js(),d);c=c(l.fs(),l.hs(),d),f.L(g[0],g[1],c[0],c[1])}else for(g=new h.h,l=0;l<f.I();l++){f.D(l,g);var w=c(g.x,g.y,d);g.na(w[0],w[1]),f.Db(l,g)}return f}function o(l){return u(l,b,!0)}function s(l){return u(l,k,!0)}var n=Math.PI/180;h.PK=function(){function l(){}return l.xu=function(c){var d=Math.sqrt(.006694379990197414),f=Math.sin(c.y*n);return h.h.construct(6378137*c.x*n,3.1677196636462314e6*(f/(1-.006694379990197414*f*f)-1/(2*d)*Math.log((1-d*f)/(1+d*f))))},l.Ux=function(c,d,f,g){var w=.0033528106647474805,$=Math.sin(f);f=Math.cos(f);var T=(1-w)*Math.tan(c),E=T*(c=1/Math.sqrt(1+T*T)),O=Math.atan2(T,f),P=(T=c*$)*T,R=1-P,F=27233160610754688e-5*R/4040829998466145e-2,V=1+F/16384*(4096+F*(F*(320-175*F)-768)),L=F/1024*(256+F*(F*(74-47*F)-128));F=g/(635675231424518e-8*V);for(var G,J,H,te=2*Math.PI;1e-12<Math.abs(F-te);)H=Math.cos(2*O+F),te=F,F=g/(635675231424518e-8*V)+L*(G=Math.sin(F))*(H+L/4*((J=Math.cos(F))*(2*H*H-1)-L/6*H*(4*G*G-3)*(4*H*H-3)));return g=E*G-c*J*f,R=w/16*R*(4+w*(4-3*R)),h.h.construct((d+(Math.atan2(G*$,c*J-E*G*f)-(1-R)*w*T*(F+R*G*(H+R*J*(2*H*H-1)))))/n,Math.atan2(E*J+c*G*f,(1-w)*Math.sqrt(P+g*g))/n)},l.HM=function(c,d,f,g){var w=.0033528106647474805,$=g-d,T=Math.atan((1-w)*Math.tan(c)),E=Math.atan((1-w)*Math.tan(f)),O=Math.sin(T);T=Math.cos(T);var P=Math.sin(E);E=Math.cos(E);var R=$,F=1e3;do{var V=Math.sin(R),L=Math.cos(R),G=Math.sqrt(E*V*E*V+(T*P-O*E*L)*(T*P-O*E*L));if(G===0)return 0;L=O*P+T*E*L;var J=Math.atan2(G,L),H=T*E*V/G,te=1-H*H;V=L-2*O*P/te,isNaN(V)&&(V=0);var Q=w/16*te*(4+w*(4-3*te)),ae=R;R=$+(1-Q)*w*H*(J+Q*G*(V+Q*L*(2*V*V-1)))}while(1e-12<Math.abs(R-ae)&&0<--F);return F===0?(O=g-d,{azimuth:Math.atan2(Math.sin(O)*Math.cos(f),Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(g-d))}):(d=(c=27233160610754688e-5*te/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2(E*Math.sin(R),T*P-O*E*Math.cos(R)),TQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(J-d*G*(V+d/4*(L*(2*V*V-1)-d/6*V*(4*G*G-3)*(4*V*V-3)))),TY:Math.atan2(T*Math.sin(R),T*P*Math.cos(R)-O*E)})},l.eQ=function(c){var d=c.hasAttribute(1),f=c.hasAttribute(2),g=[],w=c.ea(),$=null,T=null;d&&($=c.vb(1)),f&&(T=c.vb(2));for(var E=new h.h,O=0;O<w;O++){for(var P=c.Ca(O),R=c.Ka(O),F=0,V=0,L=NaN,G=NaN,J=NaN,H=NaN,te=c.ec(O),Q=[],ae=P;ae<P+R;ae++){c.D(ae,E),H=J=NaN;var pe=[E.x,E.y];d&&(J=$.get(ae),pe.push(J)),f&&(w=T.get(ae),pe.push(H)),ae==P&&te&&(F=E.x,V=E.y,L=J,G=H),Q.push(pe)}!te||F==E.x&&V==E.y&&(!d||isNaN(L)&&isNaN(J)||L==J)&&(!f||isNaN(G)&&isNaN(H)||G==H)||Q.push(Q[0].slice(0)),g.push(Q)}return g},l.Ry=function(c,d){c=l.eQ(c),637.100877141506>d&&(d=637.100877141506);for(var f,g=[],w=0;w<c.length;w++){var $,T,E=c[w];g.push(f=[]),f.push([E[0][0],E[0][1]]);var O=E[0][0]*n,P=E[0][1]*n;for($=0;$<E.length-1;$++){var R=E[$+1][0]*n,F=E[$+1][1]*n;if(O!==R||P!==F){R=(F=l.HM(P,O,F,R)).azimuth;var V=(F=F.TQ)/d;if(1<V){for(T=1;T<=V-1;T++){var L=l.Ux(P,O,R,T*d);f.push([L.x,L.y])}T=l.Ux(P,O,R,(F+Math.floor(V-1)*d)/2),f.push([T.x,T.y])}P=l.Ux(P,O,R,F),f.push([P.x,P.y]),O=P.x*n,P=P.y*n}}}return{lJ:g}},l.SQ=function(c){for(var d=[],f=0;f<c.length;f++){var g=c[f];g=l.Ry(g,1e4),d.push(g)}c=[];for(var w=0;w<d.length;w++){g=d[w];var $=0;for(f=0;f<g.lJ.length;f++){var T,E=g.lJ[f],O=l.xu(h.h.construct(E[0][0],E[0][1])),P=l.xu(h.h.construct(E[E.length-1][0],E[E.length-1][1])),R=P.x*O.y-O.x*P.y;for(T=0;T<E.length-1;T++)O=l.xu(h.h.construct(E[T+1][0],E[T+1][1])),R+=(P=l.xu(h.h.construct(E[T][0],E[T][1]))).x*O.y-O.x*P.y;$+=R}$/=1,c.push($/-2)}return c},l}(),h.cb=function(){function l(){}return l.sB=function(c,d,f,g,w,$,T){l.bD[c.dc()]=d,isNaN(f)==0&&(l.hD[c.dc()]=f),isNaN(g)==0&&(l.uD[c.dc()]=g),isNaN(w)==0&&(l.WC[c.dc()]=w),l.iD[c.dc()]=$,T!==null&&(l.jD[c.dc()]=T)},l.Yw=function(c,d,f){l.nD[c.dc()+"-"+d.dc()]=f},l.tc=function(c){if((c=l.bD[c.dc()])==null)throw h.i.Fe();return c},l.bf=function(c){if((c=l.hD[c.dc()])==null)throw h.i.Fe();return c},l.xv=function(c){if((c=l.uD[c.dc()])==null)throw h.i.Fe();return c},l.gv=function(c){if((c=l.WC[c.dc()])==null)throw h.i.Fe();return c},l.ih=function(c){if((c=l.jD[c.dc()])==null)throw h.i.Fe();return h.l.construct(c[0],c[1],c[2],c[3])},l.Xc=function(c){if((c=l.iD[c.dc()])==null)throw h.i.Fe();return c},l.Bh=function(c,d,f){if(d.Nb(f))return c;var g=l.nD[d.dc()+"-"+f.dc()];if(g!==void 0)return g(c,d,f);throw h.i.Fe()},l.wt=function(){throw h.i.Fe()},l.XQ=function(){throw h.i.Fe()},l.ZV=function(){throw h.i.Fe()},l.ol=function(){throw h.i.Fe()},l.nW=function(){var c=h.Gg.create(102100),d=h.Gg.create(3857),f=h.Gg.create(4326);h.cb.sB(c,f,NaN,NaN,NaN,!1,null),h.cb.sB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.sB(d,f,NaN,NaN,NaN,!1,null),h.cb.Yw(c,f,o),h.cb.Yw(f,c,s),h.cb.Yw(d,f,o),h.cb.Yw(f,d,s)},l.bD=[],l.hD=[],l.uD=[],l.WC=[],l.iD=[],l.jD=[],l.nD=[],l}()}(U||(U={})),U.cb.nW(),function(h){var k=function(){function b(u){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=u}return b.prototype.kd=function(u){u<this.Dl?(this.o[u*this.Mf]=this.ko,this.ko=u):this.Dl--,this.size--},b.prototype.U=function(u,o){return this.o[u*this.Mf+o]},b.prototype.T=function(u,o,s){this.o[u*this.Mf+o]=s},b.prototype.De=function(){var u=this.ko;if(u==-1){if(this.Dl==this.Jg){if(2147483647<(u=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(u=2147483647),u==this.Jg)throw h.i.de();this.yz(u)}u=this.Dl,this.Dl++}else this.ko=this.o[u*this.Mf];this.size++;for(var o=u*this.Mf;o<u*this.Mf+this.Mf;o++)this.o[o]=-1;return u},b.prototype.Nl=function(u){var o=this.ko;if(o==-1){if(this.Dl==this.Jg){if(2147483647<(o=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(o=2147483647),o==this.Jg)throw h.i.de();this.yz(o)}o=this.Dl,this.Dl++}else this.ko=this.o[o*this.Mf];this.size++;for(var s=o*this.Mf,n=0;n<u.length;n++)this.o[s+n]=u[n];return o},b.prototype.oj=function(u){this.ko=-1,this.size=this.Dl=0,u&&(this.o=null,this.Jg=0)},b.prototype.Ee=function(u){u>this.Jg&&this.yz(u)},b.prototype.sx=function(u,o){u*=this.Mf,o*=this.Mf;for(var s=0;s<this.Mf;s++){var n=this.o[o+s];this.o[o+s]=this.o[u+s],this.o[u+s]=n}},b.prototype.bC=function(u,o,s){var n=this.o[this.Mf*o+s];this.o[this.Mf*o+s]=this.o[this.Mf*u+s],this.o[this.Mf*u+s]=n},b.GG=function(u){return 0<=u},b.prototype.yz=function(u){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.Mf*u);o.set(this.o,0),this.o=o,this.Jg=u},b}();h.ad=k}(U||(U={})),function(h){var k,b;(b=k||(k={}))[b.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",b[b.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",b[b.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",b[b.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=function(){function s(n){this.Ce=n,this.Ah=NaN,this.$G=new h.jg,this.aH=new h.jg,this.os=new h.Oc,this.ps=new h.Oc}return s.prototype.compare=function(n,l,c){if(n=n.ka(c),this.Ce.kB(l,this.$G),this.Ce.kB(n,this.aH),l=this.$G.get(),n=this.aH.get(),this.os.L(l.ta,l.qa),this.ps.L(n.ta,n.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;c=l.oa==l.ma;var d=n.oa==n.ma;if(c||d){if(c&&d)return 0;if(l.oa==n.oa&&l.ta==n.ta)return c?1:-1;if(l.ma==n.ma&&l.qa==n.qa)return c?-1:1}return(c=l.Me(this.Ah,this.os.pa))==(d=n.Me(this.Ah,this.ps.pa))&&((d=.5*((c=Math.min(l.ma,n.ma))+this.Ah))==this.Ah&&(d=c),c=l.Me(d,this.os.pa),d=n.Me(d,this.ps.pa)),c<d?-1:c>d?1:0},s.prototype.WJ=function(n){this.Ah=n},s}(),o=function(){function s(n){this.ib=n,this.RH=new h.jg,this.Cf=new h.h,this.rA=new h.Oc}return s.prototype.fX=function(n){this.Cf.N(n)},s.prototype.compare=function(n,l){return this.ib.kB(n.ka(l),this.RH),n=this.RH.get(),this.rA.L(n.ta,n.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(n=n.Me(this.Cf.y,this.Cf.x),this.Cf.x<n?-1:this.Cf.x>n?1:0)},s}();k=function(){function s(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new h.Nd,this.XN=2147483647,this.WN=h.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return s.prototype.ty=function(n){this.gA=n},s.prototype.$m=function(){this.he==null&&(this.he=new h.ad(8));var n=this.he.De();return this.he.T(n,1,0),n},s.prototype.qU=function(){this.Lc==null&&(this.Lc=new h.ad(8));var n=this.Lc.De();this.Lc.T(n,2,0),this.Lc.T(n,3,0);var l=this.Lc.De();return this.Lc.T(l,2,0),this.Lc.T(l,3,0),this.EJ(n,l),this.EJ(l,n),n},s.prototype.hI=function(){this.ze==null&&(this.ze=new h.ad(8));var n=this.ze.De();return this.ze.T(n,2,0),n},s.prototype.OW=function(n,l){this.he.T(n,7,l)},s.prototype.on=function(n,l){this.he.T(n,2,l)},s.prototype.NW=function(n,l){this.he.T(n,1,l)},s.prototype.gX=function(n,l){this.he.T(n,3,l)},s.prototype.dX=function(n,l){this.he.T(n,4,l)},s.prototype.er=function(n,l){this.he.T(n,5,l)},s.prototype.$Q=function(n){return this.he.U(n,5)},s.prototype.MW=function(n,l){this.he.T(n,6,l)},s.prototype.YM=function(n,l){this.MW(l,n)},s.prototype.DJ=function(n,l){this.Lc.T(n,1,l)},s.prototype.EJ=function(n,l){this.Lc.T(n,4,l)},s.prototype.Vl=function(n,l){this.Lc.T(n,5,l)},s.prototype.Ul=function(n,l){this.Lc.T(n,6,l)},s.prototype.VW=function(n,l){this.Lc.T(n,2,l)},s.prototype.cx=function(n,l){this.Lc.T(n,3,l)},s.prototype.GF=function(n){return this.Lc.U(n,3)},s.prototype.Ht=function(n,l){this.Lc.T(n,7,l)},s.prototype.zK=function(n,l){if(this.om(n)!=-1)for(l=l?-1:n,n=this.om(n);n!=-1;n=this.ls(n))this.g.Sa(this.vj(n),this.Eq,l)},s.prototype.xx=function(n,l){n!=-1&&(this.zK(n,l),this.zK(this.ya(n),l))},s.prototype.Et=function(n,l){this.ze.T(n,1,l)},s.prototype.Xg=function(n,l){this.ze.T(n,2,l)},s.prototype.ln=function(n,l){this.ze.T(n,3,l),this.IW(n,this.ZQ(l)),this.HW(l,n)},s.prototype.HW=function(n,l){this.ze.T(n,4,l)},s.prototype.IW=function(n,l){this.ze.T(n,5,l)},s.prototype.yJ=function(n,l){this.ze.T(n,6,l)},s.prototype.wJ=function(n,l){this.ze.T(n,7,l)},s.prototype.vJ=function(n,l){this.$n.write(n,l)},s.prototype.xJ=function(n,l){this.fA.write(n,l)},s.prototype.gY=function(n){var l=0,c=0,d=this.vF(n),f=new h.h,g=new h.h,w=new h.h;this.$r(d,f),g.N(f);var $=d;do this.nm($,w),c+=h.h.ub(g,w),this.$e(this.ya($))!=n&&(l+=(w.x-f.x-(g.x-f.x))*(w.y-f.y+(g.y-f.y))*.5),g.N(w),$=this.kc($);while($!=d);this.$n.write(n,l),this.fA.write(n,c)},s.prototype.KU=function(n,l){var c=new u(this),d=new h.$j;d.Ee(h.P.truncate(this.xa/2)),d.Xo(c);for(var f=new h.ja(0),g=this.bh(),w=null,$=0,T=new h.h,E=this.Oe;E!=-1;E=this.Tf(E)){if(!(255&++$)&&l!=null&&!l.progress(-1,-1))throw h.i.RC();var O=this.Je(E);if(O!=-1){if(f.Dh(0),!this.cY(d,g,f,O)){this.D(E,T),c.WJ(T.y);var P=O;do{var R=this.Bb(P,g);R!=-1&&(d.wd(R,-1),this.Kb(P,g,-2)),P=this.kc(this.ya(P))}while(O!=P);P=O;do(R=this.Bb(P,g))==-1&&(R=d.addElement(P,-1),f.add(R)),P=this.kc(this.ya(P));while(O!=P)}for(O=f.size-1;0<=O;O--)R=f.get(O),P=d.ka(R),this.Kb(this.ya(P),g,R),this.JU(d,R,n)}else this.Yy(E)==-1&&(w==null&&(w=new o(this)),this.D(E,T),w.fX(T),P=d.DW(w),O=this.Jl,P!=-1&&(R=d.ka(P),this.$e(R)==this.$e(this.ya(R))&&(R=this.JF(d,P)),R!=-1&&(O=this.$e(R))),this.YM(O,E))}this.Lg(g)},s.prototype.JU=function(n,l,c){var d=n.ka(l),f=this.$e(d);if(this.In(f)==-1){var g=this.JF(n,l),w=this.ya(d),$=this.$e(w);this.Mp(f),this.Mp($);var T=this.In(f),E=this.In($);if(g==-1&&T==-1&&($==f?(this.ln($,this.Jl),T=E=this.Jl):(E==-1&&(this.ln($,this.Jl),E=this.Jl),this.ln(f,$),T=$)),g!=-1){var O=this.$e(g);E==-1&&(0>=this.Mp(O)?(E=this.In(O),this.ln($,E)):(this.ln($,O),E=O),$==f&&(T=E))}T==-1&&this.dY(f,$),c==0?this.eW(n,l,d,g,f,$):c==5?this.fW(n,l,d,w,f,$):c==4&&this.dW(d,g,f,$)}},s.prototype.eW=function(n,l,c,d,f,g){var w=this.jk(f);if(d!=-1){var $=this.jk(g),T=this.jk(this.$e(d));d=w&$&T,T^=T&this.fh(c),(T|=d)!=0&&(this.Xg(g,$|T),this.Xg(f,T|w),w=w||T)}for(l=n.lb(l);l!=-1&&(d=n.ka(l),c=this.$e(this.ya(d)),f=this.jk(c),g=this.fh(d),$=this.$e(d),d=f&(T=this.jk($))&w,w^=w&g,(w|=d)!=0);l=n.lb(l))this.Xg(c,f|w),this.Xg($,T|w)},s.prototype.fW=function(n,l,c,d,f,g){if(f!=g){c=this.Bb(c,this.eg),c+=this.Bb(d,this.eg),d=0;var w=new h.ja(0),$=new h.ja(0);$.add(0);for(var T=n.sc(-1);T!=l;T=n.lb(T)){var E=n.ka(T),O=this.ya(E),P=this.$e(E),R=this.$e(O);if(P!=R){if(E=this.Bb(E,this.eg),d+=E+=this.Bb(O,this.eg),O=!1,w.size!=0&&w.Gc()==R&&($.Jf(),w.Jf(),O=!0),this.In(R)==-1)throw h.i.Ra();O&&this.In(R)==P||($.add(d),w.add(P))}}d+=c,w.size!=0&&w.Gc()==g&&($.Jf(),w.Jf()),d!=0?$.Gc()==0&&(n=this.g.md,n=this.Ma(n),this.Xg(f,n)):$.Gc()!=0&&(n=this.g.md,n=this.Ma(n),this.Xg(f,n))}},s.prototype.dW=function(n,l,c,d){var f=this.Ma(this.g.md);if(l==-1)this.Xg(d,this.Io),1&(n=this.Bb(n,this.yg))?this.Xg(c,f):this.Xg(c,this.Io);else{var g=this.jk(d);g==0?(g=this.jk(this.$e(l)),this.Xg(d,g),1&(n=this.Bb(n,this.yg))?this.Xg(c,g==f?this.Io:f):this.Xg(c,g)):1&(n=this.Bb(n,this.yg))?this.Xg(c,g==f?this.Io:f):this.Xg(c,g)}},s.prototype.cY=function(n,l,c,d){var f=d,g=-1,w=-1,$=0;do{if($==2)return!1;var T=this.Bb(f,l);if(T!=-1){if(g!=-1)return!1;g=T}else{if(w!=-1)return!1;w=f}$++,f=this.kc(this.ya(f))}while(d!=f);return w!=-1&&g!=-1&&(this.Kb(n.ka(g),l,-2),n.Uj(g,w),c.add(g),!0)},s.prototype.dY=function(n,l){var c=this.Mp(n);if(c!=0){var d=this.Mp(l);0<c&&0>d||0>c&&0<d?this.ln(n,l):(l=this.In(l))!=-1&&this.ln(n,l)}},s.prototype.qP=function(n,l){this.Eq=this.g.Hd();for(var c=0,d=l.size;c<d;c++){var f=l.get(c),g=this.g.Qa(f,this.Em),w=this.g.Sf(this.g.cd(f)),$=this.g.jc(w);if(h.ba.Ic($)){var T=this.g.V(f);if(T!=-1){var E=this.g.Qa(T,this.Em);if(g!=E){var O=this.qU(),P=this.ya(O),R=this.lh.De();this.lh.T(R,0,f),this.lh.T(R,1,-1),this.Ht(O,R),this.DJ(O,g),(R=this.Je(g))==-1?(this.on(g,O),this.Vl(O,P),this.Ul(P,O)):(g=this.ue(R),this.Vl(R,P),this.Ul(P,R),this.Ul(g,O),this.Vl(O,g)),this.DJ(P,E),(g=this.Je(E))==-1?(this.on(E,P),this.Ul(O,P),this.Vl(P,O)):(E=this.ue(g),this.Vl(g,O),this.Ul(O,g),this.Ul(E,P),this.Vl(P,E)),w=this.Ma(w),n==0?(this.Kb(P,this.be,0),this.Kb(O,this.be,$==1736?w:0)):n==5?(E=new h.h,this.g.D(f,E),f=new h.h,this.g.D(T,f),g=T=0,0>E.compare(f)?T=1:g=-1,this.Kb(P,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.eg,T),this.Kb(P,this.eg,g)):n==7?(this.Kb(P,this.be,this.Io),this.Kb(O,this.be,$==1736?w:0)):n==4&&(this.Kb(P,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.yg,1),this.Kb(P,this.yg,1)),$=$==1736?this.WN:0,this.cx(O,w|$),this.cx(P,w|$)}}}}},s.prototype.QT=function(n,l){var c=this.om(l);if(c!=-1){var d=this.om(n);this.lh.T(c,1,d),this.Ht(n,c),this.Ht(l,-1)}n=this.ya(n),l=this.ya(l),(c=this.om(l))!=-1&&(d=this.om(n),this.lh.T(c,1,d),this.Ht(n,c),this.Ht(l,-1))},s.prototype.EX=function(n){function l(J,H){return d.CO(J,H)}var c=new h.ja(0);c.Jb(10);for(var d=this,f=this.Oe;f!=-1;f=this.Tf(f)){c.clear(!1);var g=this.Je(f);if(g!=-1){var w=g;do c.add(w),w=this.kc(this.ya(w));while(w!=g);if(1<c.size){if(w=!0,2<c.size)c.Wd(0,c.size,l),c.add(c.get(0));else if(0<this.BO(c.get(0),c.get(1))){var $=c.get(0);c.set(0,c.get(1)),c.set(1,$)}else w=!1;for(var T=$=c.get(0),E=this.vf(T),O=this.ya(T),P=-1,R=1,F=c.size;R<F;R++){var V=c.get(R),L=this.ya(V),G=this.lk(L);if(G==E&&V!=T){if(n==0)P=this.GF(T)|this.GF(V),this.cx(T,P),this.cx(O,P),this.Kb(T,this.be,this.Bb(T,this.be)|this.Bb(V,this.be)),this.Kb(O,this.be,this.Bb(O,this.be)|this.Bb(L,this.be));else if(this.eg!=-1)P=this.Bb(T,this.eg)+this.Bb(V,this.eg),L=this.Bb(O,this.eg)+this.Bb(L,this.eg),this.Kb(T,this.eg,P),this.Kb(O,this.eg,L);else{if(n==7)return void(this.Pi=new h.Nd(5,f,-1));this.yg!=-1&&(P=this.Bb(T,this.yg)+this.Bb(V,this.yg),L=this.Bb(O,this.yg)+this.Bb(L,this.yg),this.Kb(T,this.yg,P),this.Kb(O,this.yg,L))}this.QT(T,V),this.Gy(V),P=T,c.set(R,-1),V==$&&(c.set(0,-1),$=-1)}else this.xx(P,!1),P=-1,T=V,E=G,O=L}if(this.xx(P,!1),P=-1,w){for($=-1,R=0,F=c.size;R<F;R++)if((V=c.get(R))!=-1){if($==-1)T=$=V,E=this.vf(T),O=this.ya(T);else if(V!=T&&(L=this.ya(V),G=this.lk(L),this.Ul(O,V),this.Vl(V,O),T=V,E=G,O=L,n==7&&(this.Bb(V,this.be)|this.Bb(this.ue(V),this.be))==(1|this.Io)))return void(this.Pi=new h.Nd(5,f,-1))}this.on(f,$)}else{for($=-1,R=0,F=c.size;R<F;R++)if((V=c.get(R))!=-1){$=V;break}g!=$&&this.on(f,$)}}}}},s.prototype.RN=function(){for(var n=-1,l=this.bh(),c=this.Oe;c!=-1;c=this.Tf(c)){var d=this.Je(c);if(d!=-1){var f=d;do{if(this.Bb(f,l)!=1){var g=this.hI();this.Et(g,f),this.wJ(g,n),n!=-1&&this.yJ(n,g),n=g;var w=0,$=f;do w|=this.Bb($,this.be),this.VW($,g),this.Kb($,l,1),$=this.kc($);while($!=f);this.Xg(g,w)}f=this.kc(this.ya(f))}while(f!=d)}}g=this.hI(),this.Et(g,-1),this.wJ(g,n),n!=-1&&this.yJ(n,g),this.Jl=g,this.$n=h.ce.rf(this.ze.size,NaN),this.fA=h.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(l)},s.prototype.mR=function(n,l,c){if((l=l!=-1?l:this.Je(n))==-1)return-1;for(n=l;;){if(this.Bb(l,c)!=1)return l;if((l=this.kc(this.ya(l)))==n)return-1}},s.prototype.tW=function(){for(var n=this.bh(),l=this.Oe;l!=-1;l=this.Tf(l))for(var c=-1;;){var d=this.mR(l,c,n);if(d==-1)break;c=this.kc(this.ya(d));for(var f=d;;){var g=this.kc(f),w=this.ue(f),$=this.ya(f);if(w==$){if(this.DP(f),c!=f&&c!=$||(c=-1),f==d||w==d){if(f==(d=g)||w==d)break;f=g;continue}}else this.Kb(f,n,1);if((f=g)==d)break}}this.Lg(n)},s.prototype.HB=function(n,l,c,d,f){this.Wg(),this.bH=f,this.g=n,this.Dq=this.g.WE(),(n=new h.ja(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.gd);var g=0,w=1,$=c!=null?c.get(0):this.g.md;for(f=1;$!=-1;){this.g.CJ($,this.Dq,w),w<<=1;for(var T=this.g.Ob($);T!=-1;T=this.g.Sb(T))for(var E=this.g.Ya(T),O=0,P=this.g.Ka(T);O<P;O++)n.add(E),E=this.g.V(E);h.ba.Tn(this.g.jc($))||(g+=this.g.ea($)),c!=null?($=f<c.size?c.get(f):-1,f++):$=this.g.ve($)}for(this.Io=w,this.xa=n.size,this.g.nx(n,this.xa),this.lh==null&&(this.lh=new h.ad(2),this.he=new h.ad(8),this.Lc=new h.ad(8),this.ze=new h.ad(8)),this.lh.Ee(this.xa),h.op.Bp(d),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,g)),this.Em=this.g.Hd(),c=new h.h,f=0,g=new h.h,c.Sc(),w=0;w<=this.xa;w++)if(w<this.xa?(E=n.get(w),this.g.D(E,g)):g.Sc(),!c.rb(g)){if(f<w){for(E=this.$m(),P=O=-1;f<w;f++)P=n.get(f),this.g.Sa(P,this.Em,E),$=this.lh.De(),this.lh.T($,0,P),this.lh.T($,1,O),O=$,T=this.g.cd(P),$=this.g.Sf(T),$=this.Ma($),this.NW(E,this.yd(E)|$);this.OW(E,O),this.er(E,this.g.Va(P)),this.Qs!=-1&&this.dX(this.Qs,E),this.gX(E,this.Qs),this.Qs=E,this.Oe==-1&&(this.Oe=E)}f=w,c.N(g)}h.op.Bp(d),this.be=this.bh(),l==5&&(this.eg=this.bh()),l==4&&(this.yg=this.bh()),this.qP(l,n),this.Pi.Lj==0&&(this.EX(l),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(l,d))):this.kA=!0))},s.prototype.Gy=function(n){var l=this.kc(n),c=this.ue(n),d=this.ya(n),f=this.kc(d),g=this.ue(d);l!=d&&(this.Ul(g,l),this.Vl(l,g)),c!=d&&(this.Ul(c,f),this.Vl(f,c)),c=this.lk(n),this.Je(c)==n&&(f!=n?this.on(c,f):this.on(c,-1)),f=this.lk(d),this.Je(f)==d&&(l!=d?this.on(f,l):this.on(f,-1)),this.Lc.kd(n),this.Lc.kd(d)},s.prototype.JF=function(n,l){for(;;){if((l=n.xe(l))==-1)return-1;var c=n.ka(l);if(this.$e(c)!=this.$e(this.ya(c)))return c}},s.prototype.fr=function(n,l){var c;c===void 0&&(c=!0),this.HB(n,0,null,l,c)},s.prototype.qJ=function(n,l,c){var d=new h.ja(0);d.add(l),this.HB(n,4,d,c,n.jc(l)==1736)},s.prototype.rJ=function(n,l,c){var d=new h.ja(0);d.add(l),this.HB(n,5,d,c,!0)},s.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},s.prototype.Je=function(n){return this.he.U(n,2)},s.prototype.D=function(n,l){this.g.ZF(this.$Q(n),l)},s.prototype.yd=function(n){return this.he.U(n,1)},s.prototype.Tf=function(n){return this.he.U(n,4)},s.prototype.Yy=function(n){return this.he.U(n,6)},s.prototype.mm=function(n){return this.he.U(n,7)},s.prototype.ls=function(n){return this.lh.U(n,1)},s.prototype.vj=function(n){return this.lh.U(n,0)},s.prototype.og=function(n,l){return(l=this.Fi[l]).size<=n?-1:l.read(n)},s.prototype.pn=function(n,l,c){(l=this.Fi[l]).size<=n&&l.resize(this.he.size,-1),l.write(n,c)},s.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var n=h.ja.rf(this.he.Jg,-1),l=0,c=this.Fi.length;l<c;l++)if(this.Fi[l]==null)return this.Fi[l]=n,l;return this.Fi.push(n),this.Fi.length-1},s.prototype.Gp=function(n){this.Fi[n]=null},s.prototype.lk=function(n){return this.Lc.U(n,1)},s.prototype.vf=function(n){return this.lk(this.ya(n))},s.prototype.ya=function(n){return this.Lc.U(n,4)},s.prototype.ue=function(n){return this.Lc.U(n,5)},s.prototype.kc=function(n){return this.Lc.U(n,6)},s.prototype.$e=function(n){return this.Lc.U(n,2)},s.prototype.af=function(n){return this.jk(this.Lc.U(n,2))},s.prototype.om=function(n){return this.Lc.U(n,7)},s.prototype.$r=function(n,l){this.D(this.lk(n),l)},s.prototype.nm=function(n,l){this.D(this.vf(n),l)},s.prototype.fh=function(n){return this.Lc.U(n,3)&this.XN},s.prototype.Bb=function(n,l){return(l=this.Ii[l]).size<=n?-1:l.read(n)},s.prototype.Kb=function(n,l,c){(l=this.Ii[l]).size<=n&&l.resize(this.Lc.size,-1),l.write(n,c)},s.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var n=h.ja.rf(this.Lc.Jg,-1),l=0,c=this.Ii.length;l<c;l++)if(this.Ii[l]==null)return this.Ii[l]=n,l;return this.Ii.push(n),this.Ii.length-1},s.prototype.Lg=function(n){this.Ii[n]=null},s.prototype.DP=function(n){var l=this.$e(n),c=this.ya(n),d=this.kc(n);d==c&&(d=this.kc(d))==n&&(d=-1);var f=this.vF(l);f!==n&&f!=c||this.Et(l,d),c=this.$n.read(l),isNaN(c)||(this.vJ(l,NaN),this.xJ(l,NaN)),this.xx(n,!0),this.Gy(n)},s.prototype.EP=function(n){for(var l=0,c=n.size;l<c;l++){var d=n.get(l),f=this.$e(this.ya(d));this.Et(this.$e(d),-1),this.Et(f,-1),this.xx(d,!0),this.Gy(d)}},s.prototype.vF=function(n){return this.ze.U(n,1)},s.prototype.jk=function(n){return this.ze.U(n,2)},s.prototype.In=function(n){return this.ze.U(n,3)},s.prototype.ZQ=function(n){return this.ze.U(n,4)},s.prototype.Mp=function(n){var l=this.$n.read(n);return isNaN(l)&&(this.gY(n),l=this.$n.read(n)),l},s.prototype.Ma=function(n){return this.g.FF(n,this.Dq)},s.prototype.Ie=function(n){return this.g.Qa(n,this.Em)},s.prototype.oR=function(n){return this.g.Qa(n,this.Eq)},s.prototype.nR=function(n,l){var c=this.Je(n);if(c==-1)return-1;var d=c,f=-1,g=-1;do{if(this.vf(d)==l)return d;if(f==-1){if((f=this.Je(l))==-1)break;g=f}if(this.vf(g)==n)return this.ya(g);d=this.kc(this.ya(d)),g=this.kc(this.ya(g))}while(d!=c&&g!=f);return-1},s.prototype.kB=function(n,l){l.Qr(),l=l.get();var c=new h.h;this.$r(n,c),l.Ec(c),this.nm(n,c),l.Rc(c)},s.prototype.CO=function(n,l){if(n==l)return 0;var c=new h.h;this.nm(n,c);var d=new h.h;return this.nm(l,d),c.rb(d)?0:(l=new h.h,this.$r(n,l),(n=new h.h).vc(c,l),(c=new h.h).vc(d,l),h.h.pu(n,c))},s.prototype.BO=function(n,l){if(n==l)return 0;var c=new h.h;this.nm(n,c);var d=new h.h;return this.nm(l,d),c.rb(d)?0:(l=new h.h,this.$r(n,l),(n=new h.h).vc(c,l),(c=new h.h).vc(d,l),0<=c.y&&0<n.y?h.h.pu(n,c):0)},s.prototype.sO=function(){for(var n=h.mc.ox(this.gA),l=new h.h,c=new h.h,d=new h.h,f=new h.h,g=new h.h,w=this.Oe;w!=-1;w=this.Tf(w)){var $=this.Je(w);if($!=-1){var T=$;this.$r(T,l),this.nm(T,c),g.vc(c,l);var E=g.Uk();do{var O=T;if((T=this.kc(this.ya(T)))!=O){this.nm(T,d),f.vc(d,l),O=f.Uk();var P=f.yi(g);if(P*P/(O*E)*Math.min(O,E)<=n)return!1;g.N(f),E=O,c.N(d)}}while(T!=$)}}return!0},s}(),h.ku=k}(U||(U={})),function(h){var k=function(){function b(){this.j=null,this.jH=new h.h,this.kH=new h.h,this.Ij=null,this.Ov=!1,this.vl=-1}return b.prototype.cf=function(u){return u<this.Ij.length&&this.Ij[u]},b.prototype.fl=function(u,o,s,n){var l=h.ba.uf(this.j.g.jc(s));if(h.ba.uf(this.j.g.jc(o))!=2||l!=1)throw h.i.Ra();this.AP(u,o,s,n)},b.prototype.fr=function(u,o){this.j==null&&(this.j=new h.ku),this.j.fr(u,o)},b.prototype.Gt=function(u,o,s){for(h.Vk.W(u,o,s,!0),o=u.md;o!=-1;o=u.ve(o))u.jc(o)==1736&&h.tn.W(u,o,-1,this.Ov,s);this.fr(u,s)},b.prototype.HE=function(u,o,s,n,l){var c=this.j.g;if(c.jc(u)==1736)for(u=c.Ob(u);u!=-1;u=c.Sb(u)){var d=c.Ya(u);this.j.Ie(d),this.j.Ie(c.V(d));var f=this.j.oR(d);if(f!=-1){var g=this.j.Bb(f,s);if(g!=1&&g!=2)if(this.cf(this.j.af(f))){this.j.Kb(f,s,1),g=c.wf(o,-1);var w=f,$=this.j.Ie(d),T=1;do{var E=this.um(d,l);c.kj(g,E),n!=-1&&this.j.pn($,n,1),this.j.Kb(w,s,1),w=this.j.kc(w);do var O=(E=T==1?c.V(d):c.Na(d))!=-1?this.j.Ie(E):-1;while(O==$);var P=this.j.lk(w);if(P!=O){do O=(E=T==1?c.Na(d):c.V(d))!=-1?this.j.Ie(E):-1;while(O==$);P!=O?(O=P,E=this.j.vj(this.j.mm(O))):T=-T}$=O,d=E}while(w!=f);c.mn(g,!0)}else this.j.Kb(f,s,2)}}},b.prototype.$E=function(){for(var u=this.j.bh(),o=new h.ja(0),s=this.j.Oe;s!=-1;s=this.j.Tf(s)){var n=this.j.Je(s),l=n;if(n!=-1)do{if(this.j.Bb(l,u)!=1){var c=this.j.ya(l);this.j.Kb(c,u,1),this.j.Kb(l,u,1),this.cf(this.j.af(l))&&this.cf(this.j.af(c))&&o.add(l)}l=this.j.kc(this.j.ya(l))}while(l!=n)}this.j.Lg(u),this.j.EP(o)},b.prototype.um=function(u,o){return o==-1?u:this.WR(u,o)},b.prototype.WR=function(u,o){var s=this.j.g,n=this.j.mm(this.j.Ie(u));do{var l=this.j.vj(n);if(s.Sf(s.cd(l))==o)return l;n=this.j.ls(n)}while(n!=-1);return u},b.prototype.Qt=function(u,o,s){this.$E();var n=this.j.g,l=n.Kg(1736),c=this.j.bh();return this.pK(u,o,l,s,c,-1),this.j.Lg(c),h.tn.W(n,l,1,this.Ov,null),l},b.prototype.pK=function(u,o,s,n,l,c){for(this.HE(u,s,l,c,n),o!=-1&&this.HE(o,s,l,c,n),u=this.j.g,o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var d=this.j.Je(o);if(d!=-1){var f=d;do{var g=this.j.Bb(f,l);if(g!=1&&g!=2)if(this.cf(this.j.af(f))){g=u.wf(s,-1);var w=f;do{var $=this.j.om(w);$!=-1?$=this.j.vj($):($=this.j.vj(this.j.om(this.j.ya(w))),$=this.j.g.V($)),$=this.um($,n),u.kj(g,$),this.j.Kb(w,l,1),c!=-1&&($=this.j.Ie($),this.j.pn($,c,1)),w=this.j.kc(w)}while(w!=f);u.mn(g,!0)}else this.j.Kb(f,l,2);f=this.j.kc(this.j.ya(f))}while(f!=d)}}},b.prototype.XX=function(u,o,s){var n=this.j.g,l=n.Kg(1736),c=n.Kg(1607),d=n.Kg(550);this.$E();var f=-1,g=this.j.bh(),w=this.j.Fp();for(this.pK(u,o,l,s,g,w),u=this.j.Oe;u!=-1;u=this.j.Tf(u))if((o=this.j.Je(u))!=-1){var $=o;do{var T=this.j.Bb($,g),E=this.j.Bb(this.j.ya($),g);if((T|=E)==2)if(T=this.j.fh($),this.cf(T)){var O=n.wf(c,-1),P=$;T=this.$w(u,n),T=this.um(T,s),n.kj(O,T),this.j.pn(u,w,1);do{if(T=this.j.vf(P),E=this.$w(T,n),E=this.um(E,s),n.kj(O,E),this.j.Kb(P,g,1),this.j.Kb(this.j.ya(P),g,1),this.j.pn(T,w,1),P=this.j.kc(P),T=this.j.Bb(P,g),(T|=E=this.j.Bb(this.j.ya(P),g))!=2)break;if(T=this.j.fh(P),!this.cf(T)){this.j.Kb(P,g,1),this.j.Kb(this.j.ya(P),g,1);break}}while(P!=$)}else this.j.Kb($,g,1),this.j.Kb(this.j.ya($),g,1);$=this.j.kc(this.j.ya($))}while($!=o)}for(u=this.j.Oe;u!=-1;u=this.j.Tf(u))(T=this.j.og(u,w))!=1&&(T=this.j.yd(u),this.cf(T)&&(f==-1&&(f=n.wf(d,-1)),(o=this.j.mm(u))!=-1&&(o=this.j.vj(o),T=this.um(o,s),n.kj(f,T))));return this.j.Gp(w),this.j.Lg(g),h.tn.W(n,l,1,this.Ov,null),(s=[])[0]=d,s[1]=c,s[2]=l,s},b.prototype.$w=function(u,o){var s=-1;for(u=this.j.mm(u);u!=-1;u=this.j.ls(u)){var n=this.j.vj(u);s==-1&&(s=n);var l=this.j.Ma(o.Sf(o.cd(n)));if(this.cf(l)){s=n;break}}return s},b.prototype.gB=function(u,o){for(var s=this.ll(o),n=this.j.lk(o),l=this.j.vf(o),c=0,d=0,f=this.j.mm(n);f!=-1;f=this.j.ls(f)){var g=this.j.vj(f),w=u.cd(g),$=this.j.Ma(u.Sf(w));w=u.Ya(w),($=($&s)!=0)&&w==g&&(this.vl=o);var T=u.V(g);T!=-1&&this.j.Ie(T)==l?(c++,$&&(this.vl===-1&&w==T&&(g=this.j.kc(o),this.cf(this.ll(g))&&(this.vl=g)),d++)):(g=u.Na(g))!=-1&&this.j.Ie(g)==l&&(c--,$&&(this.vl===-1&&w===g&&(g=this.j.kc(o),this.cf(this.ll(g))&&(this.vl=g)),d--))}return this.j.D(n,this.jH),this.j.D(l,this.kH),(d!=0?d:c)*(u=h.h.ub(this.jH,this.kH))},b.prototype.ll=function(u){return this.j.fh(u)|this.j.af(u)|this.j.af(this.j.ya(u))},b.prototype.sK=function(u){for(var o=this.j.ya(this.j.ue(u)),s=-1;o!=u;){if(this.cf(this.ll(o))){if(s!=-1)return-1;s=o}o=this.j.ya(this.j.ue(o))}return s!=-1?this.j.ya(s):-1},b.prototype.tK=function(u){for(var o=this.j.ya(this.j.kc(u)),s=-1;o!=u;){if(this.cf(this.ll(o))){if(s!=-1)return-1;s=o}o=this.j.ya(this.j.kc(o))}return s!=-1?this.j.ya(s):-1},b.prototype.hJ=function(u,o,s,n,l){var c=this.j.g,d=u,f=this.j.ya(d);this.j.Kb(d,s,1),this.j.Kb(f,s,1),this.vl=-1;for(var g=this.gB(c,d),w=d,$=-1,T=!1,E=1;;){var O=this.j.ue(d);if(O==f)break;if(f=this.j.kc(f),this.j.ya(O)!=f){if((d=this.sK(d))==-1){T=!0;break}f=this.j.ya(d)}else d=O;if(d==u){$=u;break}if(O=this.ll(d),!this.cf(O))break;this.j.Kb(d,s,1),this.j.Kb(f,s,1),w=d,g+=this.gB(c,d),E++}if($==-1)for(d=u,f=this.j.ya(d),$=d;(u=this.j.kc(d))!=f;){if(f=this.j.ue(f),this.j.ya(u)!=f){if((d=this.tK(d))==-1){T=!0;break}f=this.j.ya(d)}else d=u;if(O=this.ll(d),!this.cf(O))break;this.j.Kb(d,s,1),this.j.Kb(f,s,1),$=d,g+=this.gB(c,d),E++}else if(this.vl!=-1&&(w=this.vl,$=this.j.ue(this.vl),this.j.ya($)!=this.j.kc(this.j.ya(w))&&($=this.sK(w))==-1))throw h.i.Ra();for(0<=g||(d=$,$=this.j.ya(w),w=this.j.ya(d)),s=c.wf(o,-1),d=w,w=this.j.lk(w),T=this.j.vf($)==w&&T,g=this.$w(w,c),g=this.um(g,l),c.kj(s,g),n!=-1&&this.j.pn(w,n,1),w=0,E=T?h.P.truncate((E+1)/2):-1;u=this.j.vf(d),g=this.$w(u,c),g=this.um(g,l),c.kj(s,g),w++,n!=-1&&this.j.pn(u,n,1),T&&w==E&&(s=c.wf(o,-1),c.kj(s,g)),d!=$;)if(u=this.j.kc(d),this.j.ue(this.j.ya(d))!=this.j.ya(u)){if((d=this.tK(d))==-1)throw h.i.Ra()}else d=u},b.prototype.Rt=function(u){for(var o=this.j.g.Kg(1607),s=this.j.bh(),n=this.j.Oe;n!=-1;n=this.j.Tf(n)){var l=this.j.Je(n),c=l;do this.j.Bb(c,s)!=1&&this.cf(this.ll(c))&&this.hJ(c,o,s,-1,u),c=this.j.kc(this.j.ya(c));while(c!=l)}return this.j.Lg(s),o},b.prototype.YX=function(u){for(var o=this.j.g,s=o.Kg(1607),n=o.Kg(550),l=this.j.bh(),c=this.j.Fp(),d=-1,f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var g=this.j.Je(f),w=g;do{var $=this.j.Bb(w,l);$!=1&&($=this.ll(w),this.cf($)&&this.hJ(w,s,l,c,u)),w=this.j.kc(this.j.ya(w))}while(w!=g)}for(f=this.j.Oe;f!=-1;f=this.j.Tf(f))($=this.j.og(f,c))!=1&&($=this.j.yd(f),this.cf($)&&(d==-1&&(d=o.wf(n,-1)),(g=this.j.mm(f))!=-1&&(g=this.j.vj(g),g=this.um(g,u),o.kj(d,g))));return this.j.Lg(l),this.j.Gp(c),(u=[])[0]=n,u[1]=s,u},b.prototype.pr=function(){for(var u=this.j.g,o=u.Kg(550),s=u.wf(o,-1),n=this.j.Oe;n!=-1;n=this.j.Tf(n))if(this.cf(this.j.yd(n))){for(var l=-1,c=this.j.mm(n);c!=-1;c=this.j.ls(c)){var d=this.j.vj(c);l==-1&&(l=d);var f=this.j.Ma(u.Sf(u.cd(d)));if(this.cf(f)){l=d;break}}u.kj(s,l)}return o},b.prototype.eq=function(u){this.Ij=[];for(var o=0;o<u;o++)this.Ij[o]=!1},b.WV=function(u,o,s){var n=u.Ja(),l=Array(1e3);h.P.bv(l,null);var c=h.P.mg(1e3,0),d=u.I(),f=!0,g=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();for(var w=0;w<d;){var $=h.P.truncate(u.gW(l,w)-w);g?h.jd.nK(o,l,$,s,c):h.jd.oK(o,l,$,s,c);for(var T=0,E=0;E<$;E++)c[E]==0&&(f&&(f=!1,n.Gd(u,0,w)),T!=E&&n.Gd(u,w+T,w+E),T=E+1);f||T==$||n.Gd(u,w+T,w+$),w+=$}return f?u:n},b.uG=function(u,o,s){return u instanceof h.ee?b.WV(u,o,s):o instanceof h.Ta?u.B()||o.B()?u.Ja():h.Vk.uU(s,u,o)?h.Vk.xO(u,o):u.Ja():b.XV(u,o,s)},b.Cv=function(u,o,s,n){var l=new h.l;u.A(l);var c=new h.l;o.A(c);var d=new h.l;if(d.L(l),d.$b(c),s=h.ua.Xd(s,d,!0),(d=new h.l).L(c),c=h.ua.Gr(s),d.X(c,c),!l.isIntersecting(d)){if(u.Eb()<=o.Eb())return b.mi(b.Ue(u.Ja()),u,"&");if(u.Eb()>o.Eb())return b.mi(b.Ue(o.Ja()),u,"&")}return c=new b,d=(l=new h.hd).Ib(b.Ue(u)),o=l.Ib(b.Ue(o)),c.Gt(l,s,n),n=c.Cv(d,o),u=b.mi(l.Ke(n),u,"&"),h.ba.Ic(u.K())&&(u.Eh(2,s),u.K()==1736&&u.hm()),u},b.XV=function(u,o,s){if(u.B()||o.B())return u.Ja();var n=[null],l=[0],c=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();return n[0]=u.D(),c?h.jd.nK(o,n,1,s,l):h.jd.oK(o,n,1,s,l),l[0]==0?u.Ja():u},b.prototype.GU=function(u,o,s,n,l){if(u.B())return u;var c=new h.hd;return u=c.Ib(u),this.Ok(c,u,o,s,n,l)},b.prototype.IU=function(u,o,s,n,l,c){if(l&&u.jc(o)!=550){var d=new h.MC;d.PX(u,s),d.Pg?(h.Vk.W(u,s,c,!0),l=!1):this.j.ty(s)}else h.Vk.W(u,s,c,!0),l=!1;if(n&&u.jc(o)!=550?this.j.rJ(u,o,c):this.j.qJ(u,o,c),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(u,o,s,n,!1,c);if(this.j.ty(NaN),c=this.j.Ma(o),this.eq(c+1),this.Ij[c]=!0,u.jc(o)==1736||n&&u.jc(o)!=550)return u.$o(o,0),o=this.Qt(o,-1,-1),(u=u.Ke(o)).$o(0),l?u.Eh(1,0):(u.Eh(2,s),u.hm()),u;if(u.jc(o)==1607)return o=this.Rt(-1),u=u.Ke(o),l||u.Eh(2,s),u;if(u.jc(o)==550)return o=this.pr(),u=u.Ke(o),l||u.Eh(2,s),u;throw h.i.Ra()},b.prototype.Ok=function(u,o,s,n,l,c){this.j=new h.ku;try{return this.IU(u,o,s,n,l,c)}finally{this.j.Wg()}},b.Ok=function(u,o,s,n,l){return new b().GU(u,o,s,n,l)},b.prototype.HU=function(u,o,s,n){this.Ov=u,this.j=new h.ku,u=o.Kn(s);var l=o.jc(s);if(u!=1||l==550?this.j.qJ(o,s,n):this.j.rJ(o,s,n),!this.j.kA)if(this.j.ty(NaN),n=this.j.Ma(s),this.eq(n+1),this.Ij[n]=!0,o.jc(s)==1736||u==1&&o.jc(s)!=550)o.$o(s,0),n=this.Qt(s,-1,-1),o.cC(n,s),o.wB(n);else if(o.jc(s)==1607)n=this.Rt(-1),o.cC(n,s),o.wB(n);else{if(o.jc(s)!=550)throw h.i.ga("internal error");n=this.pr(),o.cC(n,s),o.wB(n)}},b.prototype.km=function(u,o){var s=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o));if(s>n)return u;var l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)]=!0,s==2&&n==2)return this.Qt(u,o,-1);if(s==1&&n==2||s==1&&n==1)return this.Rt(-1);if(s==0)return this.pr();throw h.i.Ra()},b.prototype.Cv=function(u,o){var s=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)|this.j.Ma(o)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),s==2&&n==2)return this.Qt(u,o,l);if(s==1&&0<n||n==1&&0<s)return this.Rt(l);if(s==0||n==0)return this.pr();throw h.i.Ra()},b.prototype.Kz=function(u,o){var s=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)|this.j.Ma(o)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),s==2&&n==2)return this.XX(u,o,l);if(s==1&&0<n||n==1&&0<s)return this.YX(l);if(s==0||n==0)return(u=[])[0]=this.pr(),u;throw h.i.Ra()},b.prototype.gp=function(u,o){var s=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)]=!0,this.Ij[this.j.Ma(o)]=!0,s==2&&n==2)return this.Qt(u,o,-1);if(s==1&&n==1)return this.Rt(-1);if(s==0&&n==0)return this.pr();throw h.i.Ra()},b.Ue=function(u){var o=u.K();return o==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):o==33?(o=new h.ee(u.description),u.B()||o.add(u),o):o==322?(o=new h.Ua(u.description),u.B()||o.pc(u,!0),o):u},b.mi=function(u,o,s){var n=u.K();return n==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):n!=33||s!="|"&&s!="^"?n==322?(o=new h.Ua(u.description),u.B()||o.pc(u,!0),o):n==33&&s=="-"&&o.K()==33||n==550&&s=="&"&&o.K()==33?(o=new h.Ta(u.description),u.B()||u.we(0,o),o):u:(o=new h.ee(u.description),u.B()||o.add(u),o)},b.km=function(u,o,s,n){if(u.B()||o.B()||u.Eb()>o.Eb())return b.mi(b.Ue(u),u,"-");var l=new h.l;u.A(l);var c=new h.l;if(o.A(c),!l.isIntersecting(c))return b.mi(b.Ue(u),u,"-");var d=new h.l;return d.L(l),d.$b(c),s=h.ua.Xd(s,d,!0),c=new b,d=(l=new h.hd).Ib(b.Ue(u)),o=l.Ib(b.Ue(o)),c.Gt(l,s,n),n=c.km(d,o),n=l.Ke(n),u=b.mi(n,u,"-"),h.ba.Ic(u.K())&&(u.Eh(2,s),u.K()==1736&&u.hm()),u},b.QP=function(u,o,s){if(2>u.length)throw h.i.O("not enough geometries to dissolve");for(var n=0,l=0,c=u.length;l<c;l++)n=Math.max(u[l].Eb(),n);var d=new h.l;d.Pa();var f=new h.hd,g=-1,w=0,$=-1;for(l=0,c=u.length;l<c;l++)if(u[l].Eb()==n)if(u[l].B())$==-1&&($=l);else{$=l,g==-1?g=f.Ib(b.Ue(u[l])):f.pN(g,b.Ue(u[l]));var T=new h.l;u[l].yc(T),d.$b(T),w++}return 2>w?b.Ue(u[$]):(u=n==2,o=h.ua.Xd(n==0?o:null,d,!0),new b().Ok(f,g,o,u,!0,s))},b.Kz=function(u,o,s,n){var l=[null,null,null],c=new h.l;u.A(c);var d=new h.l;o.A(d);var f=new h.l;if(f.L(c),f.$b(d),s=h.ua.Xd(s,f,!0),(f=new h.l).L(d),d=h.ua.Gr(s),f.X(d,d),!c.isIntersecting(f)){if(u.Eb()<=o.Eb())return l[(u=b.mi(b.Ue(u.Ja()),u,"&")).Eb()]=u,l;if(u.Eb()>o.Eb())return l[(u=b.mi(b.Ue(o.Ja()),u,"&")).Eb()]=u,l}for(d=new b,f=(c=new h.hd).Ib(b.Ue(u)),o=c.Ib(b.Ue(o)),d.Gt(c,s,n),n=d.Kz(f,o),o=0;o<n.length;o++)d=b.mi(c.Ke(n[o]),u,"&"),h.ba.Ic(d.K())&&(d.Eh(2,s),d.K()==1736&&d.hm()),l[d.Eb()]=d;return l},b.gp=function(u,o,s,n){if(u.Eb()>o.Eb())return b.mi(b.Ue(u),u,"^");if(u.Eb()<o.Eb()||u.B())return b.mi(b.Ue(o),u,"^");if(o.B())return b.mi(b.Ue(u),u,"^");var l=new h.l;u.A(l);var c=new h.l;o.A(c);var d=new h.l;return d.L(l),d.$b(c),s=h.ua.Xd(s,d,!0),c=new b,d=(l=new h.hd).Ib(b.Ue(u)),o=l.Ib(b.Ue(o)),c.Gt(l,s,n),n=c.gp(d,o),u=b.mi(l.Ke(n),u,"^"),h.ba.Ic(u.K())&&(u.Eh(2,s),u.K()==1736&&u.hm()),u},b.prototype.GQ=function(u,o){var s=this.j.g;u=s.wf(u,-1);for(var n=o.size,l=0;l<n;l++){var c=o.get(l);s.kj(u,c)}s.mn(u,!0)},b.prototype.WW=function(u,o){for(var s=this.j.g,n=s.md;n!=-1;n=s.ve(n))if(n==o)for(var l=s.Ob(n);l!=-1;l=s.Sb(l)){var c=s.Ya(l);if(c!=-1)for(var d=s.V(c);d!=-1;){c=this.j.Ie(c);var f=this.j.Ie(d);(c=this.j.nR(c,f))!=-1&&(f=this.j.ya(c),this.j.Kb(c,u,1),this.j.Kb(f,u,2)),c=d,d=s.V(c)}}},b.prototype.YV=function(u,o,s,n){s=this.j.Ma(s),n=this.j.Ma(n);var l=new h.ja(0);l.Jb(256);for(var c=this.j.g,d=this.j.bh(),f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var g=this.j.Je(f);if(g!=-1){var w=g;do{if(this.j.Bb(w,d)!=1){var $=w,T=w,E=!1,O=0;do{if(this.j.Kb($,d,1),!E){var P=this.j.fh($);P&n&&this.j.af($)&s&&(T=$,E=!0)}E&&(l.add(this.j.vj(this.j.mm(this.j.lk($)))),u!=-1&&(P=this.j.fh($))&n&&(O|=P=this.j.Bb($,u))),$=this.j.kc($)}while($!=T);E&&0<this.j.Mp(this.j.$e(T))&&($=c.Kg(1736),this.GQ($,l),o!=-1&&c.CJ($,o,O)),l.clear(!1)}w=this.j.kc(this.j.ya(w))}while(w!=g)}}this.j.Lg(d)},b.prototype.AP=function(u,o,s,n){this.j.tW();var l=-1;u!=-1&&(l=this.j.bh(),this.WW(l,s)),this.YV(l,u,o,s),l!=-1&&(this.j.Lg(l),l=-1);var c=this.j.g;for(u=0,l=c.md;l!=-1;l=c.ve(l))l!=o&&l!=s&&(n.add(l),u++);n.Wd(0,u,function(d,f){return(d=c.qz(c.Ob(d)))<(f=c.qz(c.Ob(f)))?-1:d==f?0:1})},b.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},b}();h.Hg=k}(U||(U={})),function(h){var k=function(){function b(u){u!==void 0?this.Jt(u):this.MB()}return b.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},b.prototype.Nb=function(u){return this==u||u instanceof b&&this.eb==u.eb&&this.jb==u.jb&&this.Lb==u.Lb&&this.qb==u.qb&&this.bb==u.bb&&this.Qb==u.Qb},b.prototype.dc=function(){return h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj()},b.prototype.Gh=function(u,o){var s=this.qb*u.x+this.bb*u.y+this.Qb;o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=s},b.prototype.aY=function(u,o,s){for(var n=0;n<o;n++){var l=u[n].x,c=u[n].y,d=this.eb*l+this.jb*c+this.Lb;l=this.qb*l+this.bb*c+this.Qb,s[n]!=null?s[n].na(d,l):s[n]=h.h.construct(d,l)}},b.prototype.multiply=function(u){b.multiply(this,u,this)},b.multiply=function(u,o,s){var n=u.eb*o.eb+u.qb*o.jb,l=u.jb*o.eb+u.bb*o.jb,c=u.Lb*o.eb+u.Qb*o.jb+o.Lb,d=u.eb*o.qb+u.qb*o.bb,f=u.jb*o.qb+u.bb*o.bb;u=u.Lb*o.qb+u.Qb*o.bb+o.Qb,s.eb=n,s.jb=l,s.Lb=c,s.qb=d,s.bb=f,s.Qb=u},b.prototype.Qf=function(){var u=new b;return u.eb=this.eb,u.jb=this.jb,u.Lb=this.Lb,u.qb=this.qb,u.bb=this.bb,u.Qb=this.Qb,u},b.prototype.hC=function(u){if(!u.B()){for(var o=[],s=0;4>s;s++)o[s]=new h.h;u.iB(o),this.bY(o,o),u.bx(o,4)}},b.prototype.bY=function(u,o){for(var s=0;s<u.length;s++){var n=new h.h,l=u[s];n.x=this.eb*l.x+this.jb*l.y+this.Lb,n.y=this.qb*l.x+this.bb*l.y+this.Qb,o[s]=n}},b.prototype.kS=function(u,o){u.B()||o.B()||u.S()==0||u.da()==0?this.lx():(this.jb=this.qb=0,this.eb=o.S()/u.S(),this.bb=o.da()/u.da(),this.Lb=o.v-u.v*this.eb,this.Qb=o.G-u.G*this.bb)},b.prototype.$X=function(u){var o=new h.h,s=new h.h;o.na(this.eb,this.qb),s.na(this.jb,this.bb),o.sub(o);var n=.5*o.Uk();return o.na(this.eb,this.qb),s.na(this.jb,this.bb),o.add(s),u*(n>(o=.5*o.Uk())?Math.sqrt(n):Math.sqrt(o))},b.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},b.prototype.isIdentity=function(u){if(u!==void 0){var o=h.h.construct(0,1);return this.Gh(o,o),o.sub(h.h.construct(0,1)),o.Uk()>u*u?!1:(o.na(0,0),this.Gh(o,o),!(o.Uk()>u*u)&&(o.na(1,0),this.Gh(o,o),o.sub(h.h.construct(1,0)),o.Uk()<=u*u))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},b.prototype.Di=function(u){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*u*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},b.prototype.ig=function(u,o){this.eb=1,this.jb=0,this.Lb=u,this.qb=0,this.bb=1,this.Qb=o},b.prototype.Jt=function(u,o){o!==void 0?(this.eb=u,this.qb=this.Lb=this.jb=0,this.bb=o,this.Qb=0):this.Jt(u,u)},b.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},b.prototype.kX=function(u){this.lX(Math.cos(u),Math.sin(u))},b.prototype.lX=function(u,o){this.eb=u,this.jb=-o,this.Lb=0,this.qb=o,this.bb=u,this.Qb=0},b.prototype.shift=function(u,o){this.Lb+=u,this.Qb+=o},b.prototype.scale=function(u,o){this.eb*=u,this.jb*=u,this.Lb*=u,this.qb*=o,this.bb*=o,this.Qb*=o},b.prototype.flipX=function(u,o){this.eb=-this.eb,this.jb=-this.jb,this.Lb=u+o-this.Lb},b.prototype.flipY=function(u,o){this.qb=-this.qb,this.bb=-this.bb,this.Qb=u+o-this.Qb},b.prototype.rotate=function(u){var o=new b;o.kX(u),this.multiply(o)},b.prototype.inverse=function(u){if(u!==void 0){var o=this.eb*this.bb-this.jb*this.qb;o==0?u.lx():(o=1/o,u.Lb=(this.jb*this.Qb-this.Lb*this.bb)*o,u.Qb=(this.Lb*this.qb-this.eb*this.Qb)*o,u.eb=this.bb*o,u.jb=-this.jb*o,u.qb=-this.qb*o,u.bb=this.eb*o)}else this.inverse(this)},b}();h.Ed=k}(U||(U={})),function(h){var k=function(){function b(){}return b.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},b.prototype.Jt=function(u,o){this.eb=u,this.jb=this.pf=this.qb=0,this.bb=o,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},b.prototype.translate=function(u,o,s){this.Lb+=u,this.Qb+=o,this.Cg+=s},b.prototype.hC=function(u){if(!u.B()){for(var o=new h.Od[8],s=0;8>s;s++)o[s]=new h.Od;u.iB(o),this.transform(o,8,o),u.bx(o)}},b.prototype.transform=function(u,o,s){for(var n=0;n<o;n++){var l=new h.Od,c=u[n];l.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,l.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,l.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,s[n]=l}},b.prototype.hp=function(u){var o=new h.Od;return o.x=this.eb*u.x+this.jb*u.y+this.Ve*u.z+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.We*u.z+this.Qb,o.z=this.pf*u.x+this.Ye*u.y+this.Ze*u.z+this.Cg,o},b.prototype.Bg=function(u){b.multiply(this,u,this)},b.multiply=function(u,o,s){var n=u.eb*o.eb+u.qb*o.jb+u.pf*o.Ve,l=u.eb*o.qb+u.qb*o.bb+u.pf*o.We,c=u.eb*o.pf+u.qb*o.Ye+u.pf*o.Ze,d=u.jb*o.eb+u.bb*o.jb+u.Ye*o.Ve,f=u.jb*o.qb+u.bb*o.bb+u.Ye*o.We,g=u.jb*o.pf+u.bb*o.Ye+u.Ye*o.Ze,w=u.Ve*o.eb+u.We*o.jb+u.Ze*o.Ve,$=u.Ve*o.qb+u.We*o.bb+u.Ze*o.We,T=u.Ve*o.pf+u.We*o.Ye+u.Ze*o.Ze,E=u.Lb*o.eb+u.Qb*o.jb+u.Cg*o.Ve+o.Lb,O=u.Lb*o.qb+u.Qb*o.bb+u.Cg*o.We+o.Qb;u=u.Lb*o.pf+u.Qb*o.Ye+u.Cg*o.Ze+o.Cg,s.eb=n,s.qb=l,s.pf=c,s.jb=d,s.bb=f,s.Ye=g,s.Ve=w,s.We=$,s.Ze=T,s.Lb=E,s.Qb=O,s.Cg=u},b.inverse=function(u,o){var s=u.eb*(u.bb*u.Ze-u.Ye*u.We)-u.qb*(u.jb*u.Ze-u.Ye*u.Ve)+u.pf*(u.jb*u.We-u.bb*u.Ve);if(s==0)throw h.i.ga("math singularity");var n=1/s;s=(u.bb*u.Ze-u.Ye*u.We)*n;var l=-(u.jb*u.Ze-u.Ye*u.Ve)*n,c=(u.jb*u.We-u.bb*u.Ve)*n,d=-(u.qb*u.Ze-u.We*u.pf)*n,f=(u.eb*u.Ze-u.pf*u.Ve)*n,g=-(u.eb*u.We-u.qb*u.Ve)*n,w=(u.qb*u.Ye-u.pf*u.bb)*n,$=-(u.eb*u.Ye-u.pf*u.jb)*n;n*=u.eb*u.bb-u.qb*u.jb;var T=-(u.Lb*s+u.Qb*l+u.Cg*c),E=-(u.Lb*d+u.Qb*f+u.Cg*g);u=-(u.Lb*w+u.Qb*$+u.Cg*n),o.eb=s,o.qb=d,o.pf=w,o.jb=l,o.bb=f,o.Ye=$,o.Ve=c,o.We=g,o.Ze=n,o.Lb=T,o.Qb=E,o.Cg=u},b.prototype.Qf=function(){var u=new b;return u.eb=this.eb,u.qb=this.qb,u.pf=this.pf,u.jb=this.jb,u.bb=this.bb,u.Ye=this.Ye,u.Ve=this.Ve,u.We=this.We,u.Ze=this.Ze,u.Lb=this.Lb,u.Qb=this.Qb,u.Cg=this.Cg,u},b}();h.FY=k}(U||(U={})),function(h){var k=function(u){function o(s){if(s!==void 0)s=u.call(this,s.dc(),s)||this;else{(s=u.call(this)||this).dg=[],s.dg[0]=0,s.Ba=1,s.wh=[];for(var n=0;10>n;n++)s.wh[n]=-1;s.wh[s.dg[0]]=0}return s.lq=!0,s}return xt(o,u),o.prototype.se=function(s){this.hasAttribute(s)||(this.wh[s]=0,this.eD())},o.prototype.removeAttribute=function(s){if(s==0)throw h.i.O("Position attribue cannot be removed");this.hasAttribute(s)&&(this.wh[s]=-1,this.eD())},o.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var s=0;s<this.wh.length;s++)this.wh[s]=-1;this.wh[this.dg[0]]=0,this.lq=!0},o.prototype.zF=function(){return b.fz().add(this)},o.pg=function(){return b.fz().VR()},o.prototype.oM=function(){var s=this.dc();return new h.sa(s,this)},o.prototype.eD=function(){for(var s=this.Ba=0,n=0;10>s;s++)0<=this.wh[s]&&(this.dg[n]=s,this.wh[s]=n,n++,this.Ba++);this.lq=!0},o.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},o.prototype.Nb=function(s){if(s==null)return!1;if(s==this)return!0;if(!(s instanceof o)||s.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.dg[n]!=s.dg[n])return!1;return this.lq==s.lq},o.prototype.BG=function(s){if(s.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.dg[n]!=s.dg[n])return!1;return!0},o.Kw=function(s,n){for(var l=[],c=0;c<s.Ba;c++)l[c]=-1;c=0;for(var d=s.Ba;c<d;c++)l[c]=n.Rf(s.ld(c));return l},o.wR=function(s,n){return(s=new o(s)).se(n),s.zF()},o.xR=function(s,n){for(var l=null,c=0;10>c;c++)!s.hasAttribute(c)&&n.hasAttribute(c)&&(l==null&&(l=new o(s)),l.se(c));return l!=null?l.zF():s},o}(h.sa);h.fe=k;var b=function(){function u(){this.map=[];var o=new k;this.add(o),(o=new k).se(1),this.add(o)}return u.fz=function(){return u.XK},u.prototype.VR=function(){return u.gt},u.prototype.add=function(o){var s=o.dc();if(u.gt!=null&&u.gt.dc()==s&&o.BG(u.gt))return u.gt;if(u.Fw!=null&&u.Fw.dc()==s&&o.BG(u.Fw))return u.Fw;var n=null;return this.map[s]!==void 0&&(n=this.map[s]),n==null&&((n=o.oM()).Ba==1?u.gt=n:n.Ba==2&&n.ld(1)==1?u.Fw=n:this.map[s]=n),n},u.XK=new u,u}()}(U||(U={}));var pn={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},ay={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Xo=new(function(){function h(){this.MM=50,this.pp=new Map,this.ij=[]}return h.prototype.clear=function(){this.ij.length=0,this.pp.clear()},h.prototype.delete=function(k){return!!this.pp.delete(k)&&(this.ij.splice(this.ij.indexOf(k),1),!0)},h.prototype.get=function(k){var b=this.pp.get(k);if(b!==void 0)return this.ij[0]!==k&&(this.ij.splice(this.ij.indexOf(k),1),this.ij.unshift(k)),b},h.prototype.has=function(k){return this.pp.has(k)},h.prototype.set=function(k,b){return this.get(k)!==void 0&&this.delete(k),this.ij.unshift(k),this.pp.set(k,b),this.jM(),this},h.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var k=this.ij.pop();this.pp.delete(k)}},h}()),_e=((Pi={}).convertJSONToGeometry=function(h){return U.ac.aP(h)},Pi.hasM=function(h){return h.hasAttribute(U.Kh.M)},Pi.hasZ=function(h){return h.hasAttribute(U.Kh.Z)},Pi.getPointX=function(h){return h.Ng()},Pi.getPointY=function(h){return h.kh()},Pi.getPointZ=function(h){return h.XR()},Pi.getPointM=function(h){return h.uR()},Pi.getXMin=function(h){return h.gs()},Pi.getYMin=function(h){return h.js()},Pi.getXMax=function(h){return h.fs()},Pi.getYMax=function(h){return h.hs()},Pi.getZExtent=function(h){return h.Vg(U.Kh.Z,0)},Pi.getMExtent=function(h){return h.Vg(U.Kh.M,0)},Pi.exportPaths=function(h){var k=[],b=h.ea(),u=null,o=null,s=h.hasAttribute(U.Kh.Z),n=h.hasAttribute(U.Kh.M);s&&(u=h.vb(U.Kh.Z)),n&&(o=h.vb(U.Kh.M));for(var l=new U.h,c=0;c<b;c++){for(var d=h.Ca(c),f=h.Ka(c),g=0,w=0,$=NaN,T=NaN,E=NaN,O=NaN,P=h.ec(c),R=[],F=d;F<d+f;F++){h.D(F,l),O=E=NaN;var V=[l.x,l.y];s&&(E=u.get(F),V.push(E)),n&&(O=o.get(F),V.push(O)),F==d&&P&&(g=l.x,w=l.y,$=E,T=O),R.push(V)}!P||g==l.x&&w==l.y&&(!s||isNaN($)&&isNaN(E)||$==E)&&(!n||isNaN(T)&&isNaN(O)||T==O)||R.push(R[0].slice(0)),k.push(R)}return k},Pi.exportPathsFlat=function(){},Pi.exportPoints=function(h){var k=h.hasAttribute(U.Kh.Z),b=h.hasAttribute(U.Kh.M),u=null,o=null;k&&(u=h.vb(U.Kh.Z)),b&&(o=h.vb(U.Kh.M));for(var s=new U.h,n=h.I(),l=[],c=0;c<n;c++){h.D(c,s);var d=[s.x,s.y];k&&d.push(u.get(c)),b&&d.push(o.get(c)),l.push(d)}return l},Pi.exportPointsFlat=function(){},Pi),tl=new Map;return function(){function h(){}return h.buffer=yi,h.clip=C,h.contains=j,h.convexHull=Ce,h.crosses=D,h.cut=N,h.densify=ry,h.difference=Ne,h.disjoint=ne,h.distance=z,h.equals=W,h.extendedSpatialReferenceInfo=A,h.generalize=Vd,h.geodesicArea=sy,h.geodesicBuffer=Nt,h.geodesicDensify=gb,h.geodesicLength=wb,h.intersect=He,h.intersects=Y,h.isSimple=ye,h.nearestCoordinate=ar,h.nearestVertex=Nc,h.nearestVertices=Zo,h.offset=yt,h.overlaps=oe,h.planarArea=vb,h.planarLength=bb,h.relate=ue,h.simplify=Se,h.symmetricDifference=Le,h.touches=K,h.union=Pe,h.within=ee,h.rotate=U.Dx.rotate,h.flipHorizontal=U.Dx.EQ,h.flipVertical=U.Dx.FQ,h.intersectLinesToPoints=Mb,h.ExtendedParams=U.tC,h.clearDefaultSpatialReferenceTolerance=Ib,h.changeDefaultSpatialReferenceTolerance=Tb,h._enableProjection=_b,h._project=$b,h._getTransformation=Sb,h._getTransformationBySuitability=xb,h}()}var r=i();r!==void 0&&(t.exports=r)}(ag,ag.exports);var qR=ag.exports;const pt=LN(qR),Foe=Doe({__proto__:null,default:pt},[qR]),zoe=Object.freeze(Object.defineProperty({__proto__:null,G:pt,g:Foe},Symbol.toStringTag,{value:"Module"})),Mt={convertToGEGeometry:Voe,exportPoint:Goe,exportPolygon:qoe,exportPolyline:Uoe,exportMultipoint:Boe,exportExtent:Hoe};function Voe(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function Goe(t,e,i){const r=t.hasZ(e),a=t.hasM(e),p=new Ue({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return r&&(p.z=t.getPointZ(e)),a&&(p.m=t.getPointM(e)),p.cache._geVersion=e,p}function qoe(t,e,i){const r=new on({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return r.cache._geVersion=e,r}function Uoe(t,e,i){const r=new _s({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return r.cache._geVersion=e,r}function Boe(t,e,i){const r=new xd({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return r.cache._geVersion=e,r}function Hoe(t,e,i){const r=t.hasZ(e),a=t.hasM(e),p=new vt({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(r){const y=t.getZExtent(e);p.zmin=y.vmin,p.zmax=y.vmax}if(a){const y=t.getMExtent(e);p.mmin=y.vmin,p.mmax=y.vmax}return p.cache._geVersion=e,p}const Woe=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Mt},Symbol.toStringTag,{value:"Module"}));function Pt(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function Joe(t){return pt.extendedSpatialReferenceInfo(t)}function Koe(t,e){return pt.clip(Mt,Pt(t),t,e)}function Yoe(t,e){return pt.cut(Mt,Pt(t),t,e)}function Zoe(t,e){return pt.contains(Mt,Pt(t),t,e)}function Xoe(t,e){return pt.crosses(Mt,Pt(t),t,e)}function Qoe(t,e,i){return pt.distance(Mt,Pt(t),t,e,i)}function eae(t,e){return pt.equals(Mt,Pt(t),t,e)}function tae(t,e){return pt.intersects(Mt,Pt(t),t,e)}function iae(t,e){return pt.touches(Mt,Pt(t),t,e)}function rae(t,e){return pt.within(Mt,Pt(t),t,e)}function sae(t,e){return pt.disjoint(Mt,Pt(t),t,e)}function nae(t,e){return pt.overlaps(Mt,Pt(t),t,e)}function oae(t,e,i){return pt.relate(Mt,Pt(t),t,e,i)}function aae(t){return pt.isSimple(Mt,Pt(t),t)}function lae(t){return pt.simplify(Mt,Pt(t),t)}function uae(t,e=!1){return pt.convexHull(Mt,Pt(t),t,e)}function hae(t,e){return pt.difference(Mt,Pt(t),t,e)}function cae(t,e){return pt.symmetricDifference(Mt,Pt(t),t,e)}function pae(t,e){return pt.intersect(Mt,Pt(t),t,e)}function dae(t,e=null){return pt.union(Mt,Pt(t),t,e)}function fae(t,e,i,r,a,p){return pt.offset(Mt,Pt(t),t,e,i,r,a,p)}function yae(t,e,i,r=!1){return pt.buffer(Mt,Pt(t),t,e,i,r)}function mae(t,e,i,r,a,p){return pt.geodesicBuffer(Mt,Pt(t),t,e,i,r,a,p)}function gae(t,e,i=!0){return pt.nearestCoordinate(Mt,Pt(t),t,e,i)}function vae(t,e){return pt.nearestVertex(Mt,Pt(t),t,e)}function bae(t,e,i,r){return pt.nearestVertices(Mt,Pt(t),t,e,i,r)}function ex(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function wae(t,e,i){if(t==null)throw new md;const r=t.spatialReference;if((i=i??ex(t))==null)throw new md;const a=t.constructor.fromJSON(pt.rotate(t,e,i));return a.spatialReference=r,a}function _ae(t,e){if(t==null)throw new md;const i=t.spatialReference;if((e=e??ex(t))==null)throw new md;const r=t.constructor.fromJSON(pt.flipHorizontal(t,e));return r.spatialReference=i,r}function Sae(t,e){if(t==null)throw new md;const i=t.spatialReference;if((e=e??ex(t))==null)throw new md;const r=t.constructor.fromJSON(pt.flipVertical(t,e));return r.spatialReference=i,r}function xae(t,e,i,r){return pt.generalize(Mt,Pt(t),t,e,i,r)}function $ae(t,e,i){return pt.densify(Mt,Pt(t),t,e,i)}function UR(t,e,i,r=0){return pt.geodesicDensify(Mt,Pt(t),t,e,i,r)}function Tae(t,e){return pt.planarArea(Mt,Pt(t),t,e)}function Iae(t,e){return pt.planarLength(Mt,Pt(t),t,e)}function Mae(t,e,i){return pt.geodesicArea(Mt,Pt(t),t,e,i)}function Eae(t,e,i){return pt.geodesicLength(Mt,Pt(t),t,e,i)}function Aae(t,e){return pt.intersectLinesToPoints(Mt,Pt(t),t,e)}function kae(t,e){pt.changeDefaultSpatialReferenceTolerance(t,e)}function Oae(t){pt.clearDefaultSpatialReferenceTolerance(t)}let md=class extends Error{constructor(){super("Illegal Argument Exception")}};const ebe=Object.freeze(Object.defineProperty({__proto__:null,buffer:yae,changeDefaultSpatialReferenceTolerance:kae,clearDefaultSpatialReferenceTolerance:Oae,clip:Koe,contains:Zoe,convexHull:uae,crosses:Xoe,cut:Yoe,densify:$ae,difference:hae,disjoint:sae,distance:Qoe,equals:eae,extendedSpatialReferenceInfo:Joe,flipHorizontal:_ae,flipVertical:Sae,generalize:xae,geodesicArea:Mae,geodesicBuffer:mae,geodesicDensify:UR,geodesicLength:Eae,intersect:pae,intersectLinesToPoints:Aae,intersects:tae,isSimple:aae,nearestCoordinate:gae,nearestVertex:vae,nearestVertices:bae,offset:fae,overlaps:nae,planarArea:Tae,planarLength:Iae,relate:oae,rotate:wae,simplify:lae,symmetricDifference:cae,touches:iae,union:dae,within:rae},Symbol.toStringTag,{value:"Module"}));var u5;let gi=u5=class extends de{static from(t){return hc(u5,t)}constructor(t){super(t),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}};v([S({type:Number,json:{write:!0}})],gi.prototype,"dpi",void 0),v([S()],gi.prototype,"floors",void 0),v([S({type:String,json:{write:!0}})],gi.prototype,"gdbVersion",void 0),v([S({types:Nu,json:{read:Ba,write:!0}})],gi.prototype,"geometry",void 0),v([S({type:Number,json:{write:!0}})],gi.prototype,"geometryPrecision",void 0),v([S({type:Number,json:{write:!0}})],gi.prototype,"height",void 0),v([S({type:[Number],json:{write:!0}})],gi.prototype,"layerIds",void 0),v([S({type:["top","visible","all","popup"],json:{write:!0}})],gi.prototype,"layerOption",void 0),v([S({type:vt,json:{write:!0}})],gi.prototype,"mapExtent",void 0),v([S({type:Number,json:{write:!0}})],gi.prototype,"maxAllowableOffset",void 0),v([S({type:Boolean,json:{write:!0}})],gi.prototype,"returnFieldName",void 0),v([S({type:Boolean,json:{write:!0}})],gi.prototype,"returnGeometry",void 0),v([S({type:Boolean,json:{write:!0}})],gi.prototype,"returnM",void 0),v([S({type:Boolean,json:{write:!0}})],gi.prototype,"returnUnformattedValues",void 0),v([S({type:Boolean,json:{write:!0}})],gi.prototype,"returnZ",void 0),v([S({type:Je,json:{write:!0}})],gi.prototype,"spatialReference",void 0),v([S()],gi.prototype,"sublayers",void 0),v([S({type:ln,json:{write:!0}})],gi.prototype,"timeExtent",void 0),v([S({type:Number,json:{write:!0}})],gi.prototype,"tolerance",void 0),v([S({type:Number,json:{write:!0}})],gi.prototype,"width",void 0),gi=u5=v([B("esri.rest.support.IdentifyParameters")],gi);const BR=gi,Yy={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new _s({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Je.WebMercator}),minus180Line:new _s({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Je.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new _s({paths:[[[180,-180],[180,180]]],spatialReference:Je.WGS84}),minus180Line:new _s({paths:[[[-180,-180],[-180,180]]],spatialReference:Je.WGS84})}};function ec(t,e){return Math.ceil((t-e)/(2*e))}function HR(t,e){const i=Pf(t);for(const r of i)for(const a of r)a[0]+=e;return t}function Pf(t){return ic(t)?t.rings:t.paths}function B1(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function un(t){return typeof t=="string"?or(t):se(t)}function H1(t,e,i){const r={};for(const a in t){if(a==="declaredClass")continue;const p=t[a];if(p!=null&&typeof p!="function")if(Array.isArray(p)){r[a]=[];for(let y=0;y<p.length;y++)r[a][y]=H1(p[y])}else if(typeof p=="object")if(p.toJSON){const y=p.toJSON(i&&i[a]);r[a]=e?y:JSON.stringify(y)}else r[a]=e?p:JSON.stringify(p);else r[a]=p}return r}async function Cae(t,e,i,r){const a=un(t),p=e[0].spatialReference,y={...r,query:{...a.query,f:"json",sr:JSON.stringify(p),target:JSON.stringify({geometryType:Mc(e[0]),geometries:e}),cutter:JSON.stringify(i)}},m=await ot(a.path+"/cut",y),{cutIndexes:_,geometries:x=[]}=m.data;return{cutIndexes:_,geometries:x.map(M=>{const A=Ba(M);return A.spatialReference=p,A})}}function Pae(t){return{geometryType:Mc(t[0]),geometries:t.map(e=>e.toJSON())}}function WR(t,e,i){const r=vH(e);return t.map(a=>{const p=r.fromJSON(a);return p.spatialReference=i,p})}async function Nae(t,e,i){const r=typeof t=="string"?or(t):t,a=e[0].spatialReference,p=Mc(e[0]),y={...i,query:{...r.query,f:"json",sr:a.wkid??JSON.stringify(a),geometries:JSON.stringify(Pae(e))}},{data:m}=await ot(r.path+"/simplify",y);return WR(m.geometries,p,a)}const JR=me.getLogger("esri.geometry.support.normalizeUtils");function Rae(t){return t.type==="polygon"}function Lae(t){return t[0].type==="polygon"}function jae(t){return t[0].type==="polyline"}function Dae(t,e){if(!(t instanceof _s||t instanceof on)){const a="straightLineDensify: the input geometry is neither polyline nor polygon";throw JR.error(a),new ie(a)}const i=Pf(t),r=[];for(const a of i){const p=[];r.push(p),p.push([a[0][0],a[0][1]]);for(let y=0;y<a.length-1;y++){const m=a[y][0],_=a[y][1],x=a[y+1][0],M=a[y+1][1],A=Math.sqrt((x-m)*(x-m)+(M-_)*(M-_)),C=(M-_)/A,N=(x-m)/A,j=A/e;if(j>1){for(let Y=1;Y<=j-1;Y++){const K=Y*e,ee=N*K+m,ne=C*K+_;p.push([ee,ne])}const D=(A+Math.floor(j-1)*e)/2,z=N*D+m,W=C*D+_;p.push([z,W])}p.push([x,M])}}return Rae(t)?new on({rings:r,spatialReference:t.spatialReference}):new _s({paths:r,spatialReference:t.spatialReference})}function _T(t,e,i){if(e){const r=Dae(t,1e6);t=Lp(r,!0)}return i&&(t=HR(t,i)),t}function ST(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const a=ec(r,e);t[0]=r+a*(-2*e)}else if(r<i){const a=ec(r,i);t[0]=r+a*(-2*i)}}else{const r=t.x;if(r>e){const a=ec(r,e);t=t.clone().offset(a*(-2*e),0)}else if(r<i){const a=ec(r,i);t=t.clone().offset(a*(-2*i),0)}}return t}function Fae(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const a=e.cutIndexes[r],p=e.geometries[r],y=Pf(p);for(let m=0;m<y.length;m++){const _=y[m];_.some(x=>{if(x[0]<180)return!0;{let M=0;for(let C=0;C<_.length;C++){const N=_[C][0];M=N>M?N:M}M=Number(M.toFixed(9));const A=-360*ec(M,180);for(let C=0;C<_.length;C++){const N=p.getPoint(m,C);p.setPoint(m,C,N.clone().offset(A,0))}return!0}})}if(a===i){if(Lae(t))for(const m of Pf(p))t[a]=t[a].addRing(m);else if(jae(t))for(const m of Pf(p))t[a]=t[a].addPath(m)}else i=a,t[a]=p}return t}async function tx(t,e,i){if(!Array.isArray(t))return tx([t],e);e&&typeof e!="string"&&JR.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:(e==null?void 0:e.url)??_t.geometryServiceUrl;let a,p,y,m,_,x,M,A,C=0;const N=[],j=[];for(const ee of t)if(ee!=null)if(a||(a=ee.spatialReference,p=Jn(a),y=a.isWebMercator,x=y?102100:4326,m=Yy[x].maxX,_=Yy[x].minX,M=Yy[x].plus180Line,A=Yy[x].minus180Line),p)if(ee.type==="mesh")j.push(ee);else if(ee.type==="point")j.push(ST(ee.clone(),m,_));else if(ee.type==="multipoint"){const ne=ee.clone();ne.points=ne.points.map(oe=>ST(oe,m,_)),j.push(ne)}else if(ee.type==="extent"){const ne=ee.clone()._normalize(!1,!1,p);j.push(ne.rings?new on(ne):ne)}else if(ee.extent){const ne=ee.extent,oe=ec(ne.xmin,_)*(2*m);let ue=oe===0?ee.clone():HR(ee.clone(),oe);ne.offset(oe,0),ne.intersects(M)&&ne.xmax!==m?(C=ne.xmax>C?ne.xmax:C,ue=_T(ue,y),N.push(ue),j.push("cut")):ne.intersects(A)&&ne.xmin!==_?(C=ne.xmax*(2*m)>C?ne.xmax*(2*m):C,ue=_T(ue,y,360),N.push(ue),j.push("cut")):j.push(ue)}else j.push(ee.clone());else j.push(ee);else j.push(ee);let D=ec(C,m),z=-90;const W=D,Y=new _s;for(;D>0;){const ee=360*D-180;Y.addPath([[ee,z],[ee,-1*z]]),z*=-1,D--}if(N.length>0&&W>0){const ee=Fae(N,await Cae(r,N,Y,i)),ne=[],oe=[];for(let Se=0;Se<j.length;Se++){const Ce=j[Se];if(Ce!=="cut")oe.push(Ce);else{const Ne=ee.shift(),Le=t[Se];Le!=null&&Le.type==="polygon"&&Le.rings&&Le.rings.length>1&&Ne.rings.length>=Le.rings.length?(ne.push(Ne),oe.push("simplify")):oe.push(y?vu(Ne):Ne)}}if(!ne.length)return oe;const ue=await Nae(r,ne,i),ye=[];for(let Se=0;Se<oe.length;Se++){const Ce=oe[Se];Ce!=="simplify"?ye.push(Ce):ye.push(y?vu(ue.shift()):ue.shift())}return ye}const K=[];for(let ee=0;ee<j.length;ee++){const ne=j[ee];if(ne!=="cut")K.push(ne);else{const oe=N.shift();K.push(y===!0?vu(oe):oe)}}return K}function tbe(t,e){const i=Jn(e);if(i){const[r,a]=i.valid,p=a-r;if(t<r)for(;t<r;)t+=p;if(t>a)for(;t>a;)t-=p}return t}async function zae(t,e){const{WhereClause:i}=await we(()=>import("./WhereClause-1000016d.js").then(r=>r.W),["assets/WhereClause-1000016d.js","assets/executionError-c92d3b85.js"]);return i.create(t,e)}function X2(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}const KR=96;function YR(t,e){const i=e||t.extent,r=t.width,a=Jo(i&&i.spatialReference);return i&&r?i.width/r*a*eA*KR:0}function Vae(t,e){return t/(Jo(e)*eA*KR)}function Gae(t,e){const i=t.extent,r=t.width-(t.padding?t.padding.left+t.padding.right:0),a=Vae(e,i.spatialReference);return i.clone().expand(a*r/i.width)}function ibe(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?ZR(t.view.floors,e.floorInfo.floorField):null}function Hv(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?ZR(t,e.floorInfo.floorField):null}function ZR(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function xT(t,e,i){return e.flatten(({sublayers:a})=>a).length!==t.length?!0:!!t.some(a=>a.originIdOf("minScale")>i||a.originIdOf("maxScale")>i||a.originIdOf("renderer")>i||a.originIdOf("labelingInfo")>i||a.originIdOf("opacity")>i||a.originIdOf("labelsVisible")>i||a.originIdOf("source")>i)||!QR(t,e)}function XR(t,e,i){return!!t.some(r=>{const a=r.source;return!(!a||a.type==="map-layer"&&a.mapLayerId===r.id&&(a.gdbVersion==null||a.gdbVersion===i))||r.originIdOf("renderer")>Me.SERVICE||r.originIdOf("labelingInfo")>Me.SERVICE||r.originIdOf("opacity")>Me.SERVICE||r.originIdOf("labelsVisible")>Me.SERVICE})||!QR(t,e)}function QR(t,e){if(!t||!t.length||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:p})=>p&&p.toArray().reverse()).map(p=>p.id).toArray();if(t.length>i.length)return!1;let r=0;const a=i.length;for(const{id:p}of t){for(;r<a&&i[r]!==p;)r++;if(r>=a)return!1}return!0}function qae(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition&&e.layerDefinition.minScale!=null)}const $T=t=>t.spatialReference.wkid||JSON.stringify(t.spatialReference);function Uae(t,e){const{dpi:i,gdbVersion:r,geometry:a,geometryPrecision:p,height:y,layerOption:m,mapExtent:_,maxAllowableOffset:x,returnFieldName:M,returnGeometry:A,returnUnformattedValues:C,returnZ:N,spatialReference:j,timeExtent:D,tolerance:z,width:W}=t.toJSON(),{dynamicLayers:Y,layerDefs:K,layerIds:ee}=Bae(t),ne=e&&e.geometry!=null?e.geometry:null,oe={geometryPrecision:p,maxAllowableOffset:x,returnFieldName:M,returnGeometry:A,returnUnformattedValues:C,returnZ:N,tolerance:z},ue=ne&&ne.toJSON()||a;if(oe.imageDisplay=`${W},${y},${i}`,r&&(oe.gdbVersion=r),ue&&(delete ue.spatialReference,oe.geometry=JSON.stringify(ue),oe.geometryType=Mc(ue)),j?oe.sr=j.wkid||JSON.stringify(j):ue&&ue.spatialReference?oe.sr=$T(ue):_&&_.spatialReference&&(oe.sr=$T(_)),oe.time=D?[D.start,D.end].join(","):null,_){const{xmin:ye,ymin:Se,xmax:Ce,ymax:Ne}=_;oe.mapExtent=`${ye},${Se},${Ce},${Ne}`}return K&&(oe.layerDefs=K),Y&&!K&&(oe.dynamicLayers=Y),oe.layers=m==="popup"?"visible":m,ee&&!Y&&(oe.layers+=`:${ee.join(",")}`),oe}function Bae(t){var j,D;const{mapExtent:e,floors:i,width:r,sublayers:a,layerIds:p,layerOption:y,gdbVersion:m}=t,_=(D=(j=a==null?void 0:a.find(z=>z.layer!=null))==null?void 0:j.layer)==null?void 0:D.serviceSublayers,x=y==="popup",M={},A=YR({extent:e,width:r,spatialReference:e==null?void 0:e.spatialReference}),C=[],N=z=>{const W=A===0,Y=z.minScale===0||A<=z.minScale,K=z.maxScale===0||A>=z.maxScale;if(z.visible&&(W||Y&&K))if(z.sublayers)z.sublayers.forEach(N);else{if((p==null?void 0:p.includes(z.id))===!1||x&&(!z.popupTemplate||!z.popupEnabled))return;C.unshift(z)}};if(a==null||a.forEach(N),a&&!C.length)M.layerIds=[];else{const z=XR(C,_,m),W=C.map(Y=>{const K=Hv(i,Y);return Y.toExportImageJSON(K)});if(z)M.dynamicLayers=JSON.stringify(W);else{if(a){let K=C.map(({id:ee})=>ee);p&&(K=K.filter(ee=>p.includes(ee))),M.layerIds=K}else p!=null&&p.length&&(M.layerIds=p);const Y=Hae(i,C);if(Y!=null&&Y.length){const K={};for(const ee of Y)ee.definitionExpression&&(K[ee.id]=ee.definitionExpression);Object.keys(K).length&&(M.layerDefs=JSON.stringify(K))}}}return M}function Hae(t,e){const i=!!(t!=null&&t.length),r=e.filter(a=>a.definitionExpression!=null||i&&a.floorInfo!=null);return r.length?r.map(a=>{const p=Hv(t,a),y=X2(p,a.definitionExpression);return{id:a.id,definitionExpression:y??void 0}}):null}let wa=class extends de{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(e,i){return Nr.fromJSON({attributes:{...i.attributes},geometry:{...i.geometry}})}writeFeature(e,i){if(!e)return;const{attributes:r,geometry:a}=e;r&&(i.attributes={...r}),a!=null&&(i.geometry=a.toJSON(),i.geometryType=Q3.toJSON(a.type))}};v([S({type:String,json:{write:!0}})],wa.prototype,"displayFieldName",void 0),v([S({type:Nr})],wa.prototype,"feature",void 0),v([ge("feature",["attributes","geometry"])],wa.prototype,"readFeature",null),v([$e("feature")],wa.prototype,"writeFeature",null),v([S({type:Number,json:{write:!0}})],wa.prototype,"layerId",void 0),v([S({type:String,json:{write:!0}})],wa.prototype,"layerName",void 0),wa=v([B("esri.rest.support.IdentifyResult")],wa);const Wae=wa;async function Jae(t,e,i){const r=(e=Yae(e)).geometry?[e.geometry]:[],a=un(t);return a.path+="/identify",tx(r).then(p=>{const y=Uae(e,{geometry:p&&p[0]}),m=H1({...a.query,f:"json",...y}),_=B1(m,i);return ot(a.path,_).then(Kae).then(x=>Zae(x,e.sublayers))})}function Kae(t){const e=t.data;return e.results=e.results||[],e.exceededTransferLimit=Boolean(e.exceededTransferLimit),e.results=e.results.map(i=>Wae.fromJSON(i)),e}function Yae(t){return t=BR.from(t)}function Zae(t,e){if(!(e!=null&&e.length))return t;const i=new Map;function r(a){i.set(a.id,a),a.sublayers&&a.sublayers.forEach(r)}e.forEach(r);for(const a of t.results)a.feature.sourceLayer=i.get(a.layerId);return t}var h5;let jl=h5=class extends O1{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new h5({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};v([S()],jl.prototype,"displayValueEnabled",void 0),v([S()],jl.prototype,"max",void 0),v([S()],jl.prototype,"min",void 0),v([S()],jl.prototype,"step",void 0),v([S()],jl.prototype,"value",void 0),jl=h5=v([B("esri.support.Action.ActionSlider")],jl);const Xae=jl,eL={hide:"hide",hideChildren:"hide-children"};function Wv(t){if(t)return t.listMode!=null?t.listMode:void 0}function Qae(t){if(t)return t.minScale!=null?t.minScale:void 0}function ele(t){if(t)return t.maxScale!=null?t.maxScale:void 0}function tle(t){if(!t)return"inherited";const e=t.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof e=="boolean")return e?"independent":"inherited";const i=t.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":t.visibilityMode!=null?t.visibilityMode:"independent"}function tL(t){if(t&&(!("type"in t)||t.type!=="wmts")&&t.listMode!==eL.hideChildren)return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function ile(t){const e=t&&(t.get("layer.layer")||t.layer);if(!e)return!1;const i=e.get("capabilities.exportMap.supportsDynamicLayers");return typeof i!="boolean"||i}function rle(t){return Wv(t)!==eL.hide}function sle(t,e){if(!t||isNaN(e))return!1;const i=Qae(t),r=ele(t),a=i!=null&&!isNaN(i)&&i>0&&e>i,p=r!=null&&!isNaN(r)&&r>0&&e<r;return a||p}function iL(t,e){t&&t.sort((i,r)=>{const a=e.indexOf(i.uid),p=e.indexOf(r.uid);return a>p?-1:a<p?1:0})}function nle(t,e){const i=t==null?void 0:t.layer;if(!i)return;const r=tL(i);r&&iL(i.get(r),e)}function TT(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function Aw(t,e){var r;const i=(r=t.layer)==null?void 0:r.uid;return i!=null?e.find(a=>{var p;return((p=a.layer)==null?void 0:p.uid)===i}):null}function ole(t){const e=ale(t)?t:null,i=t==null?void 0:t.parent,r=(i==null?void 0:i.type)==="map-image"?e==null?void 0:e.source:null,a="";return r&&i?{layer:i,title:a,sublayerIds:[r.mapLayerId]}:{layer:t,title:a}}function ale(t){return!!(t!=null&&t.layer)}function rL(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,r=Array.isArray(t)?t:lle(t);i.push(...r)}}function lle(t){return t.split(",").map(e=>e.trim())}function Nf(t){return t&&typeof t.render=="function"}function ule(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const sL="esri-layer-list-panel",a0=`${sL}__content`,ra={base:sL,content:a0,contentLegend:`${a0}--legend`,contentString:`${a0}--string`,contentElement:`${a0}--html-element`,contentWidget:`${a0}--widget`},hle="legends";let Gs=class extends Ec(Yo){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(Ee(()=>this.content,e=>this._createLegend(e),St))}destroy(){this._legend=Wt(this._legend)}get className(){const{image:e}=this,i=this._getFirstWidget();return this._get("className")||(!e&&i?i.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){var a;const{listItem:e,_legend:i,content:r}=this;return!e||!(Array.isArray(r)&&r.length>1)&&!!i&&(!((a=i.activeLayerInfos)!=null&&a.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||((e==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return fe("div",{class:ra.base},this._renderContents())}_renderContent(e){const{_legend:i,disabled:r}=this;return!e||r?null:e==="legend"&&i?fe("div",{class:this.classes(ra.content,ra.contentLegend),key:i},i.render()):typeof e=="string"?fe("div",{class:this.classes(ra.content,ra.contentString),key:e,innerHTML:e}):Nf(e)?fe("div",{class:this.classes(ra.content,ra.contentWidget),key:e},e.render()):e instanceof HTMLElement?fe("div",{class:this.classes(ra.content,ra.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:i,view:r}=e;return i&&r?{view:r,layerInfos:[ole(i)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:i}=await we(()=>import("./Legend-2978bbd6.js"),["assets/Legend-2978bbd6.js","assets/EffectView-88cf4334.js","assets/pixelRangeUtils-cc28ceb4.js","assets/utils-0cc77677.js","assets/utils-7685c378.js","assets/symbolUtils-d3cda46c.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-3295b6c7.js","assets/devEnvironmentUtils-5002a058.js"]),{listItem:r}=this,a=new i(this._getLegendOptions());this._legend=a,this.notifyChange("className"),this.notifyChange("title");const p=Ee(()=>{var y,m;return[r==null?void 0:r.view,r==null?void 0:r.layer,(y=r==null?void 0:r.layer)==null?void 0:y.source,(m=r==null?void 0:r.layer)==null?void 0:m.parent]},()=>this._updateLegend(a),St);this.addHandles(p,hle),this.scheduleRender()}_hasLegend(e){const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:Nf(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let i=null;return e.some(r=>{const a=this._getWidget(r);return a&&(i=a),!!a}),i}return this._getWidget(e)}};v([S()],Gs.prototype,"_legend",void 0),v([S()],Gs.prototype,"className",null),v([S()],Gs.prototype,"content",void 0),v([S()],Gs.prototype,"disabled",null),v([S()],Gs.prototype,"image",void 0),v([S()],Gs.prototype,"listItem",void 0),v([S()],Gs.prototype,"title",null),v([S()],Gs.prototype,"open",void 0),v([S()],Gs.prototype,"visible",void 0),Gs=v([B("esri.widgets.LayerList.ListItemPanel")],Gs);const nL=Gs;var J0;const cle=De.ofType({key:"type",defaultKeyValue:"button",base:O1,typeMap:{button:RO,toggle:LO,slider:Xae}}),oL=De.ofType(cle),Zy="layer",kw="child-list-mode",ple="hide",dle="esri.widgets.LayerList.ListItem";let Kt=J0=class extends Ec(Xa(je)){constructor(t){super(t),this.actionsSections=new oL,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(De.ofType(J0)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([Ee(()=>this.layer,t=>this._watchLayerProperties(t),St),Ee(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),St),Ee(()=>this.view,t=>this._updateChildrenView(t),St),Ee(()=>this.panel,t=>this._setListItemOnPanel(t),St),Ee(()=>[this.layer,this.view],()=>this._getLayerView(),St)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){return this.get("panel.open")&&!t.hasOwnProperty("open")&&(t.open=!0),t?new nL(t):null}get title(){const t=this.get("layer.layer");return(!t||t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:r}=this;return!r&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return!sle(this.layer,this.get("view.scale"))}get visibilityMode(){return tle(this.layer)}clone(){return new J0({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_addChildren(t){if(this.handles.remove(kw),this.children.removeAll(),!t)return;t.forEach(i=>{this.handles.add(Ee(()=>i.listMode,()=>this._addChildren(t)),kw)});const e=t.filter(i=>Wv(i)!==ple);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.handles.add(t.on("change",()=>{this._addChildren(t)}),Zy)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>rle(e)?new J0({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(Po).reverse()}_watchLayerProperties(t){if(!this.handles||(this.handles.remove(Zy),this.handles.remove(kw),!t))return;if(this.handles.add(Ee(()=>t.listMode,()=>this._watchLayerProperties(t)),Zy),Wv(t)==="hide-children")return void this.children.removeAll();const e=tL(t);e&&this.handles.add(Ee(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},St),Zy)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const i=await e.whenLayerView(t);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};v([S({type:oL})],Kt.prototype,"actionsSections",void 0),v([S()],Kt.prototype,"actionsOpen",void 0),v([S()],Kt.prototype,"checkPublishStatusEnabled",void 0),v([S({type:De})],Kt.prototype,"children",void 0),v([S()],Kt.prototype,"childrenSortable",void 0),v([S({readOnly:!0})],Kt.prototype,"connectionStatus",null),v([S({readOnly:!0})],Kt.prototype,"error",null),v([S()],Kt.prototype,"hidden",void 0),v([S({readOnly:!0})],Kt.prototype,"incompatible",null),v([S()],Kt.prototype,"layer",void 0),v([S({readOnly:!0})],Kt.prototype,"layerView",void 0),v([S()],Kt.prototype,"listItemCreatedFunction",void 0),v([S()],Kt.prototype,"open",void 0),v([S({type:nL})],Kt.prototype,"panel",void 0),v([It("panel")],Kt.prototype,"castPanel",null),v([S()],Kt.prototype,"parent",void 0),v([S()],Kt.prototype,"sortable",void 0),v([S()],Kt.prototype,"title",null),v([S({readOnly:!0})],Kt.prototype,"publishing",null),v([S({readOnly:!0})],Kt.prototype,"updating",null),v([S()],Kt.prototype,"view",void 0),v([S()],Kt.prototype,"visible",null),v([S({readOnly:!0})],Kt.prototype,"visibleAtCurrentScale",null),v([S({readOnly:!0})],Kt.prototype,"visibilityMode",null),Kt=J0=v([B(dle)],Kt);const ix=Kt,wn={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},fle="hide",aL=De.ofType(ix);let Dl=class extends Wo.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new aL,this.view=null}initialize(){this.addHandles([Ee(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),St),Ee(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],wn.view)}destroy(){this.removeAllHandles(),this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,r,a){var N,j;const p=e==null?void 0:e.layer;if(!p)return;const y=(j=(N=this.view)==null?void 0:N.map)==null?void 0:j.layers,m=i?TT(i):y,_=r?TT(r):y;if(!m||!_)return;const{operationalItems:x}=this,M=(i==null?void 0:i.children)||x,A=(r==null?void 0:r.children)||x,C=_.length-a;e.parent=r||null,M.includes(e)&&M.remove(e),m.includes(p)&&m.remove(p),A.includes(e)||A.add(e,C),_.includes(p)||_.add(p,C)}_createLayerViewHandles(e){this.removeHandles(wn.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),wn.layerViews)}_createMapLayerHandles(e){this.removeHandles(wn.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),wn.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:r,checkPublishStatusEnabled:a}=this;return new ix({checkPublishStatusEnabled:a,layer:e,listItemCreatedFunction:r,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(i=>Wv(i)!==fle)}_watchLayersListMode(e){this.removeHandles(wn.layerListMode),e&&e.forEach(i=>{"listMode"in i&&this.addHandles(Ee(()=>i.listMode,()=>this._compileList()),wn.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const i=this._getViewableLayers(e);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(r=>{i.find(a=>a.layer===r)||i.add(this._createListItem(r))})}_removeItems(e){const{operationalItems:i}=this,r=[];i.forEach(a=>{a&&e&&e.includes(a.layer)||r.push(a)}),i.removeMany(r)}_sortItems(e){const{operationalItems:i}=this;i.sort((r,a)=>{const p=e.indexOf(r.layer),y=e.indexOf(a.layer);return p>y?-1:p<y?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([wn.mapLayers,wn.layerViews,wn.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([Ee(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),St),Ee(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),St)],wn.viewLayers)}};v([S()],Dl.prototype,"checkPublishStatusEnabled",void 0),v([S()],Dl.prototype,"listItemCreatedFunction",void 0),v([S({type:aL})],Dl.prototype,"operationalItems",void 0),v([S({readOnly:!0})],Dl.prototype,"state",null),v([S()],Dl.prototype,"view",void 0),Dl=v([B("esri.widgets.LayerList.LayerListViewModel")],Dl);const lL=Dl;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function IT(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,r)}return i}function Bo(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?IT(Object(i),!0).forEach(function(r){yle(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):IT(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function lg(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lg=function(e){return typeof e}:lg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function yle(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ka(){return Ka=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Ka.apply(this,arguments)}function mle(t,e){if(t==null)return{};var i={},r=Object.keys(t),a,p;for(p=0;p<r.length;p++)a=r[p],!(e.indexOf(a)>=0)&&(i[a]=t[a]);return i}function gle(t,e){if(t==null)return{};var i=mle(t,e),r,a;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(t);for(a=0;a<p.length;a++)r=p[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var vle="1.15.0";function za(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Qa=za(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),W1=za(/Edge/i),MT=za(/firefox/i),Rf=za(/safari/i)&&!za(/chrome/i)&&!za(/android/i),uL=za(/iP(ad|od|hone)/i),hL=za(/chrome/i)&&za(/android/i),cL={capture:!1,passive:!1};function zt(t,e,i){t.addEventListener(e,i,!Qa&&cL)}function kt(t,e,i){t.removeEventListener(e,i,!Qa&&cL)}function Jv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ble(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ko(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Jv(t,e):Jv(t,e))||r&&t===i)return t;if(t===i)break}while(t=ble(t))}return null}var ET=/\s+/g;function us(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(ET," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(ET," ")}}function Xe(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function Zp(t,e){var i="";if(typeof t=="string")i=t;else do{var r=Xe(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function pL(t,e,i){if(t){var r=t.getElementsByTagName(e),a=0,p=r.length;if(i)for(;a<p;a++)i(r[a],a);return r}return[]}function Lo(){var t=document.scrollingElement;return t||document.documentElement}function Ji(t,e,i,r,a){if(!(!t.getBoundingClientRect&&t!==window)){var p,y,m,_,x,M,A;if(t!==window&&t.parentNode&&t!==Lo()?(p=t.getBoundingClientRect(),y=p.top,m=p.left,_=p.bottom,x=p.right,M=p.height,A=p.width):(y=0,m=0,_=window.innerHeight,x=window.innerWidth,M=window.innerHeight,A=window.innerWidth),(e||i)&&t!==window&&(a=a||t.parentNode,!Qa))do if(a&&a.getBoundingClientRect&&(Xe(a,"transform")!=="none"||i&&Xe(a,"position")!=="static")){var C=a.getBoundingClientRect();y-=C.top+parseInt(Xe(a,"border-top-width")),m-=C.left+parseInt(Xe(a,"border-left-width")),_=y+p.height,x=m+p.width;break}while(a=a.parentNode);if(r&&t!==window){var N=Zp(a||t),j=N&&N.a,D=N&&N.d;N&&(y/=D,m/=j,A/=j,M/=D,_=y+M,x=m+A)}return{top:y,left:m,bottom:_,right:x,width:A,height:M}}}function AT(t,e,i){for(var r=fu(t,!0),a=Ji(t)[e];r;){var p=Ji(r)[i],y=void 0;if(i==="top"||i==="left"?y=a>=p:y=a<=p,!y)return r;if(r===Lo())break;r=fu(r,!1)}return!1}function gd(t,e,i,r){for(var a=0,p=0,y=t.children;p<y.length;){if(y[p].style.display!=="none"&&y[p]!==Qe.ghost&&(r||y[p]!==Qe.dragged)&&ko(y[p],i.draggable,t,!1)){if(a===e)return y[p];a++}p++}return null}function rx(t,e){for(var i=t.lastElementChild;i&&(i===Qe.ghost||Xe(i,"display")==="none"||e&&!Jv(i,e));)i=i.previousElementSibling;return i||null}function Hs(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Qe.clone&&(!e||Jv(t,e))&&i++;return i}function kT(t){var e=0,i=0,r=Lo();if(t)do{var a=Zp(t),p=a.a,y=a.d;e+=t.scrollLeft*p,i+=t.scrollTop*y}while(t!==r&&(t=t.parentNode));return[e,i]}function wle(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function fu(t,e){if(!t||!t.getBoundingClientRect)return Lo();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=Xe(i);if(i.clientWidth<i.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Lo();if(r||e)return i;r=!0}}while(i=i.parentNode);return Lo()}function _le(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Ow(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Lf;function dL(t,e){return function(){if(!Lf){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),Lf=setTimeout(function(){Lf=void 0},e)}}}function Sle(){clearTimeout(Lf),Lf=void 0}function fL(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function yL(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var ws="Sortable"+new Date().getTime();function xle(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(Xe(a,"display")==="none"||a===Qe.ghost)){t.push({target:a,rect:Ji(a)});var p=Bo({},t[t.length-1].rect);if(a.thisAnimationDuration){var y=Zp(a,!0);y&&(p.top-=y.f,p.left-=y.e)}a.fromRect=p}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(wle(t,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var p=!1,y=0;t.forEach(function(m){var _=0,x=m.target,M=x.fromRect,A=Ji(x),C=x.prevFromRect,N=x.prevToRect,j=m.rect,D=Zp(x,!0);D&&(A.top-=D.f,A.left-=D.e),x.toRect=A,x.thisAnimationDuration&&Ow(C,A)&&!Ow(M,A)&&(j.top-A.top)/(j.left-A.left)===(M.top-A.top)/(M.left-A.left)&&(_=Tle(j,C,N,a.options)),Ow(A,M)||(x.prevFromRect=M,x.prevToRect=A,_||(_=a.options.animation),a.animate(x,j,A,_)),_&&(p=!0,y=Math.max(y,_),clearTimeout(x.animationResetTimer),x.animationResetTimer=setTimeout(function(){x.animationTime=0,x.prevFromRect=null,x.fromRect=null,x.prevToRect=null,x.thisAnimationDuration=null},_),x.thisAnimationDuration=_)}),clearTimeout(e),p?e=setTimeout(function(){typeof r=="function"&&r()},y):typeof r=="function"&&r(),t=[]},animate:function(r,a,p,y){if(y){Xe(r,"transition",""),Xe(r,"transform","");var m=Zp(this.el),_=m&&m.a,x=m&&m.d,M=(a.left-p.left)/(_||1),A=(a.top-p.top)/(x||1);r.animatingX=!!M,r.animatingY=!!A,Xe(r,"transform","translate3d("+M+"px,"+A+"px,0)"),this.forRepaintDummy=$le(r),Xe(r,"transition","transform "+y+"ms"+(this.options.easing?" "+this.options.easing:"")),Xe(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Xe(r,"transition",""),Xe(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},y)}}}}function $le(t){return t.offsetWidth}function Tle(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var Wc=[],Cw={initializeByDefault:!0},J1={mount:function(e){for(var i in Cw)Cw.hasOwnProperty(i)&&!(i in e)&&(e[i]=Cw[i]);Wc.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Wc.push(e)},pluginEvent:function(e,i,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var p=e+"Global";Wc.forEach(function(y){i[y.pluginName]&&(i[y.pluginName][p]&&i[y.pluginName][p](Bo({sortable:i},r)),i.options[y.pluginName]&&i[y.pluginName][e]&&i[y.pluginName][e](Bo({sortable:i},r)))})},initializePlugins:function(e,i,r,a){Wc.forEach(function(m){var _=m.pluginName;if(!(!e.options[_]&&!m.initializeByDefault)){var x=new m(e,i,e.options);x.sortable=e,x.options=e.options,e[_]=x,Ka(r,x.defaults)}});for(var p in e.options)if(e.options.hasOwnProperty(p)){var y=this.modifyOption(e,p,e.options[p]);typeof y<"u"&&(e.options[p]=y)}},getEventProperties:function(e,i){var r={};return Wc.forEach(function(a){typeof a.eventProperties=="function"&&Ka(r,a.eventProperties.call(i[a.pluginName],e))}),r},modifyOption:function(e,i,r){var a;return Wc.forEach(function(p){e[p.pluginName]&&p.optionListeners&&typeof p.optionListeners[i]=="function"&&(a=p.optionListeners[i].call(e[p.pluginName],r))}),a}};function Ile(t){var e=t.sortable,i=t.rootEl,r=t.name,a=t.targetEl,p=t.cloneEl,y=t.toEl,m=t.fromEl,_=t.oldIndex,x=t.newIndex,M=t.oldDraggableIndex,A=t.newDraggableIndex,C=t.originalEvent,N=t.putSortable,j=t.extraEventProperties;if(e=e||i&&i[ws],!!e){var D,z=e.options,W="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Qa&&!W1?D=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(D=document.createEvent("Event"),D.initEvent(r,!0,!0)),D.to=y||i,D.from=m||i,D.item=a||i,D.clone=p,D.oldIndex=_,D.newIndex=x,D.oldDraggableIndex=M,D.newDraggableIndex=A,D.originalEvent=C,D.pullMode=N?N.lastPutMode:void 0;var Y=Bo(Bo({},j),J1.getEventProperties(r,e));for(var K in Y)D[K]=Y[K];i&&i.dispatchEvent(D),z[W]&&z[W].call(e,D)}}var Mle=["evt"],Kr=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,p=gle(r,Mle);J1.pluginEvent.bind(Qe)(e,i,Bo({dragEl:Ie,parentEl:Ti,ghostEl:at,rootEl:di,nextEl:Th,lastDownEl:ug,cloneEl:_i,cloneHidden:su,dragStarted:K0,putSortable:pr,activeSortable:Qe.active,originalEvent:a,oldIndex:Vp,oldDraggableIndex:jf,newIndex:ys,newDraggableIndex:Xl,hideGhostForTarget:bL,unhideGhostForTarget:wL,cloneNowHidden:function(){su=!0},cloneNowShown:function(){su=!1},dispatchSortableEvent:function(m){zr({sortable:i,name:m,originalEvent:a})}},p))};function zr(t){Ile(Bo({putSortable:pr,cloneEl:_i,targetEl:Ie,rootEl:di,oldIndex:Vp,oldDraggableIndex:jf,newIndex:ys,newDraggableIndex:Xl},t))}var Ie,Ti,at,di,Th,ug,_i,su,Vp,ys,jf,Xl,Xy,pr,gp=!1,Kv=!1,Yv=[],Yu,_n,Pw,Nw,OT,CT,K0,Jc,Df,Ff=!1,Qy=!1,hg,vr,Rw=[],c5=!1,Zv=[],Q2=typeof document<"u",em=uL,PT=W1||Qa?"cssFloat":"float",Ele=Q2&&!hL&&!uL&&"draggable"in document.createElement("div"),mL=function(){if(Q2){if(Qa)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),gL=function(e,i){var r=Xe(e),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),p=gd(e,0,i),y=gd(e,1,i),m=p&&Xe(p),_=y&&Xe(y),x=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Ji(p).width,M=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+Ji(y).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(p&&m.float&&m.float!=="none"){var A=m.float==="left"?"left":"right";return y&&(_.clear==="both"||_.clear===A)?"vertical":"horizontal"}return p&&(m.display==="block"||m.display==="flex"||m.display==="table"||m.display==="grid"||x>=a&&r[PT]==="none"||y&&r[PT]==="none"&&x+M>a)?"vertical":"horizontal"},Ale=function(e,i,r){var a=r?e.left:e.top,p=r?e.right:e.bottom,y=r?e.width:e.height,m=r?i.left:i.top,_=r?i.right:i.bottom,x=r?i.width:i.height;return a===m||p===_||a+y/2===m+x/2},kle=function(e,i){var r;return Yv.some(function(a){var p=a[ws].options.emptyInsertThreshold;if(!(!p||rx(a))){var y=Ji(a),m=e>=y.left-p&&e<=y.right+p,_=i>=y.top-p&&i<=y.bottom+p;if(m&&_)return r=a}}),r},vL=function(e){function i(p,y){return function(m,_,x,M){var A=m.options.group.name&&_.options.group.name&&m.options.group.name===_.options.group.name;if(p==null&&(y||A))return!0;if(p==null||p===!1)return!1;if(y&&p==="clone")return p;if(typeof p=="function")return i(p(m,_,x,M),y)(m,_,x,M);var C=(y?m:_).options.group.name;return p===!0||typeof p=="string"&&p===C||p.join&&p.indexOf(C)>-1}}var r={},a=e.group;(!a||lg(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=i(a.pull,!0),r.checkPut=i(a.put),r.revertClone=a.revertClone,e.group=r},bL=function(){!mL&&at&&Xe(at,"display","none")},wL=function(){!mL&&at&&Xe(at,"display","")};Q2&&!hL&&document.addEventListener("click",function(t){if(Kv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Kv=!1,!1},!0);var Zu=function(e){if(Ie){e=e.touches?e.touches[0]:e;var i=kle(e.clientX,e.clientY);if(i){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[ws]._onDragOver(r)}}},Ole=function(e){Ie&&Ie.parentNode[ws]._isOutsideThisEl(e.target)};function Qe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ka({},e),t[ws]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return gL(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(y,m){y.setData("Text",m.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Qe.supportPointer!==!1&&"PointerEvent"in window&&!Rf,emptyInsertThreshold:5};J1.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);vL(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:Ele,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?zt(t,"pointerdown",this._onTapStart):(zt(t,"mousedown",this._onTapStart),zt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(zt(t,"dragover",this),zt(t,"dragenter",this)),Yv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ka(this,xle())}Qe.prototype={constructor:Qe,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Jc=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,Ie):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,a=this.options,p=a.preventOnFilter,y=e.type,m=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,_=(m||e).target,x=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||_,M=a.filter;if(Fle(r),!Ie&&!(/mousedown|pointerdown/.test(y)&&e.button!==0||a.disabled)&&!x.isContentEditable&&!(!this.nativeDraggable&&Rf&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=ko(_,a.draggable,r,!1),!(_&&_.animated)&&ug!==_)){if(Vp=Hs(_),jf=Hs(_,a.draggable),typeof M=="function"){if(M.call(this,e,_,this)){zr({sortable:i,rootEl:x,name:"filter",targetEl:_,toEl:r,fromEl:r}),Kr("filter",i,{evt:e}),p&&e.cancelable&&e.preventDefault();return}}else if(M&&(M=M.split(",").some(function(A){if(A=ko(x,A.trim(),r,!1),A)return zr({sortable:i,rootEl:A,name:"filter",targetEl:_,fromEl:r,toEl:r}),Kr("filter",i,{evt:e}),!0}),M)){p&&e.cancelable&&e.preventDefault();return}a.handle&&!ko(x,a.handle,r,!1)||this._prepareDragStart(e,m,_)}}},_prepareDragStart:function(e,i,r){var a=this,p=a.el,y=a.options,m=p.ownerDocument,_;if(r&&!Ie&&r.parentNode===p){var x=Ji(r);if(di=p,Ie=r,Ti=Ie.parentNode,Th=Ie.nextSibling,ug=r,Xy=y.group,Qe.dragged=Ie,Yu={target:Ie,clientX:(i||e).clientX,clientY:(i||e).clientY},OT=Yu.clientX-x.left,CT=Yu.clientY-x.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,Ie.style["will-change"]="all",_=function(){if(Kr("delayEnded",a,{evt:e}),Qe.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!MT&&a.nativeDraggable&&(Ie.draggable=!0),a._triggerDragStart(e,i),zr({sortable:a,name:"choose",originalEvent:e}),us(Ie,y.chosenClass,!0)},y.ignore.split(",").forEach(function(M){pL(Ie,M.trim(),Lw)}),zt(m,"dragover",Zu),zt(m,"mousemove",Zu),zt(m,"touchmove",Zu),zt(m,"mouseup",a._onDrop),zt(m,"touchend",a._onDrop),zt(m,"touchcancel",a._onDrop),MT&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ie.draggable=!0),Kr("delayStart",this,{evt:e}),y.delay&&(!y.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(W1||Qa))){if(Qe.eventCanceled){this._onDrop();return}zt(m,"mouseup",a._disableDelayedDrag),zt(m,"touchend",a._disableDelayedDrag),zt(m,"touchcancel",a._disableDelayedDrag),zt(m,"mousemove",a._delayedDragTouchMoveHandler),zt(m,"touchmove",a._delayedDragTouchMoveHandler),y.supportPointer&&zt(m,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(_,y.delay)}else _()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ie&&Lw(Ie),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;kt(e,"mouseup",this._disableDelayedDrag),kt(e,"touchend",this._disableDelayedDrag),kt(e,"touchcancel",this._disableDelayedDrag),kt(e,"mousemove",this._delayedDragTouchMoveHandler),kt(e,"touchmove",this._delayedDragTouchMoveHandler),kt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?zt(document,"pointermove",this._onTouchMove):i?zt(document,"touchmove",this._onTouchMove):zt(document,"mousemove",this._onTouchMove):(zt(Ie,"dragend",this),zt(di,"dragstart",this._onDragStart));try{document.selection?cg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(gp=!1,di&&Ie){Kr("dragStarted",this,{evt:i}),this.nativeDraggable&&zt(document,"dragover",Ole);var r=this.options;!e&&us(Ie,r.dragClass,!1),us(Ie,r.ghostClass,!0),Qe.active=this,e&&this._appendGhost(),zr({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(_n){this._lastX=_n.clientX,this._lastY=_n.clientY,bL();for(var e=document.elementFromPoint(_n.clientX,_n.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(_n.clientX,_n.clientY),e!==i);)i=e;if(Ie.parentNode[ws]._isOutsideThisEl(e),i)do{if(i[ws]){var r=void 0;if(r=i[ws]._onDragOver({clientX:_n.clientX,clientY:_n.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);wL()}},_onTouchMove:function(e){if(Yu){var i=this.options,r=i.fallbackTolerance,a=i.fallbackOffset,p=e.touches?e.touches[0]:e,y=at&&Zp(at,!0),m=at&&y&&y.a,_=at&&y&&y.d,x=em&&vr&&kT(vr),M=(p.clientX-Yu.clientX+a.x)/(m||1)+(x?x[0]-Rw[0]:0)/(m||1),A=(p.clientY-Yu.clientY+a.y)/(_||1)+(x?x[1]-Rw[1]:0)/(_||1);if(!Qe.active&&!gp){if(r&&Math.max(Math.abs(p.clientX-this._lastX),Math.abs(p.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(at){y?(y.e+=M-(Pw||0),y.f+=A-(Nw||0)):y={a:1,b:0,c:0,d:1,e:M,f:A};var C="matrix(".concat(y.a,",").concat(y.b,",").concat(y.c,",").concat(y.d,",").concat(y.e,",").concat(y.f,")");Xe(at,"webkitTransform",C),Xe(at,"mozTransform",C),Xe(at,"msTransform",C),Xe(at,"transform",C),Pw=M,Nw=A,_n=p}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!at){var e=this.options.fallbackOnBody?document.body:di,i=Ji(Ie,!0,em,!0,e),r=this.options;if(em){for(vr=e;Xe(vr,"position")==="static"&&Xe(vr,"transform")==="none"&&vr!==document;)vr=vr.parentNode;vr!==document.body&&vr!==document.documentElement?(vr===document&&(vr=Lo()),i.top+=vr.scrollTop,i.left+=vr.scrollLeft):vr=Lo(),Rw=kT(vr)}at=Ie.cloneNode(!0),us(at,r.ghostClass,!1),us(at,r.fallbackClass,!0),us(at,r.dragClass,!0),Xe(at,"transition",""),Xe(at,"transform",""),Xe(at,"box-sizing","border-box"),Xe(at,"margin",0),Xe(at,"top",i.top),Xe(at,"left",i.left),Xe(at,"width",i.width),Xe(at,"height",i.height),Xe(at,"opacity","0.8"),Xe(at,"position",em?"absolute":"fixed"),Xe(at,"zIndex","100000"),Xe(at,"pointerEvents","none"),Qe.ghost=at,e.appendChild(at),Xe(at,"transform-origin",OT/parseInt(at.style.width)*100+"% "+CT/parseInt(at.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,a=e.dataTransfer,p=r.options;if(Kr("dragStart",this,{evt:e}),Qe.eventCanceled){this._onDrop();return}Kr("setupClone",this),Qe.eventCanceled||(_i=yL(Ie),_i.removeAttribute("id"),_i.draggable=!1,_i.style["will-change"]="",this._hideClone(),us(_i,this.options.chosenClass,!1),Qe.clone=_i),r.cloneId=cg(function(){Kr("clone",r),!Qe.eventCanceled&&(r.options.removeCloneOnHide||di.insertBefore(_i,Ie),r._hideClone(),zr({sortable:r,name:"clone"}))}),!i&&us(Ie,p.dragClass,!0),i?(Kv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(kt(document,"mouseup",r._onDrop),kt(document,"touchend",r._onDrop),kt(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",p.setData&&p.setData.call(r,a,Ie)),zt(document,"drop",r),Xe(Ie,"transform","translateZ(0)")),gp=!0,r._dragStartId=cg(r._dragStarted.bind(r,i,e)),zt(document,"selectstart",r),K0=!0,Rf&&Xe(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,a,p,y,m=this.options,_=m.group,x=Qe.active,M=Xy===_,A=m.sort,C=pr||x,N,j=this,D=!1;if(c5)return;function z(ut,ar){Kr(ut,j,Bo({evt:e,isOwner:M,axis:N?"vertical":"horizontal",revert:y,dragRect:a,targetRect:p,canSort:A,fromSortable:C,target:r,completed:Y,onMove:function(Zo,Vd){return tm(di,i,Ie,a,Zo,Ji(Zo),e,Vd)},changed:K},ar))}function W(){z("dragOverAnimationCapture"),j.captureAnimationState(),j!==C&&C.captureAnimationState()}function Y(ut){return z("dragOverCompleted",{insertion:ut}),ut&&(M?x._hideClone():x._showClone(j),j!==C&&(us(Ie,pr?pr.options.ghostClass:x.options.ghostClass,!1),us(Ie,m.ghostClass,!0)),pr!==j&&j!==Qe.active?pr=j:j===Qe.active&&pr&&(pr=null),C===j&&(j._ignoreWhileAnimating=r),j.animateAll(function(){z("dragOverAnimationComplete"),j._ignoreWhileAnimating=null}),j!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(r===Ie&&!Ie.animated||r===i&&!r.animated)&&(Jc=null),!m.dragoverBubble&&!e.rootEl&&r!==document&&(Ie.parentNode[ws]._isOutsideThisEl(e.target),!ut&&Zu(e)),!m.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),D=!0}function K(){ys=Hs(Ie),Xl=Hs(Ie,m.draggable),zr({sortable:j,name:"change",toEl:i,newIndex:ys,newDraggableIndex:Xl,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=ko(r,m.draggable,i,!0),z("dragOver"),Qe.eventCanceled)return D;if(Ie.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||j._ignoreWhileAnimating===r)return Y(!1);if(Kv=!1,x&&!m.disabled&&(M?A||(y=Ti!==di):pr===this||(this.lastPutMode=Xy.checkPull(this,x,Ie,e))&&_.checkPut(this,x,Ie,e))){if(N=this._getDirection(e,r)==="vertical",a=Ji(Ie),z("dragOverValid"),Qe.eventCanceled)return D;if(y)return Ti=di,W(),this._hideClone(),z("revert"),Qe.eventCanceled||(Th?di.insertBefore(Ie,Th):di.appendChild(Ie)),Y(!0);var ee=rx(i,m.draggable);if(!ee||Rle(e,N,this)&&!ee.animated){if(ee===Ie)return Y(!1);if(ee&&i===e.target&&(r=ee),r&&(p=Ji(r)),tm(di,i,Ie,a,r,p,e,!!r)!==!1)return W(),ee&&ee.nextSibling?i.insertBefore(Ie,ee.nextSibling):i.appendChild(Ie),Ti=i,K(),Y(!0)}else if(ee&&Nle(e,N,this)){var ne=gd(i,0,m,!0);if(ne===Ie)return Y(!1);if(r=ne,p=Ji(r),tm(di,i,Ie,a,r,p,e,!1)!==!1)return W(),i.insertBefore(Ie,ne),Ti=i,K(),Y(!0)}else if(r.parentNode===i){p=Ji(r);var oe=0,ue,ye=Ie.parentNode!==i,Se=!Ale(Ie.animated&&Ie.toRect||a,r.animated&&r.toRect||p,N),Ce=N?"top":"left",Ne=AT(r,"top","top")||AT(Ie,"top","top"),Le=Ne?Ne.scrollTop:void 0;Jc!==r&&(ue=p[Ce],Ff=!1,Qy=!Se&&m.invertSwap||ye),oe=Lle(e,r,p,N,Se?1:m.swapThreshold,m.invertedSwapThreshold==null?m.swapThreshold:m.invertedSwapThreshold,Qy,Jc===r);var He;if(oe!==0){var Pe=Hs(Ie);do Pe-=oe,He=Ti.children[Pe];while(He&&(Xe(He,"display")==="none"||He===at))}if(oe===0||He===r)return Y(!1);Jc=r,Df=oe;var yt=r.nextElementSibling,yi=!1;yi=oe===1;var Nt=tm(di,i,Ie,a,r,p,e,yi);if(Nt!==!1)return(Nt===1||Nt===-1)&&(yi=Nt===1),c5=!0,setTimeout(Ple,30),W(),yi&&!yt?i.appendChild(Ie):r.parentNode.insertBefore(Ie,yi?yt:r),Ne&&fL(Ne,0,Le-Ne.scrollTop),Ti=Ie.parentNode,ue!==void 0&&!Qy&&(hg=Math.abs(ue-Ji(r)[Ce])),K(),Y(!0)}if(i.contains(Ie))return Y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){kt(document,"mousemove",this._onTouchMove),kt(document,"touchmove",this._onTouchMove),kt(document,"pointermove",this._onTouchMove),kt(document,"dragover",Zu),kt(document,"mousemove",Zu),kt(document,"touchmove",Zu)},_offUpEvents:function(){var e=this.el.ownerDocument;kt(e,"mouseup",this._onDrop),kt(e,"touchend",this._onDrop),kt(e,"pointerup",this._onDrop),kt(e,"touchcancel",this._onDrop),kt(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(ys=Hs(Ie),Xl=Hs(Ie,r.draggable),Kr("drop",this,{evt:e}),Ti=Ie&&Ie.parentNode,ys=Hs(Ie),Xl=Hs(Ie,r.draggable),Qe.eventCanceled){this._nulling();return}gp=!1,Qy=!1,Ff=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),p5(this.cloneId),p5(this._dragStartId),this.nativeDraggable&&(kt(document,"drop",this),kt(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Rf&&Xe(document.body,"user-select",""),Xe(Ie,"transform",""),e&&(K0&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),at&&at.parentNode&&at.parentNode.removeChild(at),(di===Ti||pr&&pr.lastPutMode!=="clone")&&_i&&_i.parentNode&&_i.parentNode.removeChild(_i),Ie&&(this.nativeDraggable&&kt(Ie,"dragend",this),Lw(Ie),Ie.style["will-change"]="",K0&&!gp&&us(Ie,pr?pr.options.ghostClass:this.options.ghostClass,!1),us(Ie,this.options.chosenClass,!1),zr({sortable:this,name:"unchoose",toEl:Ti,newIndex:null,newDraggableIndex:null,originalEvent:e}),di!==Ti?(ys>=0&&(zr({rootEl:Ti,name:"add",toEl:Ti,fromEl:di,originalEvent:e}),zr({sortable:this,name:"remove",toEl:Ti,originalEvent:e}),zr({rootEl:Ti,name:"sort",toEl:Ti,fromEl:di,originalEvent:e}),zr({sortable:this,name:"sort",toEl:Ti,originalEvent:e})),pr&&pr.save()):ys!==Vp&&ys>=0&&(zr({sortable:this,name:"update",toEl:Ti,originalEvent:e}),zr({sortable:this,name:"sort",toEl:Ti,originalEvent:e})),Qe.active&&((ys==null||ys===-1)&&(ys=Vp,Xl=jf),zr({sortable:this,name:"end",toEl:Ti,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Kr("nulling",this),di=Ie=Ti=at=Th=_i=ug=su=Yu=_n=K0=ys=Xl=Vp=jf=Jc=Df=pr=Xy=Qe.dragged=Qe.ghost=Qe.clone=Qe.active=null,Zv.forEach(function(e){e.checked=!0}),Zv.length=Pw=Nw=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Ie&&(this._onDragOver(e),Cle(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,a=0,p=r.length,y=this.options;a<p;a++)i=r[a],ko(i,y.draggable,this.el,!1)&&e.push(i.getAttribute(y.dataIdAttr)||Dle(i));return e},sort:function(e,i){var r={},a=this.el;this.toArray().forEach(function(p,y){var m=a.children[y];ko(m,this.options.draggable,a,!1)&&(r[p]=m)},this),i&&this.captureAnimationState(),e.forEach(function(p){r[p]&&(a.removeChild(r[p]),a.appendChild(r[p]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return ko(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var a=J1.modifyOption(this,e,i);typeof a<"u"?r[e]=a:r[e]=i,e==="group"&&vL(r)},destroy:function(){Kr("destroy",this);var e=this.el;e[ws]=null,kt(e,"mousedown",this._onTapStart),kt(e,"touchstart",this._onTapStart),kt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(kt(e,"dragover",this),kt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yv.splice(Yv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!su){if(Kr("hideClone",this),Qe.eventCanceled)return;Xe(_i,"display","none"),this.options.removeCloneOnHide&&_i.parentNode&&_i.parentNode.removeChild(_i),su=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(su){if(Kr("showClone",this),Qe.eventCanceled)return;Ie.parentNode==di&&!this.options.group.revertClone?di.insertBefore(_i,Ie):Th?di.insertBefore(_i,Th):di.appendChild(_i),this.options.group.revertClone&&this.animate(Ie,_i),Xe(_i,"display",""),su=!1}}};function Cle(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function tm(t,e,i,r,a,p,y,m){var _,x=t[ws],M=x.options.onMove,A;return window.CustomEvent&&!Qa&&!W1?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=e,_.from=t,_.dragged=i,_.draggedRect=r,_.related=a||e,_.relatedRect=p||Ji(e),_.willInsertAfter=m,_.originalEvent=y,t.dispatchEvent(_),M&&(A=M.call(x,_,y)),A}function Lw(t){t.draggable=!1}function Ple(){c5=!1}function Nle(t,e,i){var r=Ji(gd(i.el,0,i.options,!0)),a=10;return e?t.clientX<r.left-a||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-a||t.clientY<r.bottom&&t.clientX<r.left}function Rle(t,e,i){var r=Ji(rx(i.el,i.options.draggable)),a=10;return e?t.clientX>r.right+a||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+a}function Lle(t,e,i,r,a,p,y,m){var _=r?t.clientY:t.clientX,x=r?i.height:i.width,M=r?i.top:i.left,A=r?i.bottom:i.right,C=!1;if(!y){if(m&&hg<x*a){if(!Ff&&(Df===1?_>M+x*p/2:_<A-x*p/2)&&(Ff=!0),Ff)C=!0;else if(Df===1?_<M+hg:_>A-hg)return-Df}else if(_>M+x*(1-a)/2&&_<A-x*(1-a)/2)return jle(e)}return C=C||y,C&&(_<M+x*p/2||_>A-x*p/2)?_>M+x/2?1:-1:0}function jle(t){return Hs(Ie)<Hs(t)?1:-1}function Dle(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function Fle(t){Zv.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&Zv.push(r)}}function cg(t){return setTimeout(t,0)}function p5(t){return clearTimeout(t)}Q2&&zt(document,"touchmove",function(t){(Qe.active||gp)&&t.cancelable&&t.preventDefault()});Qe.utils={on:zt,off:kt,css:Xe,find:pL,is:function(e,i){return!!ko(e,i,e,!1)},extend:_le,throttle:dL,closest:ko,toggleClass:us,clone:yL,index:Hs,nextTick:cg,cancelNextTick:p5,detectDirection:gL,getChild:gd};Qe.get=function(t){return t[ws]};Qe.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Qe.utils=Bo(Bo({},Qe.utils),r.utils)),J1.mount(r)})};Qe.create=function(t,e){return new Qe(t,e)};Qe.version=vle;var Fi=[],Y0,d5,f5=!1,jw,Dw,Xv,Z0;function zle(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?zt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?zt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?zt(document,"touchmove",this._handleFallbackAutoScroll):zt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?kt(document,"dragover",this._handleAutoScroll):(kt(document,"pointermove",this._handleFallbackAutoScroll),kt(document,"touchmove",this._handleFallbackAutoScroll),kt(document,"mousemove",this._handleFallbackAutoScroll)),NT(),pg(),Sle()},nulling:function(){Xv=d5=Y0=f5=Z0=jw=Dw=null,Fi.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var a=this,p=(i.touches?i.touches[0]:i).clientX,y=(i.touches?i.touches[0]:i).clientY,m=document.elementFromPoint(p,y);if(Xv=i,r||this.options.forceAutoScrollFallback||W1||Qa||Rf){Fw(i,this.options,m,r);var _=fu(m,!0);f5&&(!Z0||p!==jw||y!==Dw)&&(Z0&&NT(),Z0=setInterval(function(){var x=fu(document.elementFromPoint(p,y),!0);x!==_&&(_=x,pg()),Fw(i,a.options,x,r)},10),jw=p,Dw=y)}else{if(!this.options.bubbleScroll||fu(m,!0)===Lo()){pg();return}Fw(i,this.options,fu(m,!1),!1)}}},Ka(t,{pluginName:"scroll",initializeByDefault:!0})}function pg(){Fi.forEach(function(t){clearInterval(t.pid)}),Fi=[]}function NT(){clearInterval(Z0)}var Fw=dL(function(t,e,i,r){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,p=(t.touches?t.touches[0]:t).clientY,y=e.scrollSensitivity,m=e.scrollSpeed,_=Lo(),x=!1,M;d5!==i&&(d5=i,pg(),Y0=e.scroll,M=e.scrollFn,Y0===!0&&(Y0=fu(i,!0)));var A=0,C=Y0;do{var N=C,j=Ji(N),D=j.top,z=j.bottom,W=j.left,Y=j.right,K=j.width,ee=j.height,ne=void 0,oe=void 0,ue=N.scrollWidth,ye=N.scrollHeight,Se=Xe(N),Ce=N.scrollLeft,Ne=N.scrollTop;N===_?(ne=K<ue&&(Se.overflowX==="auto"||Se.overflowX==="scroll"||Se.overflowX==="visible"),oe=ee<ye&&(Se.overflowY==="auto"||Se.overflowY==="scroll"||Se.overflowY==="visible")):(ne=K<ue&&(Se.overflowX==="auto"||Se.overflowX==="scroll"),oe=ee<ye&&(Se.overflowY==="auto"||Se.overflowY==="scroll"));var Le=ne&&(Math.abs(Y-a)<=y&&Ce+K<ue)-(Math.abs(W-a)<=y&&!!Ce),He=oe&&(Math.abs(z-p)<=y&&Ne+ee<ye)-(Math.abs(D-p)<=y&&!!Ne);if(!Fi[A])for(var Pe=0;Pe<=A;Pe++)Fi[Pe]||(Fi[Pe]={});(Fi[A].vx!=Le||Fi[A].vy!=He||Fi[A].el!==N)&&(Fi[A].el=N,Fi[A].vx=Le,Fi[A].vy=He,clearInterval(Fi[A].pid),(Le!=0||He!=0)&&(x=!0,Fi[A].pid=setInterval(function(){r&&this.layer===0&&Qe.active._onTouchMove(Xv);var yt=Fi[this.layer].vy?Fi[this.layer].vy*m:0,yi=Fi[this.layer].vx?Fi[this.layer].vx*m:0;typeof M=="function"&&M.call(Qe.dragged.parentNode[ws],yi,yt,t,Xv,Fi[this.layer].el)!=="continue"||fL(Fi[this.layer].el,yi,yt)}.bind({layer:A}),24))),A++}while(e.bubbleScroll&&C!==_&&(C=fu(C,!1)));f5=x}},30),_L=function(e){var i=e.originalEvent,r=e.putSortable,a=e.dragEl,p=e.activeSortable,y=e.dispatchSortableEvent,m=e.hideGhostForTarget,_=e.unhideGhostForTarget;if(i){var x=r||p;m();var M=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,A=document.elementFromPoint(M.clientX,M.clientY);_(),x&&!x.el.contains(A)&&(y("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function sx(){}sx.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=gd(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(i,a):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:_L};Ka(sx,{pluginName:"revertOnSpill"});function nx(){}nx.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,a=r||this.sortable;a.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),a.animateAll()},drop:_L};Ka(nx,{pluginName:"removeOnSpill"});Qe.mount(new zle);Qe.mount(nx,sx);function RT(t,e,i){t.splice(i,0,t.splice(e,1)[0])}const Vle="esri-layerlist-new-ui",Gle=De.ofType(ix),LT="data-sort-filter",jT="data-layer-uid",qle="layerUid",Ii="esri-layer-list",ci=`${Ii}__item`,Oe={base:`${Ii} esri-widget esri-widget--panel`,newUI:`${Ii}--new-ui`,noItems:`${Ii}__no-items`,list:`${Ii}__list`,listRoot:`${Ii}__list--root`,listExclusive:`${Ii}__list--exclusive`,listInherited:`${Ii}__list--inherited`,listIndependent:`${Ii}__list--independent`,item:ci,itemContent:`${ci}-content`,itemMessage:`${ci}--has-message`,itemInvisible:`${ci}--invisible`,itemInvisibleAtScale:`${ci}--invisible-at-scale`,itemChildren:`${ci}--has-children`,itemSelectable:`${ci}--selectable`,itemContainer:`${ci}-container`,actionsMenu:`${ci}-actions-menu`,actionsMenuItem:`${ci}-actions-menu-item`,actionsMenuItemActive:`${ci}-actions-menu-item--active`,actions:`${ci}-actions`,actionsList:`${ci}-actions-list`,action:`${ci}-action`,actionIcon:`${ci}-action-icon`,actionImage:`${ci}-action-image`,actionTitle:`${ci}-action-title`,actionToggle:`${Ii}__action-toggle`,actionToggleOn:`${Ii}__action-toggle--on`,label:`${ci}-label`,message:`${ci}-message`,title:`${ci}-title`,statusIndicator:`${Ii}__status-indicator`,publishing:`${Ii}__publishing`,updating:`${Ii}__updating`,connectionStatus:`${Ii}__connection-status`,connectionStatusConnected:`${Ii}__connection-status--connected`,toggleVisible:`${ci}-toggle`,toggleVisibleIcon:`${ci}-toggle-icon`,toggleIcon:`${ci}-toggle-icon`,radioIcon:`${ci}-radio-icon`,childToggle:`${Ii}__child-toggle`,childToggleOpen:`${Ii}__child-toggle--open`,childOpened:`${Ii}__child-toggle-icon--opened`,childClosed:`${Ii}__child-toggle-icon--closed`,childClosed_RTL:`${Ii}__child-toggle-icon--closed-rtl`,sortableChosen:`${Ii}--chosen`,disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},ml={actions:"actions",actionSection:"action-section",items:"items"},l0={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function SL(t){const{actionsOpen:e,children:i}=t;e&&(t.actionsOpen=!1),i.forEach(r=>SL(r))}const zw="root",DT={statusIndicators:!0,errors:!1};let ei=class extends Yo{constructor(e,i){super(e,i),this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=le(Vle),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=Oe.widgetIcon,this.icon=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new Gle,this.viewModel=new lL,this.visibleElements={...DT},this._onSortableSort=({to:r,from:a,item:p,newIndex:y})=>{a&&r&&(a===r?this._sortLayers(this._sortableMap.get(a.dataset.group)):this._moveLayerFromChildList({to:r,from:a,item:p,newIndex:y}))},this._sortableCanSort=(r,a)=>!(!r.el.dataset.group||!a.el.dataset.group),this._sortableCanPull=(r,a,p)=>{const{listItemCanGiveFunction:y}=this,m={selected:Qi(p),from:Qi(a.el),to:Qi(r.el)};return!this._sortableCanSort(r,a)||typeof y!="function"||y.call(null,m)},this._sortableCanPut=(r,a,p)=>{const{listItemCanReceiveFunction:y}=this,m={selected:Qi(p),from:Qi(a.el),to:Qi(r.el)};return!this._sortableCanSort(r,a)||typeof y!="function"||y.call(null,m)},this._onSortableEnd=({oldIndex:r,from:a,to:p,item:y})=>{a!==p&&a.insertBefore(y,a.children[r])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.addHandles([Tu(()=>this.operationalItems,"change",()=>this._itemsChanged(e)),Ee(()=>this.visibleElements,()=>this._itemsChanged(e)),Ee(()=>this.selectionEnabled,()=>this._toggleAllSorting(),St)])}loadDependencies(){return xR({icon:()=>we(()=>import("./calcite-icon-e84b42de.js"),["assets/calcite-icon-e84b42de.js","assets/icon-8b5fa310.js","assets/observers-279029a9.js"]),tooltip:()=>we(()=>import("./calcite-tooltip-82238663.js"),["assets/calcite-tooltip-82238663.js","assets/FloatingArrow-64b6b388.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-723a6d79.js"])})}destroy(){this.removeAllHandles(),this._destroySortables(),this._tooltipReferenceMap.clear()}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...DT,...e}}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){var m;const{visibleItems:e,_newUI:i}=this,r=(m=this.viewModel)==null?void 0:m.state,a={[Oe.newUI]:i,[Oe.hidden]:r==="loading",[Oe.disabled]:r==="disabled"},p=this.renderItemTooltips(),y=this.renderItems();return fe("div",{class:this.classes(Oe.base,a)},e.length?[p,y]:this.renderNoItems())}renderItemTooltip(e){const{_tooltipReferenceMap:i,messages:r}=this;return e?fe("calcite-tooltip",{label:r.layerIncompatible,referenceElement:i.get(e.uid)},r.layerIncompatibleTooltip):null}renderItemTooltipNodes(e){const{incompatible:i,children:r}=e;return[i?this.renderItemTooltip(e):null,...!i&&r?r.toArray().map(a=>this.renderItemTooltipNodes(a)):[]]}renderItemTooltips(){return this.visibleItems.toArray().map(e=>this.renderItemTooltipNodes(e))??[]}renderNoItems(){return fe("div",{class:Oe.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:i,messages:r}=this;return fe("ul",{"aria-label":r.widgetLabel,role:i?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":zw,bind:this,class:this.classes(Oe.list,Oe.listRoot,Oe.listIndependent)},e.map(a=>this.renderItem(a,null)).toArray())}renderActionsMenuIcon(e,i){const{messagesCommon:r}=this,a={[Oe.actionsMenuItemActive]:e.actionsOpen};return fe("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(Oe.actionsMenuItem,a),tabindex:"0",role:"button","aria-controls":i,"aria-label":r.options,title:r.options},fe("span",{"aria-hidden":"true",class:Oe.iconEllipses}))}renderActionsMenu(e,i,r,a){const{panel:p}=e,y=p&&p.visible?this.renderPanelButton(p):null,m=r===1&&this._getSingleActionButton(i),_=m?this.renderAction({item:e,action:m,singleAction:!0}):null,x=!m&&r?this.renderActionsMenuIcon(e,a):null;return x||y||m?fe("div",{key:"actions-menu",class:Oe.actionsMenu},y,_,x):null}renderChildList(e,i){var A;const{selectionEnabled:r}=this,{visibilityMode:a,children:p}=e,y=this._hasChildren(e),m=!y&&r&&((A=e.layer)==null?void 0:A.type)==="group",{exclusive:_,inherited:x}=l0,M={[Oe.listExclusive]:a===_,[Oe.listInherited]:a===x,[Oe.listIndependent]:a!==x&&a!==_};return y||m?fe("ul",{bind:this,key:"list-items",id:i,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(Oe.list,M),"aria-expanded":e.open?"true":"false",role:r?"listbox":a===_?"radiogroup":"group",hidden:!e.open&&!m||null},p==null?void 0:p.map(C=>this.renderItem(C,e)).toArray()):null}renderChildrenToggle(e,i){const{messagesCommon:r}=this,a=this._hasChildren(e),p={[Oe.childToggleOpen]:e.open},y=e.open?r.collapse:r.expand;return a?fe("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(Oe.childToggle,p),tabindex:"0",role:"button","aria-controls":i,"aria-label":y,title:y},fe("span",{"aria-hidden":"true",class:this.classes(Oe.childClosed,Oe.iconRightArrow)}),fe("span",{"aria-hidden":"true",class:this.classes(Oe.childOpened,Oe.iconDownArrow)}),fe("span",{"aria-hidden":"true",class:this.classes(Oe.childClosed_RTL,Oe.iconLeftArrow)})):null}renderItemMessage(e){return e.error?fe("div",{key:"esri-layer-list__error",class:Oe.message,role:"alert"},fe("span",{"aria-hidden":"true",class:Oe.iconNoticeTriangle}),this.messages.layerError):e.incompatible?fe("div",{key:"esri-layer-list__incompatible",class:Oe.message,role:"alert"},fe("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:Oe.iconNoticeTriangle,afterCreate:i=>this._setTooltipReference(i,e)}),this.messages.layerIncompatible):null}renderItemContent(e,i,r){const{id:a}=this,p=`${a}_${e.uid}`,y=`${p}_actions`,m=`${p}__list`,{panel:_}=e,x=this._filterActions(e.actionsSections),M=this._countActions(x);return[fe("div",{key:"list-item-container",class:Oe.itemContainer},this.renderChildrenToggle(e,m),this.renderLabel(e,i,r),this.renderActionsMenu(e,x,M,y)),this.renderItemMessage(e),M?this.renderActionsSections(e,x,y):null,_&&_.open&&!_.disabled?_.render():null,this.renderChildList(e,m)]}renderItem(e,i){var A;const{_newUI:r,id:a,selectionEnabled:p,selectedItems:y}=this,m=`${`${a}_${e.uid}`}__title`,_=this._hasMessage(e),x=this._hasChildren(e),M={[Oe.itemChildren]:x,[Oe.itemMessage]:!!_,[Oe.itemInvisible]:r&&!e.visible,[Oe.itemInvisibleAtScale]:!e.visibleAtCurrentScale,[Oe.itemSelectable]:p};if(p){const C={[jT]:(A=e.layer)==null?void 0:A.uid,[LT]:(!e.sortable).toString()};return fe("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Oe.item,M),"aria-labelledby":m,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":i?i.uid:zw,tabIndex:0,"aria-selected":Aw(e,y)?"true":"false",role:"option",...C},this.renderItemContent(e,i,m))}return fe("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Oe.item,M),"aria-labelledby":m},this.renderItemContent(e,i,m))}renderConnectionIcon(e){const{connectionStatus:i}=e;return i!=null?fe("calcite-icon",{icon:i==="connected"?"beacon":"offline",scale:"s"}):null}renderItemStatus(e,i){const{visibleElements:r}=this;if(!r.statusIndicators)return null;const{connectionStatus:a,publishing:p,updating:y}=e,m=y&&!i,_=!!a;return fe("span",{class:this.classes({[Oe.statusIndicator]:!0,[Oe.publishing]:p,[Oe.updating]:m,[Oe.connectionStatus]:_,[Oe.connectionStatusConnected]:_&&a==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(e))}renderItemTitle(e,i){const{messages:r}=this;if(!e)return null;const a=e.title||r.untitledLayer,p=e.visibleAtCurrentScale?a:`${a} (${r.layerInvisibleAtScale})`;return fe("span",{key:"layer-title-container",id:i,title:p,"aria-label":p,class:Oe.title},a)}renderItemToggleIcon(e,i){const{_newUI:r}=this,{exclusive:a}=l0,p=i==null?void 0:i.visibilityMode,y={[Oe.toggleVisibleIcon]:r,[Oe.toggleIcon]:r&&p!==a,[Oe.radioIcon]:r&&p===a,[Oe.iconRadioSelected]:p===a&&e.visible,[Oe.iconRadioUnselected]:p===a&&!e.visible,[Oe.iconVisible]:p!==a&&e.visible,[Oe.iconInvisible]:p!==a&&!e.visible};return fe("span",{key:"item-toggle-icon",class:this.classes(y),"aria-hidden":"true"})}renderItemToggle(e,i,r){const{selectionEnabled:a,messages:p}=this,{exclusive:y}=l0,m=i==null?void 0:i.visibilityMode,_=m===y?"radio":"switch";return fe("span",a?{key:"item-toggle-selection-enabled",class:Oe.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":m,tabIndex:0,title:p.layerVisibility,"aria-checked":e.visible?"true":"false",role:_,"aria-labelledby":r}:{key:"item-toggle",class:Oe.toggleVisible},this.renderItemToggleIcon(e,i))}renderLabel(e,i,r){const{selectionEnabled:a,_newUI:p,messages:y}=this,{inherited:m,exclusive:_}=l0,x=i==null?void 0:i.visibilityMode,M=x===_?"radio":"switch",A=p?[this.renderItemTitle(e,r),this.renderItemStatus(e,i),this.renderItemToggle(e,i,r)]:[this.renderItemToggle(e,i,r),this.renderItemTitle(e,r),this.renderItemStatus(e,i)],C=fe("div",a?{key:`item-label-no-selection-${e.uid}`,class:Oe.label}:{key:`item-label-with-selection-${e.uid}`,class:Oe.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":x,tabIndex:0,"aria-checked":e.visible?"true":"false",title:y.layerVisibility,role:M,"aria-labelledby":r},A);return x===m||e.error?fe("div",{key:`item-label-container-${e.uid}`,class:Oe.label},this.renderItemTitle(e,r),this.renderItemStatus(e,i)):C}renderPanelButton(e){const{className:i,open:r,title:a,image:p,disabled:y}=e,m=p||i?i:Oe.iconDefaultAction,_=this._getIconImageStyles(e),x={[Oe.actionsMenuItemActive]:r&&!y},M={[Oe.actionImage]:!!_["background-image"],[Oe.disabledElement]:e.disabled};return m&&(M[m]=!!m),fe("div",{"aria-disabled":e.disabled.toString(),key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(Oe.actionsMenuItem,x),role:"button",tabindex:e.disabled?null:0,title:a,"aria-label":a},fe("span",{class:this.classes(M),styles:_}))}renderActionsSections(e,i,r){const a=i.toArray().map((p,y)=>fe("ul",{key:`${e}-action-section-${y}`,class:Oe.actionsList},this.renderActionSection(e,p)));return fe("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:r,class:Oe.actions,hidden:!e.actionsOpen||null},a)}renderActionSection(e,i){return(i&&i.toArray()).map(r=>this.renderAction({item:e,action:r}))}renderActionIcon(e){const{active:i,className:r}=e,a=this._getIconImageStyles(e),p=e.type!=="button"||e.image||r?r:Oe.iconDefaultAction,y={[Oe.actionImage]:!i&&!!a["background-image"],[Oe.iconLoading]:i,[Oe.rotating]:i};return p&&!i&&(y[p]=!0),fe("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Oe.actionIcon,y),styles:a})}renderActionTitle(e,i){return i?null:fe("span",{key:"action-title",class:Oe.actionTitle},e)}renderAction(e){const{item:i,action:r,singleAction:a}=e,{active:p,disabled:y,title:m}=r,_={[Oe.actionsMenuItem]:a&&r.type==="button",[Oe.action]:p||!a&&r.type!=="toggle",[Oe.actionToggle]:!p&&r.type==="toggle",[Oe.actionToggleOn]:!p&&r.type==="toggle"&&r.value,[Oe.disabledElement]:y},x=[this.renderActionIcon(r),this.renderActionTitle(m,a)];return a?fe("div",{bind:this,"data-item":i,"data-action":r,role:"button",key:`single-action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:_,tabindex:"0",title:m??void 0,"aria-label":m??void 0},x):fe("li",{bind:this,"data-item":i,"data-action":r,key:`action-${r.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:_,tabindex:"0",role:"button",title:m??void 0,"aria-label":m??void 0},x)}_setTooltipReference(e,i){this._tooltipReferenceMap.set(i.uid,e),this.scheduleRender()}_hasMessage(e){return!!e.error||e.incompatible}_hasChildren(e){return!!e.children.length&&!this._hasMessage(e)}_sortNodeRemoved(e){const{_sortableMap:i}=this,r=e.dataset.group,a=i.get(r);a&&a.destroy(),i.delete(r)}_destroySortables(){const{_sortableMap:e,_sortableNodes:i}=this;e.forEach(r=>r&&r.destroy()),e.clear(),i.clear()}_moveLayerFromChildList({to:e,from:i,item:r,newIndex:a}){const p=Qi(r),y=Qi(e),m=Qi(i);this.viewModel.moveListItem(p,m,y,a)}_sortLayers(e){var a,p;if(!e)return;const i=Qi(e.el),r=e.toArray();i?nle(i,r):iL((p=(a=this.view)==null?void 0:a.map)==null?void 0:p.layers,r)}_toggleSorting(e,i){const{_sortableMap:r,selectionEnabled:a}=this,p=r.get(i),y=Qi(e),m=(i===zw||(y==null?void 0:y.childrenSortable)&&ile(y))&&a;if(p)p.option("disabled",!m);else if(m){const _=Qe.create(e,{dataIdAttr:jT,group:{name:i,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${LT}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!m,chosenClass:Oe.sortableChosen});r.set(i,_)}}_toggleAllSorting(){this._sortableNodes.forEach((e,i)=>this._toggleSorting(e,i))}_sortNodeCreated(e){const i=e.dataset.group;i&&(this._sortableNodes.set(i,e),this._toggleSorting(e,i))}_setVisibleItems(e){this.visibleItems=e.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}_getSingleActionButton(e){return e.reduce(i=>i).filter(i=>i&&i.type==="button").at(0)}_focusListItem(e){var a;const{_focusSortUid:i}=this;if(!e||!i)return;const r=Qi(e);((a=r==null?void 0:r.layer)==null?void 0:a.uid)===i&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e){this.addHandles(e.on("change",this.scheduleRender.bind(this)),ml.actionSection),e.forEach(i=>this._renderOnActionChanges(i))}_renderOnActionChanges(e){e.type!=="toggle"?e.type!=="slider"?this.addHandles(Ee(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible],()=>this.scheduleRender(),St),ml.actions):this.addHandles(Ee(()=>[e==null?void 0:e.className,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value,e==null?void 0:e.displayValueEnabled,e==null?void 0:e.max,e==null?void 0:e.min,e==null?void 0:e.step],()=>this.scheduleRender(),St),ml.actions):this.addHandles(Ee(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value],()=>this.scheduleRender(),St),ml.actions)}_renderOnItemChanges(e){this.addHandles([Ee(()=>{var i,r,a;return[e==null?void 0:e.actionsOpen,e==null?void 0:e.visible,e==null?void 0:e.open,e==null?void 0:e.updating,e==null?void 0:e.connectionStatus,e==null?void 0:e.publishing,e==null?void 0:e.title,e==null?void 0:e.visibleAtCurrentScale,e==null?void 0:e.error,e==null?void 0:e.visibilityMode,e==null?void 0:e.panel,(i=e==null?void 0:e.panel)==null?void 0:i.title,(r=e==null?void 0:e.panel)==null?void 0:r.content,(a=e==null?void 0:e.panel)==null?void 0:a.className,e==null?void 0:e.sortable,e==null?void 0:e.childrenSortable]},()=>this.scheduleRender(),Ca),Ee(()=>[e==null?void 0:e.hidden,e==null?void 0:e.error],()=>this._setVisibleItems(this.operationalItems)),e.actionsSections.on("change",()=>this.scheduleRender()),e.children.on("change",()=>this.scheduleRender())],ml.items),e.children.forEach(i=>this._renderOnItemChanges(i)),e.actionsSections.forEach(i=>this._watchActionSectionChanges(i))}_itemsChanged(e){this.removeHandles(ml.items),this.removeHandles(ml.actions),this.removeHandles(ml.actionSection),e.forEach(i=>this._renderOnItemChanges(i)),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map(i=>i.filter(r=>r.visible))}_countActions(e){return e.reduce((i,r)=>i+r.length,0)}_getIconImageStyles(e){const i=e.declaredClass==="esri.widgets.LayerList.ListItemPanel"||e.declaredClass==="esri.support.Action.ActionButton"||e.declaredClass==="esri.support.Action.ActionToggle"?e.image:null;return{"background-image":i?`url("${i}")`:void 0}}_selectionKeydown(e){var j,D,z,W;const i=["ArrowDown","ArrowUp"],r=yf(e);if(!i.includes(r))return void this._toggleSelection(e);e.stopPropagation();const a=e.currentTarget,p=Qi(a),{_sortableMap:y,selectedItems:m}=this,_=a.dataset.group,x=y.get(_);if(!x||!p)return;const M=Aw(p,m),A=x.toArray(),C=e.target,N=A.indexOf(C.dataset[qle]);if(N!==-1){if(r==="ArrowDown"){const Y=N+1;if(Y>=A.length)return;M?(RT(A,N,Y),x.sort(A),this._sortLayers(x),this._focusSortUid=(j=p.layer)==null?void 0:j.uid):(this._focusSortUid=(D=p.layer)==null?void 0:D.uid,this.scheduleRender())}if(r==="ArrowUp"){const Y=N-1;if(Y<=-1)return;M?(RT(A,N,Y),x.sort(A),this._sortLayers(x),this._focusSortUid=(z=p.layer)==null?void 0:z.uid):(this._focusSortUid=(W=p.layer)==null?void 0:W.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const i=Qi(e.currentTarget);if(!i)return;const{actionsOpen:r}=i,a=!r;a&&this.operationalItems.forEach(p=>SL(p)),i.actionsOpen=a,e.stopPropagation()}_triggerPanel(e){const i=Ule(e.currentTarget);e.stopPropagation(),i&&!i.disabled&&(i.open=!i.open)}_triggerAction(e){const i=e.currentTarget,r=Ble(i),a=Qi(i);r&&a&&(r.type==="toggle"&&(r.value=!r.value),this.triggerAction(r,a),e.stopPropagation())}_toggleVisibility(e){const i=e.currentTarget,r=i.getAttribute("data-parent-visibility"),a=Qi(i);a&&(r===l0.exclusive&&a.visible||(a.visible=!a.visible),e.stopPropagation())}_toggleChildrenClick(e){const i=Qi(e.currentTarget);i&&(i.open=!i.open,e.stopPropagation())}_toggleSelection(e){var m,_;e.stopPropagation();const{multipleSelectionEnabled:i,selectedItems:r}=this,a=Qi(e.currentTarget);if(!a)return;const p=Aw(a,r),{length:y}=r;if(!i)return y&&!(p&&y===1)?(r.removeAll(),void r.add(a)):void(p?(m=r.remove)==null?void 0:m.call(r,p):r.add(a));p?(_=r.remove)==null||_.call(r,p):r.add(a)}get test(){return{visibleItems:this.visibleItems}}};function Qi(t){return t==null?void 0:t["data-item"]}function Ule(t){return t==null?void 0:t["data-panel"]}function Ble(t){return t==null?void 0:t["data-action"]}v([S()],ei.prototype,"visibleItems",void 0),v([S()],ei.prototype,"iconClass",void 0),v([S()],ei.prototype,"icon",void 0),v([S()],ei.prototype,"label",null),v([S()],ei.prototype,"listItemCanGiveFunction",void 0),v([S()],ei.prototype,"listItemCanReceiveFunction",void 0),v([S()],ei.prototype,"listItemCreatedFunction",null),v([S(),eo("esri/widgets/LayerList/t9n/LayerList")],ei.prototype,"messages",void 0),v([S(),eo("esri/t9n/common")],ei.prototype,"messagesCommon",void 0),v([S()],ei.prototype,"multipleSelectionEnabled",void 0),v([S()],ei.prototype,"operationalItems",null),v([S()],ei.prototype,"selectionEnabled",void 0),v([S()],ei.prototype,"selectedItems",void 0),v([S()],ei.prototype,"view",null),v([rL("trigger-action"),S({type:lL})],ei.prototype,"viewModel",void 0),v([S()],ei.prototype,"visibleElements",void 0),v([It("visibleElements")],ei.prototype,"castVisibleElements",null),v([vs()],ei.prototype,"_toggleActionsOpen",null),v([vs()],ei.prototype,"_triggerPanel",null),v([vs()],ei.prototype,"_triggerAction",null),v([vs()],ei.prototype,"_toggleVisibility",null),v([vs()],ei.prototype,"_toggleChildrenClick",null),v([vs()],ei.prototype,"_toggleSelection",null),ei=v([B("esri.widgets.LayerList")],ei);const Hle=ei,ni="esri-search",ze={base:`${ni} esri-widget`,loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:`${ni}--multiple-sources`,isLoading:`${ni}--loading`,isSearching:`${ni}--searching`,showSuggestions:`${ni}--show-suggestions`,showSources:`${ni}--sources`,showWarning:`${ni}--warning`,container:`${ni}__container`,input:`${ni}__input`,inputContainer:`${ni}__input-container`,form:`${ni}__form`,submitButton:`${ni}__submit-button`,sourcesButton:`${ni}__sources-button`,clearButton:`${ni}__clear-button`,sourceName:`${ni}__source-name`,suggestionsMenu:`${ni}__suggestions-menu`,suggestionList:`${ni}__suggestions-list`,suggestionListCurrentLocation:`${ni}__suggestions-list--current-location`,sourcesMenu:`${ni}__sources-menu`,source:`${ni}__source`,warningMenu:`${ni}__warning-menu`,warningMenuBody:`${ni}__warning-body`,warningMenuHeader:`${ni}__warning-header`,warningMenuText:`${ni}__warning-text`,noValueText:`${ni}__no-value-text`,esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},Xu="esri-search-result-renderer",sa={base:`${Xu} esri-widget`,anchor:"esri-widget__anchor",showMoreResults:`${Xu}__more-results--show-more-results`,moreResults:`${Xu}__more-results`,moreResultsList:`${Xu}__more-results-list`,moreResultsHeader:`${Xu}__more-results-header`,moreResultsItem:`${Xu}__more-results-item`,moreResultsListHeader:`${Xu}__more-results-list-header`};function Wle(t){return t&&typeof t.highlight=="function"}let ki=class extends Ec(de){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};v([S()],ki.prototype,"autoNavigate",void 0),v([S()],ki.prototype,"filter",void 0),v([S()],ki.prototype,"getResults",void 0),v([S()],ki.prototype,"getSuggestions",void 0),v([S()],ki.prototype,"maxResults",void 0),v([S()],ki.prototype,"maxSuggestions",void 0),v([S()],ki.prototype,"minSuggestCharacters",void 0),v([S()],ki.prototype,"outFields",void 0),v([S()],ki.prototype,"placeholder",void 0),v([S()],ki.prototype,"popupEnabled",void 0),v([S()],ki.prototype,"popupTemplate",void 0),v([S()],ki.prototype,"prefix",void 0),v([S()],ki.prototype,"resultGraphicEnabled",void 0),v([S()],ki.prototype,"resultSymbol",void 0),v([S()],ki.prototype,"suggestionsEnabled",void 0),v([S()],ki.prototype,"suffix",void 0),v([S()],ki.prototype,"withinViewEnabled",void 0),v([S()],ki.prototype,"zoomScale",void 0),ki=v([B("esri.widgets.Search.SearchSource")],ki);const eb=ki;let Ih=class extends Xt(de){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};v([S({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Ih.prototype,"onFields",void 0),v([S({type:String,json:{write:!0}})],Ih.prototype,"operator",void 0),v([S({type:String,json:{write:!0}})],Ih.prototype,"searchTerm",void 0),v([S({type:String,json:{write:!0}})],Ih.prototype,"searchType",void 0),Ih=v([B("esri.rest.support.FullTextSearch")],Ih);const xL=Ih,FT=me.getLogger("esri.widgets.Search.support.geometryUtils");function Jle(t,e){var r,a;if(!e)return FT.error("missing-parameter: view is missing."),Promise.reject(new ie("searchgeometryutils:missing-parameter","view is missing."));if(!t)return FT.error("missing-parameter: point is missing."),Promise.reject(new ie("searchgeometryutils:missing-parameter","point is missing."));if(t.hasZ||e.type==="2d")return Promise.resolve(t);const i=(r=e==null?void 0:e.map)==null?void 0:r.ground;return i&&i.layers.length?i.queryElevation(t,{cache:(a=e.basemapTerrain)==null?void 0:a.elevationQueryCache}).then(p=>p.geometry):Promise.resolve(t)}function zT(t){if(t==null)return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":return t.getPoint(0);case"polyline":return t.getPoint(0,0)}return null}function ox(t,e,i){return t==null?null:t.type==="extent"?t:t.type==="multipoint"||t.type==="polygon"||t.type==="polyline"?t.extent:t.type==="point"?$L(t,e,i):void 0}function y5(t,e,i){return t==null||e==null?null:$L(t.center,e,i)}function $L(t,e,i){const r=t.hasZ?t.z:void 0;return e!=null&&e.map?(i!=null?Gae(e,i):e.extent).clone().centerAt(t).set({zmax:r,zmin:r}):new vt({xmin:t.x-.25,ymin:t.y-.25,xmax:t.x+.25,ymax:t.y+.25,spatialReference:t.spatialReference,zmin:r,zmax:r})}const Kle=/https?:\/\/services.*\.arcgis\.com/i,Yle=/(?:\{([^}]+)\})/g,Xp=me.getLogger("esri.widgets.Search.support.layerSearchUtils");function Zle(t,e){const{exactMatch:i=!1,location:r,maxResults:a,spatialReference:p,source:y,sourceIndex:m,suggestResult:_,view:x}=t,{layer:M,filter:A,zoomScale:C}=y,N=x==null?void 0:x.scale,j=TL(y,x),D=e&&e.signal;return ML(M).then(()=>{const z=M.popupTemplate;return z?z.getRequiredFields(M.fieldsIndex):null}).then(z=>{var Ne,Le,He,Pe;const{objectIdField:W,returnZ:Y}=M,K=PL(y);if(!ax(M,K))throw Xp.error("invalid-field: displayField is invalid."),new ie("getResults():invalid-field","displayField is invalid.");const ee=z&&z.length?z:[K],ne=y.outFields||ee,oe=IL(ne);if(ne.includes(W)||oe||ne.push(W),(Ne=M.floorInfo)!=null&&Ne.floorField&&ne.push(M.floorInfo.floorField),!(oe||Qv(M,ne)))throw Xp.error("invalid-field: outField is invalid."),new ie("getResults():invalid-field","outField is invalid.");const ue=M.createQuery(),{orderByFields:ye}=y;if(ye&&(ue.orderByFields=ye),p){ue.outSpatialReference=p;const yt=1/Jo(p);yt&&(ue.maxAllowableOffset=yt)}const Se=M.geometryType==="mesh"||M.geometryType==="multipatch",Ce=((He=(Le=M.capabilities)==null?void 0:Le.data)==null?void 0:He.supportsZ)&&!Se;if(ue.returnZ=Ce&&Y!==!1,ue.returnGeometry=!0,ue.multipatchOption=Se?"xyFootprint":null,ne&&(ue.outFields=ne),r)ue.geometry=r;else if(_.key)ue.objectIds=[_.key];else{const yt=y.searchFields||[K];if(!Qv(M,yt))throw Xp.error("invalid-field: search field is invalid."),new ie("getResults():invalid-field","search field is invalid.");if(CL(M)&&(ue.num=a),j&&(ue.geometry=j),!((Pe=_.text)==null?void 0:Pe.trim()))return[];const Nt=_.text,{prefix:ut="",suffix:ar=""}=y,Nc=NL(`${ut}${Nt}${ar}`);OL(M)&&AL(M,yt)&&!i&&Nt&&(ue.fullText=kL({text:Nt,searchFields:yt}));const Zo=RL({searchTerm:Nc,layer:M,searchFields:yt,filter:A,exactMatch:i,query:ue,type:"search"});if(ue.where=Zo,!EL(ue))return[]}return M.queryFeatures(ue,{signal:D}).then(yt=>uue(yt,x,y,m,K,N,C))})}function Xle(t,e){const{source:i,spatialReference:r,view:a,suggestTerm:p,maxSuggestions:y,sourceIndex:m,exactMatch:_}=t,{layer:x,filter:M}=i,A=e&&e.signal,C=TL(i,a);return ML(x).then(()=>{if(!CL(x))return[];const N=PL(i),j=i.searchFields||[N],D=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(Yle,(Ce,Ne)=>(D.push(Ne),Ce)):D.push(N);const z=IL(D);D.includes(x.objectIdField)||z||D.push(x.objectIdField);const W=ax(x,N),Y=z||Qv(x,D),K=Qv(x,j);if(!W)throw Xp.error("invalid-field: displayField is invalid."),new ie("getSuggestions():invalid-field","displayField is invalid.");if(!Y)throw Xp.error("invalid-field: outField is invalid."),new ie("getSuggestions():invalid-field","outField is invalid.");if(!K)throw Xp.error("invalid-field: search field is invalid."),new ie("getSuggestions():invalid-field","search field is invalid.");const ee=x.createQuery(),{orderByFields:ne}=i;if(ne&&(ee.orderByFields=ne),ee.outSpatialReference=r,ee.returnGeometry=!1,ee.num=y,ee.outFields=D,C&&(ee.geometry=C),!p.trim())return[];const{prefix:oe="",suffix:ue=""}=i,ye=NL(`${oe}${p}${ue}`);OL(x)&&AL(x,j)&&!_&&p&&(ee.fullText=kL({text:p,searchFields:j}));const Se=RL({searchTerm:ye,layer:x,searchFields:j,filter:M,exactMatch:_,query:ee,type:"suggest"});return ee.where=Se,EL(ee)?x.queryFeatures(ee,{signal:A}).then(Ce=>aue(Ce,i,m,N)):[]})}function TL(t,e){const{filter:i,withinViewEnabled:r}=t,a=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(r&&a?a:void 0)}function IL(t){return t&&t.includes("*")}async function ML(t){t&&await t.load()}function EL(t){return!(!t.fullText&&!t.where)}function AL(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter(r=>r.indexType==="FullText").some(r=>{var p;const a=((p=r.fields)==null?void 0:p.split(",").map(y=>y.trim().toLowerCase()))||[];return e.every(y=>a.includes(y.toLowerCase()))})}function kL({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new xL({onFields:e,searchTerm:i,searchType:"prefix"}))}function OL(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function CL(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function Qle(t){var e,i,r;return((r=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find(a=>a.type==="string"))==null?void 0:r.name)??""}function PL(t){return t.displayField||t.layer.displayField||Qle(t.layer)}function Qv(t,e){return!(!t||!(e!=null&&e.length))&&e.every(i=>ax(t,i))}function ax(t,e){return!!t.getField(e)}function eue(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function tue(t,e,i){let r=null;const{codedValues:a}=t;return a&&a.some(p=>{const y=p.name,m=i?y:y.toLowerCase();return(i?e:e.toLowerCase())===m&&(r=p.code.toString(),!0)}),r}function NL(t){return t.replaceAll("'","''")}function u0(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function iue({currentTerm:t,field:e,filter:i,exactMatch:r,url:a,type:p}){const y=e==null?void 0:e.type,m=e==null?void 0:e.name;if(y==="string"||y==="date"||y==="global-id"){const _=Kle.test(a??""),x=_&&eue(t)?"N":"";return u0(r&&p==="search"?`${m} = ${x}'${t}'`:_?`${m} LIKE ${x}${`'${t}%'`}`:`${`LOWER(${m})`} LIKE ${x}${`'${t.toLowerCase()}%'`}`,i)}if(y==="oid"||y==="small-integer"||y==="integer"||y==="single"||y==="double"){const _=Number(t);return isNaN(_)?null:u0(`${m} = ${_}`,i)}return u0(`${m} = ${t}`,i)}function rue(t,e){return t?` OR (${e})`:`(${e})`}function RL({searchTerm:t,layer:e,searchFields:i,filter:r,exactMatch:a,query:p,type:y}){const{definitionExpression:m,url:_}=e;let x="";return!p.fullText&&t&&i&&i.forEach(M=>{const A=e.getField(M),C=typeof e.getFieldDomain=="function"&&e.getFieldDomain(M),N=(C&&C.type==="coded-value"?tue(C,t,a):null)||t||null;if(N!==null){const j=iue({currentTerm:N,field:A,filter:r,exactMatch:a,url:_,type:y});j&&(x+=rue(x,j))}}),m&&x?`(${m}) AND (${x})`:m||x}function sue(t,e){let i=null;const{codedValues:r}=t;return r&&r.length&&r.some(a=>a.code===e&&(i=a.name,!0)),i}function nue(t,e){return t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function LL(t,e,i){const r=t.sourceLayer,{attributes:a}=t,p=typeof r.getFieldDomain=="function"&&r.getFieldDomain(i);if(e)return xC(e,a);if(i&&a){const y=r.getField(i),m=nue(a,i);return m==null?"":p&&p.type==="coded-value"?sue(p,m)??"":(y==null?void 0:y.type)==="date"?$u(new Date(m)):typeof m=="number"?m.toString():typeof m!="string"?"":m.trim()}return""}function oue(t,e,i,r){const a=t.sourceLayer,{attributes:p}=t,{objectIdField:y}=a,m=y?p[y]:null;return{text:LL(t,e.suggestionTemplate,r),key:m,sourceIndex:i}}function aue(t,e,i,r){return t.features.map(a=>oue(a,e,i,r))}function lue(t,e,i,r,a,p,y){const m=t.clone(),_=t.sourceLayer,x=_==null?void 0:_.objectIdField,M=x?t.attributes[x]:null,A=LL(t,i.searchTemplate,a),C=ox(m.geometry,e,p),N=typeof y=="number"?y5(se(C),e,y):C,j=t.clone();return N!=null&&(j.geometry=on.fromExtent(N)),{extent:N,target:j,feature:m,key:M,name:A,sourceIndex:r}}function uue(t,e,i,r,a,p,y){return t.features.map(m=>lue(m,e,i,r,a,p,y))}var m5;let On=m5=class extends eb{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>Zle({source:this,...e},i),this.getSuggestions=(e,i)=>Xle({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new m5({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?se(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?se(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find(i=>i.type==="string"))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map(i=>{const r=t.getField(i);return r&&r.alias||i}).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};v([S({json:{read:{source:"field.name"},write:{target:"field.name"}}})],On.prototype,"displayField",void 0),v([S({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],On.prototype,"exactMatch",void 0),v([S({value:null})],On.prototype,"layer",null),v([S()],On.prototype,"name",null),v([S({type:[String],json:{write:!0}})],On.prototype,"orderByFields",void 0),v([S()],On.prototype,"searchFields",void 0),v([S()],On.prototype,"searchTemplate",void 0),v([S()],On.prototype,"suggestionTemplate",void 0),On=m5=v([B("esri.widgets.Search.LayerSearchSource")],On);const vp=On;function hue(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function cue(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let Fl=class extends de{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};v([S({type:String,json:{write:!0}})],Fl.prototype,"address",void 0),v([S({type:Object,json:{write:!0}})],Fl.prototype,"attributes",void 0),v([S({type:vt,json:{write:!0}})],Fl.prototype,"extent",void 0),v([S({type:Ue,json:{write:!0}})],Fl.prototype,"location",void 0),v([S({type:Number,json:{write:!0}})],Fl.prototype,"score",void 0),Fl=v([B("esri.rest.support.AddressCandidate")],Fl);const jL=Fl,lx={type:String,json:{read:{source:"token"},write:{target:"token"}}};let cr=class extends de{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};v([S({type:Object,json:{write:!0}})],cr.prototype,"address",void 0),v([S(lx)],cr.prototype,"apiKey",void 0),v([S({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],cr.prototype,"categories",void 0),v([S({type:String,json:{write:!0}})],cr.prototype,"countryCode",void 0),v([S({type:Boolean,json:{write:!0}})],cr.prototype,"forStorage",void 0),v([S({type:Ue,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],cr.prototype,"location",void 0),v([S({type:String,json:{write:!0}})],cr.prototype,"locationType",void 0),v([S({type:String,json:{write:!0}})],cr.prototype,"magicKey",void 0),v([S({type:Number,json:{write:!0}})],cr.prototype,"maxLocations",void 0),v([S({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],cr.prototype,"outFields",void 0),v([S({type:Je,json:{read:{source:"outSR"},write:{target:"outSR"}}})],cr.prototype,"outSpatialReference",void 0),v([S({type:vt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],cr.prototype,"searchExtent",void 0),cr=v([B("esri.rest.support.AddressToLocationsParameters")],cr),cr.from=ri(cr);const DL=cr;async function pue(t,e,i){e=DL.from(e);const r=un(t),{address:a,...p}=e.toJSON(),y={...a,...p,f:"json"},m=H1({...r.query,...y}),_=B1(m,i),x=`${r.path}/findAddressCandidates`;return ot(x,_).then(due)}function due({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(r=>{if(!r)return;const{extent:a,location:p}=r,y=!a||cue(a);return hue(p)&&y?(a&&(a.spatialReference=i),p&&(p.spatialReference=i),jL.fromJSON(r)):void 0}):[]}let _a=class extends de{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};v([S(lx)],_a.prototype,"apiKey",void 0),v([S({type:Ue,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,r=i!==void 0;e.location=r?i:null}}}})],_a.prototype,"location",void 0),v([S({type:String,json:{write:!0}})],_a.prototype,"locationType",void 0),v([S({type:Je,json:{read:{source:"outSR"},write:{target:"outSR"}}})],_a.prototype,"outSpatialReference",void 0),_a=v([B("esri.rest.support.LocationToAddressParameters")],_a),_a.from=ri(_a);const FL=_a;async function fue(t,e,i){e=FL.from(e);const r=un(t),a={...e.toJSON(),f:"json"},p=H1({...r.query,...a}),y=B1(p,i),m=`${r.path}/reverseGeocode`;return ot(m,y).then(yue)}function yue({data:t}){if(!t)return;const{address:e,location:i}=t,r=e&&e.Match_addr||"";return jL.fromJSON({address:r,attributes:e||{},location:i,score:100})}let bp=class extends de{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};v([S({type:Boolean,json:{write:!0}})],bp.prototype,"isCollection",void 0),v([S({type:String,json:{write:!0}})],bp.prototype,"magicKey",void 0),v([S({type:String,json:{write:!0}})],bp.prototype,"text",void 0),bp=v([B("esri.rest.support.SuggestionCandidate")],bp);const mue=bp;let hs=class extends de{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};v([S(lx)],hs.prototype,"apiKey",void 0),v([S({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],hs.prototype,"categories",void 0),v([S({type:String,json:{write:!0}})],hs.prototype,"countryCode",void 0),v([S({type:Ue,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],hs.prototype,"location",void 0),v([S({type:Number,json:{write:!0}})],hs.prototype,"maxSuggestions",void 0),v([S({type:Je,json:{read:{source:"outSR"},write:{target:"outSR"}}})],hs.prototype,"outSpatialReference",void 0),v([S({type:vt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],hs.prototype,"searchExtent",void 0),v([S({type:String,json:{write:!0}})],hs.prototype,"text",void 0),hs=v([B("esri.rest.support.SuggestLocationsParameters")],hs),hs.from=ri(hs);const zL=hs;async function gue(t,e,i){const r=un(t),a={...(e=zL.from(e)).toJSON(),f:"json"},p=H1({...r.query,...a}),y=B1(p,i),m=`${r.path}/suggest`;return ot(m,y).then(vue)}function vue(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(r=>new mue(r)):[]}const bue="Single Line Input",wue=3e5;function _ue(t,e){return t.location?Iue(t,e):Mue(t,e)}function VL(t,e){var r;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=wue?(r=t==null?void 0:t.extent)==null?void 0:r.center:null}async function Sue(t,e){const{source:i,spatialReference:r,view:a,suggestTerm:p,maxSuggestions:y,sourceIndex:m}=t,_=new zL,{apiKey:x,url:M}=i,A=GL(i,a),C=e&&e.signal;if(!M)return null;x&&(_.apiKey=x),i.categories&&(_.categories=i.categories),r&&(_.outSpatialReference=r);const N=VL(a,i);if(N&&(_.location=N),!p.trim())return null;const{prefix:j="",suffix:D=""}=i,z=`${j}${p}${D}`;return _.text=z,A&&(_.searchExtent=A),_.maxSuggestions=y,i.countryCode&&(_.countryCode=i.countryCode),gue(M,_,{signal:C}).then(W=>Aue(W,m))}function xue(t){return!!t&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function $ue(t){return!!t&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function VT(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const Tue="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function Iue(t,e){const{source:i,spatialReference:r,location:a,sourceIndex:p,view:y}=t,{apiKey:m,url:_,zoomScale:x,defaultZoomScale:M}=i;if(_==null)return[];const A=y==null?void 0:y.scale,C=e==null?void 0:e.signal,N=new FL;N.location=a,m&&(N.apiKey=m),r&&(N.outSpatialReference=r);try{return qL([await fue(_,N,{signal:C})],{sourceIndex:p,scale:A,view:y,zoomScale:x,defaultZoomScale:M})}catch{return[]}}function GL(t,e){const{filter:i,withinViewEnabled:r}=t,a=e&&e.scale,p=e&&e.extent,y=i&&i.geometry;return ox(y,e,a)||(r&&p?p:void 0)}async function Mue(t,e){var ue;const{source:i,suggestResult:r,spatialReference:a,view:p,maxResults:y,sourceIndex:m}=t,_=i&&i.zoomScale,x=i&&i.defaultZoomScale;if(!((ue=r.text)==null?void 0:ue.trim()))return null;const A=!r.key&&i.prefix?i.prefix:"",C=!r.key&&i.suffix?i.suffix:"",N=`${A}${r.text}${C}`,j=new DL,{apiKey:D,url:z}=i,W=p&&p.scale,Y=GL(i,p),K=e&&e.signal;if(D&&(j.apiKey=D),!z)return null;i.categories&&(j.categories=i.categories),i.locationType&&(j.locationType=i.locationType),a&&(j.outSpatialReference=a);const ee=VL(p,i);ee&&(j.location=ee),j.maxLocations=y,Y&&(j.searchExtent=Y),i.countryCode&&(j.countryCode=i.countryCode);const{key:ne}=r,oe=`${ne}`;return ne&&(j.magicKey=oe),j.address={},j.address[i.singleLineFieldName||bue]=N,i.outFields&&(j.outFields=i.outFields),pue(z,j,{signal:K}).then(ye=>qL(ye,{key:oe,scale:W,sourceIndex:m,view:p,zoomScale:_,defaultZoomScale:x}))}function Eue(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function Aue(t,e){return t.map(i=>Eue(i,e))}function kue(t,e){const{key:i,scale:r,sourceIndex:a,view:p,zoomScale:y,defaultZoomScale:m}=e,{attributes:_,extent:x,location:M,address:A}=t,C=new Nr({geometry:M,attributes:_}),N=x||M,j=ox(N,p,r),D=typeof y=="number"?y5(j,p,y):typeof m=="number"&&(N==null?void 0:N.type)==="point"?y5(j,p,m):j,z=M?`${M.x},${M.y}`:"",W=A||z,Y=C.clone();return D!=null&&(Y.geometry=on.fromExtent(D)),{extent:D,feature:C,target:Y,key:i,name:W,sourceIndex:a}}function qL(t,e){return t.filter(Boolean).map(i=>kue(i,e))}var g5;const Oue="esri.widgets.Search.LocatorSearchSource";let Mr=g5=class extends eb{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>_ue({source:this,...e},i),this.getSuggestions=(e,i)=>Sue({source:this,...e},i)}clone(){return new g5({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?se(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?se(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};v([S()],Mr.prototype,"apiKey",void 0),v([S()],Mr.prototype,"categories",void 0),v([S()],Mr.prototype,"countryCode",void 0),v([S({json:{write:!0}})],Mr.prototype,"defaultZoomScale",void 0),v([S()],Mr.prototype,"localSearchDisabled",void 0),v([S()],Mr.prototype,"locationType",void 0),v([S({json:{write:!0}})],Mr.prototype,"name",void 0),v([S({json:{write:!0}})],Mr.prototype,"placeholder",void 0),v([S()],Mr.prototype,"searchTemplate",void 0),v([S({json:{write:!0}})],Mr.prototype,"singleLineFieldName",void 0),v([S({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Mr.prototype,"suggestionsEnabled",void 0),v([S({json:{write:!0}})],Mr.prototype,"url",void 0),v([S({json:{write:!0}})],Mr.prototype,"zoomScale",void 0),Mr=g5=v([B(Oue)],Mr);const UL=Mr;let Mh=class extends de{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(a=>a.toJSON()),i=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=i.spatialReference.wkid||JSON.stringify(i.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Mc(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};v([S()],Mh.prototype,"geometries",void 0),v([S({json:{read:{source:"outSR"}}})],Mh.prototype,"outSpatialReference",void 0),v([S()],Mh.prototype,"transformation",void 0),v([S()],Mh.prototype,"transformForward",void 0),Mh=v([B("esri.rest.support.ProjectParameters")],Mh);const BL=Mh,Cue=ri(BL);async function Pue(t,e,i){e=Cue(e);const r=un(t),a={...r.query,f:"json",...e.toJSON()},p=e.outSpatialReference,y=Mc(e.geometries[0]),m=B1(a,i);return ot(r.path+"/project",m).then(({data:{geometries:_}})=>WR(_,y,p))}const HL=me.getLogger("esri.widgets.support.geolocationUtils"),Nue={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Rue(){const t=le("esri-geolocation");return t||HL.warn("geolocation-unsupported","Geolocation unsupported."),t}function Lue(){const t=window.isSecureContext;return t||HL.warn("insecure-context","Geolocation requires a secure origin."),t}function GT(){return Rue()&&Lue()}function jue(t){return t||(t=Nue),new Promise((i,r)=>{setTimeout(()=>r(new ie("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,t??void 0)})}function Due(t,e){const{position:i,view:r}=t,a=Fue(i),p=a==null?void 0:a.coords;if(!p)throw new ie("geometry-service:no-coords","Geolocation has no coordinates");return Vue(zue(p),r,e)}function Fue(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:i,timestamp:t.timestamp}}function zue({longitude:t,latitude:e,altitude:i}){return new Ue({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function Vue(t,e,i){if(!e)return Promise.resolve(t);const r=e.spatialReference;return r.isWGS84?Promise.resolve(t):r.isWebMercator?Promise.resolve(vu(t)):Gue(i).then(a=>{if(!a)throw new ie("geometry-service:missing-url","Geometry service URL is missing");const p=new BL({geometries:[t],outSpatialReference:r});return Pue(a,p,i).then(y=>y[0])})}function Gue(t){if(_t.geometryServiceUrl)return Promise.resolve(_t.geometryServiceUrl);const e=fr.getDefault();return e.load(t).catch(()=>{}).then(()=>e.get("helperServices.geometry.url"))}function br(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const que=()=>CS("esri/widgets/Search/t9n/Search"),WL="esri.widgets.Search.SearchViewModel",na=me.getLogger(WL),qT="highlight",dg=De.ofType({key:t=>t.layer?"layer":"locator",base:eb,typeMap:{layer:vp,locator:UL}}),UT=Je.WGS84,Uue="esri/images/search/search-symbol-32.png",Bue=/<(?:.|\s)*?>/g,wp=-1;let st=class extends OR(Wo.EventedMixin(je)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new dg,this.defaultSymbols={point:new L1({url:Ot(Uue),size:24,width:24,height:24}),polyline:new Is({color:[130,130,130,1],width:2}),polygon:new Du({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=fr.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new dg,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await que();this.messages=i,this.defaultPopupTemplate=new Lu({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([Ee(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),St),AS(e)])}destroy(){this.removeAllHandles(),this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:wp}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:r}=this,a=typeof r=="function"?r.call(null,{sources:e,defaultSources:i}):r?i.concat(e):e,p=this._get("allSources")||new dg;return p.removeAll(),p.addMany(a.filter(Boolean)),p}get locationEnabled(){return this._get("locationEnabled")||GT()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=GT();if(e&&!i){const r=new ie("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});na.error(r)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:r}=this;if(i===wp)return r??"";const a=e.at(i);return(a==null?void 0:a.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),a=(async()=>{var p;try{await this.when();const y=await this._getResultsFromSources(r,i);if((p=i==null?void 0:i.signal)!=null&&p.aborted)return null;const m={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(m,y,r);const _=this._getFirstResult(m.results),x=r.location&&_?_.name:r.text,M=x==null?void 0:x.replace(Bue,"");return this._set("searchTerm",M),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",m.results),this._set("resultCount",m.results.reduce((A,C)=>{var N;return A+(((N=C.results)==null?void 0:N.length)??0)},0)),this.emit("search-complete",m),await this._selectFirstResult(_),m}finally{this._clearSearching()}})();return this._searching=a,a}async searchNearby(e){if(!this.locationEnabled){const r=new ie("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw na.error(r),r}const i=(async()=>{try{const r=await jue(),a=await Due({position:r,view:this.view},e);return await this.search(a,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const Se=new ie("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw na.error(Se),Se}const{view:i}=this,r=br(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),a=r!=null?this.allSources.at(r):null;if(!a){const Se=new ie("select:missing-source","Cannot select without a source.",{source:a});throw na.error(Se),Se}const p=a instanceof vp?this._getLayerSourcePopupTemplate(a):a.popupTemplate,y=a.resultSymbol||this._getDefaultSymbol(e),m=br(a,"resultGraphicEnabled")?a.resultGraphicEnabled:this.resultGraphicEnabled,_=br(a,"autoNavigate")?a.autoNavigate:this.autoNavigate,x=(br(a,"popupEnabled")?a.popupEnabled:this.popupEnabled)?p||this.popupTemplate||this.defaultPopupTemplate:null,{feature:M}=e;if(!M){const Se=new ie("select:missing-feature","Cannot select without a feature.",{feature:M});throw na.error(Se),Se}const{attributes:A,geometry:C,layer:N,sourceLayer:j}=M,D=zT(C),z={layerViewQuery:this._getLayerView(M),elevationQuery:i&&D!=null?Jle(D,i).catch(()=>D):Promise.resolve(D)},W=await qn(z),Y=W.layerViewQuery.value,K=W.elevationQuery.value;y instanceof kc&&(y.text=e.name);const ee=i&&_?e.target||e.extent:null;await(ee!=null?this._goToSearchResult(ee):Promise.resolve());const oe=Y?M:new Nr({geometry:C,symbol:y,attributes:A,layer:N,sourceLayer:j,popupTemplate:x}),ue=i==null?void 0:i.popup,ye=ue&&oe.getEffectivePopupTemplate(ue.defaultPopupTemplateEnabled);return ye&&await i.openPopup({features:[oe],location:K}),Y&&Wle(Y)&&!ye&&this._highlightFeature({graphic:oe,layerView:Y}),!Y&&m&&i&&i.graphics.push(oe),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",oe),this.emit("select-result",{result:e,source:a,sourceIndex:r}),e}async suggest(e,i,r){const a=e||this.searchTerm;this.emit("suggest-start",{searchTerm:a}),await this._suggestTimer(i,r);const p=await this._suggestImmediate(a,r);return this._set("suggestions",p==null?void 0:p.results),this._set("suggestionCount",(p==null?void 0:p.results.reduce((y,m)=>{var _;return y+(((_=m.results)==null?void 0:_.length)??0)},0))??null),this.emit("suggest-complete",p),p}async when(){await s1(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const r=this._updatingPromise=qn([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await s1(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,r;const e=(r=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:r.geocode;return e?e.map(a=>{var _;if(a.placefinding===!1)return;const p=_t.apiKey&&VT(a.url)?{url:Tue}:null,y=UL.fromJSON({...a,...p}),m=y.url;if(VT(m)||$ue(m)||xue(m)){const x=y.outFields??["Addr_type","Match_addr","StAddr","City"],M=(y.placeholder||((_=this.messages)==null?void 0:_.placeholder))??"",A=typeof y.defaultZoomScale=="number"?y.defaultZoomScale:2500;y.singleLineFieldName="SingleLine",y.outFields=x,y.placeholder=M,y.defaultZoomScale=A}return y.singleLineFieldName?y:void 0}).filter(Po):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){var a;const r=(a=this.view)==null?void 0:a.map;return e.map(p=>{const y=r.findLayerById(p.id);if(!y)return;const m=this._getLayerJSON(p),_=vp.fromJSON(m);return _.placeholder=i,this._getLayer(y,m).then(x=>{_.layer=x}),_}).filter(Po).toArray()}_getTableSources(e,i){var a;const r=(a=this.view)==null?void 0:a.map;return e.map(p=>{if(!p.id)return;const y=r.findTableById(p.id);if(!y)return;const m=this._getLayerJSON(p),_=vp.fromJSON(m);return _.placeholder=i,this._getLayer(y,m).then(x=>{_.layer=x}),_}).filter(Po).toArray()}_convertApplicationProperties(){var m,_,x;const e=(m=this.view)==null?void 0:m.map,i=(x=(_=e==null?void 0:e.applicationProperties)==null?void 0:_.viewing)==null?void 0:x.search;if(!i)return[];const{enabled:r,hintText:a,layers:p,tables:y}=i;return r?[...this._getLayerSources(p,a),...this._getTableSources(y,a)]:[]}async _getSubLayer(e,i){var p;if(await e.load(),!e.allSublayers)throw new Error;const r=e.allSublayers.find(y=>y.id===i.subLayer);if(!r)throw new Error;const a=await((p=r.createFeatureLayer)==null?void 0:p.call(r));if(!a)throw new Error;return this._createdFeatureLayers.push(a),a}async _getBuildingSubLayer(e,i){await e.load();const r=e.allSublayers.find(a=>a.id===i.subLayer);if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const a=new ie("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return na.error(a),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var p;const e=(p=this.view)==null?void 0:p.popup,{resultGraphic:i}=this;if(!e||!i)return;const r="selectedFeature"in e,a=r?e.selectedFeature:null;r&&a&&a===i&&e.close()}_suggestTimer(e,i){const r=e??this.suggestionDelay;return nS(r,null,i&&i.signal)}_createLocationForSearch(e){return e instanceof Nr?zT(e.geometry):e instanceof Ue?e:Array.isArray(e)&&e.length===2?new Ue({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&br(e,"key")&&br(e,"text")&&br(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:a,selectedResult:p}=this,y=!e&&a&&p,m=y&&a.key===p.key&&a.sourceIndex===p.sourceIndex,_=y&&a.location;return m||_?a:{location:i,text:i?"":r,sourceIndex:null,key:null}}_getFirstResult(e){let i=null;return e&&e.some(r=>{const{results:a}=r,p=a==null?void 0:a[0],y=!!p;return y&&(i=p),y}),i}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var p;await this.when();const r=await this._getSuggestionsFromSources(e,i);if((p=i==null?void 0:i.signal)!=null&&p.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(a,r),a}_formatSourceResponse(e,i,r){const a=(i==null?void 0:i.value)||[],p=i==null?void 0:i.error,y=this.allSources.at(r);if(p){const m={sourceIndex:r,source:y,error:p};e.errors.push(m),na.error(p),e.numErrors++}else{const m={sourceIndex:r,source:y,results:a};e.results.push(m),e.numResults+=a.length}}_formatResponse(e,i,r){if(i)if(e.activeSourceIndex===wp){const a=r&&br(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;i.forEach((p,y)=>{const m=a!==void 0?a:y;this._formatSourceResponse(e,p,m)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:r}=this,a=!e.location&&br(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,p=[];if(!r.length){const y=new ie("search:no-sources-defined","At least one source is required.",{allSources:r});throw na.error(y),y}return a===wp?r.forEach((y,m)=>{p.push(this._getResultsFromSource(e,m,i))}):p.push(this._getResultsFromSource(e,a,i)),qn(p)}async _getSuggestionsFromSources(e,i){const{allSources:r,activeSourceIndex:a}=this,p=[];if(!r.length){const y=new ie("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw na.error(y),y}return a===wp?r.forEach((y,m)=>{p.push(this._getSuggestionsFromSource(e,m,i))}):p.push(this._getSuggestionsFromSource(e,a,i)),qn(p)}async _getResultsFromSource(e,i,r){var M,A;const a=i!=null?this.allSources.at(i):null;if(!a)return null;const{location:p=null}=e,y=((M=this.view)==null?void 0:M.spatialReference)||UT,m=br(a,"maxResults")?a.maxResults:this.maxResults,_=!!(a instanceof vp&&br(a,"exactMatch"))&&a.exactMatch,{view:x}=this;return(A=a.getResults)==null?void 0:A.call(a,{view:x,sourceIndex:i,location:p,suggestResult:e,spatialReference:y,exactMatch:_,maxResults:m},r)}async _getSuggestionsFromSource(e,i,r){var _,x;const a=this.allSources.at(i);if(!a)return null;e??(e="");const p=br(a,"suggestionsEnabled")?a.suggestionsEnabled:this.suggestionsEnabled,y=e==null?void 0:e.length,m=br(a,"minSuggestCharacters")?a.minSuggestCharacters:this.minSuggestCharacters;if(p&&e.trim()&&y>=m){const M=((_=this.view)==null?void 0:_.spatialReference)||UT,A=br(a,"maxSuggestions")?a.maxSuggestions:this.maxSuggestions,{view:C}=this,N=!!(a instanceof vp&&br(a,"exactMatch"))&&a.exactMatch;return(x=a.getSuggestions)==null?void 0:x.call(a,{view:C,sourceIndex:i,suggestTerm:e,spatialReference:M,maxSuggestions:A,exactMatch:N},r)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return br(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){const i=this.results;if(!i)return null;let r=null;return i.some(a=>a.results.some(p=>p===e&&(r=a.sourceIndex,!0))),r}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const r={target:{target:e},options:{signal:i.signal}};e||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var a;const{defaultSymbols:i}=this,r=(a=e.feature)==null?void 0:a.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(qT)}async _getLayerView(e){var a,p;const{view:i}=this;if(!e||!i||((a=e.layer)==null?void 0:a.type)==="building-component"||((p=e.layer)==null?void 0:p.type)==="subtype-sublayer")return null;const{layer:r}=e;return r?(await i.when(),i.whenLayerView(r)):null}_highlightFeature(e){const{graphic:i,layerView:r}=e,{attributes:a,layer:p}=i,{objectIdField:y}=p,m=(y&&(a==null?void 0:a[y]))??null,_=r.highlight(m??i);this.addHandles(_,qT)}_setResultFloor(e){var p,y,m;const{view:i}=this,r=(p=e.feature)==null?void 0:p.attributes,a=(y=e.feature)==null?void 0:y.sourceLayer;if(a&&"floorInfo"in a&&((m=a==null?void 0:a.floorInfo)!=null&&m.floorField)&&r){const _=r[a.floorInfo.floorField];i==null||i.emit("select-result-floor",_)}}};st.ALL_INDEX=wp,v([S()],st.prototype,"_searching",void 0),v([S()],st.prototype,"_updatingPromise",void 0),v([S({readOnly:!0,value:null})],st.prototype,"activeSource",null),v([S()],st.prototype,"activeSourceIndex",null),v([S()],st.prototype,"allPlaceholder",null),v([S({readOnly:!0})],st.prototype,"allSources",null),v([S()],st.prototype,"autoNavigate",void 0),v([S()],st.prototype,"autoSelect",void 0),v([S()],st.prototype,"defaultPopupTemplate",void 0),v([S({readOnly:!0})],st.prototype,"defaultSources",void 0),v([S()],st.prototype,"defaultSymbols",void 0),v([S()],st.prototype,"includeDefaultSources",void 0),v([S()],st.prototype,"locationEnabled",null),v([S()],st.prototype,"maxInputLength",void 0),v([S()],st.prototype,"maxResults",void 0),v([S()],st.prototype,"maxSuggestions",void 0),v([S()],st.prototype,"messages",void 0),v([S()],st.prototype,"minSuggestCharacters",void 0),v([S({readOnly:!0})],st.prototype,"placeholder",null),v([S()],st.prototype,"popupEnabled",void 0),v([S({type:Lu})],st.prototype,"popupTemplate",void 0),v([S({type:fr})],st.prototype,"portal",void 0),v([S()],st.prototype,"resultCount",void 0),v([S()],st.prototype,"resultGraphicEnabled",void 0),v([S({readOnly:!0})],st.prototype,"resultGraphic",void 0),v([S({readOnly:!0})],st.prototype,"results",void 0),v([S({readOnly:!0})],st.prototype,"selectedSuggestion",void 0),v([S()],st.prototype,"searchAllEnabled",void 0),v([S({readOnly:!0})],st.prototype,"selectedResult",void 0),v([S()],st.prototype,"searchTerm",null),v([S({type:dg})],st.prototype,"sources",void 0),v([S({readOnly:!0})],st.prototype,"state",null),v([S()],st.prototype,"suggestionDelay",void 0),v([S()],st.prototype,"suggestionCount",void 0),v([S({readOnly:!0})],st.prototype,"suggestions",void 0),v([S()],st.prototype,"suggestionsEnabled",void 0),v([S({readOnly:!0})],st.prototype,"updating",null),v([S()],st.prototype,"view",void 0),v([S()],st.prototype,"clear",null),st=v([B(WL)],st);const Gp=st;let zl=class extends Yo{constructor(e,i){super(e,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const e={[sa.showMoreResults]:this.showMoreResultsOpen};return fe("div",{class:sa.base},fe("div",{key:"esri-search-renderer__container",class:this.classes(sa.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return fe("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var r;const e=(r=this.viewModel)==null?void 0:r.selectedResult,i=e&&e.name||"";return fe("div",{key:"esri-search-renderer__result-name",class:sa.moreResultsItem},i)}renderMoreResultsLists(){const{viewModel:e}=this;if(!e)return[];const i=e.results;if((e.resultCount??0)<2)return null;const r=i==null?void 0:i.map(a=>this.renderMoreResultsList(a));return fe("div",{key:"esri-search-renderer__more-results-container",class:sa.moreResultsList},r)}renderMoreResultsButton(){const{messages:e,viewModel:i}=this;return i?(i.resultCount??0)<2?null:fe("div",{key:"esri-search-renderer__more-results-button",class:sa.moreResultsItem},fe("a",{class:sa.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults)):null}renderMoreResultsHeader(e,i){return fe("div",{key:`esri-search-result-renderer__header-${i}`,class:sa.moreResultsListHeader},e)}renderMoreResultsList(e){var A,C,N;const{results:i}=e,r=(i==null?void 0:i.length)??0,a=r>0,p=(A=this.viewModel)==null?void 0:A.selectedResult,y=r===1&&i[0]===p,m=this._getSourceName(e.source,e.sourceIndex),_=(((N=(C=this.viewModel)==null?void 0:C.results)==null?void 0:N.length)??0)>1&&!y?this.renderMoreResultsHeader(m,e.sourceIndex):null,x=a&&i.map((j,D)=>this.renderMoreResultsListItem(j,D)),M=a&&!y?fe("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},x):null;return a?fe("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},_,M):null}renderMoreResultsListItem(e,i){return e!==this.get("viewModel.selectedResult")?fe("li",{key:`esri-search-result-renderer__list-item-${i}`},fe("a",{class:sa.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=this.get("viewModel.view.popup");i&&i.reposition()}_selectResultClick(e){var r;e.preventDefault();const i=e.currentTarget["data-result"];(r=this.viewModel)==null||r.select(i)}_getSourceName(e,i){return i===Gp.ALL_INDEX?this.messages.all:e.name}};v([S(),eo("esri/widgets/Search/t9n/Search")],zl.prototype,"messages",void 0),v([S()],zl.prototype,"showMoreResultsOpen",void 0),v([S()],zl.prototype,"viewModel",void 0),v([vs()],zl.prototype,"_showMoreResultsClick",null),v([vs()],zl.prototype,"_selectResultClick",null),zl=v([B("esri.widgets.Search.SearchResultRenderer")],zl);const Hue=zl,Wue=/<[a-z/][\s\S]*>/i,Jue=(t,e)=>{const i=DF(e).split(/\s/),r=new RegExp(`(${i.join("|")})`,"gi");return t.replace(r,a=>`<strong>${a}</strong>`)};let nt=class extends Yo{constructor(e,i){super(e,i),this._activeMenuItemIndex=-1,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new Hue,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=ze.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new Gp,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=r=>{var p;const a=r.relatedTarget;a&&((p=this._container)!=null&&p.contains(a))||this._clearActiveMenu()},this.addHandles([Ee(()=>this.searchTerm,r=>{(r&&this.activeMenu==="warning"||!r&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),Tu(()=>{var r;return(r=this.viewModel)==null?void 0:r.allSources},"change",()=>this._watchSourceChanges()),Ee(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),St),Ee(()=>{var r;return(r=this.viewModel)==null?void 0:r.defaultPopupTemplate},r=>{r&&(r.content=this._renderSearchResultsContent.bind(this))},St)])}destroy(){this.removeAllHandles(),this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=Wt(this._searchResultRenderer)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){var e;return(e=this.viewModel)==null?void 0:e.portal}set portal(e){this.viewModel&&(this.viewModel.portal=e)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}async search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:r}=i;this._searchController=i;try{const a=await this.viewModel.search(e,{signal:r});return this._searchController!==i?void 0:(this.activeMenu=a!=null&&a.numResults?"none":"warning",this._searchController=null,a)}catch{return this._searchController!==i?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:r}=i;this._suggestController=i;try{const a=await this.viewModel.suggest(e,null,{signal:r});return this._suggestController!==i?void 0:(this._suggestController=null,a!=null&&a.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),a)}catch{return this._suggestController!==i||(this._suggestController=null),null}}render(){const{state:e}=this.viewModel,i={[ze.disabled]:e==="disabled",[ze.esriWidgetDisabled]:this.disabled};return fe("div",{class:this.classes(ze.base,i)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e,disabled:i}=this;return fe("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:i,class:this.classes(ze.submitButton,ze.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},fe("span",{"aria-hidden":"true",class:ze.searchIcon}))}renderWarningMenu(){return fe("div",{key:"esri-search__error-menu",class:this.classes(ze.menu,ze.warningMenu)},fe("div",{class:ze.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:i,sourceMenuId:r,sourceMenuButtonId:a,disabled:p}=this,{activeSourceIndex:y,allSources:m}=this.viewModel;return m.length>1?fe("button",{id:a,key:"esri-search__source-menu-button",bind:this,disabled:p,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(i==="source").toString(),"aria-controls":r,class:this.classes(ze.sourcesButton,ze.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:Fy,"data-node-ref":"_sourceMenuButtonNode",type:"button"},fe("span",{"aria-hidden":"true",class:ze.dropdownIcon}),fe("span",{"aria-hidden":"true",class:ze.dropupIcon}),fe("span",{class:ze.sourceName},this._getSourceName(y))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:r,activeMenu:a,sourceMenuId:p,sourceMenuButtonId:y}=this,m=a==="source"&&r>-1?this._buildId("source-item",r):null;return e.length>1?fe("ul",{"aria-activedescendant":m,"aria-labelledby":y,id:p,role:"menu",bind:this,afterCreate:Fy,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:ze.menuList,tabIndex:-1},i?this.renderSource(Gp.ALL_INDEX):null,e.map((_,x)=>this.renderSource(x)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?fe("div",{key:"esri-search__source-menu",class:this.classes(ze.menu,ze.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:i,disabled:r}=this;return fe("div",{class:ze.loader,key:"base-loader",tabIndex:r?-1:void 0},fe("span",{"aria-hidden":"true",class:ze.loaderAnimation}),fe("span",{class:ze.fallbackText},e.searchButtonTitle),fe("span",{class:ze.loaderText},i.loading))}renderContainer(){const{allSources:e,state:i}=this.viewModel,{activeMenu:r}=this,a={[ze.hasMultipleSources]:e.length>1,[ze.isLoading]:i==="loading",[ze.isSearching]:i==="searching",[ze.showWarning]:r==="warning",[ze.showSources]:r==="source",[ze.showSuggestions]:r==="suggestion"};return fe("div",{tabIndex:-1,afterCreate:p=>{this._container=p,p.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:p=>{p.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(a,ze.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?fe("button",{bind:this,disabled:this.disabled,class:this.classes(ze.clearButton,ze.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},fe("span",{"aria-hidden":"true",class:ze.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:i,displayedSearchTerm:r}=this,a=i&&!r,p=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return a?fe("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(ze.menuList,ze.suggestionList,ze.suggestionListCurrentLocation)},fe("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(ze.menuItem,p?ze.menuItemFocus:null)},fe("span",{"aria-hidden":"true",class:ze.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:i,displayedSearchTerm:r,messages:a,suggestionsMenuId:p,inputId:y,_activeMenuItemIndex:m,disabled:_}=this,{maxInputLength:x,placeholder:M,searchTerm:A,suggestionCount:C}=this.viewModel,N=!(!(i&&!r)&&!C),j=e==="suggestion"&&m>-1?this._buildId("suggestion-item",m):null;return fe("input",{"aria-activedescendant":j,"aria-autocomplete":"list","aria-expanded":(N&&e==="suggestion").toString(),"aria-controls":N?p:null,"aria-haspopup":"listbox","aria-label":a.searchButtonTitle,bind:this,disabled:_,placeholder:M,maxlength:x,autocomplete:"off",type:"text",class:this.classes(ze.esriInput,ze.input),value:A,id:y,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:Fy,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:A?"":M})}renderForm(){return fe("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:ze.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:i}=e,{results:r}=e;return(r==null?void 0:r.length)?fe("ul",{role:"group",key:`esri-search__suggestion-list-${i}`,class:this.classes(ze.menuList,ze.suggestionList)},r==null?void 0:r.map(p=>this.renderSuggestion(p,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(i=>[this.renderSuggestionHeader(i),this.renderSuggestList(i)]):[]}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:i,suggestionsMenuId:r,inputId:a}=this,{suggestionCount:p}=this.viewModel,y=i&&!e||p;return this._menuItemCount=0,y?fe("div",{id:r,key:"esri-search__suggestions-menu",class:this.classes(ze.menu,ze.suggestionsMenu),role:"listbox","aria-labelledby":a,bind:this,afterCreate:Fy,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return fe("div",{key:"esri-search__input-container",class:ze.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){var m;const{allSources:i,activeSourceIndex:r}=this.viewModel,{sourceIndex:a}=e,p=(m=e.results)==null?void 0:m.length,y=i.length>1&&r===Gp.ALL_INDEX;return p&&y?fe("div",{key:`esri-search__suggestion-header-${a}`,class:ze.menuHeader},this._getSourceName(a)):null}renderSuggestion(e,i){const{_activeMenuItemIndex:r,viewModel:{searchTerm:a}}=this;if(!a)return;const p=this.activeMenu==="suggestion"&&r===i;return fe("li",{bind:this,id:this._buildId("suggestion-item",i),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${i}`,"data-suggestion":e,role:"option",innerHTML:this._getSuggestResultHTML(e.text,a),class:this.classes(ze.menuItem,p?ze.menuItemFocus:null)})}renderSource(e){const{activeSourceIndex:i,searchAllEnabled:r}=this.viewModel,a={[ze.menuItemActive]:e===i,[ze.menuItemFocus]:this.activeMenu==="source"&&e===(r?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},p=r?e+1:e;return fe("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",p),"aria-checked":(e===i).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(ze.source,ze.menuItem,a)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:i}=this,r=e?xC(i.noResultsFoundForValue,{value:`"${e}"`}):i.noResultsFound;return fe("div",{key:"esri-search__no_results"},fe("div",{class:ze.warningMenuHeader},i.noResults),fe("div",{class:ze.warningMenuText},r))}renderEmptySearchWarning(){const{messages:e}=this;return fe("div",{key:"esri-search__empty-search"},fe("span",{"aria-hidden":"true",class:ze.noticeIcon}),fe("span",{class:ze.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return fe("div",{key:"esri-search__locate-error"},fe("span",{"aria-hidden":"true",class:ze.noticeIcon}),fe("span",{class:ze.noValueText},e.locateError))}renderWarning(){var a;const{displayedSearchTerm:e,_locateFailed:i}=this,{viewModel:r}=this;return i?this.renderLocateWarning():(a=r.selectedSuggestion)!=null&&a.location||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,i){return`${this.id}-${e}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{viewModel:{allSources:e}}=this,i="sources";this.removeHandles(i),e.forEach(r=>this.addHandles(Ee(()=>r.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const i=BT(e.currentTarget);i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:i}=e;this._searchController=e,(async()=>{try{const r=await this.viewModel.searchNearby({signal:i});this.activeMenu=r!=null&&r.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var r;if(!e)return;const i=Kue(e);i!=null&&(this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(r=this._sourceMenuButtonNode)==null||r.focus())}_cancelSuggest(){this._suggestController=lc(this._suggestController)}_cancelSearch(){this._searchController=lc(this._searchController),this._locateFailed=!1}_handleInputKeyup(e){var p;const i=yf(e);if(e.ctrlKey||e.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||e.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const r=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const a=(p=this._suggestionListNode)==null?void 0:p.getElementsByTagName("li");if(a!=null&&a.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),r)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,a,this._suggestionListNode);const y=a[this._activeMenuItemIndex];if(i==="Enter"&&y){const m=BT(y);return void(m?(this._focus(),this.search(m)):Yue(y)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,i,r){const a=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=i.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),a!==this._activeMenuItemIndex&&r&&LQ(i[this._activeMenuItemIndex],r)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const i=e.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){var r;const i=yf(e);if(xP(i)){e.preventDefault();const a=(r=this._sourceListNode)==null?void 0:r.getElementsByTagName("li"),p=a==null?void 0:a[this._activeMenuItemIndex];this._setSourceFromMenuItem(p)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var p,y,m;const i=yf(e),r=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(r&&e.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((p=this._sourceMenuButtonNode)==null?void 0:p.focus());const a=(y=this._sourceListNode)==null?void 0:y.getElementsByTagName("li");return a&&a.length!==0&&r?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,a,(m=this._sourceListNode)==null?void 0:m.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:i}=this,r=this.viewModel,{allSources:a}=r,p=a.at(e);return e===Gp.ALL_INDEX?i.all:p&&p.name||i.untitledSource}_getSuggestResultHTML(e,i){return e?Wue.test(e)?e:Jue(e,i):this.messages.untitledResult}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};function BT(t){return t==null?void 0:t["data-suggestion"]}function Kue(t){return t==null?void 0:t["data-source-index"]}function Yue(t){return!!(t!=null&&t["data-current-location-item"])}v([S()],nt.prototype,"_activeMenuItemIndex",void 0),v([S()],nt.prototype,"displayedSearchTerm",null),v([S({readOnly:!0})],nt.prototype,"inputId",null),v([S({readOnly:!0})],nt.prototype,"suggestionsMenuId",null),v([S({readOnly:!0})],nt.prototype,"sourceMenuId",null),v([S({readOnly:!0})],nt.prototype,"sourceMenuButtonId",null),v([S()],nt.prototype,"activeMenu",void 0),v([S({readOnly:!0})],nt.prototype,"activeSource",null),v([S()],nt.prototype,"activeSourceIndex",null),v([S()],nt.prototype,"allPlaceholder",null),v([S({readOnly:!0})],nt.prototype,"allSources",null),v([S()],nt.prototype,"autoNavigate",null),v([S()],nt.prototype,"autoSelect",null),v([S({readOnly:!0})],nt.prototype,"defaultSources",null),v([S()],nt.prototype,"disabled",void 0),v([S()],nt.prototype,"goToOverride",null),v([S()],nt.prototype,"iconClass",void 0),v([S()],nt.prototype,"icon",void 0),v([S()],nt.prototype,"includeDefaultSources",null),v([S()],nt.prototype,"label",null),v([S()],nt.prototype,"locationEnabled",null),v([S()],nt.prototype,"maxResults",null),v([S()],nt.prototype,"maxSuggestions",null),v([S(),eo("esri/widgets/Search/t9n/Search")],nt.prototype,"messages",void 0),v([S(),eo("esri/t9n/common")],nt.prototype,"messagesCommon",void 0),v([S()],nt.prototype,"minSuggestCharacters",null),v([S()],nt.prototype,"popupEnabled",null),v([S()],nt.prototype,"popupTemplate",null),v([S()],nt.prototype,"portal",null),v([S()],nt.prototype,"resultGraphic",null),v([S()],nt.prototype,"resultGraphicEnabled",null),v([S({readOnly:!0})],nt.prototype,"results",null),v([S()],nt.prototype,"searchAllEnabled",null),v([S()],nt.prototype,"searchTerm",null),v([S({readOnly:!0})],nt.prototype,"selectedResult",null),v([S()],nt.prototype,"sources",null),v([S({readOnly:!0})],nt.prototype,"suggestions",null),v([S()],nt.prototype,"suggestionsEnabled",null),v([S()],nt.prototype,"view",null),v([rL(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),S({type:Gp})],nt.prototype,"viewModel",void 0),nt=v([B("esri.widgets.Search")],nt);const Zue=nt;let Vl=class extends je{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(Tu(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this.removeAllHandles(),this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const i=!!e;this._set("expanded",i);const r=this.get("view.ui");r&&r.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&qo(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?qo(()=>{var i;return(i=this.view)==null?void 0:i.stationary},()=>{var i;return(i=this._viewpointHandle)==null?void 0:i.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:i,view:r}=this;if(!r||!i)return;const a=OY(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this.addHandles(a,e),this._viewpointHandle=a}_collapse(){this.expanded=!1}};v([S({value:!1})],Vl.prototype,"autoCollapse",null),v([S({value:!1})],Vl.prototype,"expanded",null),v([S()],Vl.prototype,"group",void 0),v([S({readOnly:!0})],Vl.prototype,"state",null),v([S({value:null})],Vl.prototype,"view",null),Vl=v([B("esri.widgets.Expand.ExpandViewModel")],Vl);const JL=Vl,Yr="esri-expand",Ri={base:`${Yr} esri-widget`,modeAuto:`${Yr}--auto`,modeDrawer:`${Yr}--drawer`,modeFloating:`${Yr}--floating`,container:`${Yr}__container`,containerExpanded:`${Yr}__container--expanded`,panel:`${Yr}__panel`,button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:`${Yr}__icon--expanded`,iconNumber:`${Yr}__icon-number`,iconNumberExpanded:`${Yr}__icon-number--expanded`,expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:`${Yr}__content`,contentExpanded:`${Yr}__content--expanded`,expandMask:`${Yr}__mask`,expandMaskExpanded:`${Yr}__mask--expanded`};let ti=class extends Yo{constructor(e,i){super(e,i),this.closeOnEsc=!0,this.collapseIcon=null,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconClass=null,this.icon=null,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new JL,this._handleKeyDown=r=>{const{closeOnEsc:a,_toggleButtonEl:p,expanded:y}=this;!y||!a||r.target===p||r.key!=="Escape"||(typeof a=="function"?a(r):a)&&(this.expanded=!1,p==null||p.focus())}}loadDependencies(){return xR({icon:()=>we(()=>import("./calcite-icon-e84b42de.js"),["assets/calcite-icon-e84b42de.js","assets/icon-8b5fa310.js","assets/observers-279029a9.js"])})}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:i,collapseTooltip:r,expandTooltip:a}=this;return(e?r||(i==null?void 0:i.collapse):a||(i==null?void 0:i.expand))??""}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIconClass(){return Ri.collapseIcon}set collapseIconClass(e){this._overrideIfSome("collapseIconClass",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIconClass(){return Nf(this.content)?this.content.iconClass:Ri.expandIcon}set expandIconClass(e){this._overrideIfSome("expandIconClass",e)}get expandIcon(){return Nf(this.content)?this.content.icon:void 0}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,i={[Ri.modeAuto]:e==="auto",[Ri.modeDrawer]:e==="drawer",[Ri.modeFloating]:e==="floating"};return fe("div",{class:this.classes(Ri.base,i),onkeydown:this._handleKeyDown},this._renderMask(),this._renderContainer())}_renderContainer(){const{expanded:e}=this,i={[Ri.containerExpanded]:e};return fe("div",{class:this.classes(Ri.container,i)},this._renderPanel(),this._renderContent())}_renderMask(){const{expanded:e}=this,i={[Ri.expandMaskExpanded]:e};return fe("div",{bind:this,onclick:this._toggle,class:this.classes(Ri.expandMask,i)})}_renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?fe("span",{key:"expand__icon-number",class:Ri.iconNumber},i):null}_renderPanelNumber(){const{iconNumber:e,expanded:i}=this;return e&&i?fe("span",{key:"expand__expand-icon-number",class:this.classes(Ri.iconNumber,Ri.iconNumberExpanded)},e):null}_renderIcon(){const e=(this.expanded?this.collapseIcon:this.expandIcon)??"";return fe("calcite-icon",{key:"icon",icon:e,scale:"s"})}_renderLegacyIcon(){const{collapseIconClass:e,expandIconClass:i,expanded:r}=this,a={[Ri.iconExpanded]:r};return i!=null&&(a[i]=!r),e!=null&&(a[e]=e===i||r),fe("span",{key:"legacy-icon","aria-hidden":"true",class:this.classes(Ri.icon,a)})}_renderTitle(){return fe("span",{class:Ri.text},this.expandTitle)}_renderExpandButton(){const{expanded:e,expandTitle:i,expandIcon:r,collapseIcon:a,contentId:p}=this;return fe("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":p,"aria-expanded":e?"true":"false",bind:this,class:Ri.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:i},this._renderBadgeNumber(),!e&&r!=null||e&&a!=null?this._renderIcon():this._renderLegacyIcon(),this._renderTitle())}_renderPanel(){return fe("div",{class:Ri.panel},this._renderExpandButton(),this._renderPanelNumber())}_renderContent(){const{expanded:e,contentId:i,content:r}=this,a={[Ri.contentExpanded]:e},p={id:i,role:"region",class:this.classes(Ri.content,a)};return typeof r=="string"?fe("div",{key:"content__string",innerHTML:r,...p}):Nf(r)?fe("div",{key:"content__widget",...p},r.render()):r instanceof HTMLElement?fe("div",{key:"content__html-element",bind:r,afterCreate:this._attachToNode,...p}):ule(r)?fe("div",{key:"content__node",bind:r.domNode,afterCreate:this._attachToNode,...p}):null}_toggle(){this.toggle()}_attachToNode(e){const i=this;e.appendChild(i)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};v([S({readOnly:!0})],ti.prototype,"contentId",null),v([S({readOnly:!0})],ti.prototype,"expandTitle",null),v([S()],ti.prototype,"autoCollapse",null),v([S()],ti.prototype,"closeOnEsc",void 0),v([S()],ti.prototype,"collapseIconClass",null),v([S()],ti.prototype,"collapseIcon",void 0),v([S()],ti.prototype,"collapseTooltip",void 0),v([S()],ti.prototype,"content",void 0),v([S()],ti.prototype,"expanded",null),v([S()],ti.prototype,"expandIconClass",null),v([S()],ti.prototype,"expandIcon",null),v([S()],ti.prototype,"expandTooltip",void 0),v([S()],ti.prototype,"group",null),v([S()],ti.prototype,"iconClass",void 0),v([S()],ti.prototype,"icon",void 0),v([S()],ti.prototype,"iconNumber",void 0),v([S()],ti.prototype,"label",null),v([S(),eo("esri/widgets/Expand/t9n/Expand")],ti.prototype,"messages",void 0),v([S(),eo("esri/t9n/common")],ti.prototype,"messagesCommon",void 0),v([S()],ti.prototype,"mode",void 0),v([S()],ti.prototype,"view",null),v([S({type:JL})],ti.prototype,"viewModel",void 0),v([vs()],ti.prototype,"_toggle",null),ti=v([B("esri.widgets.Expand")],ti);const Xue=ti;let Que=class KL{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(g3),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new KL,r=this._originStores[Me.DEFAULTS];r&&r.forEach((a,p)=>{i.set(p,se(a),Me.DEFAULTS)});for(let a=Me.SERVICE;a<g3;a++){const p=this._originStores[a];p&&p.forEach((y,m)=>{e&&e.has(m)||i.set(m,se(y),a)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=Me.USER){let a=this._originStores[r];if(a||(a=new Map,this._originStores[r]=a),a.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const p=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),p!==i}return!1}delete(e,i=Me.USER){const r=this._originStores[i];if(!r)return;const a=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let p=i-1;p>=0;p--){const y=this._originStores[p];if(y&&y.has(e)){this._values.set(e,y.get(e)),this._propertyOriginMap.set(e,p);break}}}return a}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],a=r&&r.get(e),p=this._values.get(e);return this._values.set(e,a),this._propertyOriginMap.set(e,i),p!==a}originOf(e){return this._propertyOriginMap.get(e)||Me.DEFAULTS}forEach(e){this._values.forEach(e)}};const YL=t=>{let e=class extends t{constructor(...i){super(...i);const r=Yi(this),a=r.store,p=new Que;r.store=p,NE(r,a,p)}read(i,r){LE(this,i,r)}getAtOrigin(i,r){const a=Vw(this),p=Br(r);if(typeof i=="string")return a.get(i,p);const y={};return i.forEach(m=>{y[m]=a.get(m,p)}),y}originOf(i){return Bf(this.originIdOf(i))}originIdOf(i){return Vw(this).originOf(i)}revert(i,r){const a=Vw(this),p=Br(r),y=Yi(this);let m;m=typeof i=="string"?i==="*"?a.keys(p):[i]:i,m.forEach(_=>{y.invalidate(_),a.revert(_,p),y.commit(_)})}};return e=v([B("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function Vw(t){return Yi(t).store}let HT=class extends YL(je){};HT=v([B("esri.core.ReadOnlyMultiOriginJSONSupport")],HT);const ehe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,r="user"){return Gw(this).delete(i,Br(r))}write(i,r){return DE(this,i=i||{},r),i}setAtOrigin(i,r,a){Yi(this).setAtOrigin(i,r,Br(a))}removeOrigin(i){const r=Gw(this),a=Br(i),p=r.keys(a);for(const y of p)r.originOf(y)===a&&r.set(y,r.get(y,a),Me.USER)}updateOrigin(i,r){const a=Gw(this),p=Br(r),y=this.get(i);for(let m=p+1;m<g3;++m)a.delete(i,m);a.set(i,y,p)}toJSON(i){return this.write({},i)}};return e=v([B("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function Gw(t){return Yi(t).store}const K1=t=>{let e=class extends ehe(YL(t)){constructor(...i){super(...i)}};return e=v([B("esri.core.MultiOriginJSONSupport")],e),e};let WT=class extends K1(je){};WT=v([B("esri.core.MultiOriginJSONSupport")],WT);function the(t){return"portalItem"in t}const ux=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):the(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return v([S({type:String})],e.prototype,"apiKey",null),e=v([B("esri.layers.mixins.APIKeyMixin")],e),e};let e2=class{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new ie(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e2(this.major,this.minor,this._context)}static parse(e,i=""){const[r,a]=e.split("."),p=/^\s*\d+\s*$/;if(!r||!r.match||!p.test(r))throw new ie((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!a||!a.match||!p.test(a))throw new ie((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const y=parseInt(r,10),m=parseInt(a,10);return new e2(y,m,i)}};function ihe(t){if(!t)return t;const{start:e,end:i}=t;return new ln({start:e!=null?oc(e,-e.getTimezoneOffset(),"minutes"):e,end:i!=null?oc(i,-i.getTimezoneOffset(),"minutes"):i})}function rhe(t){if(!t)return t;const{start:e,end:i}=t;return new ln({start:e!=null?oc(e,e.getTimezoneOffset(),"minutes"):e,end:i!=null?oc(i,i.getTimezoneOffset(),"minutes"):i})}var v5;let X0=v5=class extends de{constructor(t){super(t)}async collectRequiredFields(t,e){return Wr(t,e,this.expression)}clone(){return new v5({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};v([S({type:String,json:{write:!0}})],X0.prototype,"expression",void 0),v([S({type:String,json:{write:!0}})],X0.prototype,"title",void 0),X0=v5=v([B("esri.layers.support.FeatureExpressionInfo")],X0);const JT=X0,hx={unknown:1,inches:Ps(1,"meters","inches"),feet:Ps(1,"meters","feet"),"us-feet":Ps(1,"meters","us-feet"),yards:Ps(1,"meters","yards"),miles:Ps(1,"meters","miles"),"nautical-miles":Ps(1,"meters","nautical-miles"),millimeters:Ps(1,"meters","millimeters"),centimeters:Ps(1,"meters","centimeters"),decimeters:Ps(1,"meters","decimeters"),meters:Ps(1,"meters","meters"),kilometers:Ps(1,"meters","kilometers"),"decimal-degrees":1/IG(1,"meters",qt.radius)};function xbe(t){return 1/(hx[t]||1)}function she(){const t=Object.keys(hx);return t.sort(),t}const nhe=she();var b5;const im=Rr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),KT=new ft({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Sa=b5=class extends de{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,r){e[i]=t.write({},r),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new b5({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&vF(this.featureExpressionInfo,t.featureExpressionInfo)}};v([S({type:JT,json:{write:!0}})],Sa.prototype,"featureExpressionInfo",void 0),v([ge("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Sa.prototype,"readFeatureExpressionInfo",null),v([$e("featureExpressionInfo",{featureExpressionInfo:{type:JT},"featureExpression.value":{type:[0]}})],Sa.prototype,"writeFeatureExpressionInfo",null),v([S({type:im.apiValues,nonNullable:!0,json:{type:im.jsonValues,read:im.read,write:{writer:im.write,isRequired:!0}}})],Sa.prototype,"mode",null),v([S({type:Number,json:{write:!0}})],Sa.prototype,"offset",void 0),v([S({type:nhe,json:{type:String,read:KT.read,write:KT.write}})],Sa.prototype,"unit",null),Sa=b5=v([B("esri.layers.support.ElevationInfo")],Sa);const ohe=Sa,ahe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},tb={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},cx={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},px={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:bc}}},lhe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},uhe={value:null,type:ohe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function $be(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const ZL={write:!0,read:!0},w5={type:Number,json:{origins:{"web-document":ZL,"portal-item":{write:!0}}}},hhe={...w5,json:{...w5.json,origins:{"web-document":{...ZL,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?Xf(e.layerDefinition.drawingInfo.transparency):void 0:Xf(e.drawingInfo.transparency)}}},che={type:ln,readOnly:!0,get(){var m,_;if(!((m=this.layer)!=null&&m.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,r=(_=this.view)==null?void 0:_.timeExtent;let a=this.layer.timeExtent;t&&(a=rhe(a));let p=i?r&&a?r.intersection(a):r||a:a;if(!p||p.isEmpty||p.isAllTime)return p;e&&(p=p.offset(-e.value,e.unit)),t&&(p=ihe(p));const y=this._get("timeExtent");return p.equals(y)?y:p}},Tbe={type:vt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=vt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Je.fromJSON(e.spatialReference)),i}}}},read:!1}},XL={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},phe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},dhe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},QL={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};async function fhe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Lp(t);const i=Je.WGS84;return await DC(e,i),Vu(t,i)}function Ibe(t,e){if(!ej(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function ej(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function YT(t){return ej(t,yhe.HOSTED_SERVICE)}function Mbe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}async function Ebe(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return fhe(i)}const yhe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function ZT(t){var _;const{portal:e,isOrgItem:i,itemControl:r}=t,a=(_=e.user)==null?void 0:_.privileges;let p=!a||a.includes("features:user:edit"),y=!!i&&!!(a!=null&&a.includes("features:user:fullEdit"));const m=r==="update"||r==="admin";return m?y=p=!0:y&&(p=!0),{features:{edit:p,fullEdit:y},content:{updateItem:m}}}const tj=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,r){const a=r.capabilities&&r.capabilities.split(",").map(Y=>Y.toLowerCase().trim());if(!a)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const p=this.type,y=p!=="tile"&&!!r.supportsDynamicLayers,m=a.includes("query"),_=a.includes("map"),x=!!r.exportTilesAllowed,M=a.includes("tilemap"),A=a.includes("data"),C=p!=="tile"&&(!r.tileInfo||y),N=p!=="tile"&&(!r.tileInfo||y),j=p!=="tile",D=r.cimVersion&&e2.parse(r.cimVersion),z=(D==null?void 0:D.since(1,4))??!1,W=(D==null?void 0:D.since(2,0))??!1;return{operations:{supportsExportMap:_,supportsExportTiles:x,supportsIdentify:m,supportsQuery:A,supportsTileMap:M},exportMap:_?{supportsArcadeExpressionForLabeling:z,supportsSublayersChanges:j,supportsDynamicLayers:y,supportsSublayerVisibility:C,supportsSublayerDefinitionExpression:N,supportsCIMSymbols:W}:null,exportTiles:x?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let a=r.currentVersion;return a||(a=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),a}async fetchRelatedService(i){const r=this.portalItem;if(!r||!YT(r))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=r.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(p=>p.find(y=>y.type==="Feature Service")??null,()=>null));const a=await this._relatedFeatureServicePromise;return Zt(i),a?{itemId:a.id,url:a.url}:null}async fetchSublayerInfo(i,r){const{source:a}=i;if(this!=null&&this.portalItem&&this.type==="tile"&&(a==null?void 0:a.type)==="map-layer"&&YT(this.portalItem)&&i.originIdOf("url")<Me.SERVICE){const m=await this.fetchRelatedService(r);m&&(i.url=Ua(m.url,a.mapLayerId.toString()),i.layerItemId=m.itemId)}const{url:p}=i;let y;if(a.type==="data-layer")y=(await ot(p,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...r})).data;else if(p&&i.originIdOf("url")>Me.SERVICE)try{y=(await this._fetchAllLayersAndTablesFromService(p)).get(a.mapLayerId)}catch{}else{let m=i.id;(a==null?void 0:a.type)==="map-layer"&&(m=a.mapLayerId);try{y=(await this.fetchAllLayersAndTables(r)).get(m)}catch{}}return y}async fetchAllLayersAndTables(i){var r;return this._fetchAllLayersAndTablesFromService((r=this.parsedUrl)==null?void 0:r.path,i)}async _fetchAllLayersAndTablesFromService(i,r){await this.load(r),this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const a=Gu(i),p=pE(this._allLayersAndTablesMap,a==null?void 0:a.url.path,()=>ot(Ua(a==null?void 0:a.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(m=>{const _=new Map;for(const x of m.data.layers)_.set(x.id,x);return{result:_}},m=>({error:m}))),y=await p;if(Zt(r),"result"in y)return y.result;throw y.error}};return v([S({readOnly:!0})],e.prototype,"capabilities",void 0),v([ge("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],e.prototype,"readCapabilities",null),v([S({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),v([S({type:vt})],e.prototype,"fullExtent",void 0),v([S(XL)],e.prototype,"id",void 0),v([S({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],e.prototype,"legendEnabled",void 0),v([S(tb)],e.prototype,"popupEnabled",void 0),v([S({type:Je})],e.prototype,"spatialReference",void 0),v([S({readOnly:!0})],e.prototype,"version",void 0),v([ge("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],e.prototype,"readVersion",null),e=v([B("esri.layers.mixins.ArcGISMapService")],e),e},dx=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Gu(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Bee(i,me.getLogger(this)))}};return v([S()],e.prototype,"title",null),v([S({type:String})],e.prototype,"url",null),e=v([B("esri.layers.mixins.ArcGISService")],e),e};function ib(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function mhe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ghe(t,e,i,r,a,p,y,m,_,x,M,A,C,N,j,D){const z=new Float32Array(16);return z[0]=t,z[1]=e,z[2]=i,z[3]=r,z[4]=a,z[5]=p,z[6]=y,z[7]=m,z[8]=_,z[9]=x,z[10]=M,z[11]=A,z[12]=C,z[13]=N,z[14]=j,z[15]=D,z}function vhe(t,e){return new Float32Array(t,e,16)}const bhe=ib();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:bhe,clone:mhe,create:ib,createView:vhe,fromValues:ghe},Symbol.toStringTag,{value:"Module"}));const whe=(t,e)=>{const i=zu(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Za(i,i)},_he=(t,e)=>{const i=zu(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Za(i,i)},She=(t,e)=>{const i=1-e,r=zu(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Za(r,r)},xhe=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),a=zu(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Za(a,a)},$he=(t,e)=>{const i=1-2*e,r=zu(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Za(r,r)},The=(t,e)=>{const i=zu(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Za(i,i)},Ihe=(t,e)=>{const i=1-e,r=zu(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Za(r,r)};let ij=class rj{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=rs(e.strength,i.strength,r),this.radius=rs(e.radius,i.radius,r),this.threshold=rs(e.threshold,i.threshold,r)}clone(){return new rj(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:zf(this.radius),strength:this.strength,threshold:this.threshold}}},sj=class nj{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(rs(e.radius,i.radius,r))}clone(){return new nj(this.radius)}toJSON(){return{type:"blur",radius:zf(this.radius)}}},_5=class oj{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=rs(e.amount,i.amount,r),this._updateMatrix()}clone(){return new oj(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||ib();switch(this.type){case"brightness":this._colorMatrix=whe(e,this.amount);break;case"contrast":this._colorMatrix=_he(e,this.amount);break;case"grayscale":this._colorMatrix=She(e,this.amount);break;case"invert":this._colorMatrix=$he(e,this.amount);break;case"saturate":this._colorMatrix=The(e,this.amount);break;case"sepia":this._colorMatrix=Ihe(e,this.amount)}}},aj=class lj{constructor(e,i,r,a){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=a,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=rs(e.offsetX,i.offsetX,r),this.offsetY=rs(e.offsetY,i.offsetY,r),this.blurRadius=rs(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(rs(e.color[0],i.color[0],r)),this.color[1]=Math.round(rs(e.color[1],i.color[1],r)),this.color[2]=Math.round(rs(e.color[2],i.color[2],r)),this.color[3]=rs(e.color[3],i.color[3],r)}clone(){return new lj(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:zf(this.offsetX),yoffset:zf(this.offsetY),blurRadius:zf(this.blurRadius),color:e}}},uj=class hj{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=rs(e.angle,i.angle,r),this._updateMatrix()}clone(){return new hj(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||ib();this._colorMatrix=xhe(e,this.angle)}},cj=class pj{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=rs(e.amount,i.amount,r)}clone(){return new pj(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function rs(t,e,i){return t+(e-t)*i}function zf(t){return Math.round(1e3*Wa(t))/1e3}function Mhe(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new _5(t.type,0);case"saturate":case"brightness":case"contrast":return new _5(t.type,1);case"opacity":return new cj(1);case"hue-rotate":return new uj(0);case"blur":return new sj(0);case"drop-shadow":return new aj(0,0,0,[...NS("transparent")]);case"bloom":return new ij(0,0,1)}}function Ehe(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,a)=>r.type===i[a].type)}function Ahe(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let a=r.length;a<i.length;a++)r.push(Mhe(i[a]))}function khe(t){const e=t[0];return!!e&&"type"in e}var XT,QT,S5={exports:{}};S5.exports,QT=function(){function t(a,p){function y(){this.constructor=a}y.prototype=p.prototype,a.prototype=new y}function e(a,p,y,m){var _=Error.call(this,a);return Object.setPrototypeOf&&Object.setPrototypeOf(_,e.prototype),_.expected=p,_.found=y,_.location=m,_.name="SyntaxError",_}function i(a,p,y){return y=y||" ",a.length>p?a:(p-=a.length,a+(y+=y.repeat(p)).slice(0,p))}function r(a,p){var y,m={},_=(p=p!==void 0?p:{}).grammarSource,x={start:xi},M=xi,A="none",C=")",N=",",j="(",D="%",z="px",W="cm",Y="mm",K="in",ee="pt",ne="pc",oe="deg",ue="rad",ye="grad",Se="turn",Ce="#",Ne=".",Le="e",He=/^[ \t\n\r]/,Pe=/^[a-z\-]/,yt=/^[0-9a-fA-F]/,yi=/^[+\-]/,Nt=/^[0-9]/,ut=ve("none"),ar=pe("none",!1),Nc=pe(")",!1),Zo=pe(",",!1),Vd=ve("whitespace"),ry=he([" ","	",`
`,"\r"],!1,!1),gb=ve("function"),vb=pe("(",!1),bb=ve("identifier"),sy=he([["a","z"],"-"],!1,!1),wb=ve("percentage"),_b=pe("%",!1),Sb=ve("length"),xb=pe("px",!1),$b=pe("cm",!1),ny=pe("mm",!1),Tb=pe("in",!1),Ib=pe("pt",!1),Mb=pe("pc",!1),Pi=ve("angle"),U=pe("deg",!1),mr=pe("rad",!1),oy=pe("grad",!1),xt=pe("turn",!1),mi=ve("number"),hn=ve("color"),no=pe("#",!1),cn=he([["0","9"],["a","f"],["A","F"]],!1,!1),oo=he(["+","-"],!1,!1),pn=he([["0","9"]],!1,!1),ay=pe(".",!1),Xo=pe("e",!1),_e=function(){return[]},tl=function(Z,ce){return{type:"function",name:Z,parameters:ce||[]}},h=function(Z,ce){return ce.length>0?cF(Z,ce,3):[Z]},k=function(Z){return{type:"quantity",value:Z.value,unit:Z.unit}},b=function(Z){return{type:"color",colorType:Z.type,value:Z.value}},u=function(Z){return Z},o=function(){return ae()},s=function(Z){return{value:Z,unit:"%"}},n=function(Z){return{value:Z,unit:"px"}},l=function(Z){return{value:Z,unit:"cm"}},c=function(Z){return{value:Z,unit:"mm"}},d=function(Z){return{value:Z,unit:"in"}},f=function(Z){return{value:Z,unit:"pt"}},g=function(Z){return{value:Z,unit:"pc"}},w=function(Z){return{value:Z,unit:"deg"}},$=function(Z){return{value:Z,unit:"rad"}},T=function(Z){return{value:Z,unit:"grad"}},E=function(Z){return{value:Z,unit:"turn"}},O=function(Z){return{value:Z,unit:null}},P=function(){return{type:"hex",value:ae()}},R=function(Z){return{type:"function",value:Z}},F=function(){return{type:"named",value:ae()}},V=function(){return parseFloat(ae())},L=0,G=0,J=[{line:1,column:1}],H=0,te=[],Q=0;if("startRule"in p){if(!(p.startRule in x))throw new Error(`Can't start parsing from rule "`+p.startRule+'".');M=x[p.startRule]}function ae(){return a.substring(G,L)}function pe(Z,ce){return{type:"literal",text:Z,ignoreCase:ce}}function he(Z,ce,be){return{type:"class",parts:Z,inverted:ce,ignoreCase:be}}function Ae(){return{type:"end"}}function ve(Z){return{type:"other",description:Z}}function We(Z){var ce,be=J[Z];if(be)return be;for(ce=Z-1;!J[ce];)ce--;for(be={line:(be=J[ce]).line,column:be.column};ce<Z;)a.charCodeAt(ce)===10?(be.line++,be.column=1):be.column++,ce++;return J[Z]=be,be}function Ve(Z,ce,be){var ht=We(Z),Ni=We(ce),Bt={source:_,start:{offset:Z,line:ht.line,column:ht.column},end:{offset:ce,line:Ni.line,column:Ni.column}};return be&&_&&typeof _.offset=="function"&&(Bt.start=_.offset(Bt.start),Bt.end=_.offset(Bt.end)),Bt}function Te(Z){L<H||(L>H&&(H=L,te=[]),te.push(Z))}function Gt(Z,ce,be){return new e(e.buildMessage(Z,ce),Z,ce,be)}function xi(){var Z;return(Z=Ut())===m&&(Z=bt()),Z}function Ut(){var Z,ce;return Q++,Z=L,it(),a.substr(L,4)===A?(ce=A,L+=4):(ce=m,Q===0&&Te(ar)),ce!==m?(it(),G=Z,Z=_e()):(L=Z,Z=m),Q--,Z===m&&Q===0&&Te(ut),Z}function bt(){var Z,ce;if(Z=[],(ce=wt())!==m)for(;ce!==m;)Z.push(ce),ce=wt();else Z=m;return Z}function wt(){var Z,ce,be,ht;return Z=L,it(),(ce=os())!==m?(it(),(be=rt())===m&&(be=null),it(),a.charCodeAt(L)===41?(ht=C,L++):(ht=m,Q===0&&Te(Nc)),ht!==m?(it(),G=Z,Z=tl(ce,be)):(L=Z,Z=m)):(L=Z,Z=m),Z}function rt(){var Z,ce,be,ht,Ni,Bt,Es,ly;if(Z=L,(ce=Jt())!==m){for(be=[],ht=L,Ni=it(),a.charCodeAt(L)===44?(Bt=N,L++):(Bt=m,Q===0&&Te(Zo)),Bt===m&&(Bt=null),Es=it(),(ly=Jt())!==m?ht=Ni=[Ni,Bt,Es,ly]:(L=ht,ht=m);ht!==m;)be.push(ht),ht=L,Ni=it(),a.charCodeAt(L)===44?(Bt=N,L++):(Bt=m,Q===0&&Te(Zo)),Bt===m&&(Bt=null),Es=it(),(ly=Jt())!==m?ht=Ni=[Ni,Bt,Es,ly]:(L=ht,ht=m);G=Z,Z=h(ce,be)}else L=Z,Z=m;return Z}function Jt(){var Z,ce;return Z=L,(ce=lr())===m&&(ce=Et())===m&&(ce=Rc())===m&&(ce=Lc()),ce!==m&&(G=Z,ce=k(ce)),(Z=ce)===m&&(Z=L,(ce=jc())!==m&&(G=Z,ce=b(ce)),Z=ce),Z}function it(){var Z,ce;for(Q++,Z=[],He.test(a.charAt(L))?(ce=a.charAt(L),L++):(ce=m,Q===0&&Te(ry));ce!==m;)Z.push(ce),He.test(a.charAt(L))?(ce=a.charAt(L),L++):(ce=m,Q===0&&Te(ry));return Q--,ce=m,Q===0&&Te(Vd),Z}function os(){var Z,ce,be;return Q++,Z=L,(ce=dt())!==m?(a.charCodeAt(L)===40?(be=j,L++):(be=m,Q===0&&Te(vb)),be!==m?(G=Z,Z=u(ce)):(L=Z,Z=m)):(L=Z,Z=m),Q--,Z===m&&(ce=m,Q===0&&Te(gb)),Z}function dt(){var Z,ce,be;if(Q++,Z=L,ce=[],Pe.test(a.charAt(L))?(be=a.charAt(L),L++):(be=m,Q===0&&Te(sy)),be!==m)for(;be!==m;)ce.push(be),Pe.test(a.charAt(L))?(be=a.charAt(L),L++):(be=m,Q===0&&Te(sy));else ce=m;return ce!==m&&(G=Z,ce=o()),Q--,(Z=ce)===m&&(ce=m,Q===0&&Te(bb)),Z}function lr(){var Z,ce,be;return Q++,Z=L,it(),(ce=gr())!==m?(a.charCodeAt(L)===37?(be=D,L++):(be=m,Q===0&&Te(_b)),be!==m?(G=Z,Z=s(ce)):(L=Z,Z=m)):(L=Z,Z=m),Q--,Z===m&&Q===0&&Te(wb),Z}function Et(){var Z,ce,be;return Q++,Z=L,it(),(ce=gr())!==m?(a.substr(L,2)===z?(be=z,L+=2):(be=m,Q===0&&Te(xb)),be!==m?(G=Z,Z=n(ce)):(L=Z,Z=m)):(L=Z,Z=m),Z===m&&(Z=L,it(),(ce=gr())!==m?(a.substr(L,2)===W?(be=W,L+=2):(be=m,Q===0&&Te($b)),be!==m?(G=Z,Z=l(ce)):(L=Z,Z=m)):(L=Z,Z=m),Z===m&&(Z=L,it(),(ce=gr())!==m?(a.substr(L,2)===Y?(be=Y,L+=2):(be=m,Q===0&&Te(ny)),be!==m?(G=Z,Z=c(ce)):(L=Z,Z=m)):(L=Z,Z=m),Z===m&&(Z=L,it(),(ce=gr())!==m?(a.substr(L,2)===K?(be=K,L+=2):(be=m,Q===0&&Te(Tb)),be!==m?(G=Z,Z=d(ce)):(L=Z,Z=m)):(L=Z,Z=m),Z===m&&(Z=L,it(),(ce=gr())!==m?(a.substr(L,2)===ee?(be=ee,L+=2):(be=m,Q===0&&Te(Ib)),be!==m?(G=Z,Z=f(ce)):(L=Z,Z=m)):(L=Z,Z=m),Z===m&&(Z=L,it(),(ce=gr())!==m?(a.substr(L,2)===ne?(be=ne,L+=2):(be=m,Q===0&&Te(Mb)),be!==m?(G=Z,Z=g(ce)):(L=Z,Z=m)):(L=Z,Z=m)))))),Q--,Z===m&&Q===0&&Te(Sb),Z}function Rc(){var Z,ce,be;return Q++,Z=L,(ce=gr())!==m?(a.substr(L,3)===oe?(be=oe,L+=3):(be=m,Q===0&&Te(U)),be!==m?(G=Z,Z=w(ce)):(L=Z,Z=m)):(L=Z,Z=m),Z===m&&(Z=L,(ce=gr())!==m?(a.substr(L,3)===ue?(be=ue,L+=3):(be=m,Q===0&&Te(mr)),be!==m?(G=Z,Z=$(ce)):(L=Z,Z=m)):(L=Z,Z=m),Z===m&&(Z=L,(ce=gr())!==m?(a.substr(L,4)===ye?(be=ye,L+=4):(be=m,Q===0&&Te(oy)),be!==m?(G=Z,Z=T(ce)):(L=Z,Z=m)):(L=Z,Z=m),Z===m&&(Z=L,(ce=gr())!==m?(a.substr(L,4)===Se?(be=Se,L+=4):(be=m,Q===0&&Te(xt)),be!==m?(G=Z,Z=E(ce)):(L=Z,Z=m)):(L=Z,Z=m)))),Q--,Z===m&&(ce=m,Q===0&&Te(Pi)),Z}function Lc(){var Z,ce;return Q++,Z=L,it(),(ce=gr())!==m?(G=Z,Z=O(ce)):(L=Z,Z=m),Q--,Z===m&&Q===0&&Te(mi),Z}function jc(){var Z,ce,be,ht;if(Q++,Z=L,a.charCodeAt(L)===35?(ce=Ce,L++):(ce=m,Q===0&&Te(no)),ce!==m){if(be=[],yt.test(a.charAt(L))?(ht=a.charAt(L),L++):(ht=m,Q===0&&Te(cn)),ht!==m)for(;ht!==m;)be.push(ht),yt.test(a.charAt(L))?(ht=a.charAt(L),L++):(ht=m,Q===0&&Te(cn));else be=m;be!==m?(G=Z,Z=P()):(L=Z,Z=m)}else L=Z,Z=m;return Z===m&&(Z=L,(ce=wt())!==m&&(G=Z,ce=R(ce)),(Z=ce)===m&&(Z=L,(ce=dt())!==m&&(G=Z,ce=F()),Z=ce)),Q--,Z===m&&(ce=m,Q===0&&Te(hn)),Z}function gr(){var Z,ce,be,ht,Ni,Bt,Es;for(Z=L,yi.test(a.charAt(L))?(a.charAt(L),L++):Q===0&&Te(oo),ce=L,be=[],Nt.test(a.charAt(L))?(ht=a.charAt(L),L++):(ht=m,Q===0&&Te(pn));ht!==m;)be.push(ht),Nt.test(a.charAt(L))?(ht=a.charAt(L),L++):(ht=m,Q===0&&Te(pn));if(a.charCodeAt(L)===46?(ht=Ne,L++):(ht=m,Q===0&&Te(ay)),ht!==m){if(Ni=[],Nt.test(a.charAt(L))?(Bt=a.charAt(L),L++):(Bt=m,Q===0&&Te(pn)),Bt!==m)for(;Bt!==m;)Ni.push(Bt),Nt.test(a.charAt(L))?(Bt=a.charAt(L),L++):(Bt=m,Q===0&&Te(pn));else Ni=m;Ni!==m?ce=be=[be,ht,Ni]:(L=ce,ce=m)}else L=ce,ce=m;if(ce===m)if(ce=[],Nt.test(a.charAt(L))?(be=a.charAt(L),L++):(be=m,Q===0&&Te(pn)),be!==m)for(;be!==m;)ce.push(be),Nt.test(a.charAt(L))?(be=a.charAt(L),L++):(be=m,Q===0&&Te(pn));else ce=m;if(ce!==m){if(be=L,a.charCodeAt(L)===101?(ht=Le,L++):(ht=m,Q===0&&Te(Xo)),ht!==m){if(yi.test(a.charAt(L))?(Ni=a.charAt(L),L++):(Ni=m,Q===0&&Te(oo)),Ni===m&&(Ni=null),Bt=[],Nt.test(a.charAt(L))?(Es=a.charAt(L),L++):(Es=m,Q===0&&Te(pn)),Es!==m)for(;Es!==m;)Bt.push(Es),Nt.test(a.charAt(L))?(Es=a.charAt(L),L++):(Es=m,Q===0&&Te(pn));else Bt=m;Bt!==m?be=ht=[ht,Ni,Bt]:(L=be,be=m)}else L=be,be=m;be===m&&(be=null),G=Z,Z=V()}else L=Z,Z=m;return Z}function hF(Z,ce){return Z.map(function(be){return be[ce]})}function cF(Z,ce,be){return[Z].concat(hF(ce,be))}if((y=M())!==m&&L===a.length)return y;throw y!==m&&L<a.length&&Te(Ae()),Gt(te,H<a.length?a.charAt(H):null,H<a.length?Ve(H,H+1):Ve(H,H))}return t(e,Error),e.prototype.format=function(a){var p="Error: "+this.message;if(this.location){var y,m=null;for(y=0;y<a.length;y++)if(a[y].source===this.location.source){m=a[y].text.split(/\r\n|\n|\r/g);break}var _=this.location.start,x=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(_):_,M=this.location.source+":"+x.line+":"+x.column;if(m){var A=this.location.end,C=i("",x.line.toString().length," "),N=m[_.line-1],j=(_.line===A.line?A.column:N.length+1)-_.column||1;p+=`
 --> `+M+`
`+C+` |
`+x.line+" | "+N+`
`+C+" | "+i("",_.column-1," ")+i("",j,"^")}else p+=`
 at `+M}return p},e.buildMessage=function(a,p){var y={literal:function(N){return'"'+_(N.text)+'"'},class:function(N){var j=N.parts.map(function(D){return Array.isArray(D)?x(D[0])+"-"+x(D[1]):x(D)});return"["+(N.inverted?"^":"")+j.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function m(N){return N.charCodeAt(0).toString(16).toUpperCase()}function _(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(j){return"\\x0"+m(j)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(j){return"\\x"+m(j)})}function x(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(j){return"\\x0"+m(j)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(j){return"\\x"+m(j)})}function M(N){return y[N.type](N)}function A(N){var j,D,z=N.map(M);if(z.sort(),z.length>0){for(j=1,D=1;j<z.length;j++)z[j-1]!==z[j]&&(z[D]=z[j],D++);z.length=D}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}function C(N){return N?'"'+_(N)+'"':"end of input"}return"Expected "+A(a)+" but "+C(p)+" found."},{SyntaxError:e,parse:r}},(XT=S5).exports&&(XT.exports=QT());var Ohe=S5.exports;function dj(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=eI(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new ie("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:eI(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!Ehe(e[i].effects,e[i+1].effects))throw new ie("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});Ahe(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function eI(t){let e;if(!t)return[];try{e=Ohe.parse(t)}catch(i){throw new ie("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>Che(i))}function Che(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Phe(t);case"opacity":return Nhe(t);case"hue-rotate":return Rhe(t);case"blur":return Lhe(t);case"drop-shadow":return jhe(t);case"bloom":return Dhe(t)}}catch(e){throw e.details.filter=t,e}throw new ie("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function Phe(t){let e=1;return Rd(t.parameters,1),t.parameters.length===1&&(e=Vn(t.parameters[0])),new _5(t.name,e)}function Nhe(t){let e=1;return Rd(t.parameters,1),t.parameters.length===1&&(e=Vn(t.parameters[0])),new cj(e)}function Rhe(t){let e=0;return Rd(t.parameters,1),t.parameters.length===1&&(e=Uhe(t.parameters[0])),new uj(e)}function Lhe(t){let e=0;return Rd(t.parameters,1),t.parameters.length===1&&(e=mx(t.parameters[0]),Y1(e,t.parameters[0])),new sj(e)}function jhe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new ie("effect:type-error","Accepts only one color",{});i=Bhe(r)}else{const a=mx(r);if(Object.isFrozen(e))throw new ie("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(a),e.length===3&&Y1(a,r)}if(e.length<2||e.length>3)throw new ie("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new aj(e[0],e[1],e[2]||0,i||fj("black"))}function Dhe(t){let e=1,i=0,r=0;return Rd(t.parameters,3),t.parameters[0]&&(e=Vn(t.parameters[0])),t.parameters[1]&&(i=mx(t.parameters[1]),Y1(i,t.parameters[1])),t.parameters[2]&&(r=Vn(t.parameters[2])),new ij(e,i,r)}function Rd(t,e){if(t.length>e)throw new ie("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function rb(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in yx)return"<length>";if(t.unit in fx)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Y1(t,e){if(t<0)throw new ie("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function Fhe(t){if(t.type!=="quantity"||t.unit!==null)throw new ie("effect:type-error",`Expected <double>, Actual: ${rb(t)}`,{term:t})}function zhe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new ie("effect:type-error",`Expected <double> or <percentage>, Actual: ${rb(t)}`,{term:t})}const fx={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Vhe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&fx[t.unit]!=null))throw new ie("effect:type-error",`Expected <angle>, Actual: ${rb(t)}`,{term:t})}const yx={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Ghe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&yx[t.unit]!=null))throw new ie("effect:type-error",`Expected <length>, Actual: ${rb(t)}`,{term:t})}function Vn(t){zhe(t);const e=t.value;return Y1(e,t),t.unit==="%"?.01*e:e}function qhe(t){return Fhe(t),Y1(t.value,t),t.value}function Uhe(t){return Vhe(t),t.value*fx[t.unit]||0}function mx(t){return Ghe(t),t.value*yx[t.unit]||0}function Bhe(t){switch(t.colorType){case"hex":return sU(t.value);case"named":return fj(t.value);case"function":return Jhe(t.value)}}function fj(t){if(!xA(t))throw new ie("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return rU(t)}const Hhe=/^rgba?/i,Whe=/^hsla?/i;function Jhe(t){if(Rd(t.parameters,4),Hhe.test(t.name))return[Vn(t.parameters[0]),Vn(t.parameters[1]),Vn(t.parameters[2]),t.parameters[3]?Vn(t.parameters[3]):1];if(Whe.test(t.name))return $A(qhe(t.parameters[0]),Vn(t.parameters[1]),Vn(t.parameters[2]),t.parameters[3]?Vn(t.parameters[3]):1);throw new ie("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function gx(t,e,i){var r;try{return Yhe(t)}catch(a){(r=i==null?void 0:i.messages)==null||r.push(a)}return null}function vx(t,e,i,r){try{const a=Khe(t);Pr(i,a,e)}catch(a){r.messages&&r.messages.push(a)}}function Khe(t){const e=dj(t);return e?khe(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(a=>a.toJSON())})):null}function Yhe(t){if(!t||t.length===0)return null;if(Zhe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:tI(i.value)});return e}return tI(t)}function Zhe(t){const e=t[0];return!!e&&"scale"in e}function tI(t){if(!t||!t.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[oa(i,"amount")];break;case"blur":r=[oa(i,"radius","pt")];break;case"hue-rotate":r=[oa(i,"angle","deg")];break;case"drop-shadow":r=[oa(i,"xoffset","pt"),oa(i,"yoffset","pt"),oa(i,"blurRadius","pt"),Xhe(i,"color")];break;case"bloom":r=[oa(i,"strength"),oa(i,"radius","pt"),oa(i,"threshold")]}const a=`${i.type}(${r.filter(Boolean).join(" ")})`;dj(a),e.push(a)}return e.join(" ")}function oa(t,e,i){if(t[e]==null)throw new ie("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function Xhe(t,e){if(t[e]==null)throw new ie("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const iI={read:{reader:gx},write:{allowNull:!0,writer:vx}},sb=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return v([S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),v([S({json:{read:!1,write:!1,origins:{"web-map":iI,"portal-item":iI}}})],e.prototype,"effect",void 0),e=v([B("esri.layers.mixins.BlendLayer")],e),e},bx=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return v([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=v([B("esri.layers.mixins.CustomParametersMixin")],e),e},rI={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},sI={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},nI={ArcGISFeatureLayer:!0},Qhe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":rI,"web-map/basemap":sI,"web-map/tables":nI,"link-chart/operational-layers":{...rI,LinkChartLayer:!0},"link-chart/basemap":sI,"link-chart/tables":nI,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},wx=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,r,a,p){(p&&p.layerContainerType==="ground"||i&&wV(this,a,{},p))&&(r[a]=i)}writeOperationalLayerType(i,r,a,p){!i||p&&p.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}read(i,r){r&&(r.layer=this),gV(this,i,a=>super.read(i,a),r)}write(i,r){var y,m;if(r!=null&&r.origin){const _=`${r.origin}/${r.layerContainerType||"operational-layers"}`,x=Qhe[_];let M=!!(x!=null&&x[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&_==="web-scene/operational-layers"&&(M=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&_==="web-map/operational-layers"&&(M=!1),!M)return(y=r.messages)==null||y.push(new ie("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${_}'`,{layer:this})),null}const a=super.write(i,{...r,layer:this}),p=!!r&&!!r.messages&&!!r.messages.filter(_=>_ instanceof ie&&_.name==="web-document-write:property-required").length;return $2(a==null?void 0:a.url)?((m=r==null?void 0:r.messages)==null||m.push(new ie("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&p?null:a}beforeSave(){}};return v([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),v([S(QL)],e.prototype,"listMode",void 0),v([$e("listMode")],e.prototype,"writeListMode",null),v([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),v([$e("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),v([S(w5)],e.prototype,"opacity",void 0),v([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),v([$e("title"),$e(["web-scene"],"title")],e.prototype,"writeTitle",null),v([S({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=v([B("esri.layers.mixins.OperationalLayer")],e),e},_x=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Wt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,a){if(r.itemId)return new _f({id:r.itemId,portal:a&&a.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const{load:a}=await we(()=>import("./layersLoader-2071c3dd.js"),["assets/layersLoader-2071c3dd.js","assets/fetchService-6f594e16.js","assets/jsonContext-0a1eba8c.js"]);return Zt(r),await a({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(a){throw dr(a)||me.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${a}`),a}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Js(r),!0)))}async _setUserPrivileges(i,r){if(!_t.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:a,fullEdit:p},content:{updateItem:y}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",a),this._set("userHasFullEditingPrivileges",p),this._set("userHasUpdateItemPrivileges",y)}catch(a){Js(a)}}async _fetchUserPrivileges(i,r){let a=this.portalItem;if(!i||!a||!a.loaded||a.sourceUrl)return this._fetchFallbackUserPrivileges(r);const p=i===a.id;if(p&&a.portal.user)return ZT(a);let y,m;if(p)y=a.portal.url;else try{y=await _A(this.url,r)}catch(A){Js(A)}if(!y||!WV(y,a.portal.url))return this._fetchFallbackUserPrivileges(r);try{const A=r!=null?r.signal:null;m=await(gt==null?void 0:gt.getCredential(`${y}/sharing`,{prompt:!1,signal:A}))}catch(A){Js(A)}const _=!0,x=!1,M=!1;if(!m)return{features:{edit:_,fullEdit:x},content:{updateItem:M}};try{if(p?await a.reload():(a=new _f({id:i,portal:{url:y}}),await a.load(r)),a.portal.user)return ZT(a)}catch(A){Js(A)}return{features:{edit:_,fullEdit:x},content:{updateItem:M}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(a){Js(a)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?gt==null?void 0:gt.findCredential(this.url):null;if(!r)return!0;const a=rm.credential===r?rm.user:await this._fetchEditingUser(i);return rm.credential=r,rm.user=a,a==null||a.privileges==null||a.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var M,A;const r=(A=(M=this.portalItem)==null?void 0:M.portal)==null?void 0:A.user;if(r)return r;const a=gt.findServerInfo(this.url??"");if(!(a!=null&&a.owningSystemUrl))return null;const p=`${a.owningSystemUrl}/sharing/rest`,y=fr.getDefault();if(y&&y.loaded&&Hn(y.restUrl)===Hn(p))return y.user;const m=`${p}/community/self`,_=i!=null?i.signal:null,x=await _2(ot(m,{authMode:"no-prompt",query:{f:"json"},signal:_}));return x.ok?OS.fromJSON(x.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const a=r&&r.portal,p=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||fr.getDefault());return a&&p&&!qE(p.restUrl,a.restUrl)?(r.messages&&r.messages.push(new ie("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return v([S({type:_f})],e.prototype,"portalItem",null),v([ge("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),v([$e("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),v([S({clonable:!1})],e.prototype,"resourceReferences",void 0),v([S({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),v([S({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),v([S({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=v([B("esri.layers.mixins.PortalLayer")],e),e},rm={credential:null,user:null},y1=new De,Vf=new WeakMap;function ece(t){yj(t)&&y1.push(t)}function tce(t){yj(t)&&y1.includes(t)&&y1.remove(t)}function yj(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function mj(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:mj(e,t%e):0}let qw=0,sm=0;function ice(){const t=Date.now();for(const e of y1)e.refreshInterval&&t-(Vf.get(e)??0)+5>=6e4*e.refreshInterval&&(Vf.set(e,t),e.refresh(t))}uE(()=>{const t=Date.now();let e=0;for(const i of y1)e=mj(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?Vf.get(i)||Vf.set(i,t):Vf.delete(i);if(e!==sm){if(sm=e,clearInterval(qw),sm===0)return void(qw=0);qw=setInterval(ice,sm)}});const nb=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=rE(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||ece(this)},()=>{})}destroy(){tce(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){b3(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{me.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return v([S({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),v([S({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),v([S()],e.prototype,"refreshParameters",null),e=v([B("esri.layers.mixins.RefreshableLayer")],e),e},ob=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&rce(i,r.effectiveScaleRange);const a=this._get("effectiveScaleRange");return a&&a.minScale===i.minScale&&a.maxScale===i.maxScale?a:i}};return v([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),v([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),v([S({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=v([B("esri.layers.mixins.ScaleRangeLayer")],e),e};function rce(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}var x5;let Q0=x5=class extends de{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new x5({minValue:this.minValue,maxValue:this.maxValue})}};v([S({type:Number,json:{write:!0}})],Q0.prototype,"minValue",void 0),v([S({type:Number,json:{write:!0}})],Q0.prototype,"maxValue",void 0),Q0=x5=v([B("esri.renderer.support.AuthoringInfoClassBreakInfo")],Q0);var $5;let Ql=$5=class extends de{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new $5({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:se(this.classBreakInfos)})}};v([S({type:String,json:{write:!0}})],Ql.prototype,"field",void 0),v([S({type:String,json:{write:!0}})],Ql.prototype,"normalizationField",void 0),v([S({type:String,json:{write:!0}})],Ql.prototype,"label",void 0),v([S({type:[Q0],json:{write:!0}})],Ql.prototype,"classBreakInfos",void 0),Ql=$5=v([B("esri.renderers.support.AuthoringInfoFieldInfo")],Ql);var T5;const nm=new ft({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),om=new ft({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),oI={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},aI=["high-to-low","above-and-below","centered-on","extremes"],lI=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],uI=["seconds","minutes","hours","days","months","years"];let es=T5=class extends de{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new T5({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};v([S({types:oI,json:{write:!0}})],es.prototype,"endTime",void 0),v([It("endTime")],es.prototype,"castEndTime",null),v([S({type:String,json:{write:!0}})],es.prototype,"field",void 0),v([S({type:Number,json:{write:!0}})],es.prototype,"maxSliderValue",void 0),v([S({type:Number,json:{write:!0}})],es.prototype,"minSliderValue",void 0),v([S({types:oI,json:{write:!0}})],es.prototype,"startTime",void 0),v([It("startTime")],es.prototype,"castStartTime",null),v([S({type:nm.apiValues,value:null,json:{type:nm.jsonValues,read:nm.read,write:nm.write}})],es.prototype,"style",null),v([S({type:lI,value:null,json:{type:lI,origins:{"web-scene":{type:aI,write:{writer:(t,e)=>{aI.includes(t)&&(e.theme=t)}}}},write:!0}})],es.prototype,"theme",null),v([S({type:om.apiValues,json:{type:om.jsonValues,read:om.read,write:om.write}})],es.prototype,"type",void 0),v([S({type:uI,json:{type:uI,write:!0}})],es.prototype,"units",void 0),es=T5=v([B("esri.renderers.support.AuthoringInfoVisualVariable")],es);const sce=es;let fg=class extends de{constructor(e){super(e),this.type=null}};v([S({readOnly:!0,json:{read:!1,write:!0}})],fg.prototype,"type",void 0),fg=v([B("esri.rest.support.ColorRamp")],fg);const Sx=fg;var I5;let Eh=I5=class extends Sx{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new I5({fromColor:se(this.fromColor),toColor:se(this.toColor),algorithm:this.algorithm})}};v([Fe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Eh.prototype,"algorithm",void 0),v([S({type:tt,json:{type:[jt],write:!0}})],Eh.prototype,"fromColor",void 0),v([S({type:tt,json:{type:[jt],write:!0}})],Eh.prototype,"toColor",void 0),v([S({type:["algorithmic"]})],Eh.prototype,"type",void 0),Eh=I5=v([B("esri.rest.support.AlgorithmicColorRamp")],Eh);const xx=Eh;var M5;let ef=M5=class extends Sx{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new M5({colorRamps:se(this.colorRamps)})}};v([S({type:[xx],json:{write:!0}})],ef.prototype,"colorRamps",void 0),v([S({type:["multipart"]})],ef.prototype,"type",void 0),ef=M5=v([B("esri.rest.support.MultipartColorRamp")],ef);const gj=ef,nce={key:"type",base:Sx,typeMap:{algorithmic:xx,multipart:gj}};function oce(t){return t&&t.type?t.type==="algorithmic"?xx.fromJSON(t):t.type==="multipart"?gj.fromJSON(t):null:null}var E5;const Qu=new ft({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),am=new ft({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),hI=new ft({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),cI=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],ace=["high-to-low","above-and-below","above","below","90-10"],lce=["flow-line","wave-front"],uce=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let vi=E5=class extends de{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?oce(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new E5({classificationMethod:this.classificationMethod,colorRamp:se(this.colorRamp),fadeRatio:se(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:se(this.field1),field2:se(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};v([S({type:Qu.apiValues,value:null,json:{type:Qu.jsonValues,read:Qu.read,write:Qu.write,origins:{"web-document":{default:"manual",type:Qu.jsonValues,read:Qu.read,write:Qu.write}}}})],vi.prototype,"classificationMethod",null),v([S({types:nce,json:{write:!0}})],vi.prototype,"colorRamp",void 0),v([ge("colorRamp")],vi.prototype,"readColorRamp",null),v([S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],vi.prototype,"fadeRatio",void 0),v([S({type:[String],value:null,json:{write:!0}})],vi.prototype,"fields",null),v([S({type:Ql,value:null,json:{write:!0}})],vi.prototype,"field1",null),v([S({type:Ql,value:null,json:{write:!0}})],vi.prototype,"field2",null),v([S({type:lce,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],vi.prototype,"flowTheme",null),v([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],vi.prototype,"focus",null),v([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],vi.prototype,"isAutoGenerated",void 0),v([S({type:Number,value:null,json:{type:jt,write:!0}})],vi.prototype,"numClasses",null),v([S({type:cI,json:{type:cI,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],vi.prototype,"lengthUnit",void 0),v([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],vi.prototype,"maxSliderValue",void 0),v([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],vi.prototype,"minSliderValue",void 0),v([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],vi.prototype,"statistics",null),v([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],vi.prototype,"standardDeviationInterval",null),v([S({type:am.apiValues,value:null,json:{type:am.jsonValues,read:am.read,write:am.write,origins:{"web-scene":{type:hI.jsonValues,write:{writer:hI.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],vi.prototype,"type",null),v([S({type:[sce],json:{write:!0}})],vi.prototype,"visualVariables",void 0),v([S({type:uce,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],vi.prototype,"univariateSymbolStyle",null),v([S({type:ace,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],vi.prototype,"univariateTheme",null),vi=E5=v([B("esri.renderers.support.AuthoringInfo")],vi);const $x=vi,Uw=new ft({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let tf=class extends de{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};v([S({type:$x,json:{write:!0}})],tf.prototype,"authoringInfo",void 0),v([S({type:Uw.apiValues,readOnly:!0,json:{type:Uw.jsonValues,read:!1,write:{writer:Uw.write,ignoreOrigin:!0}}})],tf.prototype,"type",void 0),tf=v([B("esri.renderers.Renderer")],tf);const el=tf;function hce(t){var e,i;return((i=(e=t.match(cce))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const cce=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var A5;let Qp=A5=class extends de{constructor(){super(...arguments),this.title=null}clone(){return new A5({title:this.title})}};v([S({type:String,json:{write:!0}})],Qp.prototype,"title",void 0),Qp=A5=v([B("esri.renderers.support.LegendOptions")],Qp);var k5;let yg=k5=class extends Qp{constructor(){super(...arguments),this.showLegend=null}clone(){return new k5({title:this.title,showLegend:this.showLegend})}};v([S({type:Boolean,json:{write:!0}})],yg.prototype,"showLegend",void 0),yg=k5=v([B("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],yg);const vj=yg,Bw=new ft({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Cn=class extends de{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(me.getLogger(this).error(".field: field must be a string value"),null):x1(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};v([S()],Cn.prototype,"index",void 0),v([S({type:Bw.apiValues,readOnly:!0,json:{read:Bw.read,write:Bw.write}})],Cn.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Cn.prototype,"field",void 0),v([It("field")],Cn.prototype,"castField",null),v([S({type:String,json:{write:!0}})],Cn.prototype,"valueExpression",void 0),v([S({type:String,json:{write:!0}})],Cn.prototype,"valueExpressionTitle",void 0),v([S({readOnly:!0})],Cn.prototype,"arcadeRequired",null),v([S({type:vj,json:{write:!0}})],Cn.prototype,"legendOptions",void 0),Cn=v([B("esri.renderers.visualVariables.VisualVariable")],Cn);const Z1=Cn;var O5;let Ah=O5=class extends de{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new O5({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};v([S({type:tt,json:{type:[jt],write:!0}})],Ah.prototype,"color",void 0),v([S({type:String,json:{write:!0}})],Ah.prototype,"label",void 0),v([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Ah.prototype,"value",void 0),v([$e("value")],Ah.prototype,"writeValue",null),Ah=O5=v([B("esri.renderers.visualVariables.support.ColorStop")],Ah);const pce=Ah;var C5;let kh=C5=class extends Z1{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new C5({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};v([S({readOnly:!0})],kh.prototype,"cache",null),v([S({type:["color"],json:{type:["colorInfo"]}})],kh.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],kh.prototype,"normalizationField",void 0),v([S({type:[pce],json:{write:!0}})],kh.prototype,"stops",null),kh=C5=v([B("esri.renderers.visualVariables.ColorVariable")],kh);const bj=kh;var P5;let Gl=P5=class extends de{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return Xf(e.transparency)}writeOpacity(t,e,i){e[i]=k2(t)}clone(){return new P5({label:this.label,opacity:this.opacity,value:this.value})}};v([S({type:String,json:{write:!0}})],Gl.prototype,"label",void 0),v([S({type:Number,json:{type:jt,write:{target:"transparency"}}})],Gl.prototype,"opacity",void 0),v([ge("opacity",["transparency"])],Gl.prototype,"readOpacity",null),v([$e("opacity")],Gl.prototype,"writeOpacity",null),v([S({type:Number,json:{write:!0}})],Gl.prototype,"value",void 0),Gl=P5=v([B("esri.renderers.visualVariables.support.OpacityStop")],Gl);const dce=Gl;var N5;let Oh=N5=class extends Z1{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new N5({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};v([S({readOnly:!0})],Oh.prototype,"cache",null),v([S({type:["opacity"],json:{type:["transparencyInfo"]}})],Oh.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Oh.prototype,"normalizationField",void 0),v([S({type:[dce],json:{write:!0}})],Oh.prototype,"stops",null),Oh=N5=v([B("esri.renderers.visualVariables.OpacityVariable")],Oh);const wj=Oh;var R5;let xa=R5=class extends Z1{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,r){if(r&&r.messages){const a=`visualVariables[${this.index}]`;r.messages.push(new ie("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:a+".valueExpressionTitle",context:r}))}}clone(){return new R5({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};v([S({readOnly:!0})],xa.prototype,"cache",null),v([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],xa.prototype,"axis",void 0),v([S({type:["rotation"],json:{type:["rotationInfo"]}})],xa.prototype,"type",void 0),v([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],xa.prototype,"rotationType",void 0),v([S({type:String,json:{write:!0}})],xa.prototype,"valueExpressionTitle",void 0),v([$e("web-scene","valueExpressionTitle")],xa.prototype,"writeValueExpressionTitleWebScene",null),xa=R5=v([B("esri.renderers.visualVariables.RotationVariable")],xa);const _j=xa;var L5;let _p=L5=class extends de{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new L5({label:this.label,size:this.size,value:this.value})}};v([S({type:String,json:{write:!0}})],_p.prototype,"label",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],_p.prototype,"size",void 0),v([S({type:Number,json:{write:!0}})],_p.prototype,"value",void 0),_p=L5=v([B("esri.renderers.visualVariables.support.SizeStop")],_p);const Sp=_p;var j5;let mg=j5=class extends vj{constructor(){super(...arguments),this.customValues=null}clone(){return new j5({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};v([S({type:[Number],json:{write:!0}})],mg.prototype,"customValues",void 0),mg=j5=v([B("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],mg);const fce=mg;var Va,Ki;function yu(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function m1(t){return t!=null&&!isNaN(t)&&isFinite(t)}function Sj(t){return t.valueExpression?Va.Expression:t.field&&typeof t.field=="string"?Va.Field:Va.Unknown}function yce(t,e){const i=e||Sj(t),r=t.valueUnit||"unknown";return i===Va.Unknown?Ki.Constant:t.stops?Ki.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?Ki.ClampedLinear:r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?Ki.Proportional:Ki.Additive:Ki.Identity:Ki.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(Va||(Va={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(Ki||(Ki={}));const ku=me.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),pI=new Nr,gg=Math.PI,xj=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function $j(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(j=>j.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void ku.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const a=typeof e=="number",p=a?null:e,y=p&&p.attributes;let m=a?e:null;const _=r.field,{ipData:x,hasExpression:M}=r.cache;let A=r.cache.compiledFunc;if(!_&&!M){const j=r.stops;return j&&j[0]&&j[0].color}if(typeof m!="number")if(M){if(i==null||i.arcade==null)return void ku.error("Use of arcade expressions requires an arcade context");const j={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,z=D.getViewInfo(j),W=D.createExecContext(p,z);if(!A){const Y=D.createSyntaxTree(r.valueExpression);A=D.createFunction(Y),r.cache.compiledFunc=A}m=D.executeFunction(A,W)}else y&&(m=y[_]);const C=r.normalizationField,N=y!=null&&C!=null?parseFloat(y[C]):void 0;if(m!=null&&(!C||a||!isNaN(N)&&N!==0)){isNaN(N)||a||(m/=N);const j=Tx(m,x);if(j){const D=j[0],z=j[1],W=D===z?r.stops[D].color:tt.blendColors(r.stops[D].color,r.stops[z].color,j[2],i!=null?i.color:void 0);return new tt(W)}}}function Tj(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(j=>j.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void ku.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a=typeof e=="number",p=a?null:e,y=p&&p.attributes;let m=a?e:null;const _=r.field,{ipData:x,hasExpression:M}=r.cache;let A=r.cache.compiledFunc;if(!_&&!M){const j=r.stops;return j&&j[0]&&j[0].opacity}if(typeof m!="number")if(M){if(i==null||i.arcade==null)return void ku.error("Use of arcade expressions requires an arcade context");const j={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,z=D.getViewInfo(j),W=D.createExecContext(p,z);if(!A){const Y=D.createSyntaxTree(r.valueExpression);A=D.createFunction(Y),r.cache.compiledFunc=A}m=D.executeFunction(A,W)}else y&&(m=y[_]);const C=r.normalizationField,N=y!=null&&C!=null?parseFloat(y[C]):void 0;if(m!=null&&(!C||a||!isNaN(N)&&N!==0)){isNaN(N)||a||(m/=N);const j=Tx(m,x);if(j){const D=j[0],z=j[1];if(D===z)return r.stops[D].opacity;{const W=r.stops[D].opacity;return W+(r.stops[z].opacity-W)*j[2]}}}}function Ij(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(N=>N.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void ku.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=r.axis||"heading",p=a==="heading"&&r.rotationType==="arithmetic"?90:0,y=a==="heading"&&r.rotationType==="arithmetic"?-1:1,m=typeof e=="number"?null:e,_=m&&m.attributes,x=r.field,{hasExpression:M}=r.cache;let A=r.cache.compiledFunc,C=0;if(!x&&!M)return C;if(M){if(i==null||i.arcade==null)return void ku.error("Use of arcade expressions requires an arcade context");const N={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},j=i.arcade.arcadeUtils,D=j.getViewInfo(N),z=j.createExecContext(m,D);if(!A){const W=j.createSyntaxTree(r.valueExpression);A=j.createFunction(W),r.cache.compiledFunc=A}C=j.executeFunction(A,z)}else _&&(C=_[x]||0);return C=typeof C!="number"||isNaN(C)?null:p+y*C,C}function mce(t,e,i){const r=typeof e=="number",a=r?null:e,p=a&&a.attributes;let y=r?e:null;const{isScaleDriven:m}=t.cache;let _=t.cache.compiledFunc;if(m){const M=i!=null?i.scale:void 0,A=i!=null?i.view:void 0;y=M==null||A==="3d"?gce(t):M}else if(!r)switch(t.inputValueType){case Va.Expression:{if(i==null||i.arcade==null)return void ku.error("Use of arcade expressions requires an arcade context");const M={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,C=A.getViewInfo(M),N=A.createExecContext(a,C);if(!_){const j=A.createSyntaxTree(t.valueExpression);_=A.createFunction(j),t.cache.compiledFunc=_}y=A.executeFunction(_,N);break}case Va.Field:p&&(y=p[t.field]);break;case Va.Unknown:y=null}if(!m1(y))return null;if(r||!t.normalizationField)return y;const x=p?parseFloat(p[t.normalizationField]):null;return m1(x)&&x!==0?y/x:null}function gce(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function ab(t,e,i){const r="visualVariables"in t&&t.visualVariables?t.visualVariables.find(p=>p.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void ku.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=Ej(mce(r,e,i),r,e,i,r.cache.ipData);return a==null||isNaN(a)?0:a}function ss(t,e,i){return t==null?null:yu(t)?ab(t,e,i):m1(t)?t:null}function Mj(t,e,i){return m1(i)&&t>i?i:m1(e)&&t<e?e:t}function vce(t,e,i,r){return t+((ss(e.minSize,i,r)||e.minDataValue)??0)}function bce(t,e,i){const r=t.stops;let a=r&&r.length&&r[0].size;return a==null&&(a=t.minSize),ss(a,e,i)}function wce(t,e,i,r){const a=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),p=ss(e.minSize,i,r),y=ss(e.maxSize,i,r),m=r!=null?r.shape:void 0;if(t<=e.minDataValue)return p;if(t>=e.maxDataValue)return y;if(p==null||y==null)return null;if(e.scaleBy==="area"&&m){const _=m==="circle",x=_?gg*(p/2)**2:p*p,M=x+a*((_?gg*(y/2)**2:y*y)-x);return _?2*Math.sqrt(M/gg):Math.sqrt(M)}return p+a*(y-p)}function _ce(t,e,i,r){const a=r!=null?r.shape:void 0,p=t/e.minDataValue,y=ss(e.minSize,i,r),m=ss(e.maxSize,i,r);let _=null;return _=a==="circle"?2*Math.sqrt(p*(y/2)**2):a==="square"||a==="diamond"||a==="image"?Math.sqrt(p*y**2):p*y,Mj(_,y,m)}function Sce(t,e,i,r,a){var _,x,M;const[p,y,m]=Tx(t,a);if(p===y)return ss((_=e.stops)==null?void 0:_[p].size,i,r);{const A=ss((x=e.stops)==null?void 0:x[p].size,i,r);return A+(ss((M=e.stops)==null?void 0:M[y].size,i,r)-A)*m}}function xce(t,e,i,r){const a=(r!=null&&r.resolution?r.resolution:1)*hx[e.valueUnit],p=ss(e.minSize,i,r),y=ss(e.maxSize,i,r),{valueRepresentation:m}=e;let _=null;return _=m==="area"?2*Math.sqrt(t/gg)/a:m==="radius"||m==="distance"?2*t/a:t/a,Mj(_,p,y)}function Ej(t,e,i,r,a){switch(e.transformationType){case Ki.Additive:return vce(t,e,i,r);case Ki.Constant:return bce(e,i,r);case Ki.ClampedLinear:return wce(t,e,i,r);case Ki.Proportional:return _ce(t,e,i,r);case Ki.Stops:return Sce(t,e,i,r,a);case Ki.RealWorldSize:return xce(t,e,i,r);case Ki.Identity:return t;case Ki.Unknown:return null}}function $ce(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const a={scale:e,view:i};let p=ss(t.minSize,pI,a),y=ss(t.maxSize,pI,a);if(p!=null||y!=null){if(p>y){const m=y;y=p,p=m}return{minSize:p,maxSize:y}}}function Tce(t,e,i){if(!t.visualVariables)return;const r=[],a=[],p=[],y=[],m=[];for(const _ of t.visualVariables)switch(_.type){case"color":a.push(_);break;case"opacity":p.push(_);break;case"rotation":m.push(_);break;case"size":y.push(_)}return a.forEach(_=>{const x=$j(_,e,i);r.push({variable:_,value:x})}),p.forEach(_=>{const x=Tj(_,e,i);r.push({variable:_,value:x})}),m.forEach(_=>{const x=Ij(_,e,i);r.push({variable:_,value:x})}),y.forEach(_=>{const x=ab(_,e,i);r.push({variable:_,value:x})}),r.filter(_=>_.value!=null)}function Tx(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((a,p)=>t<a?(r=p,!0):(i=p,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function Ice(t,e,i){const r=["proportional","proportional","proportional"];for(const a of t){const p=a.useSymbolValue?"symbol-value":ab(a,e,i);switch(a.axis){case"width":r[0]=p;break;case"depth":r[1]=p;break;case"height":r[2]=p;break;case"width-and-depth":r[0]=p,r[1]=p;break;case"all":case void 0:case null:r[0]=p,r[1]=p,r[2]=p;break;default:a.axis}}return r}const Cbe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Ice,getColor:$j,getOpacity:Tj,getRotationAngle:Ij,getSize:ab,getSizeForValue:Ej,getSizeFromNumberOrVariable:ss,getSizeRangeAtScale:$ce,getVisualVariableValues:Tce,viewScaleRE:xj},Symbol.toStringTag,{value:"Module"}));var D5;const lm=new ft({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),F5=new ft({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function dI(t){if(t!=null)return typeof t=="string"||typeof t=="number"?$t(t):t.type==="size"?yu(t)?t:(delete(t={...t}).type,new At(t)):void 0}function fI(t,e,i){if(typeof t!="object")return t;const r=new At;return r.read(t,i),r}let At=D5=class extends Z1{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&xj.test(this.valueExpression)}}set expression(t){me.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){yu(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),yu(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return Sj(this)}set maxDataValue(t){t&&this.stops&&(me.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(me.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return dI(t)}readMaxSize(t,e,i){return fI(t,e,i)}set minDataValue(t){t&&this.stops&&(me.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(me.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return dI(t)}readMinSize(t,e,i){return fI(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(me.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return yce(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r&&r.messages){const a=this.index,p=typeof a=="string"?a:`visualVariables[${a}]`;r.messages.push(new ie("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:p+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?F5.read(t):null}clone(){return new D5({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:yu(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:yu(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Ki.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===Ki.Stops){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};v([S({readOnly:!0})],At.prototype,"cache",null),v([S({type:lm.apiValues,json:{type:lm.jsonValues,origins:{"web-map":{read:!1}},read:lm.read,write:lm.write}})],At.prototype,"axis",void 0),v([S({type:String,value:null,json:{read:!1}})],At.prototype,"expression",null),v([S()],At.prototype,"index",null),v([S({type:String,readOnly:!0})],At.prototype,"inputValueType",null),v([S({type:fce,json:{write:!0}})],At.prototype,"legendOptions",void 0),v([S({type:Number,value:null,json:{write:!0}})],At.prototype,"maxDataValue",null),v([S({type:Number,value:null,json:{write:!0}})],At.prototype,"maxSize",null),v([It("maxSize")],At.prototype,"castMaxSize",null),v([ge("maxSize")],At.prototype,"readMaxSize",null),v([S({type:Number,value:null,json:{write:!0}})],At.prototype,"minDataValue",null),v([S({type:Number,value:null,json:{write:!0}})],At.prototype,"minSize",null),v([It("minSize")],At.prototype,"castMinSize",null),v([ge("minSize")],At.prototype,"readMinSize",null),v([S({type:String,json:{write:!0}})],At.prototype,"normalizationField",void 0),v([S({readOnly:!0})],At.prototype,"arcadeRequired",null),v([S({type:String})],At.prototype,"scaleBy",void 0),v([S({type:[Sp],value:null,json:{write:!0}})],At.prototype,"stops",null),v([S({type:["outline"],json:{write:!0}})],At.prototype,"target",void 0),v([S({type:String,readOnly:!0})],At.prototype,"transformationType",null),v([S({type:["size"],json:{type:["sizeInfo"]}})],At.prototype,"type",void 0),v([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],At.prototype,"useSymbolValue",void 0),v([S({type:String,json:{write:!0}})],At.prototype,"valueExpression",void 0),v([ge("valueExpression",["valueExpression","expression"])],At.prototype,"readValueExpression",null),v([$e("web-scene","valueExpression")],At.prototype,"writeValueExpressionWebScene",null),v([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],At.prototype,"valueRepresentation",void 0),v([S({type:F5.apiValues,json:{write:F5.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],At.prototype,"valueUnit",void 0),v([ge("valueUnit")],At.prototype,"readValueUnit",null),At=D5=v([B("esri.renderers.visualVariables.SizeVariable")],At);const lb=At,Mce={color:bj,size:lb,opacity:wj,rotation:_j},Ece=new ft({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Ace=/^\[([^\]]+)\]$/i;let vg=class extends je{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let a=null;return a=i.target===r.target?0:i.target?1:-1,a});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:a,rotationType:p}=i,y=a&&a.match(Ace),m=y&&y[1];if(m&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:p,field:m})),e)return e.map(_=>{const x=Ece.read(_.type),M=Mce[x];M||(me.getLogger(this).warn(`Unknown variable type: ${x}`),r&&r.messages&&r.messages.push(new sn("visual-variable:unsupported",`visualVariable of type '${x}' is not supported`,{definition:_,context:r})));const A=new M;return A.read(_,r),A})}writeVariables(e,i){const r=[];for(const a of e){const p=a.toJSON(i);p&&r.push(p)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};v([S()],vg.prototype,"visualVariables",null),vg=v([B("esri.renderers.visualVariables.VisualVariableFactory")],vg);const kce=vg,Oce={base:Z1,key:"type",typeMap:{opacity:wj,color:bj,rotation:_j,size:lb}},Ld=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new kce}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,a){return this._vvFactory.readVariables(i,r,a)}writeVisualVariables(i,r,a,p){r[a]=this._vvFactory.writeVariables(i,p)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const a=this.visualVariables;return a?a.filter(p=>p.type===i&&(typeof r=="string"?p.target===r:r!==!1||!p.target)):[]}async collectVVRequiredFields(i,r){let a=[];this.visualVariables&&(a=a.concat(this.visualVariables));for(const p of a)p&&(p.field&&$s(i,r,p.field),p.normalizationField&&$s(i,r,p.normalizationField),p.valueExpression&&(Cce(p.valueExpression,i,r)||await Wr(i,r,p.valueExpression)))}};return v([S({types:[Oce],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),v([ge("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),v([$e("visualVariables")],e.prototype,"writeVisualVariables",null),e=v([B("esri.renderers.mixins.VisualVariablesMixin")],e),e};function Cce(t,e,i){const r=hce(t);return r!=null&&($s(e,i,r),!0)}const h0={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Pce(t,e=h0){var m,_;if(!t)return{symbol:null};const{retainId:i=h0.retainId,ignoreDrivers:r=h0.ignoreDrivers,hasLabelingContext:a=h0.hasLabelingContext,retainCIM:p=h0.retainCIM}=e;let y=null;if(y9(t)||t instanceof Oc)y=t.clone();else if(t.type==="cim"){const x=(_=(m=t.data)==null?void 0:m.symbol)==null?void 0:_.type;if(x!=="CIMPointSymbol")return{error:new ie("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${x||"unknown"}' is unsupported in 3D`,{symbol:t})};y=p?t.clone():Zh.fromCIMSymbol(t)}else if(t instanceof Is)y=F2.fromSimpleLineSymbol(t);else if(t instanceof Fu)y=Zh.fromSimpleMarkerSymbol(t);else if(t instanceof L1)y=Zh.fromPictureMarkerSymbol(t);else if(t instanceof Du)y=e.geometryType&&e.geometryType==="mesh"?z2.fromSimpleFillSymbol(t):j1.fromSimpleFillSymbol(t);else{if(!(t instanceof kc))return{error:new ie("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};y=a?D2.fromTextSymbol(t):Zh.fromTextSymbol(t)}return i&&y&&y.type!=="cim"&&(y.id=t.id),r&&y9(y)&&y.symbolLayers.forEach(x=>x.ignoreDrivers=!0),{symbol:y}}function t2(t,e,i,r){const a=Aj(t,{},{context:r,isLabelSymbol:!1});a!=null&&(e[i]=a)}function yI(t,e,i,r){const a=Aj(t,{},{context:r,isLabelSymbol:!0});a!=null&&(e[i]=a)}function mI(t){return t instanceof Od||t instanceof Oc}function Aj(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:a}=i,p=r==null?void 0:r.origin,y=r==null?void 0:r.messages;if(p==="web-scene"&&!mI(t)){const m=Pce(t,{retainCIM:!0,hasLabelingContext:a});return m.symbol!=null?m.symbol.write(e,r):(y==null||y.push(new ie("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:m.error})),null)}return(p==="web-map"||p==="portal-item"&&!wA(r==null?void 0:r.layer))&&mI(t)?(y==null||y.push(new ie("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function Nbe(t,e){return xY(t,null,e)}const jd={types:gC,json:{write:{writer:t2},origins:{"web-scene":{types:k8,write:{writer:t2},read:{reader:_d({types:k8})}}}}},kj={types:{base:ns,key:"type",typeMap:{"simple-fill":sc.typeMap["simple-fill"],"picture-fill":sc.typeMap["picture-fill"],"polygon-3d":sc.typeMap["polygon-3d"]}},json:{write:{writer:t2},origins:{"web-scene":{type:j1,write:{writer:t2}}}}},bg={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var z5;let ql=z5=class extends de{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new z5({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};v([S({type:String,json:{write:!0}})],ql.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],ql.prototype,"label",void 0),v([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],ql.prototype,"minValue",void 0),v([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],ql.prototype,"maxValue",void 0),v([S(jd)],ql.prototype,"symbol",void 0),ql=z5=v([B("esri.renderers.support.ClassBreakInfo")],ql);const i2=ql;var V5;const Oj="log",wg="percent-of-total",_g="field",um=new ft({esriNormalizeByLog:Oj,esriNormalizeByPercentOfTotal:wg,esriNormalizeByField:_g}),Nce=ri(i2);let ji=V5=class extends Ld(el){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(a=>{const p=new i2;return p.read(a,i),p.minValue==null&&(p.minValue=r),p.maxValue==null&&(p.maxValue=p.minValue),r=p.maxValue,p})}writeClassBreakInfos(t,e,i,r){const a=t.map(p=>p.write({},r));this._areClassBreaksConsecutive()&&a.forEach(p=>delete p.classMinValue),e[i]=a}castField(t){return t==null?t:typeof t=="function"?(me.getLogger(this).error(".field: field must be a string value"),null):x1(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&_g||i&&wg||null,e&&i&&me.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==_g&&t!==wg||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new i2({minValue:t,maxValue:e,symbol:vC(i)}):Nce(se(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const a=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(a[0]===t&&a[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return!this.valueExpression||e!=null&&e.arcade!=null||me.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await vc()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void me.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null||e.arcade==null)){const a=await vc(),{arcadeUtils:p}=a;p.hasGeometryOperations(this.valueExpression)&&await p.enableGeometryOperations(),i={...i,arcade:a}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,a)=>r+a.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new V5({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:se(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:se(this.visualVariables),legendOptions:se(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),Wr(t,e,this.valueExpression)];$s(t,e,this.field),$s(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:a,arcade:p}=e??{},{valueExpression:y}=this;let m=this._compiledValueExpression.valueExpression===y?this._compiledValueExpression.compiledFunction:null;const _=p.arcadeUtils;if(!m){const M=_.createSyntaxTree(y);m=_.createFunction(M),this._compiledValueExpression.compiledFunction=m}this._compiledValueExpression.valueExpression=y;const x=_.executeFunction(m,_.createExecContext(t,_.getViewInfo({viewingMode:i,scale:r,spatialReference:a})));return this._getBreakIndexfromInfos(x)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let a=parseFloat(i[e]);if(r){const p=this.normalizationTotal,y=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Oj)a=Math.log(a)*Math.LOG10E;else if(r!==wg||p==null||isNaN(p)){if(r===_g&&!isNaN(y)){if(isNaN(a)||isNaN(y))return-1;a/=y}}else a=a/p*100}return this._getBreakIndexfromInfos(a)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};v([S(kj)],ji.prototype,"backgroundFillSymbol",void 0),v([S({type:[i2]})],ji.prototype,"classBreakInfos",void 0),v([ge("classBreakInfos")],ji.prototype,"readClassBreakInfos",null),v([$e("classBreakInfos")],ji.prototype,"writeClassBreakInfos",null),v([S({type:String,json:{write:!0}})],ji.prototype,"defaultLabel",void 0),v([S(jd)],ji.prototype,"defaultSymbol",void 0),v([S({type:String,json:{write:!0}})],ji.prototype,"field",void 0),v([It("field")],ji.prototype,"castField",null),v([S({type:Boolean})],ji.prototype,"isMaxInclusive",void 0),v([S({type:Qp,json:{write:!0}})],ji.prototype,"legendOptions",void 0),v([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],ji.prototype,"minValue",null),v([S({type:String,json:{write:!0}})],ji.prototype,"normalizationField",void 0),v([S({type:Number,cast:t=>Ks(t),json:{write:!0}})],ji.prototype,"normalizationTotal",void 0),v([S({type:um.apiValues,value:null,json:{type:um.jsonValues,read:um.read,write:um.write}})],ji.prototype,"normalizationType",null),v([Fe({classBreaks:"class-breaks"})],ji.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],ji.prototype,"valueExpression",void 0),v([S({type:String,json:{write:!0}})],ji.prototype,"valueExpressionTitle",void 0),ji=V5=v([B("esri.renderers.ClassBreaksRenderer")],ji);const Cj=ji,Hw=-3;var eu;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(eu||(eu={}));let Rbe=class{constructor(e,i,r){this.name=e,this._storage=i,this.id=Lce+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(e,i,r,a=0){this._storage.put(this,e,i,r,a)}get(e){const i=this._storage.get(this,e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this,e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,r){this._storage.updateSize(this,e,i,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},Rce=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new gu,this._users=new gu}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}put(e,i,r,a,p){i=e.id+i;const y=this._db.get(i);if(y&&(this._size-=y.size,e.size-=y.size,this._db.delete(i),y.entry!==r&&this._notifyRemove(i,y.entry,eu.ALL)),a>this._maxSize)return void this._notifyRemove(i,r,eu.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!a||a<0)return void console.warn("Refusing to cache entry with invalid size "+a);const m=1+Math.max(p,Hw)-Hw;this._db.set(i,{entry:r,size:a,lifetime:m,lives:m}),this._size+=a,e.size+=a,this._checkSizeLimits()}updateSize(e,i,r,a){i=e.id+i;const p=this._db.get(i);if(p&&p.entry===r){for(this._size-=p.size,e.size-=p.size;a>this._maxSize;){const y=this._notifyRemove(i,r,eu.SOME);if(!(y!=null&&y>0))return void this._db.delete(i);a=y}p.size=a,this._size+=a,e.size+=a,this._checkSizeLimits()}}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((y,m)=>{const _=y.lifetime;r[_]=(r[_]||0)+y.size,this._users.forAll(x=>{const{id:M,name:A}=x;if(m.startsWith(M)){const C=i[A]||0;i[A]=C+y.size}})});const a={};this._users.forAll(y=>{const m=y.name;if("hitRate"in y&&typeof y.hitRate=="number"&&!isNaN(y.hitRate)&&y.hitRate>0){const _=i[m]||0;i[m]=_,a[m]=Math.round(100*y.hitRate)+"%"}else a[m]="0%"});const p=Object.keys(i);p.sort((y,m)=>i[m]-i[y]),p.forEach(y=>e[y]=Math.round(i[y]/2**20)+"MB / "+a[y]);for(let y=r.length-1;y>=0;--y){const m=r[y];m&&(e["Priority "+(y+Hw-1)]=Math.round(m/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,a)=>{a.startsWith(i)&&(this._size-=r.size,this._db.delete(a),this._notifyRemove(a,r.entry,eu.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,eu.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r){let a;return this._removeFuncs.some(p=>{if(e.startsWith(p[0])){const y=p[1](i,r);return typeof y=="number"&&(a=y),!0}return!1}),a}_checkSizeLimits(){if(this._size>this._maxSize){for(const[e,i]of this._db)if(this._purgeItem(e,i),this._size<=.9*this.maxSize)return}this._users.forEach(e=>{if(e.maxSize>0&&e.size>e.maxSize){for(const[i,r]of this._db)if(i.startsWith(e.id)&&(this._purgeItem(i,r,e),e.size<=.9*e.maxSize))return}})}_purgeItem(e,i,r=this._users.find(a=>e.startsWith(a.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const a=this._notifyRemove(e,i.entry,eu.SOME);a!=null&&a>0&&(this._size+=a,r&&(r.size+=a),i.lives=i.lifetime,i.size=a,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},Lce=0,Pj=class{constructor(e,i){this._storage=new Rce,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}};function jce(t){return t.type==="date"||t.type==="esriFieldTypeDate"||t.type==="date-only"||t.type==="esriFieldTypeDateOnly"||t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset"}function gI(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function vI(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let Ix=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const r of e){const a=r==null?void 0:r.name,p=wI(r==null?void 0:r.name);if(a&&p){const y=bI(a);this._fieldsMap.set(a,r),this._fieldsMap.set(y,r),this._normalizedFieldsMap.set(p,r),i.push(y),jce(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):Tk(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),gI(r)||vI(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)gI(e)||vI(e)||e.nullable||UH(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(bI(e))??this._normalizedFieldsMap.get(wI(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function bI(t){return t.trim().toLowerCase()}function wI(t){var e;return((e=EH(t))==null?void 0:e.toLowerCase())??""}const _I="esri.renderers.support.DictionaryLoader",Dce={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let Mx=class{constructor(e,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new Pj(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(j){if(dr(j))return this._dictionaryPromise=null,null}const a=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),p={};if(this.fieldMap)for(const j of this._symbolFields){const D=this._getFieldName(this.fieldMap[j]);p[j]=D?a?e.attributes[D]:""+e.attributes[D]:""}let y=null;try{y=r==null?void 0:r(p,i)}catch{return null}if(!y||typeof y!="string")return null;const m=iS(y).toString(),_=this._symbolCache.get(m);if(_)return _.catch(()=>{this._symbolCache.pop(m)}),_;const x=y.split(";"),M=[],A=[];for(const j of x)if(j)if(j.includes("po:")){const D=j.substr(3).split("|");if(D.length===3){const z=D[0],W=D[1];let Y=D[2];if(W==="DashTemplate")Y=Y.split(" ").map(K=>Number(K));else if(W==="Color"){const K=new tt(Y).toRgba();Y=[K[0],K[1],K[2],255*K[3]]}else Y=Number(Y);A.push({primitiveName:z,propertyName:W,value:Y})}}else if(j.includes("|")){for(const D of j.split("|"))if(this._itemNames.has(D)){M.push(D);break}}else this._itemNames.has(j)&&M.push(j);const C=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point",N=this._cimPartsToCIMSymbol(M,A,C,i);return this._symbolCache.put(m,N,1),N}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void me.getLogger(_I).error("no valid URL!");const i=ot(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:r}]=await Promise.all([i,vc()]);if(!r)throw this._dictionaryPromise=null,new ie("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:a,dictionary_version:p,expression:y,itemsNames:m}=r,_=y;let x=!1;p&&(this._dictionaryVersion=e2.parse(p),x=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(m),this._symbolFields=a.symbol;const M={};if(this.config){const N=this.config;for(const j in N)M[j]=N[j]}if(a.configuration)for(const N of a.configuration)M.hasOwnProperty(N.name)||(M[N.name]=N.value);const A=[];if(e!=null&&e.fields&&this.fieldMap)for(const N of this._symbolFields){const j=this.fieldMap[N],D=e.fields.filter(z=>z.name.toLowerCase()===(j==null?void 0:j.toLowerCase()));D.length>0&&A.push({...D[0],type:x?D[0].type:"esriFieldTypeString"})}A.length>0&&(this._fieldIndex=new Ix(A));const C=TH(_,e!=null?e.spatialReference:null,A,M).then(N=>{const j={scale:0};return(D,z)=>{if(N==null)return null;const W=N.repurposeFeature({geometry:null,attributes:D});return j.scale=z!=null?z.scale??void 0:void 0,N.evaluate({$feature:W,$view:j},N.services)}}).catch(N=>(me.getLogger(_I).error("Creating dictinoary expression failed:",N),null));return this._dictionaryPromise=C,C}async _cimPartsToCIMSymbol(e,i,r,a){const p=new Array(e.length);for(let _=0;_<e.length;_++)p[_]=this._getSymbolPart(e[_],a);const y=await Promise.all(p),m=this.fieldMap;if(m)for(const _ of y)Nj(_,m);return new C1({data:this._combineSymbolParts(y,i,r)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(p=>p.data);const r=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),a=ot(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,a);try{return(await a).data}catch(p){throw this._ongoingRequests.delete(e),p}}_combineSymbolParts(e,i,r){if(!e||e.length===0)return null;const a={...e[0]};if(e.length>1){a.symbolLayers=[];for(const p of e){const y=p;a.symbolLayers.unshift(...y.symbolLayers)}}return r&&(a.callout=Dce),{type:"CIMSymbolReference",symbol:a,primitiveOverrides:i}}_getFieldName(e){if(this._fieldIndex!==null){const i=this._fieldIndex.get(e);return i?i.name:e}return e}};function Nj(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const a=i[r];a&&a.enable!==!1&&a.type==="CIMVectorMarker"&&Fce(a,e)}}function Fce(t,e){const i=t.markerGraphics;if(i)for(const r of i){if(!r)continue;const a=r.symbol;if(a)switch(a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":Nj(a,e);break;case"CIMTextSymbol":a.fieldMap=e}}}const Vbe=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:Mx},Symbol.toStringTag,{value:"Module"}));var G5;let Pn=G5=class extends Ld(el){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new Mx(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r!=null&&r.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new G5({config:se(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:se(this.fieldMap),url:se(this.url),visualVariables:se(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Wr(t,e,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};v([S({type:Mx})],Pn.prototype,"_loader",null),v([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Pn.prototype,"config",void 0),v([S({type:Object,json:{write:!0}})],Pn.prototype,"fieldMap",void 0),v([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Pn.prototype,"scaleExpression",void 0),v([$e("scaleExpression")],Pn.prototype,"writeData",null),v([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Pn.prototype,"scaleExpressionTitle",void 0),v([S({type:String,json:{write:!0}})],Pn.prototype,"url",void 0),v([$e("visualVariables")],Pn.prototype,"writeVisualVariables",null),Pn=G5=v([B("esri.renderers.DictionaryRenderer")],Pn);const zce=Pn;var q5;let $a=q5=class extends de{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(me.getLogger(this).error(".field: field must be a string value"),null):x1(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new q5({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([S({type:tt,json:{type:[Number],write:!0}})],$a.prototype,"color",void 0),v([S({type:String,json:{write:!0}})],$a.prototype,"field",void 0),v([It("field")],$a.prototype,"castField",null),v([S({type:String,json:{write:!0}})],$a.prototype,"label",void 0),v([S({type:String,json:{write:!0}})],$a.prototype,"valueExpression",void 0),v([S({type:String,json:{write:!0}})],$a.prototype,"valueExpressionTitle",void 0),$a=q5=v([B("esri.renderers.support.AttributeColorInfo")],$a);const Rj=$a;var U5;let Sg=U5=class extends de{constructor(){super(...arguments),this.unit=null}clone(){return new U5({unit:this.unit})}};v([S({type:String,json:{write:!0}})],Sg.prototype,"unit",void 0),Sg=U5=v([B("esri.renderers.support.DotDensityLegendOptions")],Sg);const Vce=Sg;var B5;let ts=B5=class extends Ld(el){constructor(t){super(t),this.attributes=null,this.backgroundColor=new tt([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Is,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Du({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new B5({attributes:se(this.attributes),backgroundColor:se(this.backgroundColor),dotBlendingEnabled:se(this.dotBlendingEnabled),dotShape:se(this.dotShape),dotSize:se(this.dotSize),dotValue:se(this.dotValue),legendOptions:se(this.legendOptions),outline:se(this.outline),referenceScale:se(this.referenceScale),visualVariables:se(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Wr(t,e,i.valueExpression),i.field&&t.add(i.field)}};v([S({type:[Rj],json:{write:!0}})],ts.prototype,"attributes",void 0),v([S({type:tt,json:{write:!0}})],ts.prototype,"backgroundColor",void 0),v([S({type:Boolean,json:{write:!0}})],ts.prototype,"dotBlendingEnabled",void 0),v([S({type:String,json:{write:!1}})],ts.prototype,"dotShape",void 0),v([S({type:Number,json:{write:!0}})],ts.prototype,"dotSize",void 0),v([S({type:Vce,json:{write:!0}})],ts.prototype,"legendOptions",void 0),v([S({type:Is,json:{default:null,write:!0}})],ts.prototype,"outline",void 0),v([S({type:Number,json:{write:!0}})],ts.prototype,"dotValue",void 0),v([S({type:Number,json:{write:!0}})],ts.prototype,"referenceScale",void 0),v([S({type:Number,json:{write:!0}})],ts.prototype,"seed",void 0),v([Fe({dotDensity:"dot-density"})],ts.prototype,"type",void 0),ts=B5=v([B("esri.renderers.DotDensityRenderer")],ts);const Gce=ts;var H5;let rf=H5=class extends de{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new H5({color:this.color,ratio:this.ratio})}};v([S({type:tt,json:{type:[jt],default:null,write:!0}})],rf.prototype,"color",void 0),v([S({type:Number,json:{write:!0}})],rf.prototype,"ratio",void 0),rf=H5=v([B("esri.renderers.support.HeatmapColorStop")],rf);const xg=rf;let xp=class extends Xt(de){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};v([S({type:String,json:{write:!0}})],xp.prototype,"minLabel",void 0),v([S({type:String,json:{write:!0}})],xp.prototype,"maxLabel",void 0),v([S({type:String,json:{write:!0}})],xp.prototype,"title",void 0),xp=v([B("esri.renderers.support.HeatmapLegendOptions")],xp);function ub(){return[0,0,0,0]}function qce(t){return[t[0],t[1],t[2],t[3]]}function Dd(t,e,i,r){return[t,e,i,r]}function Uce(t){const e=ub(),i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Bce(t,e){return new Float64Array(t,e,4)}function Lj(){return ub()}function jj(){return Dd(1,1,1,1)}function Dj(){return Dd(1,0,0,0)}function Fj(){return Dd(0,1,0,0)}function zj(){return Dd(0,0,1,0)}function Vj(){return Dd(0,0,0,1)}const Hce=Lj(),Wce=jj(),Jce=Dj(),Kce=Fj(),Yce=zj(),Zce=Vj();Object.freeze(Object.defineProperty({__proto__:null,ONES:Wce,UNIT_W:Zce,UNIT_X:Jce,UNIT_Y:Kce,UNIT_Z:Yce,ZEROS:Hce,clone:qce,create:ub,createView:Bce,fromArray:Uce,fromValues:Dd,ones:jj,unitW:Vj,unitX:Dj,unitY:Fj,unitZ:zj,zeros:Lj},Symbol.toStringTag,{value:"Module"}));const Ex=2.4;function Xce(t){return Wa(t*Ex)}function Qce(t){return DO(t)/Ex}function epe(t,e,i,r){let{color:a,ratio:p}=e,{color:y,ratio:m}=i;m===p&&(m===1?p-=1e-6:m+=1e-6);const _=nn((r-p)/(m-p),0,1);BA(t,a.toArray(),y.toArray(),_)}function qbe(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:m})=>m>=0&&m<=1).sort((m,_)=>m.ratio-_.ratio).map(({color:m,ratio:_})=>({color:m,ratio:Math.max(_,.001)})),t.length<1)return i;let r=t[0],a=t[0],p=1;const y=ub();for(let m=0;m<512;m++){const _=(m+.5)/512;for(;_>a.ratio&&p<t.length;)r=a,a=t[p++];epe(y,r,a,_),i.set(y,4*m)}return i}function Ube(t,e,i,r){const{radius:a,fieldOffset:p,field:y}=e,m=Math.round(DO(a)),_=new Float64Array(i*r);let x,M=Number.NEGATIVE_INFINITY;const A=rpe(y,p),C=new Set;for(const N of t){const j=N.getCursor();for(;j.next();){const D=j.getObjectId();if(C.has(D))continue;C.add(D);const z=j.readLegacyPointGeometry(),W=128;if(z.x<-W||z.x>=i+W||z.y<-W||z.y>r+W)continue;const Y=+A(j),K=Math.max(0,Math.round(z.x)-m),ee=Math.max(0,Math.round(z.y)-m),ne=Math.min(r,Math.round(z.y)+m),oe=Math.min(i,Math.round(z.x)+m);for(let ue=ee;ue<ne;ue++)for(let ye=K;ye<oe;ye++){const Se=ue*i+ye,Ce=ipe(z.x-ye,z.y-ue,m);x=_[Se]+=Ce*Y,x>M&&(M=x)}}}return{matrix:_.buffer,max:M}}function Bbe(t,e,i,r,a,p){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const y=t.getImageData(0,0,e,e);i&&r&&y.data.set(new Uint8ClampedArray(tpe(e,i,r,a,p))),t.putImageData(y,0,0)}function tpe(t,e,i,r,a){const p=new Uint32Array(t*t),y="buffer"in e?e:new Float64Array(e),m="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),_=m.length/(a-r);for(let x=0;x<y.length;x++){const M=y[x],A=Math.floor((M-r)*_);p[x]=m[nn(A,0,m.length-1)]}return p.buffer}function ipe(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Hbe(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function rpe(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var W5;const Gj="esri.renderers.HeatmapRenderer",spe=me.getLogger(Gj);function SI(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:a,maxPixelIntensity:p,minPixelIntensity:y,...m}=t;return m}}return t}let Wi=W5=class extends el{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new xg({ratio:0,color:new tt("rgba(255, 140, 0, 0)")}),new xg({ratio:.75,color:new tt("rgba(255, 140, 0, 1)")}),new xg({ratio:.9,color:new tt("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return SI(t)}get blurRadius(){return Qce(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Xce(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(Ex**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||Yi(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,wd(()=>{P3(spe,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=SI(t),super.read(t,e)}getSymbol(){return new Fu}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await $s(t,e,i),r&&typeof r=="string"&&await Wr(t,e,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new W5({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:se(this.colorStops),field:this.field,legendOptions:se(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([S({type:$x,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wi.prototype,"authoringInfo",void 0),v([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Wi.prototype,"blurRadius",null),v([S({type:[xg],json:{write:!0}})],Wi.prototype,"colorStops",void 0),v([S({type:String,json:{write:!0}})],Wi.prototype,"field",void 0),v([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Wi.prototype,"fieldOffset",void 0),v([S({type:xp,json:{write:!0}})],Wi.prototype,"legendOptions",void 0),v([S({type:Number,json:{write:!0}})],Wi.prototype,"maxDensity",void 0),v([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Wi.prototype,"maxPixelIntensity",null),v([S({type:Number,json:{write:!0}})],Wi.prototype,"minDensity",void 0),v([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Wi.prototype,"minPixelIntensity",null),v([S({type:Number,cast:$t,json:{write:!0}})],Wi.prototype,"radius",void 0),v([S({type:Number,range:{min:0},json:{default:0,write:!0}})],Wi.prototype,"referenceScale",void 0),v([Fe({heatmap:"heatmap"})],Wi.prototype,"type",void 0),v([S({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Wi.prototype,"valueExpression",void 0),v([S({type:String})],Wi.prototype,"valueExpressionTitle",void 0),v([S({readOnly:!0})],Wi.prototype,"_pixelIntensityToDensity",null),Wi=W5=v([B(Gj)],Wi);const qj=Wi;let Hh=class extends Xt(de){constructor(){super(...arguments),this.color=new tt([0,0,0,0]),this.label=null,this.threshold=0}};v([S({type:tt,json:{write:!0}})],Hh.prototype,"color",void 0),v([S({type:String,json:{write:!0}})],Hh.prototype,"label",void 0),v([S({type:Number,range:{min:0,max:1},json:{write:!0}})],Hh.prototype,"threshold",void 0),Hh=v([B("esri.renderers.support.OthersCategory")],Hh);let $g=class extends Xt(de){constructor(){super(...arguments),this.title=null}};v([S({type:String,json:{write:!0}})],$g.prototype,"title",void 0),$g=v([B("esri.renderers.support.PieChartLegendOptions")],$g);let cs=class extends Ld(Xt(el)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new tt([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Hh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new Fu({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Po)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Wr(e,i,r.valueExpression),r.field&&e.add(r.field)}};v([S({type:[Rj],json:{write:!0}})],cs.prototype,"attributes",void 0),v([S({type:Du,json:{default:null,write:!0}})],cs.prototype,"backgroundFillSymbol",void 0),v([S({type:tt,json:{write:!0}})],cs.prototype,"defaultColor",void 0),v([S({type:String,json:{write:!0}})],cs.prototype,"defaultLabel",void 0),v([S({type:Number,range:{min:0,max:1},json:{write:!0}})],cs.prototype,"holePercentage",void 0),v([S({type:Hh,json:{write:!0}})],cs.prototype,"othersCategory",void 0),v([S({type:$g,json:{write:!0}})],cs.prototype,"legendOptions",void 0),v([S({type:Is,json:{default:null,write:!0}})],cs.prototype,"outline",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],cs.prototype,"size",void 0),v([Fe({pieChart:"pie-chart"})],cs.prototype,"type",void 0),cs=v([B("esri.renderers.PieChartRenderer")],cs);const npe=cs;var J5;let Ch=J5=class extends Ld(el){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new J5({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:se(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};v([S({type:String,json:{write:!0}})],Ch.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],Ch.prototype,"label",void 0),v([S(jd)],Ch.prototype,"symbol",void 0),v([Fe({simple:"simple"})],Ch.prototype,"type",void 0),Ch=J5=v([B("esri.renderers.SimpleRenderer")],Ch);const hb=Ch,ope=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function K5(t){return t instanceof je}function xI(t){return t instanceof De?Object.keys(t.items):K5(t)?Yi(t).keys():t?Object.keys(t):[]}function hm(t,e){return t instanceof De?t.items[e]:t[e]}function ape(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function Gf(t){return t?t.declaredClass:null}function Uj(t,e){var A;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=xI(t),a=xI(e);if(r.length===0&&a.length===0)return;if(!r.length||!a.length||ape(t,e))return{type:"complete",oldValue:t,newValue:e};const p=a.filter(C=>!r.includes(C)),y=r.filter(C=>!a.includes(C)),m=r.filter(C=>a.includes(C)&&hm(t,C)!==hm(e,C)).concat(p,y).sort(),_=Gf(t);if(_&&ope.includes(_)&&m.length)return{type:"complete",oldValue:t,newValue:e};let x;const M=K5(t)&&K5(e);for(const C of m){const N=hm(t,C),j=hm(e,C);let D;if((M||typeof N!="function"&&typeof j!="function")&&N!==j&&(N!=null||j!=null)){if(i&&i[C]&&typeof i[C]=="function")D=(A=i[C])==null?void 0:A.call(i,N,j);else if(N instanceof Date&&j instanceof Date){if(N.getTime()===j.getTime())continue;D={type:"complete",oldValue:N,newValue:j}}else D=typeof N=="object"&&typeof j=="object"&&Gf(N)===Gf(j)?Uj(N,j):{type:"complete",oldValue:N,newValue:j};D!=null&&(x!=null?x.diff[C]=D:x={type:"partial",diff:{[C]:D}})}}return x}function lpe(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const a of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const p=r.diff[a];if(!p)return!1;r=p}}return!0}function Ybe(t,e){for(const i of e)if(lpe(t,i))return!0;return!1}function upe(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&Gf(t)!==Gf(e)?{type:"complete",oldValue:t,newValue:e}:Uj(t,e)}let $p=class extends Xt(de){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};v([S(bg)],$p.prototype,"value",void 0),v([S(bg)],$p.prototype,"value2",void 0),v([S(bg)],$p.prototype,"value3",void 0),$p=v([B("esri.renderers.support.UniqueValue")],$p);const ed=$p;let Ul=class extends Xt(de){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new ed({value:r})):i==="object"?e[0]instanceof ed?e:e.map(r=>new ed(r)):null}};v([S({type:String,json:{write:!0}})],Ul.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],Ul.prototype,"label",void 0),v([S(jd)],Ul.prototype,"symbol",void 0),v([S({type:[ed],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new ed({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const a=[r.value,r.value2,r.value3].filter(Po).map(p=>p.toString());i.push(a)}e.values=i}}}})],Ul.prototype,"values",void 0),v([It("values")],Ul.prototype,"castValues",null),Ul=v([B("esri.renderers.support.UniqueValueClass")],Ul);const Bj=Ul;let sf=class extends Xt(de){constructor(e){super(e),this.heading=null,this.classes=null}};v([S({type:String,json:{write:!0}})],sf.prototype,"heading",void 0),v([S({type:[Bj],json:{write:!0}})],sf.prototype,"classes",void 0),sf=v([B("esri.renderers.support.UniqueValueGroup")],sf);const Y5=sf;var Z5;let Ph=Z5=class extends de{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new Z5({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};v([S({type:String,json:{write:!0}})],Ph.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],Ph.prototype,"label",void 0),v([S(jd)],Ph.prototype,"symbol",void 0),v([S(bg)],Ph.prototype,"value",void 0),Ph=Z5=v([B("esri.renderers.support.UniqueValueInfo")],Ph);const qf=Ph,hpe=()=>!!le("enable-feature:force-wosr"),cpe=()=>le.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),ppe=()=>le.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),dpe=()=>le.add("enable-i3s-patching",!0,!0,!0),fpe=()=>le.add("enable-i3s-patching",!1,!0,!0),ewe=()=>!!le("enable-feature:SceneLayer-editing"),ype=(t="i3s-patching")=>{switch(fpe(),ppe(),le.add("enable-feature:SceneLayer-editing",!0,!0,!0),t){case"feature-layer-view":cpe();break;case"i3s-patching":dpe()}};ype("i3s-patching");let Ww={};async function mpe(t,e){try{return{data:(await wpe(t,e)).data,baseUrl:rG(t),styleUrl:t}}catch(i){return Js(i),null}}function gpe(t,e,i){const r=e.portal!=null?e.portal:fr.getDefault();let a;const p=`${r.url} - ${r.user&&r.user.username} - ${t}`;return Ww[p]||(Ww[p]=vpe(t,r,i).then(y=>(a=y,y.fetchData())).then(y=>({data:y,baseUrl:a.itemUrl??"",styleName:t}))),Ww[p]}function vpe(t,e,i){return e.load(i).then(()=>{const r=new Co({disableExtraQuery:!0,query:`owner:${$I} AND type:${TI} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{var y;let a=null;const p=t.toLowerCase();if(r&&Array.isArray(r)){for(const m of r)if(((y=m.typeKeywords)==null?void 0:y.some(x=>x.toLowerCase()===p))&&m.type===TI&&m.owner===$I){a=m;break}}if(!a)throw new ie("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return a.load(i)})}function bpe(t,e,i){return t&&t.styleUrl!=null?mpe(t.styleUrl,i):t&&t.styleName!=null?gpe(t.styleName,e,i):Promise.reject(new ie("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function twe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function iwe(t,e,i=["gltf"]){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!hpe())for(const r of i){const a=t.formatInfos.find(p=>p.type===r);if(a)return a.href}return t.webRef}function wpe(t,e){const i={responseType:"json",query:{f:"json"},...e};return ot(Hn(t),i)}const $I="esri_en",TI="Style",rwe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var nf;const Hj="esri.renderers.UniqueValueRenderer",gl=me.getLogger(Hj),II="uvInfos-watcher",MI="uvGroups-watcher",_pe=",",Spe=ri(qf);function xpe(t){const{field1:e,field2:i,field3:r,fieldDelimiter:a,uniqueValueInfos:p,valueExpression:y}=t,m=!(!e||!i);return[{classes:(p??[]).map(_=>{var W;const{symbol:x,label:M,value:A,description:C}=_,[N,j,D]=m?((W=A==null?void 0:A.toString())==null?void 0:W.split(a||""))||[]:[A],z=[];return(e||y)&&z.push(N),i&&z.push(j),r&&z.push(D),{symbol:x,label:M,values:[z],description:C}})}]}let ai=nf=class extends Ld(el){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const a={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let p=0;p<i.length;p++){const y=e.find(m=>m.value===i[p].value);y?upe(y,i[p])?(a.changed.push({type:"complete",oldValue:y,newValue:i[p]}),r=!0):a.unchanged.push({oldValue:y,newValue:i[p]}):(a.added.push(i[p]),r=!0)}for(let p=0;p<e.length;p++)i.find(y=>y.value===e[p].value)||(a.removed.push(e[p]),r=!0);return r?a:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:x1(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r&&r.messages?r.messages.push(new ie("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):gl.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||fr.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Ad(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=N1(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?gl.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?gl.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var r;if(this.styleOrigin)return void gl.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?Spe(t):new qf({value:t,symbol:vC(e)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void gl.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await vc()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void gl.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null||i.arcade==null)){const a=await vc(),{arcadeUtils:p}=a;p.hasGeometryOperations(this.valueExpression)&&await p.enableGeometryOperations(),i={...i,arcade:a}}const r=this._getUniqueValueInfo(t,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var r;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((a,p)=>a+p.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new nf({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:se(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:se(this.visualVariables),legendOptions:se(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:se(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=se(this.uniqueValueInfos),i=se(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(se(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(t,e)),Wr(t,e,this.valueExpression)];$s(t,e,this.field),$s(t,e,this.field2),$s(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return bpe(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(r=>{const a=new Oc({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==t.data.defaultItem||(this.defaultSymbol=a,this._isDefaultSymbolDerived=!0);const p=new qf({value:r.name,symbol:a});e.push(p),this._valueInfoMap[r.name]=p}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",_pe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(II);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(Ee(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,a)=>{r!==a&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,II)}}_watchUniqueValueGroups(){this.removeHandles(MI);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(Ee(()=>({classes:i.classes}),(r,a)=>{r!==a&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(Ee(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(a,p)=>{a!==p&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,MI)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:a,uniqueValueGroups:p,valueExpression:y}=this;if(!e&&!y)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const m=!(!e||!i);for(const _ of p)for(const x of _.classes??[]){const{symbol:M,label:A,values:C,description:N}=x;for(const j of C??[]){const{value:D,value2:z,value3:W}=j,Y=[D];i&&Y.push(z),r&&Y.push(W);const K=m?Y.join(a||""):Y[0];t.push(new qf({symbol:M,label:A,value:K,description:N}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:a,uniqueValueInfos:p}=this;if(!e&&!r||!p.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const y=!(!e||!i),m=p.map(x=>{var W;const{symbol:M,label:A,value:C,description:N}=x,[j,D,z]=y?((W=C==null?void 0:C.toString())==null?void 0:W.split(a||""))||[]:[C];return new Bj({symbol:M,label:A,description:N,values:[new ed({value:j,value2:D,value3:z})]})}),_=[new Y5({classes:m})];t&&Object.freeze(_),this._set("uniqueValueGroups",_),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:a,arcade:p}=e??{};let y=this._cache.compiledFunc;const m=p.arcadeUtils;if(!y){const x=m.createSyntaxTree(this.valueExpression);y=m.createFunction(x),this._cache.compiledFunc=y}const _=m.executeFunction(y,m.createExecContext(t,m.getViewInfo({viewingMode:i,scale:r,spatialReference:a})));return this._valueInfoMap[_+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(typeof e!="function"&&this.field2){const a=this.field2,p=this.field3,y=[];e&&y.push(i[e]),a&&y.push(i[a]),p&&y.push(i[p]),r=y.join(this.fieldDelimiter||"")}else typeof e=="function"?r=e(t):e&&(r=i[e]);return this._valueInfoMap[r+""]}static fromPortalStyle(t,e){const i=new nf(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||fr.getDefault());const r=i.populateFromStyle();return r.catch(a=>{gl.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",a)}),r}static fromStyleUrl(t,e){const i=new nf(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(a=>{gl.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",a)}),r}};v([S({readOnly:!0})],ai.prototype,"_cache",null),v([Fe({uniqueValue:"unique-value"})],ai.prototype,"type",void 0),v([S(kj)],ai.prototype,"backgroundFillSymbol",void 0),v([S({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ai.prototype,"field",null),v([It("field")],ai.prototype,"castField",null),v([$e("field")],ai.prototype,"writeField",null),v([S({type:String,value:null,json:{write:!0}})],ai.prototype,"field2",null),v([S({type:String,value:null,json:{write:!0}})],ai.prototype,"field3",null),v([S({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],ai.prototype,"orderByClassesEnabled",void 0),v([S({type:String,value:null,json:{write:!0}})],ai.prototype,"valueExpression",null),v([S({type:String,json:{write:!0}})],ai.prototype,"valueExpressionTitle",void 0),v([S({type:Qp,json:{write:!0}})],ai.prototype,"legendOptions",void 0),v([S({type:String,json:{write:!0}})],ai.prototype,"defaultLabel",void 0),v([S(UM({...jd},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ai.prototype,"defaultSymbol",null),v([S({type:String,value:null,json:{write:!0}})],ai.prototype,"fieldDelimiter",null),v([S({type:fr,readOnly:!0})],ai.prototype,"portal",void 0),v([ge("portal",["styleName"])],ai.prototype,"readPortal",null),v([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ai.prototype,"styleOrigin",void 0),v([ge("styleOrigin",["styleName","styleUrl"])],ai.prototype,"readStyleOrigin",null),v([$e("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ai.prototype,"writeStyleOrigin",null),v([S({type:[Y5],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||xpe(e)).map(r=>Y5.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ai.prototype,"uniqueValueGroups",null),v([S({type:[qf],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ai.prototype,"uniqueValueInfos",null),ai=nf=v([B(Hj)],ai);const Ax=ai,X1={key:"type",base:el,typeMap:{heatmap:qj,simple:hb,"unique-value":Ax,"class-breaks":Cj,"dot-density":Gce,dictionary:zce,"pie-chart":npe},errorContext:"renderer"},Wj={key:"type",base:el,typeMap:{simple:hb,"unique-value":Ax,"class-breaks":Cj,heatmap:qj},errorContext:"renderer"};function swe(t,e){return g1(t,null,e)}const $pe=_d({types:X1});function g1(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new sn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):$pe(t,e,i):null}var X5;let of=X5=class extends de{constructor(t){super(t),this.name=null,this.code=null}clone(){return new X5({name:this.name,code:this.code})}};v([S({type:String,json:{write:!0}})],of.prototype,"name",void 0),v([S({type:[String,Number],json:{write:!0}})],of.prototype,"code",void 0),of=X5=v([B("esri.layers.support.CodedValue")],of);const Tpe=new ft({inherited:"inherited",codedValue:"coded-value",range:"range"});let af=class extends de{constructor(e){super(e),this.name=null,this.type=null}};v([S({type:String,json:{write:!0}})],af.prototype,"name",void 0),v([Fe(Tpe)],af.prototype,"type",void 0),af=v([B("esri.layers.support.Domain")],af);const cb=af;var Q5;let lf=Q5=class extends cb{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(r=>(String(r.code)===i&&(e=r.name),!!e))}return e}clone(){return new Q5({codedValues:se(this.codedValues),name:this.name})}};v([S({type:[of],json:{write:!0}})],lf.prototype,"codedValues",void 0),v([Fe({codedValue:"coded-value"})],lf.prototype,"type",void 0),lf=Q5=v([B("esri.layers.support.CodedValueDomain")],lf);const Jj=lf;var e4;let Tg=e4=class extends cb{constructor(t){super(t),this.type="inherited"}clone(){return new e4}};v([Fe({inherited:"inherited"})],Tg.prototype,"type",void 0),Tg=e4=v([B("esri.layers.support.InheritedDomain")],Tg);const Kj=Tg;var t4;let Tp=t4=class extends cb{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new t4({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};v([S({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],Tp.prototype,"maxValue",void 0),v([S({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],Tp.prototype,"minValue",void 0),v([Fe({range:"range"})],Tp.prototype,"type",void 0),Tp=t4=v([B("esri.layers.support.RangeDomain")],Tp);const Yj=Tp,Zj={key:"type",base:cb,typeMap:{range:Yj,"coded-value":Jj,inherited:Kj}};function kx(t){if(!t||!t.type)return null;switch(t.type){case"range":return Yj.fromJSON(t);case"codedValue":return Jj.fromJSON(t);case"inherited":return Kj.fromJSON(t)}return null}const Ipe=new ft({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var i4;const Mpe=new ft({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Er=i4=class extends de{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?Mpe.fromJSON(i.fieldValueType):null}clone(){return new i4({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};v([S({type:String,json:{write:!0}})],Er.prototype,"alias",void 0),v([S({type:[String,Number],json:{write:{allowNull:!0}}})],Er.prototype,"defaultValue",void 0),v([S()],Er.prototype,"description",void 0),v([ge("description")],Er.prototype,"readDescription",null),v([S({types:Zj,json:{read:{reader:kx},write:!0}})],Er.prototype,"domain",void 0),v([S({type:Boolean,json:{write:!0}})],Er.prototype,"editable",void 0),v([S({type:jt,json:{write:!0}})],Er.prototype,"length",void 0),v([S({type:String,json:{write:!0}})],Er.prototype,"name",void 0),v([S({type:Boolean,json:{write:!0}})],Er.prototype,"nullable",void 0),v([Fe(Ipe)],Er.prototype,"type",void 0),v([S()],Er.prototype,"valueType",void 0),v([ge("valueType",["description"])],Er.prototype,"readValueType",null),v([S({type:Boolean,json:{read:!1}})],Er.prototype,"visible",void 0),Er=i4=v([B("esri.layers.support.Field")],Er);const pb=Er;var r4;let La=r4=class extends de{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new r4({mapLayerId:t,gdbVersion:e})}};v([Fe({mapLayer:"map-layer"})],La.prototype,"type",void 0),v([S({type:jt,json:{write:!0}})],La.prototype,"mapLayerId",void 0),v([S({type:String,json:{write:!0}})],La.prototype,"gdbVersion",void 0),La=r4=v([B("esri.layers.support.source.MapLayerSource")],La);var s4;let Ta=s4=class extends de{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:a}=this,p={workspaceId:t,query:e,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:a};return new s4(p)}};v([Fe({queryTable:"query-table"})],Ta.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Ta.prototype,"workspaceId",void 0),v([S({type:String,json:{write:!0}})],Ta.prototype,"query",void 0),v([S({type:String,json:{write:!0}})],Ta.prototype,"oidFields",void 0),v([S({type:Je,json:{write:!0}})],Ta.prototype,"spatialReference",void 0),v([Fe(cv)],Ta.prototype,"geometryType",void 0),Ta=s4=v([B("esri.layers.support.source.QueryTableDataSource")],Ta);var n4;let Ip=n4=class extends de{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new n4({workspaceId:t,dataSourceName:e})}};v([Fe({raster:"raster"})],Ip.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Ip.prototype,"dataSourceName",void 0),v([S({type:String,json:{write:!0}})],Ip.prototype,"workspaceId",void 0),Ip=n4=v([B("esri.layers.support.source.RasterDataSource")],Ip);var o4;let Nh=o4=class extends de{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new o4({workspaceId:t,gdbVersion:e,dataSourceName:i})}};v([Fe({table:"table"})],Nh.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Nh.prototype,"workspaceId",void 0),v([S({type:String,json:{write:!0}})],Nh.prototype,"gdbVersion",void 0),v([S({type:String,json:{write:!0}})],Nh.prototype,"dataSourceName",void 0),Nh=o4=v([B("esri.layers.support.source.TableDataSource")],Nh);var a4,l4;const Epe=Rr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ps=a4=class extends de{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return EI()(t,e,i)}castLeftTableSource(t){return Do(u4(),t)}readRightTableSource(t,e,i){return EI()(t,e,i)}castRightTableSource(t){return Do(u4(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:a}=this,p={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:a};return new a4(p)}};v([Fe({joinTable:"join-table"})],ps.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],ps.prototype,"leftTableKey",void 0),v([S({type:String,json:{write:!0}})],ps.prototype,"rightTableKey",void 0),v([S({json:{write:!0}})],ps.prototype,"leftTableSource",void 0),v([ge("leftTableSource")],ps.prototype,"readLeftTableSource",null),v([It("leftTableSource")],ps.prototype,"castLeftTableSource",null),v([S({json:{write:!0}})],ps.prototype,"rightTableSource",void 0),v([ge("rightTableSource")],ps.prototype,"readRightTableSource",null),v([It("rightTableSource")],ps.prototype,"castRightTableSource",null),v([Fe(Epe)],ps.prototype,"joinType",void 0),ps=a4=v([B("esri.layers.support.source.JoinTableDataSource")],ps);let Jw=null;function EI(){return Jw||(Jw=_d({types:u4()})),Jw}let Kw=null;function u4(){return Kw||(Kw={key:"type",base:null,typeMap:{"data-layer":qr,"map-layer":La}}),Kw}const Ape={key:"type",base:null,typeMap:{"join-table":ps,"query-table":Ta,raster:Ip,table:Nh}};let qr=l4=class extends de{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new l4({fields:t,dataSource:e})}};v([Fe({dataLayer:"data-layer"})],qr.prototype,"type",void 0),v([S({type:[pb],json:{write:!0}})],qr.prototype,"fields",void 0),v([S({types:Ape,json:{write:!0}})],qr.prototype,"dataSource",void 0),qr=l4=v([B("esri.layers.support.source.DataLayerSource")],qr),qr.from=ri(qr);function Xj(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let a=0;a<r.length;a++)e[i][a]=Xj(r[a])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}var tu;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(tu||(tu={}));const AI=4294967296,kpe=new TextDecoder("utf-8"),Ope=le("safari")||le("ios")?6:le("ff")?12:32;let h4=class Ig{constructor(e,i,r=0,a=e?e.byteLength:0){this._tag=0,this._dataType=tu.unknown,this._init(e,i,r,a)}_init(e,i,r,a){this._data=e,this._dataView=i,this._pos=r,this._end=a}asUnsafe(){return this}clone(){return new Ig(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*AI;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*AI;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,a){const p=this.getMessage(),y=e(p,i,r,a);return p.release(),y}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=Ig.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){Ig.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case tu.varint:this._decodeVarint();break;case tu.fixed64:this._skip(8);break;case tu.delimited:this._skip(this._getLength());break;case tu.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,a=0;if(this._end-i>=10)do{if(a=e[i++],r|=127&a,(128&a)==0||(a=e[i++],r|=(127&a)<<7,(128&a)==0)||(a=e[i++],r|=(127&a)<<14,(128&a)==0)||(a=e[i++],r|=(127&a)<<21,(128&a)==0)||(a=e[i++],r+=268435456*(127&a),(128&a)==0)||(a=e[i++],r+=34359738368*(127&a),(128&a)==0)||(a=e[i++],r+=4398046511104*(127&a),(128&a)==0)||(a=e[i++],r+=562949953421312*(127&a),(128&a)==0)||(a=e[i++],r+=72057594037927940*(127&a),(128&a)==0)||(a=e[i++],r+=9223372036854776e3*(127&a),(128&a)==0))break;throw new Error("Varint too long!")}while(0);else{let p=1;for(;i!==this._end&&(a=e[i],(128&a)!=0);)++i,r+=(127&a)*p,p*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=a*p}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i=this._pos,r=0,a=0;const p=1&e[i];if(this._end-i>=10)do{if(a=e[i++],r|=127&a,(128&a)==0||(a=e[i++],r|=(127&a)<<7,(128&a)==0)||(a=e[i++],r|=(127&a)<<14,(128&a)==0)||(a=e[i++],r|=(127&a)<<21,(128&a)==0)||(a=e[i++],r+=268435456*(127&a),(128&a)==0)||(a=e[i++],r+=34359738368*(127&a),(128&a)==0)||(a=e[i++],r+=4398046511104*(127&a),(128&a)==0)||(a=e[i++],r+=562949953421312*(127&a),(128&a)==0)||(a=e[i++],r+=72057594037927940*(127&a),(128&a)==0)||(a=e[i++],r+=9223372036854776e3*(127&a),(128&a)==0))break;throw new Error("Varint too long!")}while(0);else{let y=1;for(;i!==this._end&&(a=e[i],(128&a)!=0);)++i,r+=(127&a)*y,y*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=a*y}return this._pos=i,p?-(r+1)/2:r/2}_getLength(){if(this._dataType!==tu.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>Ope){const y=e.subarray(i,r);return kpe.decode(y)}let a="",p="";for(let y=i;y<r;++y){const m=e[y];128&m?p+="%"+m.toString(16):(a+=decodeURIComponent(p)+String.fromCharCode(m),p="")}return p.length&&(a+=decodeURIComponent(p)),a}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}};h4.pool=new Cu(h4,void 0,t=>{t._data=null,t._dataView=null});let to=class Mg{constructor(e=[],i=[],r=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=r}static fromRect(e){const[i,r,a,p]=e,y=a-i,m=p-r;return new Mg([5],[i,r,y,0,0,m,-y,0,0,-m])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const a=this.lengths[r];for(let p=0;p<a;p++)e(this.coords[2*(p+i)],this.coords[2*(p+i)+1]);i+=a}}clone(e){return e?(e.set(this.coords),new Mg(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new Mg(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},Ou=class Qj{constructor(e=null,i={},r,a){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=a,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new Qj(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function Cpe(t){return!(t.geometry==null||!t.geometry.coords||!t.geometry.coords.length)}let owe=class extends Ou{},eD=class tD{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new tD;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const iD=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let lwe=class{constructor(e){this._options=e,this.geometryTypes=iD,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new eD}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||Ci(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=od(this._options.sourceSpatialReference)/od(e.spatialReference);if(i!==1)for(const r of e.features){if(!Cpe(r))continue;const a=r.geometry.coords;for(let p=2;p<a.length;p+=3)a[p]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new Ou}createSpatialReference(){return{wkid:0}}createGeometry(){return new to}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new to}};const kI=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],OI=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],CI=["upperLeft","lowerLeft"];function PI(t){return t>=kI.length?null:kI[t]}function Ppe(t){return t>=OI.length?null:OI[t]}function NI(t){return t>=CI.length?null:CI[t]}function RI(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Npe(t,e,i){const a=t.asUnsafe(),p=e.createPointGeometry(i);for(;a.next();)switch(a.tag()){case 3:{const y=a.getUInt32(),m=a.pos()+y;let _=0;for(;a.pos()<m;)e.addCoordinatePoint(p,a.getSInt64(),_++);break}default:a.skip()}return p}function Rpe(t,e,i){const p=t.asUnsafe(),y=e.createGeometry(i),m=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;p.next();)switch(p.tag()){case 2:{const _=p.getUInt32(),x=p.pos()+_;let M=0;for(;p.pos()<x;)e.addLength(y,p.getUInt32(),M++);break}case 3:{const _=p.getUInt32(),x=p.pos()+_;let M=0;for(e.allocateCoordinates(y);p.pos()<x;)e.addCoordinate(y,p.getSInt64(),M),M++,M===m&&(M=0);break}default:p.skip()}return y}function Lpe(t){const a=t.asUnsafe(),p=new to;let y="esriGeometryPoint";for(;a.next();)switch(a.tag()){case 2:{const m=a.getUInt32(),_=a.pos()+m;for(;a.pos()<_;)p.lengths.push(a.getUInt32());break}case 3:{const m=a.getUInt32(),_=a.pos()+m;for(;a.pos()<_;)p.coords.push(a.getSInt64());break}case 1:y=iD[a.getEnum()];break;default:a.skip()}return{queryGeometry:p,queryGeometryType:y}}function jpe(t){const M=t.asUnsafe();for(;M.next();)switch(M.tag()){case 1:return M.getString();case 2:return M.getFloat();case 3:return M.getDouble();case 4:return M.getSInt32();case 5:return M.getUInt32();case 6:return M.getInt64();case 7:return M.getUInt64();case 8:return M.getSInt64();case 9:return M.getBool();default:return M.skip(),null}return null}function Dpe(t){const m=t.asUnsafe(),_={type:PI(0)};for(;m.next();)switch(m.tag()){case 1:_.name=m.getString();break;case 2:_.type=PI(m.getEnum());break;case 3:_.alias=m.getString();break;case 4:_.sqlType=Ppe(m.getEnum());break;case 5:m.skip();break;case 6:_.defaultValue=m.getString();break;default:m.skip()}return _}function Fpe(t){const r={},a=t.asUnsafe();for(;a.next();)switch(a.tag()){case 1:r.name=a.getString();break;case 2:r.isSystemMaintained=a.getBool();break;default:a.skip()}return r}function zpe(t,e,i,r){const m=e.createFeature(i);let _=0;for(;t.next();)switch(t.tag()){case 1:{const x=r[_++].name;m.attributes[x]=t.processMessage(jpe);break}case 2:m.geometry=t.processMessageWithArgs(Rpe,e,i);break;case 4:m.centroid=t.processMessageWithArgs(Npe,e,i);break;default:t.skip()}return m}function Vpe(t){const p=[1,1,1,1],y=t.asUnsafe();for(;y.next();)switch(y.tag()){case 1:p[0]=y.getDouble();break;case 2:p[1]=y.getDouble();break;case 4:p[2]=y.getDouble();break;case 3:p[3]=y.getDouble();break;default:y.skip()}return p}function Gpe(t){const p=[0,0,0,0],y=t.asUnsafe();for(;y.next();)switch(y.tag()){case 1:p[0]=y.getDouble();break;case 2:p[1]=y.getDouble();break;case 4:p[2]=y.getDouble();break;case 3:p[3]=y.getDouble();break;default:y.skip()}return p}function qpe(t){const a={originPosition:NI(0)},p=t.asUnsafe();for(;p.next();)switch(p.tag()){case 1:a.originPosition=NI(p.getEnum());break;case 2:a.scale=p.processMessage(Vpe);break;case 3:a.translate=p.processMessage(Gpe);break;default:p.skip()}return a}function Upe(t){const a={},p=t.asUnsafe();for(;p.next();)switch(p.tag()){case 1:a.shapeAreaFieldName=p.getString();break;case 2:a.shapeLengthFieldName=p.getString();break;case 3:a.units=p.getString();break;default:p.skip()}return a}function Bpe(t,e){const m=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:m.wkid=t.getUInt32();break;case 5:m.wkt=t.getString();break;case 2:m.latestWkid=t.getUInt32();break;case 3:m.vcsWkid=t.getUInt32();break;case 4:m.latestVcsWkid=t.getUInt32();break;default:t.skip()}return m}function Hpe(t,e){const D=e.createFeatureResult(),z=t.asUnsafe();D.geometryType=RI(e,0);let W=!1;for(;z.next();)switch(z.tag()){case 1:D.objectIdFieldName=z.getString();break;case 3:D.globalIdFieldName=z.getString();break;case 4:D.geohashFieldName=z.getString();break;case 5:D.geometryProperties=z.processMessage(Upe);break;case 7:D.geometryType=RI(e,z.getEnum());break;case 8:D.spatialReference=z.processMessageWithArgs(Bpe,e);break;case 10:D.hasZ=z.getBool();break;case 11:D.hasM=z.getBool();break;case 12:D.transform=z.processMessage(qpe);break;case 9:{const Y=z.getBool();D.exceededTransferLimit=Y;break}case 13:e.addField(D,z.processMessage(Dpe));break;case 15:W||(e.prepareFeatures(D),W=!0),e.addFeature(D,z.processMessageWithArgs(zpe,e,D,D.fields));break;case 2:D.uniqueIdField=z.processMessage(Fpe);break;default:z.skip()}return e.finishFeatureResult(D),D}function Wpe(t,e){const a={};let p=null;for(;t.next();)switch(t.tag()){case 4:p=t.processMessageWithArgs(Lpe);break;case 1:a.featureResult=t.processMessageWithArgs(Hpe,e);break;default:t.skip()}return p!=null&&a.featureResult&&e.addQueryGeometry(a,p),a}function Jpe(t,e){try{const r=new h4(new Uint8Array(t),new DataView(t)),a={};for(;r.next();)r.tag()===2?a.queryResult=r.processMessageWithArgs(Wpe,e):r.skip();return a}catch(i){throw new ie("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Kpe(t,e){const i=Jpe(t,e),r=i.queryResult.featureResult,a=i.queryResult.queryGeometry,p=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const y=r.objectIdFieldName;for(const m of r.features)m.attributes&&(m.objectId=m.attributes[y])}return r&&(r.queryGeometry=a,r.queryGeometryType=p),r}function c4(t,e,i){if(!i||!i.features||!i.hasZ)return;const r=$6(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const a of i.features)r(a.geometry)}const LI="Layer does not support extent calculation.";function Ype(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function Zpe(t,e){const i=t.geometry,r=t.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const a=r;let p,y,m;if(i!=null&&(y=i.spatialReference,m=i.spatialReference.wkid||JSON.stringify(i.spatialReference),a.geometryType=Mc(i),a.geometry=Ype(i,t.compactGeometryEnabled),a.inSR=m),r.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(a.objectIds=r.objectIds.join(",")),r.orderByFields&&(a.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete a.outFields:r.outFields.includes("*")?a.outFields="*":a.outFields=r.outFields.join(","),r.outSR?(a.outSR=r.outSR.wkid||JSON.stringify(r.outSR),p=t.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(a.outSR=a.inSR,p=y),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(a.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(a.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(a.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&y!=null&&t.quantizationParameters!=null&&t.quantizationParameters.extent!=null&&y.equals(t.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(a.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(a.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(a.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const _=r.timeExtent,{start:x,end:M}=_;x==null&&M==null||(a.time=x===M?x:`${x??"null"},${M??"null"}`),delete r.timeExtent}return t.defaultSpatialReferenceEnabled&&y!=null&&p!=null&&y.equals(p)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function Xpe(t,e,i,r){const a=e.timeExtent!=null&&e.timeExtent.isEmpty?{data:{features:[]}}:await Q1(t,e,"json",r);return c4(e,i,a.data),a}async function Qpe(t,e,i,r){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const a=await ede(t,e,r),p=a;return p.data=Kpe(a.data,i),p}function ede(t,e,i){return Q1(t,e,"pbf",i)}function tde(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Q1(t,e,"json",i,{returnIdsOnly:!0})}function ide(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Q1(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function rde(t,e,i){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await Q1(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),a=r.data;if(a.hasOwnProperty("extent"))return r;if(a.features)throw new Error(LI);if(a.hasOwnProperty("count"))throw new Error(LI);return r}async function Q1(t,e,i,r={},a={}){const p=typeof t=="string"?or(t):t,y=e.geometry?[e.geometry]:[];r.responseType=i==="pbf"?"array-buffer":"json";const m=await tx(y,null,r),_=m&&m[0];_!=null&&((e=e.clone()).geometry=_);const x=Xj({...p.query,f:i,...a,...Zpe(e,a)});return ot(Ua(p.path,sde(e,a)?"query3d":"query"),{...r,query:{...x,...r.query}})}function sde(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}var p4;const jI=new ft({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Nn=p4=class extends de{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=se(t))}clone(){return new p4({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:se(this.statisticParameters)})}};v([S({type:Number,json:{write:!0}})],Nn.prototype,"maxPointCount",void 0),v([S({type:Number,json:{write:!0}})],Nn.prototype,"maxRecordCount",void 0),v([S({type:Number,json:{write:!0}})],Nn.prototype,"maxVertexCount",void 0),v([S({type:String,json:{write:!0}})],Nn.prototype,"onStatisticField",void 0),v([S({type:String,json:{write:!0}})],Nn.prototype,"outStatisticFieldName",void 0),v([S({type:String,json:{read:{source:"statisticType",reader:jI.read},write:{target:"statisticType",writer:jI.write}}})],Nn.prototype,"statisticType",void 0),v([S({type:Object})],Nn.prototype,"statisticParameters",void 0),v([$e("statisticParameters")],Nn.prototype,"writeStatisticParameters",null),Nn=p4=v([B("esri.rest.support.StatisticDefinition")],Nn);const nde=Nn;var td;const ode=new ft({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),ade=new ft({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let qe=td=class extends de{static from(t){return hc(td,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const r in t){const a=t[r];Array.isArray(a)?i[r]=a.map(p=>p instanceof Date?p.getTime():p):a instanceof Date?i[r]=a.getTime():i[r]=a}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new td(se({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};qe.MAX_MAX_RECORD_COUNT_FACTOR=5,v([S({json:{write:!0}})],qe.prototype,"aggregateIds",void 0),v([S({type:Boolean,json:{write:!0}})],qe.prototype,"cacheHint",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"compactGeometryEnabled",void 0),v([S({json:{write:!0}})],qe.prototype,"datumTransformation",void 0),v([It("datumTransformation")],qe.prototype,"castDatumTransformation",null),v([S({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"defaultSpatialReferenceEnabled",void 0),v([S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],qe.prototype,"distance",void 0),v([S({type:qr,json:{write:!0}})],qe.prototype,"dynamicDataSource",void 0),v([S({type:String,json:{write:!0}})],qe.prototype,"formatOf3DObjects",void 0),v([S({type:[xL],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],qe.prototype,"fullText",void 0),v([S({type:String,json:{write:!0}})],qe.prototype,"gdbVersion",void 0),v([S({types:Nu,json:{read:Ba,write:!0}})],qe.prototype,"geometry",void 0),v([S({type:Number,json:{write:!0}})],qe.prototype,"geometryPrecision",void 0),v([S({type:[String],json:{write:!0}})],qe.prototype,"groupByFieldsForStatistics",void 0),v([S({type:String,json:{write:!0}})],qe.prototype,"having",void 0),v([S({type:Date})],qe.prototype,"historicMoment",void 0),v([$e("historicMoment")],qe.prototype,"writeHistoricMoment",null),v([S({type:Number,json:{write:!0}})],qe.prototype,"maxAllowableOffset",void 0),v([S({type:Number,cast:t=>t<1?1:t>td.MAX_MAX_RECORD_COUNT_FACTOR?td.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],qe.prototype,"maxRecordCountFactor",void 0),v([S({type:["xyFootprint"],json:{write:!0}})],qe.prototype,"multipatchOption",void 0),v([S({type:Number,json:{read:{source:"resultRecordCount"}}})],qe.prototype,"num",void 0),v([S({json:{write:!0}})],qe.prototype,"objectIds",void 0),v([S({type:[String],json:{write:!0}})],qe.prototype,"orderByFields",void 0),v([S({type:[String],json:{write:!0}})],qe.prototype,"outFields",void 0),v([S({type:Je,json:{name:"outSR",write:!0}})],qe.prototype,"outSpatialReference",void 0),v([S({type:[nde],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],qe.prototype,"outStatistics",void 0),v([S({json:{write:!0}})],qe.prototype,"parameterValues",void 0),v([$e("parameterValues")],qe.prototype,"writeParameterValues",null),v([S({type:Ue,json:{write:!0}})],qe.prototype,"pixelSize",void 0),v([S({type:jN,json:{write:!0}})],qe.prototype,"quantizationParameters",void 0),v([S({type:[Object],json:{write:!0}})],qe.prototype,"rangeValues",void 0),v([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],qe.prototype,"relationParameter",void 0),v([S({type:String,json:{write:!0}})],qe.prototype,"resultType",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"returnCentroid",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"returnDistinctValues",void 0),v([S({type:Boolean,json:{default:!0,write:!0}})],qe.prototype,"returnExceededLimitFeatures",void 0),v([S({type:Boolean,json:{write:!0}})],qe.prototype,"returnGeometry",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"returnQueryGeometry",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"returnM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],qe.prototype,"returnZ",void 0),v([S({type:Je,json:{write:!0}})],qe.prototype,"sourceSpatialReference",void 0),v([Fe(ode,{ignoreUnknown:!1,name:"spatialRel"})],qe.prototype,"spatialRelationship",void 0),v([S({type:Number,json:{read:{source:"resultOffset"}}})],qe.prototype,"start",void 0),v([$e("start"),$e("num")],qe.prototype,"writeStart",null),v([S({type:String,json:{write:!0}})],qe.prototype,"sqlFormat",void 0),v([S({type:String,json:{write:!0}})],qe.prototype,"text",void 0),v([S({type:ln,json:{write:!0}})],qe.prototype,"timeExtent",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],qe.prototype,"timeReferenceUnknownClient",void 0),v([Fe(ade,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],qe.prototype,"units",void 0),v([S({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],qe.prototype,"where",void 0),v([$e("where")],qe.prototype,"writeWhere",null),qe=td=v([B("esri.rest.support.Query")],qe);const Ms=qe;async function lde(t,e,i){const r=un(t);return ide(r,Ms.from(e),{...i}).then(a=>a.data.count)}async function ude(t,e,i){const r=un(t);return rde(r,Ms.from(e),{...i}).then(a=>({count:a.data.count,extent:vt.fromJSON(a.data.extent)}))}async function hde(t,e,i){const r=un(t);return tde(r,Ms.from(e),{...i}).then(a=>a.data.objectIds)}var d4;const f4=new ft({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let er=d4=class extends de{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const i=Je.fromJSON(e.spatialReference),r=[];for(let a=0;a<t.length;a++){const p=t[a],y=Nr.fromJSON(p),m=p.geometry&&p.geometry.spatialReference;y.geometry==null||m||(y.geometry.spatialReference=i);const _=p.aggregateGeometries,x=y.aggregateGeometries;if(_&&x!=null)for(const M in x){const A=x[M],C=_[M],N=C==null?void 0:C.spatialReference;A==null||N||(A.spatialReference=i)}r.push(y)}return r}writeGeometryType(t,e,i,r){if(t)return void f4.write(t,e,i,r);const{features:a}=this;if(a){for(const p of a)if(p&&p.geometry!=null)return void f4.write(p.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Ba(t);return r&&!i&&e.spatialReference&&(r.spatialReference=Je.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new d4(this.cloneProperties())}cloneProperties(){return se({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const a=t&&t[i];r.geometry=a&&a.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,a]}=t,p=x=>Math.round((x-r)/e),y=x=>Math.round((a-x)/i),m=this.features,_=this._getQuantizationFunction(this.geometryType,p,y);for(let x=0,M=m.length;x<M;x++)_!=null&&_(m[x].geometry)||(m.splice(x,1),x--,M--);return this.transform=t,this}unquantize(){var C,N;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,a],scale:[p,y]}=i,m=j=>j*p+r,_=j=>a-j*y;let x=null,M=null;if(this.hasZ&&((C=i==null?void 0:i.scale)==null?void 0:C[2])!=null){const{translate:[,,j],scale:[,,D]}=i;x=z=>z*D+j}if(this.hasM&&((N=i==null?void 0:i.scale)==null?void 0:N[3])!=null){const{translate:[,,,j],scale:[,,,D]}=i;M=z=>z==null?z:z*D+j}const A=this._getHydrationFunction(t,m,_,x,M);for(const{geometry:j}of e)j!=null&&A&&A(j);return this.transform=null,this}_quantizePoints(t,e,i){let r,a;const p=[];for(let y=0,m=t.length;y<m;y++){const _=t[y];if(y>0){const x=e(_[0]),M=i(_[1]);x===r&&M===a||(p.push([x-r,M-a]),r=x,a=M)}else r=e(_[0]),a=i(_[1]),p.push([r,a])}return p.length>0?p:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const a=ic(r)?r.rings:r.paths,p=[];for(let y=0,m=a.length;y<m;y++){const _=a[y],x=this._quantizePoints(_,e,i);x&&p.push(x)}return p.length>0?(ic(r)?r.rings=p:r.paths=p,r):null}:t==="multipoint"?r=>{const a=this._quantizePoints(r.points,e,i);return a&&a.length>0?(r.points=a,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,a){return t==="point"?p=>{p.x=e(p.x),p.y=i(p.y),r&&(p.z=r(p.z))}:t==="polyline"||t==="polygon"?p=>{const y=ic(p)?p.rings:p.paths;let m,_;for(let x=0,M=y.length;x<M;x++){const A=y[x];for(let C=0,N=A.length;C<N;C++){const j=A[C];C>0?(m+=j[0],_+=j[1]):(m=j[0],_=j[1]),j[0]=e(m),j[1]=i(_)}}if(r&&a)for(let x=0,M=y.length;x<M;x++){const A=y[x];for(let C=0,N=A.length;C<N;C++){const j=A[C];j[2]=r(j[2]),j[3]=a(j[3])}}else if(r)for(let x=0,M=y.length;x<M;x++){const A=y[x];for(let C=0,N=A.length;C<N;C++){const j=A[C];j[2]=r(j[2])}}else if(a)for(let x=0,M=y.length;x<M;x++){const A=y[x];for(let C=0,N=A.length;C<N;C++){const j=A[C];j[2]=a(j[2])}}}:t==="extent"?p=>{p.xmin=e(p.xmin),p.ymin=i(p.ymin),p.xmax=e(p.xmax),p.ymax=i(p.ymax),r&&p.zmax!=null&&p.zmin!=null&&(p.zmax=r(p.zmax),p.zmin=r(p.zmin)),a&&p.mmax!=null&&p.mmin!=null&&(p.mmax=a(p.mmax),p.mmin=a(p.mmin))}:t==="multipoint"?p=>{const y=p.points;let m,_;for(let x=0,M=y.length;x<M;x++){const A=y[x];x>0?(m+=A[0],_+=A[1]):(m=A[0],_=A[1]),A[0]=e(m),A[1]=i(_)}if(r&&a)for(let x=0,M=y.length;x<M;x++){const A=y[x];A[2]=r(A[2]),A[3]=a(A[3])}else if(r)for(let x=0,M=y.length;x<M;x++){const A=y[x];A[2]=r(A[2])}else if(a)for(let x=0,M=y.length;x<M;x++){const A=y[x];A[2]=a(A[2])}}:null}};v([S({type:String,json:{write:!0}})],er.prototype,"displayFieldName",void 0),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],er.prototype,"exceededTransferLimit",void 0),v([S({type:[Nr],json:{write:!0}})],er.prototype,"features",void 0),v([ge("features")],er.prototype,"readFeatures",null),v([S({type:[pb],json:{write:!0}})],er.prototype,"fields",void 0),v([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:f4.read}}})],er.prototype,"geometryType",void 0),v([$e("geometryType")],er.prototype,"writeGeometryType",null),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],er.prototype,"hasM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],er.prototype,"hasZ",void 0),v([S({types:Nu,json:{write:!0}})],er.prototype,"queryGeometry",void 0),v([ge("queryGeometry")],er.prototype,"readQueryGeometry",null),v([S({type:Je,json:{write:!0}})],er.prototype,"spatialReference",void 0),v([$e("spatialReference")],er.prototype,"writeSpatialReference",null),v([S({json:{write:!0}})],er.prototype,"transform",void 0),er=d4=v([B("esri.rest.support.FeatureSet")],er),er.prototype.toJSON.isDefaultToJSON=!0;const db=er;async function hwe(t,e,i){const r=await rD(t,e,i);return db.fromJSON(r)}async function rD(t,e,i){const r=un(t),a={...i},p=Ms.from(e),{data:y}=await Xpe(r,p,p.sourceSpatialReference,a);return y}function yr(t,e){return t?e?4:3:e?3:2}const Fd=me.getLogger("esri.layers.graphics.featureConversionUtils"),sD={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},cde=(t,e,i,r,a,p)=>{t[i]=a,t[i+1]=p},DI=(t,e,i,r,a,p)=>{t[i]=a,t[i+1]=p,t[i+2]=e[r+2]},pde=(t,e,i,r,a,p)=>{t[i]=a,t[i+1]=p,t[i+2]=e[r+3]},dde=(t,e,i,r,a,p)=>{t[i]=a,t[i+1]=p,t[i+2]=e[r+2],t[i+3]=e[r+3]};function Ox(t,e,i,r){if(t){if(i)return e&&r?dde:DI;if(e&&r)return pde}else if(e&&r)return DI;return cde}function Yw({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function Zw({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function Xw({scale:t,translate:e},i,r){return i*t[r]+e[r]}function cwe(t,e,i){return t?e?i?Nx(t):Cx(t):i?Px(t):fb(t):null}function fb(t){const e=t.coords;return{x:e[0],y:e[1]}}function nD(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function Cx(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function fde(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function Px(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function yde(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function Nx(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function mde(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function gde(t,e,i,r){let a=fb;i&&r?a=Nx:i?a=Cx:r&&(a=Px);for(const p of e){const{geometry:y,attributes:m}=p,_=y!=null?a(y):null;t.push({attributes:m,geometry:_})}return t}function Rx(t,e){return t&&e?mde:t?fde:e?yde:nD}function oD(t,e,i,r,a){const p=Rx(i,r);for(const{geometry:y,attributes:m}of e){const _=y!=null?p(new to,y):null;t.push(new Ou(_,m,null,a?m[a]:void 0))}return t}function pwe(t,e,i=Rx(e.z!=null,e.m!=null)){return i(t,e)}function vde(t,e,i,r){for(const{geometry:a,attributes:p}of e)t.push({attributes:p,geometry:a!=null?aD(a,i,r):null});return t}function aD(t,e,i){if(t==null)return null;const r=yr(e,i),a=[];for(let p=0;p<t.coords.length;p+=r){const y=[];for(let m=0;m<r;m++)y.push(t.coords[p+m]);a.push(y)}return e?i?{points:a,hasZ:e,hasM:i}:{points:a,hasZ:e}:i?{points:a,hasM:i}:{points:a}}function lD(t,e,i,r,a){const p=yr(i,r);for(const{geometry:y,attributes:m}of e){const _=y!=null?uD(new to,y,p):null;t.push(new Ou(_,m,null,a?m[a]:void 0))}return t}function uD(t,e,i=yr(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let a=0;for(const p of e.points)for(let y=0;y<i;y++)r[a++]=p[y];return t}function bde(t,e,i,r){for(const{geometry:a,attributes:p}of e)t.push({attributes:p,geometry:a!=null?hD(a,i,r):null});return t}function hD(t,e,i){if(!t)return null;const r=yr(e,i),{coords:a,lengths:p}=t,y=[];let m=0;for(const _ of p){const x=[];for(let M=0;M<_;M++){const A=[];for(let C=0;C<r;C++)A.push(a[m++]);x.push(A)}y.push(x)}return e?i?{paths:y,hasZ:e,hasM:i}:{paths:y,hasZ:e}:i?{paths:y,hasM:i}:{paths:y}}function cD(t,e,i,r,a){const p=yr(i,r);for(const{geometry:y,attributes:m}of e){const _=y!=null?pD(new to,y,p):null;t.push(new Ou(_,m,null,a?m[a]:void 0))}return t}function pD(t,e,i=yr(e.hasZ,e.hasM)){const{lengths:r,coords:a}=t;let p=0;for(const y of e.paths){for(const m of y)for(let _=0;_<i;_++)a[p++]=m[_];r.push(y.length)}return t}function wde(t,e,i,r){for(const{geometry:a,attributes:p,centroid:y}of e){const m=a!=null?dD(a,i,r):null;if(y!=null){const _=fb(y);t.push({attributes:p,centroid:_,geometry:m})}else t.push({attributes:p,geometry:m})}return t}function dD(t,e,i){if(!t)return null;const r=yr(e,i),{coords:a,lengths:p}=t,y=[];let m=0;for(const _ of p){const x=[];for(let M=0;M<_;M++){const A=[];for(let C=0;C<r;C++)A.push(a[m++]);x.push(A)}y.push(x)}return e?i?{rings:y,hasZ:e,hasM:i}:{rings:y,hasZ:e}:i?{rings:y,hasM:i}:{rings:y}}function fD(t,e,i,r,a){for(const{geometry:p,centroid:y,attributes:m}of e){const _=p!=null?yD(new to,p,i,r):null,x=a?m[a]:void 0;y!=null?t.push(new Ou(_,m,nD(new to,y),x)):t.push(new Ou(_,m,null,x))}return t}function yD(t,e,i=e.hasZ,r=e.hasM){return _de(t,e.rings,i,r)}function _de(t,e,i,r){const a=yr(i,r),{lengths:p,coords:y}=t;let m=0;Ga(t);for(const _ of e){for(const x of _)for(let M=0;M<a;M++)y[m++]=x[M];p.push(_.length)}return t}const id=[],Uf=[];function dwe(t,e,i,r,a){id[0]=t;const[p]=mD(Uf,id,e,i,r,a);return io(id),io(Uf),p}function mD(t,e,i,r,a,p){if(io(t),!i){for(const y of e){const m=p?y.attributes[p]:void 0;t.push(new Ou(null,y.attributes,null,m))}return t}switch(i){case"esriGeometryPoint":return oD(t,e,r,a,p);case"esriGeometryMultipoint":return lD(t,e,r,a,p);case"esriGeometryPolyline":return cD(t,e,r,a,p);case"esriGeometryPolygon":return fD(t,e,r,a,p);default:Fd.error("convertToFeatureSet:unknown-geometry",new ie(`Unable to parse unknown geometry type '${i}'`)),io(t)}return t}function fwe(t,e,i,r,a,p){const y=t.length;switch(i){case"esriGeometryPoint":oD(t,e,r,a,p);break;case"esriGeometryMultipoint":lD(t,e,r,a,p);break;case"esriGeometryPolyline":cD(t,e,r,a,p);break;case"esriGeometryPolygon":fD(t,e,r,a,p);break;default:Fd.error("convertToFeatureSet:unknown-geometry",new ie(`Unable to parse unknown geometry type '${i}'`))}for(let m=0;m<e.length;m++)t[m+y].geometryType=i,t[m+y].insertAfter=e[m].insertAfter,t[m+y].groupId=e[m].groupId;return t}function ywe(t,e,i,r){Uf[0]=t,vD(id,Uf,e,i,r);const a=id[0];return io(id),io(Uf),a}function mwe(t,e,i){if(t==null)return null;const r=new to;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),BS(t)?Rx(e??t.z!=null,i??t.m!=null)(r,t):ic(t)?yD(r,t,e,i):HS(t)?pD(r,t,yr(e,i)):US(t)?uD(r,t,yr(e,i)):void Fd.error("convertFromGeometry:unknown-geometry",new ie(`Unable to parse unknown geometry type '${t}'`))}function gD(t,e,i,r){const a=t&&("coords"in t?t:t.geometry);if(a==null)return null;switch(e){case"esriGeometryPoint":{let p=fb;return i&&r?p=Nx:i?p=Cx:r&&(p=Px),p(a)}case"esriGeometryMultipoint":return aD(a,i,r);case"esriGeometryPolyline":return hD(a,i,r);case"esriGeometryPolygon":return dD(a,i,r);default:return Fd.error("convertToGeometry:unknown-geometry",new ie(`Unable to parse unknown geometry type '${e}'`)),null}}function Sde(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function vD(t,e,i,r,a){if(io(t),i==null)return Sde(t,e);switch(i){case"esriGeometryPoint":return gde(t,e,r,a);case"esriGeometryMultipoint":return vde(t,e,r,a);case"esriGeometryPolyline":return bde(t,e,r,a);case"esriGeometryPolygon":return wde(t,e,r,a);default:Fd.error("convertToFeatureSet:unknown-geometry",new ie(`Unable to parse unknown geometry type '${i}'`))}return t}function gwe(t){const{objectIdFieldName:e,spatialReference:i,transform:r,fields:a,hasM:p,hasZ:y,features:m,geometryType:_,exceededTransferLimit:x,uniqueIdField:M,queryGeometry:A,queryGeometryType:C}=t,N={features:vD([],m,_,y,p),fields:a,geometryType:_,objectIdFieldName:e,spatialReference:i,uniqueIdField:M,queryGeometry:gD(A,C,!1,!1)};return r&&(N.transform=r),x&&(N.exceededTransferLimit=x),p&&(N.hasM=p),y&&(N.hasZ=y),N}function vwe(t,e){const i=new eD,{hasM:r,hasZ:a,features:p,objectIdFieldName:y,spatialReference:m,geometryType:_,exceededTransferLimit:x,transform:M,fields:A}=t;return A&&(i.fields=A),i.geometryType=_??null,i.objectIdFieldName=y??e??null,i.spatialReference=m??null,i.objectIdFieldName?(p&&mD(i.features,p,_,a,r,i.objectIdFieldName),x&&(i.exceededTransferLimit=x),r&&(i.hasM=r),a&&(i.hasZ=a),M&&(i.transform=M),i):(Fd.error(new ie("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function bwe(t){const{transform:e,features:i,hasM:r,hasZ:a}=t;if(!e)return t;for(const p of i)p.geometry!=null&&m4(p.geometry,p.geometry,r,a,e),p.centroid!=null&&m4(p.centroid,p.centroid,r,a,e);return t.transform=null,t}function wwe(t,e){const{geometryType:i,features:r,hasM:a,hasZ:p}=e;if(!t)return e;for(let y=0;y<r.length;y++){const m=r[y],_=m.weakClone();_.geometry=new to,FI(_.geometry,m.geometry,a,p,i,t),m.centroid&&(_.centroid=new to,FI(_.centroid,m.centroid,a,p,"esriGeometryPoint",t)),r[y]=_}return e.transform=t,e}function FI(t,e,i,r,a,p,y=i,m=r){if(Ga(t),e==null||!e.coords.length)return null;const _=sD[a],{coords:x,lengths:M}=e,A=yr(i,r),C=yr(i&&y,r&&m),N=Ox(i,r,y,m);if(!M.length)return N(t.coords,x,0,0,Yw(p,x[0]),Zw(p,x[1])),Ga(t,A,0),t;let j,D,z,W,Y=0,K=0,ee=K;for(const ne of M){if(ne<_)continue;let oe=0;K=ee,z=j=Yw(p,x[Y]),W=D=Zw(p,x[Y+1]),N(t.coords,x,K,Y,z,W),oe++,Y+=A,K+=C;for(let ue=1;ue<ne;ue++,Y+=A)z=Yw(p,x[Y]),W=Zw(p,x[Y+1]),z===j&&W===D||(N(t.coords,x,K,Y,z-j,W-D),K+=C,oe++,j=z,D=W);oe>=_&&(t.lengths.push(oe),ee=K)}return io(t.coords,ee),t.coords.length?t:null}function _we(t,e,i,r,a,p,y=i,m=r){if(Ga(t),!e||!e.coords.length)return null;const _=sD[a],{coords:x,lengths:M}=e,A=yr(i,r),C=yr(i&&y,r&&m),N=Ox(i,r,y,m);if(!M.length)return N(t.coords,x,0,0,x[0],x[1]),Ga(t,A,0),t;let j=0;const D=p*p;for(const z of M){if(z<_){j+=z*A;continue}const W=t.coords.length/C,Y=j,K=j+(z-1)*A;N(t.coords,x,t.coords.length,Y,x[Y],x[Y+1]),y4(t.coords,x,A,D,N,Y,K),N(t.coords,x,t.coords.length,K,x[K],x[K+1]);const ee=t.coords.length/C-W;ee>=_?t.lengths.push(ee):io(t.coords,W*C),j+=z*A}return t.coords.length?t:null}function xde(t,e,i,r){const a=t[e],p=t[e+1],y=t[i],m=t[i+1],_=t[r],x=t[r+1];let M=y,A=m,C=_-M,N=x-A;if(C!==0||N!==0){const j=((a-M)*C+(p-A)*N)/(C*C+N*N);j>1?(M=_,A=x):j>0&&(M+=C*j,A+=N*j)}return C=a-M,N=p-A,C*C+N*N}function y4(t,e,i,r,a,p,y){let m,_=r,x=0;for(let M=p+i;M<y;M+=i)m=xde(e,M,p,y),m>_&&(x=M,_=m);_>r&&(x-p>i&&y4(t,e,i,r,a,p,x),a(t,e,t.length,x,e[x],e[x+1]),y-x>i&&y4(t,e,i,r,a,x,y))}function Swe(t,e,i,r){if(e==null||!e.coords||!e.coords.length)return null;const a=yr(i,r);let p=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=Number.NEGATIVE_INFINITY;if(e&&e.coords){const x=e.coords;for(let M=0;M<x.length;M+=a){const A=x[M],C=x[M+1];p=Math.min(p,A),m=Math.max(m,A),y=Math.min(y,C),_=Math.max(_,C)}}return G_(t)?ZK(t,p,y,m,_):rH(p,y,m,_,t),t}function m4(t,e,i,r,a){const{coords:p,lengths:y}=e,m=yr(i,r);if(!p.length)return t!==e&&Ga(t),t;n2(a);const{originPosition:_,scale:x,translate:M}=a,A=Tde;A.originPosition=_;const C=A.scale;C[0]=x[0]??1,C[1]=-(x[1]??1),C[2]=x[2]??1,C[3]=x[3]??1;const N=A.translate;if(N[0]=M[0]??0,N[1]=M[1]??0,N[2]=M[2]??0,N[3]=M[3]??0,!y.length){for(let D=0;D<m;++D)t.coords[D]=Xw(A,p[D],D);return t!==e&&Ga(t,m,0),t}let j=0;for(let D=0;D<y.length;D++){const z=y[D];t.lengths[D]=z;for(let K=0;K<m;++K)t.coords[j+K]=Xw(A,p[j+K],K);let W=t.coords[j],Y=t.coords[j+1];j+=m;for(let K=1;K<z;K++,j+=m){W+=p[j]*C[0],Y+=p[j+1]*C[1],t.coords[j]=W,t.coords[j+1]=Y;for(let ee=2;ee<m;++ee)t.coords[j+ee]=Xw(A,p[j+ee],ee)}}return t!==e&&Ga(t,p.length,y.length),t}function xwe(t,e,i,r,a,p){if(Ga(t),t.lengths.push(...e.lengths),i===a&&r===p)for(let y=0;y<e.coords.length;y++)t.coords.push(e.coords[y]);else{const y=yr(i,r),m=Ox(i,r,a,p),_=e.coords;for(let x=0;x<_.length;x+=y)m(t.coords,_,t.coords.length,x,_[x],_[x+1])}return t}function $de(t,e,i,r){let a=0,p=t[r*e],y=t[r*(e+1)];for(let m=1;m<i;m++){const _=p+t[r*(e+m)],x=y+t[r*(e+m)+1],M=(_-p)*(x+y);p=_,y=x,a+=M}return .5*a}function $we(t,e){const{coords:i,lengths:r}=t;let a=0,p=0;for(let y=0;y<r.length;y++){const m=r[y];p+=$de(i,a,m,e),a+=m}return Math.abs(p)}function Ga(t,e=0,i=0){io(t.lengths,i),io(t.coords,e)}function io(t,e=0){t.length!==e&&(t.length=e)}const Tde={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function Ide(t,e){return e}function Lx(t,e,i,r){switch(i){case 0:return v1(t,e+r,0);case 1:return t.originPosition==="lowerLeft"?v1(t,e+r,1):Ade(t,e+r,1)}}function bD(t,e,i,r){return i===2?v1(t,e,2):Lx(t,e,i,r)}function Mde(t,e,i,r){return i===2?v1(t,e,3):Lx(t,e,i,r)}function Ede(t,e,i,r){return i===3?v1(t,e,3):bD(t,e,i,r)}function v1({translate:t,scale:e},i,r){return t[r]+i*e[r]}function Ade({translate:t,scale:e},i,r){return t[r]-i*e[r]}let kde=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=Ide,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const i=$6(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(i!=null)for(const r of e.features)i(r.geometry)}createSpatialReference(){return{}}addField(e,i){const r=e.fields;n2(r),r.push(i);const a=r.map(p=>p.name);this._attributesConstructor=function(){for(const p of a)this[p]=null}}addFeature(e,i){e.features.push(i)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,a)=>this.addCoordinatePoint(i,r,a),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,a)=>this._addCoordinatePolygon(i,r,a),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,a)=>this._addCoordinatePolyline(i,r,a),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,a)=>this._addCoordinateMultipoint(i,r,a),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(e,i){const{queryGeometry:r,queryGeometryType:a}=i,p=m4(r.clone(),r,!1,!1,this._transform),y=gD(p,a,!1,!1);e.queryGeometryType=a,e.queryGeometry={...y}}createPointGeometry(e){const i={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(i.z=0),e.hasM&&(i.m=0),i}addCoordinatePoint(e,i,r){const a=is(this._transform,"transform");switch(i=this._applyTransform(a,i,r,0),r){case 0:e.x=i;break;case 1:e.y=i;break;case 2:"z"in e?e.z=i:e.m=i;break;case 3:e.m=i}}_transformPathLikeValue(e,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=e);const a=is(this._transform,"transform");return this._applyTransform(a,e,i,r)}_addCoordinatePolyline(e,i,r){this._dehydratedAddPointsCoordinate(e.paths,i,r)}_addCoordinatePolygon(e,i,r){this._dehydratedAddPointsCoordinate(e.rings,i,r)}_addCoordinateMultipoint(e,i,r){r===0&&e.points.push([]);const a=this._transformPathLikeValue(i,r);e.points[e.points.length-1].push(a)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,i,r){r===0&&this._toAddInCurrentPath--==0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const a=this._transformPathLikeValue(i,r),p=e[e.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),p.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=a}_deriveApplyTransform(e){const{hasZ:i,hasM:r}=e;return i&&r?Ede:i?bD:r?Mde:Lx}};async function Ode(t,e,i){const r=un(t),a={...i},p=Ms.from(e),y=!p.quantizationParameters,{data:m}=await Qpe(r,p,new kde({sourceSpatialReference:p.sourceSpatialReference,applyTransform:y}),a);return m}let qs=class extends je{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return or(this.url)}async execute(e,i){const r=await this.executeJSON(e,i);return this.featureSetFromJSON(e,r,i)}async executeJSON(e,i){var _;const r=this._normalizeQuery(e),a=((_=e.outStatistics)==null?void 0:_[0])!=null,p=le("featurelayer-pbf-statistics"),y=!a||p;let m;if(this.pbfSupported&&y)try{m=await Ode(this.url,r,i)}catch(x){if(x.name!=="query:parsing-pbf")throw x;this.pbfSupported=!1}return this.pbfSupported&&y||(m=await rD(this.url,r,i)),this._normalizeFields(m.fields),m}async featureSetFromJSON(e,i,r){if(!this._queryIs3DObjectFormat(e)||this.infoFor3D==null||!i.features)return db.fromJSON(i);const{meshFeatureSetFromJSON:a}=await aa(we(()=>import("./meshFeatureSet-c6ff2982.js").then(p=>p.b),["assets/meshFeatureSet-c6ff2982.js","assets/georeference-f0e67170.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-ca30daa1.js","assets/MeshLocalVertexSpace-8031cf08.js","assets/MeshGeoreferencedRelativeVertexSpace-4f0d7b2f.js","assets/quat-08b43bbe.js","assets/quatf64-3363c48e.js","assets/vec32-22960fb5.js","assets/BufferView-f541be9b.js","assets/imageUtils-c2d0d1ae.js","assets/earcut-00ef0f46.js","assets/Indices-53235ef1.js","assets/deduplicate-7d6c66fc.js","assets/External-965b18ac.js"]),r);return a(e,this.infoFor3D,i)}executeForCount(e,i){return lde(this.url,this._normalizeQuery(e),i)}executeForExtent(e,i){return ude(this.url,this._normalizeQuery(e),i)}executeForIds(e,i){return hde(this.url,this._normalizeQuery(e),i)}async executeRelationshipQuery(e,i){const[{default:r},{executeRelationshipQuery:a}]=await aa(Promise.all([we(()=>Promise.resolve().then(()=>lM),void 0),we(()=>import("./executeRelationshipQuery-0ebd85fc.js"),[])]),i);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),a(this.url,e,i)}async executeRelationshipQueryForCount(e,i){const[{default:r},{executeRelationshipQueryForCount:a}]=await aa(Promise.all([we(()=>Promise.resolve().then(()=>lM),void 0),we(()=>import("./executeRelationshipQuery-0ebd85fc.js"),[])]),i);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),a(this.url,e,i)}async executeAttachmentQuery(e,i){const{executeAttachmentQuery:r,fetchAttachments:a,processAttachmentQueryResult:p}=await aa(we(()=>import("./queryAttachments-e67db1ee.js"),["assets/queryAttachments-e67db1ee.js","assets/AttachmentInfo-13d3e9f0.js"]),i),y=un(this.url);return p(y,await(this.queryAttachmentsSupported?r(y,e,i):a(y,e,i)))}async executeTopFeaturesQuery(e,i){const{executeTopFeaturesQuery:r}=await aa(we(()=>import("./executeTopFeaturesQuery-df8cc913.js"),["assets/executeTopFeaturesQuery-df8cc913.js","assets/queryTopFeatures-86118b61.js"]),i);return r(this.parsedUrl,e,this.sourceSpatialReference,i)}async executeForTopIds(e,i){const{executeForTopIds:r}=await aa(we(()=>import("./executeForTopIds-25f9f2ad.js"),["assets/executeForTopIds-25f9f2ad.js","assets/queryTopFeatures-86118b61.js"]),i);return r(this.parsedUrl,e,i)}async executeForTopExtents(e,i){const{executeForTopExtents:r}=await aa(we(()=>import("./executeForTopExtents-3aff6cd9.js"),["assets/executeForTopExtents-3aff6cd9.js","assets/queryTopFeatures-86118b61.js"]),i);return r(this.parsedUrl,e,i)}async executeForTopCount(e,i){const{executeForTopCount:r}=await aa(we(()=>import("./executeForTopCount-60e09305.js"),["assets/executeForTopCount-60e09305.js","assets/queryTopFeatures-86118b61.js"]),i);return r(this.parsedUrl,e,i)}_normalizeQuery(e){let i=Ms.from(e);i.sourceSpatialReference=i.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(i=i===e?i.clone():i,i.gdbVersion=e.gdbVersion||this.gdbVersion,i.dynamicDataSource=e.dynamicDataSource?qr.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(r!=null&&this._queryIs3DObjectFormat(e)){i=i===e?i.clone():i,i.formatOf3DObjects=null;const{supportedFormats:a,queryFormats:p}=r,y=J3("model/gltf-binary",a)??K3("glb",a),m=J3("model/gltf+json",a)??K3("gtlf",a);for(const _ of p){if(_===y){i.formatOf3DObjects=_;break}_!==m||i.formatOf3DObjects||(i.formatOf3DObjects=_)}if(!i.formatOf3DObjects)throw new ie("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(i.outFields==null||!i.outFields.includes("*")){i=i===e?i.clone():i,i.outFields==null&&(i.outFields=[]);const{originX:_,originY:x,originZ:M,translationX:A,translationY:C,translationZ:N,scaleX:j,scaleY:D,scaleZ:z,rotationX:W,rotationY:Y,rotationZ:K,rotationDeg:ee}=r.transformFieldRoles;i.outFields.push(_,x,M,A,C,N,j,D,z,W,Y,K,ee)}}return i}_normalizeFields(e){if(this.fieldsIndex!=null&&e!=null)for(const i of e){const r=this.fieldsIndex.get(i.name);r&&Object.assign(i,r.toJSON())}}_queryIs3DObjectFormat(e){return this.infoFor3D!=null&&e.returnGeometry===!0&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};v([S({type:qr})],qs.prototype,"dynamicDataSource",void 0),v([S()],qs.prototype,"fieldsIndex",void 0),v([S()],qs.prototype,"gdbVersion",void 0),v([S()],qs.prototype,"infoFor3D",void 0),v([S({readOnly:!0})],qs.prototype,"parsedUrl",null),v([S()],qs.prototype,"pbfSupported",void 0),v([S()],qs.prototype,"queryAttachmentsSupported",void 0),v([S()],qs.prototype,"sourceSpatialReference",void 0),v([S({type:String})],qs.prototype,"url",void 0),qs=v([B("esri.tasks.QueryTask")],qs);const Cde=qs,zI=new ft({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Bl=class extends Xt(de){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};v([S({json:{write:!0}})],Bl.prototype,"name",void 0),v([S({json:{write:!0}})],Bl.prototype,"description",void 0),v([S({json:{read:zI.read,write:zI.write}})],Bl.prototype,"drawingTool",void 0),v([S({json:{write:!0}})],Bl.prototype,"prototype",void 0),v([S({json:{write:!0}})],Bl.prototype,"thumbnail",void 0),Bl=v([B("esri.layers.support.FeatureTemplate")],Bl);const jx=Bl;let Ia=class extends Xt(de){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=kx(e[r]);return i}writeDomains(e,i){var a;const r={};for(const p of Object.keys(e))e[p]&&(r[p]=(a=e[p])==null?void 0:a.toJSON());i.domains=r}};v([S({json:{write:!0}})],Ia.prototype,"id",void 0),v([S({json:{write:!0}})],Ia.prototype,"name",void 0),v([S({json:{write:!0}})],Ia.prototype,"domains",void 0),v([ge("domains")],Ia.prototype,"readDomains",null),v([$e("domains")],Ia.prototype,"writeDomains",null),v([S({type:[jx],json:{write:!0}})],Ia.prototype,"templates",void 0),Ia=v([B("esri.layers.support.FeatureType")],Ia);const Dx=Ia,Fx="__begin__",zx="__end__",Pde=new RegExp(Fx,"ig"),Nde=new RegExp(zx,"ig"),VI=new RegExp("^"+Fx,"i"),GI=new RegExp(zx+"$","i"),r2='"',Rde=r2+" + ",Lde=" + "+r2;function jde(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Dde(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function Vx(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=jde(t.labelExpression),e.type="conventional"),e}function Fde(t){const e=Vx(t);if(!e)return null;switch(e.type){case"conventional":return g4(e.expression);case"arcade":return e.expression}return null}function zde(t){const e=Vx(t);if(!e)return null;switch(e.type){case"conventional":return Gde(e.expression);case"arcade":return wD(e.expression)}return null}function g4(t){let e;return t?(e=c2(t,i=>Fx+'$feature["'+i+'"]'+zx),e=VI.test(e)?e.replace(VI,""):r2+e,e=GI.test(e)?e.replace(GI,""):e+r2,e=e.replaceAll(Pde,Rde).replaceAll(Nde,Lde)):e='""',e}const Vde=/^\s*\{([^}]+)\}\s*$/i;function Gde(t){const e=t==null?void 0:t.match(Vde);return e&&e[1].trim()||null}const qde=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Ude=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Bde=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function wD(t){if(!t)return null;let e=qde.exec(t)||Ude.exec(t);return e?e[1]||e[3]:(e=Bde.exec(t),e?e[2]:null)}var v4;let Hl=v4=class extends de{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?g4(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=g4(this.value)),t!=null&&(e[i]=t)}clone(){return new v4({expression:this.expression,title:this.title,value:this.value})}};v([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Hl.prototype,"expression",void 0),v([ge("expression",["expression","value"])],Hl.prototype,"readExpression",null),v([$e("expression")],Hl.prototype,"writeExpression",null),v([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Hl.prototype,"title",void 0),v([S({json:{read:!1,write:!1}})],Hl.prototype,"value",void 0),Hl=v4=v([B("esri.layers.support.LabelExpressionInfo")],Hl);const _D=Hl,SD=[252,146,31,255],Hde={type:"esriSMS",style:"esriSMSCircle",size:6,color:SD,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Wde={type:"esriSLS",style:"esriSLSSolid",width:.75,color:SD},Jde={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Kde={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Yde={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Zde={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Xde={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},Awe=Fu.fromJSON(Hde),kwe=Is.fromJSON(Wde),Owe=Du.fromJSON(Jde),Qde=kc.fromJSON(Kde),Cwe=Fu.fromJSON(Yde),Pwe=Is.fromJSON(Zde),Nwe=Du.fromJSON(Xde);var b4;const cm=new ft({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function pm(t,e,i){return{enabled:!wA(i==null?void 0:i.layer)}}function xD(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function e0e(t){return(t==null?void 0:t.type)==="map-image"}function $D(t){var e,i;return!!e0e(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function t0e(t){return xD(t)||$D(t==null?void 0:t.layer)}let Mi=b4=class extends de{static evaluateWhere(t,e){const i=(r,a,p)=>{switch(a){case"=":return r==p;case"<>":return r!=p;case">":return r>p;case">=":return r>=p;case"<":return r<p;case"<=":return r<=p}return!1};try{if(t==null)return!0;const r=t.split(" ");if(r.length===3)return i(e[r[0]],r[1],r[2]);if(r.length===7){const a=i(e[r[0]],r[1],r[2]),p=r[3],y=i(e[r[4]],r[5],r[6]);switch(p){case"AND":return a&&y;case"OR":return a||y}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Qde,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=Dde(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=wD(this.labelExpressionInfo.expression);r&&(t="["+r+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,r){if(t==null&&this.labelExpression!=null&&xD(r))t=new _D({expression:this.getLabelExpressionArcade()});else if(!t)return;const a=t.toJSON(r);a.expression&&(e[i]=a)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return Vx(this)}getLabelExpressionArcade(){return Fde(this)}getLabelExpressionSingleField(){return zde(this)}hash(){return JSON.stringify(this)}clone(){return new b4({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:se(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:se(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};v([S({type:String,json:{write:!0}})],Mi.prototype,"name",void 0),v([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:pm}}}}})],Mi.prototype,"allowOverrun",void 0),v([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:pm}}}}})],Mi.prototype,"deconflictionStrategy",void 0),v([S({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&$D(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Mi.prototype,"labelExpression",void 0),v([ge("labelExpression")],Mi.prototype,"readLabelExpression",null),v([$e("labelExpression")],Mi.prototype,"writeLabelExpression",null),v([S({type:_D,json:{write:{overridePolicy:(t,e,i)=>t0e(i)?{allowNull:!0}:{enabled:!1}}}})],Mi.prototype,"labelExpressionInfo",void 0),v([$e("labelExpressionInfo")],Mi.prototype,"writeLabelExpressionInfo",null),v([S({type:cm.apiValues,json:{type:cm.jsonValues,read:cm.read,write:cm.write}})],Mi.prototype,"labelPlacement",void 0),v([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Mi.prototype,"labelPosition",void 0),v([S({type:Number})],Mi.prototype,"maxScale",void 0),v([$e("maxScale")],Mi.prototype,"writeMaxScale",null),v([S({type:Number})],Mi.prototype,"minScale",void 0),v([$e("minScale")],Mi.prototype,"writeMinScale",null),v([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:pm}}}}})],Mi.prototype,"repeatLabel",void 0),v([S({type:Number,cast:$t,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:pm}}}}})],Mi.prototype,"repeatLabelDistance",void 0),v([S({types:$Y,json:{origins:{"web-scene":{types:TY,write:yI,default:null}},write:yI,default:null}})],Mi.prototype,"symbol",void 0),v([S({type:Boolean,json:{write:!0}})],Mi.prototype,"useCodedValues",void 0),v([S({type:String,json:{write:!0}})],Mi.prototype,"where",void 0),Mi=b4=v([B("esri.layers.support.LabelClass")],Mi);const ey=Mi,Qw=me.getLogger("esri.layers.support.labelingInfo"),i0e=/\[([^\[\]]+)\]/gi;function qI(t,e,i){return t?t.map(r=>{const a=new ey;if(a.read(r,i),a.labelExpression){const p=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;a.labelExpression=a.labelExpression.replaceAll(i0e,(y,m)=>`[${r0e(m,p)}]`)}return a}):null}function r0e(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const a=e[r].name;if(a.toLowerCase()===i)return a}return t}const s0e={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function n0e(t,e){const i=se(t);return i.some(r=>o0e(r,e))?[]:i}function o0e(t,e){const i=t.labelPlacement,r=s0e[e];if(!t.symbol)return Qw.warn("No ILabelClass symbol specified."),!0;if(!r)return Qw.error(new ie("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!r.includes(i)){const a=r[0];i&&Qw.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${a}`),t.labelPlacement=a}return!1}var w4;let Mp=w4=class extends de{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new De}clone(){return new w4({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};v([S({type:String,json:{write:!0}})],Mp.prototype,"floorField",void 0),v([S({json:{read:!1,write:!1}})],Mp.prototype,"viewAllMode",void 0),v([S({json:{read:!1,write:!1}})],Mp.prototype,"viewAllLevelIds",void 0),Mp=w4=v([B("esri.layers.support.LayerFloorInfo")],Mp);const TD=Mp,a0e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Be(t,e,i){return!!ID(t,e,i)}function dm(t,e,i){return ID(t,e,i)}function ID(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function l0e(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function ty(t,e){var r;const i=(r=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:r.map(a=>a.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function Gx(t,e){return{analytics:u0e(t),attachment:h0e(t),data:c0e(t),metadata:p0e(t),operations:d0e(t.capabilities,t,e),query:f0e(t,e),queryRelated:y0e(t),queryTopFeatures:m0e(t),editing:g0e(t)}}function u0e(t){return{supportsCacheHint:ty(t.advancedQueryCapabilities,"queryAnalytics")}}function h0e(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:ty(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Be(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const a=a0e[r.name];a&&(i[a]=!!r.isEnabled)}),i}function c0e(t){return{isVersioned:Be(t,"isDataVersioned",!1),supportsAttachment:Be(t,"hasAttachments",!1),supportsM:Be(t,"hasM",!1),supportsZ:Be(t,"hasZ",!1)}}function p0e(t){return{supportsAdvancedFieldProperties:Be(t,"supportsFieldDescriptionProperty",!1)}}function d0e(t,e,i){const r=t?t.toLowerCase().split(",").map(C=>C.trim()):[],a=i?Gu(i):null,p=r.includes(a!=null&&a.serverType==="MapServer"?"data":"query"),y=r.includes("editing")&&!e.datesInUnknownTimezone;let m=y&&r.includes("create"),_=y&&r.includes("delete"),x=y&&r.includes("update");const M=r.includes("changetracking"),A=e.advancedQueryCapabilities;return y&&!(m||_||x)&&(m=_=x=!0),{supportsCalculate:Be(e,"supportsCalculate",!1),supportsTruncate:Be(e,"supportsTruncate",!1),supportsValidateSql:Be(e,"supportsValidateSql",!1),supportsAdd:m,supportsDelete:_,supportsEditing:y,supportsChangeTracking:M,supportsQuery:p,supportsQueryAnalytics:Be(A,"supportsQueryAnalytic",!1),supportsQueryAttachments:Be(A,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Be(A,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Be(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:x,supportsExceedsLimitStatistics:Be(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Be(e,"supportsAsyncConvert3D",!1)}}function f0e(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,a=t.archivingInfo,p=t.currentVersion,y=e==null?void 0:e.includes("MapServer"),m=!y||p>=le("mapserver-pbf-version-support"),_=L6(e),x=new Set((t.supportedQueryFormats??"").split(",").map(M=>M.toLowerCase().trim()));return{supportsStatistics:Be(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:Be(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Be(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:l0e(i),supportsCentroid:Be(i,"supportsReturningGeometryCentroid",!1),supportsDistance:Be(i,"supportsQueryWithDistance",!1),supportsDistinct:Be(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:Be(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Be(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Be(i,"supportsHavingClause",!1),supportsOrderBy:Be(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:Be(i,"supportsPagination",!1),supportsQuantization:Be(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Be(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Be(t,"supportsReturningQueryGeometry",!1),supportsResultType:Be(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Be(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Be(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Be(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Be(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Be(r,"allowOthersToQuery",!0),supportsHistoricMoment:Be(a,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:m&&x.has("pbf"),supportsDisjointSpatialRelationship:Be(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:Be(i,"supportsQueryWithCacheHint",!1)||ty(i,"query"),supportsDefaultSpatialReference:Be(i,"supportsDefaultSR",!1),supportsCompactGeometry:_,supportsFullTextSearch:Be(i,"supportsFullTextSearch",!1),maxRecordCountFactor:dm(t,"maxRecordCountFactor",void 0),maxRecordCount:dm(t,"maxRecordCount",void 0),standardMaxRecordCount:dm(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:dm(t,"tileMaxRecordCount",void 0)}}function y0e(t){const e=t.advancedQueryCapabilities,i=Be(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Be(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:ty(e,"queryRelated")}}function m0e(t){return{supportsCacheHint:ty(t.advancedQueryCapabilities,"queryTopFilter")}}function g0e(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Be(t,"allowGeometryUpdates",!0),supportsGlobalId:Be(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Be(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Be(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Be(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Be(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Be(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Be(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Be(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Be(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Be(i,"supportsAsyncApplyEdits",!1)}}var _4;let tr=_4=class extends de{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new _4(se({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};v([S({type:[String],json:{write:!0}})],tr.prototype,"attachmentTypes",void 0),v([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],tr.prototype,"attachmentsWhere",void 0),v([S({type:Boolean,json:{write:!0}})],tr.prototype,"cacheHint",void 0),v([S({type:[String],json:{write:!0}})],tr.prototype,"keywords",void 0),v([S({type:[Number],json:{write:!0}})],tr.prototype,"globalIds",void 0),v([S({json:{write:!0}})],tr.prototype,"name",void 0),v([S({type:Number,json:{read:{source:"resultRecordCount"}}})],tr.prototype,"num",void 0),v([S({type:[Number],json:{write:!0}})],tr.prototype,"objectIds",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],tr.prototype,"returnMetadata",void 0),v([S({type:[Number],json:{write:!0}})],tr.prototype,"size",void 0),v([S({type:Number,json:{read:{source:"resultOffset"}}})],tr.prototype,"start",void 0),v([$e("start"),$e("num")],tr.prototype,"writeStart",null),v([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],tr.prototype,"where",void 0),tr=_4=v([B("esri.rest.support.AttachmentQuery")],tr),tr.from=ri(tr);const MD=tr;function ED({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:a},p){if(!i)return null;const y=_0e({editFieldsInfo:e,fields:i,objectIdField:r},p);if(!y.length)return null;const m=$0e({titleBase:a,fields:i,displayField:t}),_=x0e();return new Lu({title:m,content:_,fieldInfos:y})}const v0e=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):GH(t,e);function b0e(t,e){const i=t;return e&&(t=t.filter(r=>!e.includes(r.type))),t===i&&(t=t.slice()),t.sort(w0e),t}function w0e(t,e){return t.type==="oid"?-1:e.type==="oid"?1:UI(t)?-1:UI(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function _0e(t,e){const i=e==null?void 0:e.visibleFieldNames;return b0e(t.fields??[],(e==null?void 0:e.ignoreFieldTypes)||T0e).map(r=>new o6({fieldName:r.name,isEditable:VH(r,t),label:r.alias,format:S0e(r),visible:v0e(r,{...t,visibleFieldNames:i})}))}function S0e(t){switch(t.type){case"small-integer":case"integer":case"single":return new b0({digitSeparator:!0,places:0});case"double":return new b0({digitSeparator:!0,places:2});case"date":return new b0({dateFormat:"long-month-day-year"});default:return t.type==="string"&&oW(t.name)?new b0({digitSeparator:!0,places:0}):null}}function x0e(){return[new i1,new e1]}function $0e(t){const e=OH(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function UI(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const T0e=["geometry","blob","raster","guid","xml"];var Eg;function e3(t){return t!=null&&t.type==="esriSMS"}function t3(t,e,i){var a;const r=this.originIdOf(e)>=Br(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&((a=i.layer)==null?void 0:a.type)==="map-image"&&(i.writeSublayerStructure||r)}}function i3(t,e,i){var r;return{enabled:!!i&&((r=i.layer)==null?void 0:r.type)==="tile"&&(i.origin&&this.originIdOf(e)>=Br(i.origin)||this._isOverridden(e))}}function Cs(t,e,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function fm(t,e,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(e)>=Br(i.origin))}}let I0e=0;const Rh=new Set;Rh.add("layer"),Rh.add("parent"),Rh.add("loaded"),Rh.add("loadStatus"),Rh.add("loadError"),Rh.add("loadWarnings");let Ye=Eg=class extends Xa(K1(Ec(Fo))){constructor(t){super(t),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(t){return this.addResolvingPromise((async()=>{const{layer:e,url:i}=this;if(!e&&!i)throw new ie("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const r=e?await e.fetchSublayerInfo(this,t):(await ot(i,{responseType:"json",query:{f:"json"},...t})).data;r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service"}))})()),this}readCapabilities(t,e){e=e.layerDefinition||e;const{operations:{supportsQuery:i,supportsQueryAttachments:r},query:{supportsFormatPBF:a},data:{supportsAttachment:p}}=Gx(e,this.url);return{exportMap:{supportsModification:!!e.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:r},data:{supportsAttachment:p},query:{supportsFormatPBF:a}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(t){this._setAndNotifyLayer("definitionExpression",t)}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}get fieldsIndex(){return new Ix(this.fields||[])}set floorInfo(t){this._setAndNotifyLayer("floorInfo",t)}readGlobalIdFieldFromService(t,e){if((e=e.layerDefinition||e).globalIdField)return e.globalIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??I0e++}set id(t){var e,i,r;this._get("id")!==t&&(((r=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.exportMap)==null?void 0:r.supportsDynamicLayers)!==!1?this._set("id",t):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(t){this._setAndNotifyLayer("labelingInfo",t)}writeLabelingInfo(t,e,i,r){t&&t.length&&(e.layerDefinition={drawingInfo:{labelingInfo:t.map(a=>a.write({},r))}})}set labelsVisible(t){this._setAndNotifyLayer("labelsVisible",t)}set layer(t){this._set("layer",t),this.sublayers&&this.sublayers.forEach(e=>e.layer=t)}set listMode(t){this._set("listMode",t)}set minScale(t){this._setAndNotifyLayer("minScale",t)}readMinScale(t,e){return e.minScale||e.layerDefinition&&e.layerDefinition.minScale||0}set maxScale(t){this._setAndNotifyLayer("maxScale",t)}readMaxScale(t,e){return e.maxScale||e.layerDefinition&&e.layerDefinition.maxScale||0}readObjectIdFieldFromService(t,e){if((e=e.layerDefinition||e).objectIdField)return e.objectIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(t){this._setAndNotifyLayer("opacity",t)}readOpacity(t,e){var r;const i=e.layerDefinition;return 1-.01*(((i==null?void 0:i.transparency)!=null?i.transparency:(r=i==null?void 0:i.drawingInfo)==null?void 0:r.transparency)??0)}writeOpacity(t,e,i,r){e.layerDefinition={drawingInfo:{transparency:100-100*t}}}writeParent(t,e){this.parent&&this.parent!==this.layer?e.parentLayerId=g2(this.parent.id):e.parentLayerId=-1}get queryTask(){var y;if(!this.layer)return null;const{spatialReference:t}=this.layer,e="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:i,fieldsIndex:r}=this,a=le("featurelayer-pbf")&&(i==null?void 0:i.query.supportsFormatPBF),p=((y=i==null?void 0:i.operations)==null?void 0:y.supportsQueryAttachments)??!1;return new Cde({url:this.url,pbfSupported:a,fieldsIndex:r,gdbVersion:e,sourceSpatialReference:t,queryAttachmentsSupported:p})}set renderer(t){if(t){for(const e of t.getSymbols())if(y9(e)){me.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",t)}get source(){return this._get("source")||new La({mapLayerId:this.id})}set source(t){this._setAndNotifyLayer("source",t)}set sublayers(t){this._handleSublayersChange(t,this._get("sublayers")),this._set("sublayers",t)}castSublayers(t){return ri(De.ofType(Eg),t)}writeSublayers(t,e,i){var r;(r=this.sublayers)!=null&&r.length&&(e[i]=this.sublayers.map(a=>a.id).toArray().reverse())}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(a=>a.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){var r;const t=((r=this.layer)==null?void 0:r.parsedUrl)??this._lastParsedUrl,e=this.source;if(!t)return null;if(this._lastParsedUrl=t,(e==null?void 0:e.type)==="map-layer")return`${t.path}/${e.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${t.path}/dynamicLayer?${Su(i)}`}set url(t){this._overrideIfSome("url",t)}set visible(t){this._setAndNotifyLayer("visible",t)}writeVisible(t,e,i,r){e[i]=this.getAtOrigin("defaultVisibility","service")||t}clone(){const{store:t}=Yi(this),e=new Eg;return Yi(e).store=t.clone(Rh),this.commitProperty("url"),e._lastParsedUrl=this._lastParsedUrl,e}createPopupTemplate(t){return ED(this,t)}createQuery(){return new Ms({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var r;if(this.hasOwnProperty("sublayers"))return null;const{layer:t}=this,e=t==null?void 0:t.parsedUrl,i=new(await we(()=>Promise.resolve().then(()=>Yfe),void 0)).default({url:e==null?void 0:e.path});return e&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),(t==null?void 0:t.refreshInterval)!=null&&(i.refreshInterval=t.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=se(this.floorInfo)),this.originIdOf("labelingInfo")>Me.SERVICE&&(i.labelingInfo=se(this.labelingInfo)),this.originIdOf("labelsVisible")>Me.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>Me.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>Me.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>Me.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>Me.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>Me.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>Me.DEFAULTS&&(i.popupTemplate=se(this.popupTemplate)),this.originIdOf("renderer")>Me.SERVICE&&(i.renderer=se(this.renderer)),((r=this.source)==null?void 0:r.type)==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>Me.DEFAULTS&&(i.title=this.title),(t==null?void 0:t.type)==="map-image"&&t.originIdOf("customParameters")>Me.DEFAULTS&&(i.customParameters=t.customParameters),(t==null?void 0:t.type)==="tile"&&t.originIdOf("customParameters")>Me.DEFAULTS&&(i.customParameters=t.customParameters),i}getField(t){return this.fieldsIndex.get(t)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const r=t.attributes?t.attributes[e]:void 0;if(r==null)return null;let a=null;return i==null||i.some(p=>{const{id:y}=p;return y!=null&&(y.toString()===r.toString()&&(a=p),!!a)}),a}getFieldDomain(t,e){const i=e&&e.feature,r=this.getFeatureType(i);if(r){const a=r.domains&&r.domains[t];if(a&&a.type!=="inherited")return a}return this._getLayerDomain(t)}async queryAttachments(t,e){var M,A;await this.load(),t=MD.from(t);const i=this.capabilities;if(!((M=i==null?void 0:i.data)!=null&&M.supportsAttachment))throw new ie("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:r,objectIds:a,globalIds:p,num:y,size:m,start:_,where:x}=t;if(!((A=i==null?void 0:i.operations)!=null&&A.supportsQueryAttachments)&&((r==null?void 0:r.length)>0||(p==null?void 0:p.length)>0||(m==null?void 0:m.length)>0||y||_||x))throw new ie("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||p!=null&&p.length||x))throw new ie("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);return this.queryTask.executeAttachmentQuery(t,e)}async queryFeatures(t=this.createQuery(),e){var r,a;if(await this.load(),!this.capabilities.operations.supportsQuery)throw new ie("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new ie("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(t,{...e,query:{...(r=this.layer)==null?void 0:r.customParameters,token:(a=this.layer)==null?void 0:a.apiKey}});if(i!=null&&i.features)for(const p of i.features)p.sourceLayer=this;return i}toExportImageJSON(t){var p;const e={id:this.id,source:((p=this.source)==null?void 0:p.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=X2(t,this.definitionExpression);i!=null&&(e.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((y,m)=>(y[m]=this.originIdOf(m),y),{});if(Object.keys(r).some(y=>r[y]>Me.SERVICE)){const y=e.drawingInfo={};if(r.renderer>Me.SERVICE&&(y.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>Me.SERVICE&&(y.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>Me.SERVICE){!this.loaded&&this.labelingInfo.some(_=>!_.labelPlacement)&&me.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let m=this.labelingInfo;this.geometryType!=null&&(m=n0e(this.labelingInfo,cv.toJSON(this.geometryType))),y.labelingInfo=m.filter(_=>_.labelPlacement).map(_=>_.toJSON({origin:"service",layer:this.layer})),y.showLabels=!0}r.opacity>Me.SERVICE&&(y.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(y.renderer)}return e}_assignDefaultSymbolColors(t){this._forEachSimpleMarkerSymbols(t,e=>{e.color||e.style!=="esriSMSX"&&e.style!=="esriSMSCross"||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(t,e){if(t){const i=("uniqueValueInfos"in t?t.uniqueValueInfos:"classBreakInfos"in t?t.classBreakInfos:null)??[];for(const r of i)e3(r.symbol)&&e(r.symbol);"symbol"in t&&e3(t.symbol)&&e(t.symbol),"defaultSymbol"in t&&e3(t.defaultSymbol)&&e(t.defaultSymbol)}}_setAndNotifyLayer(t,e){var m,_,x,M;const i=this.layer,r=this._get(t);let a,p;switch(t){case"definitionExpression":case"floorInfo":a="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":a="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":a="supportsDynamicLayers",p="supportsModification"}const y=Yi(this).getDefaultOrigin();if(y!=="service"){if(a&&((x=(_=(m=this.layer)==null?void 0:m.capabilities)==null?void 0:_.exportMap)==null?void 0:x[a])===!1)return void this._logLockedError(t,`capability not available 'layer.capabilities.exportMap.${a}'`);if(p&&((M=this.capabilities)==null?void 0:M.exportMap[p])===!1)return void this._logLockedError(t,`capability not available 'capabilities.exportMap.${p}'`)}t!=="source"||this.loadStatus==="not-loaded"?(this._set(t,e),y!=="service"&&r!==e&&i&&i.emit&&i.emit("sublayer-update",{propertyName:t,target:this})):this._logLockedError(t,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(t,e){e&&(e.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),t&&(t.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([t.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),t.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),t.on("before-changes",i=>{var a,p,y;const r=(y=(p=(a=this.layer)==null?void 0:a.capabilities)==null?void 0:p.exportMap)==null?void 0:y.supportsSublayersChanges;r==null||r||(me.getLogger(this).error(new ie("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(t,e){const{layer:i,declaredClass:r}=this;me.getLogger(r).error(new ie("sublayer:locked",`Property '${String(t)}' can't be changed on Sublayer from the layer '${i==null?void 0:i.id}'`,{reason:e,sublayer:this,layer:i}))}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}};Ye.test={isMapImageLayerOverridePolicy:t=>t===Cs||t===t3,isTileImageLayerOverridePolicy:t=>t===i3},v([S({readOnly:!0})],Ye.prototype,"capabilities",void 0),v([ge("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],Ye.prototype,"readCapabilities",null),v([S()],Ye.prototype,"defaultPopupTemplate",null),v([S({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:t3}}})],Ye.prototype,"definitionExpression",null),v([S({readOnly:!0})],Ye.prototype,"effectiveScaleRange",null),v([S({type:[pb],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],Ye.prototype,"fields",void 0),v([S({readOnly:!0})],Ye.prototype,"fieldsIndex",null),v([S({type:TD,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:t3},origins:{"web-scene":{read:!1,write:!1}}}})],Ye.prototype,"floorInfo",null),v([S({type:vt,json:{read:{source:"layerDefinition.extent"}}})],Ye.prototype,"fullExtent",void 0),v([S({type:cv.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:cv.read}}}}})],Ye.prototype,"geometryType",void 0),v([S({type:String})],Ye.prototype,"globalIdField",void 0),v([ge("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ye.prototype,"readGlobalIdFieldFromService",null),v([S({type:jt,json:{write:{ignoreOrigin:!0}}})],Ye.prototype,"id",null),v([S({value:null,type:[ey],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:Cs}}})],Ye.prototype,"labelingInfo",null),v([$e("labelingInfo")],Ye.prototype,"writeLabelingInfo",null),v([S({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:Cs}}})],Ye.prototype,"labelsVisible",null),v([S({value:null})],Ye.prototype,"layer",null),v([S({type:String,json:{write:{overridePolicy:i3}}})],Ye.prototype,"layerItemId",void 0),v([S({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:fm}}})],Ye.prototype,"legendEnabled",void 0),v([S({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Ye.prototype,"listMode",null),v([S({type:Number,value:0,json:{write:{overridePolicy:Cs}}})],Ye.prototype,"minScale",null),v([ge("minScale",["minScale","layerDefinition.minScale"])],Ye.prototype,"readMinScale",null),v([S({type:Number,value:0,json:{write:{overridePolicy:Cs}}})],Ye.prototype,"maxScale",null),v([ge("maxScale",["maxScale","layerDefinition.maxScale"])],Ye.prototype,"readMaxScale",null),v([S({type:String})],Ye.prototype,"objectIdField",void 0),v([ge("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ye.prototype,"readObjectIdFieldFromService",null),v([S({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:Cs}}})],Ye.prototype,"opacity",null),v([ge("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],Ye.prototype,"readOpacity",null),v([$e("opacity")],Ye.prototype,"writeOpacity",null),v([S({json:{type:jt,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:Cs}}})],Ye.prototype,"parent",void 0),v([$e("parent")],Ye.prototype,"writeParent",null),v([S({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:fm,writer(t,e,i){e[i]=!t}}}})],Ye.prototype,"popupEnabled",void 0),v([S({type:Lu,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:fm}}})],Ye.prototype,"popupTemplate",void 0),v([S({readOnly:!0})],Ye.prototype,"queryTask",null),v([S({types:X1,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Cs},origins:{"web-scene":{types:Wj,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Cs}}}}})],Ye.prototype,"renderer",null),v([S({types:{key:"type",base:null,typeMap:{"data-layer":qr,"map-layer":La}},cast(t){if(t){if("mapLayerId"in t)return hc(La,t);if("dataSource"in t)return hc(qr,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:Cs}}})],Ye.prototype,"source",null),v([S()],Ye.prototype,"sourceJSON",void 0),v([S({value:null,json:{type:[jt],write:{target:"subLayerIds",allowNull:!0,overridePolicy:Cs}}})],Ye.prototype,"sublayers",null),v([It("sublayers")],Ye.prototype,"castSublayers",null),v([$e("sublayers")],Ye.prototype,"writeSublayers",null),v([S({type:String,json:{name:"name",write:{overridePolicy:fm}}})],Ye.prototype,"title",void 0),v([S({type:String})],Ye.prototype,"typeIdField",void 0),v([ge("typeIdField",["layerDefinition.typeIdField"])],Ye.prototype,"readTypeIdField",null),v([S({type:[Dx],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],Ye.prototype,"types",void 0),v([S({type:String,json:{name:"layerUrl",write:{overridePolicy:i3}}})],Ye.prototype,"url",null),v([S({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:Cs}}})],Ye.prototype,"visible",null),v([$e("visible")],Ye.prototype,"writeVisible",null),Ye=Eg=v([B("esri.layers.support.Sublayer")],Ye);const iy=Ye,M0e=me.getLogger("esri.layers.TileLayer");function E0e(t,e){const i=[],r={};return t&&t.forEach(a=>{const p=new iy;if(p.read(a,e),r[p.id]=p,a.parentLayerId!=null&&a.parentLayerId!==-1){const y=r[a.parentLayerId];y.sublayers||(y.sublayers=[]),y.sublayers.unshift(p)}else i.unshift(p)}),i}const r3=De.ofType(iy);function AD(t,e){t&&t.forEach(i=>{e(i),i.sublayers&&i.sublayers.length&&AD(i.sublayers,e)})}const kD=t=>{let e=class extends t{constructor(...i){super(...i),this.allSublayers=new ld({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[Me.SERVICE]:{},[Me.PORTAL_ITEM]:{},[Me.WEB_SCENE]:{},[Me.WEB_MAP]:{}},this.addHandles(Ee(()=>this.sublayers,(r,a)=>this._handleSublayersChange(r,a),Cd))}destroy(){this.allSublayers.destroy()}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:a}=this,p=Br(r.origin);if(p<Me.SERVICE||(a[p]={context:r,visibleLayers:i.visibleLayers||a[p].visibleLayers,layers:i.layers||a[p].layers},p>Me.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:y,origin:m}=this.createSublayersForOrigin("web-document"),_=Yi(this);_.setDefaultOrigin(m),this._set("sublayers",new r3(y)),_.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=Br(i==="web-document"?"web-map":i);let a=Me.SERVICE,p=this.sublayersSourceJSON[Me.SERVICE].layers,y=this.sublayersSourceJSON[Me.SERVICE].context,m=null;const _=[Me.PORTAL_ITEM,Me.WEB_SCENE,Me.WEB_MAP].filter(j=>j<=r);for(const j of _){const D=this.sublayersSourceJSON[j];qae(D.layers)&&(a=j,p=D.layers,y=D.context,D.visibleLayers&&(m={visibleLayers:D.visibleLayers,context:D.context}))}const x=[Me.PORTAL_ITEM,Me.WEB_SCENE,Me.WEB_MAP].filter(j=>j>a&&j<=r);let M=null;for(const j of x){const{layers:D,visibleLayers:z,context:W}=this.sublayersSourceJSON[j];D&&(M={layers:D,context:W}),z&&(m={visibleLayers:z,context:W})}const A=E0e(p,y),C=new Map,N=new Set;if(M)for(const j of M.layers)C.set(j.id,j);if(m!=null&&m.visibleLayers)for(const j of m.visibleLayers)N.add(j);return AD(A,j=>{M&&j.read(C.get(j.id),M.context),m&&j.read({defaultVisibility:N.has(j.id)},m.context)}),{origin:Bf(a),sublayers:new r3({items:A})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(a=>{a.parent=null,a.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(a=>{a.parent=this,a.layer=this}),this.addHandles([i.on("after-add",({item:a})=>{a.parent=this,a.layer=this}),i.on("after-remove",({item:a})=>{a.parent=null,a.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",a=>{M0e.error(new ie("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),a.preventDefault()}),"sublayers-owner"))}};return v([S({readOnly:!0})],e.prototype,"allSublayers",void 0),v([S({readOnly:!0,type:De.ofType(iy)})],e.prototype,"serviceSublayers",void 0),v([S({value:null,type:r3,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"sublayers",void 0),v([S({readOnly:!0})],e.prototype,"sublayersSourceJSON",void 0),e=v([B("esri.layers.mixins.SublayersOwner")],e),e},OD=Rr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let uf=class extends Xt(de){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return fee(this.value,this.unit,"milliseconds")}};v([Fe(OD,{nonNullable:!0})],uf.prototype,"unit",void 0),v([S({type:Number,json:{write:!0},nonNullable:!0})],uf.prototype,"value",void 0),uf=v([B("esri.TimeInterval")],uf);const s2=uf;function BI(t,e){return s2.fromJSON({value:t,unit:e})}let Ar=class extends Xt(de){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const r=new Date(i.timeExtent[0]),a=new Date(i.timeExtent[1]);return new ln({start:r,end:a})}writeFullTimeExtent(e,i){e&&e.start!=null&&e.end!=null?i.timeExtent=[e.start.getTime(),e.end.getTime()]:i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?BI(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?BI(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};v([S({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Ar.prototype,"cumulative",void 0),v([S({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"endField",void 0),v([S({type:ln,json:{write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"fullTimeExtent",void 0),v([ge("fullTimeExtent",["timeExtent"])],Ar.prototype,"readFullTimeExtent",null),v([$e("fullTimeExtent")],Ar.prototype,"writeFullTimeExtent",null),v([S({type:Boolean,json:{write:!0}})],Ar.prototype,"hasLiveData",void 0),v([S({type:s2,json:{write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"interval",void 0),v([ge("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ar.prototype,"readInterval",null),v([$e("interval")],Ar.prototype,"writeInterval",null),v([S({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"startField",void 0),v([S({type:Au,json:{write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"timeReference",void 0),v([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ar.prototype,"trackIdField",void 0),v([S({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Ar.prototype,"useTime",void 0),Ar=v([B("esri.layers.support.TimeInfo")],Ar);const CD=Ar,PD=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const a=r.timeInfo.exportOptions;if(!a)return null;const p=a.timeOffset,y=OD.fromJSON(a.timeOffsetUnits);return p&&y?new s2({value:p,unit:y}):null}set timeInfo(i){vk(i,this.fieldsIndex),this._set("timeInfo",i)}};return v([S({type:ln,json:{write:!1}})],e.prototype,"timeExtent",void 0),v([S({type:s2})],e.prototype,"timeOffset",void 0),v([ge("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),v([S({value:null,type:CD,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),v([S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=v([B("esri.layers.mixins.TemporalLayer")],e),e},A0e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let ds=class extends Xa(je){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=Hv(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&XR(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(A0e[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),i=this.visibleSublayers.filter(a=>a.definitionExpression!=null||e&&a.floorInfo!=null);return i.length?JSON.stringify(i.reduce((a,p)=>{const y=Hv(this.floors,p),m=X2(y,p.definitionExpression);return m!=null&&(a[p.id]=m),a},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=p=>{const y=this.scale,m=y===0,_=p.minScale===0||y<=p.minScale,x=p.maxScale===0||y>=p.maxScale;p.visible&&(m||_&&x)&&(p.sublayers?p.sublayers.forEach(r):e.unshift(p))};i&&i.forEach(r);const a=this._get("visibleSublayers");return!a||a.length!==e.length||a.some((p,y)=>e[y]!==p)?e:a}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};v([S({readOnly:!0})],ds.prototype,"dynamicLayers",null),v([S()],ds.prototype,"floors",void 0),v([S({readOnly:!0})],ds.prototype,"hasDynamicLayers",null),v([S()],ds.prototype,"layer",null),v([S({readOnly:!0})],ds.prototype,"layers",null),v([S({readOnly:!0})],ds.prototype,"layerDefs",null),v([S({type:Number})],ds.prototype,"scale",void 0),v([S(che)],ds.prototype,"timeExtent",void 0),v([S({readOnly:!0})],ds.prototype,"version",null),v([S({readOnly:!0})],ds.prototype,"visibleSublayers",null),ds=v([B("esri.layers.mixins.ExportImageParameters")],ds);async function k0e(t,e,i){let r;try{r=await createImageBitmap(t)}catch(a){throw new ie("request:server",`Unable to load ${e}`,{url:e,error:a})}return Zt(i),r}async function HI(t,e,i,r,a){let p;try{p=await createImageBitmap(t)}catch(y){throw new ie("request:server",`Unable to load tile ${e}/${i}/${r}`,{error:y,level:e,row:i,col:r})}return Zt(a),p}const Rn=[];function ND(t,e){if(L6(t.url??""))return!0;const{wkid:i}=e;for(const r of Rn){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Rn.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),Rn.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Rn.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Rn.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Rn.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),Rn.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),Rn.push([10.61,()=>new Set([102497])]),Rn.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),Rn.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),Rn.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);let bi=class extends sb(PD(ob(kD(tj(dx(wx(_x(K1(nb(ux(bx(Xa(I1))))))))))))){constructor(...e){super(...e),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(Js).then(()=>this._fetchService(i))),Promise.resolve(this)}readImageFormat(e,i){const r=i.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}writeSublayers(e,i,r,a){var M;if(!this.loaded||!e)return;const p=e.slice().reverse().flatten(({sublayers:A})=>A&&A.toArray().reverse()).toArray();let y=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&((M=this.capabilities.exportMap)!=null&&M.supportsDynamicLayers)){const A=Br(a.origin);if(A===Me.PORTAL_ITEM){const C=this.createSublayersForOrigin("service").sublayers;y=xT(p,C,Me.SERVICE)}else if(A>Me.PORTAL_ITEM){const C=this.createSublayersForOrigin("portal-item");y=xT(p,C.sublayers,Br(C.origin))}}const m=[],_={writeSublayerStructure:y,...a};let x=y;p.forEach(A=>{const C=A.write({},_);m.push(C),x=x||A.originOf("visible")==="user"}),m.some(A=>Object.keys(A).length>1)&&(i.layers=m),x&&(i.visibleLayers=p.filter(A=>A.visible).map(A=>A.id))}createExportImageParameters(e,i,r,a){const p=a&&a.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const y=new ds({layer:this,floors:a==null?void 0:a.floors,scale:YR({extent:e,width:i})*p}),m=y.toJSON();y.destroy();const _=!a||!a.rotation||this.version<10.3?{}:{rotation:-a.rotation},x=e&&e.spatialReference,M=x.wkid||JSON.stringify(x.toJSON());m.dpi*=p;const A={};if(a!=null&&a.timeExtent){const{start:C,end:N}=a.timeExtent.toJSON();A.time=C&&N&&C===N?""+C:`${C??"null"},${N??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(A.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:M,imageSR:M,size:i+","+r,...m,..._,...A}}async fetchImage(e,i,r,a){const{data:p}=await this._fetchImage("image",e,i,r,a);return p}async fetchImageBitmap(e,i,r,a){const{data:p,url:y}=await this._fetchImage("blob",e,i,r,a);return k0e(p,y,a==null?void 0:a.signal)}async fetchRecomputedExtents(e={}){const i={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await ot(this.url,i),{extent:a,fullExtent:p,timeExtent:y}=r,m=a||p;return{fullExtent:m&&vt.fromJSON(m),timeExtent:y&&ln.fromJSON({start:y[0],end:y[1]})}}loadAll(){return S2(this,e=>{e(this.allSublayers)})}serviceSupportsSpatialReference(e){return ND(this,e)}async _fetchImage(e,i,r,a,p){var _,x,M;const y={responseType:e,signal:(p==null?void 0:p.signal)??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(i,r,a,p),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},m=this.parsedUrl.path+"/export";if(((_=y.query)==null?void 0:_.dynamicLayers)!=null&&!((M=(x=this.capabilities)==null?void 0:x.exportMap)!=null&&M.supportsDynamicLayers))throw new ie("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:y.query});try{const{data:A}=await ot(m,y);return{data:A,url:m}}catch(A){throw dr(A)?A:new ie("mapimagelayer:image-fetch-error",`Unable to load image: ${m}`,{error:A})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:i,ssl:r}=await ot(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl})}};v([S({type:Au})],bi.prototype,"dateFieldsTimeReference",void 0),v([S({type:Boolean})],bi.prototype,"datesInUnknownTimezone",void 0),v([S()],bi.prototype,"dpi",void 0),v([S()],bi.prototype,"gdbVersion",void 0),v([S()],bi.prototype,"imageFormat",void 0),v([ge("imageFormat",["supportedImageFormatTypes"])],bi.prototype,"readImageFormat",null),v([S({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],bi.prototype,"imageMaxHeight",void 0),v([S({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],bi.prototype,"imageMaxWidth",void 0),v([S()],bi.prototype,"imageTransparency",void 0),v([S({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],bi.prototype,"isReference",void 0),v([S({json:{read:!1,write:!1}})],bi.prototype,"labelsVisible",void 0),v([S({type:["ArcGISMapServiceLayer"]})],bi.prototype,"operationalLayerType",void 0),v([S({json:{read:!1,write:!1}})],bi.prototype,"popupEnabled",void 0),v([S({type:Au})],bi.prototype,"preferredTimeReference",void 0),v([S()],bi.prototype,"sourceJSON",void 0),v([S({json:{write:{ignoreOrigin:!0}}})],bi.prototype,"sublayers",void 0),v([$e("sublayers",{layers:{type:[iy]},visibleLayers:{type:[jt]}})],bi.prototype,"writeSublayers",null),v([S({type:["show","hide","hide-children"]})],bi.prototype,"listMode",void 0),v([S({json:{read:!1},readOnly:!0,value:"map-image"})],bi.prototype,"type",void 0),v([S(px)],bi.prototype,"url",void 0),bi=v([B("esri.layers.MapImageLayer")],bi);const O0e=bi,Fwe=Object.freeze(Object.defineProperty({__proto__:null,default:O0e},Symbol.toStringTag,{value:"Module"}));let C0e=class{constructor(e,i=0,r=e.lods[e.lods.length-1].level){this.tileInfo=e,this.minLOD=i,this.maxLOD=r,e.lodAt(i)||(this.minLOD=e.lods[0].level),e.lodAt(r)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,i,r){var p;const a=(p=this.tileInfo)==null?void 0:p.lodAt(e);return!a||e<this.minLOD||e>this.maxLOD?"unavailable":a.cols&&a.rows?r>=a.cols[0]&&r<=a.cols[1]&&i>=a.rows[0]&&i<=a.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,i,r,a){await Gg(a);const p=this.getAvailability(e,i,r);if(p==="unavailable")throw new ie("tile-map:tile-unavailable","Tile is not available",{level:e,row:i,col:r});return p}async fetchAvailabilityUpsample(e,i,r,a,p){await Gg(p),a.level=e,a.row=i,a.col=r;const y=this.tileInfo;return y.updateTileInfo(a),this.fetchAvailability(e,i,r,p).catch(m=>{if(dr(m))throw m;if(y.upsampleTile(a))return this.fetchAvailabilityUpsample(a.level,a.row,a.col,a,p);throw m})}};var S4;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(S4||(S4={}));function P0e(t,e=!1){return t<=EF?e?new Array(t).fill(0):new Array(t):new Uint32Array(t)}let WI=class x4{constructor(e){this._validateJSON(e);const{location:i,data:r}=e;this.location=Object.freeze(se(i));const a=this.location.width,p=this.location.height;let y=!0,m=!0;const _=Math.ceil(a*p/32),x=P0e(_);let M=0;for(let A=0;A<r.length;A++){const C=A%32;r[A]?(m=!1,x[M]|=1<<C):y=!1,C===31&&++M}m?(this._availability="unavailable",this.byteSize=40):y?(this._availability="available",this.byteSize=40):(this._availability=x,this.byteSize=40+IF(x))}getAvailability(e,i){if(this._availability==="unavailable"||this._availability==="available")return this._availability;const r=(e-this.location.top)*this.location.width+(i-this.location.left),a=r%32,p=r>>5,y=this._availability;return p<0||p>y.length?"unknown":y[p]&1<<a?"available":"unavailable"}static fromDefinition(e,i){const r=e.service.request||ot,{row:a,col:p,width:y,height:m}=e,_={query:{f:"json"}};return i=i?{..._,...i}:_,r(N0e(e),i).then(x=>x.data).catch(x=>{if(x&&x.details&&x.details.httpStatus===422)return{location:{top:a,left:p,width:y,height:m},valid:!0,data:_F(y*m,0)};throw x}).then(x=>{if(x.location&&(x.location.top!==a||x.location.left!==p||x.location.width!==y||x.location.height!==m))throw new ie("tilemap:location-mismatch","Tilemap response for different location than requested",{response:x,definition:{top:a,left:p,width:y,height:m}});return x4.fromJSON(x)})}static fromJSON(e){return Object.freeze(new x4(e))}_validateJSON(e){if(!e||!e.location)throw new ie("tilemap:missing-location","Location missing from tilemap response");if(e.valid===!1)throw new ie("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new ie("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new ie("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new ie("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}};function JI(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function N0e(t){var r;let e;if((r=t.service.tileServers)!=null&&r.length){const a=t.service.tileServers;e=`${a&&a.length?a[t.row%a.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else e=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const i=t.service.query;return i&&(e=`${e}?${i}`),e}var Wh;let To=Wh=class extends je{constructor(t){super(t),this._pendingTilemapRequests={},this.request=ot,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new Pj(2*S4.MEGABYTES),this.addHandles([Ee(()=>{const{layer:t}=this;return[t==null?void 0:t.parsedUrl,t==null?void 0:t.tileServers,t==null?void 0:t.apiKey,t==null?void 0:t.customParameters]},()=>this._initializeTilemapDefinition(),St)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(t,e,i,r){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return Promise.reject(new ie("tilemap-cache:level-unavailable",`Level ${t} is unavailable in the service`));const a=this._tmpTilemapDefinition,p=this._tilemapFromCache(t,e,i,a);if(p)return Promise.resolve(p);const y=r&&r.signal;return r={...r,signal:null},new Promise((m,_)=>{Ss(y,()=>_(hi()));const x=JI(a);let M=this._pendingTilemapRequests[x];if(!M){M=WI.fromDefinition(a,r).then(C=>(this._tilemapCache.put(x,C,C.byteSize),C));const A=()=>delete this._pendingTilemapRequests[x];this._pendingTilemapRequests[x]=M,M.then(A,A)}M.then(m,_)})}getAvailability(t,e,i){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return"unavailable";const r=this._tilemapFromCache(t,e,i,this._tmpTilemapDefinition);return r?r.getAvailability(e,i):"unknown"}fetchAvailability(t,e,i,r){return!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD?Promise.reject(new ie("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i})):this.fetchTilemap(t,e,i,r).catch(a=>a).then(a=>{if(a instanceof WI){const p=a.getAvailability(e,i);if(p==="unavailable")throw new ie("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i});return p}if(dr(a))throw a;return"unknown"})}fetchAvailabilityUpsample(t,e,i,r,a){r.level=t,r.row=e,r.col=i;const p=this.layer.tileInfo;p.updateTileInfo(r);const y=this.fetchAvailability(t,e,i,a).catch(m=>{if(dr(m))throw m;if(p.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,a);throw m});return this._fetchAvailabilityUpsamplePrefetch(r.id,t,e,i,a,y),y}async _fetchAvailabilityUpsamplePrefetch(t,e,i,r,a,p){if(!this._prefetchingEnabled||t==null)return;const y=`prefetch-${t}`;if(this.hasHandles(y))return;const m=new AbortController;p.then(()=>m.abort(),()=>m.abort());let _=!1;const x=jo(()=>{_||(_=!0,m.abort())});if(this.addHandles(x,y),await cz(10,m.signal).catch(()=>{}),_||(_=!0,this.removeHandles(y)),tn(m))return;const M=new sP(t,e,i,r),A={...a,signal:m.signal},C=this.layer.tileInfo;for(let N=0;Wh._prefetches.length<Wh._maxPrefetch&&C.upsampleTile(M);++N){const j=this.fetchAvailability(M.level,M.row,M.col,A);Wh._prefetches.push(j);const D=()=>{Wh._prefetches.removeUnordered(j)};j.then(D,D)}}_initializeTilemapDefinition(){var r;if(!this.layer.parsedUrl)return;const{parsedUrl:t,apiKey:e,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:t.path,query:Su({...t.query,...i,token:e??((r=t.query)==null?void 0:r.token)}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(t,e,i,r){r.level=t,r.row=e-e%this.size,r.col=i-i%this.size;const a=JI(r);return this._tilemapCache.get(a)}get test(){const t=this;return{get prefetchingEnabled(){return t._prefetchingEnabled},set prefetchingEnabled(e){t._prefetchingEnabled=e},hasTilemap:(e,i,r)=>!!t._tilemapFromCache(e,i,r,t._tmpTilemapDefinition)}}};To._maxPrefetch=4,To._prefetches=new gu({initialSize:Wh._maxPrefetch}),v([S({constructOnly:!0})],To.prototype,"layer",void 0),v([S({constructOnly:!0})],To.prototype,"minLOD",void 0),v([S({constructOnly:!0})],To.prototype,"maxLOD",void 0),v([S({constructOnly:!0})],To.prototype,"request",void 0),v([S({constructOnly:!0})],To.prototype,"size",void 0),To=Wh=v([B("esri.layers.support.TilemapCache")],To);const R0e=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){var i,r;(r=(i=this.tilemapCache)==null?void 0:i.destroy)==null||r.call(i)}readMinScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}readMaxScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,r,a){var M;const p=(M=r.capabilities)==null?void 0:M.includes("Tilemap");let{minLOD:y,maxLOD:m,minScale:_,maxScale:x}=r;if(y==null&&m==null&&_!==0&&x!==0){const A=C=>Math.round(1e4*C)/1e4;_=A(_||r.tileInfo.lods[0].scale),x=A(x||r.tileInfo.lods[r.tileInfo.lods.length-1].scale);for(const C of r.tileInfo.lods){const N=A(C.scale);y=N>=_?C.level:y,m=N>=x?C.level:m}}if(p)return new To({layer:this,minLOD:y,maxLOD:m});if(r.tileInfo){const A=new R9;return A.read(r.tileInfo,a),new C0e(A,y,m)}return null}};return v([S({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),v([S()],e.prototype,"minScale",void 0),v([ge("service","minScale")],e.prototype,"readMinScale",null),v([S()],e.prototype,"maxScale",void 0),v([ge("service","maxScale")],e.prototype,"readMaxScale",null),v([S({type:Je})],e.prototype,"spatialReference",void 0),v([S({readOnly:!0})],e.prototype,"supportsBlankTile",null),v([S({type:R9})],e.prototype,"tileInfo",void 0),v([S()],e.prototype,"tilemapCache",void 0),v([ge("service","tilemapCache",["capabilities","tileInfo"])],e.prototype,"readTilemapCache",null),v([S()],e.prototype,"version",void 0),e=v([B("esri.layers.mixins.ArcGISCachedService")],e),e};var $4;const KI=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let Oi=$4=class extends sb(ob(kD(R0e(tj(wx(_x(dx(K1(Xa(nb(ux(bx(I1))))))))))))){constructor(...t){super(...t),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(Js).then(()=>this._fetchService(e))),Promise.resolve(this)}get attributionDataUrl(){var e;const t=(e=this.parsedUrl)==null?void 0:e.path.toLowerCase();return t?this._getDefaultAttribution(this._getMapName(t)):null}readSpatialReference(t,e){return(t=t||e.tileInfo&&e.tileInfo.spatialReference)&&Je.fromJSON(t)}writeSublayers(t,e,i,r){if(!this.loaded||!t)return;const a=t.slice().reverse().flatten(({sublayers:m})=>m&&m.toArray().reverse()).toArray(),p=[],y={writeSublayerStructure:!1,...r};a.forEach(m=>{const _=m.write({},y);p.push(_)}),p.some(m=>Object.keys(m).length>1)&&(e.layers=p)}get tileServers(){var t;return this._getDefaultTileServers((t=this.parsedUrl)==null?void 0:t.path)}castTileServers(t){return Array.isArray(t)?t.map(e=>or(e).path):null}fetchTile(t,e,i,r={}){const{signal:a}=r,p=this.getTileUrl(t,e,i),y={responseType:"image",signal:a,query:{...this.refreshParameters}};return ot(p,y).then(m=>m.data)}async fetchImageBitmapTile(t,e,i,r={}){const{signal:a}=r;if(this.fetchTile!==$4.prototype.fetchTile){const _=await this.fetchTile(t,e,i,r);return HI(_,t,e,i,a)}const p=this.getTileUrl(t,e,i),y={responseType:"blob",signal:a,query:{...this.refreshParameters}},{data:m}=await ot(p,y);return HI(m,t,e,i,a)}getTileUrl(t,e,i){var y,m;const r=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,a=Su({...(y=this.parsedUrl)==null?void 0:y.query,blankTile:!r&&null,...this.customParameters,token:this.apiKey}),p=this.tileServers;return`${p&&p.length?p[e%p.length]:(m=this.parsedUrl)==null?void 0:m.path}/tile/${t}/${e}/${i}${a?"?"+a:""}`}loadAll(){return S2(this,t=>{t(this.allSublayers)})}_fetchService(t){return new Promise((e,i)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new ie("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void e({data:this.sourceJSON})}if(!this.parsedUrl)throw new ie("tile-layer:undefined-url","layer's url is not defined");const r=Gu(this.parsedUrl.path);if(r!=null&&r.serverType==="ImageServer")throw new ie("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");ot(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e,i)}).then(e=>{let i=this.url;if(e.ssl&&(i=this.url=i.replace(/^http:/i,"https:")),this.sourceJSON=e.data,this.read(e.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!L6(i))return this._fetchServerVersion(i,t).then(r=>{this.read({currentVersion:r})}).catch(()=>{})})}_fetchServerVersion(t,e){if(!Gee(t))return Promise.reject();const i=t.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return ot(i,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(r=>{if(r.data&&r.data.currentVersion)return r.data.currentVersion;throw new ie("tile-layer:version-not-available")})}_getMapName(t){const e=t.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return e?e[2]:void 0}_getDefaultAttribution(t){if(t==null)return null;let e;t=t.toLowerCase();for(let i=0,r=KI.length;i<r;i++)if(e=KI[i],e.toLowerCase().includes(t))return bs("//static.arcgis.com/attribution/"+e);return null}_getDefaultTileServers(t){if(t==null)return[];const e=t.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,i=t.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return e||i?[t,t.replace(e?/server\.arcgisonline/i:/services\.arcgisonline/i,e?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[RD]}};v([S({readOnly:!0})],Oi.prototype,"attributionDataUrl",null),v([S({type:["show","hide","hide-children"]})],Oi.prototype,"listMode",void 0),v([S({json:{read:!0,write:!0}})],Oi.prototype,"blendMode",void 0),v([S({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Oi.prototype,"isReference",void 0),v([S({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],Oi.prototype,"operationalLayerType",void 0),v([S({type:Boolean})],Oi.prototype,"resampling",void 0),v([S()],Oi.prototype,"sourceJSON",void 0),v([S({type:Je})],Oi.prototype,"spatialReference",void 0),v([ge("spatialReference",["spatialReference","tileInfo"])],Oi.prototype,"readSpatialReference",null),v([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Oi.prototype,"path",void 0),v([S({readOnly:!0})],Oi.prototype,"sublayers",void 0),v([$e("sublayers",{layers:{type:[iy]}})],Oi.prototype,"writeSublayers",null),v([S({json:{read:!1,write:!1}})],Oi.prototype,"popupEnabled",void 0),v([S()],Oi.prototype,"tileServers",null),v([It("tileServers")],Oi.prototype,"castTileServers",null),v([S({readOnly:!0,json:{read:!1}})],Oi.prototype,"type",void 0),v([S(px)],Oi.prototype,"url",void 0),Oi=$4=v([B("esri.layers.TileLayer")],Oi);const RD=Symbol("default-fetch-tile");Oi.prototype.fetchTile[RD]=!0;const LD=Oi,Vwe=Object.freeze(Object.defineProperty({__proto__:null,default:LD},Symbol.toStringTag,{value:"Module"}));var T4;let Lh=T4=class extends de{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new T4({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([S({type:String,json:{write:!0}})],Lh.prototype,"expression",void 0),v([S({type:String,json:{write:!0}})],Lh.prototype,"name",void 0),v([S({type:["boolean","date","number","string"],json:{write:!0}})],Lh.prototype,"returnType",void 0),v([S({type:String,json:{write:!0}})],Lh.prototype,"title",void 0),Lh=T4=v([B("esri.form.ExpressionInfo")],Lh);const L0e=Lh;let jh=class extends de{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};v([S({type:String,json:{write:!0}})],jh.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],jh.prototype,"label",void 0),v([S()],jh.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],jh.prototype,"visibilityExpression",void 0),jh=v([B("esri.form.elements.Element")],jh);const vd=jh;var I4;let Ag=I4=class extends de{constructor(t){super(t),this.type=null}clone(){return new I4({type:this.type})}};v([S({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Ag.prototype,"type",void 0),Ag=I4=v([B("esri.form.elements.inputs.AttachmentInput")],Ag);const j0e=Ag;var M4;let Dh=M4=class extends vd{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new M4({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};v([S({type:String,json:{write:!0}})],Dh.prototype,"attachmentKeyword",void 0),v([S({type:Boolean,json:{write:!0}})],Dh.prototype,"editable",void 0),v([S({type:j0e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Dh.prototype,"input",void 0),v([S({type:["attachment"],json:{read:!1,write:!0}})],Dh.prototype,"type",void 0),Dh=M4=v([B("esri.form.elements.AttachmentElement")],Dh);const YI=Dh;let kg=class extends de{constructor(e){super(e),this.type=null}};v([S()],kg.prototype,"type",void 0),kg=v([B("esri.form.elements.inputs.Input")],kg);const zd=kg;let hf=class extends zd{constructor(e){super(e),this.maxLength=null,this.minLength=0}};v([S({type:Number,json:{write:!0}})],hf.prototype,"maxLength",void 0),v([S({type:Number,json:{write:!0}})],hf.prototype,"minLength",void 0),hf=v([B("esri.form.elements.inputs.TextInput")],hf);const qx=hf;var E4;let Og=E4=class extends qx{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new E4({maxLength:this.maxLength,minLength:this.minLength})}};v([S({type:["barcode-scanner"],json:{read:!1,write:!0}})],Og.prototype,"type",void 0),Og=E4=v([B("esri.form.elements.inputs.BarcodeScannerInput")],Og);const D0e=Og;var A4;let Ep=A4=class extends zd{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new A4({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};v([S({type:String,json:{write:!0}})],Ep.prototype,"noValueOptionLabel",void 0),v([S({type:Boolean,json:{write:!0}})],Ep.prototype,"showNoValueOption",void 0),v([S({type:["combo-box"],json:{read:!1,write:!0}})],Ep.prototype,"type",void 0),Ep=A4=v([B("esri.form.elements.inputs.ComboBoxInput")],Ep);const F0e=Ep;var k4;function ZI(t){return t!=null?new Date(t):null}function XI(t){return t?t.getTime():null}let Ln=k4=class extends zd{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return ZI(e.max)}writeMax(t,e){e.max=XI(t)}readMin(t,e){return ZI(e.min)}writeMin(t,e){e.min=XI(t)}clone(){return new k4({includeTime:this.includeTime,max:this.max,min:this.min})}};v([S({type:Boolean,json:{write:!0}})],Ln.prototype,"includeTime",void 0),v([S({type:Date,json:{type:Number,write:!0}})],Ln.prototype,"max",void 0),v([ge("max")],Ln.prototype,"readMax",null),v([$e("max")],Ln.prototype,"writeMax",null),v([S({type:Date,json:{type:Number,write:!0}})],Ln.prototype,"min",void 0),v([ge("min")],Ln.prototype,"readMin",null),v([$e("min")],Ln.prototype,"writeMin",null),v([S({type:["datetime-picker"],json:{read:!1,write:!0}})],Ln.prototype,"type",void 0),Ln=k4=v([B("esri.form.elements.inputs.DateTimePickerInput")],Ln);const z0e=Ln;var O4;let Ap=O4=class extends zd{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new O4({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};v([S({type:String,json:{write:!0}})],Ap.prototype,"noValueOptionLabel",void 0),v([S({type:Boolean,json:{write:!0}})],Ap.prototype,"showNoValueOption",void 0),v([S({type:["radio-buttons"],json:{read:!1,write:!0}})],Ap.prototype,"type",void 0),Ap=O4=v([B("esri.form.elements.inputs.RadioButtonsInput")],Ap);const V0e=Ap;var C4;let kp=C4=class extends zd{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new C4({offValue:this.offValue,onValue:this.onValue})}};v([S({type:[String,Number],json:{write:!0}})],kp.prototype,"offValue",void 0),v([S({type:[String,Number],json:{write:!0}})],kp.prototype,"onValue",void 0),v([S({type:["switch"],json:{read:!1,write:!0}})],kp.prototype,"type",void 0),kp=C4=v([B("esri.form.elements.inputs.SwitchInput")],kp);const G0e=kp;var P4;let Cg=P4=class extends qx{constructor(t){super(t),this.type="text-area"}clone(){return new P4({maxLength:this.maxLength,minLength:this.minLength})}};v([S({type:["text-area"],json:{read:!1,write:!0}})],Cg.prototype,"type",void 0),Cg=P4=v([B("esri.form.elements.inputs.TextAreaInput")],Cg);const q0e=Cg;var N4;let Pg=N4=class extends qx{constructor(t){super(t),this.type="text-box"}clone(){return new N4({maxLength:this.maxLength,minLength:this.minLength})}};v([S({type:["text-box"],json:{read:!1,write:!0}})],Pg.prototype,"type",void 0),Pg=N4=v([B("esri.form.elements.inputs.TextBoxInput")],Pg);const U0e=Pg,B0e={base:zd,key:"type",typeMap:{"barcode-scanner":D0e,"combo-box":F0e,"datetime-picker":z0e,"radio-buttons":V0e,switch:G0e,"text-area":q0e,"text-box":U0e}};var R4;const jD="esri.form.elements.FieldElement",QI=me.getLogger(jD);let Us=R4=class extends vd{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return P3(QI,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(t){P3(QI,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",t)}clone(){return new R4({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};v([S({types:Zj,json:{read:{reader:kx},write:!0}})],Us.prototype,"domain",void 0),v([S({type:Boolean,json:{write:!0}})],Us.prototype,"editable",null),v([S({type:String,json:{write:!0}})],Us.prototype,"editableExpression",void 0),v([S({type:String,json:{write:!0}})],Us.prototype,"fieldName",void 0),v([S({type:String,json:{write:!0}})],Us.prototype,"hint",void 0),v([S({types:B0e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Us.prototype,"input",void 0),v([S({type:String,json:{write:!0}})],Us.prototype,"requiredExpression",void 0),v([S({type:String,json:{read:!1,write:!0}})],Us.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Us.prototype,"valueExpression",void 0),Us=R4=v([B(jD)],Us);const eM=Us;var L4;let Ma=L4=class extends vd{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new L4({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:se(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};v([S({type:Number,json:{write:!0}})],Ma.prototype,"displayCount",void 0),v([S({type:["list"],json:{write:!0}})],Ma.prototype,"displayType",void 0),v([S({type:String,json:{write:!0}})],Ma.prototype,"editableExpression",void 0),v([S({type:[l6],json:{write:!0}})],Ma.prototype,"orderByFields",void 0),v([S({type:Number,json:{write:!0}})],Ma.prototype,"relationshipId",void 0),v([S({type:["relationship"],json:{read:!1,write:!0}})],Ma.prototype,"type",void 0),Ma=L4=v([B("esri.form.elements.RelationshipElement")],Ma);const tM=Ma;function DD(t){return{typesWithGroup:{base:vd,key:"type",typeMap:{attachment:YI,field:eM,group:t,relationship:tM}},typesWithoutGroup:{base:vd,key:"type",typeMap:{attachment:YI,field:eM,relationship:tM}}}}function FD(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(a=>r[a.type]).map(a=>r[a.type].fromJSON(a))}function zD(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(a=>r[a.type]).map(a=>a.toJSON())}function VD(t,e,i=!0){return t?t.map(r=>Do(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var j4;let Mo=j4=class extends vd{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return VD(t,s3,!1)}readElements(t,e){return FD(e.formElements,s3,!1)}writeElements(t,e){e.formElements=zD(t,s3,!1)}clone(){return new j4({description:this.description,elements:se(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};v([S({json:{write:!0}})],Mo.prototype,"elements",void 0),v([It("elements")],Mo.prototype,"castElements",null),v([ge("elements",["formElements"])],Mo.prototype,"readElements",null),v([$e("elements")],Mo.prototype,"writeElements",null),v([S({type:["collapsed","expanded"],json:{write:!0}})],Mo.prototype,"initialState",void 0),v([S({type:String,json:{read:!1,write:!0}})],Mo.prototype,"type",void 0),Mo=j4=v([B("esri.form.elements.GroupElement")],Mo);const s3=DD(Mo),H0e=Mo;var D4;const n3=DD(H0e);let jn=D4=class extends de{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return VD(t,n3)}readElements(t,e){return FD(e.formElements,n3)}writeElements(t,e){e.formElements=zD(t,n3)}clone(){return new D4({description:this.description,expressionInfos:se(this.expressionInfos),elements:se(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};v([S({type:String,json:{write:!0}})],jn.prototype,"description",void 0),v([S({json:{write:!0}})],jn.prototype,"elements",void 0),v([It("elements")],jn.prototype,"castElements",null),v([ge("elements",["formElements"])],jn.prototype,"readElements",null),v([$e("elements")],jn.prototype,"writeElements",null),v([S({type:[L0e],json:{write:!0}})],jn.prototype,"expressionInfos",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],jn.prototype,"preserveFieldValuesWhenHidden",void 0),v([S({type:String,json:{write:!0}})],jn.prototype,"title",void 0),jn=D4=v([B("esri.form.FormTemplate")],jn);const W0e=jn;function iM(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const a of r)a.length>2&&(a[2]*=i)}function J0e(t,e,i){if(!t&&!e||!i)return;const r=od(i);rM(t,i,r),rM(e,i,r)}function rM(t,e,i){if(t)for(const r of t)K0e(r.geometry,e,i)}function K0e(t,e,i){if(t==null||!t.spatialReference||Ci(t.spatialReference,e))return;const r=od(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)iM(t,t.rings,r);else if("paths"in t)iM(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const a of t.points)a.length>2&&(a[2]*=r)}}let Y0e=0;const GD="esri.layers.graphics.sources.MemorySource",o3=me.getLogger(GD);let ka=class extends Fo.LoadableMixin(w2(Xa(De))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);c4(e,this.layer.spatialReference,r);const a=db.fromJSON(r);if(!this._requiresClientGraphicMapping())return a;const p=this.layer.objectIdField;for(const y of a.features){const m=y.attributes[p],_=this._idToClientGraphic.get(m);_&&(y.geometry=_.geometry)}return a.geometryType=this.layer.geometryType,a}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new ie("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return c4(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:vt.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new ie("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const a=[],p=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const y=M=>"objectId"in M&&M.objectId!=null?M.objectId:"attributes"in M&&M.attributes[i]!=null?M.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const M of e.deleteFeatures){const A=y(M);A!=null&&a.push(A)}const m=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const M of e.updateFeatures)if(p.push(this._serializeFeature(M)),m){const A=y(M);A!=null&&m.set(A,M)}}J0e(r?r.features:null,p,this.layer.spatialReference);const{fullExtent:_,featureEditResults:x}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:p,deletes:a});return this.fullExtent=_,r&&r.finish(x.uidToObjectId),this._updateClientGraphicIds(m,x),this._createEditsResult(x)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:a}of e)a==null||a.type!=="mesh"||a.hasExtent||a.loaded||r.push(a.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const r of i.updateResults){if(!r.success)continue;const a=e.get(r.objectId);a!=null&&this._addIdToClientGraphic(a)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new ie("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let a=null;for(let y=0;y<e.length;y++){const m=e[y],_=this._serializeFeature(m);a||m.geometry==null||(a=m.geometry.type),r[y]=_,i.set(`${_.uid}`,m)}const p=this;return{features:r,inferredGeometryType:a,finish(y){const m=p.sourceJSON.objectIdField;for(const _ in y){const x=y[_],M=i.get(_);M&&(M.attributes||(M.attributes={}),x===-1?delete M.attributes[m]:M.attributes[m]=x,p._addIdToClientGraphic(M))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[i];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),a=(Y0e++).toString();return r?{uid:a,geometry:r.toJSON(),attributes:i}:{uid:a,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?on.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await nZ("MemorySourceWorker",{strategy:le("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:i,spatialReference:r,objectIdField:a,hasM:p,hasZ:y,timeInfo:m}=this.layer,_=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const x=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",N=>{o3.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),N.preventDefault()}));const M={features:x.features,fields:i&&i.map(N=>N.toJSON()),geometryType:Q3.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&p,hasZ:this._layerOrSourceGeometryType==="mesh"||y,objectIdField:a,spatialReference:_?null:r&&r.toJSON(),timeInfo:m?m.toJSON():null},A=await this._connection.invoke("load",M,{signal:e});for(const N of A.warnings)o3.warn(N.message,{layer:this.layer,warning:N});A.featureErrors.length&&o3.warn(`Encountered ${A.featureErrors.length} validation errors while loading features`,A.featureErrors);const C=A.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(x.inferredGeometryType)&&(C.geometryType=Q3.toJSON(x.inferredGeometryType)),this.sourceJSON=C,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),x.finish(A.assignedObjectIds)}};v([uS({Type:Nr,ensureType:ri(Nr)})],ka.prototype,"itemType",void 0),v([S()],ka.prototype,"type",void 0),v([S({constructOnly:!0})],ka.prototype,"layer",void 0),v([S({readOnly:!0})],ka.prototype,"_workerGeometryType",null),v([S()],ka.prototype,"sourceJSON",void 0),ka=v([B(GD)],ka);const qD=new Wo.EventEmitter;function Hwe(t,e,i=!1){const r=rn();return i=e==null||i,qD.emit("apply-edits",{serviceUrl:t,layerId:e,mayReceiveServiceEdits:i,result:r.promise}),r}const UD="esri.layers.mixins.EditBusLayer",BD=Symbol(UD);function Wwe(t){return t!=null&&typeof t=="object"&&BD in t}const Z0e=t=>{var e;let i=class extends t{constructor(...r){super(...r),this[e]=!0,this.when().then(()=>{this.own([qD.on("apply-edits",a=>{const{serviceUrl:p,layerId:y,mayReceiveServiceEdits:m,result:_}=a,x=p===this.url,M=y!=null&&this.layerId!=null&&y===this.layerId;if(!x||!M&&!m)return;const A=_.then(C=>{var j;if(M&&(C.addedFeatures.length||C.updatedFeatures.length||C.deletedFeatures.length||C.addedAttachments.length||C.updatedAttachments.length||C.deletedAttachments.length))return this.emit("edits",se(C)),C;const N=(j=C.editedFeatures)==null?void 0:j.find(({layerId:D})=>D===this.layerId);if(N){const{adds:D,updates:z,deletes:W}=N.editedFeatures,Y={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:D?D.map(({attributes:K})=>({objectId:this.objectIdField&&K[this.objectIdField],globalId:this.globalIdField&&K[this.globalIdField]})):[],deletedFeatures:W?W.map(({attributes:K})=>({objectId:this.objectIdField&&K[this.objectIdField],globalId:this.globalIdField&&K[this.globalIdField]})):[],updatedFeatures:z?z.map(({current:{attributes:K}})=>({objectId:this.objectIdField&&K[this.objectIdField],globalId:this.globalIdField&&K[this.globalIdField]})):[],editedFeatures:se(C.editedFeatures),exceededTransferLimit:!1};return this.emit("edits",Y),Y}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:se(C.editedFeatures),exceededTransferLimit:!1}});this.emit("apply-edits",{result:A})})])},()=>{})}};return e=BD,i=v([B(UD)],i),i};var F4;const a3=new ft({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),l3=new ft({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Io=F4=class extends de{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:a,objectIds:p,units:y,distance:m}=this;return new Ms({geometry:se(i),objectIds:se(p),spatialRelationship:r,timeExtent:se(a),where:e,units:y,distance:m,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:a,units:p,distance:y}=this;return new F4({geometry:se(e),objectIds:se(a),spatialRelationship:i,timeExtent:se(r),where:t,units:p,distance:y})}};v([S({type:String,json:{write:!0}})],Io.prototype,"where",void 0),v([S({types:Nu,json:{write:!0}})],Io.prototype,"geometry",void 0),v([S({type:a3.apiValues,json:{name:"spatialRel",read:{reader:a3.read},write:{allowNull:!1,writer:a3.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Io.prototype,"spatialRelationship",void 0),v([S({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Io.prototype,"distance",void 0),v([S({type:[Number],json:{write:!0}})],Io.prototype,"objectIds",void 0),v([S({type:l3.apiValues,json:{read:l3.read,write:{writer:l3.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Io.prototype,"units",void 0),v([S({type:ln,json:{write:!0}})],Io.prototype,"timeExtent",void 0),Io=F4=v([B("esri.layers.support.FeatureFilter")],Io);const X0e=Io;var z4;const sM={read:{reader:gx},write:{writer:vx,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},nM={read:{reader:gx},write:{writer:vx,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},oM={name:"showExcludedLabels",default:!0};let Fh=z4=class extends de{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var r,a;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const p=Object.keys(i.filter);if(p.length>1||p[0]!=="where")return(r=e.messages)==null||r.push(new ie("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(a=e.messages)==null||a.push(new ie("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new z4({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};v([S({type:X0e,json:{write:{allowNull:!0,writer(t,e,i,r){const a=t==null?void 0:t.write({},r);a&&Object.keys(a).length!==0?Pr(i,a,e):Pr(i,null,e)}}}})],Fh.prototype,"filter",void 0),v([S({json:{write:!0,origins:{"web-map":sM,"portal-item":sM}}})],Fh.prototype,"includedEffect",void 0),v([S({json:{write:!0,origins:{"web-map":nM,"portal-item":nM}}})],Fh.prototype,"excludedEffect",void 0),v([S({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":oM,"portal-item":oM}}})],Fh.prototype,"excludedLabelsVisible",void 0),Fh=z4=v([B("esri.layers.support.FeatureEffect")],Fh);const Q0e=Fh,aM={write:{allowNull:!0}},efe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return v([S({type:Q0e,json:{origins:{"web-map":aM,"portal-item":aM}}})],e.prototype,"featureEffect",void 0),e=v([B("esri.layers.mixins.FeatureEffectLayer")],e),e};let Ea=class extends Xt(de){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};v([S()],Ea.prototype,"creatorField",void 0),v([S()],Ea.prototype,"creationDateField",void 0),v([S()],Ea.prototype,"editorField",void 0),v([S()],Ea.prototype,"editDateField",void 0),v([S()],Ea.prototype,"realm",void 0),v([S({type:Au})],Ea.prototype,"dateFieldsTimeReference",void 0),Ea=v([B("esri.layers.support.EditFieldsInfo")],Ea);const tfe=Ea;let Eo=class extends Xt(de){constructor(e){super(e)}};v([S({constructOnly:!0,json:{write:!0}})],Eo.prototype,"name",void 0),v([S({constructOnly:!0,json:{write:!0}})],Eo.prototype,"fields",void 0),v([S({constructOnly:!0,json:{write:!0}})],Eo.prototype,"isAscending",void 0),v([S({constructOnly:!0,json:{write:!0}})],Eo.prototype,"indexType",void 0),v([S({constructOnly:!0,json:{write:!0}})],Eo.prototype,"isUnique",void 0),v([S({constructOnly:!0,json:{write:!0}})],Eo.prototype,"description",void 0),Eo=v([B("esri.layers.support.FeatureIndex")],Eo);var V4;let pi=V4=class extends de{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new V4(se({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};v([S({type:Boolean,json:{write:!0}})],pi.prototype,"cacheHint",void 0),v([S({type:qr,json:{write:!0}})],pi.prototype,"dynamicDataSource",void 0),v([S({type:String,json:{write:!0}})],pi.prototype,"gdbVersion",void 0),v([S({type:Number,json:{write:!0}})],pi.prototype,"geometryPrecision",void 0),v([S({type:Date})],pi.prototype,"historicMoment",void 0),v([$e("historicMoment")],pi.prototype,"_writeHistoricMoment",null),v([S({type:Number,json:{write:!0}})],pi.prototype,"maxAllowableOffset",void 0),v([S({type:[Number],json:{write:!0}})],pi.prototype,"objectIds",void 0),v([S({type:[String],json:{write:!0}})],pi.prototype,"orderByFields",void 0),v([S({type:[String],json:{write:!0}})],pi.prototype,"outFields",void 0),v([S({type:Je,json:{read:{source:"outSR"},write:{target:"outSR"}}})],pi.prototype,"outSpatialReference",void 0),v([S({json:{write:!0}})],pi.prototype,"relationshipId",void 0),v([S({type:Number,json:{read:{source:"resultOffset"}}})],pi.prototype,"start",void 0),v([$e("start"),$e("num")],pi.prototype,"writeStart",null),v([S({type:Number,json:{read:{source:"resultRecordCount"}}})],pi.prototype,"num",void 0),v([S({json:{write:!0}})],pi.prototype,"returnGeometry",void 0),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnZ",void 0),v([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],pi.prototype,"where",void 0),pi=V4=v([B("esri.rest.support.RelationshipQuery")],pi),pi.from=ri(pi);const Ux=pi,lM=Object.freeze(Object.defineProperty({__proto__:null,default:Ux},Symbol.toStringTag,{value:"Module"})),G4=new ft({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function ife(t,e,i,r){const a=await qu(t);if(await Bx(t,e,r),!a.addAttachment)throw new ie(r,"Layer source does not support addAttachment capability");return a.addAttachment(e,i)}function Bx(t,e,i){const{attributes:r}=e,{objectIdField:a}=t;return t.get("capabilities.data.supportsAttachment")?e?r?a&&r[a]?Promise.resolve():Promise.reject(new ie(i,`feature is missing the identifying attribute ${a}`)):Promise.reject(new ie(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new ie(i,"A feature is required to add/delete/update attachments")):Promise.reject(new ie(i,"this layer doesn't support attachments"))}async function rfe(t,e,i,r,a){const p=await qu(t);if(await Bx(t,e,a),!p.updateAttachment)throw new ie(a,"Layer source does not support updateAttachment capability");return p.updateAttachment(e,i,r)}async function sfe(t,e,i){const{applyEdits:r}=await we(()=>import("./editingSupport-bebc4167.js"),[]),a=await t.load();return r(a,a.source,e,i)}async function nfe(t,e,i){const{uploadAssets:r}=await we(()=>import("./editingSupport-bebc4167.js"),[]),a=await t.load();return r(a,a.source,e,i)}async function ofe(t,e,i,r){const a=await qu(t);if(await Bx(t,e,r),!a.deleteAttachments)throw new ie(r,"Layer source does not support deleteAttachments capability");return a.deleteAttachments(e,i)}async function afe(t,e,i){const r=(await t.load({signal:e==null?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new ie(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function lfe(t,e,i,r){var N,j;e=MD.from(e),await t.load();const a=t.source,p=t.capabilities;if(!((N=p==null?void 0:p.data)!=null&&N.supportsAttachment))throw new ie(r,"this layer doesn't support attachments");const{attachmentTypes:y,objectIds:m,globalIds:_,num:x,size:M,start:A,where:C}=e;if(!((j=p==null?void 0:p.operations)!=null&&j.supportsQueryAttachments)&&((y==null?void 0:y.length)>0||(_==null?void 0:_.length)>0||(M==null?void 0:M.length)>0||x||A||C))throw new ie(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(m!=null&&m.length||_!=null&&_.length||C))throw new ie(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!a.queryAttachments)throw new ie(r,"Layer source does not support queryAttachments capability",e);return a.queryAttachments(e)}async function ufe(t,e,i,r){const a=await qu(t);if(!a.queryObjectIds)throw new ie(r,"Layer source does not support queryObjectIds capability");return a.queryObjectIds(Ms.from(e)??t.createQuery(),i)}async function hfe(t,e,i,r){const a=await qu(t);if(!a.queryFeatureCount)throw new ie(r,"Layer source does not support queryFeatureCount capability");return a.queryFeatureCount(Ms.from(e)??t.createQuery(),i)}async function cfe(t,e,i,r){const a=await qu(t);if(!a.queryExtent)throw new ie(r,"Layer source does not support queryExtent capability");return a.queryExtent(Ms.from(e)??t.createQuery(),i)}async function pfe(t,e,i,r){const a=await qu(t);if(!a.queryRelatedFeatures)throw new ie(r,"Layer source does not support queryRelatedFeatures capability");return a.queryRelatedFeatures(Ux.from(e),i)}async function dfe(t,e,i,r){const a=await qu(t);if(!a.queryRelatedFeaturesCount)throw new ie(r,"Layer source does not support queryRelatedFeaturesCount capability");return a.queryRelatedFeaturesCount(Ux.from(e),i)}async function ffe(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await zae(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function yfe(t){const e=new Ms,i=t.get("capabilities.data"),r=t.get("capabilities.query");e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:a,timeExtent:p}=t;return e.timeExtent=a!=null&&p!=null?p.offset(-a.value,a.unit):p||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function HD(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function WD(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function mfe(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}async function qu(t){return(await t.load()).source}async function gfe(t,e){if(!gt||gt.findCredential(t))return;let i;try{const r=await _A(t,e);r&&(i=await gt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await gt.getCredential(t,{signal:r})}catch{}}async function vfe(t,e){var r;const i=(r=t.parsedUrl)==null?void 0:r.path;i&&bfe(t)&&await gfe(i,e)}function bfe(t){const e=t.editFieldsInfo;return!(!(e!=null&&e.creatorField)&&!(e!=null&&e.editorField))||(t.userHasUpdateItemPrivileges?t.hasUpdateItemRestrictions:!!t.userHasFullEditingPrivileges&&t.hasFullEditingRestrictions)}function wfe(t){var e;return!((e=t.sourceJSON)!=null&&e.isMultiServicesView)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const u3=_d({types:gC});function Hx(t,e){if(t.defaultSymbol)return t.types&&t.types.length?new Ax({defaultSymbol:u3(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:u3(i.symbol,i,e)}))}):new hb({symbol:u3(t.defaultSymbol,t,e)})}let Op=class extends Xt(de){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};v([S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Op.prototype,"shapeAreaField",void 0),v([S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Op.prototype,"shapeLengthField",void 0),v([S({type:String,json:{read:t=>NG.read(t)||RG.read(t)}})],Op.prototype,"units",void 0),Op=v([B("esri.layers.support.GeometryFieldsInfo")],Op);const _fe=Op,uM=new ft({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),hM=new ft({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Bs=class extends Xt(de){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};v([S({json:{read:uM.read,write:uM.write}})],Bs.prototype,"cardinality",void 0),v([S({json:{read:!0,write:!0}})],Bs.prototype,"composite",void 0),v([S({json:{read:!0,write:!0}})],Bs.prototype,"id",void 0),v([S({json:{read:!0,write:!0}})],Bs.prototype,"keyField",void 0),v([S({json:{read:!0,write:!0}})],Bs.prototype,"keyFieldInRelationshipTable",void 0),v([S({json:{read:!0,write:!0}})],Bs.prototype,"name",void 0),v([S({json:{read:!0,write:!0}})],Bs.prototype,"relatedTableId",void 0),v([S({json:{read:!0,write:!0}})],Bs.prototype,"relationshipTableId",void 0),v([S({json:{read:hM.read,write:hM.write}})],Bs.prototype,"role",void 0),Bs=v([B("esri.layers.support.Relationship")],Bs);const Sfe=Bs,xfe=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=Je.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(De.ofType(Eo)),this.version=void 0}readCapabilitiesFromService(i,r){return Gx(r,this.url)}get effectiveCapabilities(){var y;const i=this.capabilities;if(!i)return null;const r=se(i),{operations:a,editing:p}=r;return(y=this.sourceJSON)!=null&&y.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(a.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(a.supportsAdd=a.supportsDelete=a.supportsEditing=a.supportsQuery=a.supportsUpdate=p.supportsDeleteByOthers=p.supportsGeometryUpdate=p.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&a.supportsEditing&&(a.supportsAdd=a.supportsDelete=a.supportsUpdate=p.supportsGeometryUpdate=!0),r)}get hasFullEditingRestrictions(){var p;const i=this.capabilities;if(!i||(p=this.sourceJSON)!=null&&p.isMultiServicesView)return!1;const{operations:r,editing:a}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&a.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){var p;const i=this.capabilities;if(!i)return!1;const{operations:r,editing:a}=i;return(p=this.sourceJSON)!=null&&p.isMultiServicesView?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&a.supportsDeleteByOthers&&a.supportsGeometryUpdate&&a.supportsUpdateByOthers)}readEditingInfo(i,r){const{editingInfo:a}=r;return a?{lastEditDate:a.lastEditDate!=null?new Date(a.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return HD(r)}readObjectIdFieldFromService(i,r){return WD(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=Hee({layer:this,url:i,nonStandardUrlAllowed:!0,logger:me.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,a,p){Wee(this,i,null,r,p)}readVersion(i,r){return mfe(r)}};return v([S({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),v([ge("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),v([S({readOnly:!0})],e.prototype,"effectiveCapabilities",null),v([S({readOnly:!0})],e.prototype,"hasFullEditingRestrictions",null),v([S({readOnly:!0})],e.prototype,"hasUpdateItemRestrictions",null),v([S({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),v([S({type:Au})],e.prototype,"dateFieldsTimeReference",void 0),v([S({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),v([S({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),v([S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),v([S({readOnly:!0,type:tfe})],e.prototype,"editFieldsInfo",void 0),v([S({readOnly:!0})],e.prototype,"editingInfo",void 0),v([ge("editingInfo")],e.prototype,"readEditingInfo",null),v([S((()=>{const i=se(uhe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),v([S({type:TD,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],e.prototype,"floorInfo",void 0),v([S({type:vt,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),v([S()],e.prototype,"gdbVersion",void 0),v([S({readOnly:!0,type:_fe,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),v([S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:G4.read}}}})],e.prototype,"geometryType",void 0),v([S({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),v([S({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),v([S({readOnly:!0,type:W2})],e.prototype,"heightModelInfo",void 0),v([S({type:Date})],e.prototype,"historicMoment",void 0),v([S({readOnly:!0})],e.prototype,"isTable",void 0),v([ge("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),v([S({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),v([S(phe)],e.prototype,"minScale",void 0),v([ge("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),v([S(dhe)],e.prototype,"maxScale",void 0),v([ge("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),v([S({type:String})],e.prototype,"globalIdField",void 0),v([ge("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),v([S({type:String})],e.prototype,"objectIdField",void 0),v([ge("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),v([S({type:Au})],e.prototype,"preferredTimeReference",void 0),v([S({type:[Sfe],readOnly:!0})],e.prototype,"relationships",void 0),v([S()],e.prototype,"sourceJSON",void 0),v([S({type:Boolean})],e.prototype,"returnM",void 0),v([S({type:Boolean})],e.prototype,"returnZ",void 0),v([S({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),v([ge("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),v([S({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),v([S({type:Je,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),v([S({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),v([S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),v([S({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),v([S({type:De.ofType(Eo),readOnly:!0})],e.prototype,"indexes",void 0),v([S(px)],e.prototype,"url",null),v([$e("url")],e.prototype,"writeUrl",null),v([S({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),v([ge("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=v([B("esri.layers.mixins.FeatureLayerBase")],e),e};let Cp=class extends Xt(de){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};v([S({type:String,json:{write:!0}})],Cp.prototype,"expression",void 0),v([S({type:String,json:{write:!0}})],Cp.prototype,"title",void 0),v([S({type:String,json:{write:!0}})],Cp.prototype,"returnType",void 0),Cp=v([B("esri.layers.support.ExpressionInfo")],Cp);const Wx=Cp;var q4;let Aa=q4=class extends de{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new q4({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:se(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};v([S({type:Boolean,json:{write:!0}})],Aa.prototype,"isAutoGenerated",void 0),v([S({type:String,json:{write:!0}})],Aa.prototype,"name",void 0),v([S({type:String,json:{write:!0}})],Aa.prototype,"alias",void 0),v([S({type:String,json:{write:!0}})],Aa.prototype,"onStatisticField",void 0),v([S({type:Wx,json:{write:!0}})],Aa.prototype,"onStatisticExpression",void 0),v([S({type:String,json:{write:!0}})],Aa.prototype,"statisticType",void 0),Aa=q4=v([B("esri.layers.support.AggregateField")],Aa);const Tc=Aa;let _u=class extends de{constructor(){super(...arguments),this.type=null}};v([S({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],_u.prototype,"type",void 0),_u=v([B("esri.layers.support.FeatureReduction")],_u);var U4;const $fe="esri.layers.support.FeatureReductionBinning";let Vr=U4=class extends _u{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(a=>a.statisticType!=="avg_angle").map(a=>a.toJSON());Pr(i,r,e)}readRenderer(t,e,i){var a;const r=(a=e.drawingInfo)==null?void 0:a.renderer;return r?g1(r,e,i)??void 0:Hx(e,i)}clone(){return new U4({fields:se(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:se(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:se(this.popupTemplate),renderer:se(this.renderer)})}};v([Fe({binning:"binning"})],Vr.prototype,"type",void 0),v([Fe({geohash:"geohash"})],Vr.prototype,"binType",void 0),v([S({type:Number,range:{min:1,max:9},json:{write:!0}})],Vr.prototype,"fixedBinLevel",void 0),v([S({type:[ey],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Vr.prototype,"labelingInfo",void 0),v([S(cx)],Vr.prototype,"labelsVisible",void 0),v([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Vr.prototype,"maxScale",void 0),v([S(tb)],Vr.prototype,"popupEnabled",void 0),v([S({type:Lu,json:{name:"popupInfo",write:!0}})],Vr.prototype,"popupTemplate",void 0),v([S({type:[Tc],json:{write:!0}})],Vr.prototype,"fields",void 0),v([$e("fields")],Vr.prototype,"writeFields",null),v([S({types:X1,json:{write:{target:"drawingInfo.renderer"}}})],Vr.prototype,"renderer",void 0),v([ge("renderer",["drawingInfo.renderer"])],Vr.prototype,"readRenderer",null),Vr=U4=v([B($fe)],Vr);const JD=Vr;var B4;const Tfe="esri.layers.support.FeatureReductionCluster";function cM(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Di=B4=class extends de{constructor(t){super(t),this.type="cluster",this.clusterRadius=$t("80px"),this.clusterMinSize=$t("12px"),this.clusterMaxSize=$t("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,e,i){var a,p;const r=(a=e.drawingInfo)==null?void 0:a.renderer;return(p=r==null?void 0:r.authoringInfo)!=null&&p.isAutoGenerated?null:r?cM(r)?null:g1(r,e,i)??void 0:Hx(e,i)}readSymbol(t,e,i){var a,p;const r=(a=e.drawingInfo)==null?void 0:a.renderer;if((p=r==null?void 0:r.authoringInfo)!=null&&p.isAutoGenerated)return null;if(r&&cM(r)){const y=g1(r,e,i);return y==null?void 0:y.symbol}return null}writeSymbol(t,e,i,r){var p,y;const a=(y=(p=this.renderer)==null?void 0:p.authoringInfo)==null?void 0:y.isAutoGenerated;if(!this.renderer||a){const m=new hb({symbol:t});e.drawingInfo={renderer:m.write({},r)}}}writeFields(t,e,i){const r=t.filter(a=>a.statisticType!=="avg_angle").map(a=>a.toJSON());Pr(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>Tc.fromJSON(r))}clone(){return new B4({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:se(this.labelingInfo),labelsVisible:this.labelsVisible,fields:se(this.fields),maxScale:this.maxScale,renderer:se(this.renderer),symbol:se(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:se(this.popupTemplate)})}};v([S({type:["cluster"],readOnly:!0,json:{write:!0}})],Di.prototype,"type",void 0),v([S({type:Number,cast:t=>t==="auto"?t:$t(t),json:{write:!0}})],Di.prototype,"clusterRadius",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],Di.prototype,"clusterMinSize",void 0),v([S({type:Number,cast:$t,json:{write:!0}})],Di.prototype,"clusterMaxSize",void 0),v([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Di.prototype,"maxScale",void 0),v([S(tb)],Di.prototype,"popupEnabled",void 0),v([S({type:Lu,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Di.prototype,"popupTemplate",void 0),v([S({types:X1,json:{write:{target:"drawingInfo.renderer"}}})],Di.prototype,"renderer",void 0),v([ge("renderer",["drawingInfo.renderer"])],Di.prototype,"readRenderer",null),v([S({types:SY})],Di.prototype,"symbol",void 0),v([ge("symbol",["drawingInfo.renderer"])],Di.prototype,"readSymbol",null),v([$e("symbol")],Di.prototype,"writeSymbol",null),v([S({type:[ey],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Di.prototype,"labelingInfo",void 0),v([S(cx)],Di.prototype,"labelsVisible",void 0),v([S({type:[Tc],json:{write:!0}})],Di.prototype,"fields",void 0),v([$e("fields")],Di.prototype,"writeFields",null),v([ge("fields")],Di.prototype,"readFields",null),Di=B4=v([B(Tfe)],Di);const KD=Di;var H4;let Ng=H4=class extends _u{constructor(t){super(t),this.type="selection"}clone(){return new H4}};v([S({type:["selection"]})],Ng.prototype,"type",void 0),Ng=H4=v([B("esri.layers.support.FeatureReductionSelection")],Ng);const pM=Ng,dM={key:"type",base:_u,typeMap:{cluster:KD,binning:JD}},Ife={types:{key:"type",base:_u,typeMap:{selection:pM,cluster:KD,binning:JD}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:dM},"portal-item":{types:dM},"web-scene":{types:{key:"type",base:_u,typeMap:{selection:pM}}}}}},Kc={Base64:0,Hex:1,String:2,Raw:3},rd=8,YD=(1<<rd)-1;function mu(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function Mfe(t){const e=[];for(let i=0,r=t.length*rd;i<r;i+=rd)e[i>>5]|=(t.charCodeAt(i/rd)&YD)<<i%32;return e}function Efe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=rd)e.push(String.fromCharCode(t[i>>5]>>>i%32&YD));return e.join("")}function Afe(t){const e="0123456789abcdef",i=[];for(let r=0,a=4*t.length;r<a;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function kfe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let a=0,p=4*t.length;a<p;a+=3){const y=(t[a>>2]>>a%4*8&255)<<16|(t[a+1>>2]>>(a+1)%4*8&255)<<8|t[a+2>>2]>>(a+2)%4*8&255;for(let m=0;m<4;m++)8*a+6*m>32*t.length?r.push(e):r.push(i.charAt(y>>6*(3-m)&63))}return r.join("")}function Ofe(t,e){return t<<e|t>>>32-e}function yb(t,e,i,r,a,p){return mu(Ofe(mu(mu(e,t),mu(r,p)),a),i)}function wr(t,e,i,r,a,p,y){return yb(e&i|~e&r,t,e,a,p,y)}function _r(t,e,i,r,a,p,y){return yb(e&r|i&~r,t,e,a,p,y)}function Sr(t,e,i,r,a,p,y){return yb(e^i^r,t,e,a,p,y)}function xr(t,e,i,r,a,p,y){return yb(i^(e|~r),t,e,a,p,y)}function Cfe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,a=-1732584194,p=271733878;for(let y=0;y<t.length;y+=16){const m=i,_=r,x=a,M=p;i=wr(i,r,a,p,t[y],7,-680876936),p=wr(p,i,r,a,t[y+1],12,-389564586),a=wr(a,p,i,r,t[y+2],17,606105819),r=wr(r,a,p,i,t[y+3],22,-1044525330),i=wr(i,r,a,p,t[y+4],7,-176418897),p=wr(p,i,r,a,t[y+5],12,1200080426),a=wr(a,p,i,r,t[y+6],17,-1473231341),r=wr(r,a,p,i,t[y+7],22,-45705983),i=wr(i,r,a,p,t[y+8],7,1770035416),p=wr(p,i,r,a,t[y+9],12,-1958414417),a=wr(a,p,i,r,t[y+10],17,-42063),r=wr(r,a,p,i,t[y+11],22,-1990404162),i=wr(i,r,a,p,t[y+12],7,1804603682),p=wr(p,i,r,a,t[y+13],12,-40341101),a=wr(a,p,i,r,t[y+14],17,-1502002290),r=wr(r,a,p,i,t[y+15],22,1236535329),i=_r(i,r,a,p,t[y+1],5,-165796510),p=_r(p,i,r,a,t[y+6],9,-1069501632),a=_r(a,p,i,r,t[y+11],14,643717713),r=_r(r,a,p,i,t[y],20,-373897302),i=_r(i,r,a,p,t[y+5],5,-701558691),p=_r(p,i,r,a,t[y+10],9,38016083),a=_r(a,p,i,r,t[y+15],14,-660478335),r=_r(r,a,p,i,t[y+4],20,-405537848),i=_r(i,r,a,p,t[y+9],5,568446438),p=_r(p,i,r,a,t[y+14],9,-1019803690),a=_r(a,p,i,r,t[y+3],14,-187363961),r=_r(r,a,p,i,t[y+8],20,1163531501),i=_r(i,r,a,p,t[y+13],5,-1444681467),p=_r(p,i,r,a,t[y+2],9,-51403784),a=_r(a,p,i,r,t[y+7],14,1735328473),r=_r(r,a,p,i,t[y+12],20,-1926607734),i=Sr(i,r,a,p,t[y+5],4,-378558),p=Sr(p,i,r,a,t[y+8],11,-2022574463),a=Sr(a,p,i,r,t[y+11],16,1839030562),r=Sr(r,a,p,i,t[y+14],23,-35309556),i=Sr(i,r,a,p,t[y+1],4,-1530992060),p=Sr(p,i,r,a,t[y+4],11,1272893353),a=Sr(a,p,i,r,t[y+7],16,-155497632),r=Sr(r,a,p,i,t[y+10],23,-1094730640),i=Sr(i,r,a,p,t[y+13],4,681279174),p=Sr(p,i,r,a,t[y],11,-358537222),a=Sr(a,p,i,r,t[y+3],16,-722521979),r=Sr(r,a,p,i,t[y+6],23,76029189),i=Sr(i,r,a,p,t[y+9],4,-640364487),p=Sr(p,i,r,a,t[y+12],11,-421815835),a=Sr(a,p,i,r,t[y+15],16,530742520),r=Sr(r,a,p,i,t[y+2],23,-995338651),i=xr(i,r,a,p,t[y],6,-198630844),p=xr(p,i,r,a,t[y+7],10,1126891415),a=xr(a,p,i,r,t[y+14],15,-1416354905),r=xr(r,a,p,i,t[y+5],21,-57434055),i=xr(i,r,a,p,t[y+12],6,1700485571),p=xr(p,i,r,a,t[y+3],10,-1894986606),a=xr(a,p,i,r,t[y+10],15,-1051523),r=xr(r,a,p,i,t[y+1],21,-2054922799),i=xr(i,r,a,p,t[y+8],6,1873313359),p=xr(p,i,r,a,t[y+15],10,-30611744),a=xr(a,p,i,r,t[y+6],15,-1560198380),r=xr(r,a,p,i,t[y+13],21,1309151649),i=xr(i,r,a,p,t[y+4],6,-145523070),p=xr(p,i,r,a,t[y+11],10,-1120210379),a=xr(a,p,i,r,t[y+2],15,718787259),r=xr(r,a,p,i,t[y+9],21,-343485551),i=mu(i,m),r=mu(r,_),a=mu(a,x),p=mu(p,M)}return[i,r,a,p]}function ZD(t,e=Kc.Hex){const i=e||Kc.Base64,r=Cfe(Mfe(t),t.length*rd);switch(i){case Kc.Raw:return r;case Kc.Hex:return Afe(r);case Kc.String:return Efe(r);case Kc.Base64:return kfe(r)}}var W4;let cf=W4=class extends lb{writeLevels(t,e,i){for(const r in t){const a=this.levels[r];return void(e.stops=a)}}clone(){return new W4({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:yu(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:yu(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:se(this.levels)})}};v([S()],cf.prototype,"levels",void 0),v([$e("levels")],cf.prototype,"writeLevels",null),cf=W4=v([B("esri.views.2d.engine.LevelDependentSizeVariable")],cf);const Pfe=me.getLogger("esri.views.2d.layers.support.clusterUtils");le.add("esri-cluster-arcade-enabled",!0);const Nfe=le("esri-cluster-arcade-enabled"),Rfe=(t,e,i,r,a)=>{const p=e.clone();if(!jfe(p))return p;if(p.authoringInfo||(p.authoringInfo=new $x),p.authoringInfo.isAutoGenerated=!0,"visualVariables"in p){const y=(p.visualVariables||[]).filter(_=>_.valueExpression!=="$view.scale"),m=XD(y);y.forEach(_=>{_.type==="rotation"?_.field?_.field=eh(t,_.field,"avg_angle","number"):_.valueExpression&&(_.field=c0(t,_.valueExpression,"avg_angle","number"),_.valueExpression=null):_.normalizationField?(_.field=eh(t,_.field,"avg_norm","number",_.normalizationField),_.normalizationField=null):_.field?_.field=eh(t,_.field,"avg","number"):_.valueExpression&&(_.field=c0(t,_.valueExpression,"avg","number"),_.valueExpression=null)}),m==null&&!Lfe(y)&&a&&(y.push(QD(i,r)),p.dynamicClusterSize=!0),p.visualVariables=y}switch(p.type){case"simple":break;case"pie-chart":for(const y of p.attributes)y.field?y.field=eh(t,y.field,"sum","number"):y.valueExpression&&(y.field=c0(t,y.valueExpression,"sum","number"),y.valueExpression=null);break;case"unique-value":p.field?p.field=eh(t,p.field,"mode","string"):p.valueExpression&&(p.field=c0(t,p.valueExpression,"mode","string"),p.valueExpression=null);break;case"class-breaks":p.normalizationField?(p.field=eh(t,p.field,"avg_norm","number",p.normalizationField),p.normalizationField=null):p.field?p.field=eh(t,p.field,"avg","number"):p.valueExpression&&(p.field=c0(t,p.valueExpression,"avg","number"),p.valueExpression=null)}return p},XD=t=>{for(const e of t)if(e.type==="size")return e;return null};function e3e(t,e,i){const r=t.clone();let a=!1;if("visualVariables"in r){const p=(r.visualVariables||[]).filter(y=>y.valueExpression!=="$view.scale");XD(p)==null&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(QD(e,i)),r.dynamicClusterSize=!0,a=!0)}return{renderer:r,didInject:a}}const Lfe=t=>{for(const e of t)if(e.field==="cluster_count")return!0;return!1},QD=(t,e)=>{const i=[new Sp({value:0,size:0}),new Sp({value:1})];if(e==null)return new lb({field:"cluster_count",stops:[...i,new Sp({value:2,size:0})]});const r=Object.keys(e).reduce((a,p)=>({...a,[p]:[...i,new Sp({value:Math.max(2,e[p].minValue),size:t.clusterMinSize}),new Sp({value:Math.max(3,e[p].maxValue),size:t.clusterMaxSize})]}),{});return new cf({field:"cluster_count",levels:r})},jfe=t=>{const e=i=>Pfe.error(new ie("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!Nfe){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Dfe(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,a="field",p=e.toLowerCase()+",norm:"+a+","+r.toLowerCase();return"cluster_avg_"+ZD(p)}}}function c0(t,e,i,r){const a=ZD(e),p=i==="mode"?`cluster_type_${a}`:i==="sum"?`cluster_sum_${a}`:`cluster_avg_${a}`;return t.some(y=>y.name===p)||t.push(new Tc({name:p,isAutoGenerated:!0,onStatisticExpression:new Wx({expression:e,returnType:r}),statisticType:i})),p}function eh(t,e,i,r,a){if(e==="cluster_count"||t.some(y=>y.name===e))return e;const p=Dfe(i,e,a);return t.some(y=>y.name===p)||(i==="avg_norm"?t.push(new Tc({name:p,isAutoGenerated:!0,onStatisticExpression:new Wx({expression:`$feature.${e} / $feature.${a}`,returnType:r}),statisticType:"avg"})):t.push(new Tc({name:p,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),p}const Ffe=t=>{let e=class extends t{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var m;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),a=[new Tc({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],p=(r.fields??[]).filter(_=>!_.isAutoGenerated);if(i.renderer&&!((m=i.renderer.authoringInfo)!=null&&m.isAutoGenerated))return r.fields=[...a,...p],r;if(i.symbol)return r.fields=[...a,...p],r.renderer=null,r;if(!this.renderer)return i;const y=Rfe(a,this.renderer,i,null,!1);return r.fields=[...a,...p],r.renderer=y,r}};return v([S(Ife)],e.prototype,"featureReduction",null),e=v([B("esri.layers.mixins.FeatureReductionLayer")],e),e};var J4;const h3=new ft({asc:"ascending",desc:"descending"});let Pp=J4=class extends de{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new J4({field:this.field,valueExpression:this.valueExpression,order:this.order})}};v([S({type:String,json:{write:!0}})],Pp.prototype,"field",void 0),v([S({type:String,json:{write:!0}})],Pp.prototype,"valueExpression",void 0),v([S({type:h3.apiValues,json:{read:h3.read,write:h3.write}})],Pp.prototype,"order",void 0),Pp=J4=v([B("esri.layers.support.OrderByInfo")],Pp);const eF=Pp;function zfe(t,e,i){if(!t)return null;const r=t.find(p=>!!p.field);if(!r)return null;const a=new eF;return a.read(r,i),[a]}function Vfe(t,e,i,r){const a=t.find(p=>!!p.field);a&&Pr(i,[a.toJSON()],e)}const Gfe=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return v([S({type:[eF],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:zfe},write:{target:"layerDefinition.orderBy",writer:Vfe}}})],e.prototype,"orderBy",void 0),e=v([B("esri.layers.mixins.OrderedLayer")],e),e};let pf=class extends je{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};v([S()],pf.prototype,"updating",void 0),v([S()],pf.prototype,"status",void 0),pf=v([B("esri.layers.support.PublishingInfo")],pf);const qfe=pf,tF="esri.layers.mixins.PublishableLayer",Ufe=Symbol(tF),Bfe=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const a=new qfe;return this._checkPublishingStatus(a),a}_checkPublishingStatus(r){let y=0;const m=async x=>{let M;r.updating=!0;try{M=await this.fetchPublishingStatus()}catch{M="unavailable"}M!=="published"&&M!=="unavailable"||(r.status==="publishing"&&this.refresh(),_.remove()),r.status=M,r.updating=!1,_.removed||(y=setTimeout(m,x,x+125))},_={removed:!1,remove(){this.removed=!0,clearTimeout(y)}};this.when().catch(()=>_.remove()),m(250),this.own(_)}};return e=Ufe,v([S({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=v([B(tF)],i),i};function Hfe(){return{fields:{type:[pb],value:null},fieldsIndex:{readOnly:!0,get(){return new Ix(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!t||!t.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||me.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return KS(this.fieldsIndex,t)}}}}async function Wfe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const a=await _2(r.populateFromStyle());if(Zt(i),a.ok===!1){const p=a.error;e&&e.messages&&e.messages.push(new sn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${p.message}`,{error:p,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}var K4;let Np=K4=class extends de{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new K4({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};v([S({type:[String],json:{write:!0}})],Np.prototype,"groupByFields",void 0),v([S({type:Number,json:{write:!0}})],Np.prototype,"topCount",void 0),v([S({type:[String],json:{write:!0}})],Np.prototype,"orderByFields",void 0),Np=K4=v([B("esri.rest.support.TopFilter")],Np);const Jfe=Np;var Y4;const fM=new ft({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),yM=new ft({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ii=Y4=class extends de{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new Y4(se({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};v([S({type:Boolean,json:{write:!0}})],ii.prototype,"cacheHint",void 0),v([S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],ii.prototype,"distance",void 0),v([S({types:Nu,json:{read:Ba,write:!0}})],ii.prototype,"geometry",void 0),v([S({type:Number,json:{write:!0}})],ii.prototype,"geometryPrecision",void 0),v([S({type:Number,json:{write:!0}})],ii.prototype,"maxAllowableOffset",void 0),v([S({type:Number,json:{read:{source:"resultRecordCount"}}})],ii.prototype,"num",void 0),v([S({json:{write:!0}})],ii.prototype,"objectIds",void 0),v([S({type:[String],json:{write:!0}})],ii.prototype,"orderByFields",void 0),v([S({type:[String],json:{write:!0}})],ii.prototype,"outFields",void 0),v([S({type:Je,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ii.prototype,"outSpatialReference",void 0),v([S({type:String,json:{write:!0}})],ii.prototype,"resultType",void 0),v([S({json:{write:!0}})],ii.prototype,"returnGeometry",void 0),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ii.prototype,"returnM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ii.prototype,"returnZ",void 0),v([S({type:Number,json:{read:{source:"resultOffset"}}})],ii.prototype,"start",void 0),v([$e("start"),$e("num")],ii.prototype,"writeStart",null),v([S({type:String,json:{read:{source:"spatialRel",reader:fM.read},write:{target:"spatialRel",writer:fM.write}}})],ii.prototype,"spatialRelationship",void 0),v([S({type:ln,json:{write:!0}})],ii.prototype,"timeExtent",void 0),v([S({type:Jfe,json:{write:!0}})],ii.prototype,"topFilter",void 0),v([S({type:String,json:{read:yM.read,write:{writer:yM.write,overridePolicy(t){return{enabled:t!=null&&this.distance!=null&&this.distance>0}}}}})],ii.prototype,"units",void 0),v([S({type:String,json:{write:!0}})],ii.prototype,"where",void 0),ii=Y4=v([B("esri.rest.support.TopFeaturesQuery")],ii),ii.from=ri(ii);const ym=ii,Lr="FeatureLayer",iF="esri.layers.FeatureLayer",Kfe=me.getLogger(iF);function mm(t,e){return new ie("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function mM(t){return t&&t instanceof De}const c3=Hfe();function p3(t,e,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Re=class extends xfe(Ffe(efe(Bfe(Z0e(sb(Gfe(PD(ob(nb(dx(wx(_x(K1(bx(ux(Xt(I1))))))))))))))))){constructor(...t){super(...t),this._handles=new Ho,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Je.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var t;(t=this.source)==null||t.destroy(),this._handles=Wt(this._handles)}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){var r;const e=t!=null?t.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(e).then(a=>this.initLayerProperties(a))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},t).catch(Js).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const a=await this._fetchFirstLayerId(e);a!=null&&(this.layerId=a)}if(!this.url&&!this._hasMemorySource())throw new ie("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(e))}).then(()=>this._setUserPrivileges(this.serviceItemId,t)).then(()=>vfe(this,t));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(t,e){return e=e.layerDefinition||e,Gx(e,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var t;return!(this.loaded&&!((t=this.capabilities)!=null&&t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,i){return this._readEditingEnabled(e,!0,i)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,i,r){this._writeEditingEnabled(t,e,!0,r)}get effectiveEditingEnabled(){return wfe(this)}readIsTable(t,e){return(e=(e==null?void 0:e.layerDefinition)??e).type==="Table"||!e.geometryType}writeIsTable(t,e,i,r){r!=null&&r.writeLayerSchema&&Pr(i,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return HD(e.layerDefinition||e)}readObjectIdField(t,e){return WD(e.layerDefinition||e)}get parsedUrl(){const t=or(this.url);return t!=null&&(this.dynamicDataSource!=null?t.path=Ua(t.path,"dynamicLayer"):this.layerId!=null&&(t.path=Ua(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){X7(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,i){var a;e=e.layerDefinition||e;const r=(a=e.drawingInfo)==null?void 0:a.renderer;if(r){const p=g1(r,e,i)??void 0;return p||Kfe.error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:i}),p}return Hx(e,i)}set source(t){const e=this._get("source");e!==t&&(mM(e)&&this._resetMemorySource(e),mM(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof De?new ka({layer:this,items:t}):t:null}readSource(t,e){const i=db.fromJSON(e.featureSet);return new ka({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(t,e){const i=e.editFieldsInfo,r=i&&i.creatorField,a=i&&i.editorField;return t=t&&t.map(p=>jx.fromJSON(p)),this._fixTemplates(t,r),this._fixTemplates(t,a),t}readTitle(t,e){var a;const i=((a=e.layerDefinition)==null?void 0:a.name)??e.name,r=e.title||e.layerDefinition&&e.layerDefinition.title;if(i){const p=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?Uee(this.url,i):i;let y=i;if(!y&&this.url){const m=Gu(this.url);m!=null&&(y=m.title)}return y?(this.sublayerTitleMode==="item-title-and-service-name"&&p&&p!==y&&(y=p+" - "+y),R6(y)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(t,e){return e.title||e.layerDefinition&&e.layerDefinition.name}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const r=e.fields.find(a=>a.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(t,e){t=(e=e.layerDefinition||e).types;const i=e.editFieldsInfo,r=i&&i.creatorField,a=i&&i.editorField;return t&&t.map(p=>(p=Dx.fromJSON(p),this._fixTemplates(p.templates,r),this._fixTemplates(p.templates,a),p))}readVisible(t,e){return e.layerDefinition&&e.layerDefinition.defaultVisibility!=null?!!e.layerDefinition.defaultVisibility:e.visibility!=null?!!e.visibility:void 0}async addAttachment(t,e){return ife(this,t,e,Lr)}async updateAttachment(t,e,i){return rfe(this,t,e,i,Lr)}async applyEdits(t,e){return sfe(this,t,e)}async uploadAssets(t,e){return nfe(this,t,e)}on(t,e){return super.on(t,e)}createPopupTemplate(t){return ED(this,t)}async createGraphicsSource(t){if(this._hasMemorySource()&&this.source)return this.source.load({signal:t});const{default:e}=await aa(we(()=>import("./FeatureLayerSource-2d02c247.js"),["assets/FeatureLayerSource-2d02c247.js","assets/mat4f64-1413b4a7.js","assets/MeshGeoreferencedRelativeVertexSpace-4f0d7b2f.js","assets/vec32-22960fb5.js","assets/External-965b18ac.js","assets/editingSupport-bebc4167.js","assets/clientSideDefaults-a37d3917.js","assets/QueryEngineCapabilities-42e44ded.js"]),t);return new e({layer:this}).load({signal:t})}createQuery(){const t=yfe(this);t.dynamicDataSource=this.dynamicDataSource;const e=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=X2(this.definitionExpression,e);return t.where=i||"1=1",t}async deleteAttachments(t,e){return ofe(this,t,e,Lr)}async fetchRecomputedExtents(t){return afe(this,t,Lr)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const r=t.attributes?t.attributes[e]:void 0;if(r==null)return null;let a=null;return i==null||i.some(p=>{const{id:y}=p;return y!=null&&(y.toString()===r.toString()&&(a=p),!!a)}),a}getFieldDomain(t,e){const i=e==null?void 0:e.feature,r=this.getFeatureType(i);if(r){const a=r.domains&&r.domains[t];if(a&&a.type!=="inherited")return a}return this._getLayerDomain(t)}getField(t){return this.fieldsIndex.get(t)}async queryAttachments(t,e){return lfe(this,t,e,Lr)}async queryFeatures(t,e){const i=await this.load(),r=await i.source.queryFeatures(Ms.from(t)??i.createQuery(),e);if(r!=null&&r.features)for(const a of r.features)a.layer=a.sourceLayer=i;return r}async queryObjectIds(t,e){return ufe(this,t,e,Lr)}async queryFeatureCount(t,e){return hfe(this,t,e,Lr)}async queryExtent(t,e){return cfe(this,t,e,Lr)}async queryRelatedFeatures(t,e){return pfe(this,t,e,Lr)}async queryRelatedFeaturesCount(t,e){return dfe(this,t,e,Lr)}async queryTopFeatures(t,e){var p;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((p=r==null?void 0:r.query)!=null&&p.supportsTopFeaturesQuery))throw new ie(Lr,"Layer source does not support queryTopFeatures capability");const a=await i.queryTopFeatures(ym.from(t),e);if(a!=null&&a.features)for(const y of a.features)y.layer=y.sourceLayer=this;return a}async queryTopObjectIds(t,e){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new ie(Lr,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(ym.from(t),e)}async queryTopFeaturesExtent(t,e){var a;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((a=r==null?void 0:r.query)!=null&&a.supportsTopFeaturesQuery))throw new ie(Lr,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(ym.from(t),e)}async queryTopFeatureCount(t,e){var a;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((a=r==null?void 0:r.query)!=null&&a.supportsTopFeaturesQuery))throw new ie(Lr,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(ym.from(t),e)}read(t,e){const i=t.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],e),i.showLegend!=null&&super.read({showLegend:i.showLegend},e))}super.read(t,e),e&&e.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){e={...e,origin:(e==null?void 0:e.origin)??void 0,writeLayerSchema:(e==null?void 0:e.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:a}=e;if(this.dynamicDataSource)return a==null||a.push(mm(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return a==null||a.push(mm(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return a==null||a.push(mm(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return a==null||a.push(mm(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new ie(Lr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var e;return!!this.loaded&&(((e=this.source)==null?void 0:e.type)==="memory"||ND(this,t))}async save(t){const{save:e}=await we(()=>import("./featureLayerUtils-16d877a3.js"),["assets/featureLayerUtils-16d877a3.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-6f594e16.js","assets/jsonContext-0a1eba8c.js"]);return e(this,t)}async saveAs(t,e){const{saveAs:i}=await we(()=>import("./featureLayerUtils-16d877a3.js"),["assets/featureLayerUtils-16d877a3.js","assets/originUtils-1469eeaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/fetchService-6f594e16.js","assets/jsonContext-0a1eba8c.js"]);return i(this,t,e)}_readEditingEnabled(t,e,i){var a;let r=(a=t.layerDefinition)==null?void 0:a.capabilities;return r?this._hasEditingCapability(r):(r=t.capabilities,e&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,i,r){var a,p;if(!t){const y=(p=(a=this.capabilities)==null?void 0:a.operations)!=null&&p.supportsSync?"Query,Sync":"Query";Pr("layerDefinition.capabilities",y,e),i&&!(r!=null&&r.writeLayerSchema)&&(e.capabilities=y)}}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}_fetchFirstLayerId(t){return ot(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const i=e.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(t){var e;return this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(e=this.portalItem)==null?void 0:e.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),X7(this.renderer,this.fieldsIndex),vk(this.timeInfo,this.fieldsIndex),Wfe(this,{origin:"service"})}async hasDataChanged(){return ffe(this)}async fetchPublishingStatus(){const t=this.source;return t!=null&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable"}_verifyFields(){var e,i;const t=((e=this.parsedUrl)==null?void 0:e.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+t+")"),this.isTable||this._hasMemorySource()||t.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+t+")")}_fixTemplates(t,e){t&&t.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&e&&delete r[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ie("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ie("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this._handles.add([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};v([ge("service","capabilities")],Re.prototype,"readCapabilities",null),v([S({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Re.prototype,"charts",void 0),v([S({readOnly:!0})],Re.prototype,"createQueryVersion",null),v([S({json:{read:{source:"layerDefinition.copyrightText"}}})],Re.prototype,"copyright",void 0),v([S({json:{read:{source:"layerDefinition.displayField"}}})],Re.prototype,"displayField",void 0),v([S({types:sc,readOnly:!0})],Re.prototype,"defaultSymbol",void 0),v([S({type:qr})],Re.prototype,"dynamicDataSource",void 0),v([S({type:Boolean})],Re.prototype,"editingEnabled",null),v([ge(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Re.prototype,"readEditingEnabled",null),v([ge("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Re.prototype,"readEditingEnabledFromWebMap",null),v([$e(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Re.prototype,"writeEditingEnabled",null),v([$e("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Re.prototype,"writeEditingEnabledToWebMap",null),v([S({readOnly:!0})],Re.prototype,"effectiveEditingEnabled",null),v([S({...c3.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:p3}}}}})],Re.prototype,"fields",void 0),v([S(c3.fieldsIndex)],Re.prototype,"fieldsIndex",void 0),v([S({type:W0e,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Re.prototype,"formTemplate",void 0),v([S({json:{read:{source:"layerDefinition.extent"}}})],Re.prototype,"fullExtent",void 0),v([S({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:p3,writer(t,e,i){const r=t?G4.toJSON(t):null;r&&Pr(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:G4.read}}})],Re.prototype,"geometryType",void 0),v([S({json:{read:{source:"layerDefinition.hasM"}}})],Re.prototype,"hasM",void 0),v([S({json:{read:{source:"layerDefinition.hasZ"}}})],Re.prototype,"hasZ",void 0),v([S(XL)],Re.prototype,"id",void 0),v([S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Re.prototype,"infoFor3D",void 0),v([S({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Re.prototype,"isTable",void 0),v([ge("service","isTable",["type","geometryType"]),ge("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Re.prototype,"readIsTable",null),v([$e("web-map","isTable")],Re.prototype,"writeIsTable",null),v([S(cx)],Re.prototype,"labelsVisible",void 0),v([S({type:[ey],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:qI},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:qI},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Re.prototype,"labelingInfo",void 0),v([S((()=>{const t=se(hhe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Pr(r,k2(e),i)}}},t})())],Re.prototype,"opacity",void 0),v([S(lhe)],Re.prototype,"legendEnabled",void 0),v([S({type:["show","hide"],json:(()=>{const t=se(QL.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Re.prototype,"listMode",void 0),v([ge("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Re.prototype,"readGlobalIdField",null),v([S({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:p3}}}}})],Re.prototype,"objectIdField",void 0),v([ge("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Re.prototype,"readObjectIdField",null),v([S({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Re.prototype,"operationalLayerType",void 0),v([S(c3.outFields)],Re.prototype,"outFields",void 0),v([S({readOnly:!0})],Re.prototype,"parsedUrl",null),v([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Re.prototype,"path",void 0),v([S(tb)],Re.prototype,"popupEnabled",void 0),v([S({type:Lu,json:{name:"popupInfo",write:!0}})],Re.prototype,"popupTemplate",void 0),v([S({readOnly:!0})],Re.prototype,"defaultPopupTemplate",null),v([S({types:X1,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Wj,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Re.prototype,"renderer",null),v([ge("service","renderer",["drawingInfo.renderer","defaultSymbol"]),ge("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Re.prototype,"readRenderer",null),v([S((()=>{const t=se(ahe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Re.prototype,"screenSizePerspectiveEnabled",void 0),v([S({clonable:!1})],Re.prototype,"source",null),v([It("source")],Re.prototype,"castSource",null),v([ge("portal-item","source",["featureSet"]),ge("web-map","source",["featureSet"])],Re.prototype,"readSource",null),v([S({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Re.prototype,"spatialReference",void 0),v([S({type:Number})],Re.prototype,"subtypeCode",void 0),v([S({type:[jx]})],Re.prototype,"templates",void 0),v([ge("templates",["editFieldsInfo","creatorField","editorField","templates"])],Re.prototype,"readTemplates",null),v([S({type:CD})],Re.prototype,"timeInfo",void 0),v([S()],Re.prototype,"title",void 0),v([ge("service","title",["name"]),ge("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Re.prototype,"readTitle",null),v([ge("web-map","title",["layerDefinition.name","title"])],Re.prototype,"readTitleFromWebMap",null),v([S({type:String})],Re.prototype,"sublayerTitleMode",void 0),v([S({json:{read:!1}})],Re.prototype,"type",void 0),v([S({type:String})],Re.prototype,"typeIdField",void 0),v([ge("service","typeIdField"),ge("typeIdField",["layerDefinition.typeIdField"])],Re.prototype,"readTypeIdField",null),v([S({type:[Dx]})],Re.prototype,"types",void 0),v([ge("service","types",["types"]),ge("types",["layerDefinition.types"])],Re.prototype,"readTypes",null),v([S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Re.prototype,"visible",void 0),v([ge("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Re.prototype,"readVisible",null),Re=v([B(iF)],Re);const Jx=Re,Yfe=Object.freeze(Object.defineProperty({__proto__:null,default:Jx},Symbol.toStringTag,{value:"Module"}));var Z4;let gm=Z4=class extends sb(ob(nb(I1))){constructor(){super(...arguments),this.type="base-dynamic"}getImageUrl(){throw new ie("basedynamiclayer:getImageUrl-not-implemented","getImageUrl() is not implemented")}async fetchImage(t,e,i,r){const a=this.getImageUrl(t,e,i),p={responseType:"image",signal:r&&r.signal,query:{...this.refreshParameters}};if(typeof a=="string"){const{data:_}=await ot(a,p);return _}const y=await a,{data:m}=await ot(y,p);return m}async fetchImageBitmap(t,e,i,r={}){if(this.fetchImage!==Z4.prototype.fetchImage){const _=await this.fetchImage(t,e,i,r);try{return createImageBitmap(_)}catch(x){throw new ie("request:server","Unable to load image",{error:x,extent:t,width:e,height:i})}}const a=this.getImageUrl(t,e,i),p={responseType:"blob",signal:r&&r.signal,query:{...this.refreshParameters}};if(typeof a=="string"){const{data:_}=await ot(a,p);return createImageBitmap(_)}const y=await a,{data:m}=await ot(y,p);return createImageBitmap(m)}};v([S({readOnly:!0,value:"base-dynamic"})],gm.prototype,"type",void 0),v([S({type:["show","hide"]})],gm.prototype,"listMode",void 0),gm=Z4=v([B("esri.layers.BaseDynamicLayer")],gm);const Zfe="https://gis.servermapcollective.com:6443/arcgis/rest/services/ming/tblcomps202310251652_new/MapServer",Xfe={url:Zfe,title:"USA Supply Chain Network",visible:!0};new LD(Xfe);const Qfe="https://gis.servermapcollective.com:6443/arcgis/rest/services/ming/tblcomps202310251652_new/MapServer";new Jx({url:Qfe,outFields:["*"],visible:!0});const rF="https://gis.servermapcollective.com:6443/arcgis/rest/services/mapcollective/mapcollective12032023/MapServer",b1=new Jx({url:rF,visible:!0}),mb=()=>[b1],Kx=(t,e,i,r)=>new eb({layer:e,name:i,placeholder:r,getSuggestions:a=>{const p=b1.createQuery();if(a.suggestTerm.length>2)return p.where=`UPPER(${t}) LIKE UPPER('${a.suggestTerm}%')`,b1.queryFeatures(p).then(y=>y.features.map(_=>({key:"name",text:_.attributes[t],sourceIndex:0,layerName:_.sourceLayer.sourceJSON.name,..._.attributes,valuesFetched:!0})))},getResults:async a=>{if(a.suggestResult.valuesFetched===!0){const p=document.getElementById("feature-node"),{address:y,lat:m,long_:_,type_:x,Id:M,routes:A,CMDT:C,CMDT_Code:N}=a.suggestResult,j=x,D=_,z=a.suggestResult.layerName,W=sF[j],Y=`<b>ID:</b><br/>${M} <br/><br/> <b>Layer Name:</b><br/>${z} <br/><br/> <b>Company Type :</b><br/> ${W} <br/><br/> <b>CMDT:</b><br/> ${C}<br/><br/> <b>CMDT Code:</b><br/><br/> ${N}<br/><br/> <b>Address:</b><br/> ${y}<br/><br/><b>Lat Lng</b>:<br/> ${m},${D}`;p.innerHTML=Y;const K=await nF(JSON.parse(A),Jh),ee=new Nr({geometry:new Ue({longitude:D,latitude:m})});return[{extent:K,feature:ee,name:y}]}}}),e1e=1e3,t1e=t=>{Ee(()=>t.updating,e=>{})};let Na;const i1e=t=>{const e=document.getElementById("feature-node");t.when(()=>{t.on("click",i=>r1e(i,t,e)),Na=new BR,Na.tolerance=3,Na.layerIds=[0],Na.layerOption="top",Na.width=t.width,Na.height=t.height})},sF={1:"Supplier",2:"Consignee",3:"Supplier and Consignee"},r1e=(t,e,i)=>{Na.geometry=t.mapPoint,Na.mapExtent=e.extent,Jae(rF,Na).then(r=>{const a=r.results;if(a.length==0)return;const p=a[0],{address:y,lat:m,long_:_,type_:x,Id:M,routes:A,CMDT:C,CMDT_Code:N}=p.feature.attributes,j=x,D=_,z=p.layerName,W=sF[j],Y=`<b>ID:</b><br/>${M} <br/><br/> <b>Layer Name:</b><br/>${z} <br/><br/> <b>Company Type :</b><br/> ${W} <br/><br/> <b>CMDT:</b><br/> ${C}<br/><br/> <b>CMDT Code:</b><br/><br/> ${N}<br/><br/> <b>Address:</b><br/> ${y}<br/><br/><b>Lat Lng</b>:<br/> ${m},${D}`;i.innerHTML=Y,nF(JSON.parse(A),e)})},nF=async(t,e,i,r)=>{const a=new Set,p=t.map((x,M)=>{const A=x.split(","),C=[];a.add(A[0]+";"+A[1]),a.add(A[2]+";"+A[3]);const N=A[0].split(";"),j=A[2].split(";");C.push([N,j]);var D=new _s({paths:C,spatialReference:{wkid:4326}}),z=UR(D,e1e);return new Nr({geometry:z,symbol:a1e(A[1],A[4])})});e.graphics.removeAll(),b1.visible=!1;const y=c1e(e,Array.from(a)),m=new xd({points:y}),_=m.extent;return await e.goTo(_).then(()=>{e.graphics.addMany(p)}),m.extent},s1e=2,oF=1,aF={type:"simple-line",cap:"round",join:"round",marker:{color:"green",placement:"begin",style:"arrow"}},lF={...aF,color:[150,75,0],style:"short-dot",width:s1e},n1e={...aF,color:[4,90,141],width:oF},uF={...lF,marker:{color:"red",placement:"begin-end",style:"arrow"}},o1e={...uF,color:[4,90,141],width:oF},a1e=(t,e)=>{let i;return t==1&&e==1?i=lF:t==1&&e==2?i=n1e:t==2&&e==1?i=uF:i=o1e,i},l1e=t=>{t.ui.add(["clearBtn"],"top-left");var e=document.getElementById("clearBtn");e.addEventListener("click",i=>{t.graphics.length>0&&t.graphics.removeAll(),b1.visible=!0})},u1e={1:[0,0,255],2:[255,0,0],3:[0,255,0]},h1e={1:[255,255,0],2:[255,0,250],3:[0,250,255]},c1e=(t,e)=>{const i=[],r=e.map(a=>{const p=a.split(";"),y={type:"point",longitude:p[0],latitude:p[1],spatialReference:{wkid:4326}};i.push([p[0],p[1]]);const m={type:"simple-marker",color:u1e[p[2]],outline:{color:h1e[p[2]],width:1}};return new Nr({geometry:y,symbol:m})});return t.graphics.addMany(r),i},p1e=t=>{const e=new Hle({view:t,listItemCreatedFunction:i=>{const r=i.item;r.layer.type!="group"&&(r.panel={content:"legend",open:!1})}});t.ui.add(e,"top-right")},d1e=Kx("CMDT",mb(),"CMDT","Search by CMDT"),gM=Kx("address",mb(),"Address","Search by Address"),f1e=Kx("CMDT_Code",mb(),"CMDT Code","Search by CMDT Code"),y1e=t=>{const e=new Xue({view:t,content:new Zue({view:t,activeSourceIndex:gM,sources:[d1e,gM,f1e],locationEnabled:!1,searchAllEnabled:!1,includeDefaultSources:!1})});t.ui.add(e,{position:"top-left",index:2})},m1e=!0;console.warn=(t,e)=>{console.log("%c "+t+"  "+e,"color: red; font-weight:bold")};console.warn("The develop mode::",m1e);(async()=>await we(()=>Promise.resolve({}),["assets/mapfromonline-31fe072e.css"]))();const vM={zoom:2,baseMapID:"streets-night-vector",center:[-80.22591218922629,25.76594796317374]};const g1e=new mk({basemap:"streets-night-vector",layers:mb()}),Jh=new Loe({container:"viewDiv",map:g1e,zoom:vM.zoom,center:vM.center,popupEnabled:!0});Jh.when(()=>{p1e(Jh),l1e(Jh),i1e(Jh),y1e(Jh)});t1e(Jh);export{_2 as $,sd as A,St as B,rn as C,nn as D,pS as E,Sye as F,ot as G,qn as H,Wfe as I,_f as J,me as K,Ue as L,Y9 as M,hme as N,Vo as O,Jo as P,fme as Q,T2 as R,DC as S,Vu as T,ume as U,De as V,n2 as W,aa as X,Js as Y,sP as Z,we as _,ro as a,ule as a$,xd as a0,_s as a1,oH as a2,S4 as a3,t1 as a4,c2 as a5,$u as a6,Uq as a7,Vme as a8,My as a9,xK as aA,o6 as aB,nde as aC,Ms as aD,hwe as aE,Tk as aF,Ux as aG,Po as aH,bK as aI,v1e as aJ,Kn as aK,xC as aL,kse as aM,yf as aN,Jx as aO,vv as aP,wv as aQ,i1 as aR,lW as aS,D1e as aT,jme as aU,Xt as aV,Ec as aW,b3 as aX,rE as aY,nS as aZ,dr as a_,yK as aa,fK as ab,dK as ac,vc as ad,oW as ae,b0 as af,Vye as ag,vK as ah,v as ai,S as aj,It as ak,Nr as al,B as am,je as an,MD as ao,Ot as ap,eo as aq,Yo as ar,Tu as as,xR as at,fe as au,Fy as av,Nge as aw,CQ as ax,Xa as ay,Nf as az,A2 as b,ir as b$,Wo as b0,qo as b1,Kh as b2,RO as b3,LO as b4,a7 as b5,O1 as b6,OR as b7,Du as b8,Cd as b9,Gie as bA,B6 as bB,Wte as bC,uie as bD,bse as bE,R9 as bF,$N as bG,$B as bH,Eu as bI,Je as bJ,LG as bK,yS as bL,un as bM,Su as bN,T1 as bO,K1e as bP,ds as bQ,jo as bR,Fu as bS,pE as bT,Jae as bU,Vae as bV,BR as bW,Qf as bX,Hv as bY,Ai as bZ,Bye as b_,vu as ba,I1 as bb,Wle as bc,P3 as bd,Rge as be,s1 as bf,rL as bg,vs as bh,Cf as bi,Eie as bj,Rve as bk,jve as bl,Ci as bm,Sc as bn,db as bo,Lu as bp,swe as bq,hb as br,CE as bs,cc as bt,vt as bu,kv as bv,Ca as bw,che as bx,TN as by,yd as bz,IN as c,hx as c$,Hr as c0,tbe as c1,Jn as c2,fA as c3,vq as c4,h4 as c5,Ss as c6,hi as c7,bN as c8,_t as c9,FI as cA,hD as cB,to as cC,Lv as cD,mme as cE,lme as cF,bme as cG,sH as cH,nH as cI,HS as cJ,fk as cK,sme as cL,BS as cM,US as cN,Pwe as cO,Nwe as cP,Cwe as cQ,X0e as cR,o2 as cS,ge as cT,Bbe as cU,qbe as cV,is as cW,SN as cX,Qg as cY,nZ as cZ,Ki as c_,Hye as ca,EN as cb,bu as cc,E2 as cd,PA as ce,Ro as cf,K2 as cg,Yme as ch,pN as ci,ZP as cj,dN as ck,eie as cl,Sve as cm,cie as cn,h1 as co,xve as cp,ld as cq,I1e as cr,on as cs,Mc as ct,fwe as cu,ic as cv,KB as cw,yme as cx,pD as cy,_we as cz,LS as d,BB as d$,p1 as d0,Q0e as d1,KS as d2,Ame as d3,ibe as d4,Rme as d5,kme as d6,Cme as d7,Ome as d8,Pme as d9,yD as dA,LN as dB,E1e as dC,de as dD,Ba as dE,Pu as dF,FN as dG,w2 as dH,b2e as dI,_2e as dJ,g2e as dK,ZN as dL,R2e as dM,Yse as dN,A2e as dO,j2e as dP,E2e as dQ,CM as dR,PM as dS,MF as dT,NV as dU,ime as dV,qB as dW,wme as dX,nme as dY,VS as dZ,ek as d_,$s as da,se as db,XD as dc,QD as dd,e3e as de,jfe as df,Rfe as dg,_v as dh,ote as di,WP as dj,$t as dk,upe as dl,X2 as dm,n0e as dn,x1e as dp,$1e as dq,ft as dr,Lb as ds,Pj as dt,IF as du,are as dv,lpe as dw,tt as dx,Ab as dy,_de as dz,tg as e,y9 as e$,z3 as e0,lH as e1,XB as e2,rme as e3,ame as e4,pge as e5,JP as e6,Nie as e7,Oo as e8,u1 as e9,Ad as eA,iwe as eB,Yde as eC,Zde as eD,Xde as eE,tn as eF,gD as eG,mD as eH,vwe as eI,Ix as eJ,ywe as eK,Cpe as eL,$we as eM,m4 as eN,Jp as eO,dj as eP,Ehe as eQ,Ahe as eR,Ic as eS,Kf as eT,Ha as eU,lt as eV,M1 as eW,Cr as eX,gee as eY,rG as eZ,Nbe as e_,J2 as ea,rH as eb,Wa as ec,Cu as ed,j2 as ee,cme as ef,Eme as eg,iS as eh,JS as ei,dc as ej,Yy as ek,HR as el,JB as em,ec as en,Rp as eo,vf as ep,sr as eq,xm as er,M9 as es,nte as et,bpe as eu,rwe as ev,wpe as ew,twe as ex,fr as ey,or as ez,Vie as f,Hwe as f$,Mf as f0,s9 as f1,ej as f2,Gye as f3,Gee as f4,OQ as f5,Is as f6,xg as f7,M1e as f8,D6 as f9,NU as fA,jie as fB,Fie as fC,Rr as fD,sc as fE,$e as fF,Fe as fG,Uh as fH,M2e as fI,Use as fJ,S2e as fK,EC as fL,Fo as fM,Cde as fN,J0e as fO,ln as fP,L6 as fQ,Ua as fR,Pr as fS,Aye as fT,$ye as fU,m2e as fV,tme as fW,a2 as fX,K3 as fY,J3 as fZ,Wwe as f_,r$ as fa,gt as fb,mge as fc,fge as fd,_ge as fe,pye as ff,tI as fg,uU as fh,en as fi,jt as fj,Nme as fk,Cc as fl,Ja as fm,w9 as fn,li as fo,b9 as fp,S9 as fq,Tv as fr,LC as fs,rye as ft,c6 as fu,M8 as fv,_me as fw,rge as fx,hge as fy,eX as fz,le as g,aD as g$,Hq as g0,tx as g1,Hde as g2,Wde as g3,Jde as g4,PS as g5,Ibe as g6,A1e as g7,Gu as g8,Ebe as g9,dG as gA,Hbe as gB,ipe as gC,pt as gD,EH as gE,UH as gF,Ou as gG,fG as gH,uge as gI,Swe as gJ,Lme as gK,pk as gL,Sme as gM,ome as gN,Rce as gO,Rbe as gP,YK as gQ,PP as gR,y3 as gS,mwe as gT,EM as gU,gme as gV,xwe as gW,nA as gX,ZE as gY,cwe as gZ,dD as g_,Mbe as ga,yhe as gb,qye as gc,$F as gd,R0e as ge,dx as gf,wx as gg,_x as gh,K1 as gi,S1e as gj,W2 as gk,px as gl,xye as gm,qee as gn,_ye as go,NM as gp,nd as gq,Bp as gr,vye as gs,PV as gt,Hn as gu,x2 as gv,S1 as gw,bs as gx,Oye as gy,DF as gz,sS as h,od as h$,yq as h0,Sq as h1,I2 as h2,Rye as h3,gu as h4,T1e as h5,Qre as h6,O1e as h7,NA as h8,av as h9,xS as hA,TS as hB,Kie as hC,sre as hD,lU as hE,VZ as hF,VU as hG,MC as hH,cZ as hI,Ps as hJ,gG as hK,XE as hL,QE as hM,vG as hN,an as hO,ZU as hP,QU as hQ,nB as hR,hB as hS,BA as hT,qA as hU,UA as hV,uB as hW,yB as hX,mB as hY,KU as hZ,M2 as h_,jA as ha,Jye as hb,qU as hc,EU as hd,jS as he,lv as hf,kA as hg,Uye as hh,XU as hi,TF as hj,EF as hk,HA as hl,hU as hm,cU as hn,pU as ho,oU as hp,nU as hq,IZ as hr,IC as hs,PU as ht,zZ as hu,Qn as hv,_X as hw,Rie as hx,Nye as hy,Mye as hz,bF as i,cv as i$,xbe as i0,dye as i1,rde as i2,Qpe as i3,lwe as i4,bwe as i5,Xpe as i6,ide as i7,dme as i8,ohe as i9,ZK as iA,gwe as iB,eD as iC,P1e as iD,RU as iE,Qp as iF,pce as iG,Iv as iH,nce as iI,oce as iJ,q7 as iK,RA as iL,AU as iM,TU as iN,LA as iO,Vg as iP,Hte as iQ,aU as iR,Bce as iS,ub as iT,Dd as iU,gZ as iV,Yye as iW,w1e as iX,XV as iY,wS as iZ,gF as i_,Ipe as ia,dwe as ib,Fme as ic,zme as id,Dme as ie,Kye as ig,$6 as ih,pb as ii,Xye as ij,mf as ik,Kpe as il,Dpe as im,qpe as io,ede as ip,wwe as iq,FY as ir,Ybe as is,nz as it,Yw as iu,Zw as iv,pwe as iw,qt as ix,owe as iy,sse as iz,k1e as j,ey as j$,Ur as j0,BL as j1,Pue as j2,lb as j3,Me as j4,Cye as j5,fce as j6,CS as j7,AS as j8,bc as j9,FO as jA,JN as jB,ux as jC,S2 as jD,Tbe as jE,lhe as jF,uhe as jG,XL as jH,Uee as jI,R6 as jJ,Hee as jK,Wee as jL,Q4 as jM,eS as jN,f6 as jO,$1 as jP,EY as jQ,Ks as jR,RC as jS,Gfe as jT,bx as jU,Ffe as jV,efe as jW,PD as jX,X7 as jY,vk as jZ,cx as j_,N1 as ja,hc as jb,XA as jc,fX as jd,vS as je,Z7 as jf,eme as jg,Xj as jh,gye as ji,ym as jj,c4 as jk,Ya as jl,qE as jm,sb as jn,ob as jo,nb as jp,HI as jq,Kl as jr,$be as js,WT as jt,ED as ju,Wj as jv,tb as jw,Hfe as jx,sn as jy,AV as jz,zN as k,WS as k$,qI as k0,w5 as k1,X1 as k2,ahe as k3,jx as k4,Dx as k5,Yf as k6,ns as k7,L1 as k8,SH as k9,To as kA,hX as kB,vE as kC,h2 as kD,r1 as kE,Br as kF,xs as kG,uY as kH,$2 as kI,hY as kJ,dge as kK,ri as kL,j1e as kM,vF as kN,p6 as kO,sge as kP,ige as kQ,zae as kR,Iu as kS,c$ as kT,kc as kU,pme as kV,vme as kW,J7 as kX,Die as kY,Cte as kZ,Mte as k_,_H as ka,zB as kb,V7 as kc,Yi as kd,RG as ke,NG as kf,kye as kg,H1 as kh,B1 as ki,Nu as kj,k0e as kk,hde as kl,lde as km,Fz as kn,ND as ko,Ld as kp,$x as kq,_j as kr,Ice as ks,Ij as kt,Cj as ku,i2 as kv,Ax as kw,gj as kx,qf as ky,Bee as kz,qie as l,T2e as l$,bye as l0,Q3 as l1,zo as l2,HE as l3,lx as l4,g1 as l5,Z0e as l6,ewe as l7,_u as l8,pM as l9,dfe as lA,ffe as lB,CD as lC,wd as lD,OM as lE,mye as lF,w7 as lG,XO as lH,mU as lI,Wye as lJ,CA as lK,OA as lL,hhe as lM,YR as lN,vve as lO,wV as lP,q as lQ,Eye as lR,C0e as lS,v2e as lT,k2e as lU,Zne as lV,O2e as lW,Yne as lX,I2e as lY,Jne as lZ,$2e as l_,TD as la,Xf as lb,Hx as lc,dhe as ld,phe as le,kx as lf,_d as lg,yfe as lh,W0e as li,el as lj,Owe as lk,kwe as ll,Awe as lm,xfe as ln,vfe as lo,wfe as lp,ife as lq,rfe as lr,sfe as ls,ofe as lt,afe as lu,lfe as lv,ufe as lw,hfe as lx,cfe as ly,pfe as lz,d2 as m,gR as m0,C2e as m1,w2e as m2,noe as m3,ooe as m4,L2e as m5,N2e as m6,P2e as m7,D2e as m8,x2e as m9,lre as mA,WU as mB,FG as mC,oge as mD,age as mE,qZ as mF,GZ as mG,Pv as mH,lge as mI,iq as mJ,Oge as mK,ebe as mL,Cbe as mM,Vbe as mN,Fwe as mO,Vwe as mP,Yfe as mQ,jp as ma,nge as mb,cge as mc,Ube as md,Vx as me,Mme as mf,wD as mg,wye as mh,Zye as mi,R1e as mj,L1e as mk,N1e as ml,KV as mm,vZ as mn,hZ as mo,pZ as mp,e2 as mq,kM as mr,ZD as ms,Kc as mt,Ode as mu,rD as mv,qr as mw,n2e as mx,pre as my,dre as mz,Gi as n,h2e as o,fi as p,ie as q,V1 as r,Zt as s,_1e as t,DO as u,Ho as v,u2e as w,Wt as x,lc as y,Ee as z};
