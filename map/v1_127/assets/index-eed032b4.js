(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function i(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(a){if(a.ep)return;a.ep=!0;const d=i(a);fetch(a.href,d)}})();function b(t,e,i,s){var a,d=arguments.length,y=d<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,e,i,s);else for(var g=t.length-1;g>=0;g--)(a=t[g])&&(y=(d<3?a(y):d>3?a(e,i,y):a(e,i))||y);return d>3&&y&&Object.defineProperty(e,i,y),y}function spe(t,e,i,s){function a(d){return d instanceof i?d:new i(function(y){y(d)})}return new(i||(i=Promise))(function(d,y){function g(I){try{x(s.next(I))}catch(A){y(A)}}function _(I){try{x(s.throw(I))}catch(A){y(A)}}function x(I){I.done?d(I.value):a(I.value).then(g,_)}x((s=s.apply(t,e||[])).next())})}const sR="modulepreload",nR=function(t){return"/map/v1/"+t},S6={},_e=function(e,i,s){if(!i||i.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=nR(d),d in S6)return;S6[d]=!0;const y=d.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(!!s)for(let I=a.length-1;I>=0;I--){const A=a[I];if(A.href===d&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${g}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":sR,y||(x.as="script",x.crossOrigin=""),x.href=d,document.head.appendChild(x),y)return new Promise((I,A)=>{x.addEventListener("load",I),x.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>e())};function oR(t){return t&&t.release&&typeof t.release=="function"}function aR(t){return t&&t.acquire&&typeof t.acquire=="function"}let eu=class Rb{constructor(e,i,s,a=1,d=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=s,this.allocationSize=a,this._pool=new Array(d),this._initialSize=d,this._ctor)for(let y=0;y<d;y++)this._pool[y]=new this._ctor;this.allocationSize=Math.max(a,1)}destroy(){this.prune(0)}acquire(...e){let i;if(Rb.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let a=0;a<s;a++)this._pool[a]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):aR(i)&&i.acquire(...e),i}release(e){e&&!Rb.test.disabled&&(this._releaseFunction?this._releaseFunction(e):oR(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};eu.test={disabled:!1};function lR(t){t.length=0}let kr=class{constructor(e=50,i=50){this._pool=new eu(Array,void 0,lR,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return o2.acquire()}static release(e){return o2.release(e)}static prune(){o2.prune()}};const o2=new kr(100);function ope(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function uR(t,e){for(const i of t)if(i!=null&&e(i))return i}function Tg(t){return t!=null&&typeof t[Symbol.iterator]=="function"}function uh(t,e){return t!=null?e(t):null}function Gr(t,e){return Zm(t,e),t}function Zm(t,e){if(t==null)throw new Error(e??"value is None")}function Kt(t){return t==null||t.destroy(),null}function ape(t){return t==null||t.dispose(),null}function li(t){return t==null||t.remove(),null}function _h(t){return t==null||t.abort(),null}function lpe(t){return t==null||t.release(),null}function hR(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function cR(t){return null}function upe(t,e){const i=new Array;for(const s of t)i.push(s!=null?e(s):null);return i}function hpe(t,e){for(const i of t)uh(i,e)}function cpe(t){return t}let ba=class jb{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Tg(e)){const s=this._getOrCreateGroup(i);for(const a of e)this._isHandle(a)&&s.push(a)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(s=>s.forEach(e));else{const s=this._getGroup(e);s&&i&&s.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Tg(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof jb)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof jb?i.removeAll():i.remove()}};const A$=Symbol("Accessor-beforeDestroy");function Xm(t){return yo(()=>t.forEach(e=>e!=null&&e.remove()))}function yo(t){return{remove:()=>{t&&(t(),t=void 0)}}}let a2=class bu{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*bu._m}getInt(){return this._seed=(bu._a*this._seed+bu._c)%bu._m,this._seed}getFloat(){return this.getInt()/(bu._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const s=i-e;return e+this.getInt()/bu._m*s}};a2._m=2147483647,a2._a=48271,a2._c=0;const ppe=1.5;function dpe(t,e){return e?t.filter((i,s,a)=>a.findIndex(e.bind(null,i))===s):t.filter((i,s,a)=>a.indexOf(i)===s)}function Qm(t,e,i){if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1}else for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}function fpe(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let s=0;s<e.length;++s)t[s]!==e[s]&&(t[s]=e[s],i=!0);return i}function ype(t,e,i){let s,a;return i?(s=e.filter(d=>!t.some(y=>i(y,d))),a=t.filter(d=>!e.some(y=>i(y,d)))):(s=e.filter(d=>!t.includes(d)),a=t.filter(d=>!e.includes(d))),{added:s,removed:a}}function gpe(t){return t&&typeof t.length=="number"}const pR=!!Array.prototype.fill;function dR(t,e){if(pR)return new Array(t).fill(e);const i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i}function mpe(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let s=t;s<e;s++)i[s-t]=s;return i}let k$=class{constructor(){this.last=0}};const O$=new k$;function Db(t,e,i,s){s=s||O$;const a=Math.max(0,s.last-10);for(let y=a;y<i;++y)if(t[y]===e)return s.last=y,y;const d=Math.min(a,i);for(let y=0;y<d;++y)if(t[y]===e)return s.last=y,y;return-1}function fR(t,e,i,s){const a=i??t.length,d=Db(t,e,a,s);if(d!==-1)return t[d]=t[a-1],i==null&&t.pop(),e}const Bs=new Set;function yR(t,e,i=t.length,s=e.length,a,d){if(s===0||i===0)return i;Bs.clear();for(let g=0;g<s;++g)Bs.add(e[g]);a=a||O$;const y=Math.max(0,a.last-10);for(let g=y;g<i;++g)if(Bs.has(t[g])&&(d&&d.push(t[g]),Bs.delete(t[g]),t[g]=t[i-1],--i,--g,Bs.size===0||i===0))return Bs.clear(),i;for(let g=0;g<y;++g)if(Bs.has(t[g])&&(d&&d.push(t[g]),Bs.delete(t[g]),t[g]=t[i-1],--i,--g,Bs.size===0||i===0))return Bs.clear(),i;return Bs.clear(),i}function gR(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function ho(t,e){return t!=null}let kl;function le(t){return typeof kl[t]=="function"?kl[t]=kl[t](globalThis):kl[t]}var _$,S$,x$,$$;kl=(_$=globalThis.dojoConfig)!=null&&_$.has||(S$=globalThis.esriConfig)!=null&&S$.has?{...(x$=globalThis.dojoConfig)==null?void 0:x$.has,...($$=globalThis.esriConfig)==null?void 0:$$.has}:{},le.add=(t,e,i,s)=>((s||kl[t]===void 0)&&(kl[t]=e),i&&le(t)),le.cache=kl,le.add("esri-deprecation-warnings",!0),le.add("esri-force-fullscreen-debug",!1),(()=>{var e;le.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(le.add("host-browser",t),le.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),le.add("dom",t),le("host-browser")){const i=navigator,s=i.userAgent,a=i.appVersion,d=parseFloat(a);if(le.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),le.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),le.add("khtml",a.includes("Konqueror")?d:void 0),le.add("edge",parseFloat(s.split("Edge/")[1])||void 0),le.add("opr",parseFloat(s.split("OPR/")[1])||void 0),le.add("webkit",!le("wp")&&!le("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),le.add("chrome",!le("edge")&&!le("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),le.add("android",!le("wp")&&parseFloat(s.split("Android ")[1])||void 0),le.add("safari",!a.includes("Safari")||le("wp")||le("chrome")||le("android")||le("edge")||le("opr")?void 0:parseFloat(a.split("Version/")[1])),le.add("mac",a.includes("Macintosh")),!le("wp")&&/(iPhone|iPod|iPad)/.test(s)){const y=RegExp.$1.replace(/P/,"p"),g=/OS ([\d_]+)/.test(s)?RegExp.$1:"1",_=parseFloat(g.replace(/_/,".").replaceAll("_",""));le.add(y,_),le.add("ios",_)}le("webkit")||(!s.includes("Gecko")||le("wp")||le("khtml")||le("edge")||le.add("mozilla",d),le("mozilla")&&le.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&le.add("esri-mobile",e),i&&le.add("esri-iPhone",i),le.add("esri-geolocation",!!navigator.geolocation)}le.add("esri-wasm","WebAssembly"in globalThis),le.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),le.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),le.add("esri-atomics","Atomics"in globalThis),le.add("esri-workers","Worker"in globalThis),le.add("web-feat:cache","caches"in globalThis),le.add("esri-workers-arraybuffer-transfer",!le("safari")||Number(le("safari"))>=12),le.add("workers-pool-size",8),le.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),le.add("featurelayer-simplify-payload-size-factors",[1,1,4]),le.add("featurelayer-animation-enabled",!0),le.add("featurelayer-snapshot-enabled",!0),le.add("featurelayer-snapshot-point-min-threshold",8e4),le.add("featurelayer-snapshot-point-max-threshold",4e5),le.add("featurelayer-snapshot-point-coverage",.1),le.add("featurelayer-advanced-symbols",!1),le.add("featurelayer-pbf",!0),le.add("featurelayer-pbf-statistics",!1),le.add("feature-layers-workers",!0),le.add("feature-polyline-generalization-factor",1),le.add("mapview-transitions-duration",200),le.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),le.add("mapserver-pbf-version-support",10.81),le.add("mapservice-popup-identify-max-tolerance",20),le.add("heatmap-allow-raster-fallback",!1),le.add("heatmap-force-raster",!1),le("host-webworker")||le("host-browser")&&(le.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),le.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{le.add("esri-image-decode",!0,!0,!0)}).catch(()=>{le.add("esri-image-decode",!1,!0,!0)})}return!1}),le.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function bpe(t){return t instanceof ArrayBuffer}function q_(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int8Array"}function C$(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8Array"}function P$(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint8ClampedArray"}function B_(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int16Array"}function N$(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint16Array"}function H_(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Int32Array"}function L$(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Uint32Array"}function ev(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float32Array"}function tv(t){var e;return((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="Float64Array"}function mR(t){return!("buffer"in t)}function vR(t){return t!=null?mR(t)?8*t.length+12:t.byteLength+bR:0}const bR=145,wR=1024;function wpe(t){return tv(t)||ev(t)||H_(t)||B_(t)||q_(t)}function _pe(t){return tv(t)||ev(t)}function Spe(t){return tv(t)?179769e303:ev(t)?3402823e32:L$(t)?4294967295:N$(t)?65535:C$(t)||P$(t)?255:H_(t)?2147483647:B_(t)?32767:q_(t)?127:256}function R$(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&R$(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function ae(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=F$(t);if(e!=null)return e;if(Mg(t))return t.clone();if(j$(t))return t.map(ae);if(D$(t))return t.clone();const i={};for(const s of Object.getOwnPropertyNames(t))i[s]=ae(t[s]);return i}function Fb(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=F$(t);if(e!=null)return e;if(j$(t)){let i=!0;const s=t.map(a=>{const d=Fb(a);return a!=null&&d==null&&(i=!1),d});return i?s:null}if(Mg(t))return t.clone();if(t instanceof File||t instanceof Blob)return t;if(!D$(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const s of Object.getOwnPropertyNames(t)){const a=t[s],d=Fb(a);if(a!=null&&d==null)return null;i[s]=d}return i}return null}function Mg(t){return typeof t.clone=="function"}function j$(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function D$(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function x6(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function F$(t){if(q_(t)||C$(t)||P$(t)||B_(t)||N$(t)||H_(t)||L$(t)||ev(t)||tv(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,s]of t)e.set(i,ae(s));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(ae(i));return e}return null}function W_(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function z$(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&Qm(t,e):t instanceof Set?e instanceof Set&&SR(t,e):t instanceof Map?e instanceof Map&&xR(t,e):!!x6(t)&&x6(e)&&_R(t,e))}function _R(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const s of i)if(t[s]!==e[s]||!Object.prototype.hasOwnProperty.call(e,s))return!1;return!0}function SR(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function xR(t,e){if(t.size!==e.size)return!1;for(const[i,s]of t){const a=e.get(i);if(a!==s||a===void 0&&!e.has(i))return!1}return!0}function qi(t){return t.__accessor__??null}function $R(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function fy(t,e,i){return i?Ig(t,e,{policy:i,path:""}):Ig(t,e,null)}function Ig(t,e,i){return e?Object.keys(e).reduce((s,a)=>{const d=a;let y=null,g="merge";if(i&&(y=i.path?`${i.path}.${a}`:a,g=i.policy(y)),g==="replace"||g==="replace-arrays"&&Array.isArray(s[d]))return s[d]=e[d],s;if(s[d]===void 0)return s[d]=ae(e[d]),s;let _=s[d],x=e[d];if(_===x)return s;if(Array.isArray(x)||Array.isArray(s))_=_?Array.isArray(_)?s[d]=_.concat():s[d]=[_]:s[d]=[],x&&(Array.isArray(x)||(x=[x]),x.forEach(I=>{_.includes(I)||_.push(I)}));else if(x&&typeof x=="object")if(i){const I=i.path;i.path=y,s[d]=Ig(_,x,i),i.path=I}else s[d]=Ig(_,x,null);else s.hasOwnProperty(a)&&!e.hasOwnProperty(a)||(s[d]=x);return s},t||{}):t}function V$(t){return Array.isArray(t)?t:t.split(".")}function $6(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function TR(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...$6(i));return e}return $6(t)}function G$(t,e,i,s){const a=TR(e);if(a.length!==1){const d=a.map(y=>s(t,y,i));return Xm(d)}return s(t,a[0],i)}function U$(t){let e=!1;return()=>{e||(e=!0,t())}}function q$(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const a=parseInt(i,10);if(!isNaN(a))return Array.isArray(e)?e[a]:e.at(a)}const s=qi(e);return $R(s,i)?s.get(i):e[i]}function B$(t,e,i){if(t==null)return t;const s=q$(e[i],t);return!s&&i<e.length-1?void 0:i===e.length-1?s:B$(s,e,i+1)}function xf(t,e,i=0){return typeof e!="string"||e.includes(".")?B$(t,V$(e),i):q$(e,t)}function Eg(t,e){return xf(t,e)}function T6(t,e){return xf(e,t)!==void 0}function $f(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const s in e)e[s]=ae(e[s]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function iv(t,e){const i=$f(t);let s=i[e];return s||(s=i[e]={}),s}function MR(t,e){return fy(t,e,ER)}const IR=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function ER(t){return IR.test(t)?"replace":"merge"}function H$(t,e,i=!1){return J$(t,e,i)}function Tf(t,e){if(e!=null)return e[t]||W$(t.split("."),!1,e)}function zh(t,e,i){const s=t.split("."),a=s.pop(),d=W$(s,!0,i);d&&a&&(d[a]=e)}function W$(t,e,i){let s=i;for(const a of t){if(s==null)return;if(!(a in s)){if(!e)return;s[a]={}}s=s[a]}return s}function J$(t,e,i){return e?Object.keys(e).reduce((s,a)=>{let d=s[a],y=e[a];return d===y?s:d===void 0?(s[a]=ae(y),s):(Array.isArray(y)||Array.isArray(s)?(d=d?Array.isArray(d)?s[a]=d.concat():s[a]=[d]:s[a]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(g=>{d.includes(g)||d.push(g)}):s[a]=y.concat())):y&&typeof y=="object"?s[a]=J$(d,y,i):s.hasOwnProperty(a)&&!e.hasOwnProperty(a)||(s[a]=y),s)},t||{}):t}var T$;const mt={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:(T$=globalThis.location)==null?void 0:T$.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(H$(mt,globalThis.esriConfig,!0),delete mt.has),!mt.assetsPath){{const t="4.27";mt.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}mt.defaultAssetsPath=mt.assetsPath}const AR=/\{([^\}]+)\}/g;function M6(t){return t??""}function rv(t,e){return t.replaceAll(AR,typeof e=="object"?(i,s)=>M6(Tf(s,e)):(i,s)=>M6(e(s)))}function kR(t,e){return t.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function J_(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function xpe(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}function $pe(t,e){return new RegExp(`{${e}}`,"ig").test(t)}const I6={info:0,warn:1,error:2,none:3};let me=class fr{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,fr._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=fr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const i=fr._loggers;return fr._loggers=e,i},set throttlingDisabled(e){fr._throttlingDisabled=e}}}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,fr._loggers.get(e)||new fr({module:e})}_log(e,i,...s){if(this._matchLevel(e)){if(i!=="always"&&!fr._throttlingDisabled){const a=this._argsToKey(s),d=this._loggedMessages[e].get(a);if(i==="once"&&d!=null||i==="oncePerTick"&&d&&d>=fr._tickCounter)return;this._loggedMessages[e].set(a,fr._tickCounter),fr._scheduleTickCounterIncrement()}for(const a of mt.log.interceptors)if(a(e,this.module,...s))return;this._inheritedWriter()(e,this.module,...s)}}_parentWithMember(e,i){let s=this;for(;s!=null;){const a=s[e];if(a!=null)return a;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...s){console[e](`[${i}]`,...s)}_matchLevel(e){const i=mt.log.level||"warn";return I6[this._parentWithMember("level",i)]<=I6[e]}_argsToKey(...e){return J_(JSON.stringify(e,(s,a)=>typeof a!="object"||Array.isArray(a)?a:"[Object]"))}static _scheduleTickCounterIncrement(){fr._tickCounterScheduled||(fr._tickCounterScheduled=!0,Promise.resolve().then(()=>{fr._tickCounter++,fr._tickCounterScheduled=!1}))}};me._loggers=new Map,me._tickCounter=0,me._tickCounterScheduled=!1,me._throttlingDisabled=!1;var ra;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(ra||(ra={}));let OR=class{constructor(e,i){this._observers=e,this._observer=i}remove(){gR(this._observers,this._observer)}},K$=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return CR;this._observers==null&&(this._observers=[]);const i=this._observers;let s=!1,a=!1;const d=i.length;for(let y=0;y<d;++y){const g=i[y];if(g.destroyed)a=!0;else if(g===e){s=!0;break}}return s||(i.push(e),a&&this._removeDestroyedObservers()),new OR(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let s=0;for(let a=0;a<i;++a){for(;a+s<i&&e[a+s].destroyed;)++s;if(s>0){if(!(a+s<i))break;e[a]=e[a+s]}}e.length=i-s}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const CR=yo();var Te;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.LINK_CHART=6]="LINK_CHART",t[t.USER=7]="USER"})(Te||(Te={}));const zb=Te.USER+1;function Or(t){switch(t){case"defaults":return Te.DEFAULTS;case"service":return Te.SERVICE;case"portal-item":return Te.PORTAL_ITEM;case"web-scene":return Te.WEB_SCENE;case"web-map":return Te.WEB_MAP;case"link-chart":return Te.LINK_CHART;case"user":return Te.USER;default:return null}}function Wd(t){switch(t){case Te.DEFAULTS:return"defaults";case Te.SERVICE:return"service";case Te.PORTAL_ITEM:return"portal-item";case Te.WEB_SCENE:return"web-scene";case Te.WEB_MAP:return"web-map";case Te.LINK_CHART:return"link-chart";case Te.USER:return"user"}return void 0}function PR(t){return Wd(t)}var Dt;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Dt||(Dt={}));const Ag={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},b0=[];let gd=Ag;function Ke(t){gd.onObservableAccessed(t)}let yy=!1,gy=!1;function ca(t,e,i){if(yy)return K_(t,e,i);Y$(t);const s=e.call(i);return Z$(),s}function NR(t,e){return ca(Ag,t,e)}function K_(t,e,i){const s=yy;yy=!0,Y$(t);let a=null;try{a=e.call(i)}catch(d){gy&&me.getLogger("esri.core.accessorSupport.tracking").error(d)}return Z$(),yy=s,a}function Y$(t){gd=t,b0.push(t)}function Z$(){const t=b0.length;if(t>1){const e=b0.pop();gd=b0[t-2],e.onTrackingEnd()}else if(t===1){const e=b0.pop();gd=Ag,e.onTrackingEnd()}else gd=Ag}function X$(t,e){const i=e.observerObject;if(i.flags&Dt.DepTrackingInitialized)return;const s=gy;gy=!1,i.flags&Dt.AutoTracked?K_(e,e.metadata.get,t):Q$(t,e),gy=s}const LR=[];function Q$(t,e){const i=e.observerObject;i.flags&Dt.ExplicitlyTracking||(i.flags|=Dt.ExplicitlyTracking,K_(e,()=>{const s=e.metadata.dependsOn||LR;for(const a of s)if(typeof a!="string"||a.includes(".")){const d=V$(a);for(let y=0,g=t;y<d.length&&g!=null&&typeof g=="object";++y)g=E6(g,d[y],y!==d.length-1)}else E6(t,a,!1)}),i.flags&=~Dt.ExplicitlyTracking)}function E6(t,e,i){const s=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const d=parseInt(s,10);if(!isNaN(d))return Array.isArray(t)?t[d]:t.at(d)}const a=qi(t);if(a){const d=a.propertiesByName.get(s);d&&(Ke(d.observerObject),X$(t,d))}return i?t[s]:void 0}let A6=class{constructor(e,i){this.propertyName=e,this.metadata=i,this.observerObject=new RR,this._accessed=null,this._handles=null,this.observerObject.flags=Dt.Dirty|(i.nonNullable?Dt.NonNullable:0)|(i.hasOwnProperty("value")?Dt.HasDefaultValue:0)|(i.get===void 0?Dt.DepTrackingInitialized:0)|(i.dependsOn===void 0?Dt.AutoTracked:0)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){const i=this.observerObject;Ke(i);const s=e.store,a=this.propertyName,d=i.flags,y=s.get(a);if(d&Dt.Computing||~d&Dt.Dirty&&s.has(a))return y;i.flags|=Dt.Computing;const g=e.host;let _;d&Dt.AutoTracked?_=ca(this,this.metadata.get,g):(Q$(g,this),_=this.metadata.get.call(g)),s.set(a,_,Te.COMPUTED);const x=s.get(a);return x===y?i.flags&=~Dt.Dirty:NR(this.commit,this),i.flags&=~Dt.Computing,x}onObservableAccessed(e){if(e===this.observerObject)return;let i=this._accessed;if(i==null)i=[],this._accessed=i;else if(i.includes(e))return;i.push(e)}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=Dt.DepTrackingInitialized;const i=this._accessed;if(i==null||i.length===0)return;let s=this._handles;s==null&&(s=[],this._handles=s);for(let a=0;a<i.length;++a)s.push(i[a].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~Dt.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},RR=class extends K${constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Dt.Overriden&&(this.flags|=Dt.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onCommitted()}}destroy(){this.flags&Dt.Dirty&&this.onCommitted(),super.destroy()}},jR=class eT{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new eT;return this._values.forEach((s,a)=>{e&&e.has(a)||i.set(a,ae(s))}),i}get(e){return this._values.get(e)}originOf(){return Te.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function l1(t,e,i){return t!==void 0}function k6(t,e,i,s){return t!==void 0&&(!(i==null&&t.observerObject.flags&Dt.NonNullable)||(s.lifecycle,ra.INITIALIZING,!1))}function DR(t){return t&&typeof t.destroy=="function"}me.getLogger("esri.core.accessorSupport.Properties");let FR=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=ra.INITIALIZING,this.store=new jR,this._origin=Te.USER;const i=this.host.constructor.__accessorMetadata__;for(const s in i){const a=new A6(s,i[s]);this.propertiesByName.set(s,a)}this.metadatas=i}initialize(){this.lifecycle=ra.CONSTRUCTING}constructed(){this.lifecycle=ra.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.propertiesByName){if(i.metadata.autoDestroy){const s=this.internalGet(e);s&&DR(s)&&(s.destroy(),~i.observerObject.flags&Dt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==ra.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(i.metadata.get)return i.getComputed(this);Ke(i.observerObject);const s=this.store;return s.has(e)?s.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const s=this.propertiesByName.get(e);if(s!==void 0&&s.observerObject.flags&Dt.HasDefaultValue)return"defaults"}return Wd(i)}has(e){return!!this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(l1(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const s=this.propertiesByName.get(e);l1(s)&&this._internalSet(s,i)}getDependsInfo(e,i,s){const a=this.propertiesByName.get(i);if(!l1(a))return"";const d=new Set,y=ca({onObservableAccessed:_=>d.add(_),onTrackingEnd:()=>{}},()=>{var _;return(_=a.metadata.get)==null?void 0:_.call(e)});let g=`${s}${e.declaredClass.split(".").pop()}.${i}: ${y}
`;if(d.size===0)return g;s+="  ";for(const _ of d)_ instanceof A6&&(g+=`${s}${_.propertyName}: undefined
`);return g}setAtOrigin(e,i,s){const a=this.propertiesByName.get(e);if(l1(a))return this._setAtOrigin(a,i,s)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.observerObject.flags&Dt.Overriden)}clearOverride(e){const i=this.propertiesByName.get(e),s=i==null?void 0:i.observerObject;s&&s.flags&Dt.Overriden&&(s.flags&=~Dt.Overriden,i.notifyChange())}override(e,i){const s=this.propertiesByName.get(e);if(!k6(s,e,i,this))return;const a=s.metadata.cast;if(a){const d=this._cast(a,i),{valid:y,value:g}=d;if(l2.release(d),!y)return;i=g}s.observerObject.flags|=Dt.Overriden,this._internalSet(s,i)}set(e,i){const s=this.propertiesByName.get(e);if(!k6(s,e,i,this))return;const a=s.metadata.cast;if(a){const y=this._cast(a,i),{valid:g,value:_}=y;if(l2.release(y),!g)return;i=_}const d=s.metadata.set;d?d.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(e){this._origin=Or(e)}getDefaultOrigin(){return Wd(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const s=this.lifecycle!==ra.INITIALIZING?this._origin:Te.DEFAULTS;this._setAtOrigin(e,i,s)}_setAtOrigin(e,i,s){const a=this.store,d=e.propertyName;a.has(d,s)&&W_(i,a.get(d))&&~e.observerObject.flags&Dt.Overriden&&s===a.originOf(d)||(e.invalidate(),a.set(d,i,s),e.commit(),X$(this.host,e))}_cast(e,i){const s=l2.acquire();return s.valid=!0,s.value=i,e&&(s.value=e.call(this.host,i,s)),s}},zR=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const l2=new eu(zR);function VR(t,e){return t.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,s)=>s===""?"$":(Tf(s,e)??"").toString())}let tT=class{constructor(e,i,s){this.name=e,this.details=s,this.message=(i&&VR(i,s))??""}toString(){return"["+this.name+"]: "+this.message}},oe=class iT extends tT{constructor(e,i,s){super(e,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ae(i)}catch{return"[object]"}}))}}catch(e){throw me.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new iT(e.name,e.message,e.details)}};oe.prototype.type="error";function kg(t,e,i){if(t&&e)if(typeof e=="object")for(const s of Object.getOwnPropertyNames(e))kg(t,s,e[s]);else{if(e.includes(".")){const a=e.split("."),d=a.splice(a.length-1,1)[0];return void kg(Eg(t,a),d,i)}const s=t.__accessor__;s!=null&&GR(e,s),t[e]=i}}function GR(t,e){if(le("esri-unknown-property-errors")&&!UR(t,e))throw new oe("set:unknown-property",qR(t,e))}function UR(t,e){return e.metadatas[t]!=null}function qR(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let BR;function HR(){return BR}let rT=class extends eu{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=cR(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const u1=[];function Og(t){u1.push(t),u1.length===1&&queueMicrotask(()=>{const e=u1.slice();u1.length=0;for(const i of e)i()})}let md=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Vb;(function(t){const e=(d,y,g,_)=>{let x=y,I=y;const A=g>>>1,C=d[x-1];for(;I<=A;){I=x<<1,I<g&&_(d[I-1],d[I])<0&&++I;const N=d[I-1];if(_(N,C)<=0)break;d[x-1]=N,x=I}d[x-1]=C},i=(d,y)=>d<y?-1:d>y?1:0;function s(d,y,g,_){y===void 0&&(y=0),g===void 0&&(g=d.length),_===void 0&&(_=i);for(let I=g>>>1;I>y;I--)e(d,I,g,_);const x=y+1;for(let I=g-1;I>y;I--){const A=d[y];d[y]=d[I],d[I]=A,e(d,x,I,_)}}function*a(d,y,g,_){y===void 0&&(y=0),g===void 0&&(g=d.length),_===void 0&&(_=i);for(let I=g>>>1;I>y;I--)e(d,I,g,_),yield;const x=y+1;for(let I=g-1;I>y;I--){const A=d[y];d[y]=d[I],d[I]=A,e(d,x,I,_),yield}}t.sort=s,t.iterableSort=a})(Vb||(Vb={}));const O6=Vb,WR=1.5,JR=1.1;let zl=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new k$,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>C6(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let s=0;s<this._length;s++){const a=this.data[s];e(a)&&i.push(a)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const s=this.data.indexOf(e,i);return s!==-1&&s<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let s=0;s<i;s++)this.data[this._length++]=e[s]}fill(e,i){for(let s=0;s<i;s++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,C6(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=Db(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(Db(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,s){this.length=yR(this.data,e,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const s=this.data[e];this.data[e]=this.data[i],this.data[i]=s}sort(e){O6.sort(this.data,0,this.length,e)}iterableSort(e){return O6.iterableSort(this.data,0,this.length,e)}some(e,i){for(let s=0;s<this.length;++s)if(e.call(i,this.data[s],s,this.data))return!0;return!1}find(e,i){for(let s=0;s<this.length;++s){const a=this.data[s];if(e.call(i,a,s))return a}}filterInPlace(e,i){let s=0;for(let a=0;a<this._length;++a){const d=this.data[a];e.call(i,d,a,this.data)&&(this.data[a]=this.data[s],this.data[s]=d,s++)}if(this._deallocator)for(let a=s;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);return this._length=s,this._shrink(),this}forAll(e,i){const s=this.length,a=this.data;for(let d=0;d<s;++d)e.call(i,a[d],d,a)}forEach(e,i){for(let s=0;s<this.length;++s)e.call(i,this.data[s],s,this.data)}map(e,i){const s=new Array(this.length);for(let a=0;a<this.length;++a)s[a]=e.call(i,this.data[a],a,this.data);return s}reduce(e,i){let s=i;for(let a=0;a<this.length;++a)s=e(s,this.data[a],a,this.data);return s}has(e){const i=this.length,s=this.data;for(let a=0;a<i;++a)if(s[a]===e)return!0;return!1}};function C6(t){t.data.length>WR*t.length&&(t.data.length=Math.floor(t.length*JR))}function KR(t){return{setTimeout:(e,i)=>{const s=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(s)}}}}const Mp=KR(globalThis);function sv(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function nv(t,e,i){if(!sv(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const s=e.slice();for(const a of s)t.addEventListener(a,i);return{remove(){for(const a of s)t.removeEventListener(a,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function sT(t,e,i){if(!sv(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const s=nv(t,e,a=>{s.remove(),i.call(t,a)});return{remove(){s.remove()}}}const YR={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function vd({key:t}){return YR[t]||t}function ni(t="Aborted"){return new oe("AbortError",t)}function Xt(t,e="Aborted"){if(Fs(t))throw ni(e)}function ov(t){return t!=null?"aborted"in t?t:t.signal:t}function Fs(t){const e=ov(t);return e!=null&&e.aborted}function wn(t){if(or(t))throw t}function P6(t){if(!or(t))throw t}function ls(t,e){const i=ov(t);if(i!=null){if(!i.aborted)return sT(i,"abort",()=>e());e()}}function Y_(t,e){const i=ov(t);if(i!=null)return Xt(i),sT(i,"abort",()=>e(ni()))}function Ia(t,e){return ov(e)==null?t:new Promise((i,s)=>{let a=ls(e,()=>s(ni()));const d=()=>a=li(a);t.then(d,d),t.then(i,s)})}function or(t){return(t==null?void 0:t.name)==="AbortError"}async function Gb(t){try{return await t}catch(e){if(!or(e))throw e;return}}async function Sn(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),s=i.map(y=>t[y]),a=await Sn(s),d={};return i.map((y,g)=>d[y]=a[g]),d}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(s,a)=>{const d=i[a];return d.status==="fulfilled"?{promise:s,value:d.value}:{promise:s,error:d.reason}}))}async function ZR(t){return(await Sn(t)).filter(e=>!!e.value).map(e=>e.value)}function Z_(t,e=void 0,i){const s=new AbortController;return ls(i,()=>s.abort()),new Promise((a,d)=>{let y=setTimeout(()=>{y=0,a(e)},t);ls(s,()=>{y&&(clearTimeout(y),d(ni()))})})}function wa(t){return t&&typeof t.then=="function"}function Ub(t){return wa(t)?t:Promise.resolve(t)}function nT(t,e=-1){let i,s,a,d,y=null;const g=(..._)=>{if(i){s=_,d&&d.reject(ni()),d=On();const C=d.promise;if(y){const N=y;y=null,N.abort()}return C}if(a=d||On(),d=null,e>0){const C=new AbortController;i=Ub(t(..._,C.signal));const N=i;Z_(e).then(()=>{i===N&&(d?C.abort():y=C)})}else i=1,i=Ub(t(..._));const x=()=>{const C=s;s=a=i=y=null,C!=null&&g(...C)},I=i,A=a;return I.then(x,x),I.then(A.resolve,A.reject),A.promise};return g}function On(){let t,e;const i=new Promise((a,d)=>{t=a,e=d}),s=a=>{t(a)};return s.resolve=a=>t(a),s.reject=a=>e(a),s.timeout=(a,d)=>Mp.setTimeout(()=>s.reject(d),a),s.promise=i,s}async function Cg(t){await Promise.resolve(),Xt(t)}function Lpe(t){return t}let XR=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},QR=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},qb=0;const Yp={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Bb=["prepare","preRender","render","postRender","update","finish"],Hb=[],Sh=new zl;let ej=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const Pg={frameTasks:Sh,willDispatch:!1,clearFrameTasks:tj,dispatch:lT,executeFrameTasks:ij};function Ip(t){const e=new QR(t);return Hb.push(e),Pg.willDispatch||(Pg.willDispatch=!0,Og(lT)),e}function dp(t){const e=new XR(t);return Sh.push(e),Ng==null&&(qb=performance.now(),Ng=requestAnimationFrame(oT)),new ej(e)}let Ng=null;function tj(t=!1){Sh.forAll(e=>{e.removed=!0}),t&&aT()}function oT(){const t=performance.now();Ng=null,Ng=Sh.length>0?requestAnimationFrame(oT):null,Pg.executeFrameTasks(t)}function ij(t){const e=t-qb;qb=t;const i=1e3/60,s=Math.max(0,e-i);Yp.time=t,Yp.frameDuration=i-s;for(let a=0;a<Bb.length;a++){const d=performance.now(),y=Bb[a];Sh.forAll(g=>{var _;g.paused||g.removed||(a===0&&g.ticks++,g.phases[y]&&(Yp.elapsedFrameTime=performance.now()-t,Yp.deltaTime=g.ticks===0?0:e,(_=g.phases[y])==null||_.call(g,Yp)))}),sj[a].record(performance.now()-d)}aT(),nj.record(performance.now()-t)}const h1=new zl;function aT(){Sh.forAll(t=>{t.removed&&h1.push(t)}),Sh.removeUnorderedMany(h1.data,h1.length),h1.clear()}function lT(){for(;Hb.length;){const t=Hb.shift();t.isActive&&t.callback()}Pg.willDispatch=!1}function rj(t=1,e){const i=On(),s=()=>{Fs(e)?i.reject(ni()):t===0?i():(--t,Og(()=>s()))};return s(),i.promise}const sj=Bb.map(t=>new md(t)),nj=new md("total");function oj(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let aj=0;function bd(){return++aj}let av=class{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new lj(e),N6.register(this,new WeakRef(this._observerObject),this)}destroy(){var e;N6.unregister(this._observerObject),this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear()}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,s=this._observerObject;for(let a=0;a<i.length;++a)e.push(i[a].observe(s));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},lj=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=uj}};const N6=new FinalizationRegistry(t=>{var e;(e=t.deref())==null||e.destroy()});function uj(){}let Xc=!1;const Lg=[];function uT(t,e){let i=new av(d),s=null,a=!1;function d(){if(!i||a)return;if(Xc)return void pT(d);const g=s;i.clear(),Xc=!0,a=!0,s=ca(i,t),a=!1,Xc=!1,e(s,g),dT()}function y(){i&&(i.destroy(),i=null,s=null)}return a=!0,s=ca(i,t),a=!1,{remove:y}}function hT(t,e){let i=new av(a),s=null;function a(){e(s,y)}function d(){i&&(i.destroy(),i=null),s=null}function y(){return i?(i.clear(),s=ca(i,t),s):null}return y(),{remove:d}}function cT(t){let e=new av(s),i=!1;function s(){e&&!i&&(Xc?pT(s):(e.clear(),Xc=!0,i=!0,ca(e,t),i=!1,Xc=!1,dT()))}function a(){e&&(e.destroy(),e=null)}return i=!0,ca(e,t),i=!1,{remove:a}}function pT(t){Lg.includes(t)||Lg.unshift(t)}function dT(){for(;Lg.length;)Lg.pop()()}var wd;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(wd||(wd={}));let Jd=class{constructor(){this.uid=bd(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,s,a,d){return this.pool.acquire(wd.Untracked,e,i,s,a,d,W_)}static acquireTracked(e,i,s,a){return this.pool.acquire(wd.Tracked,e,i,s,null,null,a)}notify(e,i){this.type===wd.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,s,a,d,y,g){this.uid=bd(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=s,this.getValue=a,this.target=d,this.path=y,this.equals=g}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=bd(),this.removed=!0}};Jd.pool=new rT(Jd);const my=new kr,oa=new Set;let Rg;function jg(t){oa.delete(t),oa.add(t),Rg||(Rg=Ip(pj))}function hj(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function cj(t){for(const e of oa.values())e.target===t&&(e.removed=!0)}function pj(){let t=10;for(;Rg&&t--;){Rg=null;const e=dj(),i=my.acquire();for(const s of e){const a=s.uid;hj(s),a===s.uid&&s.removed&&i.push(s)}for(const s of oa)s.removed&&(i.push(s),oa.delete(s));for(const s of i)Jd.pool.release(s);my.release(i),my.release(e),Wb.forEach(s=>s())}}function dj(){const t=my.acquire();t.length=oa.size;let e=0;for(const i of oa)t[e]=i,++e;return oa.clear(),t}const Wb=new Set;function fj(t){return Wb.add(t),{remove(){Wb.delete(t)}}}function yj(t,e,i){let s=G$(t,e,i,(a,d,y)=>{let g,_,x=hT(()=>xf(a,d),(I,A)=>{a.__accessor__.destroyed||g&&g.uid!==_?s.remove():(g||(g=Jd.acquireUntracked(I,y,A,a,d),_=g.uid),jg(g))});return{remove:U$(()=>{x.remove(),g&&(g.uid!==_||g.removed||(g.removed=!0,jg(g)),g=null),s=x=null})}});return s}function gj(t,e,i){const s=G$(t,e,i,(a,d,y)=>{let g=!1;return uT(()=>xf(a,d),(_,x)=>{a.__accessor__.destroyed?s.remove():g||(g=!0,W_(x,_)||y.call(a,_,x,d,a),g=!1)})});return s}function mj(t,e,i,s=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:s?gj(t,e,i):yj(t,e,i)}function vj(t,e,i){let s,a,d=hT(t,(y,g)=>{s&&s.uid!==a?d.remove():(s||(s=Jd.acquireTracked(y,e,g,i),a=s.uid),jg(s))});return{remove:U$(()=>{d.remove(),s&&(s.uid!==a||s.removed||(s.removed=!0,jg(s)),s=null),d=null})}}function bj(t,e,i){let s=!1;return uT(t,(a,d)=>{s||(s=!0,i(d,a)||e(a,d),s=!1)})}function wj(t,e,i=!1,s=z$){return i?bj(t,e,s):vj(t,e,s)}function L6(t){return oj(oa,e=>e.oldValue===t)}function lv(t,e){for(const[i,s]of t)if(e(s,i))return!0;return!1}function fT(t,e,i){const s=t.get(e);if(s!==void 0)return s;const a=i();return t.set(e,a),a}const Qc=me.getLogger("esri.core.accessorSupport.ensureTypes");function _j(t){return t==null?t:new Date(t)}function Sj(t){return t==null?t:!!t}function Mf(t){return t==null?t:t.toString()}function Cs(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function uv(t){return t==null?t:Math.round(parseFloat(t))}function yT(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function Dg(t,e){return e!=null&&t&&!(e instanceof t)}function gT(t){return t&&"isCollection"in t}function R6(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function xj(t,e){if(!e||!e.constructor||!gT(e.constructor))return Jb(t,e)?e:new t(e);const i=R6(t.prototype.itemType),s=R6(e.constructor.prototype.itemType);return i?s?i===s?e:i.prototype.isPrototypeOf(s.prototype)?new t(e):(Jb(t,e),e):new t(e):e}function Jb(t,e){return!!yT(e)&&(Qc.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+hv(t)+"'"),!0)}function xh(t,e){return e==null?e:gT(t)?xj(t,e):Dg(t,e)?Jb(t,e)?e:new t(e):e}function hv(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const $j=new WeakMap;function Tj(t){switch(t){case Number:return Cs;case Pt:return uv;case Boolean:return Sj;case String:return Mf;case Date:return _j;default:return fT($j,t,()=>xh.bind(null,t))}}function ui(t,e){const i=Tj(t);return arguments.length===1?i:i(e)}function Kd(t,e,i){return arguments.length===1?Kd.bind(null,t):e&&(Array.isArray(e)?e.map(s=>t(s,i)):[t(e,i)])}function Mj(t,e){return arguments.length===1?Kd(i=>ui(t,i)):Kd(i=>ui(t,i),e)}function mT(t,e,i){return e!==0&&Array.isArray(i)?i.map(s=>mT(t,e-1,s)):t(i)}function Fg(t,e,i){if(arguments.length===2)return d=>Fg(t,e,d);if(!i)return i;i=mT(t,e,i);let s=e,a=i;for(;s>0&&Array.isArray(a);)s--,a=a[0];if(a!==void 0)for(let d=0;d<s;d++)i=[i];return i}function Ij(t,e,i){return arguments.length===2?Fg(s=>ui(t,s),e):Fg(s=>ui(t,s),e,i)}function vT(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function Kb(t,e){if(arguments.length===2)return Kb(t).call(null,e);const i=new Set,s=t.filter(g=>typeof g!="function"),a=t.filter(g=>typeof g=="function");for(const g of t)typeof g!="string"&&typeof g!="number"||i.add(g);let d=null,y=null;return(g,_)=>{if(g==null)return g;const x=typeof g,I=x==="string"||x==="number";return I&&(i.has(g)||a.some(A=>x==="string"&&A===String||x==="number"&&A===Number))||x==="object"&&a.some(A=>!Dg(g,A))?g:(I&&s.length?(d||(d=s.map(A=>typeof A=="string"?`'${A}'`:`${A}`).join(", ")),Qc.error("Accessor#set",`'${g}' is not a valid value for this property, only the following values are valid: ${d}`)):typeof g=="object"&&a.length?(y||(y=a.map(A=>hv(A)).join(", ")),Qc.error("Accessor#set",`'${g}' is not a valid value for this property, value must be one of ${y}`)):Qc.error("Accessor#set",`'${g}' is not a valid value for this property`),_&&(_.valid=!1),null)}}function pa(t,e){if(arguments.length===2)return pa(t).call(null,e);const i={},s=[],a=[];for(const _ in t.typeMap){const x=t.typeMap[_];i[_]=ui(x),s.push(hv(x)),a.push(_)}const d=()=>`'${s.join("', '")}'`,y=()=>`'${a.join("', '")}'`,g=typeof t.key=="string"?_=>_[t.key]:t.key;return _=>{if(t.base&&!Dg(t.base,_)||_==null)return _;const x=g(_)||t.defaultKeyValue,I=i[x];if(!I)return Qc.error("Accessor#set",`Invalid property value, value needs to be one of ${d()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!Dg(t.typeMap[x],_))return _;if(typeof t.key=="string"&&!yT(_)){const A={};for(const C in _)C!==t.key&&(A[C]=_[C]);return I(A)}return I(_)}}let Pt=class{};const Upe={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function Ej(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function bT(t){switch(t.type){case"native":return ui(t.value);case"array":return Kd(bT(t.value));case"one-of":return Aj(t);default:return null}}function Aj(t){let e=null;return(i,s)=>Zb(i,t)?i:(e==null&&(e=Yb(t)),Qc.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),s&&(s.valid=!1),null)}function Yb(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Pt:return"integer";case Date:return"date";default:return hv(t.value)}case"array":return`array of ${Yb(t.value)}`;case"one-of":{const e=t.values.map(i=>Yb(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function Zb(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Pt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!Zb(i,e.value));case"one-of":return e.values.some(i=>Zb(t,i))}}function S(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(e,i),a=iv(e,i);s&&(s.get||s.set?(a.get=s.get||a.get,a.set=s.set||a.set):"value"in s&&("value"in t&&me.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),a.value=t.value=s.value)),t.readOnly!=null&&(a.readOnly=t.readOnly);const d=t.aliasOf;if(d){const _=typeof d=="string"?d:d.source,x=typeof d=="string"?null:d.overridable===!0;let I;a.dependsOn=[_],a.get=function(){let A=Eg(this,_);if(typeof A=="function"){I||(I=_.split(".").slice(0,-1).join("."));const C=Eg(this,I);C&&(A=A.bind(C))}return A},a.readOnly||(a.set=x?function(A){this._override(i,A)}:function(A){kg(this,_,A)})}const y=t.type,g=t.types;a.cast||(y?a.cast=kj(y):g&&(Array.isArray(g)?a.cast=Kd(pa(g[0])):a.cast=pa(g))),MR(a,t),t.range&&(a.cast=Oj(a.cast,t.range))}}function wT(t,e,i){const s=iv(t,i);s.json||(s.json={});let a=s.json;return e!==void 0&&(a.origins||(a.origins={}),a.origins[e]||(a.origins[e]={}),a=a.origins[e]),a}function kj(t){let e=0,i=t;if(Ej(t))return bT(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const s=i;if(vT(s))return e===0?Kb(s):Fg(Kb(s),e);if(e===1)return Mj(s);if(e>1)return Ij(s,e);const a=t;return a.from?a.from:ui(a)}function Oj(t,e){return i=>{let s=+t(i);return e.step!=null&&(s=Math.round(s/e.step)*e.step),e.min!=null&&(s=Math.max(e.min,s)),e.max!=null&&(s=Math.min(e.max,s)),s}}function Cj(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(e[s]){const a=e[s];i[s].forEach(d=>{e[d]=a}),delete e[s]}}}let Cn=class extends tT{constructor(e,i,s){super(e,i,s)}};Cn.prototype.type="warning";function _T(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Xb=me.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function j6(t,e,i){var s,a;t&&(!i&&!e.read||(s=e.read)!=null&&s.reader||((a=e.read)==null?void 0:a.enabled)===!1||Lj(t)&&zh("read.reader",If(t),e))}function If(t){var i,s;const e=t.ndimArray??0;if(e>1)return Nj(t);if(e===1)return D6(t);if("type"in t&&xT(t.type)){const a=(s=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:s.Type,d=D6(typeof a=="function"?{type:a}:{types:a});return(y,g,_)=>{const x=d(y,g,_);return x&&new t.type(x)}}return X_(t)}function X_(t){return"type"in t?Pj(t.type):Rj(t.types)}function Pj(t){return t.prototype.read?(e,i,s)=>{if(e==null)return e;const a=typeof e;if(a!=="object")return void Xb.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${a}'`);const d=new t;return d.read(e,s),d}:t.fromJSON}function ST(t,e,i,s){return s!==0&&Array.isArray(e)?e.map(a=>ST(t,a,i,s-1)):t(e,void 0,i)}function Nj(t){const e=X_(t),i=ST.bind(null,e),s=t.ndimArray??0;return(a,d,y)=>{if(a==null)return a;a=i(a,y,s);let g=s,_=a;for(;g>0&&Array.isArray(_);)g--,_=_[0];if(_!==void 0)for(let x=0;x<g;x++)a=[a];return a}}function D6(t){const e=X_(t);return(i,s,a)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const g of i){const _=e(g,void 0,a);_!==void 0&&y.push(_)}return y}const d=e(i,void 0,a);return d!==void 0?[d]:void 0}}function xT(t){if(!_T(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?Q_(e.Type):$T(e.Type))}function Lj(t){return"types"in t?$T(t.types):Q_(t.type)}function Q_(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||xT(t))}function $T(t){for(const e in t.typeMap)if(!Q_(t.typeMap[e]))return!1;return!0}function Rj(t){let e=null;const i=t.errorContext??"type";return(s,a,d)=>{if(s==null)return s;const y=typeof s;if(y!=="object")return void Xb.error(`Expected JSON value of type 'object' to deserialize, but got '${y}'`);e||(e=jj(t));const g=t.key;if(typeof g!="string")return;const _=s[g],x=_?e[_]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!x){const A=`Type '${_||"unknown"}' is not supported`;return d&&d.messages&&s&&d.messages.push(new Cn(`${i}:unsupported`,A,{definition:s,context:d})),void Xb.error(A)}const I=new x;return I.read(s,d),I}}function jj(t){var i,s;const e={};for(const a in t.typeMap){const d=t.typeMap[a],y=$f(d.prototype);if(typeof t.key=="function")continue;const g=y[t.key];if(!g)continue;(i=g.json)!=null&&i.type&&Array.isArray(g.json.type)&&g.json.type.length===1&&typeof g.json.type[0]=="string"&&(e[g.json.type[0]]=d);const _=(s=g.json)==null?void 0:s.write;if(!_||!_.writer){e[a]=d;continue}const x=_.target,I=typeof x=="string"?x:t.key,A={};_.writer(a,A,I),A[I]&&(e[A[I]]=d)}return e}function Dj(t){if(t.json||(t.json={}),z6(t.json),V6(t.json),F6(t.json),t.json.origins)for(const e in t.json.origins)z6(t.json.origins[e]),V6(t.json.origins[e]),F6(t.json.origins[e]);return!0}function F6(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function z6(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function V6(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function G6(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&_T(t.type))?e.write.writer=Vj:i>1?e.write.writer=Gj(i):e.types?Array.isArray(e.types)?e.write.writer=zj(e.types[0]):e.write.writer=Fj(e.types):e.write.writer=Yd}function Fj(t){return(e,i,s,a)=>e?TT(e,t,a)?Yd(e,i,s,a):void 0:Yd(e,i,s,a)}function TT(t,e,i){for(const s in e.typeMap)if(t instanceof e.typeMap[s])return!0;if(i!=null&&i.messages){const s=e.errorContext??"type",a=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new oe(`${s}:unsupported`,a,{definition:t,context:i})),me.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(a)}return!1}function zj(t){return(e,i,s,a)=>!e||!Array.isArray(e)?Yd(e,i,s,a):Yd(e.filter(d=>TT(d,t,a)),i,s,a)}function Yd(t,e,i,s){zh(i,zg(t,s),e)}function zg(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?Vg(t):t}function Vg(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Vj(t,e,i,s){let a;t===null?a=null:t&&typeof t.map=="function"?(a=t.map(d=>zg(d,s)),typeof a.toArray=="function"&&(a=a.toArray())):a=[zg(t,s)],zh(i,a,e)}function MT(t,e,i){return i!==0&&Array.isArray(t)?t.map(s=>MT(s,e,i-1)):zg(t,e)}function Gj(t){return(e,i,s,a)=>{let d;if(e===null)d=null;else{d=MT(e,a,t);let y=t,g=d;for(;y>0&&Array.isArray(g);)y--,g=g[0];if(g!==void 0)for(let _=0;_<y;_++)d=[d]}zh(s,d,i)}}function Uj(t,e){return e5(t,"any",e==null?void 0:e.origin)}function Qb(t,e){return e5(t,"read",e==null?void 0:e.origin)}function IT(t,e){return e5(t,"write",e==null?void 0:e.origin)}function e5(t,e,i){let s=t==null?void 0:t.json;if(s!=null&&s.origins&&i){let a;a=i==="link-chart"?s.origins[i]&&(e==="any"||e in s.origins[i])?s.origins[i]:s.origins["web-map"]:s.origins[i],a&&(e==="any"||e in a)&&(s=a)}return s}function qj(t){const e=Bj(t);if(t.json.origins)for(const i in t.json.origins){const s=t.json.origins[i],a=s.types?Hj(s):e;j6(a,s,!1),s.types&&!s.write&&t.json.write&&t.json.write.enabled&&(s.write={...t.json.write}),G6(a,s)}j6(e,t.json,!0),G6(e,t.json)}function Bj(t){return t.json.types?ew(t.json):t.type?ET(t):ew(t)}function Hj(t){return t.type?ET(t):ew(t)}function ET(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!vT(i);)i=i[0],e++;return{type:i,ndimArray:e}}function ew(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function Wj(t){Dj(t)&&(Cj(t),qj(t))}const u2=new Set,h2=new Set;function J(t){return e=>{e.prototype.declaredClass=t,Kj(e);const i=[],s=[];let a=e.prototype;for(;a;)a.hasOwnProperty("initialize")&&!u2.has(a.initialize)&&(u2.add(a.initialize),i.push(a.initialize)),a.hasOwnProperty("destroy")&&!h2.has(a.destroy)&&(h2.add(a.destroy),s.push(a.destroy)),a=Object.getPrototypeOf(a);u2.clear(),h2.clear();class d extends e{constructor(...g){if(super(...g),this.constructor===d&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let _=i.length-1;_>=0;_--)i[_].call(this)}}),s.length){let _=!1;const x=this[A$];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!_){_=!0,x.call(this);for(let I=0;I<s.length;I++)s[I].call(this)}}})}this.postscript(...g)}}}return d.__accessorMetadata__=$f(e.prototype),d.prototype.declaredClass=t,d}}function Jj(t,e){return e.get==null?function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s===void 0)return;Ke(s.observerObject);const a=i.store;return a.has(t)?a.get(t):s.metadata.value}:function(){const i=this.__accessor__,s=i.propertiesByName.get(t);if(s!==void 0)return s.getComputed(i)}}function Kj(t){const e=t.prototype,i=$f(e),s={};for(const a of Object.getOwnPropertyNames(i)){const d=i[a];Wj(d),s[a]={enumerable:!0,configurable:!0,get:Jj(a,d),set(y){const g=this.__accessor__;if(g!==void 0){if(!Object.isFrozen(this)){if(g.initialized&&d.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${a}' of ${this.declaredClass}`);if(g.lifecycle===ra.CONSTRUCTED&&d.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${a}' of ${this.declaredClass}`);g.set(a,y)}}else Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(t.prototype,s)}var AT,kT;function Yj(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const qa=Symbol("Accessor-Handles"),tw=Symbol("Accessor-Initialized");let je=class OT{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:a}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const d=this;class y extends d{constructor(..._){super(..._),this.inherited=null,a&&a.apply(this,_)}}$f(y.prototype);for(const g in e){const _=e[g];y.prototype[g]=typeof _=="function"?function(...x){const I=this.inherited;let A;this.inherited=function(...C){if(d.prototype[g])return d.prototype[g].apply(this,C)};try{A=_.apply(this,x)}catch(C){throw this.inherited=I,C}return this.inherited=I,A}:e[g]}for(const g in i){const _=Yj(i[g]);S(_)(y.prototype,g)}return J(s)(y)}constructor(...e){if(this[AT]=null,this[kT]=!1,this.constructor===OT)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new FR(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&this.normalizeCtorArgs&&(i.ctorArgs=this.normalizeCtorArgs.apply(this,e)),U6.register(this,i.propertiesByName,this)}postscript(e){const i=this.__accessor__,s=i.ctorArgs||e;i.initialize(),s&&(this.set(s),i.ctorArgs=null),i.constructed(),this.initialize(),this[tw]=!0}initialize(){}[A$](){this[qa]=Kt(this[qa])}destroy(){var e;this.destroyed||(U6.unregister(this),cj(this),this.__accessor__.destroy(),(e=HR())==null||e.onInstanceDestroy(this))}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[tw]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return Eg(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return kg(this,e,i),this}watch(e,i,s){return mj(this,e,i,s)}own(e){this.addHandles(e)}addHandles(e,i){if(this.destroyed){const a=Array.isArray(e)?e:[e];for(const d of a)d.remove();return}let s=this[qa];s==null&&(s=this[qa]=new ba),s.add(e,i)}removeHandles(e){const i=this[qa];i!=null&&i.remove(e)}removeAllHandles(){const e=this[qa];e!=null&&e.removeAll()}hasHandles(e){const i=this[qa];return i!=null&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};AT=qa,kT=tw;const U6=new FinalizationRegistry(t=>{for(const e of t.values())e.destroy()});let vy=class CT{constructor(){this._emitter=new CT.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(a=null){this._target=a,this._listenersMap=null}clear(){var a;(a=this._listenersMap)==null||a.clear(),this._listenersMap=null}destroy(){this.clear()}emit(a,d){const y=this._listenersMap&&this._listenersMap.get(a);if(!y)return!1;const g=this._target||this;return[...y].forEach(_=>{_.call(g,d)}),y.length>0}on(a,d){if(Array.isArray(a)){const g=a.map(_=>this.on(_,d));return Xm(g)}if(a.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const y=this._listenersMap.get(a)||[];return y.push(d),this._listenersMap.set(a,y),{remove:()=>{const g=this._listenersMap&&this._listenersMap.get(a)||[],_=g.indexOf(d);_>=0&&g.splice(_,1)}}}once(a,d){const y=this.on(a,g=>{y.remove(),d.call(null,g)});return y}hasEventListener(a){const d=this._listenersMap&&this._listenersMap.get(a);return d!=null&&d.length>0}}t.EventEmitter=e,t.EventedMixin=s=>{let a=class extends s{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(d,y){return this._emitter.emit(d,y)}on(d,y){return this._emitter.on(d,y)}once(d,y){return this._emitter.once(d,y)}hasEventListener(d){return this._emitter.hasEventListener(d)}};return a=b([J("esri.core.Evented")],a),a};let i=class extends je{constructor(){super(...arguments),this._emitter=new vy.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,a){return this._emitter.emit(s,a)}on(s,a){return this._emitter.on(s,a)}once(s,a){return this._emitter.once(s,a)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=b([J("esri.core.Evented")],i),t.EventedAccessor=i})(vy||(vy={}));const _a=vy;var Ct;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Ct||(Ct={}));function PT(t){return(e,i)=>{e[i]=t}}let cv=class extends K${notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const s of i)s.onInvalidated(),s.onCommitted()}}};var Qo;let Zj=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const ys=new eu(Zj,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),Xj=()=>{};function c2(t){return t?t instanceof eh?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function p2(t){if(t&&t.length)return t[0]}function Qj(t,e,i,s){const a=Math.min(t.length-i,e.length-s);let d=0;for(;d<a&&t[i+d]===e[s+d];)d++;return d}function NT(t,e,i,s){e&&e.forEach((a,d,y)=>{t.push(a),NT(t,i.call(s,a,d,y),i,s)})}const Ea=new Set,Aa=new Set,ka=new Set,d2=new Map;let eD=0,eh=Qo=class extends _a.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Qo}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new cv,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:eD++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Qo?{items:t}:t:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return Ke(this._observable),this._items}set items(t){this._emitBeforeChanges(Ct.ADD)||(this._splice(0,this.length,c2(t)),this._emitAfterChanges(Ct.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,s={removed:!1,callback:e};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Xj,s.removed=!0,i.splice(i.indexOf(s),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(Ke(this._observable),this._emitBeforeChanges(Ct.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(Ct.ADD),this}addMany(t,e=this._items.length){if(Ke(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(Ct.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,c2(t)),this._emitAfterChanges(Ct.ADD),this}at(t){if(Ke(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Ct.REMOVE))return[];const t=this._removeAllRaw();return this._emitAfterChanges(Ct.REMOVE),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ke(this._observable),this._createNewInstance({items:this._items.map(ae)})}concat(...t){Ke(this._observable);const e=t.map(c2);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Ct.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let a=0;a<s;a++)t.call(e,i[a],a,i);this._emitAfterChanges(Ct.REMOVE)}every(t,e){return Ke(this._observable),this._items.every(t,e)}filter(t,e){let i;return Ke(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return Ke(this._observable),this._items.find(t,e)}findIndex(t,e){return Ke(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ke(this._observable);const i=[];return NT(i,this,t,e),new Qo(i)}forEach(t,e){return Ke(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ke(this._observable),this._items[t]}getNextIndex(t){Ke(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ke(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ke(this._observable),this._items.indexOf(t,e)}join(t=","){return Ke(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ke(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ke(this._observable);const i=this._items.map(t,e);return new Qo({items:i})}reorder(t,e=this.length-1){Ke(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(Ct.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(Ct.MOVE)}return t}}pop(){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Ct.REMOVE))return;const t=p2(this._splice(this.length-1,1));return this._emitAfterChanges(Ct.REMOVE),t}push(...t){return Ke(this._observable),this._emitBeforeChanges(Ct.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Ct.ADD)),this.length}reduce(t,e){Ke(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ke(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ke(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ke(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Ct.REMOVE))return;const e=p2(this._splice(t,1));return this._emitAfterChanges(Ct.REMOVE),e}removeMany(t){if(Ke(this._observable),!t||!t.length||this._emitBeforeChanges(Ct.REMOVE))return[];const e=t instanceof Qo?t.toArray():t,i=this._items,s=[],a=e.length;for(let d=0;d<a;d++){const y=e[d],g=i.indexOf(y);if(g>-1){const _=1+Qj(e,i,d+1,g+1),x=this._splice(g,_);x&&x.length>0&&s.push.apply(s,x),d+=_-1}}return this._emitAfterChanges(Ct.REMOVE),s}reverse(){if(Ke(this._observable),this._emitBeforeChanges(Ct.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Ct.MOVE),this}shift(){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Ct.REMOVE))return;const t=p2(this._splice(0,1));return this._emitAfterChanges(Ct.REMOVE),t}slice(t=0,e=this.length){return Ke(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ke(this._observable),this._items.some(t,e)}sort(t){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Ct.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(Ct.MOVE),this}splice(t,e,...i){Ke(this._observable);const s=(e?Ct.REMOVE:0)|(i.length?Ct.ADD:0);if(this._emitBeforeChanges(s))return[];const a=this._splice(t,e,i)||[];return this._emitAfterChanges(s),a}toArray(){return Ke(this._observable),this._items.slice()}toJSON(){return Ke(this._observable),this.toArray()}toLocaleString(){return Ke(this._observable),this._items.toLocaleString()}toString(){return Ke(this._observable),this._items.toString()}unshift(...t){return Ke(this._observable),!t.length||this._emitBeforeChanges(Ct.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Ct.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const s=this._items,a=this.itemType;let d,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Ip(()=>this._dispatchChange())),e){if(y=s.splice(t,e),this.hasEventListener("before-remove")){const g=ys.acquire();g.target=this,g.cancellable=!0;for(let _=0,x=y.length;_<x;_++)d=y[_],g.reset(d),this.emit("before-remove",g),g.defaultPrevented&&(y.splice(_,1),s.splice(t,0,d),t+=1,_-=1,x-=1);ys.release(g)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const g=ys.acquire();g.target=this,g.cancellable=!1;const _=y.length;for(let x=0;x<_;x++)g.reset(y[x]),this.emit("after-remove",g);ys.release(g)}}if(i&&i.length){if(a){const I=[];for(const A of i){const C=a.ensureType(A);C==null&&A!=null||I.push(C)}i=I}const g=this.hasEventListener("before-add"),_=this.hasEventListener("after-add"),x=t===this.length;if(g||_){const I=ys.acquire();I.target=this,I.cancellable=!0;const A=ys.acquire();A.target=this,A.cancellable=!1;for(const C of i)g?(I.reset(C),this.emit("before-add",I),I.defaultPrevented||(x?s.push(C):s.splice(t++,0,C),this._set("length",s.length),_&&(A.reset(C),this.emit("after-add",A)))):(x?s.push(C):s.splice(t++,0,C),this._set("length",s.length),A.reset(C),this.emit("after-add",A));ys.release(A),ys.release(I)}else{if(x)for(const I of i)s.push(I);else s.splice(t,0,...i);this._set("length",s.length)}}return(i&&i.length||y&&y.length)&&this._notifyChangeEvent(i,y),y}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=ys.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,ys.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=ys.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),ys.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Ea.clear(),Aa.clear(),ka.clear();for(const{added:_,removed:x}of i){if(_)if(ka.size===0&&Aa.size===0)for(const I of _)Ea.add(I);else for(const I of _)Aa.has(I)?(ka.add(I),Aa.delete(I)):ka.has(I)||Ea.add(I);if(x)if(ka.size===0&&Ea.size===0)for(const I of x)Aa.add(I);else for(const I of x)Ea.has(I)?Ea.delete(I):(ka.delete(I),Aa.add(I))}const s=kr.acquire();Ea.forEach(_=>{s.push(_)});const a=kr.acquire();Aa.forEach(_=>{a.push(_)});const d=this._items,y=e.items,g=kr.acquire();if(ka.forEach(_=>{y.indexOf(_)!==d.indexOf(_)&&g.push(_)}),e.listeners&&(s.length||a.length||g.length)){const _={target:this,added:s,removed:a,moved:g},x=e.listeners.length;for(let I=0;I<x;I++){const A=e.listeners[I];A.removed||A.callback.call(this,_)}}kr.release(s),kr.release(a),kr.release(g)}Ea.clear(),Aa.clear(),ka.clear()}};eh.ofType=t=>{if(!t)return Qo;if(d2.has(t))return d2.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const s in t.typeMap){const a=t.typeMap[s].prototype.declaredClass;e?e+=` | ${a}`:e=a}let i=class extends Qo{};return b([PT({Type:t,ensureType:typeof t=="function"?ui(t):pa(t)})],i.prototype,"itemType",void 0),i=b([J(`esri.core.Collection<${e}>`)],i),d2.set(t,i),i},b([S()],eh.prototype,"length",void 0),b([S()],eh.prototype,"items",null),eh=Qo=b([J("esri.core.Collection")],eh);const Ge=eh;function $h(t,e,i=Ge){return e||(e=new i),e===t||(e.removeAll(),tD(t)?e.addMany(t):t&&e.add(t)),e}function LT(t){return t}function tD(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const q6=new Set;function iD(t,e,i=!1){i&&q6.has(e)||(i&&q6.add(e),t.warn(`🛑 DEPRECATED - ${e}`))}function rD(t,e,i={}){if(le("esri-deprecation-warnings")){const{moduleName:s}=i;Gg(t,`Property: ${(s?s+"::":"")+e}`,i)}}function Gg(t,e,i={}){if(le("esri-deprecation-warnings")){const{replacement:s,version:a,see:d,warnOnce:y}=i;let g=e;s&&(g+=`
	🛠️ Replacement: ${s}`),a&&(g+=`
	⚙️ Version: ${a}`),d&&(g+=`
	🔗 See ${d} for more details.`),iD(t,g,y)}}let sD=class RT{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new RT;return this._values.forEach((s,a)=>{e&&e.has(a)||i.set(a,ae(s.value),s.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const s=this._values.get(e);return i==null||(s==null?void 0:s.origin)===i?s==null?void 0:s.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??Te.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(s=>{var a;return((a=this._values.get(s))==null?void 0:a.origin)===e})}set(e,i,s){if((s=this._normalizeOrigin(s))===Te.DEFAULTS){const a=this._values.get(e);if(a&&a.origin!=null&&a.origin>s)return}this._values.set(e,new nD(i,s))}delete(e,i){var s;(i=this._normalizeOrigin(i))!=null&&((s=this._values.get(e))==null?void 0:s.origin)!==i||this._values.delete(e)}has(e,i){var s;return(i=this._normalizeOrigin(i))!=null?((s=this._values.get(e))==null?void 0:s.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},s)=>e(i,s))}_normalizeOrigin(e){if(e!=null)return e===Te.DEFAULTS?e:Te.USER}},nD=class{constructor(e,i){this.value=e,this.origin=i}};function jT(t,e,i){e.keys().forEach(a=>{i.set(a,e.get(a),Te.DEFAULTS)});const s=t.metadatas;Object.keys(s).forEach(a=>{t.internalGet(a)&&i.set(a,t.internalGet(a),Te.DEFAULTS)})}function oD(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const s=t.read.source;if(typeof s=="string"){if(s===e||s.includes(".")&&s.indexOf(e)===0&&T6(s,i))return!0}else for(const a of s)if(a===e||a.includes(".")&&a.indexOf(e)===0&&T6(a,i))return!0;return!1}function aD(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function lD(t,e,i,s,a){let d=Qb(e[i],a);aD(d)&&(t[i]=!0);for(const y of Object.getOwnPropertyNames(e))d=Qb(e[y],a),oD(d,i,s)&&(t[y]=!0)}function uD(t,e,i,s){const a=i.metadatas,d=Uj(a[e],s),y=d==null?void 0:d.default;if(y===void 0)return;const g=typeof y=="function"?y.call(t,e,s):y;g!==void 0&&i.set(e,g)}const DT={origin:"service"};function FT(t,e,i=DT){if(!e||typeof e!="object")return;const s=qi(t),a=s.metadatas,d={};for(const y of Object.getOwnPropertyNames(e))lD(d,a,y,e,i);s.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(d)){const g=Qb(a[y],i).read,_=g&&g.source;let x;x=_&&typeof _=="string"?xf(e,_):e[y],g&&g.reader&&(x=g.reader.call(t,x,e,i)),x!==void 0&&s.set(y,x)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(a))d[y]||uD(t,y,s,i)}s.setDefaultOrigin("user")}function hD(t,e,i,s=DT){var d;const a={...s,messages:[]};i(a),(d=a.messages)==null||d.forEach(y=>{y.type!=="warning"||t.loaded?s&&s.messages&&s.messages.push(y):t.loadWarnings.push(y)})}function cD(t,e,i,s,a){var y,g;const d={};return(g=(y=e.write)==null?void 0:y.writer)==null||g.call(t,s,d,i,a),d}function zT(t,e,i,s,a,d){if(!s||!s.write)return!1;const y=t.get(i);if(!a&&s.write.overridePolicy){const g=s.write.overridePolicy.call(t,y,i,d??void 0);g!==void 0&&(a=g)}if(a||(a=s.write),!a||a.enabled===!1)return!1;if((y===null&&!a.allowNull&&!a.writerEnsuresNonNull||y===void 0)&&a.isRequired){const g=new oe("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return g&&d&&d.messages?d.messages.push(g):g&&!d&&me.getLogger("esri.core.accessorSupport.write").error(g.name,g.message),!1}return!(y===void 0||y===null&&!a.allowNull&&!a.writerEnsuresNonNull||!a.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===Te.DEFAULTS)&&pD(t,i,d,s,y)||!a.ignoreOrigin&&d&&d.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<Or(d.origin))}function pD(t,e,i,s,a){const d=s.default;if(d===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(a);if(typeof d=="function"){if(Array.isArray(a)){const y=d.call(t,e,i??void 0);return Qm(y,a)}return!1}return d===a}function dD(t,e,i,s){const a=qi(t),d=a.metadatas,y=IT(d[e],s);return!!y&&zT(t,a,e,y,i,s)}function VT(t,e,i){var d,y;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return fy(e,t.toJSON(i));const s=qi(t),a=s.metadatas;for(const g in a){const _=IT(a[g],i);if(!zT(t,s,g,_,void 0,i))continue;const x=t.get(g),I=cD(t,_,_.write&&typeof _.write.target=="string"?_.write.target:g,x,i);Object.keys(I).length>0&&(e=fy(e,I),(y=(d=i==null?void 0:i.resources)==null?void 0:d.pendingOperations)!=null&&y.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>fy(e,I,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:g,oldOrigin:PR(s.store.originOf(g)),newOrigin:i.origin}))}return e}const Ef=t=>{let e=class extends t{constructor(...i){super(...i);const s=qi(this),a=s.store,d=new sD;s.store=d,jT(s,a,d)}read(i,s){FT(this,i,s)}write(i,s){return VT(this,i??{},s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return fD.call(this,i,s)}};return e=b([J("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function fD(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let ye=class extends Ef(je){};ye=b([J("esri.core.JSONSupport")],ye);var vl;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(vl||(vl={}));let yD=class{constructor(){this._resolver=On(),this._status=vl.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=vl.RESOLVED,this._cleanUp()},()=>{this._status=vl.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===vl.RESOLVED}isRejected(){return this._status===vl.REJECTED}isFulfilled(){return this._status!==vl.PENDING}abort(){this._resolver.reject(ni())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=On(),i=[...this._resolvingPromises,e.promise],s=this._allPromise=Promise.all(i);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve()},a=>{this.isFulfilled()||this._allPromise!==s||or(a)||this._resolver.reject(a)}),e.resolve()}};const t5=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new yD,this.addResolvingPromise(Promise.resolve())}destroy(){var i;(i=this._promiseProps)==null||i.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return this._promiseProps.promise.then(()=>this).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=b([J("esri.core.Promise")],e),e};let Ug=class extends t5(je){};Ug=b([J("esri.core.Promise")],Ug);const gD="not-loaded",mD="loading",vD="failed",B6="loaded",GT=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const a=this.load.bind(this);this.load=d=>{const y=new Promise((g,_)=>{const x=Y_(d,_);this.destroyed&&_(new oe("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(g,_).finally(()=>{x&&x.remove()})});if(this.loadStatus===gD){this._set("loadStatus",mD);const g=this._loadController=new AbortController;a({signal:g.signal}),ls(g.signal,()=>{this._promiseProps.abort()})}return s(),y}})),this.when(()=>{this._set("loadStatus",B6),this._loadController=null},s=>{this._set("loadStatus",vD),this._set("loadError",s),this._loadController=null})}destroy(){this._loadController=_h(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===B6}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new oe("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return b([S({readOnly:!0})],e.prototype,"loaded",null),b([S({readOnly:!0})],e.prototype,"loadError",void 0),b([S({clonable:!1})],e.prototype,"loadStatus",void 0),b([S({type:[Cn],readOnly:!0})],e.prototype,"loadWarnings",null),e=b([J("esri.core.Loadable")],e),e};let w0=class extends GT(Ug){};w0=b([J("esri.core.Loadable")],w0),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=GT,t.isLoadable=e}(w0||(w0={}));const da=w0;function Xpe(t,e,i){return Sn(t.map((s,a)=>e.apply(i,[s,a])))}async function bD(t,e,i){return(await Sn(t.map((s,a)=>e.apply(i,[s,a])))).map(s=>s.value)}function i5(t){return{ok:!0,value:t}}function r5(t){return{ok:!1,error:t}}function wD(t){return t!=null&&t.ok===!0?t.value:null}function _D(t){return t!=null&&t.ok===!1?t.error:null}async function s5(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return i5(await t)}catch(e){return r5(e)}}async function Qpe(t){try{return i5(await t)}catch(e){return wn(e),r5(e)}}function n5(t,e){return new Ba(t,e)}let Ba=class extends je{get value(){return wD(this._result)}get error(){return _D(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=_h(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:s}=this._abortController;this.promise=e(s),this.promise.then(a=>{this._result=i5(a),this._cleanup()},a=>{this._result=r5(a),this._cleanup()}),this._abortHandle=ls(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=li(this._abortHandle),this._abortController=null}};b([S()],Ba.prototype,"value",null),b([S()],Ba.prototype,"error",null),b([S()],Ba.prototype,"finished",null),b([S()],Ba.prototype,"promise",void 0),b([S()],Ba.prototype,"_result",void 0),Ba=b([J("esri.core.asyncUtils.ReactiveTask")],Ba);async function pv(t,e){return await t.load(),SD(t,e)}async function SD(t,e){const i=[],s=(...d)=>{for(const y of d)y!=null&&(Array.isArray(y)?s(...y):Ge.isCollection(y)?y.forEach(g=>s(g)):da.isLoadable(y)&&i.push(y))};e(s);let a=null;if(await bD(i,async d=>{const y=await s5(xD(d)?d.loadAll():d.load());y.ok!==!1||a||(a=y)}),a)throw a.error;return t}function xD(t){return"loadAll"in t&&typeof t.loadAll=="function"}const $D=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,TD={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function H6(t){const e=t==null?void 0:t.match($D);if(!e)return null;const[,i,s,a]=e;if(!i)return null;let d=null,y=null,g=null;const{devext:_,qaext:x,www:I}=TD;if(s)if(d=i,a)switch(a.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:g}=_);break;case"qa":({customBaseUrl:y,portalHostname:g}=x);break;default:return null}else({customBaseUrl:y,portalHostname:g}=I);else switch(i.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:g}=_);break;case"qaext":({customBaseUrl:y,portalHostname:g}=x);break;case"www":({customBaseUrl:y,portalHostname:g}=I);break;default:return null}return{customBaseUrl:y,isPortal:!1,portalHostname:g,urlKey:d}}function MD(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function ID(t){const e=atob(t),i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i.buffer}const ED=me.getLogger("esri.core.urlUtils"),Ep=mt.request,W6="esri/config: esriConfig.request.proxyUrl is not set.",UT=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,qT=/^\s*http:/i,AD=/^\s*https:/i,kD=/^\s*file:/i,OD=/:\d+$/,CD=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,PD=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ND=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let ep=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(PD);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(ND),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const c1={},LD=new ep(mt.applicationUrl);let _r=LD;const RD=jD();let o5=RD;const a5=()=>_r,i0e=()=>o5;function jD(){const t=_r.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${_r.scheme}://${_r.host}${_r.port!=null?`:${_r.port}`:""}`}${e}`}function ur(t){if(!t)return null;const e={path:null,query:null},i=new ep(t),s=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,s),e.query=l5(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function l5(t){const e=t.split("&"),i={};for(const s of e){if(!s)continue;const a=s.indexOf("=");let d,y;a<0?(d=decodeURIComponent(s),y=""):(d=decodeURIComponent(s.slice(0,a)),y=decodeURIComponent(s.slice(a+1)));let g=i[d];typeof g=="string"&&(g=i[d]=[g]),Array.isArray(g)?g.push(y):i[d]=y}return i}function J6(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function ql(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const s=t[i];if(s==null)return"";const a=encodeURIComponent(i)+"=",d=e&&e[i];return d?a+encodeURIComponent(d(s)):Array.isArray(s)?s.map(y=>J6(y)?a+encodeURIComponent(JSON.stringify(y)):a+encodeURIComponent(y)).join("&"):J6(s)?a+encodeURIComponent(JSON.stringify(s)):a+encodeURIComponent(s)}).filter(i=>i).join("&"):""}function DD(t=!1){let e,i=Ep.proxyUrl;if(typeof t=="string"){e=BD(t);const s=dv(t);s&&(i=s.proxyUrl)}else e=!!t;if(!i)throw ED.warn(W6),new oe("urlutils:proxy-not-set",W6);return e&&iw()&&(i=d5(i)),ur(i)}function r0e(t){const e=dv(t);let i,s;if(e){const a=u5(e.proxyUrl);i=a.path,s=a.query?l5(a.query):null}if(i){const a=ur(t);t=i+"?"+a.path;const d=ql({...s,...a.query});d&&(t=`${t}?${d}`)}return t}const Zp={path:"",query:""};function u5(t){const e=t.indexOf("?");return e!==-1?(Zp.path=t.slice(0,e),Zp.query=t.slice(e+1)):(Zp.path=t,Zp.query=null),Zp}function BT(t){return t=(t=Bg(t=ZD(t=u5(t).path),!0)).toLowerCase()}function FD(t){const e={proxyUrl:t.proxyUrl,urlPrefix:BT(t.urlPrefix)},i=Ep.proxyRules,s=e.urlPrefix;let a=i.length;for(let d=0;d<i.length;d++){const y=i[d].urlPrefix;if(s.indexOf(y)===0){if(s.length===y.length)return-1;a=d;break}y.indexOf(s)===0&&(a=d+1)}return i.splice(a,0,e),a}function dv(t){const e=Ep.proxyRules,i=BT(t);for(let s=0;s<e.length;s++)if(i.indexOf(e[s].urlPrefix)===0)return e[s]}function zD(t,e){if(!t||!e)return!1;t=qg(t),e=qg(e);const i=H6(t),s=H6(e);return i!=null&&s!=null?i.portalHostname===s.portalHostname:i==null&&s==null&&fp(t,e,!0)}function HT(t,e){return t=qg(t),e=qg(e),Bg(t)===Bg(e)}function qg(t){const e=(t=Tn(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function WT(t){const e=s=>s==null||s instanceof RegExp&&s.test(t)||typeof s=="string"&&t.startsWith(s),i=Ep.interceptors;if(i){for(const s of i)if(Array.isArray(s.urls)){if(s.urls.some(e))return s}else if(e(s.urls))return s}return null}function fp(t,e,i=!1){if(!t||!e)return!1;const s=sw(t),a=sw(e);return!(!i&&s.scheme!==a.scheme)&&s.host!=null&&a.host!=null&&s.host.toLowerCase()===a.host.toLowerCase()&&s.port===a.port}function h5(t){if(typeof t=="string"){if(!us(t))return!0;t=sw(t)}if(fp(t,_r))return!0;const e=Ep.trustedServers||[];for(let i=0;i<e.length;i++){const s=VD(e[i]);for(let a=0;a<s.length;a++)if(fp(t,s[a]))return!0}return!1}function VD(t){return c1[t]||(p5(t)||go(t)?c1[t]=[new ep(ns(t))]:c1[t]=[new ep(`http://${t}`),new ep(`https://${t}`)]),c1[t]}function ns(t,e=o5,i){return go(t)?i&&i.preserveProtocolRelative?t:_r.scheme==="http"&&_r.authority===Mn(t).slice(2)?`http:${t}`:`https:${t}`:p5(t)?t:Th(t[0]==="/"?KD(e):e,t)}function c5(t,e=o5,i){if(t==null||!us(t))return t;const s=Tn(t),a=s.toLowerCase(),d=Tn(e).toLowerCase().replace(/\/+$/,""),y=i?Tn(i).toLowerCase().replace(/\/+$/,""):null;if(y&&d.indexOf(y)!==0)return t;const g=(A,C,N)=>(N=A.indexOf(C,N))===-1?A.length:N;let _=g(a,"/",a.indexOf("//")+2),x=-1;for(;a.slice(0,_+1)===d.slice(0,_)+"/"&&(x=_+1,_!==a.length);)_=g(a,"/",_+1);if(x===-1||y&&x<y.length)return t;t=s.slice(x);const I=d.slice(x-1).replaceAll(/[^/]+/g,"").length;if(I>0)for(let A=0;A<I;A++)t=`../${t}`;else t=`./${t}`;return t}function Tn(t){return t=eF(t=QD(t=XD(t=ns(t=t.trim()))))}function Th(...t){const e=t.filter(ho);if(!e||!e.length)return;const i=[];if(us(e[0])){const a=e[0],d=a.indexOf("//");d!==-1&&(i.push(a.slice(0,d+1)),WD(e[0])&&(i[0]+="/"),e[0]=a.slice(d+2))}else e[0][0]==="/"&&i.push("");const s=e.reduce((a,d)=>d?a.concat(d.split("/")):a,[]);for(let a=0;a<s.length;a++){const d=s[a];d===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!d&&a===s.length-1||d&&(d!=="."||i.length===0))&&i.push(d)}return i.join("/")}function Mn(t,e=!1){if(t==null||fv(t)||Vh(t))return null;let i=t.indexOf("://");if(i===-1&&go(t))i=2;else{if(i===-1)return null;i+=3}const s=t.indexOf("/",i);return s!==-1&&(t=t.slice(0,s)),e&&(t=Bg(t,!0)),t}function us(t){return go(t)||p5(t)}function fv(t){return t!=null&&t.slice(0,5)==="blob:"}function Vh(t){return t!=null&&t.slice(0,5)==="data:"}function GD(t){const e=Zd(t);return e&&e.isBase64?ID(e.data):null}function s0e(t){return btoa(String.fromCharCode.apply(null,t)).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const UD=/^data:(.*?)(;base64)?,(.*)$/;function Zd(t){const e=t.match(UD);if(!e)return null;const[,i,s,a]=e;return{mediaType:i,isBase64:!!s,data:a}}function JT(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function n0e(t){const e=GD(t);if(!e)return null;const i=Zd(t);return new Blob([e],{type:i.mediaType})}function o0e(t,e){qD(t,e)}function qD(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const s=URL.createObjectURL(t);return i.download=e,i.href=s,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),!0}function go(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function p5(t){return t!=null&&UT.test(t)}function BD(t){return t!=null&&AD.test(t)||_r.scheme==="https"&&go(t)}function HD(t){return t!=null&&qT.test(t)||_r.scheme==="http"&&go(t)}function WD(t){return t!=null&&kD.test(t)}function d5(t){return go(t)?`https:${t}`:t.replace(qT,"https:")}function JD(){return _r.scheme==="http"}function iw(){return _r.scheme==="https"}function Bg(t,e=!1){return go(t)?t.slice(2):(t=t.replace(UT,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function KD(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function YD(t){let e=0;if(us(t)){const s=t.indexOf("//");s!==-1&&(e=s+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function a0e(t,e){if(!t)return"";const i=ur(t).path.replace(/\/+$/,""),s=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return s;const a=new RegExp(`.(${e.join("|")})$`,"ig");return s.replace(a,"")}function ZD(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function KT(t){return t.replace(/\/+$/,"")}function XD(t){if(/^https?:\/\//i.test(t)){const e=u5(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function QD(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function eF(t){const e=Ep.httpsDomains;if(!HD(t))return t;const i=t.indexOf("/",7);let s;if(s=i===-1?t:t.slice(0,i),s=s.toLowerCase().slice(7),OD.test(s)){if(!s.endsWith(":80"))return t;s=s.slice(0,-3),t=t.replace(":80","")}return JD()&&s===_r.authority&&!CD.test(t)||(iw()&&s===_r.authority||e&&e.some(a=>s===a||s.endsWith(`.${a}`))||iw()&&!dv(t))&&(t=d5(t)),t}function rw(t,e,i){if(!(e&&i&&t&&us(t)))return t;const s=t.indexOf("//"),a=t.indexOf("/",s+2),d=t.indexOf(":",s+2),y=Math.min(a<0?t.length:a,d<0?t.length:d);return t.slice(s+2,y).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,s+2)}${i}${t.slice(y)}`}function sw(t){return typeof t=="string"?new ep(ns(t)):(t.scheme||(t.scheme=_r.scheme),t)}function l0e(t){return tF.test(t)}function YT(t,e){const i=ur(t),s=Object.keys(i.query||{});return s.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function ZT(t,e,i){const s=ur(t),a=s.query||{};return a[e]=String(i),`${s.path}?${ql(a)}`}function f2(t,e){const i=ur(t),s=i.query||{};for(const d in e)s[d]=e[d];const a=ql(s);return a?`${i.path}?${a}`:i.path}function u0e(t){if(t==null)return null;const e=t.match(XT);return e?e[2]:null}function K6(t){if(t==null)return null;const e=t.match(XT);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function h0e(t){return typeof t=="string"?Zd(t)??{data:t}:new Promise((e,i)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(Zd(s.result)),s.onerror=a=>i(a)})}const XT=/([^.]*)\.([^\/]*)$/,tF=/(^data:image\/svg|\.svg$)/i;function ke(t,e,i){let s,a;return e===void 0?(a=t,s=[void 0]):typeof e!="string"?(a=t,s=[void 0],i=e):(a=e,s=Array.isArray(t)?t:[t]),(d,y)=>{const g=d.constructor.prototype;for(const _ of s){const x=wT(d,_,a);x.write&&typeof x.write=="object"||(x.write={}),i&&(x.write.target=i),x.write.writer=g[y]}}}let Nt=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,a,d)=>{const y=this.toJSON(s);y!==void 0&&zh(d,y,a)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const s in e)i[e[s]]=s;return i}_getKeysSorted(e){const i=[];for(const s in e)i.push(s);return i.sort(),i}};function $r(){return function(t,e){return new Nt(t,{ignoreUnknown:!0,...e})}}let f5=class{constructor(e,i,s,a){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=s;const d=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*d,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Vt=new f5(6378137,1/298.257223563,3e5,.006694379990137799),aa=new f5(3396190,1/169.8944472236118,23e4),Bl=new f5(1737400,0,0);var Mh;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(Mh||(Mh={}));let M;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(M=2e3;M<=2045;M++)U[M]=0;for(M=2056;M<=2065;M++)U[M]=0;for(M=2067;M<=2135;M++)U[M]=0;for(M=2137;M<=2154;M++)U[M]=0;for(M=2161;M<=2170;M++)U[M]=0;for(M=2172;M<=2193;M++)U[M]=0;for(M=2195;M<=2198;M++)U[M]=0;for(M=2200;M<=2203;M++)U[M]=0;for(M=2205;M<=2217;M++)U[M]=0;for(M=2222;M<=2224;M++)U[M]=1;for(M=2225;M<=2250;M++)U[M]=2;for(M=2251;M<=2253;M++)U[M]=1;for(M=2257;M<=2264;M++)U[M]=2;for(M=2274;M<=2279;M++)U[M]=2;for(M=2280;M<=2282;M++)U[M]=1;for(M=2283;M<=2289;M++)U[M]=2;for(M=2290;M<=2292;M++)U[M]=0;for(M=2308;M<=2313;M++)U[M]=0;for(M=2315;M<=2491;M++)U[M]=0;for(M=2494;M<=2866;M++)U[M]=0;for(M=2867;M<=2869;M++)U[M]=1;for(M=2870;M<=2888;M++)U[M]=2;for(M=2891;M<=2895;M++)U[M]=2;for(M=2896;M<=2898;M++)U[M]=1;for(M=2902;M<=2908;M++)U[M]=2;for(M=2915;M<=2920;M++)U[M]=2;for(M=2921;M<=2923;M++)U[M]=1;for(M=2924;M<=2930;M++)U[M]=2;for(M=2931;M<=2962;M++)U[M]=0;for(M=2964;M<=2968;M++)U[M]=2;for(M=2969;M<=2973;M++)U[M]=0;for(M=2975;M<=2991;M++)U[M]=0;for(M=2995;M<=3051;M++)U[M]=0;for(M=3054;M<=3079;M++)U[M]=0;for(M=3081;M<=3088;M++)U[M]=0;for(M=3092;M<=3101;M++)U[M]=0;for(M=3106;M<=3138;M++)U[M]=0;for(M=3146;M<=3151;M++)U[M]=0;for(M=3153;M<=3166;M++)U[M]=0;for(M=3168;M<=3172;M++)U[M]=0;for(M=3174;M<=3203;M++)U[M]=0;for(M=3294;M<=3358;M++)U[M]=0;for(M=3367;M<=3403;M++)U[M]=0;for(M=3408;M<=3416;M++)U[M]=0;for(M=3417;M<=3438;M++)U[M]=2;for(M=3441;M<=3446;M++)U[M]=2;for(M=3447;M<=3450;M++)U[M]=0;for(M=3451;M<=3459;M++)U[M]=2;for(M=3460;M<=3478;M++)U[M]=0;for(M=3554;M<=3559;M++)U[M]=0;for(M=3560;M<=3570;M++)U[M]=2;for(M=3571;M<=3581;M++)U[M]=0;for(M=3594;M<=3597;M++)U[M]=0;for(M=3601;M<=3604;M++)U[M]=0;for(M=3637;M<=3639;M++)U[M]=0;for(M=3665;M<=3667;M++)U[M]=0;for(M=3693;M<=3695;M++)U[M]=0;for(M=3701;M<=3727;M++)U[M]=0;for(M=3728;M<=3739;M++)U[M]=2;for(M=3740;M<=3751;M++)U[M]=0;for(M=3753;M<=3760;M++)U[M]=2;for(M=3761;M<=3773;M++)U[M]=0;for(M=3775;M<=3777;M++)U[M]=0;for(M=3779;M<=3781;M++)U[M]=0;for(M=3783;M<=3785;M++)U[M]=0;for(M=3788;M<=3791;M++)U[M]=0;for(M=3797;M<=3802;M++)U[M]=0;for(M=3814;M<=3816;M++)U[M]=0;for(M=3825;M<=3829;M++)U[M]=0;for(M=3832;M<=3841;M++)U[M]=0;for(M=3844;M<=3852;M++)U[M]=0;for(M=3873;M<=3885;M++)U[M]=0;for(M=3890;M<=3893;M++)U[M]=0;for(M=3907;M<=3912;M++)U[M]=0;for(M=3942;M<=3950;M++)U[M]=0;for(M=3968;M<=3970;M++)U[M]=0;for(M=3973;M<=3976;M++)U[M]=0;for(M=3986;M<=3989;M++)U[M]=0;for(M=3994;M<=3997;M++)U[M]=0;for(M=4048;M<=4051;M++)U[M]=0;for(M=4056;M<=4063;M++)U[M]=0;for(M=4093;M<=4096;M++)U[M]=0;for(M=4390;M<=4398;M++)U[M]=0;for(M=4399;M<=4413;M++)U[M]=2;for(M=4418;M<=4433;M++)U[M]=2;for(M=4455;M<=4457;M++)U[M]=2;for(M=4484;M<=4489;M++)U[M]=0;for(M=4491;M<=4554;M++)U[M]=0;for(M=4568;M<=4589;M++)U[M]=0;for(M=4652;M<=4656;M++)U[M]=0;for(M=4766;M<=4800;M++)U[M]=0;for(M=5014;M<=5016;M++)U[M]=0;for(M=5069;M<=5072;M++)U[M]=0;for(M=5105;M<=5130;M++)U[M]=0;for(M=5173;M<=5188;M++)U[M]=0;for(M=5253;M<=5259;M++)U[M]=0;for(M=5269;M<=5275;M++)U[M]=0;for(M=5292;M<=5311;M++)U[M]=0;for(M=5329;M<=5331;M++)U[M]=0;for(M=5343;M<=5349;M++)U[M]=0;for(M=5355;M<=5357;M++)U[M]=0;for(M=5387;M<=5389;M++)U[M]=0;for(M=5459;M<=5463;M++)U[M]=0;for(M=5479;M<=5482;M++)U[M]=0;for(M=5518;M<=5520;M++)U[M]=0;for(M=5530;M<=5539;M++)U[M]=0;for(M=5550;M<=5552;M++)U[M]=0;for(M=5562;M<=5583;M++)U[M]=0;for(M=5623;M<=5625;M++)U[M]=2;for(M=5631;M<=5639;M++)U[M]=0;for(M=5649;M<=5653;M++)U[M]=0;for(M=5663;M<=5680;M++)U[M]=0;for(M=5682;M<=5685;M++)U[M]=0;for(M=5875;M<=5877;M++)U[M]=0;for(M=5896;M<=5899;M++)U[M]=0;for(M=5921;M<=5940;M++)U[M]=0;for(M=6050;M<=6125;M++)U[M]=0;for(M=6244;M<=6275;M++)U[M]=0;for(M=6328;M<=6348;M++)U[M]=0;for(M=6350;M<=6356;M++)U[M]=0;for(M=6366;M<=6372;M++)U[M]=0;for(M=6381;M<=6387;M++)U[M]=0;for(M=6393;M<=6404;M++)U[M]=0;for(M=6480;M<=6483;M++)U[M]=0;for(M=6511;M<=6514;M++)U[M]=0;for(M=6579;M<=6581;M++)U[M]=0;for(M=6619;M<=6624;M++)U[M]=0;for(M=6625;M<=6627;M++)U[M]=2;for(M=6628;M<=6632;M++)U[M]=0;for(M=6634;M<=6637;M++)U[M]=0;for(M=6669;M<=6692;M++)U[M]=0;for(M=6707;M<=6709;M++)U[M]=0;for(M=6720;M<=6723;M++)U[M]=0;for(M=6732;M<=6738;M++)U[M]=0;for(M=6931;M<=6933;M++)U[M]=0;for(M=6956;M<=6959;M++)U[M]=0;for(M=7005;M<=7007;M++)U[M]=0;for(M=7057;M<=7070;M++)U[M]=2;for(M=7074;M<=7082;M++)U[M]=0;for(M=7109;M<=7118;M++)U[M]=0;for(M=7119;M<=7127;M++)U[M]=1;for(M=7374;M<=7376;M++)U[M]=0;for(M=7528;M<=7586;M++)U[M]=0;for(M=7587;M<=7645;M++)U[M]=2;for(M=7692;M<=7696;M++)U[M]=0;for(M=7755;M<=7787;M++)U[M]=0;for(M=7791;M<=7795;M++)U[M]=0;for(M=7799;M<=7801;M++)U[M]=0;for(M=7803;M<=7805;M++)U[M]=0;for(M=7825;M<=7831;M++)U[M]=0;for(M=7845;M<=7859;M++)U[M]=0;for(M=8013;M<=8032;M++)U[M]=0;for(M=8065;M<=8068;M++)U[M]=1;for(M=8518;M<=8529;M++)U[M]=2;for(M=8533;M<=8536;M++)U[M]=2;for(M=8538;M<=8540;M++)U[M]=2;for(M=8677;M<=8679;M++)U[M]=0;for(M=8836;M<=8840;M++)U[M]=0;for(M=8857;M<=8859;M++)U[M]=0;for(M=8908;M<=8910;M++)U[M]=0;for(M=9154;M<=9159;M++)U[M]=0;for(M=9205;M<=9218;M++)U[M]=0;for(M=9271;M<=9273;M++)U[M]=0;for(M=9295;M<=9297;M++)U[M]=0;for(M=9356;M<=9360;M++)U[M]=0;for(M=9404;M<=9407;M++)U[M]=0;for(M=9476;M<=9482;M++)U[M]=0;for(M=9487;M<=9494;M++)U[M]=0;for(M=9697;M<=9699;M++)U[M]=0;for(M=9821;M<=9865;M++)U[M]=0;for(M=20002;M<=20032;M++)U[M]=0;for(M=20047;M<=20049;M++)U[M]=0;for(M=20062;M<=20092;M++)U[M]=0;for(M=20135;M<=20138;M++)U[M]=0;for(M=20248;M<=20258;M++)U[M]=0;for(M=20348;M<=20358;M++)U[M]=0;for(M=20436;M<=20440;M++)U[M]=0;for(M=20822;M<=20824;M++)U[M]=0;for(M=20904;M<=20932;M++)U[M]=0;for(M=20934;M<=20936;M++)U[M]=0;for(M=21004;M<=21032;M++)U[M]=0;for(M=21035;M<=21037;M++)U[M]=0;for(M=21095;M<=21097;M++)U[M]=0;for(M=21148;M<=21150;M++)U[M]=0;for(M=21207;M<=21264;M++)U[M]=0;for(M=21307;M<=21364;M++)U[M]=0;for(M=21413;M<=21423;M++)U[M]=0;for(M=21453;M<=21463;M++)U[M]=0;for(M=21473;M<=21483;M++)U[M]=0;for(M=21780;M<=21782;M++)U[M]=0;for(M=21891;M<=21894;M++)U[M]=0;for(M=21896;M<=21899;M++)U[M]=0;for(M=22171;M<=22177;M++)U[M]=0;for(M=22181;M<=22187;M++)U[M]=0;for(M=22191;M<=22197;M++)U[M]=0;for(M=22207;M<=22222;M++)U[M]=0;for(M=22234;M<=22236;M++)U[M]=0;for(M=22243;M<=22250;M++)U[M]=0;for(M=22262;M<=22265;M++)U[M]=0;for(M=22307;M<=22322;M++)U[M]=0;for(M=22348;M<=22357;M++)U[M]=0;for(M=22407;M<=22422;M++)U[M]=0;for(M=22462;M<=22465;M++)U[M]=0;for(M=22521;M<=22525;M++)U[M]=0;for(M=22607;M<=22622;M++)U[M]=0;for(M=22641;M<=22646;M++)U[M]=0;for(M=22648;M<=22657;M++)U[M]=0;for(M=22707;M<=22722;M++)U[M]=0;for(M=22762;M<=22765;M++)U[M]=0;for(M=22991;M<=22994;M++)U[M]=0;for(M=23028;M<=23038;M++)U[M]=0;for(M=23830;M<=23853;M++)U[M]=0;for(M=23866;M<=23872;M++)U[M]=0;for(M=23877;M<=23884;M++)U[M]=0;for(M=23886;M<=23894;M++)U[M]=0;for(M=23946;M<=23948;M++)U[M]=0;for(M=24311;M<=24313;M++)U[M]=0;for(M=24342;M<=24347;M++)U[M]=0;for(M=24370;M<=24374;M++)U[M]=10;for(M=24375;M<=24381;M++)U[M]=0;for(M=24718;M<=24721;M++)U[M]=0;for(M=24817;M<=24821;M++)U[M]=0;for(M=24877;M<=24882;M++)U[M]=0;for(M=24891;M<=24893;M++)U[M]=0;for(M=25391;M<=25395;M++)U[M]=0;for(M=25828;M<=25838;M++)U[M]=0;for(M=26191;M<=26195;M++)U[M]=0;for(M=26391;M<=26393;M++)U[M]=0;for(M=26701;M<=26722;M++)U[M]=0;for(M=26729;M<=26799;M++)U[M]=2;for(M=26801;M<=26803;M++)U[M]=2;for(M=26811;M<=26813;M++)U[M]=2;for(M=26847;M<=26870;M++)U[M]=2;for(M=26891;M<=26899;M++)U[M]=0;for(M=26901;M<=26923;M++)U[M]=0;for(M=26929;M<=26946;M++)U[M]=0;for(M=26948;M<=26998;M++)U[M]=0;for(M=27037;M<=27040;M++)U[M]=0;for(M=27205;M<=27232;M++)U[M]=0;for(M=27258;M<=27260;M++)U[M]=0;for(M=27391;M<=27398;M++)U[M]=0;for(M=27561;M<=27564;M++)U[M]=0;for(M=27571;M<=27574;M++)U[M]=0;for(M=27581;M<=27584;M++)U[M]=0;for(M=27591;M<=27594;M++)U[M]=0;for(M=28191;M<=28193;M++)U[M]=0;for(M=28348;M<=28358;M++)U[M]=0;for(M=28402;M<=28432;M++)U[M]=0;for(M=28462;M<=28492;M++)U[M]=0;for(M=29118;M<=29122;M++)U[M]=0;for(M=29168;M<=29172;M++)U[M]=0;for(M=29177;M<=29185;M++)U[M]=0;for(M=29187;M<=29195;M++)U[M]=0;for(M=29900;M<=29903;M++)U[M]=0;for(M=30161;M<=30179;M++)U[M]=0;for(M=30491;M<=30494;M++)U[M]=0;for(M=30729;M<=30732;M++)U[M]=0;for(M=31251;M<=31259;M++)U[M]=0;for(M=31265;M<=31268;M++)U[M]=0;for(M=31275;M<=31279;M++)U[M]=0;for(M=31281;M<=31297;M++)U[M]=0;for(M=31461;M<=31469;M++)U[M]=0;for(M=31491;M<=31495;M++)U[M]=0;for(M=31917;M<=31922;M++)U[M]=0;for(M=31965;M<=32e3;M++)U[M]=0;for(M=32001;M<=32003;M++)U[M]=2;for(M=32005;M<=32031;M++)U[M]=2;for(M=32033;M<=32060;M++)U[M]=2;for(M=32064;M<=32067;M++)U[M]=2;for(M=32074;M<=32077;M++)U[M]=2;for(M=32081;M<=32086;M++)U[M]=0;for(M=32107;M<=32130;M++)U[M]=0;for(M=32133;M<=32159;M++)U[M]=0;for(M=32164;M<=32167;M++)U[M]=2;for(M=32180;M<=32199;M++)U[M]=0;for(M=32201;M<=32260;M++)U[M]=0;for(M=32301;M<=32360;M++)U[M]=0;for(M=32601;M<=32662;M++)U[M]=0;for(M=32664;M<=32667;M++)U[M]=2;for(M=32701;M<=32761;M++)U[M]=0;for(M=53001;M<=53004;M++)U[M]=0;for(M=53008;M<=53019;M++)U[M]=0;for(M=53021;M<=53032;M++)U[M]=0;for(M=53034;M<=53037;M++)U[M]=0;for(M=53042;M<=53046;M++)U[M]=0;for(M=53074;M<=53080;M++)U[M]=0;for(M=54001;M<=54004;M++)U[M]=0;for(M=54008;M<=54019;M++)U[M]=0;for(M=54021;M<=54032;M++)U[M]=0;for(M=54034;M<=54037;M++)U[M]=0;for(M=54042;M<=54046;M++)U[M]=0;for(M=54048;M<=54053;M++)U[M]=0;for(M=54074;M<=54080;M++)U[M]=0;for(M=54098;M<=54101;M++)U[M]=0;for(M=102001;M<=102040;M++)U[M]=0;for(M=102042;M<=102063;M++)U[M]=0;for(M=102065;M<=102067;M++)U[M]=0;for(M=102070;M<=102117;M++)U[M]=0;for(M=102122;M<=102216;M++)U[M]=0;for(M=102221;M<=102377;M++)U[M]=0;for(M=102382;M<=102388;M++)U[M]=0;for(M=102389;M<=102398;M++)U[M]=2;for(M=102399;M<=102444;M++)U[M]=0;for(M=102445;M<=102447;M++)U[M]=2;for(M=102448;M<=102458;M++)U[M]=0;for(M=102459;M<=102468;M++)U[M]=2;for(M=102469;M<=102499;M++)U[M]=0;for(M=102500;M<=102519;M++)U[M]=1;for(M=102520;M<=102524;M++)U[M]=0;for(M=102525;M<=102529;M++)U[M]=2;for(M=102530;M<=102588;M++)U[M]=0;for(M=102590;M<=102598;M++)U[M]=0;for(M=102601;M<=102603;M++)U[M]=0;for(M=102605;M<=102628;M++)U[M]=0;for(M=102629;M<=102646;M++)U[M]=2;for(M=102648;M<=102700;M++)U[M]=2;for(M=102701;M<=102703;M++)U[M]=0;for(M=102707;M<=102730;M++)U[M]=2;for(M=102733;M<=102758;M++)U[M]=2;for(M=102767;M<=102900;M++)U[M]=0;for(M=102901;M<=102933;M++)U[M]=2;for(M=102934;M<=102950;M++)U[M]=13;for(M=102951;M<=102955;M++)U[M]=0;for(M=102961;M<=102963;M++)U[M]=0;for(M=102965;M<=102969;M++)U[M]=0;for(M=102971;M<=102973;M++)U[M]=0;for(M=102975;M<=102989;M++)U[M]=0;for(M=102990;M<=102992;M++)U[M]=1;for(M=102997;M<=103002;M++)U[M]=0;for(M=103003;M<=103008;M++)U[M]=2;for(M=103009;M<=103011;M++)U[M]=0;for(M=103012;M<=103014;M++)U[M]=2;for(M=103019;M<=103021;M++)U[M]=0;for(M=103022;M<=103024;M++)U[M]=2;for(M=103029;M<=103031;M++)U[M]=0;for(M=103032;M<=103034;M++)U[M]=2;for(M=103065;M<=103068;M++)U[M]=0;for(M=103074;M<=103076;M++)U[M]=0;for(M=103077;M<=103079;M++)U[M]=1;for(M=103080;M<=103082;M++)U[M]=0;for(M=103083;M<=103085;M++)U[M]=2;for(M=103090;M<=103093;M++)U[M]=0;for(M=103097;M<=103099;M++)U[M]=0;for(M=103100;M<=103102;M++)U[M]=2;for(M=103107;M<=103109;M++)U[M]=0;for(M=103110;M<=103112;M++)U[M]=2;for(M=103113;M<=103116;M++)U[M]=0;for(M=103117;M<=103120;M++)U[M]=2;for(M=103153;M<=103157;M++)U[M]=0;for(M=103158;M<=103162;M++)U[M]=2;for(M=103163;M<=103165;M++)U[M]=0;for(M=103166;M<=103168;M++)U[M]=1;for(M=103169;M<=103171;M++)U[M]=2;for(M=103186;M<=103188;M++)U[M]=0;for(M=103189;M<=103191;M++)U[M]=2;for(M=103192;M<=103195;M++)U[M]=0;for(M=103196;M<=103199;M++)U[M]=2;for(M=103200;M<=103224;M++)U[M]=0;for(M=103225;M<=103227;M++)U[M]=1;for(M=103232;M<=103237;M++)U[M]=0;for(M=103238;M<=103243;M++)U[M]=2;for(M=103244;M<=103246;M++)U[M]=0;for(M=103247;M<=103249;M++)U[M]=2;for(M=103254;M<=103256;M++)U[M]=0;for(M=103257;M<=103259;M++)U[M]=2;for(M=103264;M<=103266;M++)U[M]=0;for(M=103267;M<=103269;M++)U[M]=2;for(M=103300;M<=103375;M++)U[M]=0;for(M=103381;M<=103383;M++)U[M]=0;for(M=103384;M<=103386;M++)U[M]=1;for(M=103387;M<=103389;M++)U[M]=0;for(M=103390;M<=103392;M++)U[M]=2;for(M=103397;M<=103399;M++)U[M]=0;for(M=103400;M<=103471;M++)U[M]=2;for(M=103476;M<=103478;M++)U[M]=0;for(M=103479;M<=103481;M++)U[M]=2;for(M=103486;M<=103488;M++)U[M]=0;for(M=103489;M<=103491;M++)U[M]=2;for(M=103492;M<=103495;M++)U[M]=0;for(M=103496;M<=103499;M++)U[M]=2;for(M=103528;M<=103543;M++)U[M]=0;for(M=103544;M<=103548;M++)U[M]=2;for(M=103549;M<=103551;M++)U[M]=0;for(M=103552;M<=103554;M++)U[M]=1;for(M=103555;M<=103557;M++)U[M]=2;for(M=103558;M<=103560;M++)U[M]=0;for(M=103571;M<=103573;M++)U[M]=0;for(M=103574;M<=103576;M++)U[M]=2;for(M=103577;M<=103580;M++)U[M]=0;for(M=103581;M<=103583;M++)U[M]=2;for(M=103595;M<=103694;M++)U[M]=0;for(M=103696;M<=103699;M++)U[M]=0;for(M=103700;M<=103793;M++)U[M]=2;for(M=103794;M<=103890;M++)U[M]=0;for(M=103891;M<=103896;M++)U[M]=2;for(M=103900;M<=103971;M++)U[M]=2;for(M=103972;M<=103977;M++)U[M]=0;for(M=112e3;M<=112101;M++)U[M]=0;const iF={102113:!0,102100:!0,3857:!0,3785:!0},rF={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},Y6='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',p1=[-20037508342788905e-9,20037508342788905e-9],d1=[-20037508342787e-6,20037508342787e-6],QT={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:p1,origin:d1,dx:1e-5},102100:{wkTemplate:Y6,valid:p1,origin:d1,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:p1,origin:d1,dx:1e-5},3857:{wkTemplate:Y6,valid:p1,origin:d1,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Ri(t,e){return t===e||t!=null&&e!=null&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||Ih(t)&&Ih(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function In(t){return Xi(t)&&t.wkid&&QT[t.wkid]||null}function eM(t){return!!Xi(t)&&(t.wkid?U[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function sF(t){return!(g5(t)||v5(t))}function Xd(t){return Xi(t)&&t.wkid===4326}function d0e(t){return Xi(t)&&t.wkid===Mh.CGCS2000}function Ih(t){return Xi(t)&&t.wkid!=null&&iF[t.wkid]===!0}function nF(t){return Xi(t)&&t.wkid===32662}function y5(t){return t===Mh.GCSMARS2000||t===Mh.GCSMARS2000_SPHERE}function g5(t){return Xi(t)&&t.wkid!=null&&y5(t.wkid)}function m5(t){return t===Mh.GCSMOON2000}function v5(t){return Xi(t)&&t.wkid!=null&&m5(t.wkid)}function oF(t){return Xi(t)&&t.wkid!=null&&rF[t.wkid]===!0}function Xi(t){return t!=null&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const aF={wkid:4326,wkt:rv(QT[4326].wkTemplate,{Central_Meridian:"0.0"})},lF={wkid:102100,latestWkid:3857},uF={wkid:32662};function b5(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const hF=b5(Vt),tM=b5(aa),iM=b5(Bl),cF={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Vt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function pF(t){return t!=null&&(g5(t)||Ri(t,tM))?aa:t!=null&&(v5(t)||Ri(t,iM))?Bl:Vt}function f0e(t){return y5(t)?aa:m5(t)?Bl:Vt}const rM=39.37,dF=Vt.radius*Math.PI/200,sM=/UNIT\[([^\]]+)\]\]$/i,yh=U,nM=/UNIT\[([^\]]+)\]/i,fF=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),yF=$r()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Gn=t=>t*t,Oa=t=>t*t*t,Qd={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Gn(.001)},"square-centimeters":{inBaseUnits:Gn(.01)},"square-decimeters":{inBaseUnits:Gn(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Gn(1e3)},"square-inches":{inBaseUnits:Gn(.0254)},"square-feet":{inBaseUnits:Gn(.3048)},"square-yards":{inBaseUnits:Gn(.9144)},"square-miles":{inBaseUnits:Gn(1609.344)},"square-us-feet":{inBaseUnits:Gn(1200/3937)},acres:{inBaseUnits:.0015625*Gn(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Oa(.001)},"cubic-centimeters":{inBaseUnits:1e3*Oa(.01)},"cubic-decimeters":{inBaseUnits:1e3*Oa(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Oa(1e3)},"cubic-inches":{inBaseUnits:1e3*Oa(.0254)},"cubic-feet":{inBaseUnits:1e3*Oa(.3048)},"cubic-yards":{inBaseUnits:1e3*Oa(.9144)},"cubic-miles":{inBaseUnits:1e3*Oa(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},gF=(()=>{const t={};for(const e in Qd)for(const i in Qd[e].units)t[i]=e;return t})();function mF(t,e,i){return t*Qd[i].units[e].inBaseUnits}function vF(t,e,i){return t/Qd[i].units[e].inBaseUnits}function nw(t){const e=gF[t];if(!e)throw new Error("unknown type");return e}function Z6(t,e=null){return e=e||nw(t),Qd[e].baseUnit===t}function bs(t,e,i){if(e===i)return t;const s=nw(e);if(s!==nw(i))throw new Error("incompatible units");const a=Z6(e,s)?t:mF(t,e,s);return Z6(i,s)?a:vF(a,i,s)}function bF(t,e,i){return bs(t,e,"meters")/(i*Math.PI/180)}function oM(t){return yF.fromJSON(t.toLowerCase())||null}function Hg(t){if(t!=null&&!sF(t))return 1;const e=_o(t);return e>1e5?1:e}function wF(t){return _o(t)>=pF(t).metersPerDegree?"meters":lM(t)}function _o(t,e=Vt.metersPerDegree){return _F(t,!0)??e}function _F(t,e=!1){const i=t!=null?t.wkid:null,s=t!=null?t.wkt:null;let a=null;if(i){if(y5(i))return aa.metersPerDegree;if(m5(i))return Bl.metersPerDegree;a=yh.values[yh[i]],!a&&e&&fF.has(i)&&(a=dF)}else s&&(hM(s)?a=X6(sM.exec(s),a):uM(s)&&(a=X6(nM.exec(s),a)));return a}function y0e(t){return t.isGeographic?1:_o(t)}function X6(t,e){return t&&t[1]?aM(t[1]):e}function aM(t){return parseFloat(t.split(",")[1])}function lM(t){const e=t!=null?t.wkid:null,i=t!=null?t.wkt:null;let s=null;if(e)s=yh.units[yh[e]];else if(i){const a=hM(i)?sM:uM(i)?nM:null;if(a){const d=a.exec(i);d&&d[1]&&(s=xF(d[1]))}}return s!=null?oM(s):null}function uM(t){return/^GEOCCS/i.test(t)}function hM(t){return/^PROJCS/i.test(t)}const SF=1e-7;function xF(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!yh.units.includes(i)){const s=aM(t);i=null;const a=yh.values;for(let d=0;d<a.length;++d)if(Math.abs(s-a[d])<SF){i=yh.units[d];break}}return i}const $F={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},TF={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},MF={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},g0e=$r()($F),m0e=$r()(TF),v0e=$r()(MF);var Bn;let Ot=Bn=class extends ye{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return Bn.WebMercator;if(t.wkid===4326)return Bn.WGS84}const e=new Bn;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return Xd(this)}get isWebMercator(){return Ih(this)}get isGeographic(){return eM(this)}get isWrappable(){return oF(this)}get metersPerUnit(){return _o(this)}get unit(){return lM(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Bn.WGS84)return Bn.WGS84;if(this===Bn.WebMercator)return Bn.WebMercator;const t=new Bn;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=ae(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:s}=t.imageCoordinateSystem,a=this.imageCoordinateSystem;return e==null||s?JSON.stringify(a)===JSON.stringify(t.imageCoordinateSystem):i?a.id===e&&a.referenceServiceName===i:a.id===e}return Ri(this,t)}toJSON(t){return this.write(void 0,t)}};Ot.GCS_NAD_1927=null,Ot.WGS84=null,Ot.WebMercator=null,Ot.PlateCarree=null,b([S({readOnly:!0})],Ot.prototype,"isWGS84",null),b([S({readOnly:!0})],Ot.prototype,"isWebMercator",null),b([S({readOnly:!0})],Ot.prototype,"isGeographic",null),b([S({readOnly:!0})],Ot.prototype,"isWrappable",null),b([S({type:Pt,json:{write:!0}})],Ot.prototype,"latestWkid",void 0),b([S({readOnly:!0})],Ot.prototype,"metersPerUnit",null),b([S({readOnly:!0})],Ot.prototype,"unit",null),b([S({type:Pt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Ot.prototype,"wkid",void 0),b([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Ot.prototype,"wkt",void 0),b([ke("wkt"),ke("web-scene","wkt")],Ot.prototype,"writeWkt",null),b([S({type:Pt,json:{write:!0}})],Ot.prototype,"vcsWkid",void 0),b([S({type:Pt,json:{write:!0}})],Ot.prototype,"latestVcsWkid",void 0),b([S()],Ot.prototype,"imageCoordinateSystem",void 0),Ot=Bn=b([J("esri.geometry.SpatialReference")],Ot),Ot.prototype.toJSON.isDefaultToJSON=!0,Ot.GCS_NAD_1927=new Ot({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Ot.WGS84=new Ot(aF),Ot.WebMercator=new Ot(lF),Ot.PlateCarree=new Ot(uF),Object.freeze&&(Object.freeze(Ot.GCS_NAD_1927),Object.freeze(Ot.WGS84),Object.freeze(Ot.WebMercator));const Xe=Ot,cM="20230626",pM="b81703b48e0b92e492f4cc6b739af02a9af50038",IF="4.27";let w5=IF;w5="4.27.6";const EF={async request(t,e){var g,_;const{default:i}=await _e(()=>Promise.resolve().then(()=>WF),void 0),s=t.options,a=s.responseType;s.signal=e==null?void 0:e.signal,s.responseType=a==="native"||a==="native-request-init"?"native-request-init":a&&["blob","json","text"].includes(a)&&((g=WT(t.url))!=null&&g.after)?a:"array-buffer";const d=await i(t.url,s),y={data:d.data,httpStatus:d.httpStatus,ssl:d.ssl};switch((_=d.requestOptions)==null?void 0:_.responseType){case"native-request-init":return delete y.data.signal,y;case"blob":y.data=await y.data.arrayBuffer();break;case"json":y.data=new TextEncoder().encode(JSON.stringify(y.data)).buffer;break;case"text":y.data=new TextEncoder().encode(y.data).buffer}return{result:y,transferList:[y.data]}}};let St;function b0e(t){St=t}function w0e(t){const e=St==null?void 0:St.findCredential(t);return e!=null&&e.token?ZT(t,"token",e.token):t}le("host-webworker");const AF=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function dM(t){const e=Mn(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!AF.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function kF(t,e,i=!1,s){return new Promise((a,d)=>{if(Fs(s))return void d(Q6());let y=()=>{x(),d(new Error(`Unable to load ${e}`))},g=()=>{const I=t;x(),a(I)},_=()=>{if(!t)return;const I=t;x(),I.src="",d(Q6())};const x=()=>{le("esri-image-decode")||(t.removeEventListener("error",y),t.removeEventListener("load",g)),y=null,g=null,t=null,s!=null&&s.removeEventListener("abort",_),_=null,i&&URL.revokeObjectURL(e)};s!=null&&s.addEventListener("abort",_),le("esri-image-decode")?t.decode().then(g,y):(t.addEventListener("error",y),t.addEventListener("load",g))})}function Q6(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const OF="Timeout exceeded";function CF(){return new Error(OF)}function PF(t){mt.request.crossOriginNoCorsDomains||(mt.request.crossOriginNoCorsDomains={});const e=mt.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Mn(i)??""]=0:(e[Mn("http://"+i)??""]=0,e[Mn("https://"+i)??""]=0)}function NF(t){const e=mt.request.crossOriginNoCorsDomains;if(e){let i=Mn(t);if(i)return i=i.toLowerCase(),!fp(i,a5())&&e[i]<Date.now()-36e5}return!1}async function LF(t){var a;const e=mt.request.crossOriginNoCorsDomains,i=Mn(t);e&&i&&(e[i.toLowerCase()]=Date.now());const s=ur(t);t=s.path,((a=s.query)==null?void 0:a.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function pt(t,e){var x;t instanceof URL&&(t=t.toString()),(e==null?void 0:e.query)instanceof URLSearchParams&&(e.query=l5(e.query.toString().replaceAll("+"," ")));const i=Vh(t),s=fv(t);s||i||(t=Tn(t));const a={url:t,requestOptions:{...e}};let d=WT(t);if(d){const I=await UF(d,a);if(I!=null)return{data:I,getHeader:_5,httpStatus:200,requestOptions:a.requestOptions,url:a.url};d.after||d.error||(d=null)}if(t=a.url,(e=a.requestOptions).responseType==="image"&&(le("host-webworker")||le("host-node")))throw co("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),a);if(e.method==="head"){if(e.body)throw co("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),a);if(i||s)throw co("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),a)}if(await zF(),Wg)return Wg.execute(t,e);const y=new AbortController;ls(e,()=>y.abort());const g={controller:y,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:d,params:a,redoRequest:!1,useIdentity:vn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},_=await BF(g);return(x=d==null?void 0:d.after)==null||x.call(d,_),_}let Wg;const vn=mt.request,fM="FormData"in globalThis,RF=[499,498,403,401],jF=["COM_0056","COM_0057","SB_0008"],DF=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_5=()=>null,Jg=Symbol();function FF(t){const e=Mn(t);e&&!pt._corsServers.includes(e)&&pt._corsServers.push(e)}function eS(t){const e=Mn(t);return!e||e.endsWith(".arcgis.com")||pt._corsServers.includes(e)||h5(e)}function co(t,e,i,s){let a="Error";const d={url:i.url,requestOptions:i.requestOptions,getHeader:_5,ssl:!1};if(e instanceof oe)return e.details?(e.details=ae(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=d,e;if(e){const y=s&&(x=>s.headers.get(x)),g=s==null?void 0:s.status,_=e.message;_&&(a=_),y&&(d.getHeader=y),d.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||g||0,d.subCode=e.subcode,d.messageCode=e.messageCode,typeof e.details=="string"?d.messages=[e.details]:d.messages=e.details,d.raw=Jg in e?e[Jg]:e}return or(e)?ni():new oe(t,a,d)}async function zF(){le("host-webworker")?Wg||(Wg=await _e(()=>import("./request-e25ded78.js"),[])):pt._abortableFetch||(pt._abortableFetch=globalThis.fetch.bind(globalThis))}async function ow(){St||await _e(()=>import("./IdentityManager-6c14a2bf.js"),[])}async function VF(t){var g;const e=t.params.url,i=t.params.requestOptions,s=t.controller.signal,a=i.body;let d=null,y=null;if(fM&&"HTMLFormElement"in globalThis&&(a instanceof FormData?d=a:a instanceof HTMLFormElement&&(d=new FormData(a))),typeof a=="string"&&(y=a),t.fetchOptions={cache:i.cacheBust&&!("polyfill"in pt._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:vn.priority,redirect:"follow",signal:s},(d||y)&&(t.fetchOptions.body=d||y),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(g=i.query)!=null&&g.token||d!=null&&d.get("token")),!t.hasToken&&mt.apiKey&&dM(e)&&(i.query||(i.query={}),i.query.token=mt.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!yM(e)&&!Fs(s)){let _;i.authMode==="immediate"?(await ow(),_=await St.getCredential(e,{signal:s}),t.credential=_):i.authMode==="no-prompt"?(await ow(),_=await St.getCredential(e,{prompt:!1,signal:s}).catch(()=>{}),t.credential=_):St&&(_=St.findCredential(e)),_&&(t.credentialToken=_.token,t.useSSL=!!_.ssl)}}function yM(t){return DF.some(e=>e.test(t))}async function GF(t){let e=t.params.url;const i=t.params.requestOptions,s=t.fetchOptions??{},a=fv(e)||Vh(e),d=i.responseType||"json",y=a?0:i.timeout!=null?i.timeout:vn.timeout;let g=!1;if(!a){t.useSSL&&(e=d5(e)),i.cacheBust&&s.cache==="default"&&(e=ZT(e,"request.preventCache",Date.now()));let C={...i.query};t.credentialToken&&(C.token=t.credentialToken);let N=ql(C);le("esri-url-encodes-apostrophe")&&(N=N.replaceAll("'","%27"));const j=e.length+1+N.length;let D;g=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||j>vn.maxUrlLength;const V=i.useProxy||!!dv(e);if(V){const W=DD(e);D=W.path,!g&&D.length+1+j>vn.maxUrlLength&&(g=!0),W.query&&(C={...W.query,...C})}if(s.method==="HEAD"&&(g||V)){if(g)throw j>vn.maxUrlLength?co("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):co("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(V)throw co("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(g?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=f2(e,C):(s.body=ql(C),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=f2(e,C),V&&(t.useProxy=!0,e=`${D}?${e}`),C.token&&fM&&s.body instanceof FormData&&!MD(e)&&s.body.set("token",C.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!fp(e,a5())){if(h5(e))t.withCredentials=!0;else if(St){const W=St.findServerInfo(e);W!=null&&W.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(s.credentials="include",NF(e)&&await LF(g?f2(e,C):e))}let _,x,I=0,A=!1;y>0&&(I=setTimeout(()=>{A=!0,t.controller.abort()},y));try{if(i.responseType==="native-request-init")x=s,x.url=e;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||g||qF(i.headers)||!a&&!t.useProxy&&vn.proxyUrl&&!eS(e)){if(_=await pt._abortableFetch(e,s),t.useProxy||FF(e),i.responseType==="native")x=_;else if(s.method!=="HEAD")if(_.ok){switch(d){case"array-buffer":x=await _.arrayBuffer();break;case"blob":case"image":x=await _.blob();break;default:x=await _.text()}if(I&&(clearTimeout(I),I=0),d==="json"||d==="xml"||d==="document")if(x)switch(d){case"json":x=JSON.parse(x);break;case"xml":x=tS(x,"application/xml");break;case"document":x=tS(x,"text/html")}else x=null;if(x){if(d==="array-buffer"||d==="blob"){const C=_.headers.get("Content-Type");if(C&&/application\/json|text\/plain/i.test(C)&&x[d==="blob"?"size":"byteLength"]<=750)try{const N=await new Response(x).json();N.error&&(x=N)}catch{}}d==="image"&&x instanceof Blob&&(x=await iS(URL.createObjectURL(x),t,!0))}}else{x=await _.text();try{x=JSON.parse(x)}catch{}}}else x=await iS(e,t)}catch(C){if(C.name==="AbortError")throw A?CF():ni("Request canceled");if(!(!_&&C instanceof TypeError&&vn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||eS(e))throw C;t.redoRequest=!0,FD({proxyUrl:vn.proxyUrl,urlPrefix:Mn(e)??""})}finally{I&&clearTimeout(I)}return[_,x]}async function UF(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,s;try{s=await t.before(e)}catch(a){i=co("request:interceptor",a,e)}if((s instanceof Error||s instanceof oe)&&(i=co("request:interceptor",s,e)),i)throw t.error&&t.error(i),i;return s}}function qF(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function tS(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function BF(t){var d,y;let e,i;await VF(t);try{do[e,i]=await GF(t);while(!await HF(t,e,i))}catch(g){const _=co("request:server",g,t.params,e);throw _.details.ssl=t.useSSL,(d=t.interceptor)!=null&&d.error&&t.interceptor.error(_),_}const s=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!t.hasToken&&!t.credentialToken&&((y=i.user)!=null&&y.username)&&!h5(s)){const g=Mn(s,!0);g&&vn.trustedServers.push(g)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&PF(i.authorizedCrossOriginNoCorsDomains)}const a=t.credential;if(a&&St){const g=St.findServerInfo(a.server);let _=g==null?void 0:g.owningSystemUrl;if(_){_=_.replace(/\/?$/,"/sharing");const x=St.findCredential(_,a.userId);x&&St._getIdenticalSvcIdx(_,x)===-1&&x.resources.unshift(_)}}return{data:i,getHeader:e?g=>e==null?void 0:e.headers.get(g):_5,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function HF(t,e,i){var x;if(t.redoRequest)return t.redoRequest=!1,!1;const s=t.params.requestOptions;if(!e||s.responseType==="native"||s.responseType==="native-request-init")return!0;let a,d;if(i&&(i.error?a=i.error:i.status==="error"&&Array.isArray(i.messages)&&(a={...i},a[Jg]=i,a.details=i.messages)),!a&&!e.ok)throw a=new Error(`Unable to load ${e.url} status: ${e.status}`),a[Jg]=i,a;let y,g=null;a&&(d=Number(a.code),g=a.hasOwnProperty("subcode")?Number(a.subcode):null,y=a.messageCode,y=y==null?void 0:y.toUpperCase());const _=s.authMode;if(d===403&&(g===4||(x=a.message)!=null&&x.toLowerCase().includes("ssl")&&!a.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(_!=="no-prompt"||d===498)&&d!==void 0&&RF.includes(d)&&!yM(t.params.url)&&(d!==403||y&&!jF.includes(y)&&(g==null||g===2&&t.credentialToken))){await ow();try{const I=await St.getCredential(t.params.url,{error:co("request:server",a,t.params),prompt:_!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=I,t.credentialToken=I.token,t.useSSL=t.useSSL||I.ssl,!1}catch(I){if(_==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;a=I}}if(a)throw a;return!0}function iS(t,e,i=!1){const s=e.controller.signal,a=new Image;return e.withCredentials?a.crossOrigin="use-credentials":a.crossOrigin="anonymous",a.alt="",a.fetchPriority=vn.priority,a.src=t,kF(a,t,i,s)}pt._abortableFetch=null,pt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const WF=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"}));function Ce(t,e,i){let s,a;return e===void 0||Array.isArray(e)?(a=t,i=e,s=[void 0]):(a=e,s=Array.isArray(t)?t:[t]),(d,y)=>{const g=d.constructor.prototype;s.forEach(_=>{const x=wT(d,_,a);x.read&&typeof x.read=="object"||(x.read={}),x.read.reader=g[y],i&&(x.read.source=(x.read.source||[]).concat(i))})}}let Hn=class extends ye{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Xe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Xe)return e;if(e!=null){const s=new Xe;return s.read(e,i),s}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};b([S()],Hn.prototype,"type",void 0),b([S({readOnly:!0})],Hn.prototype,"cache",null),b([S({readOnly:!0})],Hn.prototype,"extent",null),b([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Hn.prototype,"hasM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Hn.prototype,"hasZ",void 0),b([S({type:Xe,json:{write:!0},value:Xe.WGS84})],Hn.prototype,"spatialReference",void 0),b([Ce("spatialReference")],Hn.prototype,"readSpatialReference",null),Hn=b([J("esri.geometry.Geometry")],Hn);const tu=Hn,JF=Object.prototype.toString;function KF(t){const e="__accessorMetadata__"in t?ui(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return YF.apply(this,i)}}function YF(t,e,i,s){iv(t,e).cast=s}function ZF(t){return(e,i)=>{iv(e,t).cast=e[i]}}function Ft(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&JF.call(t[0])==="[object Function]"?KF(t[0]):t.length===1&&typeof t[0]=="string"?ZF(t[0]):void 0}function XF(t,e){const i=t.x-e.x,s=t.y-e.y,a=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+s*s+a*a)}const QF=57.29577951308232,ez=.017453292519943;function rS(t){return t*QF}function sS(t){return t*ez}function S0e(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Vt.radius))}function aw(t){return t.wkid!=null||t.wkt!=null}const y2=[0,0];function Kg(t,e,i,s,a){const d=t,y=a;if(y.spatialReference=i,"x"in d&&"x"in y)[y.x,y.y]=e(d.x,d.y,y2,s);else if("xmin"in d&&"xmin"in y)[y.xmin,y.ymin]=e(d.xmin,d.ymin,y2,s),[y.xmax,y.ymax]=e(d.xmax,d.ymax,y2,s);else if("paths"in d&&"paths"in y||"rings"in d&&"rings"in y){const g="paths"in d?d.paths:d.rings,_=[];let x;for(let I=0;I<g.length;I++){const A=g[I];x=[],_.push(x);for(let C=0;C<A.length;C++)x.push(e(A[C][0],A[C][1],[0,0],s)),A[C].length>2&&x[C].push(A[C][2]),A[C].length>3&&x[C].push(A[C][3])}"paths"in y?y.paths=_:y.rings=_}else if("points"in d&&"points"in y){const g=d.points,_=[];for(let x=0;x<g.length;x++)_[x]=e(g[x][0],g[x][1],[0,0],s),g[x].length>2&&_[x].push(g[x][2]),g[x].length>3&&_[x].push(g[x][3]);y.points=_}return a}function by(t,e){const i=t&&(aw(t)?t:t.spatialReference),s=e&&(aw(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!s)&&(!!Ri(s,i)||Ih(s)&&Xd(i)||Ih(i)&&Xd(s))}function yv(t,e){if(t==null)return null;const i=t.spatialReference,s=e&&(aw(e)?e:e.spatialReference);return by(i,s)?Ri(i,s)?ae(t):Ih(s)?Kg(t,Uc,Xe.WebMercator,!1,ae(t)):Xd(s)?Kg(t,_d,Xe.WGS84,!1,ae(t)):null:null}function Uc(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const s=sS(e);return i[0]=sS(t)*Vt.radius,i[1]=Vt.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function _d(t,e,i=[0,0],s=!1){const a=rS(t/Vt.radius);return i[0]=s?a:a-360*Math.floor((a+180)/360),i[1]=rS(Math.PI/2-2*Math.atan(Math.exp(-e/Vt.radius))),i}function Vl(t,e=!1,i=ae(t)){return Kg(t,Uc,Xe.WebMercator,e,i)}function qc(t,e=!1,i=ae(t)){return Kg(t,_d,Xe.WGS84,e,i)}var wy;const Xp=[0,0];function nS(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Tr=wy=class extends tu{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,s,a){let d;if(Array.isArray(t))d=t,a=e,t=d[0],e=d[1],i=d[2],s=d[3];else if(t&&typeof t=="object"){if(d=t,t=d.x!=null?d.x:d.longitude,e=d.y!=null?d.y:d.latitude,i=d.z,s=d.m,(a=d.spatialReference)&&a.declaredClass!=="esri.geometry.SpatialReference"&&(a=new Xe(a)),d.longitude!=null||d.latitude!=null){if(d.longitude==null)me.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(d.latitude==null)me.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!d.declaredClass&&a&&a.isWebMercator){const g=Uc(d.longitude,d.latitude,Xp);t=g[0],e=g[1]}}}else nS(i)?(a=i,i=null):nS(s)&&(a=s,s=null);const y={x:t,y:e};return y.x==null&&y.y!=null?me.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&me.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),a!=null&&(y.spatialReference=a),i!=null&&(y.z=i),s!=null&&(y.m=s),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return _d(e,i,Xp)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Uc(i,t,Xp)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return _d(t,e,Xp)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Uc(t,e,Xp)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new wy;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return wy.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:s,m:a,spatialReference:d}=this,{z:y,m:g}=t;let{x:_,y:x,spatialReference:I}=t;if(!d.equals(I))if(d.isWebMercator&&I.isWGS84)[_,x]=Uc(_,x),I=d;else{if(!d.isWGS84||!I.isWebMercator)return!1;[_,x]=_d(_,x),I=d}return e===_&&i===x&&s===y&&a===g&&d.wkid===I.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=In(this.spatialReference);if(!t)return this;let e=this.x;const[i,s]=t.valid,a=2*s;let d;return e>s?(d=Math.ceil(Math.abs(e-s)/a),e-=d*a):e<i&&(d=Math.ceil(Math.abs(e-i)/a),e+=d*a),this._set("x",e),this}distance(t){return XF(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};b([S({readOnly:!0})],Tr.prototype,"cache",null),b([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Tr.prototype,"hasM",null),b([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Tr.prototype,"hasZ",null),b([S({type:Number})],Tr.prototype,"latitude",null),b([S({type:Number})],Tr.prototype,"longitude",null),b([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ft(t=>isNaN(t)?t:Cs(t))],Tr.prototype,"x",void 0),b([ke("x")],Tr.prototype,"writeX",null),b([Ce("x")],Tr.prototype,"readX",null),b([S({type:Number,json:{write:!0}})],Tr.prototype,"y",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Tr.prototype,"z",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Tr.prototype,"m",void 0),Tr=wy=b([J("esri.geometry.Point")],Tr),Tr.prototype.toJSON.isDefaultToJSON=!0;const Ue=Tr,g2=[0,0];function gv(t,e){return e!=null&&Ar(t,e.x,e.y,e.z)}function x0e(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!yp(t,i))return!1;return!0}function tz(t,e){const{xmin:i,ymin:s,zmin:a,xmax:d,ymax:y,zmax:g}=e;return t.hasZ&&e.hasZ?Ar(t,i,s,a)&&Ar(t,i,y,a)&&Ar(t,d,y,a)&&Ar(t,d,s,a)&&Ar(t,i,s,g)&&Ar(t,i,y,g)&&Ar(t,d,y,g)&&Ar(t,d,s,g):Ar(t,i,s)&&Ar(t,i,y)&&Ar(t,d,y)&&Ar(t,d,s)}function yp(t,e){return Ar(t,e[0],e[1])}function iz(t,e){return Ar(t,e[0],e[1],e[2])}function Ar(t,e,i,s){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(s==null||!t.hasZ||s>=t.zmin&&s<=t.zmax)}function gM(t,e){return g2[1]=e.y,g2[0]=e.x,rz(t,g2)}function rz(t,e){return mM(t.rings,e)}function mM(t,e){if(!t)return!1;if(sz(t))return oS(!1,t,e);let i=!1;for(let s=0,a=t.length;s<a;s++)i=oS(i,t[s],e);return i}function sz(t){return!Array.isArray(t[0][0])}function oS(t,e,i){const[s,a]=i;let d=t,y=0;for(let g=0,_=e.length;g<_;g++){y++,y===_&&(y=0);const[x,I]=e[g],[A,C]=e[y];(I<a&&C>=a||C<a&&I>=a)&&x+(a-I)/(C-I)*(A-x)<s&&(d=!d)}return d}function nz(t,e){return gv(t,e)}function oz(t,e){const i=t.hasZ&&e.hasZ;let s,a,d;if(t.xmin<=e.xmin){if(s=e.xmin,t.xmax<s)return!1}else if(s=t.xmin,e.xmax<s)return!1;if(t.ymin<=e.ymin){if(a=e.ymin,t.ymax<a)return!1}else if(a=t.ymin,e.ymax<a)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(d=e.zmin,t.zmax<d)return!1}else if(d=t.zmin,e.zmax<d)return!1}return!0}function az(t,e){const{points:i,hasZ:s}=e,a=s?iz:yp;for(const d of i)if(a(t,d))return!0;return!1}const Eh=[0,0],Ah=[0,0],kh=[0,0],Oh=[0,0],lz=[Eh,Ah,kh,Oh],vM=[[kh,Eh],[Eh,Ah],[Ah,Oh],[Oh,kh]];function uz(t,e){return hz(t,e.rings)}function hz(t,e){Eh[0]=t.xmin,Eh[1]=t.ymax,Ah[0]=t.xmax,Ah[1]=t.ymax,kh[0]=t.xmin,kh[1]=t.ymin,Oh[0]=t.xmax,Oh[1]=t.ymin;for(const i of lz)if(mM(e,i))return!0;for(const i of e){if(!i.length)continue;let s=i[0];if(yp(t,s))return!0;for(let a=1;a<i.length;a++){const d=i[a];if(yp(t,d)||bM(s,d,vM))return!0;s=d}}return!1}function cz(t,e){Eh[0]=t.xmin,Eh[1]=t.ymax,Ah[0]=t.xmax,Ah[1]=t.ymax,kh[0]=t.xmin,kh[1]=t.ymin,Oh[0]=t.xmax,Oh[1]=t.ymin;const i=e.paths;for(const s of i){if(!i.length)continue;let a=s[0];if(yp(t,a))return!0;for(let d=1;d<s.length;d++){const y=s[d];if(yp(t,y)||bM(a,y,vM))return!0;a=y}}return!1}const Hi=[0,0];function pz(t){for(let e=0;e<t.length;e++){const i=t[e];for(let a=0;a<i.length-1;a++){const d=i[a],y=i[a+1];for(let g=e+1;g<t.length;g++)for(let _=0;_<t[g].length-1;_++){const x=t[g][_],I=t[g][_+1];if(lw(d,y,x,I,Hi)&&!(Hi[0]===d[0]&&Hi[1]===d[1]||Hi[0]===x[0]&&Hi[1]===x[1]||Hi[0]===y[0]&&Hi[1]===y[1]||Hi[0]===I[0]&&Hi[1]===I[1]))return!0}}const s=i.length;if(!(s<=4))for(let a=0;a<s-3;a++){let d=s-1;a===0&&(d=s-2);const y=i[a],g=i[a+1];for(let _=a+2;_<d;_++){const x=i[_],I=i[_+1];if(lw(y,g,x,I,Hi)&&!(Hi[0]===y[0]&&Hi[1]===y[1]||Hi[0]===x[0]&&Hi[1]===x[1]||Hi[0]===g[0]&&Hi[1]===g[1]||Hi[0]===I[0]&&Hi[1]===I[1]))return!0}}}return!1}function bM(t,e,i){for(let s=0;s<i.length;s++)if(lw(t,e,i[s][0],i[s][1]))return!0;return!1}function lw(t,e,i,s,a){const[d,y]=t,[g,_]=e,[x,I]=i,[A,C]=s,N=A-x,j=d-x,D=g-d,V=C-I,W=y-I,K=_-y,Y=V*D-N*K;if(Y===0)return!1;const ee=(N*W-V*j)/Y,re=(D*W-K*j)/Y;return ee>=0&&ee<=1&&re>=0&&re<=1&&(a&&(a[0]=d+ee*(g-d),a[1]=y+ee*(_-y)),!0)}function dz(t){switch(t){case"esriGeometryEnvelope":case"extent":return oz;case"esriGeometryMultipoint":case"multipoint":return az;case"esriGeometryPoint":case"point":return nz;case"esriGeometryPolygon":case"polygon":return uz;case"esriGeometryPolyline":case"polyline":return cz}}var ws;function fz(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Ca(t,e,i){return e==null?i:i==null?e:t(e,i)}let ji=ws=class extends tu{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,s,a){return fz(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Xe.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:s,spatialReference:a??Xe.WGS84}}static fromBounds(t,e){return new ws({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new ws({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Ue({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new ws;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&by(e,i)&&(t=e.isWebMercator?Vl(t):qc(t,!0)),t.type==="point"?gv(this,t):t.type==="extent"&&tz(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&by(e,i)&&(t=e.isWebMercator?Vl(t):qc(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,s=this.height*e;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const a=(this.zmax-this.zmin)*e;this.zmin+=a,this.zmax-=a}if(this.hasM){const a=(this.mmax-this.mmin)*e;this.mmin+=a,this.mmax-=a}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Ri(e,i)&&by(e,i)&&(t=e.isWebMercator?Vl(t):qc(t,!0)),dz(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Ca(Math.min,this.zmin,t.zmin),this.zmax=Ca(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Ca(Math.min,this.mmin,t.mmin),this.mmax=Ca(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Ca(Math.max,this.zmin,t.zmin),this.zmax=Ca(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Ca(Math.max,this.mmin,t.mmin),this.mmax=Ca(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=In(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const s=e.isWebMercator?qc(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(s.x=this._normalizeX(s.x,t).x),this.spatialReference=new Xe(rv((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(t){let e=null;const[i,s]=t.valid,a=this.xmin,d=this.xmax;return a>=i&&a<=s&&d>=i&&d<=s||(e=this.center),e}_normalize(t,e,i){const s=this.spatialReference;if(!s)return this;const a=i??In(s);if(a==null)return this;const d=this._getParts(a).map(_=>_.extent);if(d.length<2)return d[0]||this;if(d.length>2)return t?this._shiftCM(a):this.set({xmin:a.valid[0],xmax:a.valid[1]});if(t)return this._shiftCM(a);if(e)return d;let y=!0,g=!0;return d.forEach(_=>{_.hasZ||(y=!1),_.hasM||(g=!1)}),{rings:d.map(_=>{const x=[[_.xmin,_.ymin],[_.xmin,_.ymax],[_.xmax,_.ymax],[_.xmax,_.ymin],[_.xmin,_.ymin]];if(y){const I=(_.zmax-_.zmin)/2;for(let A=0;A<x.length;A++)x[A].push(I)}if(g){const I=(_.mmax-_.mmin)/2;for(let A=0;A<x.length;A++)x[A].push(I)}return x}),hasZ:y,hasM:g,spatialReference:s}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:a,ymax:d,spatialReference:y}=this,g=this.width,_=this.xmin,x=this.xmax;let I;t=t||In(y);const[A,C]=t.valid;I=this._normalizeX(this.xmin,t);const N=I.x,j=I.frameId;I=this._normalizeX(this.xmax,t);const D=I.x,V=I.frameId,W=N===D&&g>0;if(g>2*C){const K=new ws(_<x?N:D,a,C,d,y),Y=new ws(A,a,_<x?D:N,d,y),ee=new ws(0,a,C,d,y),re=new ws(A,a,0,d,y),se=[],ue=[];K.contains(ee)&&se.push(j),K.contains(re)&&ue.push(j),Y.contains(ee)&&se.push(V),Y.contains(re)&&ue.push(V);for(let de=j+1;de<V;de++)se.push(de),ue.push(de);e.push({extent:K,frameIds:[j]},{extent:Y,frameIds:[V]},{extent:ee,frameIds:se},{extent:re,frameIds:ue})}else N>D||W?e.push({extent:new ws(N,a,C,d,y),frameIds:[j]},{extent:new ws(A,a,D,d,y),frameIds:[V]}):e.push({extent:new ws(N,a,D,d,y),frameIds:[j]});this.cache._parts=e}const i=this.hasZ,s=this.hasM;if(i||s){const a={};i&&(a.zmin=this.zmin,a.zmax=this.zmax),s&&(a.mmin=this.mmin,a.mmax=this.mmax);for(let d=0;d<e.length;d++)e[d].extent.set(a)}return e}_normalizeX(t,e){const[i,s]=e.valid,a=2*s;let d,y=0;return t>s?(d=Math.ceil(Math.abs(t-s)/a),t-=d*a,y=d):t<i&&(d=Math.ceil(Math.abs(t-i)/a),t+=d*a,y=-d),{x:t,frameId:y}}};b([S({readOnly:!0})],ji.prototype,"cache",null),b([S({readOnly:!0})],ji.prototype,"center",null),b([S({readOnly:!0})],ji.prototype,"extent",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ji.prototype,"hasM",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ji.prototype,"hasZ",null),b([S({readOnly:!0})],ji.prototype,"height",null),b([S({readOnly:!0})],ji.prototype,"width",null),b([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ji.prototype,"xmin",void 0),b([S({type:Number,json:{write:!0}})],ji.prototype,"ymin",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ji.prototype,"mmin",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ji.prototype,"zmin",void 0),b([S({type:Number,json:{write:!0}})],ji.prototype,"xmax",void 0),b([S({type:Number,json:{write:!0}})],ji.prototype,"ymax",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ji.prototype,"mmax",void 0),b([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ji.prototype,"zmax",void 0),ji=ws=b([J("esri.geometry.Extent")],ji),ji.prototype.toJSON.isDefaultToJSON=!0;const bt=ji;let Sd;var M$,I$;const yz=((M$=globalThis.esriConfig)==null?void 0:M$.locale)??((I$=globalThis.dojoConfig)==null?void 0:I$.locale);function wM(){var t;return yz??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function En(){return Sd===void 0&&(Sd=wM()),Sd}const xd=[];function S5(t){return xd.push(t),{remove(){xd.splice(xd.indexOf(t),1)}}}const uw=[];function x5(t){return uw.push(t),{remove(){xd.splice(uw.indexOf(t),1)}}}function gz(){const t=wM();Sd!==t&&(Sd=t,[...uw].forEach(e=>{e.call(null,t)}),[...xd].forEach(e=>{e.call(null,t)}))}var E$;(E$=globalThis.addEventListener)==null||E$.call(globalThis,"languagechange",gz);let f1;function mz(t){return f1&&!f1.destroyed||(f1=t()),f1}var hw;const vz=new Nt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let _s=hw=class extends je{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new hw({categories:this.categories?ae(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y));let s="";if(this.extent){const y=yv(this.extent,Xe.WGS84);y!=null&&(s=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let a=this.query;!this.disableExtraQuery&&t.extraQuery&&(a="("+a+")"+t.extraQuery);const d={categories:i,bbox:s,q:a,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(d.sortField=this.sortField.split(",").map(y=>vz.toJSON(y.trim())).join(","),d.sortOrder=this.sortOrder),{query:{...e,...d}}}};b([S()],_s.prototype,"categories",void 0),b([S()],_s.prototype,"disableExtraQuery",void 0),b([S({type:bt})],_s.prototype,"extent",void 0),b([S()],_s.prototype,"filter",void 0),b([S()],_s.prototype,"num",void 0),b([S()],_s.prototype,"query",void 0),b([S()],_s.prototype,"sortField",void 0),b([S()],_s.prototype,"sortOrder",null),b([S()],_s.prototype,"start",void 0),_s=hw=b([J("esri.portal.PortalQueryParams")],_s);const uo=_s;let wu=class extends je{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};b([S()],wu.prototype,"nextQueryParams",void 0),b([S()],wu.prototype,"queryParams",void 0),b([S()],wu.prototype,"results",void 0),b([S()],wu.prototype,"total",void 0),wu=b([J("esri.portal.PortalQueryResult")],wu);const bz=wu;let No=class extends ye{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new oe("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};b([S({type:Date})],No.prototype,"created",void 0),b([S()],No.prototype,"id",void 0),b([S()],No.prototype,"portal",void 0),b([S()],No.prototype,"title",void 0),b([S({readOnly:!0})],No.prototype,"url",null),b([S()],No.prototype,"username",void 0),No=b([J("esri.portal.PortalFolder")],No);const wz=No;let Di=class extends ye{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var s;const e=this.url,i=this.thumbnail;return e&&i&&this.portal?(s=this.portal)==null?void 0:s.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return Gr(this.portal).request(this.url+"/categorySchema",e).then(i=>{const s=i.categorySchema||[];return s.some(a=>a.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):s})}fetchMembers(e){return Gr(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new oe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let s=ui(uo,e);const a=Gr(this.portal);return parseFloat(a.currentVersion)>5?(s=s||new uo,a.queryPortal(`/content/groups/${this.id}/search`,s,"PortalItem",i)):(s=s?s.clone():new uo,s.query="group:"+this.id+(s.query?" "+s.query:""),a.queryItems(s,i))}_fetchCategorySchemaSet(e,i){const s=Gr(this.portal);return s.fetchSelf(s.authMode,!0,i).then(a=>{const d=a.contentCategorySetsGroupQuery;if(d){const y=new uo;return y.disableExtraQuery=!0,y.num=1,y.query=d,s.queryGroups(y,i)}throw new oe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(a=>{if(a.total){const d=a.results[0],y=new uo;return y.num=1,y.query=`typekeywords:"${e}"`,d.queryItems(y,i)}throw new oe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(a=>a.total?a.results[0].fetchData("json",i).then(d=>{const y=d&&d.categorySchema;return y&&y.length?y:[]}):[])}};b([S()],Di.prototype,"access",void 0),b([S({type:Date})],Di.prototype,"created",void 0),b([S()],Di.prototype,"description",void 0),b([S()],Di.prototype,"id",void 0),b([S()],Di.prototype,"isInvitationOnly",void 0),b([S({type:Date})],Di.prototype,"modified",void 0),b([S()],Di.prototype,"owner",void 0),b([S()],Di.prototype,"portal",void 0),b([S()],Di.prototype,"snippet",void 0),b([S()],Di.prototype,"sortField",void 0),b([S()],Di.prototype,"sortOrder",void 0),b([S()],Di.prototype,"tags",void 0),b([S()],Di.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Di.prototype,"thumbnailUrl",null),b([S()],Di.prototype,"title",void 0),b([S({readOnly:!0})],Di.prototype,"url",null),Di=b([J("esri.portal.PortalGroup")],Di);const cw=Di,_z=Object.freeze(Object.defineProperty({__proto__:null,default:cw},Symbol.toStringTag,{value:"Module"}));var pw;let Yt=pw=class extends ye{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,s=t&&t.folder,a={method:"post"};e&&(a.query=e.createPostQuery(),i!=null&&(typeof i=="string"?a.query.text=i:typeof i=="object"&&(a.query.text=JSON.stringify(i))));let d=this.userContentUrl;return s&&(d+="/"+(typeof s=="string"?s:s.id)),this.portal.request(d+"/addItem",a).then(y=>(e.id=y.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(",")}};return this.portal.request(e,s).then(()=>{t.forEach(a=>{a.id=null,a.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(s=>{const a=wz.fromJSON(s);return a.portal=this.portal,a}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const s=cw.fromJSON(i);return s.portal=this.portal,s}):[],e})}fetchItems(t){const e=t??{};let i,s=this.userContentUrl??"";return e.folder&&(s+="/"+e.folder.id),_e(()=>Promise.resolve().then(()=>_M),void 0).then(({default:a})=>{i=a;const d={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(s,{query:d})}).then(a=>{let d;return a&&a.items?(d=a.items.map(y=>{const g=i.fromJSON(y);return g.portal=this.portal,g}),Promise.all(d.map(y=>y.load())).catch(y=>y).then(()=>({items:d,nextStart:a.nextStart,total:a.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new cw({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new oe("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new oe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new pw;return e.sourceJSON=t,e.read(t),e}};b([S()],Yt.prototype,"access",void 0),b([S({type:Date})],Yt.prototype,"created",void 0),b([S()],Yt.prototype,"culture",void 0),b([S()],Yt.prototype,"description",void 0),b([S()],Yt.prototype,"email",void 0),b([S()],Yt.prototype,"favGroupId",void 0),b([S()],Yt.prototype,"fullName",void 0),b([S({type:Date})],Yt.prototype,"modified",void 0),b([S()],Yt.prototype,"orgId",void 0),b([S()],Yt.prototype,"portal",void 0),b([S()],Yt.prototype,"preferredView",void 0),b([S()],Yt.prototype,"privileges",void 0),b([S()],Yt.prototype,"region",void 0),b([S()],Yt.prototype,"role",void 0),b([S()],Yt.prototype,"roleId",void 0),b([S()],Yt.prototype,"sourceJSON",void 0),b([S()],Yt.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Yt.prototype,"thumbnailUrl",null),b([S()],Yt.prototype,"units",void 0),b([S({readOnly:!0})],Yt.prototype,"userContentUrl",null),b([S({readOnly:!0})],Yt.prototype,"url",null),b([S()],Yt.prototype,"username",void 0),b([S()],Yt.prototype,"userType",void 0),Yt=pw=b([J("esri.portal.PortalUser")],Yt);const $5=Yt,Sz=Object.freeze(Object.defineProperty({__proto__:null,default:$5},Symbol.toStringTag,{value:"Module"}));var Lo;let y1;const aS={PortalGroup:()=>_e(()=>Promise.resolve().then(()=>_z),void 0),PortalItem:()=>_e(()=>Promise.resolve().then(()=>_M),void 0),PortalUser:()=>_e(()=>Promise.resolve().then(()=>Sz),void 0)};let Se=Lo=class extends Ef(da){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=mt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){lS.unregister(this),this.defaultBasemap=Kt(this.defaultBasemap),this.defaultDevBasemap=Kt(this.defaultDevBasemap),this.defaultVectorBasemap=Kt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=li(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)mt.request.trustedServers.includes(e)||mt.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=$5.fromJSON(t),e.portal=this),e}load(t){const e=_e(()=>Promise.resolve().then(()=>Kz),void 0).then(({default:i})=>{Xt(t),y1=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{var s;if(St){const a=St;this.credential=a.findCredential(this.restUrl),this.credential||this.authMode!==Lo.AUTH_MODE_AUTO||((s=this._esriIdCredentialCreateHandle)==null||s.remove(),this._esriIdCredentialCreateHandle=a.on("credential-create",xz(new WeakRef(this))),lS.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await _e(()=>import("./ElevationLayer-47436a28.js"),[])).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}async fetchBasemaps(t,e){const i=await this._fetchBasemaps(t,e);if((e==null?void 0:e.include3d)===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(t,e);i.unshift(...s)}return i}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):Fs(t)?Promise.reject(ni()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new uo;if(i.num=100,i.sortField="title",e&&e.length){const s=[];for(const a of e)s.push(`(title:"${a.title}" AND owner:${a.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,t).then(a=>a.results)}return Fs(t)?Promise.reject(ni()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||En();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||En();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return mz(()=>new Lo)}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const s=this.restUrl+"/portals/self",a={authMode:t,query:{culture:En().toLowerCase()},...i};return a.authMode==="auto"&&(a.authMode="no-prompt"),e&&(a.query.default=!0),this.request(s,a)}queryPortal(t,e,i,s){const a=ui(uo,e),d=y=>this.request(this.restUrl+t,{...a.toRequestOptions(this),...s}).then(g=>{const _=a.clone();return _.start=g.nextStart,new bz({nextQueryParams:_,queryParams:a,total:g.total,results:Lo._resultsToTypedArray(y,{portal:this},g,s)})}).then(g=>Promise.all(g.results.map(_=>typeof _.when=="function"?_.when():g)).then(()=>g,_=>(wn(_),g)));return i&&aS[i]?aS[i]().then(({default:y})=>(Xt(s),d(y))):d()}signIn(){if(this.authMode===Lo.AUTH_MODE_ANONYMOUS)return Promise.reject(new oe("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return St?St.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(s=>{const a=Lo._resultsToTypedArray(i,{portal:this},s);return Promise.all(a.map(d=>typeof d.when=="function"?d.when():s)).then(()=>a,()=>a)})}request(t,e={}){const i={f:"json",...e.query},{authMode:s=this.authMode===Lo.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:a=null,cacheBust:d=!1,method:y="auto",responseType:g="json",signal:_}=e,x={authMode:s,body:a,cacheBust:d,method:y,query:i,responseType:g,timeout:0,signal:_};return pt(this._normalizeSSL(t),x).then(I=>I.data)}toJSON(){throw new oe("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Lo({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new oe("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}async _fetchBasemaps(t,e){const i=new uo;i.query=t||(mt.apiKey&&dM(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const s=await this.queryGroups(i,e);if(!s.total)return[];const a=s.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=a.sortField||"name",i.sortOrder=a.sortOrder||"desc";const d=await a.queryItems(i,e);return d.total?d.results.filter(y=>y.type==="Web Map").map(y=>new y1({portalItem:y})):[]}async _fetchBasemaps3D(t,e){const i=t||this.basemapGalleryGroupQuery3D;if(!i)return[];const s=new uo({query:i,disableExtraQuery:!0}),a=await this.queryGroups(s,e);if(!a.total)return[];const d=a.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=d.sortField||"name",s.sortOrder=d.sortOrder||"desc";const y=await d.queryItems(s,e);return y.total?y.results.filter(g=>g.type==="Web Scene").map(g=>new y1({portalItem:g})):[]}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=y1.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,s){let a=[];if(i){const d=s!=null?s.signal:null;a=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(a=a.map(y=>{const g=Object.assign(t?t.fromJSON(y):y,e);return typeof g.load=="function"&&g.load(d),g}))}else a=[];return a}};Se.AUTH_MODE_ANONYMOUS="anonymous",Se.AUTH_MODE_AUTO="auto",Se.AUTH_MODE_IMMEDIATE="immediate",b([S()],Se.prototype,"access",void 0),b([S()],Se.prototype,"allSSL",void 0),b([S()],Se.prototype,"authMode",void 0),b([S()],Se.prototype,"authorizedCrossOriginDomains",void 0),b([Ce("authorizedCrossOriginDomains")],Se.prototype,"readAuthorizedCrossOriginDomains",null),b([S()],Se.prototype,"basemapGalleryGroupQuery",void 0),b([S({json:{name:"3DBasemapGalleryGroupQuery"}})],Se.prototype,"basemapGalleryGroupQuery3D",void 0),b([S()],Se.prototype,"bingKey",void 0),b([S()],Se.prototype,"canListApps",void 0),b([S()],Se.prototype,"canListData",void 0),b([S()],Se.prototype,"canListPreProvisionedItems",void 0),b([S()],Se.prototype,"canProvisionDirectPurchase",void 0),b([S()],Se.prototype,"canSearchPublic",void 0),b([S()],Se.prototype,"canShareBingPublic",void 0),b([S()],Se.prototype,"canSharePublic",void 0),b([S()],Se.prototype,"canSignInArcGIS",void 0),b([S()],Se.prototype,"canSignInIDP",void 0),b([S()],Se.prototype,"colorSetsGroupQuery",void 0),b([S()],Se.prototype,"commentsEnabled",void 0),b([S({type:Date})],Se.prototype,"created",void 0),b([S()],Se.prototype,"credential",void 0),b([S()],Se.prototype,"culture",void 0),b([S()],Se.prototype,"currentVersion",void 0),b([S()],Se.prototype,"customBaseUrl",void 0),b([S()],Se.prototype,"defaultBasemap",void 0),b([Ce("defaultBasemap")],Se.prototype,"readDefaultBasemap",null),b([S()],Se.prototype,"defaultDevBasemap",void 0),b([Ce("defaultDevBasemap")],Se.prototype,"readDefaultDevBasemap",null),b([S({type:bt})],Se.prototype,"defaultExtent",void 0),b([S()],Se.prototype,"defaultVectorBasemap",void 0),b([Ce("defaultVectorBasemap")],Se.prototype,"readDefaultVectorBasemap",null),b([S()],Se.prototype,"description",void 0),b([S()],Se.prototype,"devBasemapGalleryGroupQuery",void 0),b([S()],Se.prototype,"eueiEnabled",void 0),b([S({readOnly:!0})],Se.prototype,"extraQuery",null),b([S()],Se.prototype,"featuredGroups",void 0),b([S()],Se.prototype,"featuredItemsGroupQuery",void 0),b([S()],Se.prototype,"galleryTemplatesGroupQuery",void 0),b([S()],Se.prototype,"livingAtlasGroupQuery",void 0),b([S()],Se.prototype,"hasCategorySchema",void 0),b([S()],Se.prototype,"helpBase",void 0),b([S()],Se.prototype,"helperServices",void 0),b([S()],Se.prototype,"helpMap",void 0),b([S()],Se.prototype,"homePageFeaturedContent",void 0),b([S()],Se.prototype,"homePageFeaturedContentCount",void 0),b([S()],Se.prototype,"httpPort",void 0),b([S()],Se.prototype,"httpsPort",void 0),b([S()],Se.prototype,"id",void 0),b([S()],Se.prototype,"ipCntryCode",void 0),b([S({readOnly:!0})],Se.prototype,"isOrganization",null),b([S()],Se.prototype,"isPortal",void 0),b([S()],Se.prototype,"isReadOnly",void 0),b([S({readOnly:!0})],Se.prototype,"itemPageUrl",null),b([S()],Se.prototype,"layerTemplatesGroupQuery",void 0),b([S()],Se.prototype,"maxTokenExpirationMinutes",void 0),b([S({type:Date})],Se.prototype,"modified",void 0),b([S()],Se.prototype,"name",void 0),b([S()],Se.prototype,"portalHostname",void 0),b([S()],Se.prototype,"portalMode",void 0),b([S()],Se.prototype,"portalProperties",void 0),b([S()],Se.prototype,"region",void 0),b([S({readOnly:!0})],Se.prototype,"restUrl",null),b([S()],Se.prototype,"rotatorPanels",void 0),b([S()],Se.prototype,"showHomePageDescription",void 0),b([S()],Se.prototype,"sourceJSON",void 0),b([S()],Se.prototype,"staticImagesUrl",void 0),b([S({json:{name:"2DStylesGroupQuery"}})],Se.prototype,"stylesGroupQuery2d",void 0),b([S({json:{name:"stylesGroupQuery"}})],Se.prototype,"stylesGroupQuery3d",void 0),b([S()],Se.prototype,"supportsHostedServices",void 0),b([S()],Se.prototype,"symbolSetsGroupQuery",void 0),b([S()],Se.prototype,"templatesGroupQuery",void 0),b([S()],Se.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Se.prototype,"thumbnailUrl",null),b([S()],Se.prototype,"units",void 0),b([S()],Se.prototype,"url",void 0),b([S()],Se.prototype,"urlKey",void 0),b([Ce("urlKey")],Se.prototype,"readUrlKey",null),b([S()],Se.prototype,"user",void 0),b([Ce("user")],Se.prototype,"readUser",null),b([S()],Se.prototype,"use3dBasemaps",void 0),b([S()],Se.prototype,"useStandardizedQuery",void 0),b([S()],Se.prototype,"useVectorBasemaps",void 0),b([S()],Se.prototype,"vectorBasemapGalleryGroupQuery",void 0),Se=Lo=b([J("esri.portal.Portal")],Se);const ar=Se,lS=new FinalizationRegistry(t=>{t.remove()});function xz(t){const e=St;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}const $z=me.getLogger("esri.assets");function It(t){if(!mt.assetsPath)throw $z.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new oe("assets:path-not-set","config.assetsPath is not set");return Th(mt.assetsPath,t)}let Ro=class extends je{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){e!=null&&us(e)?me.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const s=this.cdnUrl;if(s==null)throw new oe("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(s,{responseType:e,query:{token:this.portalItem.apiKey},signal:i==null?void 0:i.signal})}async update(e,i){const{addOrUpdateResource:s}=await _e(()=>import("./resourceUtils-a2699a15.js"),[]);return s(this,"update",e,i)}hasPath(){return this.path!=null}_normalizePath(e,i){return e==null?e:(e=e.replace(/^\/+/,""),i!=null&&us(e)&&(e=c5(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};b([S()],Ro.prototype,"portalItem",void 0),b([S({type:String,value:null})],Ro.prototype,"path",null),b([Ft("path")],Ro.prototype,"_castPath",null),b([S({type:String,readOnly:!0})],Ro.prototype,"url",null),b([S({type:String,readOnly:!0})],Ro.prototype,"cdnUrl",null),b([S({type:String,readOnly:!0})],Ro.prototype,"itemRelativeUrl",null),Ro=b([J("esri.portal.PortalItemResource")],Ro);const Tz=Ro;let _0=class extends je{constructor(e){super(e),this.created=null,this.rating=null}};b([S()],_0.prototype,"created",void 0),b([S()],_0.prototype,"rating",void 0),_0=b([J("esri.portal.PortalRating")],_0);const m2=_0;var _u;const Mz=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),Iz=new Set(["KML","GeoJson","CSV"]);let Qe=_u=class extends Ef(da){static from(t){return xh(_u,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"&&(i="Excalibur Project"),i}readExtent(t){return t&&t.length?new bt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",s="16";let a,d=!1,y=!1,g=!1,_=!1,x=!1,I=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(d=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(y=e.includes("Table"),g=e.includes("Route Layer"),_=e.includes("Markup"),x=e.includes("Spatiotemporal"),I=e.includes("UtilityNetwork"),a=x&&y?"spatiotemporaltable":y?"table":g?"routelayer":_?"markup":x?"spatiotemporal":d?"featureshosted":I?"utilitynetwork":"features"):a=t==="map service"||t==="wms"||t==="wmts"?d||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):a=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="360 vr experience"?"360vr":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":t==="data pipeline"?"datapipelines":"maps",a?It(i+a+s+".png"):null}get isLayer(){return this.type!=null&&Mz.has(this.type)}get itemCdnUrl(){let t=this.itemUrl;return t&&St&&!St.findCredential(t)&&(t=St._normalizeAGOLorgDomain(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=ar.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof m2&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new m2({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:ae(this.applicationProxies),avgRating:this.avgRating,categories:ae(this.categories),created:ae(this.created),culture:this.culture,description:this.description,extent:ae(this.extent),groupCategories:ae(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ae(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ae(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ae(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ae(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new _u({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){var i;const t=this.toJSON();for(const s of["tags","typeKeywords","categories"])t[s]=(i=t[s])==null?void 0:i.join(", ");const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await Gr(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return Gr(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await Gr(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new m2(e)):null}fetchRelatedItems(t,e){return Gr(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},_u)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return Gr(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>Gr(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new oe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new oe("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await Gr(e).signIn();const{copyResources:s,folder:a,tags:d,title:y}=t||{},g={method:"post",query:{copyPrivateResources:s==="all",folder:typeof a=="string"?a:a==null?void 0:a.id,includeResources:!!s,tags:d==null?void 0:d.join(","),title:y}},{itemId:_}=await e.request(`${i}/copy`,g);return new _u({id:_,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,s={method:"post"};if(typeof e=="string")Vh(e)?s.query={data:e}:s.query={url:ns(e)},i!=null&&(s.query.filename=i);else{const a=new FormData;i!=null?a.append("file",e,i):a.append("file",e),s.body=a}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new oe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await _e(()=>import("./resourceUtils-a2699a15.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResource:s}=await _e(()=>import("./resourceUtils-a2699a15.js"),[]);return t.portalItem=this,s(t,"add",e,i)}async removeResource(t,e){const{removeResource:i}=await _e(()=>import("./resourceUtils-a2699a15.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new oe("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await _e(()=>import("./resourceUtils-a2699a15.js"),[]);return e(this,t)}resourceFromPath(t){return new Tz({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:ae(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ae(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ae(this.typeKeywords),url:this.url};return R$(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new _u({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};b([S({type:["private","shared","org","public"]})],Qe.prototype,"access",void 0),b([S()],Qe.prototype,"accessInformation",void 0),b([S({type:String})],Qe.prototype,"apiKey",void 0),b([S({json:{read:{source:"appProxies"}}})],Qe.prototype,"applicationProxies",void 0),b([S()],Qe.prototype,"avgRating",void 0),b([S()],Qe.prototype,"categories",void 0),b([S({type:Date})],Qe.prototype,"created",void 0),b([S()],Qe.prototype,"culture",void 0),b([S()],Qe.prototype,"description",void 0),b([S({readOnly:!0})],Qe.prototype,"displayName",null),b([S({type:bt})],Qe.prototype,"extent",void 0),b([Ce("extent")],Qe.prototype,"readExtent",null),b([S()],Qe.prototype,"groupCategories",void 0),b([S({readOnly:!0})],Qe.prototype,"iconUrl",null),b([S()],Qe.prototype,"id",void 0),b([S({readOnly:!0})],Qe.prototype,"isLayer",null),b([S({type:Boolean,readOnly:!0})],Qe.prototype,"isOrgItem",void 0),b([S()],Qe.prototype,"itemControl",void 0),b([S({readOnly:!0})],Qe.prototype,"itemPageUrl",null),b([S({readOnly:!0})],Qe.prototype,"itemUrl",null),b([S()],Qe.prototype,"licenseInfo",void 0),b([S({type:Date})],Qe.prototype,"modified",void 0),b([S()],Qe.prototype,"name",void 0),b([S()],Qe.prototype,"numComments",void 0),b([S()],Qe.prototype,"numRatings",void 0),b([S()],Qe.prototype,"numViews",void 0),b([S()],Qe.prototype,"owner",void 0),b([S()],Qe.prototype,"ownerFolder",void 0),b([S({type:ar})],Qe.prototype,"portal",void 0),b([S()],Qe.prototype,"screenshots",void 0),b([S()],Qe.prototype,"size",void 0),b([S()],Qe.prototype,"snippet",void 0),b([S()],Qe.prototype,"sourceJSON",void 0),b([S({type:String})],Qe.prototype,"sourceUrl",void 0),b([S({type:String})],Qe.prototype,"spatialReference",void 0),b([S()],Qe.prototype,"tags",void 0),b([S()],Qe.prototype,"thumbnail",void 0),b([S({readOnly:!0})],Qe.prototype,"thumbnailUrl",null),b([S()],Qe.prototype,"title",void 0),b([S()],Qe.prototype,"type",void 0),b([S()],Qe.prototype,"typeKeywords",void 0),b([S({type:String,json:{read(t,e){var i;if(Iz.has(e.type)){const s=(i=this.portal)==null?void 0:i.restUrl;t||(t=s&&this.id?`${s}/content/items/${this.id}/data`:null)}return t}}})],Qe.prototype,"url",void 0),b([S({readOnly:!0})],Qe.prototype,"userItemUrl",null),Qe=_u=b([J("esri.portal.PortalItem")],Qe);const $d=Qe,_M=Object.freeze(Object.defineProperty({__proto__:null,default:$d},Symbol.toStringTag,{value:"Module"})),uS=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Ez={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function hS(t){return t in Ez}const S0=[],tp=new Map;function cS(t){for(const e of tp.keys())SM(t.pattern,e)&&tp.delete(e)}function Az(t){return S0.includes(t)||(cS(t),S0.unshift(t)),{remove(){const e=S0.indexOf(t);e>-1&&(S0.splice(e,1),cS(t))}}}async function T5(t){const e=En();tp.has(t)||tp.set(t,Oz(t,e));const i=tp.get(t);return i&&await Cz.add(i),i}function kz(t){if(!uS.test(t))return null;const e=uS.exec(t);if(e===null)return null;const[,i,s]=e,a=i+(s?"-"+s.toUpperCase():"");return hS(a)?a:hS(i)?i:null}async function Oz(t,e){const i=[];for(const s of S0)if(SM(s.pattern,t))try{return await s.fetchMessageBundle(t,e)}catch(a){i.push(a)}throw i.length?new oe("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new oe("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function SM(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}x5(()=>{tp.clear()});const Cz=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=On())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Pz(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await T5("esri/t9n/basemaps");return i[t]||i[e]}const dw={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return It("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return It("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return It("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return It("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return It("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return It("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return It("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return It("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return It("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return It("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return It("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return It("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function A0e(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}const k0e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function xM(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function M5(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function O0e(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}function Nz(t){const e=/[:;]/,i=[];let s=!1;if(t&&(t.forEach((a,d)=>{i.push([d,a]),!s&&e.test(a)&&(s=!0)}),i.length>0)){let a;if(s){const d={};i.forEach(y=>{d[y[0]]=y[1]}),a=JSON.stringify(d)}else{const d=[];i.forEach(y=>{d.push(y[0]+":"+y[1])}),a=d.join(";")}return a}return null}async function Lz(t,e){const i=St==null?void 0:St.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const s=t.toLowerCase().indexOf("/rest/services");if(s===-1)return null;const a=`${t.substring(0,s)}/rest/info`,d=e!=null?e.signal:null,{data:y}=await pt(a,{query:{f:"json"},responseType:"json",signal:d});return(y==null?void 0:y.owningSystemUrl)||null}function Rz(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function jz(t){return Rz(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Dz(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Fz(t){return!!Dz(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const zz=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Vz=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Gz(t){return t.layerContainerType==="basemap"?zz:t.layerContainerType==="operational-layers"?Vz:null}function Uz(t,e){if(e.restrictedWebMapWriting){const i=Gz(e);return i==null||i.has(t.type)&&!M5(t)}return!0}function qz(t,e){if(e)if(M5(t)){const i=Tf("featureCollection.layers",e),s=i&&i[0]&&i[0].layerDefinition;s&&pS(t,s)}else t.type!=="group"&&pS(t,e)}function pS(t,e){"maxScale"in t&&(e.maxScale=Vg(t.maxScale)??void 0),"minScale"in t&&(e.minScale=Vg(t.minScale)??void 0)}function Bz(t,e){if(qz(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=Vg(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(M5(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function dS(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new oe("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(Uz(t,i)){const s={};return t.write(s,i)?s:null}return e!=null&&Bz(t,e=ae(e)),e}var _y;let Hz=0;const $M="esri.Basemap";let Ss=_y=class extends Ef(da){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Hz++,this.baseLayers=new Ge,this.referenceLayers=new Ge;const e=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type==="elevation"&&me.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=s=>{s.parent=null};this.addHandles([this.baseLayers.on("after-add",s=>e(s.item)),this.referenceLayers.on("after-add",s=>e(s.item)),this.baseLayers.on("after-remove",s=>i(s.item)),this.referenceLayers.on("after-remove",s=>i(s.item))])}initialize(){this.when().catch(t=>{me.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const t=this.baseLayers.removeAll();for(const s of t)s.destroy();const e=this.referenceLayers.removeAll();for(const s of e)s.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",$h(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const s=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(a=>{const d=dS(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);d!=null&&s.push(d)}),this.referenceLayers.forEach(a=>{const d=dS(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);d!=null&&(a.type!=="scene"&&(d.isReference=!0),s.push(d))})),e.baseMapLayers=s}set referenceLayers(t){this._set("referenceLayers",$h(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return pv(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>Mg(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>Mg(e)?e.clone():e)};return this.loaded&&(t.loadStatus="loaded"),new _y({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=ae(i);return s.url&&go(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&go(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;Xt(t);const s=[];if(e){const a=e.context?e.context.url:null;if(s.push(this._loadLayersFromJSON(e.data,a,t)),e.data.id&&!e.data.title){const d=e.data.id;s.push(Pz(d).then(y=>{y&&this.read({title:y},e.context)}))}}else i&&s.push(this._loadFromItem(i,t));await Promise.all(s)}async _loadLayersFromJSON(t,e,i){const s=this.resourceInfo&&this.resourceInfo.context,a=this.portalItem&&this.portalItem.portal||s&&s.portal||null,d=Jz[(s==null?void 0:s.origin)||""]??"web-map",{populateOperationalLayers:y}=await _e(()=>import("./layersCreator-ffbf62b9.js"),["assets/layersCreator-ffbf62b9.js","assets/lazyLayerLoader-a54f9eeb.js","assets/portalLayers-e6a1ea6c.js","assets/layersLoader-30efc866.js","assets/fetchService-4be12d7c.js","assets/jsonContext-3b060901.js","assets/styleUtils-f9f86ae1.js"]),g=[];if(Xt(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const _={context:{origin:d,url:e,portal:a,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},x=C=>d==="web-scene"&&C.layerType==="ArcGISSceneServiceLayer"||C.isReference,I=y(this.baseLayers,t.baseMapLayers.filter(C=>!x(C)),_);g.push(I);const A=y(this.referenceLayers,t.baseMapLayers.filter(x),_);g.push(A)}await Sn(g)}async _loadFromItem(t,e){const i=await t.load(e),s=await i.fetchData("json",e),a=ur(t.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:Wz[t.type||""]??"web-map",portal:t.portal||ar.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||ar.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,e)}static fromId(t){const e=dw[t];if(!e)return null;if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),Gg(me.getLogger($M),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return _y.fromJSON(e)}};b([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,s){this._writeBaseLayers(t,e,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ge}},writer(t,e,i,s){this._writeBaseLayers(t,e,s)}}}}}})],Ss.prototype,"baseLayers",null),b([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ss.prototype,"id",void 0),b([S({type:$d})],Ss.prototype,"portalItem",void 0),b([S()],Ss.prototype,"referenceLayers",null),b([S({readOnly:!0})],Ss.prototype,"resourceInfo",void 0),b([S({type:Xe})],Ss.prototype,"spatialReference",void 0),b([S()],Ss.prototype,"thumbnailUrl",void 0),b([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ss.prototype,"title",void 0),b([ke("title")],Ss.prototype,"writeTitle",null),Ss=_y=b([J($M)],Ss);const Wz={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Jz={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Yg=Ss,Kz=Object.freeze(Object.defineProperty({__proto__:null,default:Yg},Symbol.toStringTag,{value:"Module"})),Zg={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function TM(t){return!!Zg[t]||!!Zg[t.toLowerCase()]}function I5(t){return Zg[t]??Zg[t.toLowerCase()]}function Yz(t){return[...I5(t)]}function v2(t,e,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?t+(e-t)*s:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function MM(t,e,i,s=1){const a=(t%360+360)%360/360,d=i<=.5?i*(e+1):i+e-i*e,y=2*i-d;return[Math.round(255*v2(y,d,a+1/3)),Math.round(255*v2(y,d,a)),Math.round(255*v2(y,d,a-1/3)),s]}function Zz(t){const e=t.length>5,i=e?8:4,s=(1<<i)-1,a=e?1:17,d=e?t.length===9:t.length===5;let y=Number("0x"+t.substr(1));if(isNaN(y))return null;const g=[0,0,0,1];let _;return d&&(_=y&s,y>>=i,g[3]=a*_/255),_=y&s,y>>=i,g[2]=a*_,_=y&s,y>>=i,g[1]=a*_,_=y&s,y>>=i,g[0]=a*_,g}function Dn(){return[0,0,0]}function Xz(t){return[t[0],t[1],t[2]]}function Af(t,e,i){return[t,e,i]}function Qz(t){const e=Dn(),i=Math.min(3,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function eV(t,e){return new Float64Array(t,e,3)}function IM(){return Dn()}function EM(){return Af(1,1,1)}function AM(){return Af(1,0,0)}function kM(){return Af(0,1,0)}function OM(){return Af(0,0,1)}const tV=IM(),iV=EM(),rV=AM(),sV=kM(),nV=OM();Object.freeze(Object.defineProperty({__proto__:null,ONES:iV,UNIT_X:rV,UNIT_Y:sV,UNIT_Z:nV,ZEROS:tV,clone:Xz,create:Dn,createView:eV,fromArray:Qz,fromValues:Af,ones:EM,unitX:AM,unitY:kM,unitZ:OM,zeros:IM},Symbol.toStringTag,{value:"Module"}));let E5=1e-6;function Vs(){return E5}function oV(t){E5=t}const mv=Math.random,aV=Math.PI/180,lV=180/Math.PI;function A5(t){return t*aV}function uV(t){return t*lV}function hV(t,e){return Math.abs(t-e)<=E5*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:mv,equals:hV,getEpsilon:Vs,setEpsilon:oV,toDegree:uV,toRadian:A5},Symbol.toStringTag,{value:"Module"}));function vv(t){const e=t[0],i=t[1],s=t[2];return Math.sqrt(e*e+i*i+s*s)}function Xg(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function bv(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function CM(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function k5(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function PM(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function NM(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function cV(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function pV(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function dV(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function fV(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function yV(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function gV(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function mV(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function LM(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function vV(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t}function RM(t,e){const i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(i*i+s*s+a*a)}function jM(t,e){const i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2];return i*i+s*s+a*a}function DM(t){const e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s}function bV(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function wV(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Qg(t,e){const i=e[0],s=e[1],a=e[2];let d=i*i+s*s+a*a;return d>0&&(d=1/Math.sqrt(d),t[0]=e[0]*d,t[1]=e[1]*d,t[2]=e[2]*d),t}function FM(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function _V(t,e,i){const s=e[0],a=e[1],d=e[2],y=i[0],g=i[1],_=i[2];return t[0]=a*_-d*g,t[1]=d*y-s*_,t[2]=s*g-a*y,t}function SV(t,e,i,s){const a=e[0],d=e[1],y=e[2];return t[0]=a+s*(i[0]-a),t[1]=d+s*(i[1]-d),t[2]=y+s*(i[2]-y),t}function xV(t,e,i,s,a,d){const y=d*d,g=y*(2*d-3)+1,_=y*(d-2)+d,x=y*(d-1),I=y*(3-2*d);return t[0]=e[0]*g+i[0]*_+s[0]*x+a[0]*I,t[1]=e[1]*g+i[1]*_+s[1]*x+a[1]*I,t[2]=e[2]*g+i[2]*_+s[2]*x+a[2]*I,t}function $V(t,e,i,s,a,d){const y=1-d,g=y*y,_=d*d,x=g*y,I=3*d*g,A=3*_*y,C=_*d;return t[0]=e[0]*x+i[0]*I+s[0]*A+a[0]*C,t[1]=e[1]*x+i[1]*I+s[1]*A+a[1]*C,t[2]=e[2]*x+i[2]*I+s[2]*A+a[2]*C,t}function TV(t,e){e=e||1;const i=mv,s=2*i()*Math.PI,a=2*i()-1,d=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(s)*d,t[1]=Math.sin(s)*d,t[2]=a*e,t}function MV(t,e,i){const s=e[0],a=e[1],d=e[2];return t[0]=i[0]*s+i[4]*a+i[8]*d+i[12],t[1]=i[1]*s+i[5]*a+i[9]*d+i[13],t[2]=i[2]*s+i[6]*a+i[10]*d+i[14],t}function IV(t,e,i){const s=e[0],a=e[1],d=e[2];return t[0]=s*i[0]+a*i[3]+d*i[6],t[1]=s*i[1]+a*i[4]+d*i[7],t[2]=s*i[2]+a*i[5]+d*i[8],t}function EV(t,e,i){const s=i[0],a=i[1],d=i[2],y=i[3],g=e[0],_=e[1],x=e[2];let I=a*x-d*_,A=d*g-s*x,C=s*_-a*g,N=a*C-d*A,j=d*I-s*C,D=s*A-a*I;const V=2*y;return I*=V,A*=V,C*=V,N*=2,j*=2,D*=2,t[0]=g+I+N,t[1]=_+A+j,t[2]=x+C+D,t}function AV(t,e,i,s){const a=[],d=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],d[0]=a[0],d[1]=a[1]*Math.cos(s)-a[2]*Math.sin(s),d[2]=a[1]*Math.sin(s)+a[2]*Math.cos(s),t[0]=d[0]+i[0],t[1]=d[1]+i[1],t[2]=d[2]+i[2],t}function kV(t,e,i,s){const a=[],d=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],d[0]=a[2]*Math.sin(s)+a[0]*Math.cos(s),d[1]=a[1],d[2]=a[2]*Math.cos(s)-a[0]*Math.sin(s),t[0]=d[0]+i[0],t[1]=d[1]+i[1],t[2]=d[2]+i[2],t}function OV(t,e,i,s){const a=[],d=[];return a[0]=e[0]-i[0],a[1]=e[1]-i[1],a[2]=e[2]-i[2],d[0]=a[0]*Math.cos(s)-a[1]*Math.sin(s),d[1]=a[0]*Math.sin(s)+a[1]*Math.cos(s),d[2]=a[2],t[0]=d[0]+i[0],t[1]=d[1]+i[1],t[2]=d[2]+i[2],t}function CV(t,e){Xg(g1,t),Xg(m1,e),Qg(g1,g1),Qg(m1,m1);const i=FM(g1,m1);return i>1?0:i<-1?Math.PI:Math.acos(i)}const g1=Dn(),m1=Dn();function PV(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function NV(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function LV(t,e){if(t===e)return!0;const i=t[0],s=t[1],a=t[2],d=e[0],y=e[1],g=e[2],_=Vs();return Math.abs(i-d)<=_*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-y)<=_*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(a-g)<=_*Math.max(1,Math.abs(a),Math.abs(g))}function RV(t,e,i){const s=i[0]-e[0],a=i[1]-e[1],d=i[2]-e[2];let y=s*s+a*a+d*d;return y>0?(y=1/Math.sqrt(y),t[0]=s*y,t[1]=a*y,t[2]=d*y,t):(t[0]=0,t[1]=0,t[2]=0,t)}const jV=k5,DV=PM,FV=NM,zV=RM,VV=jM,GV=vv,UV=DM;Object.freeze(Object.defineProperty({__proto__:null,abs:dV,add:CM,angle:CV,bezier:$V,ceil:cV,copy:Xg,cross:_V,direction:RV,dist:zV,distance:RM,div:FV,divide:NM,dot:FM,equals:LV,exactEquals:NV,floor:pV,hermite:xV,inverse:wV,len:GV,length:vv,lerp:SV,max:gV,min:yV,mul:DV,multiply:PM,negate:bV,normalize:Qg,random:TV,rotateX:AV,rotateY:kV,rotateZ:OV,round:mV,scale:LM,scaleAndAdd:vV,set:bv,sign:fV,sqrDist:VV,sqrLen:UV,squaredDistance:jM,squaredLength:DM,str:PV,sub:jV,subtract:k5,transformMat3:IV,transformMat4:MV,transformQuat:EV},Symbol.toStringTag,{value:"Module"}));function qV(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function BV(t,e,i,s,a){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t}function HV(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function zM(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function VM(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function GM(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function WV(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function JV(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function KV(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function YV(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function ZV(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function XV(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function QV(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t}function UM(t,e){const i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2],d=e[3]-t[3];return Math.sqrt(i*i+s*s+a*a+d*d)}function qM(t,e){const i=e[0]-t[0],s=e[1]-t[1],a=e[2]-t[2],d=e[3]-t[3];return i*i+s*s+a*a+d*d}function BM(t){const e=t[0],i=t[1],s=t[2],a=t[3];return Math.sqrt(e*e+i*i+s*s+a*a)}function HM(t){const e=t[0],i=t[1],s=t[2],a=t[3];return e*e+i*i+s*s+a*a}function eG(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function tG(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function iG(t,e){const i=e[0],s=e[1],a=e[2],d=e[3];let y=i*i+s*s+a*a+d*d;return y>0&&(y=1/Math.sqrt(y),t[0]=i*y,t[1]=s*y,t[2]=a*y,t[3]=d*y),t}function rG(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function WM(t,e,i,s){const a=e[0],d=e[1],y=e[2],g=e[3];return t[0]=a+s*(i[0]-a),t[1]=d+s*(i[1]-d),t[2]=y+s*(i[2]-y),t[3]=g+s*(i[3]-g),t}function sG(t,e){const i=mv;let s,a,d,y,g,_;e=e||1;do s=2*i()-1,a=2*i()-1,g=s*s+a*a;while(g>=1);do d=2*i()-1,y=2*i()-1,_=d*d+y*y;while(_>=1);const x=Math.sqrt((1-g)/_);return t[0]=e*s,t[1]=e*a,t[2]=e*d*x,t[3]=e*y*x,t}function nG(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3];return t[0]=i[0]*s+i[4]*a+i[8]*d+i[12]*y,t[1]=i[1]*s+i[5]*a+i[9]*d+i[13]*y,t[2]=i[2]*s+i[6]*a+i[10]*d+i[14]*y,t[3]=i[3]*s+i[7]*a+i[11]*d+i[15]*y,t}function oG(t,e,i){const s=e[0],a=e[1],d=e[2],y=i[0],g=i[1],_=i[2],x=i[3],I=x*s+g*d-_*a,A=x*a+_*s-y*d,C=x*d+y*a-g*s,N=-y*s-g*a-_*d;return t[0]=I*x+N*-y+A*-_-C*-g,t[1]=A*x+N*-g+C*-y-I*-_,t[2]=C*x+N*-_+I*-g-A*-y,t[3]=e[3],t}function aG(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function lG(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function uG(t,e){const i=t[0],s=t[1],a=t[2],d=t[3],y=e[0],g=e[1],_=e[2],x=e[3],I=Vs();return Math.abs(i-y)<=I*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-g)<=I*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(a-_)<=I*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(d-x)<=I*Math.max(1,Math.abs(d),Math.abs(x))}const hG=zM,cG=VM,pG=GM,dG=UM,fG=qM,yG=BM,gG=HM;Object.freeze(Object.defineProperty({__proto__:null,add:HV,ceil:WV,copy:qV,dist:dG,distance:UM,div:pG,divide:GM,dot:rG,equals:uG,exactEquals:lG,floor:JV,inverse:tG,len:yG,length:BM,lerp:WM,max:YV,min:KV,mul:cG,multiply:VM,negate:eG,normalize:iG,random:sG,round:ZV,scale:XV,scaleAndAdd:QV,set:BV,sqrDist:fG,sqrLen:gG,squaredDistance:qM,squaredLength:HM,str:aG,sub:hG,subtract:zM,transformMat4:nG,transformQuat:oG},Symbol.toStringTag,{value:"Module"}));const fS=new Float32Array(1);function C0e(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function zs(t,e,i){return Math.min(Math.max(t,e),i)}function P0e(t){return(t&t-1)==0}function N0e(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function L0e(t,e,i){return t+(e-t)*i}function mG(t){return t*Math.PI/180}function JM(t){return 180*t/Math.PI}function R0e(t){return Math.acos(zs(t,-1,1))}function KM(t){return Math.asin(zs(t,-1,1))}function b2(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const em=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function vG(t){return em.setFloat64(0,t),em.getBigInt64(0)}function bG(t){return em.setBigInt64(0,t),em.getFloat64(0)}const w2=BigInt("1000000");wG(1);function wG(t){const e=vG(t=Math.abs(t)),i=bG(e<=w2?w2:e-w2);return Math.abs(t-i)}function j0e(t){return YM(Math.max(-yS,Math.min(t,yS)))}function YM(t){return fS[0]=t,fS[0]}function D0e(t,e){const i=vv(t),s=KM(t[2]/i),a=Math.atan2(t[1]/i,t[0]/i);return bv(e,i,s,a),e}function F0e(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],s=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(b2(e,1)&&b2(i,1)&&b2(s,1))}const yS=YM(34028234663852886e22);function v1(t){return zs(uv(t),0,255)}function b1(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let Sy=class ir{static blendColors(e,i,s,a=new ir){return a.r=Math.round(e.r+(i.r-e.r)*s),a.g=Math.round(e.g+(i.g-e.g)*s),a.b=Math.round(e.b+(i.b-e.b)*s),a.a=e.a+(i.a-e.a)*s,a._sanitize()}static fromRgb(e,i){const s=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(s){const a=s[2].split(/\s*,\s*/),d=s[1];if(d==="rgb"&&a.length===3||d==="rgba"&&a.length===4){const y=a[0];if(y.charAt(y.length-1)==="%"){const g=a.map(_=>2.56*parseFloat(_));return a.length===4&&(g[3]=parseFloat(a[3])),ir.fromArray(g,i)}return ir.fromArray(a.map(g=>parseFloat(g)),i)}if(d==="hsl"&&a.length===3||d==="hsla"&&a.length===4)return ir.fromArray(MM(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100,parseFloat(a[3])),i)}return null}static fromHex(e,i=new ir){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const s=e.length===4?4:8,a=(1<<s)-1;let d=Number("0x"+e.substr(1));return isNaN(d)?null:(["b","g","r"].forEach(y=>{const g=d&a;d>>=s,i[y]=s===4?17*g:g}),i.a=1,i)}static fromArray(e,i=new ir){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const s=TM(e)?I5(e):null;return s&&ir.fromArray(s,i)||ir.fromRgb(e,i)||ir.fromHex(e,i)}static fromJSON(e){return e&&new ir([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return e!=null?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?ir.fromString(e,this):Array.isArray(e)?ir.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof ir||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),s=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${s.length<2?"0"+s:s}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=ir.AlphaMode.ALWAYS){const i=v1(this.r),s=v1(this.g),a=v1(this.b);return e===ir.AlphaMode.ALWAYS||this.a!==1?[i,s,a,v1(255*this.a)]:[i,s,a]}clone(){return new ir(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(b1(this.r,0,255)),this.g=Math.round(b1(this.g,0,255)),this.b=Math.round(b1(this.b,0,255)),this.a=b1(this.a,0,1),this}_set(e,i,s,a){this.r=e,this.g=i,this.b=s,this.a=a}};Sy.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Sy||(Sy={}));const et=Sy;function z0e(t){}function _G(t){return()=>t}function De(t,e={}){const i=t instanceof Nt?t:new Nt(t,e),s={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(s.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(s.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(s.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(s.nonNullable=e.nonNullable),S(s)}var fw;let xy=fw=class extends ye{constructor(t){super(t),this.type="none"}clone(){return new fw({type:this.type})}};b([De({none:"none",stayAbove:"stay-above"})],xy.prototype,"type",void 0),xy=fw=b([J("esri.ground.NavigationConstraint")],xy);function O5(t){const e=uv(100*(1-t));return Math.max(0,Math.min(e,100))}function ef(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var yw;let jo=yw=class extends Ef(da){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ge;const e=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&me.getLogger(this).error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=s=>{s.parent=null};this.addHandles([this.layers.on("after-add",s=>e(s.item)),this.layers.on("after-remove",s=>i(s.item))])}initialize(){this.when().catch(t=>{or(t)||me.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",$h(t,this._get("layers")))}writeLayers(t,e,i,s){const a=[];t&&(s={...s,layerContainerType:"ground"},t.forEach(d=>{if("write"in d){const y={};_G(d)().write(y,s)&&a.push(y)}else s&&s.messages&&s.messages.push(new oe("layer:unsupported",`Layers (${d.title}, ${d.id}) of type '${d.declaredClass}' cannot be persisted in the ground`,{layer:d}))})),e.layers=a}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return pv(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await _e(()=>import("./ElevationQuery-8c003bd2.js"),[]);Xt(e);const s=new i,a=this.layers.filter(gS).toArray();return s.queryAll(a,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await _e(()=>import("./ElevationQuery-8c003bd2.js"),[]);Xt(e);const s=new i,a=this.layers.filter(gS).toArray();return s.createSamplerAll(a,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:ae(this.surfaceColor),navigationConstraint:ae(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new yw({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const s=e&&e.origin||"web-scene",a=e&&e.portal||null,d=e&&e.url||null;return _e(()=>import("./layersCreator-ffbf62b9.js"),["assets/layersCreator-ffbf62b9.js","assets/lazyLayerLoader-a54f9eeb.js","assets/portalLayers-e6a1ea6c.js","assets/layersLoader-30efc866.js","assets/fetchService-4be12d7c.js","assets/jsonContext-3b060901.js","assets/styleUtils-f9f86ae1.js"]).then(({populateOperationalLayers:y})=>{Xt(i);const g=[];if(t.layers&&Array.isArray(t.layers)){const _={context:{origin:s,url:d,portal:a,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};g.push(y(this.layers,t.layers,_))}return Sn(g)}).then(()=>{})}};function SG(t){return t&&"createElevationSampler"in t}function gS(t){return t.type==="elevation"||SG(t)}b([S({json:{read:!1}})],jo.prototype,"layers",null),b([ke("layers")],jo.prototype,"writeLayers",null),b([S({readOnly:!0})],jo.prototype,"resourceInfo",void 0),b([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Pt,read:{reader:ef,source:"transparency"},write:{writer:(t,e)=>{e.transparency=O5(t)},target:"transparency"}}})],jo.prototype,"opacity",void 0),b([S({type:et,json:{type:[Pt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],jo.prototype,"surfaceColor",void 0),b([S({type:xy,json:{write:!0}})],jo.prototype,"navigationConstraint",void 0),jo=yw=b([J("esri.Ground")],jo);const tm=jo;let pc=class extends Ge{constructor(e){super(e),this.getCollections=null}initialize(){this.own(cT(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let i=0;for(const s of e)s!=null&&(i=this._processCollection(i,s));this.splice(i,this.length)}_createNewInstance(e){return new Ge(e)}_processCollection(e,i){if(!i)return e;const s=this.itemFilterFunction??(a=>!!a);for(const a of i)if(a){if(s(a)){const d=this.indexOf(a,e);d>=0?d!==e&&this.reorder(a,e):this.add(a,e),++e}if(this.getChildrenFunction){const d=this.getChildrenFunction(a);if(Array.isArray(d))for(const y of d)e=this._processCollection(e,y);else e=this._processCollection(e,d)}}return e}};b([S()],pc.prototype,"getCollections",void 0),b([S()],pc.prototype,"getChildrenFunction",void 0),b([S()],pc.prototype,"itemFilterFunction",void 0),pc=b([J("esri.core.CollectionFlattener")],pc);const gp=pc,xG=[["binary","application/octet-stream","bin",""]];function gw(t,e){return P5(TG(t,e))}function mw(t,e){return P5(MG(t,e))}function G0e(t,e){return ZM($G(t,e))}function C5(t){return[...xG,...t]}function $G(t,e){return C5(e).find(i=>P5(i)===t)}function TG(t,e){return C5(e).find(i=>ZM(i)===t)}function MG(t,e){const i=t.toLowerCase();return C5(e).find(s=>IG(s).some(a=>i.endsWith(a)))}function P5(t){return t==null?void 0:t[0]}function ZM(t){return t==null?void 0:t[1]}function IG(t){return(t==null?void 0:t[2].split(","))??[]}function U0e(t){var e;return(e=t.tables)==null?void 0:e.find(i=>i.role==="assetMaps")}function EG(t){var e,i;return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&((i=(e=jz(t))==null?void 0:e.operations)!=null&&i.supportsEditing)&&"type"in t)||"editingEnabled"in t&&!Fz(t)||t.type==="scene"&&!AG(t))}function AG(t){const e=t.infoFor3D;if(!e)return!0;const{supportedFormats:i,queryFormats:s}=e,a=gw("model/gltf-binary",i)??mw("glb",i);return a!=null&&s.includes(a)}const mS=me.getLogger("esri.support.basemapUtils");function kG(){return{}}function OG(t){for(const e in t){const i=t[e];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete t[e]}}function CG(t,e){let i;if(typeof t=="string"){if(!(t in dw)){const s=Object.entries(dw).filter(([a,d])=>mt.apiKey&&!d.classic||!mt.apiKey&&d.classic&&!d.deprecated).map(([a])=>`"${a}"`).join(", ");return mS.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`),null}e&&(i=e[t]),i||(i=Yg.fromId(t),e&&(e[t]=i))}else i=ui(Yg,t);return i!=null&&i.destroyed&&(mS.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function PG(t){return new gp({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function _2(t){for(const e of t.values())e==null||e.destroy();t.clear()}const vS={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function NG(t){let e=null;if(typeof t=="string")if(t in vS){const i=vS[t];e=new tm({resourceInfo:{data:{layers:[i]}}})}else me.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=ui(tm,t);return e}function mp(t,e,i=!1){let{hasM:s,hasZ:a}=t;Array.isArray(e)?e.length!==4||s||a?e.length===3&&i&&!s?(a=!0,s=!1):e.length===3&&s&&a&&(s=!1,a=!1):(s=!0,a=!0):(a=!a&&e.hasZ&&(!s||e.hasM),s=!s&&e.hasM&&(!a||e.hasZ)),t.hasZ=a,t.hasM=s}var vw;function bS(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function LG(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Ha=vw=class extends tu{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):LG(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const s=i.points&&i.points[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new bt,i=this.hasZ,s=this.hasM,a=i?3:2,d=t[0],y=bS(Math.min),g=bS(Math.max);let _,x,I,A,[C,N]=d,[j,D]=d;for(let V=0,W=t.length;V<W;V++){const K=t[V],[Y,ee]=K;if(C=y(C,Y),N=y(N,ee),j=g(j,Y),D=g(D,ee),i&&K.length>2){const re=K[2];_=y(_,re),I=g(I,re)}if(s&&K.length>a){const re=K[a];x=y(x,re),A=g(A,re)}}return e.xmin=C,e.ymin=N,e.xmax=j,e.ymax=D,e.spatialReference=this.spatialReference,i?(e.zmin=_,e.zmax=I):(e.zmin=void 0,e.zmax=void 0),s?(e.mmin=x,e.mmax=A):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=ae(this.points)}addPoint(t){return mp(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:ae(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new vw(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=e[2],s=3),this.hasM&&(i.m=e[s]),new Ue(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Ue(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(mp(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};b([S({readOnly:!0})],Ha.prototype,"cache",null),b([S()],Ha.prototype,"extent",null),b([S({type:[[Number]],json:{write:{isRequired:!0}}})],Ha.prototype,"points",void 0),b([ke("points")],Ha.prototype,"writePoints",null),Ha=vw=b([J("esri.geometry.Multipoint")],Ha),Ha.prototype.toJSON.isDefaultToJSON=!0;const Ap=Ha;function q0e(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function RG(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function XM(t,e){const i=e[0]-t[0],s=e[1]-t[1];if(t.length>2&&e.length>2){const a=t[2]-e[2];return Math.sqrt(i*i+s*s+a*a)}return Math.sqrt(i*i+s*s)}function jG(t,e,i){const s=t[0]+i*(e[0]-t[0]),a=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[s,a,t[2]+i*(e[2]-t[2])]:[s,a]}function DG(t,e,i,s){const[a,d]=e,[y,g]=i[s],[_,x]=i[s+1],I=_-y,A=x-g,C=I*I+A*A,N=(a-y)*I+(d-g)*A,j=Math.min(1,Math.max(0,N/C));return t[0]=y+I*j,t[1]=g+A*j,t}function B0e(t,e,i){let s,a,d,y,g=!1,_=1/0;for(i.reset();i.nextPath();)if(i.nextPoint())for(s=i.x,a=i.y;i.nextPoint();)d=i.x,y=i.y,a>e!=y>e&&t<(d-s)*(e-a)/(y-a)+s&&(g=!g),_=Math.min(_,FG(t,e,s,a,d,y)),s=d,a=y;return _===0?0:(g?1:-1)*Math.sqrt(_)}function FG(t,e,i,s,a,d){let y=i,g=s,_=a-y,x=d-g;if(_!==0||x!==0){const I=((t-y)*_+(e-g)*x)/(_*_+x*x);I>1?(y=a,g=d):I>0&&(y+=_*I,g+=x*I)}return _=t-y,x=e-g,_*_+x*x}function QM(t,e){return jG(t,e,.5)}function eI(t,e,i){const s=t.length;let a=0,d=0,y=0;for(let g=0;g<s;g++){const _=t[g],x=t[(g+1)%s];let I=2;a+=_[0]*x[1]-x[0]*_[1],_.length>2&&x.length>2&&i&&(d+=_[0]*x[2]-x[0]*_[2],I=3),_.length>I&&x.length>I&&e&&(y+=_[0]*x[I]-x[0]*_[I])}return a<=0&&d<=0&&y<=0}function zG(t){const e=t.length;return e>2&&Qm(t[0],t[e-1])}function H0e(t){if("rings"in t&&(VG(t),t.rings.length>0&&!eI(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function VG(t){if("rings"in t)for(const e of t.rings)zG(e)||e.push(e[0].slice())}function W0e(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let s=0;s<i;s++)e+=(t[s][0]-t[s+1][0])*(t[s][1]+t[s+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function tI(t){if(!t||t.numPoints<3)return 0;let e,i,s=0;if(t.seekPathStart(),!t.nextPoint())return 0;e=t.x,i=t.y;const a=e,d=i;for(;t.nextPoint();)s+=(e-t.x)*(i+t.y),e=t.x,i=t.y;return s+=(e-a)*(i+d),-.5*s}function J0e(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function GG(t){return t?UG(t.rings,t.hasZ??!1):null}function UG(t,e){if(!t||!t.length)return null;const i=[],s=[],a=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let d=0,y=t.length;d<y;d++){const g=iI(t[d],e,a);g&&s.push(g)}if(s.sort((d,y)=>{let g=d[2]-y[2];return g===0&&e&&(g=d[4]-y[4]),g}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],e&&(i[2]=s[0][3]),(i[0]<a[0]||i[0]>a[1]||i[1]<a[2]||i[1]>a[3]||e&&(i[2]<a[4]||i[2]>a[5]))&&(i.length=0)),!i.length){const d=t[0]&&t[0].length?qG(t[0],e):null;if(!d)return null;i[0]=d[0],i[1]=d[1],e&&d.length>2&&(i[2]=d[2])}return i}function iI(t,e,i){let s=0,a=0,d=0,y=0,g=0;const _=t.length?t[0][0]:0,x=t.length?t[0][1]:0,I=t.length&&e?t[0][2]:0;for(let C=0;C<t.length;C++){const N=t[C],j=t[(C+1)%t.length],[D,V,W]=N,K=D-_,Y=V-x,[ee,re,se]=j,ue=ee-_,de=re-x,we=K*de-ue*Y;if(y+=we,s+=(K+ue)*we,a+=(Y+de)*we,e&&N.length>2&&j.length>2){const Oe=W-I,Ne=se-I,Le=K*Ne-ue*Oe;d+=(Oe+Ne)*Le,g+=Le}D<i[0]&&(i[0]=D),D>i[1]&&(i[1]=D),V<i[2]&&(i[2]=V),V>i[3]&&(i[3]=V),e&&(W<i[4]&&(i[4]=W),W>i[5]&&(i[5]=W))}if(y>0&&(y*=-1),g>0&&(g*=-1),!y)return null;y*=.5,g*=.5;const A=[s/(6*y)+_,a/(6*y)+x,y];return e&&(i[4]===i[5]||g===0?(A[3]=(i[4]+i[5])/2,A[4]=0):(A[3]=d/(6*g)+I,A[4]=g)),A}function qG(t,e){const i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let a=0,d=0,y=0,g=0;for(let _=0,x=t.length;_<x-1;_++){const I=t[_],A=t[_+1];if(I&&A){i[0]=I[0],i[1]=I[1],s[0]=A[0],s[1]=A[1],e&&I.length>2&&A.length>2&&(i[2]=I[2],s[2]=A[2]);const C=XM(i,s);if(C){a+=C;const N=QM(I,A);d+=C*N[0],y+=C*N[1],e&&N.length>2&&(g+=C*N[2])}}}return a>0?e?[d/a,y/a,g/a]:[d/a,y/a]:t.length?t[0]:null}function BG(t){const{hasZ:e,numPaths:i}=t;if(i===0)return null;const s=[],a=[],d=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const y=iI(RG(t),t.hasZ,d);y&&a.push(y)}if(a.sort((y,g)=>{let _=y[2]-g[2];return _===0&&e&&(_=y[4]-g[4]),_}),a.length&&(s[0]=a[0][0],s[1]=a[0][1],e&&(s[2]=a[0][3]),(s[0]<d[0]||s[0]>d[1]||s[1]<d[2]||s[1]>d[3]||e&&(s[2]<d[4]||s[2]>d[5]))&&(s.length=0)),!s.length){t.reset(),t.nextPath();const y=t.numPoints?HG(t):null;if(!y)return null;s[0]=y[0],s[1]=y[1],e&&y.length>2&&(s[2]=y[2])}return s}function HG(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],s=e?[0,0,0]:[0,0];let a=0,d=0,y=0,g=0;if(t.nextPoint()){let _=t.x,x=t.y,I=t.z;for(;t.nextPoint();){const A=t.x,C=t.y,N=t.z;i[0]=_,i[1]=x,s[0]=A,s[1]=C,e&&(i[2]=I,s[2]=N);const j=XM(i,s);if(j){a+=j;const D=QM(i,s);d+=j*D[0],y+=j*D[1],e&&D.length>2&&(g+=j*D[2])}_=A,x=C,I=N}}return a>0?e?[d/a,y/a,g/a]:[d/a,y/a]:t.numPoints?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const WG=1e-6;function K0e(t){let e=0;for(t.reset();t.nextPath();)e+=tI(t);if(e<WG){const a=BG(t);return a?[a[0],a[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const s=[t.x,t.y];for(t.reset();t.nextPath();)KG(i,s,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=s[0],i[1]+=s[1],i}const JG=1/3;function KG(t,e,i){if(!t||!i||i.numPoints<3)return null;i.nextPoint();const s=i.x,a=i.y;i.nextPoint();let d,y=i.x-s,g=i.y-a,_=0,x=0;for(;i.nextPoint();)_=i.x-s,x=i.y-a,d=.5*JG*(_*g-x*y),t[0]+=d*(y+_),t[1]+=d*(g+x),y=_,g=x;const I=tI(i),A=[s,a];return A[0]-=e[0],A[1]-=e[1],A[0]*=I,A[1]*=I,t[0]+=A[0],t[1]+=A[1],t}function mo(t=eU){return[t[0],t[1],t[2],t[3]]}function Y0e(t){return[t[0],t[1],t[2],t[3]]}function N5(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function YG(t,e,i,s,a=mo()){return a[0]=t,a[1]=e,a[2]=i,a[3]=s,a}function Z0e(t,e=mo()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function X0e(t,e){return new bt({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function Q0e(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ede(t,e,i){if(e!=null)if("length"in e)bw(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else N5(i,t)}function ZG(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function XG(t){return t[1]>=t[3]?0:t[3]-t[1]}function tde(t){return ZG(t)*XG(t)}function ide(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function rde(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function sde(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function QG(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function nde(t){return t?N5(t,wS):mo(wS)}function bw(t){return t!=null&&t.length===4}function ode(t,e){return bw(t)&&bw(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const wS=[1/0,1/0,-1/0,-1/0],eU=[0,0,0,0];function rI(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function sI(t){return t.points!==void 0}function nI(t){return t.x!==void 0&&t.y!==void 0}function oI(t){return t.paths!==void 0}function aI(t){return t.rings!==void 0}function lI(t){function e(i,s){return i==null?s:s==null?i:t(i,s)}return e}const Ol=lI(Math.min),Cl=lI(Math.max);function ade(t,e){return oI(e)?vp(t,e.paths,!1,!1):aI(e)?vp(t,e.rings,!1,!1):sI(e)?L5(t,e.points,!1,!1,!1,!1):rI(e)?uI(t,e):(nI(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function lde(t){let e,i,s,a;for(t.reset(),e=s=1/0,i=a=-1/0;t.nextPath();){const d=tU(t);e=Math.min(d[0],e),s=Math.min(d[1],s),i=Math.max(d[2],i),a=Math.max(d[3],a)}return mo([e,s,i,a])}function tU(t){let e,i,s,a;for(e=s=1/0,i=a=-1/0;t.nextPoint();)e=Math.min(t.x,e),s=Math.min(t.y,s),i=Math.max(t.x,i),a=Math.max(t.y,a);return mo([e,s,i,a])}function ude(t,e){return oI(e)?vp(t,e.paths,!0,!1):aI(e)?vp(t,e.rings,!0,!1):sI(e)?L5(t,e.points,!0,!1,!0,!1):rI(e)?uI(t,e,!0,!1,!0,!1):(nI(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function vp(t,e,i,s){const a=i?3:2;if(!e.length||!e[0].length)return null;let d,y,g,_,[x,I]=e[0][0],[A,C]=e[0][0];for(let N=0;N<e.length;N++){const j=e[N];for(let D=0;D<j.length;D++){const V=j[D],[W,K]=V;if(x=Ol(x,W),I=Ol(I,K),A=Cl(A,W),C=Cl(C,K),i&&V.length>2){const Y=V[2];d=Ol(d,Y),y=Cl(y,Y)}if(s&&V.length>a){const Y=V[a];g=Ol(d,Y),_=Cl(y,Y)}}}return i?s?(t[0]=x,t[1]=I,t[2]=d,t[3]=g,t[4]=A,t[5]=C,t[6]=y,t[7]=_,t.length=8,t):(t[0]=x,t[1]=I,t[2]=d,t[3]=A,t[4]=C,t[5]=y,t.length=6,t):s?(t[0]=x,t[1]=I,t[2]=g,t[3]=A,t[4]=C,t[5]=_,t.length=6,t):(t[0]=x,t[1]=I,t[2]=A,t[3]=C,t.length=4,t)}function uI(t,e,i,s,a,d){const y=e.xmin,g=e.xmax,_=e.ymin,x=e.ymax;let I=e.zmin,A=e.zmax,C=e.mmin,N=e.mmax;return a?(I=I||0,A=A||0,d?(C=C||0,N=N||0,t[0]=y,t[1]=_,t[2]=I,t[3]=C,t[4]=g,t[5]=x,t[6]=A,t[7]=N,t):(t[0]=y,t[1]=_,t[2]=I,t[3]=g,t[4]=x,t[5]=A,t)):d?(C=C||0,N=N||0,t[0]=y,t[1]=_,t[2]=C,t[3]=g,t[4]=x,t[5]=N,t):(t[0]=y,t[1]=_,t[2]=g,t[3]=x,t)}function L5(t,e,i,s,a,d){const y=i?3:2,g=s&&d,_=i&&a;if(!e.length||!e[0].length)return null;let x,I,A,C,[N,j]=e[0],[D,V]=e[0];for(let W=0;W<e.length;W++){const K=e[W],[Y,ee]=K;if(N=Ol(N,Y),j=Ol(j,ee),D=Cl(D,Y),V=Cl(V,ee),_&&K.length>2){const re=K[2];x=Ol(x,re),I=Cl(I,re)}if(g&&K.length>y){const re=K[y];A=Ol(x,re),C=Cl(I,re)}}return a?(x=x||0,I=I||0,d?(A=A||0,C=C||0,t[0]=N,t[1]=j,t[2]=x,t[3]=A,t[4]=D,t[5]=V,t[6]=I,t[7]=C,t):(t[0]=N,t[1]=j,t[2]=x,t[3]=D,t[4]=V,t[5]=I,t)):d?(A=A||0,C=C||0,t[0]=N,t[1]=j,t[2]=A,t[3]=D,t[4]=V,t[5]=C,t):(t[0]=N,t[1]=j,t[2]=D,t[3]=V,t)}function iU(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function rU(t){return t.points!==void 0}function sU(t){return t.x!==void 0&&t.y!==void 0}function nU(t){return t.paths!==void 0}function oU(t){return t.rings!==void 0}const R5=[];function hI(t,e,i,s){return{xmin:t,ymin:e,xmax:i,ymax:s}}function cI(t,e,i,s,a,d){return{xmin:t,ymin:e,zmin:i,xmax:s,ymax:a,zmax:d}}function pI(t,e,i,s,a,d){return{xmin:t,ymin:e,mmin:i,xmax:s,ymax:a,mmax:d}}function dI(t,e,i,s,a,d,y,g){return{xmin:t,ymin:e,zmin:i,mmin:s,xmax:a,ymax:d,zmax:y,mmax:g}}function j5(t,e=!1,i=!1){return e?i?dI(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):cI(t[0],t[1],t[2],t[3],t[4],t[5]):i?pI(t[0],t[1],t[2],t[3],t[4],t[5]):hI(t[0],t[1],t[2],t[3])}function hde(t){return t?iU(t)?t:sU(t)?lU(t):oU(t)?fI(t):nU(t)?yI(t):rU(t)?aU(t):null:null}function aU(t){const{hasZ:e,hasM:i,points:s}=t;return j5(L5(R5,s,e??!1,i??!1),e,i)}function lU(t){const{x:e,y:i,z:s,m:a}=t,d=a!=null;return s!=null?d?dI(e,i,s,a,e,i,s,a):cI(e,i,s,e,i,s):d?pI(e,i,a,e,i,a):hI(e,i,e,i)}function fI(t){const{hasZ:e,hasM:i,rings:s}=t,a=vp(R5,s,e??!1,i??!1);return a?j5(a,e,i):null}function yI(t){const{hasZ:e,hasM:i,paths:s}=t,a=vp(R5,s,e??!1,i??!1);return a?j5(a,e,i):null}var $y;function _S(t){return!Array.isArray(t[0])}let Wn=$y=class extends tu{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let s=!1,a=!1;for(const y of e)y.hasZ&&(s=!0),y.hasM&&(a=!0);const d={rings:e.map(y=>{const g=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(s&&y.hasZ){const _=y.zmin+.5*(y.zmax-y.zmin);for(let x=0;x<g.length;x++)g[x].push(_)}if(a&&y.hasM){const _=y.mmin+.5*(y.mmax-y.mmin);for(let x=0;x<g.length;x++)g[x].push(_)}return g}),spatialReference:i};return s&&(d.hasZ=!0),a&&(d.hasM=!0),new $y(d)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,s,a=null,d=null;return t&&!Array.isArray(t)?(a=t.rings??null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,s=t.hasM):a=t,a=a||[],e=e||Xe.WGS84,a.length&&a[0]&&a[0][0]!=null&&typeof a[0][0]=="number"&&(a=[a]),d=a[0]&&a[0][0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=d.length>3):i===void 0?i=s?d.length>3:d.length>2:s===void 0&&(s=i?d.length>3:d.length>2)),{rings:a,spatialReference:e,hasZ:i,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=GG(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Ue;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=fI(this);if(!e)return null;const i=new bt(e);return i.spatialReference=t,i}get isSelfIntersecting(){return pz(this.rings)}writeRings(t,e){e.rings=ae(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(_S(t)){const s=[];for(let a=0,d=t.length;a<d;a++)s[a]=t[a].toArray();e[i]=s}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new $y;return t.spatialReference=this.spatialReference,t.rings=ae(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const s=([a,d,y,g],[_,x,I,A])=>a===_&&d===x&&(y==null&&I==null||y===I)&&(g==null&&A==null||g===A);for(let a=0;a<this.rings.length;a++){const d=this.rings[a],y=t.rings[a];if(!Qm(d,y,s))return!1}return!0}contains(t){if(!t)return!1;const e=yv(t,this.spatialReference);return gM(this,e??t)}isClockwise(t){let e;return e=_S(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,eI(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],s=this.hasZ,a=this.hasM;return s&&!a?new Ue(i[0],i[1],i[2],void 0,this.spatialReference):a&&!s?new Ue(i[0],i[1],void 0,i[2],this.spatialReference):s&&a?new Ue(i[0],i[1],i[2],i[3],this.spatialReference):new Ue(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(mp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ue(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,s=e.map(a=>new Ue(a,i));return this.notifyChange("rings"),s}setPoint(t,e,i){return this._validateInputs(t,e)?(mp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const s=this.rings[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};b([S({readOnly:!0})],Wn.prototype,"cache",null),b([S({readOnly:!0})],Wn.prototype,"centroid",null),b([S({readOnly:!0})],Wn.prototype,"extent",null),b([S({readOnly:!0})],Wn.prototype,"isSelfIntersecting",null),b([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Wn.prototype,"rings",void 0),b([ke("rings")],Wn.prototype,"writeRings",null),Wn=$y=b([J("esri.geometry.Polygon")],Wn),Wn.prototype.toJSON.isDefaultToJSON=!0;const Pn=Wn;var ww;function uU(t){return!Array.isArray(t[0])}let Wa=ww=class extends tu{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,s,a=null,d=null;return t&&!Array.isArray(t)?(a=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,s=t.hasM):a=t,a=a||[],e=e||Xe.WGS84,a.length&&a[0]&&a[0][0]!=null&&typeof a[0][0]=="number"&&(a=[a]),d=a[0]&&a[0][0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=!1):i===void 0?i=!s&&d.length>3:s===void 0&&(s=!i&&d.length>3)),{paths:a,spatialReference:e,hasZ:i,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=yI(this);if(!e)return null;const i=new bt(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=ae(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(uU(t)){const s=[];for(let a=0,d=t.length;a<d;a++)s[a]=t[a].toArray();e[i]=s}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new ww;return t.spatialReference=this.spatialReference,t.paths=ae(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],s=this.hasZ,a=this.hasM;return s&&!a?new Ue(i[0],i[1],i[2],void 0,this.spatialReference):a&&!s?new Ue(i[0],i[1],void 0,i[2],this.spatialReference):s&&a?new Ue(i[0],i[1],i[2],i[3],this.spatialReference):new Ue(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(mp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,s=e.map(a=>new Ue(a,i));return this.notifyChange("paths"),s}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ue(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(mp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const s=this.paths[t];if(i&&(e<0||e>s.length)||!i&&(e<0||e>=s.length))return!1}return!0}toJSON(t){return this.write({},t)}};b([S({readOnly:!0})],Wa.prototype,"cache",null),b([S({readOnly:!0})],Wa.prototype,"extent",null),b([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],Wa.prototype,"paths",void 0),b([ke("paths")],Wa.prototype,"writePaths",null),Wa=ww=b([J("esri.geometry.Polyline")],Wa),Wa.prototype.toJSON.isDefaultToJSON=!0;const as=Wa,im=$r()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),gI=$r()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function mI(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function D5(t){return t.points!==void 0}function F5(t){return t.x!==void 0&&t.y!==void 0}function z5(t){return t.paths!==void 0}function gh(t){return t.rings!==void 0}function Hl(t){return t==null?null:t instanceof tu?t:F5(t)?Ue.fromJSON(t):z5(t)?as.fromJSON(t):gh(t)?Pn.fromJSON(t):D5(t)?Ap.fromJSON(t):mI(t)?bt.fromJSON(t):null}function Gh(t){return t?F5(t)?"esriGeometryPoint":z5(t)?"esriGeometryPolyline":gh(t)?"esriGeometryPolygon":mI(t)?"esriGeometryEnvelope":D5(t)?"esriGeometryMultipoint":null:null}const hU={esriGeometryPoint:Ue,esriGeometryPolyline:as,esriGeometryPolygon:Pn,esriGeometryEnvelope:bt,esriGeometryMultipoint:Ap};function cU(t){return t&&hU[t]||null}const kp={base:tu,key:"type",typeMap:{extent:bt,multipoint:Ap,point:Ue,polyline:as,polygon:Pn}};pa(kp);let vI=0;const Uh=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+vI++})}};return e=b([J("esri.core.Identifiable")],e),e},V5=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:vI++})}};return e=b([J("esri.core.NumericIdentifiable")],e),e};let SS=class extends Uh(class{}){};SS=b([J("esri.core.Identifiable")],SS);async function pU(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await _e(()=>import("./portalLayers-e6a1ea6c.js"),["assets/portalLayers-e6a1ea6c.js","assets/lazyLayerLoader-a54f9eeb.js","assets/layersLoader-30efc866.js","assets/fetchService-4be12d7c.js","assets/jsonContext-3b060901.js","assets/styleUtils-f9f86ae1.js"]);try{return await i(e)}catch(s){const a=e&&e.portalItem,d=a&&a.id||"unset",y=a&&a.portal&&a.portal.url||mt.portalUrl;throw me.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+d+"')",s),s}}let dU=0,Fi=class extends _a.EventedMixin(Uh(da)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new bt(-180,-90,180,90,Xe.WGS84),this.id=Date.now().toString(16)+"-layer-"+dU++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Xe.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await _e(()=>import("./arcgisLayers-179672ec.js"),["assets/arcgisLayers-179672ec.js","assets/fetchService-4be12d7c.js","assets/lazyLayerLoader-a54f9eeb.js"])).fromUrl(i)}static fromPortalItem(e){return pU(e)}initialize(){this.when().catch(e=>{or(e)||me.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return ur(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await pt(e,{query:{f:"json"},responseType:"json"})).data;throw new oe("layer:no-attribution-data","Layer does not have attribution data")}};b([S({type:String})],Fi.prototype,"attributionDataUrl",void 0),b([S({type:bt})],Fi.prototype,"fullExtent",void 0),b([S({readOnly:!0})],Fi.prototype,"hasAttributionData",null),b([S({type:String,clonable:!1})],Fi.prototype,"id",void 0),b([S({type:Boolean,nonNullable:!0})],Fi.prototype,"legendEnabled",void 0),b([S({type:["show","hide","hide-children"]})],Fi.prototype,"listMode",void 0),b([S({type:Number,range:{min:0,max:1},nonNullable:!0})],Fi.prototype,"opacity",void 0),b([S({clonable:!1})],Fi.prototype,"parent",void 0),b([S({readOnly:!0})],Fi.prototype,"parsedUrl",null),b([S({type:Boolean})],Fi.prototype,"popupEnabled",void 0),b([S({type:Boolean})],Fi.prototype,"attributionVisible",void 0),b([S({type:Xe})],Fi.prototype,"spatialReference",void 0),b([S({type:String})],Fi.prototype,"title",void 0),b([S({readOnly:!0,json:{read:!1}})],Fi.prototype,"type",void 0),b([S()],Fi.prototype,"url",void 0),b([S({type:Boolean,nonNullable:!0})],Fi.prototype,"visible",void 0),Fi=b([J("esri.layers.Layer")],Fi);const G5=Fi;function _w(t,e,i){let s,a;if(t)for(let d=0,y=t.length;d<y;d++){if(s=t.at(d),(s==null?void 0:s[e])===i)return s;if((s==null?void 0:s.type)==="group"&&(a=_w(s.layers,e,i),a))return a}}const fU=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new Ge;const s=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},a=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||me.getLogger(this).error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},d=y=>{y.parent=null,this.layerRemoved(y)};this.addHandles([this.layers.on("before-add",y=>s(y.item)),this.layers.on("after-add",y=>a(y.item)),this.layers.on("after-remove",y=>d(y.item))])}destroy(){const i=this.layers.toArray();for(const s of i)s.destroy();this.layers.destroy()}set layers(i){this._set("layers",$h(i,this._get("layers")))}add(i,s){const a=this.layers;if(s=a.getNextIndex(s),i instanceof G5){const d=i;d.parent===this?this.reorder(d,s):a.add(d,s)}else wa(i)?i.then(d=>{this.destroyed||this.add(d,s)}):me.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const a=this.layers;let d=a.getNextIndex(s);i.slice().forEach(y=>{y.parent!==this?(a.add(y,d),d+=1):this.reorder(y,d)})}findLayerById(i){return _w(this.layers,"id",i)}findLayerByUid(i){return _w(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return b([S()],e.prototype,"layers",null),e=b([J("esri.support.LayersMixin")],e),e};function Sw(t,e,i){if(t)for(let s=0,a=t.length;s<a;s++){const d=t.at(s);if(d[e]===i)return d;if((d==null?void 0:d.type)==="group"){const y=Sw(d.tables,e,i);if(y)return y}}}const yU=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new Ge,this.addHandles([this.tables.on("after-add",s=>{const a=s.item;a.parent&&a.parent!==this&&"tables"in a.parent&&a.parent.tables.remove(a),a.parent=this,a.type!=="feature"&&me.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const i=this.tables.removeAll();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",$h(i,this._get("tables")))}findTableById(i){return Sw(this.tables,"id",i)}findTableByUid(i){return Sw(this.tables,"uid",i)}};return b([S()],e.prototype,"tables",null),e=b([J("esri.support.TablesMixin")],e),e};let Jn=class extends yU(fU(_a.EventedMixin(je))){constructor(e){super(e),this.allLayers=new gp({getCollections:()=>{var i,s,a;return[(i=this.basemap)==null?void 0:i.baseLayers,(s=this.ground)==null?void 0:s.layers,this.layers,(a=this.basemap)==null?void 0:a.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=PG(this),this.basemap=null,this.editableLayers=new gp({getCollections:()=>[this.allLayers],itemFilterFunction:EG}),this.ground=new tm,this._basemapCache=kG()}destroy(){var e,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(i=this.basemap)==null||i.destroy(),OG(this._basemapCache),this._basemapCache=null}castBasemap(e){return CG(e,this._basemapCache)}castGround(e){return NG(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};b([S({readOnly:!0,dependsOn:[]})],Jn.prototype,"allLayers",void 0),b([S({readOnly:!0})],Jn.prototype,"allTables",void 0),b([S({type:Yg})],Jn.prototype,"basemap",void 0),b([Ft("basemap")],Jn.prototype,"castBasemap",null),b([S({readOnly:!0})],Jn.prototype,"editableLayers",void 0),b([S({type:tm,nonNullable:!0})],Jn.prototype,"ground",void 0),b([Ft("ground")],Jn.prototype,"castGround",null),Jn=b([J("esri.Map")],Jn);const bI=Jn,Ii=t=>{let e=class extends t{clone(){var _;const i=Gr(qi(this),"unable to clone instance of non-accessor class"),s=i.metadatas,a=i.store,d={},y=new Map;for(const x in s){const I=s[x],A=a==null?void 0:a.originOf(x),C=I.clonable;if(I.readOnly||C===!1||A!==Te.USER&&A!==Te.DEFAULTS&&A!==Te.WEB_MAP&&A!==Te.WEB_SCENE)continue;const N=this[x];let j=null;j=typeof C=="function"?C(N):C==="reference"?N:Fb(N),N!=null&&j==null||(A===Te.DEFAULTS?y.set(x,j):d[x]=j)}const g=new(Object.getPrototypeOf(this)).constructor(d);if(y.size){const x=(_=qi(g))==null?void 0:_.store;if(x)for(const[I,A]of y)x.set(I,A,Te.DEFAULTS)}return g}};return e=b([J("esri.core.Clonable")],e),e};let xS=class extends Ii(je){};xS=b([J("esri.core.Clonable")],xS);var bp;function gU(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,s="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||s!=null&&+e>s)return bp.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return bp.INVALID_CODED_VALUE}return null}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(bp||(bp={}));const mU=me.getLogger("esri.support.arcadeOnDemand");let S2;function Ch(){return S2||(S2=(async()=>{const t=await _e(()=>import("./arcadeUtils-4fc1b402.js").then(e=>e.az),["assets/arcadeUtils-4fc1b402.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js","assets/number-1a84fa92.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),S2}const yde=(t,e,i)=>U5.create(t,e,i,null,["$feature"],[]),gde=(t,e,i)=>U5.create(t,e,i,null,["$feature","$view"],[]),vU=(t,e,i,s)=>U5.create(t,e,i,s,["$feature","$view"],[]);let U5=class wI{constructor(e,i,s,a,d,y,g){this.services=null,this.script=e,this.evaluate=a;const _=Array.isArray(y)?y:y.fields;this.fields=_,this._syntaxTree=s,this._arcade=i,this._arcadeFeature=d,this._spatialReference=g,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,s,a,d,y){const{arcade:g,Feature:_,Dictionary:x}=await Ch(),I=Xe.fromJSON(i);let A;try{A=g.parseScript(e,y)}catch(de){return mU.error(new oe("arcade-bad-expression","Failed to parse arcade script",{script:e,error:de})),null}const C=d.reduce((de,we)=>({...de,[we]:null}),{});let N=null;a!=null&&(N=new x(a),N.immutable=!0,C.$config=null);const j=g.scriptUsesGeometryEngine(A),D=j&&g.enableGeometrySupport(),V=g.scriptUsesFeatureSet(A)&&g.enableFeatureSetSupport(),W=g.scriptIsAsync(A),K=W&&g.enableAsyncSupport(),Y={vars:C,spatialReference:I,useAsync:!!K};await Promise.all([D,V,K]);const ee=new Set;await g.loadDependentModules(ee,A,null,W,j);const re=new x;re.immutable=!1,re.setField("scale",0);const se=g.compileScript(A,Y),ue=(de,we)=>("$view"in de&&de.$view&&(re.setField("scale",typeof de.$view=="object"&&"scale"in de.$view?de.$view.scale:void 0),de.$view=re),N&&(de.$config=N),se({vars:de,spatialReference:I,services:we}));return new wI(e,g,A,ue,new _,s,I)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const bU=/^([0-9_])/,wU=/[^a-z0-9_\u0080-\uffff]+/gi;function _U(t){return t==null?null:t.trim().replaceAll(wU,"_").replace(bU,"F$1")||null}const SU=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],xU=["field","normalizationField"];function mde(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if($S(SU,i,e),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)$S(xU,s,e)}}function $S(t,e,i){if(t)for(const s of t){const a=Tf(s,e),d=a&&typeof a!="function"&&i.get(a);d&&zh(s,d.name,e)}}function $U(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const s=e.get(t.startField),a=e.get(t.endField);t.startField=(s==null?void 0:s.name)??null,t.endField=(a==null?void 0:a.name)??null}else{const s=e.get(t.startTimeField),a=e.get(t.endTimeField);t.startTimeField=(s==null?void 0:s.name)??null,t.endTimeField=(a==null?void 0:a.name)??null}}const x2=new Set;function _I(t,e){return t&&e?(x2.clear(),tf(x2,t,e),Array.from(x2).sort()):[]}function tf(t,e,i){var s;if(i)if((s=e==null?void 0:e.fields)!=null&&s.length)if(i.includes("*"))for(const{name:a}of e.fields)t.add(a);else for(const a of i)hs(t,e,a);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const a of i)a!=null&&t.add(a)}}function hs(t,e,i){if(typeof i=="string")if(e){const s=e.get(i);s&&t.add(s.name)}else t.add(i)}function vde(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function Pr(t,e,i){var d;if(!i)return;const{arcadeUtils:s}=await Ch(),a=s.extractFieldNames(i,(d=e==null?void 0:e.fields)==null?void 0:d.map(y=>y.name));for(const y of a)hs(t,e,y)}async function SI(t,e,i){if(i&&i!=="1=1"){const{WhereClause:s}=await _e(()=>import("./WhereClause-c83dcc9b.js").then(d=>d.W),["assets/WhereClause-c83dcc9b.js","assets/executionError-c92d3b85.js"]),a=s.create(i,e);if(!a.isStandardized)throw new oe("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});tf(t,e,a.fieldNames)}}function TU({displayField:t,fields:e}){return t||(e&&e.length?$2(e,"name-or-title")||$2(e,"unique-identifier")||$2(e,"type-or-category")||MU(e):null)}function MU(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function $2(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function bde(t,e){var s;if(!e)return;const i=(s=e.elevationInfo)==null?void 0:s.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function IU(t,e,i){i.onStatisticExpression?Pr(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function wde(t,e,i){if(!e||!i||!("fields"in i))return;const s=[],a=i.popupTemplate;s.push(EU(t,e,a)),i.fields&&s.push(...i.fields.map(async d=>IU(t,e.fieldsIndex,d))),await Promise.all(s)}async function EU(t,e,i){const s=[];i!=null&&i.expressionInfos&&s.push(...i.expressionInfos.map(d=>Pr(t,e.fieldsIndex,d.expression)));const a=i==null?void 0:i.content;if(Array.isArray(a))for(const d of a)d.type==="expression"&&d.expressionInfo&&s.push(Pr(t,e.fieldsIndex,d.expressionInfo.expression));await Promise.all(s)}async function _de(t,e,i){e&&(e.timeInfo&&i!=null&&i.timeExtent&&tf(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&tf(t,e.fieldsIndex,[e.floorInfo.floorField]),i!=null&&i.where!=null&&await SI(t,e.fieldsIndex,i.where))}async function Sde(t,e,i){e&&i&&await Promise.all(i.map(s=>AU(t,e,s)))}async function AU(t,e,i){e&&i&&(i.valueExpression?await Pr(t,e.fieldsIndex,i.valueExpression):i.field&&hs(t,e.fieldsIndex,i.field))}function xde(t){return t?_I(t.fieldsIndex,xI(t)):[]}function kU(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?_I(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}const OU=["oid","global-id","guid"],CU=["oid","global-id"],PU=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function NU(t){const e=new Set;$I(t).forEach(s=>e.add(s)),kU(t).forEach(s=>e.add(s.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(s=>e.add(s.toLowerCase())),Object.values(i.transformFieldRoles).forEach(s=>e.add(s.toLowerCase()))),Array.from(e)}function xI(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:s,editDateField:a,editorField:d}=e;return[i,s,a,d].filter(Boolean)}function $I(t){return xI(t).map(e=>e.toLowerCase())}function LU(t,e){var i;return t.editable&&!OU.includes(t.type)&&!$I(e).includes(((i=t.name)==null?void 0:i.toLowerCase())??"")}function RU(t,e){var s;const i=((s=t.name)==null?void 0:s.toLowerCase())??"";return!((e==null?void 0:e.objectIdField)!=null&&i===e.objectIdField.toLowerCase()||(e==null?void 0:e.globalIdField)!=null&&i===e.globalIdField.toLowerCase()||NU(e).includes(i)||CU.includes(t.type)||PU.some(a=>a.test(i)))}async function $de(t,e){const{labelingInfo:i,fieldsIndex:s}=e;i&&i.length&&await Promise.all(i.map(a=>jU(t,s,a)))}async function jU(t,e,i){if(!i)return;const s=i.getLabelExpression(),a=i.where;if(s.type==="arcade")await Pr(t,e,s.expression);else{const d=s.expression.match(/{[^}]*}/g);d&&d.forEach(y=>{hs(t,e,y.slice(1,-1))})}await SI(t,e,a)}function DU(t){const e=t.defaultValue;return e!==void 0&&II(t,e)?e:t.nullable?null:void 0}function TI(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function FU(t){return t===null||TI(t)}const q5="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function zU(t){return t===null||q5(t)}function MI(t){return t!=null&&typeof t=="string"}function VU(t){return t===null||MI(t)}function GU(){return!0}function II(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?zU:q5;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?FU:TI;break;case"string":case"esriFieldTypeString":i=t.nullable?VU:MI;break;default:i=GU}return arguments.length===1?i:i(e)}const UU=["integer","small-integer","single","double"],qU=new Set([...UU,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),BU=["date","date-only","time-only","timestamp-offset"],HU=new Set([...BU,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function EI(t){return t!=null&&qU.has(t.type)}function Tde(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function Mde(t){return t!=null&&HU.has(t.type)}var rm,sm;function Ide(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Ede(t,e){return t==null||t.nullable&&e===null?null:EI(t)&&!WU(t.type,Number(e))?rm.OUT_OF_RANGE:II(t,e)?t.domain?gU(t.domain,e):null:sm.INVALID_TYPE}function WU(t,e){const i=typeof t=="string"?AI(t):t;if(!i)return!1;const s=i.min,a=i.max;return i.isInteger?q5(e)&&e>=s&&e<=a:e>=s&&e<=a}function AI(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return JU;case"esriFieldTypeInteger":case"integer":return KU;case"esriFieldTypeBigInteger":case"big-integer":return YU;case"esriFieldTypeSingle":case"single":return ZU;case"esriFieldTypeDouble":case"double":return XU}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(rm||(rm={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(sm||(sm={}));const JU={min:-32768,max:32767,isInteger:!0},KU={min:-2147483648,max:2147483647,isInteger:!0},YU={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},ZU={min:-34e37,max:12e37,isInteger:!1},XU={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Ade(t,e,i){switch(t){case bp.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case bp.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case sm.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case rm.OUT_OF_RANGE:{const{min:s,max:a}=AI(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${s} to ${a}`}}}function kde(t,e){return!QU(t,e,null)}function QU(t,e,i){if(!e||!e.attributes||!t){if(i!=null)for(const d of t??[])i.add(d);return!0}const s=e.attributes;let a=!1;for(const d of t)if(!(d in s)){if(a=!0,i==null)break;i.add(d)}return a}function eq(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let Ty=class extends ye{constructor(e){super(e),this.type=null}};b([S({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Ty.prototype,"type",void 0),Ty=b([J("esri.popup.content.Content")],Ty);const iu=Ty;var xw;let Su=xw=class extends iu{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new xw({description:this.description,displayType:this.displayType,title:this.title})}};b([S({type:String,json:{write:!0}})],Su.prototype,"description",void 0),b([S({type:["auto","preview","list"],json:{write:!0}})],Su.prototype,"displayType",void 0),b([S({type:String,json:{write:!0}})],Su.prototype,"title",void 0),b([S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Su.prototype,"type",void 0),Su=xw=b([J("esri.popup.content.AttachmentsContent")],Su);const rf=Su;var $w;let xu=$w=class extends iu{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new $w({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ae(this.outFields):null})}};b([S()],xu.prototype,"creator",void 0),b([S()],xu.prototype,"destroyer",void 0),b([S()],xu.prototype,"outFields",void 0),b([S({type:["custom"],readOnly:!0})],xu.prototype,"type",void 0),xu=$w=b([J("esri.popup.content.CustomContent")],xu);const tq=xu;var Tw;let dc=Tw=class extends ye{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Tw({title:this.title,expression:this.expression})}};b([S({type:String,json:{write:!0}})],dc.prototype,"title",void 0),b([S({type:String,json:{write:!0}})],dc.prototype,"expression",void 0),b([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],dc.prototype,"returnType",void 0),dc=Tw=b([J("esri.popup.ElementExpressionInfo")],dc);const iq=dc;var Mw;let x0=Mw=class extends iu{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new Mw({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};b([S({type:iq,json:{write:!0}})],x0.prototype,"expressionInfo",void 0),b([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],x0.prototype,"type",void 0),x0=Mw=b([J("esri.popup.content.ExpressionContent")],x0);const B5=x0;class qh extends Error{}class rq extends qh{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class sq extends qh{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class nq extends qh{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class $0 extends qh{}class kI extends qh{constructor(e){super(`Invalid unit ${e}`)}}class Ps extends qh{}class Pa extends qh{constructor(){super("Zone is an abstract class")}}const Ee="numeric",Nn="short",cs="long",nm={year:Ee,month:Ee,day:Ee},OI={year:Ee,month:Nn,day:Ee},oq={year:Ee,month:Nn,day:Ee,weekday:Nn},CI={year:Ee,month:cs,day:Ee},PI={year:Ee,month:cs,day:Ee,weekday:cs},NI={hour:Ee,minute:Ee},LI={hour:Ee,minute:Ee,second:Ee},RI={hour:Ee,minute:Ee,second:Ee,timeZoneName:Nn},jI={hour:Ee,minute:Ee,second:Ee,timeZoneName:cs},DI={hour:Ee,minute:Ee,hourCycle:"h23"},FI={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23"},zI={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23",timeZoneName:Nn},VI={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23",timeZoneName:cs},GI={year:Ee,month:Ee,day:Ee,hour:Ee,minute:Ee},UI={year:Ee,month:Ee,day:Ee,hour:Ee,minute:Ee,second:Ee},qI={year:Ee,month:Nn,day:Ee,hour:Ee,minute:Ee},BI={year:Ee,month:Nn,day:Ee,hour:Ee,minute:Ee,second:Ee},aq={year:Ee,month:Nn,day:Ee,weekday:Nn,hour:Ee,minute:Ee},HI={year:Ee,month:cs,day:Ee,hour:Ee,minute:Ee,timeZoneName:Nn},WI={year:Ee,month:cs,day:Ee,hour:Ee,minute:Ee,second:Ee,timeZoneName:Nn},JI={year:Ee,month:cs,day:Ee,weekday:cs,hour:Ee,minute:Ee,timeZoneName:cs},KI={year:Ee,month:cs,day:Ee,weekday:cs,hour:Ee,minute:Ee,second:Ee,timeZoneName:cs};class kf{get type(){throw new Pa}get name(){throw new Pa}get ianaName(){return this.name}get isUniversal(){throw new Pa}offsetName(e,i){throw new Pa}formatOffset(e,i){throw new Pa}offset(e){throw new Pa}equals(e){throw new Pa}get isValid(){throw new Pa}}let T2=null;class wv extends kf{static get instance(){return T2===null&&(T2=new wv),T2}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return ZI(e,i,s)}formatOffset(e,i){return Md(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let My={};function lq(t){return My[t]||(My[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),My[t]}const uq={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function hq(t,e){const i=t.format(e).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,a,d,y,g,_,x,I]=s;return[y,a,d,g,_,x,I]}function cq(t,e){const i=t.formatToParts(e),s=[];for(let a=0;a<i.length;a++){const{type:d,value:y}=i[a],g=uq[d];d==="era"?s[g]=y:_t(g)||(s[g]=parseInt(y,10))}return s}let w1={};class fa extends kf{static create(e){return w1[e]||(w1[e]=new fa(e)),w1[e]}static resetCache(){w1={},My={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=fa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:s}){return ZI(e,i,s,this.name)}formatOffset(e,i){return Md(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const s=lq(this.name);let[a,d,y,g,_,x,I]=s.formatToParts?cq(s,i):hq(s,i);g==="BC"&&(a=-Math.abs(a)+1);const C=J5({year:a,month:d,day:y,hour:_===24?0:_,minute:x,second:I,millisecond:0});let N=+i;const j=N%1e3;return N-=j>=0?j:1e3+j,(C-N)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let TS={};function pq(t,e={}){const i=JSON.stringify([t,e]);let s=TS[i];return s||(s=new Intl.ListFormat(t,e),TS[i]=s),s}let Iw={};function Ew(t,e={}){const i=JSON.stringify([t,e]);let s=Iw[i];return s||(s=new Intl.DateTimeFormat(t,e),Iw[i]=s),s}let Aw={};function dq(t,e={}){const i=JSON.stringify([t,e]);let s=Aw[i];return s||(s=new Intl.NumberFormat(t,e),Aw[i]=s),s}let kw={};function fq(t,e={}){const{base:i,...s}=e,a=JSON.stringify([t,s]);let d=kw[a];return d||(d=new Intl.RelativeTimeFormat(t,e),kw[a]=d),d}let T0=null;function yq(){return T0||(T0=new Intl.DateTimeFormat().resolvedOptions().locale,T0)}function gq(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let s,a;try{s=Ew(t).resolvedOptions(),a=t}catch{const _=t.substring(0,i);s=Ew(_).resolvedOptions(),a=_}const{numberingSystem:d,calendar:y}=s;return[a,d,y]}}function mq(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function vq(t){const e=[];for(let i=1;i<=12;i++){const s=ot.utc(2016,i,1);e.push(t(s))}return e}function bq(t){const e=[];for(let i=1;i<=7;i++){const s=ot.utc(2016,11,13+i);e.push(t(s))}return e}function _1(t,e,i,s,a){const d=t.listingMode(i);return d==="error"?null:d==="en"?s(e):a(e)}function wq(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class _q{constructor(e,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:a,floor:d,...y}=s;if(!i||Object.keys(y).length>0){const g={useGrouping:!1,...s};s.padTo>0&&(g.minimumIntegerDigits=s.padTo),this.inf=dq(e,g)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):W5(e,3);return Ni(i,this.padTo)}}}class Sq{constructor(e,i,s){this.opts=s,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const y=-1*(e.offset/60),g=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;e.offset!==0&&fa.create(g).valid?(a=g,this.dt=e):(a="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,a=e.zone.name):(a="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const d={...this.opts};d.timeZone=d.timeZone||a,this.dtf=Ew(i,d)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:s}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class xq{constructor(e,i,s){this.opts={style:"long",...s},!i&&YI()&&(this.rtf=fq(e,s))}format(e,i){return this.rtf?this.rtf.format(e,i):zq(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class si{static fromOpts(e){return si.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,s,a=!1){const d=e||Pi.defaultLocale,y=d||(a?"en-US":yq()),g=i||Pi.defaultNumberingSystem,_=s||Pi.defaultOutputCalendar;return new si(y,g,_,d)}static resetCache(){T0=null,Iw={},Aw={},kw={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:s}={}){return si.create(e,i,s)}constructor(e,i,s,a){const[d,y,g]=gq(e);this.locale=d,this.numberingSystem=i||y||null,this.outputCalendar=s||g||null,this.intl=mq(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=wq(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:si.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,s=!0){return _1(this,e,s,eE,()=>{const a=i?{month:e,day:"numeric"}:{month:e},d=i?"format":"standalone";return this.monthsCache[d][e]||(this.monthsCache[d][e]=vq(y=>this.extract(y,a,"month"))),this.monthsCache[d][e]})}weekdays(e,i=!1,s=!0){return _1(this,e,s,rE,()=>{const a=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},d=i?"format":"standalone";return this.weekdaysCache[d][e]||(this.weekdaysCache[d][e]=bq(y=>this.extract(y,a,"weekday"))),this.weekdaysCache[d][e]})}meridiems(e=!0){return _1(this,void 0,e,()=>sE,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ot.utc(2016,11,13,9),ot.utc(2016,11,13,19)].map(s=>this.extract(s,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return _1(this,e,i,nE,()=>{const s={era:e};return this.eraCache[e]||(this.eraCache[e]=[ot.utc(-40,1,1),ot.utc(2017,1,1)].map(a=>this.extract(a,s,"era"))),this.eraCache[e]})}extract(e,i,s){const a=this.dtFormatter(e,i),d=a.formatToParts(),y=d.find(g=>g.type.toLowerCase()===s);return y?y.value:null}numberFormatter(e={}){return new _q(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new Sq(e,this.intl,i)}relFormatter(e={}){return new xq(this.intl,this.isEnglish(),e)}listFormatter(e={}){return pq(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let M2=null;class xr extends kf{static get utcInstance(){return M2===null&&(M2=new xr(0)),M2}static instance(e){return e===0?xr.utcInstance:new xr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new xr(Sv(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Md(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Md(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return Md(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class $q extends kf{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Il(t,e){if(_t(t)||t===null)return e;if(t instanceof kf)return t;if(Tq(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?wv.instance:i==="utc"||i==="gmt"?xr.utcInstance:xr.parseSpecifier(i)||fa.create(t)}else return mh(t)?xr.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new $q(t)}let MS=()=>Date.now(),IS="system",ES=null,AS=null,kS=null,OS=60,CS;class Pi{static get now(){return MS}static set now(e){MS=e}static set defaultZone(e){IS=e}static get defaultZone(){return Il(IS,wv.instance)}static get defaultLocale(){return ES}static set defaultLocale(e){ES=e}static get defaultNumberingSystem(){return AS}static set defaultNumberingSystem(e){AS=e}static get defaultOutputCalendar(){return kS}static set defaultOutputCalendar(e){kS=e}static get twoDigitCutoffYear(){return OS}static set twoDigitCutoffYear(e){OS=e%100}static get throwOnInvalid(){return CS}static set throwOnInvalid(e){CS=e}static resetCaches(){si.resetCache(),fa.resetCache()}}function _t(t){return typeof t>"u"}function mh(t){return typeof t=="number"}function _v(t){return typeof t=="number"&&t%1===0}function Tq(t){return typeof t=="string"}function Mq(t){return Object.prototype.toString.call(t)==="[object Date]"}function YI(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Iq(t){return Array.isArray(t)?t:[t]}function PS(t,e,i){if(t.length!==0)return t.reduce((s,a)=>{const d=[e(a),a];return s&&i(s[0],d[0])===s[0]?s:d},null)[1]}function Eq(t,e){return e.reduce((i,s)=>(i[s]=t[s],i),{})}function wp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function na(t,e,i){return _v(t)&&t>=e&&t<=i}function Aq(t,e){return t-e*Math.floor(t/e)}function Ni(t,e=2){const i=t<0;let s;return i?s="-"+(""+-t).padStart(e,"0"):s=(""+t).padStart(e,"0"),s}function bl(t){if(!(_t(t)||t===null||t===""))return parseInt(t,10)}function uu(t){if(!(_t(t)||t===null||t===""))return parseFloat(t)}function H5(t){if(!(_t(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function W5(t,e,i=!1){const s=10**e;return(i?Math.trunc:Math.round)(t*s)/s}function Of(t){return t%4===0&&(t%100!==0||t%400===0)}function Td(t){return Of(t)?366:365}function om(t,e){const i=Aq(e-1,12)+1,s=t+(e-i)/12;return i===2?Of(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function J5(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function am(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,s=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||s===3?53:52}function Ow(t){return t>99?t:t>Pi.twoDigitCutoffYear?1900+t:2e3+t}function ZI(t,e,i,s=null){const a=new Date(t),d={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(d.timeZone=s);const y={timeZoneName:e,...d},g=new Intl.DateTimeFormat(i,y).formatToParts(a).find(_=>_.type.toLowerCase()==="timezonename");return g?g.value:null}function Sv(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const s=parseInt(e,10)||0,a=i<0||Object.is(i,-0)?-s:s;return i*60+a}function XI(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ps(`Invalid unit value ${t}`);return e}function lm(t,e){const i={};for(const s in t)if(wp(t,s)){const a=t[s];if(a==null)continue;i[e(s)]=XI(a)}return i}function Md(t,e){const i=Math.trunc(Math.abs(t/60)),s=Math.trunc(Math.abs(t%60)),a=t>=0?"+":"-";switch(e){case"short":return`${a}${Ni(i,2)}:${Ni(s,2)}`;case"narrow":return`${a}${i}${s>0?`:${s}`:""}`;case"techie":return`${a}${Ni(i,2)}${Ni(s,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function xv(t){return Eq(t,["hour","minute","second","millisecond"])}const kq=["January","February","March","April","May","June","July","August","September","October","November","December"],QI=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Oq=["J","F","M","A","M","J","J","A","S","O","N","D"];function eE(t){switch(t){case"narrow":return[...Oq];case"short":return[...QI];case"long":return[...kq];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const tE=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],iE=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Cq=["M","T","W","T","F","S","S"];function rE(t){switch(t){case"narrow":return[...Cq];case"short":return[...iE];case"long":return[...tE];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const sE=["AM","PM"],Pq=["Before Christ","Anno Domini"],Nq=["BC","AD"],Lq=["B","A"];function nE(t){switch(t){case"narrow":return[...Lq];case"short":return[...Nq];case"long":return[...Pq];default:return null}}function Rq(t){return sE[t.hour<12?0:1]}function jq(t,e){return rE(e)[t.weekday-1]}function Dq(t,e){return eE(e)[t.month-1]}function Fq(t,e){return nE(e)[t.year<0?0:1]}function zq(t,e,i="always",s=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},d=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&d){const A=t==="days";switch(e){case 1:return A?"tomorrow":`next ${a[t][0]}`;case-1:return A?"yesterday":`last ${a[t][0]}`;case 0:return A?"today":`this ${a[t][0]}`}}const y=Object.is(e,-0)||e<0,g=Math.abs(e),_=g===1,x=a[t],I=s?_?x[1]:x[2]||x[1]:_?a[t][0]:t;return y?`${g} ${I} ago`:`in ${g} ${I}`}function NS(t,e){let i="";for(const s of t)s.literal?i+=s.val:i+=e(s.val);return i}const Vq={D:nm,DD:OI,DDD:CI,DDDD:PI,t:NI,tt:LI,ttt:RI,tttt:jI,T:DI,TT:FI,TTT:zI,TTTT:VI,f:GI,ff:qI,fff:HI,ffff:JI,F:UI,FF:BI,FFF:WI,FFFF:KI};class Sr{static create(e,i={}){return new Sr(e,i)}static parseFormat(e){let i=null,s="",a=!1;const d=[];for(let y=0;y<e.length;y++){const g=e.charAt(y);g==="'"?(s.length>0&&d.push({literal:a||/^\s+$/.test(s),val:s}),i=null,s="",a=!a):a||g===i?s+=g:(s.length>0&&d.push({literal:/^\s+$/.test(s),val:s}),s=g,i=g)}return s.length>0&&d.push({literal:a||/^\s+$/.test(s),val:s}),d}static macroTokenToFormatOpts(e){return Vq[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Ni(e,i);const s={...this.opts};return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,i){const s=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",d=(N,j)=>this.loc.extract(e,N,j),y=N=>e.isOffsetFixed&&e.offset===0&&N.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,N.format):"",g=()=>s?Rq(e):d({hour:"numeric",hourCycle:"h12"},"dayperiod"),_=(N,j)=>s?Dq(e,N):d(j?{month:N}:{month:N,day:"numeric"},"month"),x=(N,j)=>s?jq(e,N):d(j?{weekday:N}:{weekday:N,month:"long",day:"numeric"},"weekday"),I=N=>{const j=Sr.macroTokenToFormatOpts(N);return j?this.formatWithSystemDefault(e,j):N},A=N=>s?Fq(e,N):d({era:N},"era"),C=N=>{switch(N){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return g();case"d":return a?d({day:"numeric"},"day"):this.num(e.day);case"dd":return a?d({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return x("short",!0);case"cccc":return x("long",!0);case"ccccc":return x("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return x("short",!1);case"EEEE":return x("long",!1);case"EEEEE":return x("narrow",!1);case"L":return a?d({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return a?d({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return _("short",!0);case"LLLL":return _("long",!0);case"LLLLL":return _("narrow",!0);case"M":return a?d({month:"numeric"},"month"):this.num(e.month);case"MM":return a?d({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return _("short",!1);case"MMMM":return _("long",!1);case"MMMMM":return _("narrow",!1);case"y":return a?d({year:"numeric"},"year"):this.num(e.year);case"yy":return a?d({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return a?d({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return a?d({year:"numeric"},"year"):this.num(e.year,6);case"G":return A("short");case"GG":return A("long");case"GGGGG":return A("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return I(N)}};return NS(Sr.parseFormat(i),C)}formatDurationFromString(e,i){const s=_=>{switch(_[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=_=>x=>{const I=s(x);return I?this.num(_.get(I),x.length):x},d=Sr.parseFormat(i),y=d.reduce((_,{literal:x,val:I})=>x?_:_.concat(I),[]),g=e.shiftTo(...y.map(s).filter(_=>_));return NS(d,a(g))}}class xn{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const oE=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Op(...t){const e=t.reduce((i,s)=>i+s.source,"");return RegExp(`^${e}$`)}function Cp(...t){return e=>t.reduce(([i,s,a],d)=>{const[y,g,_]=d(e,a);return[{...i,...y},g||s,_]},[{},null,1]).slice(0,2)}function Pp(t,...e){if(t==null)return[null,null];for(const[i,s]of e){const a=i.exec(t);if(a)return s(a)}return[null,null]}function aE(...t){return(e,i)=>{const s={};let a;for(a=0;a<t.length;a++)s[t[a]]=bl(e[i+a]);return[s,null,i+a]}}const lE=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Gq=`(?:${lE.source}?(?:\\[(${oE.source})\\])?)?`,K5=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,uE=RegExp(`${K5.source}${Gq}`),Y5=RegExp(`(?:T${uE.source})?`),Uq=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,qq=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Bq=/(\d{4})-?(\d{3})/,Hq=aE("weekYear","weekNumber","weekDay"),Wq=aE("year","ordinal"),Jq=/(\d{4})-(\d\d)-(\d\d)/,hE=RegExp(`${K5.source} ?(?:${lE.source}|(${oE.source}))?`),Kq=RegExp(`(?: ${hE.source})?`);function ip(t,e,i){const s=t[e];return _t(s)?i:bl(s)}function Yq(t,e){return[{year:ip(t,e),month:ip(t,e+1,1),day:ip(t,e+2,1)},null,e+3]}function Np(t,e){return[{hours:ip(t,e,0),minutes:ip(t,e+1,0),seconds:ip(t,e+2,0),milliseconds:H5(t[e+3])},null,e+4]}function Cf(t,e){const i=!t[e]&&!t[e+1],s=Sv(t[e+1],t[e+2]),a=i?null:xr.instance(s);return[{},a,e+3]}function Pf(t,e){const i=t[e]?fa.create(t[e]):null;return[{},i,e+1]}const Zq=RegExp(`^T?${K5.source}$`),Xq=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Qq(t){const[e,i,s,a,d,y,g,_,x]=t,I=e[0]==="-",A=_&&_[0]==="-",C=(N,j=!1)=>N!==void 0&&(j||N&&I)?-N:N;return[{years:C(uu(i)),months:C(uu(s)),weeks:C(uu(a)),days:C(uu(d)),hours:C(uu(y)),minutes:C(uu(g)),seconds:C(uu(_),_==="-0"),milliseconds:C(H5(x),A)}]}const eB={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Z5(t,e,i,s,a,d,y){const g={year:e.length===2?Ow(bl(e)):bl(e),month:QI.indexOf(i)+1,day:bl(s),hour:bl(a),minute:bl(d)};return y&&(g.second=bl(y)),t&&(g.weekday=t.length>3?tE.indexOf(t)+1:iE.indexOf(t)+1),g}const tB=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function iB(t){const[,e,i,s,a,d,y,g,_,x,I,A]=t,C=Z5(e,a,s,i,d,y,g);let N;return _?N=eB[_]:x?N=0:N=Sv(I,A),[C,new xr(N)]}function rB(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const sB=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,nB=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,oB=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function LS(t){const[,e,i,s,a,d,y,g]=t;return[Z5(e,a,s,i,d,y,g),xr.utcInstance]}function aB(t){const[,e,i,s,a,d,y,g]=t;return[Z5(e,g,i,s,a,d,y),xr.utcInstance]}const lB=Op(Uq,Y5),uB=Op(qq,Y5),hB=Op(Bq,Y5),cB=Op(uE),cE=Cp(Yq,Np,Cf,Pf),pB=Cp(Hq,Np,Cf,Pf),dB=Cp(Wq,Np,Cf,Pf),fB=Cp(Np,Cf,Pf);function yB(t){return Pp(t,[lB,cE],[uB,pB],[hB,dB],[cB,fB])}function gB(t){return Pp(rB(t),[tB,iB])}function mB(t){return Pp(t,[sB,LS],[nB,LS],[oB,aB])}function vB(t){return Pp(t,[Xq,Qq])}const bB=Cp(Np);function wB(t){return Pp(t,[Zq,bB])}const _B=Op(Jq,Kq),SB=Op(hE),xB=Cp(Np,Cf,Pf);function $B(t){return Pp(t,[_B,cE],[SB,xB])}const TB="Invalid Duration",pE={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},MB={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...pE},gs=146097/400,tc=146097/4800,IB={years:{quarters:4,months:12,weeks:gs/7,days:gs,hours:gs*24,minutes:gs*24*60,seconds:gs*24*60*60,milliseconds:gs*24*60*60*1e3},quarters:{months:3,weeks:gs/28,days:gs/4,hours:gs*24/4,minutes:gs*24*60/4,seconds:gs*24*60*60/4,milliseconds:gs*24*60*60*1e3/4},months:{weeks:tc/7,days:tc,hours:tc*24,minutes:tc*24*60,seconds:tc*24*60*60,milliseconds:tc*24*60*60*1e3},...pE},$u=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],EB=$u.slice(0).reverse();function Na(t,e,i=!1){const s={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Et(s)}function AB(t){return t<0?Math.floor(t):Math.ceil(t)}function dE(t,e,i,s,a){const d=t[a][i],y=e[i]/d,g=Math.sign(y)===Math.sign(s[a]),_=!g&&s[a]!==0&&Math.abs(y)<=1?AB(y):Math.trunc(y);s[a]+=_,e[i]-=_*d}function kB(t,e){EB.reduce((i,s)=>_t(e[s])?i:(i&&dE(t,e,i,e,s),s),null)}function OB(t){const e={};for(const[i,s]of Object.entries(t))s!==0&&(e[i]=s);return e}class Et{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let s=i?IB:MB;e.matrix&&(s=e.matrix),this.values=e.values,this.loc=e.loc||si.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(e,i){return Et.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Ps(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Et({values:lm(e,Et.normalizeUnit),loc:si.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(mh(e))return Et.fromMillis(e);if(Et.isDuration(e))return e;if(typeof e=="object")return Et.fromObject(e);throw new Ps(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[s]=vB(e);return s?Et.fromObject(s,i):Et.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[s]=wB(e);return s?Et.fromObject(s,i):Et.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Ps("need to specify a reason the Duration is invalid");const s=e instanceof xn?e:new xn(e,i);if(Pi.throwOnInvalid)throw new nq(s);return new Et({invalid:s})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new kI(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const s={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Sr.create(this.loc,s).formatDurationFromString(this,e):TB}toHuman(e={}){const i=$u.map(s=>{const a=this.values[s];return _t(a)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(a)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=W5(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const s=this.shiftTo("hours","minutes","seconds","milliseconds");let a=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||s.seconds!==0||s.milliseconds!==0)&&(a+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||s.milliseconds!==0)&&(a+=".SSS"));let d=s.toFormat(a);return e.includePrefix&&(d="T"+d),d}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Et.fromDurationLike(e),s={};for(const a of $u)(wp(i.values,a)||wp(this.values,a))&&(s[a]=i.get(a)+this.get(a));return Na(this,{values:s},!0)}minus(e){if(!this.isValid)return this;const i=Et.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=XI(e(this.values[s],s));return Na(this,{values:i},!0)}get(e){return this[Et.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...lm(e,Et.normalizeUnit)};return Na(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:s,matrix:a}={}){const y={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:a,conversionAccuracy:s};return Na(this,y)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return kB(this.matrix,e),Na(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=OB(this.normalize().shiftToAll().toObject());return Na(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(y=>Et.normalizeUnit(y));const i={},s={},a=this.toObject();let d;for(const y of $u)if(e.indexOf(y)>=0){d=y;let g=0;for(const x in s)g+=this.matrix[x][y]*s[x],s[x]=0;mh(a[y])&&(g+=a[y]);const _=Math.trunc(g);i[y]=_,s[y]=(g*1e3-_*1e3)/1e3;for(const x in a)$u.indexOf(x)>$u.indexOf(y)&&dE(this.matrix,a,x,i,y)}else mh(a[y])&&(s[y]=a[y]);for(const y in s)s[y]!==0&&(i[d]+=y===d?s[y]:s[y]/this.matrix[d][y]);return Na(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Na(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(s,a){return s===void 0||s===0?a===void 0||a===0:s===a}for(const s of $u)if(!i(this.values[s],e.values[s]))return!1;return!0}}const ic="Invalid Interval";function CB(t,e){return!t||!t.isValid?xi.invalid("missing or invalid start"):!e||!e.isValid?xi.invalid("missing or invalid end"):e<t?xi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class xi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Ps("need to specify a reason the Interval is invalid");const s=e instanceof xn?e:new xn(e,i);if(Pi.throwOnInvalid)throw new sq(s);return new xi({invalid:s})}static fromDateTimes(e,i){const s=t0(e),a=t0(i),d=CB(s,a);return d??new xi({start:s,end:a})}static after(e,i){const s=Et.fromDurationLike(i),a=t0(e);return xi.fromDateTimes(a,a.plus(s))}static before(e,i){const s=Et.fromDurationLike(i),a=t0(e);return xi.fromDateTimes(a.minus(s),a)}static fromISO(e,i){const[s,a]=(e||"").split("/",2);if(s&&a){let d,y;try{d=ot.fromISO(s,i),y=d.isValid}catch{y=!1}let g,_;try{g=ot.fromISO(a,i),_=g.isValid}catch{_=!1}if(y&&_)return xi.fromDateTimes(d,g);if(y){const x=Et.fromISO(a,i);if(x.isValid)return xi.after(d,x)}else if(_){const x=Et.fromISO(s,i);if(x.isValid)return xi.before(g,x)}}return xi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),s=this.end.startOf(e);return Math.floor(s.diff(i,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?xi.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(t0).filter(y=>this.contains(y)).sort(),s=[];let{s:a}=this,d=0;for(;a<this.e;){const y=i[d]||this.e,g=+y>+this.e?this.e:y;s.push(xi.fromDateTimes(a,g)),a=g,d+=1}return s}splitBy(e){const i=Et.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,a=1,d;const y=[];for(;s<this.e;){const g=this.start.plus(i.mapUnits(_=>_*a));d=+g>+this.e?this.e:g,y.push(xi.fromDateTimes(s,d)),s=d,a+=1}return y}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,s=this.e<e.e?this.e:e.e;return i>=s?null:xi.fromDateTimes(i,s)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,s=this.e>e.e?this.e:e.e;return xi.fromDateTimes(i,s)}static merge(e){const[i,s]=e.sort((a,d)=>a.s-d.s).reduce(([a,d],y)=>d?d.overlaps(y)||d.abutsStart(y)?[a,d.union(y)]:[a.concat([d]),y]:[a,y],[[],null]);return s&&i.push(s),i}static xor(e){let i=null,s=0;const a=[],d=e.map(_=>[{time:_.s,type:"s"},{time:_.e,type:"e"}]),y=Array.prototype.concat(...d),g=y.sort((_,x)=>_.time-x.time);for(const _ of g)s+=_.type==="s"?1:-1,s===1?i=_.time:(i&&+i!=+_.time&&a.push(xi.fromDateTimes(i,_.time)),i=null);return xi.merge(a)}difference(...e){return xi.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:ic}toLocaleString(e=nm,i={}){return this.isValid?Sr.create(this.s.loc.clone(i),e).formatInterval(this):ic}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ic}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ic}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ic}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:ic}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Et.invalid(this.invalidReason)}mapEndpoints(e){return xi.fromDateTimes(e(this.s),e(this.e))}}class S1{static hasDST(e=Pi.defaultZone){const i=ot.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return fa.isValidZone(e)}static normalizeZone(e){return Il(e,Pi.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:s=null,locObj:a=null,outputCalendar:d="gregory"}={}){return(a||si.create(i,s,d)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:a=null,outputCalendar:d="gregory"}={}){return(a||si.create(i,s,d)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:s=null,locObj:a=null}={}){return(a||si.create(i,s,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:s=null,locObj:a=null}={}){return(a||si.create(i,s,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return si.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return si.create(i,null,"gregory").eras(e)}static features(){return{relative:YI()}}}function RS(t,e){const i=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(e)-i(t);return Math.floor(Et.fromMillis(s).as("days"))}function PB(t,e,i){const s=[["years",(_,x)=>x.year-_.year],["quarters",(_,x)=>x.quarter-_.quarter+(x.year-_.year)*4],["months",(_,x)=>x.month-_.month+(x.year-_.year)*12],["weeks",(_,x)=>{const I=RS(_,x);return(I-I%7)/7}],["days",RS]],a={},d=t;let y,g;for(const[_,x]of s)i.indexOf(_)>=0&&(y=_,a[_]=x(t,e),g=d.plus(a),g>e?(a[_]--,t=d.plus(a)):t=g);return[t,a,g,y]}function NB(t,e,i,s){let[a,d,y,g]=PB(t,e,i);const _=e-a,x=i.filter(A=>["hours","minutes","seconds","milliseconds"].indexOf(A)>=0);x.length===0&&(y<e&&(y=a.plus({[g]:1})),y!==a&&(d[g]=(d[g]||0)+_/(y-a)));const I=Et.fromObject(d,s);return x.length>0?Et.fromMillis(_,s).shiftTo(...x).plus(I):I}const X5={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},jS={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},LB=X5.hanidec.replace(/[\[|\]]/g,"").split("");function RB(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);if(t[i].search(X5.hanidec)!==-1)e+=LB.indexOf(t[i]);else for(const a in jS){const[d,y]=jS[a];s>=d&&s<=y&&(e+=s-d)}}return parseInt(e,10)}else return e}function Hs({numberingSystem:t},e=""){return new RegExp(`${X5[t||"latn"]}${e}`)}const jB="missing Intl.DateTimeFormat.formatToParts support";function Lt(t,e=i=>i){return{regex:t,deser:([i])=>e(RB(i))}}const DB=String.fromCharCode(160),fE=`[ ${DB}]`,yE=new RegExp(fE,"g");function FB(t){return t.replace(/\./g,"\\.?").replace(yE,fE)}function DS(t){return t.replace(/\./g,"").replace(yE," ").toLowerCase()}function Ws(t,e){return t===null?null:{regex:RegExp(t.map(FB).join("|")),deser:([i])=>t.findIndex(s=>DS(i)===DS(s))+e}}function FS(t,e){return{regex:t,deser:([,i,s])=>Sv(i,s),groups:e}}function x1(t){return{regex:t,deser:([e])=>e}}function zB(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function VB(t,e){const i=Hs(e),s=Hs(e,"{2}"),a=Hs(e,"{3}"),d=Hs(e,"{4}"),y=Hs(e,"{6}"),g=Hs(e,"{1,2}"),_=Hs(e,"{1,3}"),x=Hs(e,"{1,6}"),I=Hs(e,"{1,9}"),A=Hs(e,"{2,4}"),C=Hs(e,"{4,6}"),N=V=>({regex:RegExp(zB(V.val)),deser:([W])=>W,literal:!0}),D=(V=>{if(t.literal)return N(V);switch(V.val){case"G":return Ws(e.eras("short",!1),0);case"GG":return Ws(e.eras("long",!1),0);case"y":return Lt(x);case"yy":return Lt(A,Ow);case"yyyy":return Lt(d);case"yyyyy":return Lt(C);case"yyyyyy":return Lt(y);case"M":return Lt(g);case"MM":return Lt(s);case"MMM":return Ws(e.months("short",!0,!1),1);case"MMMM":return Ws(e.months("long",!0,!1),1);case"L":return Lt(g);case"LL":return Lt(s);case"LLL":return Ws(e.months("short",!1,!1),1);case"LLLL":return Ws(e.months("long",!1,!1),1);case"d":return Lt(g);case"dd":return Lt(s);case"o":return Lt(_);case"ooo":return Lt(a);case"HH":return Lt(s);case"H":return Lt(g);case"hh":return Lt(s);case"h":return Lt(g);case"mm":return Lt(s);case"m":return Lt(g);case"q":return Lt(g);case"qq":return Lt(s);case"s":return Lt(g);case"ss":return Lt(s);case"S":return Lt(_);case"SSS":return Lt(a);case"u":return x1(I);case"uu":return x1(g);case"uuu":return Lt(i);case"a":return Ws(e.meridiems(),0);case"kkkk":return Lt(d);case"kk":return Lt(A,Ow);case"W":return Lt(g);case"WW":return Lt(s);case"E":case"c":return Lt(i);case"EEE":return Ws(e.weekdays("short",!1,!1),1);case"EEEE":return Ws(e.weekdays("long",!1,!1),1);case"ccc":return Ws(e.weekdays("short",!0,!1),1);case"cccc":return Ws(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return FS(new RegExp(`([+-]${g.source})(?::(${s.source}))?`),2);case"ZZZ":return FS(new RegExp(`([+-]${g.source})(${s.source})?`),2);case"z":return x1(/[a-z_+-/]{1,256}?/i);case" ":return x1(/[^\S\n\r]/);default:return N(V)}})(t)||{invalidReason:jB};return D.token=t,D}const GB={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function UB(t,e){const{type:i,value:s}=t;if(i==="literal"){const y=/^\s+$/.test(s);return{literal:!y,val:y?" ":s}}const a=e[i];let d=GB[i];if(typeof d=="object"&&(d=d[a]),d)return{literal:!1,val:d}}function qB(t){return[`^${t.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,t]}function BB(t,e,i){const s=t.match(e);if(s){const a={};let d=1;for(const y in i)if(wp(i,y)){const g=i[y],_=g.groups?g.groups+1:1;!g.literal&&g.token&&(a[g.token.val[0]]=g.deser(s.slice(d,d+_))),d+=_}return[s,a]}else return[s,{}]}function HB(t){const e=d=>{switch(d){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return _t(t.z)||(i=fa.create(t.z)),_t(t.Z)||(i||(i=new xr(t.Z)),s=t.Z),_t(t.q)||(t.M=(t.q-1)*3+1),_t(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),_t(t.u)||(t.S=H5(t.u)),[Object.keys(t).reduce((d,y)=>{const g=e(y);return g&&(d[g]=t[y]),d},{}),i,s]}let I2=null;function WB(){return I2||(I2=ot.fromMillis(1555555555555)),I2}function JB(t,e){if(t.literal)return t;const i=Sr.macroTokenToFormatOpts(t.val),s=vE(i,e);return s==null||s.includes(void 0)?t:s}function gE(t,e){return Array.prototype.concat(...t.map(i=>JB(i,e)))}function mE(t,e,i){const s=gE(Sr.parseFormat(i),t),a=s.map(y=>VB(y,t)),d=a.find(y=>y.invalidReason);if(d)return{input:e,tokens:s,invalidReason:d.invalidReason};{const[y,g]=qB(a),_=RegExp(y,"i"),[x,I]=BB(e,_,g),[A,C,N]=I?HB(I):[null,null,void 0];if(wp(I,"a")&&wp(I,"H"))throw new $0("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:s,regex:_,rawMatches:x,matches:I,result:A,zone:C,specificOffset:N}}}function KB(t,e,i){const{result:s,zone:a,specificOffset:d,invalidReason:y}=mE(t,e,i);return[s,a,d,y]}function vE(t,e){return t?Sr.create(e,t).formatDateTimeParts(WB()).map(a=>UB(a,t)):null}const bE=[0,31,59,90,120,151,181,212,243,273,304,334],wE=[0,31,60,91,121,152,182,213,244,274,305,335];function Ls(t,e){return new xn("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function _E(t,e,i){const s=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const a=s.getUTCDay();return a===0?7:a}function SE(t,e,i){return i+(Of(t)?wE:bE)[e-1]}function xE(t,e){const i=Of(t)?wE:bE,s=i.findIndex(d=>d<e),a=e-i[s];return{month:s+1,day:a}}function Cw(t){const{year:e,month:i,day:s}=t,a=SE(e,i,s),d=_E(e,i,s);let y=Math.floor((a-d+10)/7),g;return y<1?(g=e-1,y=am(g)):y>am(e)?(g=e+1,y=1):g=e,{weekYear:g,weekNumber:y,weekday:d,...xv(t)}}function zS(t){const{weekYear:e,weekNumber:i,weekday:s}=t,a=_E(e,1,4),d=Td(e);let y=i*7+s-a-3,g;y<1?(g=e-1,y+=Td(g)):y>d?(g=e+1,y-=Td(e)):g=e;const{month:_,day:x}=xE(g,y);return{year:g,month:_,day:x,...xv(t)}}function E2(t){const{year:e,month:i,day:s}=t,a=SE(e,i,s);return{year:e,ordinal:a,...xv(t)}}function VS(t){const{year:e,ordinal:i}=t,{month:s,day:a}=xE(e,i);return{year:e,month:s,day:a,...xv(t)}}function YB(t){const e=_v(t.weekYear),i=na(t.weekNumber,1,am(t.weekYear)),s=na(t.weekday,1,7);return e?i?s?!1:Ls("weekday",t.weekday):Ls("week",t.week):Ls("weekYear",t.weekYear)}function ZB(t){const e=_v(t.year),i=na(t.ordinal,1,Td(t.year));return e?i?!1:Ls("ordinal",t.ordinal):Ls("year",t.year)}function $E(t){const e=_v(t.year),i=na(t.month,1,12),s=na(t.day,1,om(t.year,t.month));return e?i?s?!1:Ls("day",t.day):Ls("month",t.month):Ls("year",t.year)}function TE(t){const{hour:e,minute:i,second:s,millisecond:a}=t,d=na(e,0,23)||e===24&&i===0&&s===0&&a===0,y=na(i,0,59),g=na(s,0,59),_=na(a,0,999);return d?y?g?_?!1:Ls("millisecond",a):Ls("second",s):Ls("minute",i):Ls("hour",e)}const A2="Invalid DateTime",GS=864e13;function $1(t){return new xn("unsupported zone",`the zone "${t.name}" is not supported`)}function k2(t){return t.weekData===null&&(t.weekData=Cw(t.c)),t.weekData}function Qp(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ot({...i,...e,old:i})}function ME(t,e,i){let s=t-e*60*1e3;const a=i.offset(s);if(e===a)return[s,e];s-=(a-e)*60*1e3;const d=i.offset(s);return a===d?[s,a]:[t-Math.min(a,d)*60*1e3,Math.max(a,d)]}function US(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function Iy(t,e,i){return ME(J5(t),e,i)}function qS(t,e){const i=t.o,s=t.c.year+Math.trunc(e.years),a=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,d={...t.c,year:s,month:a,day:Math.min(t.c.day,om(s,a))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},y=Et.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),g=J5(d);let[_,x]=ME(g,i,t.zone);return y!==0&&(_+=y,x=t.zone.offset(_)),{ts:_,o:x}}function e0(t,e,i,s,a,d){const{setZone:y,zone:g}=i;if(t&&Object.keys(t).length!==0||e){const _=e||g,x=ot.fromObject(t,{...i,zone:_,specificOffset:d});return y?x:x.setZone(g)}else return ot.invalid(new xn("unparsable",`the input "${a}" can't be parsed as ${s}`))}function T1(t,e,i=!0){return t.isValid?Sr.create(si.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function O2(t,e){const i=t.c.year>9999||t.c.year<0;let s="";return i&&t.c.year>=0&&(s+="+"),s+=Ni(t.c.year,i?6:4),e?(s+="-",s+=Ni(t.c.month),s+="-",s+=Ni(t.c.day)):(s+=Ni(t.c.month),s+=Ni(t.c.day)),s}function BS(t,e,i,s,a,d){let y=Ni(t.c.hour);return e?(y+=":",y+=Ni(t.c.minute),(t.c.second!==0||!i)&&(y+=":")):y+=Ni(t.c.minute),(t.c.second!==0||!i)&&(y+=Ni(t.c.second),(t.c.millisecond!==0||!s)&&(y+=".",y+=Ni(t.c.millisecond,3))),a&&(t.isOffsetFixed&&t.offset===0&&!d?y+="Z":t.o<0?(y+="-",y+=Ni(Math.trunc(-t.o/60)),y+=":",y+=Ni(Math.trunc(-t.o%60))):(y+="+",y+=Ni(Math.trunc(t.o/60)),y+=":",y+=Ni(Math.trunc(t.o%60)))),d&&(y+="["+t.zone.ianaName+"]"),y}const IE={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},XB={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},QB={ordinal:1,hour:0,minute:0,second:0,millisecond:0},EE=["year","month","day","hour","minute","second","millisecond"],eH=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],tH=["year","ordinal","hour","minute","second","millisecond"];function HS(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new kI(t);return e}function WS(t,e){const i=Il(e.zone,Pi.defaultZone),s=si.fromObject(e),a=Pi.now();let d,y;if(_t(t.year))d=a;else{for(const x of EE)_t(t[x])&&(t[x]=IE[x]);const g=$E(t)||TE(t);if(g)return ot.invalid(g);const _=i.offset(a);[d,y]=Iy(t,_,i)}return new ot({ts:d,zone:i,loc:s,o:y})}function JS(t,e,i){const s=_t(i.round)?!0:i.round,a=(y,g)=>(y=W5(y,s||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(y,g)),d=y=>i.calendary?e.hasSame(t,y)?0:e.startOf(y).diff(t.startOf(y),y).get(y):e.diff(t,y).get(y);if(i.unit)return a(d(i.unit),i.unit);for(const y of i.units){const g=d(y);if(Math.abs(g)>=1)return a(g,y)}return a(t>e?-0:0,i.units[i.units.length-1])}function KS(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class ot{constructor(e){const i=e.zone||Pi.defaultZone;let s=e.invalid||(Number.isNaN(e.ts)?new xn("invalid input"):null)||(i.isValid?null:$1(i));this.ts=_t(e.ts)?Pi.now():e.ts;let a=null,d=null;if(!s)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[a,d]=[e.old.c,e.old.o];else{const g=i.offset(this.ts);a=US(this.ts,g),s=Number.isNaN(a.year)?new xn("invalid input"):null,a=s?null:a,d=s?null:g}this._zone=i,this.loc=e.loc||si.create(),this.invalid=s,this.weekData=null,this.c=a,this.o=d,this.isLuxonDateTime=!0}static now(){return new ot({})}static local(){const[e,i]=KS(arguments),[s,a,d,y,g,_,x]=i;return WS({year:s,month:a,day:d,hour:y,minute:g,second:_,millisecond:x},e)}static utc(){const[e,i]=KS(arguments),[s,a,d,y,g,_,x]=i;return e.zone=xr.utcInstance,WS({year:s,month:a,day:d,hour:y,minute:g,second:_,millisecond:x},e)}static fromJSDate(e,i={}){const s=Mq(e)?e.valueOf():NaN;if(Number.isNaN(s))return ot.invalid("invalid input");const a=Il(i.zone,Pi.defaultZone);return a.isValid?new ot({ts:s,zone:a,loc:si.fromObject(i)}):ot.invalid($1(a))}static fromMillis(e,i={}){if(mh(e))return e<-GS||e>GS?ot.invalid("Timestamp out of range"):new ot({ts:e,zone:Il(i.zone,Pi.defaultZone),loc:si.fromObject(i)});throw new Ps(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(mh(e))return new ot({ts:e*1e3,zone:Il(i.zone,Pi.defaultZone),loc:si.fromObject(i)});throw new Ps("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const s=Il(i.zone,Pi.defaultZone);if(!s.isValid)return ot.invalid($1(s));const a=Pi.now(),d=_t(i.specificOffset)?s.offset(a):i.specificOffset,y=lm(e,HS),g=!_t(y.ordinal),_=!_t(y.year),x=!_t(y.month)||!_t(y.day),I=_||x,A=y.weekYear||y.weekNumber,C=si.fromObject(i);if((I||g)&&A)throw new $0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&g)throw new $0("Can't mix ordinal dates with month/day");const N=A||y.weekday&&!I;let j,D,V=US(a,d);N?(j=eH,D=XB,V=Cw(V)):g?(j=tH,D=QB,V=E2(V)):(j=EE,D=IE);let W=!1;for(const de of j){const we=y[de];_t(we)?W?y[de]=D[de]:y[de]=V[de]:W=!0}const K=N?YB(y):g?ZB(y):$E(y),Y=K||TE(y);if(Y)return ot.invalid(Y);const ee=N?zS(y):g?VS(y):y,[re,se]=Iy(ee,d,s),ue=new ot({ts:re,zone:s,o:se,loc:C});return y.weekday&&I&&e.weekday!==ue.weekday?ot.invalid("mismatched weekday",`you can't specify both a weekday of ${y.weekday} and a date of ${ue.toISO()}`):ue}static fromISO(e,i={}){const[s,a]=yB(e);return e0(s,a,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[s,a]=gB(e);return e0(s,a,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[s,a]=mB(e);return e0(s,a,i,"HTTP",i)}static fromFormat(e,i,s={}){if(_t(e)||_t(i))throw new Ps("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:d=null}=s,y=si.fromOpts({locale:a,numberingSystem:d,defaultToEN:!0}),[g,_,x,I]=KB(y,e,i);return I?ot.invalid(I):e0(g,_,s,`format ${i}`,e,x)}static fromString(e,i,s={}){return ot.fromFormat(e,i,s)}static fromSQL(e,i={}){const[s,a]=$B(e);return e0(s,a,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Ps("need to specify a reason the DateTime is invalid");const s=e instanceof xn?e:new xn(e,i);if(Pi.throwOnInvalid)throw new rq(s);return new ot({invalid:s})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const s=vE(e,si.fromObject(i));return s?s.map(a=>a?a.val:null).join(""):null}static expandFormat(e,i={}){return gE(Sr.parseFormat(e),si.fromObject(i)).map(a=>a.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?k2(this).weekYear:NaN}get weekNumber(){return this.isValid?k2(this).weekNumber:NaN}get weekday(){return this.isValid?k2(this).weekday:NaN}get ordinal(){return this.isValid?E2(this.c).ordinal:NaN}get monthShort(){return this.isValid?S1.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?S1.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?S1.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?S1.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Of(this.year)}get daysInMonth(){return om(this.year,this.month)}get daysInYear(){return this.isValid?Td(this.year):NaN}get weeksInWeekYear(){return this.isValid?am(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:s,calendar:a}=Sr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:a}}toUTC(e=0,i={}){return this.setZone(xr.instance(e),i)}toLocal(){return this.setZone(Pi.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(e=Il(e,Pi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let a=this.ts;if(i||s){const d=e.offset(this.ts),y=this.toObject();[a]=Iy(y,d,e)}return Qp(this,{ts:a,zone:e})}else return ot.invalid($1(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:s}={}){const a=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:s});return Qp(this,{loc:a})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=lm(e,HS),s=!_t(i.weekYear)||!_t(i.weekNumber)||!_t(i.weekday),a=!_t(i.ordinal),d=!_t(i.year),y=!_t(i.month)||!_t(i.day),g=d||y,_=i.weekYear||i.weekNumber;if((g||a)&&_)throw new $0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&a)throw new $0("Can't mix ordinal dates with month/day");let x;s?x=zS({...Cw(this.c),...i}):_t(i.ordinal)?(x={...this.toObject(),...i},_t(i.day)&&(x.day=Math.min(om(x.year,x.month),x.day))):x=VS({...E2(this.c),...i});const[I,A]=Iy(x,this.o,this.zone);return Qp(this,{ts:I,o:A})}plus(e){if(!this.isValid)return this;const i=Et.fromDurationLike(e);return Qp(this,qS(this,i))}minus(e){if(!this.isValid)return this;const i=Et.fromDurationLike(e).negate();return Qp(this,qS(this,i))}startOf(e){if(!this.isValid)return this;const i={},s=Et.normalizeUnit(e);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks"&&(i.weekday=1),s==="quarters"){const a=Math.ceil(this.month/3);i.month=(a-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?Sr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):A2}toLocaleString(e=nm,i={}){return this.isValid?Sr.create(this.loc.clone(i),e).formatDateTime(this):A2}toLocaleParts(e={}){return this.isValid?Sr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:a=!0,extendedZone:d=!1}={}){if(!this.isValid)return null;const y=e==="extended";let g=O2(this,y);return g+="T",g+=BS(this,y,i,s,a,d),g}toISODate({format:e="extended"}={}){return this.isValid?O2(this,e==="extended"):null}toISOWeekDate(){return T1(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:a=!1,extendedZone:d=!1,format:y="extended"}={}){return this.isValid?(a?"T":"")+BS(this,y==="extended",i,e,s,d):null}toRFC2822(){return T1(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return T1(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?O2(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let a="HH:mm:ss.SSS";return(i||e)&&(s&&(a+=" "),i?a+="z":e&&(a+="ZZ")),T1(this,a,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():A2}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",s={}){if(!this.isValid||!e.isValid)return Et.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...s},d=Iq(i).map(Et.normalizeUnit),y=e.valueOf()>this.valueOf(),g=y?this:e,_=y?e:this,x=NB(g,_,d,a);return y?x.negate():x}diffNow(e="milliseconds",i={}){return this.diff(ot.now(),e,i)}until(e){return this.isValid?xi.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const s=e.valueOf(),a=this.setZone(e.zone,{keepLocalTime:!0});return a.startOf(i)<=s&&s<=a.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||ot.fromObject({},{zone:this.zone}),s=e.padding?this<i?-e.padding:e.padding:0;let a=["years","months","days","hours","minutes","seconds"],d=e.unit;return Array.isArray(e.unit)&&(a=e.unit,d=void 0),JS(i,this.plus(s),{...e,numeric:"always",units:a,unit:d})}toRelativeCalendar(e={}){return this.isValid?JS(e.base||ot.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ot.isDateTime))throw new Ps("min requires all arguments be DateTimes");return PS(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(ot.isDateTime))throw new Ps("max requires all arguments be DateTimes");return PS(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,s={}){const{locale:a=null,numberingSystem:d=null}=s,y=si.fromOpts({locale:a,numberingSystem:d,defaultToEN:!0});return mE(y,e,i)}static fromStringExplain(e,i,s={}){return ot.fromFormatExplain(e,i,s)}static get DATE_SHORT(){return nm}static get DATE_MED(){return OI}static get DATE_MED_WITH_WEEKDAY(){return oq}static get DATE_FULL(){return CI}static get DATE_HUGE(){return PI}static get TIME_SIMPLE(){return NI}static get TIME_WITH_SECONDS(){return LI}static get TIME_WITH_SHORT_OFFSET(){return RI}static get TIME_WITH_LONG_OFFSET(){return jI}static get TIME_24_SIMPLE(){return DI}static get TIME_24_WITH_SECONDS(){return FI}static get TIME_24_WITH_SHORT_OFFSET(){return zI}static get TIME_24_WITH_LONG_OFFSET(){return VI}static get DATETIME_SHORT(){return GI}static get DATETIME_SHORT_WITH_SECONDS(){return UI}static get DATETIME_MED(){return qI}static get DATETIME_MED_WITH_SECONDS(){return BI}static get DATETIME_MED_WITH_WEEKDAY(){return aq}static get DATETIME_FULL(){return HI}static get DATETIME_FULL_WITH_SECONDS(){return WI}static get DATETIME_HUGE(){return JI}static get DATETIME_HUGE_WITH_SECONDS(){return KI}}function t0(t){if(ot.isDateTime(t))return t;if(t&&t.valueOf&&mh(t.valueOf()))return ot.fromJSDate(t);if(t&&typeof t=="object")return ot.fromObject(t);throw new Ps(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const iH={year:void 0,month:void 0,day:void 0,weekday:void 0},rH={hour:void 0,minute:void 0,second:void 0},sH={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},Q5={timeZone:"Etc/UTC"},Un={year:"numeric",month:"numeric",day:"numeric"},i0={year:"numeric",month:"long",day:"numeric"},r0={year:"numeric",month:"short",day:"numeric"},s0={year:"numeric",month:"long",weekday:"long",day:"numeric"},xs={hour:"numeric",minute:"numeric"},Js={...xs,second:"numeric"},Lp={"short-date":Un,"short-date-short-time":{...Un,...xs},"short-date-short-time-24":{...Un,...xs,hour12:!1},"short-date-long-time":{...Un,...Js},"short-date-long-time-24":{...Un,...Js,hour12:!1},"short-date-le":Un,"short-date-le-short-time":{...Un,...xs},"short-date-le-short-time-24":{...Un,...xs,hour12:!1},"short-date-le-long-time":{...Un,...Js},"short-date-le-long-time-24":{...Un,...Js,hour12:!1},"long-month-day-year":i0,"long-month-day-year-short-time":{...i0,...xs},"long-month-day-year-short-time-24":{...i0,...xs,hour12:!1},"long-month-day-year-long-time":{...i0,...Js},"long-month-day-year-long-time-24":{...i0,...Js,hour12:!1},"day-short-month-year":r0,"day-short-month-year-short-time":{...r0,...xs},"day-short-month-year-short-time-24":{...r0,...xs,hour12:!1},"day-short-month-year-long-time":{...r0,...Js},"day-short-month-year-long-time-24":{...r0,...Js,hour12:!1},"long-date":s0,"long-date-short-time":{...s0,...xs},"long-date-short-time-24":{...s0,...xs,hour12:!1},"long-date-long-time":{...s0,...Js},"long-date-long-time-24":{...s0,...Js,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":xs,"long-time":Js},nH=$r()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),AE={ar:"ar-u-nu-latn-ca-gregory"};let Pw=new WeakMap,kE=Lp["short-date-short-time"];function oH(t){const e=t||kE;let i=Pw.get(e);if(!i){const s=En(),a=AE[s]||s;i=new Intl.DateTimeFormat(a,e),Pw.set(e,i)}return i}function M1(t){return Lp[t]}function Wl(t,e){return oH(e).format(t)}function aH(t,e=Lp["short-date"]){return Wl(new Date(t),{...e,...Q5,...rH})}function lH(t,e=Lp["short-time"]){return Wl(new Date(`1970-01-01T${t}Z`),{...e,...Q5,...iH})}function uH(t,e=Lp["short-date-short-time"]){const i=ot.fromISO(t,{setZone:!0}),s=En(),a=AE[s]??s;return i.toLocaleString({...sH,...e},{locale:a})}x5(()=>{Pw=new WeakMap,kE=Lp["short-date-short-time"]});const hH={ar:"ar-u-nu-latn"};let Ey=new WeakMap,OE={};function cH(t){const e=t||OE;if(!Ey.has(e)){const i=En(),s=hH[En()]||i;Ey.set(e,new Intl.NumberFormat(s,t))}return Ey.get(e)}function pH(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function sf(t,e){return Object.is(t,-0)&&(t=0),cH(e).format(t)}x5(()=>{Ey=new WeakMap,OE={}});let fc=class extends Ii(ye){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}formatNumber(e){return sf(e,pH(this))}formatDate(e,i=!1){return this.dateFormat?Wl(e,{...M1(this.dateFormat),...i&&Q5}):this.formatNumber(e)}formatDateOnly(e){const i=(this.dateFormat&&M1(this.dateFormat))??void 0;return aH(e,i)}formatTimeOnly(e){const i=(this.dateFormat&&M1(this.dateFormat))??void 0;return lH(e,i)}formatTimestamp(e){const i=(this.dateFormat&&M1(this.dateFormat))??void 0;return uH(e,i)}formatRasterPixelValue(e){return e.includes("-")?e:e.trim().includes(",")?this._formatDelimitedString(e,",",", "):e.trim().includes(";")?this._formatDelimitedString(e,";","; "):e.trim().includes(" ")?this._formatDelimitedString(e," "," "):this.formatNumber(Number(e))}_formatDelimitedString(e,i,s){return e&&i&&s?e.trim().split(i).map(a=>this.formatNumber(Number(a))).join(s):e}};b([De(nH)],fc.prototype,"dateFormat",void 0),b([S({type:Boolean,json:{write:!0}})],fc.prototype,"digitSeparator",void 0),b([S({type:Pt,json:{write:!0}})],fc.prototype,"places",void 0),fc=b([J("esri.popup.support.FieldInfoFormat")],fc);const M0=fc;var Nw;let en=Nw=class extends ye{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new Nw({fieldName:this.fieldName,format:this.format?ae(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};b([S({type:String,json:{write:!0}})],en.prototype,"fieldName",void 0),b([S({type:M0,json:{write:!0}})],en.prototype,"format",void 0),b([S({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],en.prototype,"isEditable",void 0),b([S({type:String,json:{write:!0}})],en.prototype,"label",void 0),b([De(new Nt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],en.prototype,"stringFieldOption",void 0),b([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],en.prototype,"statisticType",void 0),b([S({type:String,json:{write:!0}})],en.prototype,"tooltip",void 0),b([S({type:Boolean,json:{write:!0}})],en.prototype,"visible",void 0),en=Nw=b([J("esri.popup.FieldInfo")],en);const e4=en;var Lw;let Do=Lw=class extends iu{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new Lw(ae({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};b([S({type:Object,json:{write:!0}})],Do.prototype,"attributes",void 0),b([S({type:String,json:{write:!0}})],Do.prototype,"description",void 0),b([S({type:[e4]})],Do.prototype,"fieldInfos",void 0),b([ke("fieldInfos")],Do.prototype,"writeFieldInfos",null),b([S({type:String,json:{write:!0}})],Do.prototype,"title",void 0),b([S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Do.prototype,"type",void 0),Do=Lw=b([J("esri.popup.content.FieldsContent")],Do);const nf=Do;let Tu=class extends ye{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};b([S({type:String,json:{write:!0}})],Tu.prototype,"altText",void 0),b([S({type:String,json:{write:!0}})],Tu.prototype,"caption",void 0),b([S({type:String,json:{write:!0}})],Tu.prototype,"title",void 0),b([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Tu.prototype,"type",void 0),Tu=b([J("esri.popup.content.mixins.MediaInfo")],Tu);const t4=Tu;var Rw;let yc=Rw=class extends je{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new Rw({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};b([S()],yc.prototype,"fieldName",void 0),b([S()],yc.prototype,"tooltip",void 0),b([S()],yc.prototype,"value",void 0),yc=Rw=b([J("esri.popup.content.support.ChartMediaInfoValueSeries")],yc);const dH=yc;var jw;let Mu=jw=class extends ye{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new jw({fields:ae(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};b([S({type:[String],json:{write:!0}})],Mu.prototype,"fields",void 0),b([S({type:String,json:{write:!0}})],Mu.prototype,"normalizeField",void 0),b([S({type:[dH],json:{read:!1}})],Mu.prototype,"series",void 0),b([S({type:String,json:{write:!0}})],Mu.prototype,"tooltipField",void 0),Mu=jw=b([J("esri.popup.content.support.ChartMediaInfoValue")],Mu);const fH=Mu;let I0=class extends t4{constructor(e){super(e),this.type=null,this.value=null}};b([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],I0.prototype,"type",void 0),b([S({type:fH,json:{write:!0}})],I0.prototype,"value",void 0),I0=b([J("esri.popup.content.mixins.ChartMediaInfo")],I0);const $v=I0,Tv=$r()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var Dw;let Ay=Dw=class extends $v{constructor(t){super(t),this.type="bar-chart"}clone(){return new Dw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Tv.write}})],Ay.prototype,"type",void 0),Ay=Dw=b([J("esri.popup.content.BarChartMediaInfo")],Ay);const CE=Ay;var Fw;let ky=Fw=class extends $v{constructor(t){super(t),this.type="column-chart"}clone(){return new Fw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Tv.write}})],ky.prototype,"type",void 0),ky=Fw=b([J("esri.popup.content.ColumnChartMediaInfo")],ky);const PE=ky;var zw;let E0=zw=class extends ye{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new zw({linkURL:this.linkURL,sourceURL:this.sourceURL})}};b([S({type:String,json:{write:!0}})],E0.prototype,"linkURL",void 0),b([S({type:String,json:{write:!0}})],E0.prototype,"sourceURL",void 0),E0=zw=b([J("esri.popup.content.support.ImageMediaInfoValue")],E0);const yH=E0;var Vw;let gc=Vw=class extends t4{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new Vw({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};b([S({type:Number,json:{write:!0}})],gc.prototype,"refreshInterval",void 0),b([S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],gc.prototype,"type",void 0),b([S({type:yH,json:{write:!0}})],gc.prototype,"value",void 0),gc=Vw=b([J("esri.popup.content.ImageMediaInfo")],gc);const NE=gc;var Gw;let Oy=Gw=class extends $v{constructor(t){super(t),this.type="line-chart"}clone(){return new Gw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Tv.write}})],Oy.prototype,"type",void 0),Oy=Gw=b([J("esri.popup.content.LineChartMediaInfo")],Oy);const LE=Oy;var Uw;let Cy=Uw=class extends $v{constructor(t){super(t),this.type="pie-chart"}clone(){return new Uw({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};b([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Tv.write}})],Cy.prototype,"type",void 0),Cy=Uw=b([J("esri.popup.content.PieChartMediaInfo")],Cy);const RE=Cy,jE={base:t4,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":CE,"column-chart":PE,"line-chart":LE,"pie-chart":RE,image:NE}};var qw;let tn=qw=class extends iu{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?NE.fromJSON(e):e.type==="barchart"?CE.fromJSON(e):e.type==="columnchart"?PE.fromJSON(e):e.type==="linechart"?LE.fromJSON(e):e.type==="piechart"?RE.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new qw(ae({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};b([S()],tn.prototype,"activeMediaInfoIndex",void 0),b([S({type:Object,json:{write:!0}})],tn.prototype,"attributes",void 0),b([S({type:String,json:{write:!0}})],tn.prototype,"description",void 0),b([S({types:[jE]})],tn.prototype,"mediaInfos",void 0),b([Ce("mediaInfos")],tn.prototype,"readMediaInfos",null),b([ke("mediaInfos")],tn.prototype,"writeMediaInfos",null),b([S({type:String,json:{write:!0}})],tn.prototype,"title",void 0),b([S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],tn.prototype,"type",void 0),tn=qw=b([J("esri.popup.content.MediaContent")],tn);const um=tn;var Bw;let A0=Bw=class extends ye{constructor(t){super(t),this.field=null,this.order=null}clone(){return new Bw({field:this.field,order:this.order})}};b([S({type:String,json:{write:!0}})],A0.prototype,"field",void 0),b([S({type:["asc","desc"],json:{write:!0}})],A0.prototype,"order",void 0),A0=Bw=b([J("esri.popup.support.RelatedRecordsInfoFieldOrder")],A0);const DE=A0;let Kn=class extends Ii(iu){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};b([S({type:String,json:{write:!0}})],Kn.prototype,"description",void 0),b([S({type:Number,json:{type:Pt,write:!0}})],Kn.prototype,"displayCount",void 0),b([S({type:["list"],json:{write:!0}})],Kn.prototype,"displayType",void 0),b([S({type:[DE],json:{write:!0}})],Kn.prototype,"orderByFields",void 0),b([S({type:Number,json:{type:Pt,write:!0}})],Kn.prototype,"relationshipId",void 0),b([S({type:String,json:{write:!0}})],Kn.prototype,"title",void 0),b([S({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Kn.prototype,"type",void 0),Kn=b([J("esri.popup.content.RelationshipContent")],Kn);const hm=Kn;var Hw;let k0=Hw=class extends iu{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new Hw({text:this.text})}};b([S({type:String,json:{write:!0}})],k0.prototype,"text",void 0),b([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],k0.prototype,"type",void 0),k0=Hw=b([J("esri.popup.content.TextContent")],k0);const cm=k0,gH={base:null,key:"type",typeMap:{attachment:rf,media:um,text:cm,expression:B5,field:nf,relationship:hm}};var Ww;let Iu=Ww=class extends ye{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new Ww({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};b([S({type:String,json:{write:!0}})],Iu.prototype,"name",void 0),b([S({type:String,json:{write:!0}})],Iu.prototype,"title",void 0),b([S({type:String,json:{write:!0}})],Iu.prototype,"expression",void 0),b([S({type:["string","number"],json:{write:!0}})],Iu.prototype,"returnType",void 0),Iu=Ww=b([J("esri.popup.ExpressionInfo")],Iu);const mH=Iu;var Jw;let O0=Jw=class extends ye{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Jw({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};b([S({type:Boolean,json:{write:!0}})],O0.prototype,"returnTopmostRaster",void 0),b([S({type:Boolean,json:{write:!0}})],O0.prototype,"showNoDataRecords",void 0),O0=Jw=b([J("esri.popup.LayerOptions")],O0);const vH=O0;var Kw;let C0=Kw=class extends ye{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new Kw({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ae(this.orderByFields):null})}};b([S({type:Boolean,json:{write:!0}})],C0.prototype,"showRelatedRecords",void 0),b([S({type:[DE],json:{write:!0}})],C0.prototype,"orderByFields",void 0),C0=Kw=b([J("esri.popup.RelatedRecordsInfo")],C0);const bH=C0;var Yw;let $s=Yw=class extends Uh(je){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Yw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};b([S()],$s.prototype,"active",void 0),b([S()],$s.prototype,"className",void 0),b([S()],$s.prototype,"disabled",void 0),b([S()],$s.prototype,"icon",void 0),b([S()],$s.prototype,"id",void 0),b([S()],$s.prototype,"indicator",void 0),b([S()],$s.prototype,"title",void 0),b([S()],$s.prototype,"type",void 0),b([S()],$s.prototype,"visible",void 0),$s=Yw=b([J("esri.support.actions.ActionBase")],$s);const Nf=$s;var Zw;let Py=Zw=class extends Nf{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new Zw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};b([S()],Py.prototype,"image",void 0),Py=Zw=b([J("esri.support.Action.ActionButton")],Py);const FE=Py;var Xw;let P0=Xw=class extends Nf{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new Xw({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};b([S()],P0.prototype,"image",void 0),b([S()],P0.prototype,"value",void 0),P0=Xw=b([J("esri.support.Action.ActionToggle")],P0);const zE=P0,wH="esri.PopupTemplate",_H=me.getLogger(wH),n0="relationships/",YS="expression/",SH=Ge.ofType({key:"type",defaultKeyValue:"button",base:Nf,typeMap:{button:FE,toggle:zE}}),xH={base:iu,key:"type",typeMap:{media:um,custom:tq,text:cm,attachments:rf,fields:nf,expression:B5,relationship:hm}},$H=["attachments","fields","media","text","expression","relationship"];let zi=class extends Ii(ye){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>pa(xH,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||wa(e)?e:(_H.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:s}=i;return Array.isArray(s)&&s.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,s):this._readPopupInfo(i)}writeContent(e,i,s,a){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(d=>$H.includes(d.type)).map(d=>d&&d.toJSON(a)),i.popupElements.forEach(d=>{d.type==="attachments"?this._writeAttachmentContent(i):d.type==="media"?this._writeMediaContent(d,i):d.type==="text"?this._writeTextContent(d,i):d.type==="relationship"&&this._writeRelationshipContent(d,i)})):i.description=e}writeFieldInfos(e,i,s,a){const{content:d}=this,y=Array.isArray(d)?d:null;if(e){const g=y?y.filter(x=>x.type==="fields"):[],_=g.length&&g.every(x=>{var I;return(I=x.fieldInfos)==null?void 0:I.length});i.fieldInfos=e.filter(Boolean).map(x=>{const I=x.toJSON(a);return _&&(I.visible=!1),I})}if(y)for(const g of y)g.type==="fields"&&this._writeFieldsContent(g,i)}writeLayerOptions(e,i,s,a){i[s]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(a)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...s,...this._getContentExpressionInfos(this.content,s)]),tf(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const s=ae(e.fieldInfos);Array.isArray(i.fieldInfos)?s.forEach(a=>{const d=i.fieldInfos.find(y=>y.fieldName.toLowerCase()===a.fieldName.toLowerCase());d?d.visible=!0:i.fieldInfos.push(a)}):i.fieldInfos=s}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var d,y;const s=((d=e.orderByFields)==null?void 0:d.map(g=>this._toFieldOrderJSON(g,e.relationshipId)))||[],a=[...((y=i.relatedRecordsInfo)==null?void 0:y.orderByFields)||[],...s];i.relatedRecordsInfo={showRelatedRecords:!0,...(a==null?void 0:a.length)&&{orderByFields:a}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const s=ae(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...s]:i.mediaInfos=s}_readPopupInfoElements(e,i,s){const a={description:!1,mediaInfos:!1};return s.map(d=>d.type==="media"?(d.mediaInfos||!i||a.mediaInfos||(d.mediaInfos=i,a.mediaInfos=!0),um.fromJSON(d)):d.type==="text"?(d.text||!e||a.description||(d.text=e,a.description=!0),cm.fromJSON(d)):d.type==="attachments"?rf.fromJSON(d):d.type==="fields"?nf.fromJSON(d):d.type==="expression"?B5.fromJSON(d):d.type==="relationship"?hm.fromJSON(d):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:s}=e;if(!(i!=null&&i.startsWith(n0)))return null;const a=i.replace(n0,"").split("/");if(a.length!==2)return null;const d=parseInt(a[0],10),y=a[1];return typeof d=="number"&&y?hm.fromJSON({relationshipId:d,orderByFields:[{field:y,order:s}]}):null}_toFieldOrderJSON(e,i){const{order:s,field:a}=e;return{field:`${n0}${i}/${a}`,order:s}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:s,relatedRecordsInfo:a={showRelatedRecords:!1}}){const d=[];e?d.push(new cm({text:e})):d.push(new nf),Array.isArray(i)&&i.length&&d.push(um.fromJSON({mediaInfos:i})),s&&d.push(rf.fromJSON({displayType:"auto"}));const{showRelatedRecords:y,orderByFields:g}=a;return y&&(g!=null&&g.length)&&g.forEach(_=>{const x=this._toRelationshipContent(_);x&&d.push(x)}),d.length?d:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const s=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...s.reduce((a,d)=>[...a,...this._getMediaInfoFields(d)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:s,value:a}=e,d=a||{},{fields:y,normalizeField:g,tooltipField:_,sourceURL:x,linkURL:I}=d,A=[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(x),...this._extractFieldNames(I),...y??[]];return g&&A.push(g),_&&A.push(_),A}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((s,a)=>[...s,...a.type==="expression"&&a.expressionInfo?[a.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,s)=>[...i,...this._getContentElementFields(s)],[]):[]}async _collectExpressionInfoFields(e,i,s){s&&await Promise.all(s.map(a=>Pr(e,i,a.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(n0)&&!i.startsWith(YS)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,s)=>[...i,...this._getActionFields(s)],[]):[]}_getActionFields(e){const{className:i,title:s,type:a}=e,d=a==="button"||a==="toggle"?e.image:"";return[...this._extractFieldNames(s),...this._extractFieldNames(i),...this._extractFieldNames(d)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,s=e.match(i);if(!s)return[];const a=/\{(\w+):.+\}/,d=s.filter(y=>!(y.indexOf(`{${n0}`)===0||y.indexOf(`{${YS}`)===0)).map(y=>y.replace(a,"{$1}"));return d?d.map(y=>y.slice(1,-1)):[]}};b([S({type:SH})],zi.prototype,"actions",void 0),b([S()],zi.prototype,"content",void 0),b([Ft("content")],zi.prototype,"castContent",null),b([Ce("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],zi.prototype,"readContent",null),b([ke("content",{popupElements:{type:Ge.ofType(gH)},showAttachments:{type:Boolean},mediaInfos:{type:Ge.ofType(jE)},description:{type:String},relatedRecordsInfo:{type:bH}})],zi.prototype,"writeContent",null),b([S({type:[mH],json:{write:!0}})],zi.prototype,"expressionInfos",void 0),b([S({type:[e4]})],zi.prototype,"fieldInfos",void 0),b([ke("fieldInfos")],zi.prototype,"writeFieldInfos",null),b([S({type:vH})],zi.prototype,"layerOptions",void 0),b([ke("layerOptions")],zi.prototype,"writeLayerOptions",null),b([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],zi.prototype,"lastEditInfoEnabled",void 0),b([S()],zi.prototype,"outFields",void 0),b([S()],zi.prototype,"overwriteActions",void 0),b([S()],zi.prototype,"returnGeometry",void 0),b([S({json:{type:String}})],zi.prototype,"title",void 0),b([ke("title")],zi.prototype,"writeTitle",null),zi=b([J("esri.PopupTemplate")],zi);const Lf=zi,ZS=new Nt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let TH=0,mc=class extends ye{constructor(e){super(e),this.id="sym"+TH++,this.type=null,this.color=new et([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};b([S({type:ZS.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:ZS.write}}})],mc.prototype,"type",void 0),b([S({type:et,json:{write:{allowNull:!0}}})],mc.prototype,"color",void 0),b([Ce("color")],mc.prototype,"readColor",null),mc=b([J("esri.symbols.Symbol")],mc);const Br=mc;var Qw;let Ja=Qw=class extends Br{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const s=this.data.primitiveOverrides;if(s){const a=s.map(d=>{const y=d.valueExpressionInfo;return Pr(t,e,y.expression)});await Promise.all(a)}}}clone(){return new Qw({data:ae(this.data)})}hash(){return J_(JSON.stringify(this.data)).toString()}};b([S({json:{write:!1}})],Ja.prototype,"color",void 0),b([S({json:{write:!0}})],Ja.prototype,"data",void 0),b([Ce("data",["symbol"])],Ja.prototype,"readData",null),b([ke("data",{})],Ja.prototype,"writeData",null),b([De({CIMSymbolReference:"cim"},{readOnly:!0})],Ja.prototype,"type",void 0),Ja=Qw=b([J("esri.symbols.CIMSymbol")],Ja);const Rf=Ja;let vc=class extends ye{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,s){e||(i[s]=e)}};b([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],vc.prototype,"enabled",void 0),b([ke("enabled")],vc.prototype,"writeEnabled",null),b([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],vc.prototype,"type",void 0),vc=b([J("esri.symbols.Symbol3DLayer")],vc);const So=vc,MH=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,IH="screenUtils.toPt: input not recognized!",VE=96;function GE(t){return t?t/72*VE:0}function ya(t){return t?72*t/VE:0}function Bt(t){if(typeof t=="string"){const e=t.match(MH);if(e){const i=Number(e[1]),s=e[3]&&e[3].toLowerCase(),a=t.charAt(0)==="-",d=s==="px"?ya(i):i;return a?-d:d}return console.warn(IH),null}return t}function Cr(t=0,e=0){return{x:t,y:e}}function Fde(t=0,e=0){return[t,e]}function EH(t,e){const i=e.transparency!=null?ef(e.transparency):1,s=e.color;return s&&Array.isArray(s)?new et([s[0]||0,s[1]||0,s[2]||0,i]):null}function AH(t,e){e.color=t.toJSON().slice(0,3);const i=O5(t.a);i!==0&&(e.transparency=i)}const ru={type:et,json:{type:[Pt],default:null,read:{source:["color","transparency"],reader:EH},write:{target:{color:{type:[Pt]},transparency:{type:Pt}},writer:AH}}},vo={type:Number,cast:Bt,json:{write:!0}};let Eu=class extends ye{constructor(e){super(e),this.color=new et([0,0,0,1]),this.extensionLength=0,this.size=ya(1)}clone(){}cloneProperties(){return{color:ae(this.color),size:this.size,extensionLength:this.extensionLength}}};b([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Eu.prototype,"type",void 0),b([S(ru)],Eu.prototype,"color",void 0),b([S({...vo,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Eu.prototype,"extensionLength",void 0),b([S(vo)],Eu.prototype,"size",void 0),Eu=b([J("esri.symbols.edges.Edges3D")],Eu);const i4=Eu;var e3;let Ny=e3=class extends i4{constructor(t){super(t),this.type="sketch"}clone(){return new e3(this.cloneProperties())}};b([De({sketch:"sketch"},{readOnly:!0})],Ny.prototype,"type",void 0),Ny=e3=b([J("esri.symbols.edges.SketchEdges3D")],Ny);const kH=Ny;var t3;let Ly=t3=class extends i4{constructor(t){super(t),this.type="solid"}clone(){return new t3(this.cloneProperties())}};b([De({solid:"solid"},{readOnly:!0})],Ly.prototype,"type",void 0),Ly=t3=b([J("esri.symbols.support.SolidEdges3D")],Ly);const OH=Ly,UE={types:{key:"type",base:i4,typeMap:{solid:OH,sketch:kH}},json:{write:!0}};var i3;let Ds=i3=class extends ye{constructor(t){super(t),this.color=null}clone(){const t={color:this.color!=null?this.color.clone():null};return new i3(t)}};b([S(ru)],Ds.prototype,"color",void 0),Ds=i3=b([J("esri.symbols.support.Symbol3DMaterial")],Ds);var r3;let Ka=r3=class extends So{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new r3({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};b([De({Extrude:"extrude"},{readOnly:!0})],Ka.prototype,"type",void 0),b([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ka.prototype,"size",void 0),b([S({type:Ds,json:{write:!0}})],Ka.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ka.prototype,"castShadows",void 0),b([S(UE)],Ka.prototype,"edges",void 0),Ka=r3=b([J("esri.symbols.ExtrudeSymbol3DLayer")],Ka);const qE=Ka;let N0=class extends Br{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};b([De({esriSLS:"simple-line"},{readOnly:!0})],N0.prototype,"type",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],N0.prototype,"width",void 0),N0=b([J("esri.symbols.LineSymbol")],N0);const CH=N0,PH=["begin","end","begin-end"],BE=["arrow","circle","square","diamond","cross","x"];var s3;let Yn=s3=class extends ye{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,s){e[i]=(s==null?void 0:s.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,s){(s==null?void 0:s.origin)==="web-map"||(e[i]=t)}clone(){return new s3({color:ae(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};b([S({type:["begin","end","begin-end"],json:{write:!0}})],Yn.prototype,"placement",void 0),b([De({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],Yn.prototype,"type",void 0),b([S({type:BE})],Yn.prototype,"style",void 0),b([ke("style")],Yn.prototype,"writeStyle",null),b([S({type:et,value:null,json:{write:{allowNull:!0}}})],Yn.prototype,"color",null),b([Ce("color")],Yn.prototype,"readColor",null),b([ke("color")],Yn.prototype,"writeColor",null),Yn=s3=b([J("esri.symbols.LineSymbolMarker")],Yn);const NH=Yn;var n3;const C2=new Nt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Fo=n3=class extends CH{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,s,a,d){if(t&&typeof t!="string")return t;const y={};return t!=null&&(y.style=t),e!=null&&(y.color=e),i!=null&&(y.width=Bt(i)),s!=null&&(y.cap=s),a!=null&&(y.join=a),d!=null&&(y.miterLimit=Bt(d)),y}clone(){var t;return new n3({color:ae(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};b([De({esriSLS:"simple-line"},{readOnly:!0})],Fo.prototype,"type",void 0),b([S({type:C2.apiValues,json:{read:C2.read,write:C2.write}})],Fo.prototype,"style",void 0),b([S({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],Fo.prototype,"cap",void 0),b([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],Fo.prototype,"join",void 0),b([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":NH}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Fo.prototype,"marker",void 0),b([S({type:Number,json:{read:!1,write:!1}})],Fo.prototype,"miterLimit",void 0),Fo=n3=b([J("esri.symbols.SimpleLineSymbol")],Fo);const ps=Fo;let L0=class extends Br{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};b([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ps}},json:{default:null,write:!0}})],L0.prototype,"outline",void 0),b([S({type:["simple-fill","picture-fill"],readOnly:!0})],L0.prototype,"type",void 0),L0=b([J("esri.symbols.FillSymbol")],L0);const HE=L0;let Ry=class extends ye{constructor(e){super(e)}clone(){}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ry.prototype,"type",void 0),Ry=b([J("esri.symbols.patterns.LinePattern3D")],Ry);const WE=Ry,LH=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var o3;const RH=$r()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let R0=o3=class extends WE{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new o3(t)}};b([S({type:["style"]})],R0.prototype,"type",void 0),b([De(RH),S({type:LH})],R0.prototype,"style",void 0),R0=o3=b([J("esri.symbols.patterns.LineStylePattern3D")],R0);const r4=R0;let jy=class extends ye{constructor(e){super(e)}clone(){}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],jy.prototype,"type",void 0),jy=b([J("esri.symbols.patterns.Pattern3D")],jy);const JE=jy,jH=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var a3;let j0=a3=class extends JE{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new a3(t)}};b([S({type:["style"]})],j0.prototype,"type",void 0),b([S({type:jH,json:{read:!0,write:!0}})],j0.prototype,"style",void 0),j0=a3=b([J("esri.symbols.patterns.StylePattern3D")],j0);const KE=j0,DH={types:{key:"type",base:JE,typeMap:{style:KE}},json:{write:!0}},YE={types:{key:"type",base:WE,typeMap:{style:r4}},json:{write:!0}},Id=new et("white");new et("black");const FH=new et([255,255,255,0]);function zH(t){return t.r===0&&t.g===0&&t.b===0}var l3;let Ed=l3=class extends Ds{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new l3(t)}};b([De({multiply:"multiply",replace:"replace",tint:"tint"})],Ed.prototype,"colorMixMode",void 0),Ed=l3=b([J("esri.symbols.support.Symbol3DFillMaterial")],Ed);function s4(t=HH){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function n4(t,e,i,s,a,d,y=s4()){return y[0]=t,y[1]=e,y[2]=i,y[3]=s,y[4]=a,y[5]=d,y}function Bde(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new bt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Hde(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Wde(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function VH(t){return t[0]>=t[3]?0:t[3]-t[0]}function GH(t){return t[1]>=t[4]?0:t[4]-t[1]}function UH(t){return t[2]>=t[5]?0:t[5]-t[2]}function Jde(t,e=[0,0,0]){return e[0]=VH(t),e[1]=GH(t),e[2]=UH(t),e}function Kde(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function Yde(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function qH(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Zde(t){return t?qH(t,XS):s4(XS)}function Xde(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function BH(t,e,i,s,a){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=s,t[4]=a,t[5]=Number.POSITIVE_INFINITY,t}function u3(t){return t.length===6}function Qde(t,e,i){if(t==null||e==null)return t===e;if(!u3(t)||!u3(e))return!1;if(i){for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1}else for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}const XS=[1/0,1/0,1/0,-1/0,-1/0,-1/0],HH=[0,0,0,0,0,0];s4();const WH=n4(-.5,-.5,-.5,.5,.5,.5),JH=n4(-.5,-.5,0,.5,.5,1),KH=n4(-.5,-.5,0,.5,.5,.5);function efe(t){switch(t){case"sphere":case"cube":case"diamond":return WH;case"cylinder":case"cone":case"inverted-cone":return JH;case"tetrahedron":return KH;default:return}}const o4=["butt","square","round"],YH=[...o4,"none"],ZE=["miter","bevel","round"];var h3;let Au=h3=class extends ye{constructor(t){super(t),this.color=new et([0,0,0,1]),this.size=ya(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new h3(t)}};b([S(ru)],Au.prototype,"color",void 0),b([S(vo)],Au.prototype,"size",void 0),b([S(YE)],Au.prototype,"pattern",void 0),b([S({type:o4,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Au.prototype,"patternCap",void 0),Au=h3=b([J("esri.symbols.support.Symbol3DOutline")],Au);var Dy;let zo=Dy=class extends So{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Dy(t)}static fromSimpleFillSymbol(t){var s,a,d;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new r4({style:t.outline.style}):null,i={size:((s=t.outline)==null?void 0:s.width)??0,color:(((a=t.outline)==null?void 0:a.color)??Id).clone(),pattern:e};return e&&((d=t.outline)!=null&&d.cap)&&(i.patternCap=t.outline.cap),new Dy({material:new Ed({color:(t.color??FH).clone()}),pattern:t.style&&t.style!=="solid"?new KE({style:t.style}):null,outline:i})}};b([De({Fill:"fill"},{readOnly:!0})],zo.prototype,"type",void 0),b([S({type:Ed,json:{write:!0}})],zo.prototype,"material",void 0),b([S(DH)],zo.prototype,"pattern",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],zo.prototype,"castShadows",void 0),b([S({type:Au,json:{write:!0}})],zo.prototype,"outline",void 0),b([S(UE)],zo.prototype,"edges",void 0),zo=Dy=b([J("esri.symbols.FillSymbol3DLayer")],zo);const jf=zo,ZH=["none","underline","line-through"],XH=["normal","italic","oblique"],QH=["normal","lighter","bold","bolder"],XE={type:Number,cast:t=>{const e=Cs(t);return e===0?1:zs(e,.1,4)},nonNullable:!0},eW=["left","right","center"],tW=["baseline","top","middle","bottom"],QE={type:eW,nonNullable:!0},eA={type:tW,nonNullable:!0},tfe=8;var c3;let Vo=c3=class extends ye{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Bt(t)}clone(){return new c3({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};b([S({type:ZH,json:{default:"none",write:!0}})],Vo.prototype,"decoration",void 0),b([S({type:String,json:{write:!0}})],Vo.prototype,"family",void 0),b([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],Vo.prototype,"size",void 0),b([Ft("size")],Vo.prototype,"castSize",null),b([S({type:XH,json:{default:"normal",write:!0}})],Vo.prototype,"style",void 0),b([S({type:QH,json:{default:"normal",write:!0}})],Vo.prototype,"weight",void 0),Vo=c3=b([J("esri.symbols.Font")],Vo);const Mv=Vo;function Rp(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=ns(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const s=c5(t,e.portalItem.itemUrl);s!=null&&iW.test(s)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(s).path)}return p3(t,e&&e.portal)}function Df(t,e,i=of.YES){if(t==null)return t;!us(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let s=ns(t);if(e){const a=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(a){const d=p3(a,e.portal),y=p3(s,e.portal);s=c5(y,d,d),s!=null&&s!==y&&s!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=iA(s,e==null?void 0:e.portal),us(s)&&(s=Tn(s)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!us(s)&&!Vh(s)&&i===of.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(s),compress:!1}),s}function a4(t,e,i){return Rp(t,i)}function Ph(t,e,i,s){const a=Df(t,s);a!==void 0&&(e[i]=a)}const tA=/\/items\/([^\/]+)\/resources\/(.*)/,iW=/^\.\/resources\//;function rW(t){const e=(t==null?void 0:t.match(tA))??null;return(e==null?void 0:e[1])??null}function sW(t){const e=(t==null?void 0:t.match(tA))??null;if(e==null)return null;const i=e[2],s=i.lastIndexOf("/");if(s===-1){const{path:y,extension:g}=K6(i);return{prefix:null,filename:y,extension:g}}const{path:a,extension:d}=K6(i.slice(s+1));return{prefix:i.slice(0,s),filename:a,extension:d}}function iA(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?rw(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function p3(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,s=a5();return fp(s,`${s.scheme}://${i}`)?rw(t,e.portalHostname,i):rw(t,i,e.portalHostname)}var of;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(of||(of={}));const ife=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return of},ensureMainOnlineDomain:iA,fromJSON:Rp,itemIdFromResourceUrl:rW,prefixAndFilenameFromResourceUrl:sW,read:a4,toJSON:Df,write:Ph},Symbol.toStringTag,{value:"Module"}));var d3;const nW=$r()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ku=d3=class extends ye{constructor(t){super(t)}readHref(t,e,i){return t?Rp(t,i):e.dataURI}writeHref(t,e,i,s){t&&(Vh(t)?e.dataURI=t:(e.href=Df(t,s),us(e.href)&&(e.href=Tn(e.href))))}clone(){return new d3({href:this.href,primitive:this.primitive})}};b([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ku.prototype,"href",void 0),b([Ce("href")],ku.prototype,"readHref",null),b([ke("href",{href:{type:String},dataURI:{type:String}})],ku.prototype,"writeHref",null),b([De(nW)],ku.prototype,"primitive",void 0),ku=d3=b([J("esri.symbols.support.IconSymbol3DLayerResource")],ku);const rfe="circle";var f3;let Bc=f3=class extends je{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new f3({x:this.x,y:this.y})}};b([S({type:Number})],Bc.prototype,"x",void 0),b([S({type:Number})],Bc.prototype,"y",void 0),Bc=f3=b([J("esri.symbols.support.Symbol3DAnchorPosition2D")],Bc);var y3;let D0=y3=class extends ye{constructor(t){super(t),this.color=new et([0,0,0,1]),this.size=ya(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new y3(t)}};b([S(ru)],D0.prototype,"color",void 0),b([S(vo)],D0.prototype,"size",void 0),D0=y3=b([J("esri.symbols.support.Symbol3DIconOutline")],D0);var bc;const rA="esri.symbols.IconSymbol3DLayer";let Zn=bc=class extends So{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new bc({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||Id,i=QS(t),s=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||Id).clone()}:null;return new bc({size:t.size,resource:{primitive:aW(t.style)},material:{color:e},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||zH(t.color)?Id:t.color,i=QS(t);return new bc({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new bc({resource:{href:JT({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function QS(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,s=ex(t.xoffset),a=ex(t.yoffset);return(s||a)&&e&&i?{x:-s/e,y:a/i}:null}function ex(t){return isFinite(t)?t:0}b([S({type:Ds,json:{write:!0}})],Zn.prototype,"material",void 0),b([S({type:ku,json:{write:!0}})],Zn.prototype,"resource",void 0),b([De({Icon:"icon"},{readOnly:!0})],Zn.prototype,"type",void 0),b([S(vo)],Zn.prototype,"size",void 0),b([De({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),S({json:{default:"center"}})],Zn.prototype,"anchor",void 0),b([S({type:Bc,json:{type:[Number],read:{reader:t=>new Bc({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Zn.prototype,"anchorPosition",void 0),b([S({type:D0,json:{write:!0}})],Zn.prototype,"outline",void 0),Zn=bc=b([J(rA)],Zn);const oW={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function aW(t){return oW[t]||(me.getLogger(rA).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const hh=Zn;let Ou=class extends Ii(ye){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};b([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ou.prototype,"type",void 0),b([S({type:PH,json:{default:"begin-end",write:!0}})],Ou.prototype,"placement",void 0),b([S({type:BE,json:{default:"arrow",write:!0}})],Ou.prototype,"style",void 0),b([S({type:et,json:{type:[Pt],default:null,write:!0}})],Ou.prototype,"color",void 0),Ou=b([J("esri.symbols.LineStyleMarker3D")],Ou);const g3=Ou;var Fy;let Xn=Fy=class extends So{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=ya(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Fy(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??ya(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new r4({style:t.style}):null,material:new Ds({color:(t.color||Id).clone()}),marker:t.marker?new g3({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new Fy(e)}};b([S({type:Ds,json:{write:!0}})],Xn.prototype,"material",void 0),b([De({Line:"line"},{readOnly:!0})],Xn.prototype,"type",void 0),b([S({type:ZE,json:{write:!0,default:"miter"}})],Xn.prototype,"join",void 0),b([S({type:o4,json:{write:!0,default:"butt"}})],Xn.prototype,"cap",void 0),b([S(vo)],Xn.prototype,"size",void 0),b([S(YE)],Xn.prototype,"pattern",void 0),b([S({types:{key:"type",base:g3,typeMap:{style:g3}},json:{write:!0}})],Xn.prototype,"marker",void 0),Xn=Fy=b([J("esri.symbols.LineSymbol3DLayer")],Xn);const Ff=Xn;var m3;const lW=$r()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let F0=m3=class extends ye{clone(){return new m3({href:this.href,primitive:this.primitive})}};b([S({type:String,json:{read:a4,write:Ph}})],F0.prototype,"href",void 0),b([De(lW)],F0.prototype,"primitive",void 0),F0=m3=b([J("esri.symbols.support.ObjectSymbol3DLayerResource")],F0);const nfe="sphere";var v3;let th=v3=class extends je{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new v3({x:this.x,y:this.y,z:this.z})}};b([S({type:Number})],th.prototype,"x",void 0),b([S({type:Number})],th.prototype,"y",void 0),b([S({type:Number})],th.prototype,"z",void 0),th=v3=b([J("esri.symbols.support.Symbol3DAnchorPosition3D")],th);var b3;let yr=b3=class extends So{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new b3({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};b([S({type:Ds,json:{write:!0}})],yr.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],yr.prototype,"castShadows",void 0),b([S({type:F0,json:{write:!0}})],yr.prototype,"resource",void 0),b([De({Object:"object"},{readOnly:!0})],yr.prototype,"type",void 0),b([S({type:Number,json:{write:!0}})],yr.prototype,"width",void 0),b([S({type:Number,json:{write:!0}})],yr.prototype,"height",void 0),b([S({type:Number,json:{write:!0}})],yr.prototype,"depth",void 0),b([De({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),S({json:{default:"origin"}})],yr.prototype,"anchor",void 0),b([S({type:th,json:{type:[Number],read:{reader:t=>new th({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],yr.prototype,"anchorPosition",void 0),b([S({type:Number,json:{write:!0}})],yr.prototype,"heading",void 0),b([S({type:Number,json:{write:!0}})],yr.prototype,"tilt",void 0),b([S({type:Number,json:{write:!0}})],yr.prototype,"roll",void 0),b([S({readOnly:!0})],yr.prototype,"isPrimitive",null),yr=b3=b([J("esri.symbols.ObjectSymbol3DLayer")],yr);const l4=yr;var w3;let Mr=w3=class extends So{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new w3({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};b([S({type:Ds,json:{write:!0}})],Mr.prototype,"material",void 0),b([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Mr.prototype,"castShadows",void 0),b([De({Path:"path"},{readOnly:!0})],Mr.prototype,"type",void 0),b([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],Mr.prototype,"profile",void 0),b([S({type:ZE,json:{write:!0,default:"miter"}})],Mr.prototype,"join",void 0),b([S({type:YH,json:{write:!0,default:"butt"}})],Mr.prototype,"cap",void 0),b([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Mr.prototype,"width",void 0),b([Ce("width",["width","size","height"])],Mr.prototype,"readWidth",null),b([S({type:Number,json:{write:!0}})],Mr.prototype,"height",void 0),b([Ce("height",["height","size","width"])],Mr.prototype,"readHeight",null),b([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Mr.prototype,"anchor",void 0),b([S({type:["heading","all"],json:{write:!0,default:"all"}})],Mr.prototype,"profileRotation",void 0),Mr=w3=b([J("esri.symbols.PathSymbol3DLayer")],Mr);const u4=Mr;var _3;let Hc=_3=class extends ye{constructor(){super(...arguments),this.color=new et([0,0,0,1]),this.size=0}clone(){const t={color:ae(this.color),size:this.size};return new _3(t)}};b([S(ru)],Hc.prototype,"color",void 0),b([S(vo)],Hc.prototype,"size",void 0),Hc=_3=b([J("esri.symbols.support.Symbol3DHalo")],Hc);let Ad=class extends Ii(ye){constructor(e){super(e),this.color=null}};b([S(ru)],Ad.prototype,"color",void 0),Ad=b([J("esri.symbols.support.Symbol3DTextBackground")],Ad);var zy;let jr=zy=class extends So{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){t!=null&&this._userSize!=null&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,s){const a={...s,textSymbol3D:!0};e.font=t.write({},a),delete e.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new zy({enabled:this.enabled,font:this.font&&ae(this.font),halo:this.halo&&ae(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ae(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new zy({font:t.font!=null?t.font.clone():new Mv,halo:uW(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Ds({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new Ad({color:t.backgroundColor.clone()}):null})}};function uW(t,e){return t&&e!=null&&e>0?new Hc({color:ae(t),size:e}):null}b([S({type:Mv,json:{write:!0}})],jr.prototype,"font",null),b([ke("font")],jr.prototype,"writeFont",null),b([S({type:Hc,json:{write:!0}})],jr.prototype,"halo",void 0),b([S({...QE,json:{default:"center",write:!0}})],jr.prototype,"horizontalAlignment",void 0),b([S({...XE,json:{default:1,write:!0}})],jr.prototype,"lineHeight",void 0),b([S({type:Ds,json:{write:!0}})],jr.prototype,"material",void 0),b([S({type:Ad,json:{write:!0}})],jr.prototype,"background",void 0),b([S(vo)],jr.prototype,"size",null),b([S({type:String,json:{write:!0}})],jr.prototype,"text",void 0),b([De({Text:"text"},{readOnly:!0})],jr.prototype,"type",void 0),b([S({...eA,json:{default:"baseline",write:!0}})],jr.prototype,"verticalAlignment",void 0),jr=zy=b([J("esri.symbols.TextSymbol3DLayer")],jr);const jp=jr;var S3;let Ya=S3=class extends So{constructor(t){super(t),this.color=x3.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new S3({color:ae(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};b([S({type:et,nonNullable:!0,json:{type:[Pt],write:(t,e,i)=>e[i]=t.toArray(et.AlphaMode.UNLESS_OPAQUE),default:()=>x3.clone(),defaultEquals:t=>t.toCss(!0)===x3.toCss(!0)}})],Ya.prototype,"color",void 0),b([De({Water:"water"},{readOnly:!0})],Ya.prototype,"type",void 0),b([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Ya.prototype,"waterbodySize",void 0),b([S({type:Number,json:{write:!0,default:null}})],Ya.prototype,"waveDirection",void 0),b([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Ya.prototype,"waveStrength",void 0),Ya=S3=b([J("esri.symbols.WaterSymbol3DLayer")],Ya);const x3=new et([0,119,190]),sA=Ya;var $3;let Cu=$3=class extends je{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new $3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};b([S({type:String})],Cu.prototype,"name",void 0),b([S({type:String})],Cu.prototype,"styleUrl",void 0),b([S({type:String})],Cu.prototype,"styleName",void 0),b([S({type:ar})],Cu.prototype,"portal",void 0),Cu=$3=b([J("esri.symbols.support.StyleOrigin")],Cu);const T3=Cu;var M3;let kd=M3=class extends je{constructor(){super(...arguments),this.url=""}clone(){return new M3({url:this.url})}};b([S({type:String})],kd.prototype,"url",void 0),kd=M3=b([J("esri.symbols.support.Thumbnail")],kd);const nA={icon:hh,object:l4,line:Ff,path:u4,fill:jf,extrude:qE,text:jp,water:sA},hW=Ge.ofType({base:So,key:"type",typeMap:nA,errorContext:"symbol-layer"});let Qn=class extends Br{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,s=i&&i.type||Ge;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&me.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){$h(e,this._get("symbolLayers"))}readStyleOrigin(e,i,s){if(e.styleUrl&&e.name){const a=Rp(e.styleUrl,s);return new T3({styleUrl:a,name:e.name})}if(e.styleName&&e.name)return new T3({portal:s&&s.portal||ar.getDefault(),styleName:e.styleName,name:e.name});s&&s.messages&&s.messages.push(new Cn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:s,definition:e}))}writeStyleOrigin(e,i,s,a){if(e.styleUrl&&e.name){let d=Df(e.styleUrl,a);us(d)&&(d=Tn(d)),i.styleOrigin={styleUrl:d,name:e.name}}else e.styleName&&e.name&&(e.portal&&a&&a.portal&&!HT(e.portal.restUrl,a.portal.restUrl)?a&&a.messages&&a.messages.push(new Cn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof So||e&&nA[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};b([S({json:{read:!1,write:!1}})],Qn.prototype,"color",null),b([S({type:hW,nonNullable:!0,json:{write:!0}}),Ft(LT)],Qn.prototype,"symbolLayers",null),b([S({type:T3})],Qn.prototype,"styleOrigin",void 0),b([Ce("styleOrigin")],Qn.prototype,"readStyleOrigin",null),b([ke("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Qn.prototype,"writeStyleOrigin",null),b([S({type:kd,json:{read:!1}})],Qn.prototype,"thumbnail",void 0),b([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Qn.prototype,"type",void 0),Qn=b([J("esri.symbols.Symbol3D")],Qn);const Dp=Qn;let z0=class extends ye{constructor(e){super(e),this.visible=!0}clone(){}};b([S({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],z0.prototype,"type",void 0),b([S({readOnly:!0})],z0.prototype,"visible",void 0),z0=b([J("esri.symbols.callouts.Callout3D")],z0);const oA=z0;var I3;let Vy=I3=class extends ye{constructor(){super(...arguments),this.color=new et("white")}clone(){return new I3({color:ae(this.color)})}};b([S(ru)],Vy.prototype,"color",void 0),Vy=I3=b([J("esri.symbols.callouts.LineCallout3DBorder")],Vy);const aA=Vy;Object.freeze(Object.defineProperty({__proto__:null,default:aA},Symbol.toStringTag,{value:"Module"}));var E3;let Za=E3=class extends oA{constructor(t){super(t),this.type="line",this.color=new et([0,0,0,1]),this.size=ya(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new E3({color:ae(this.color),size:this.size,border:ae(this.border)})}};b([De({line:"line"},{readOnly:!0})],Za.prototype,"type",void 0),b([S(ru)],Za.prototype,"color",void 0),b([S(vo)],Za.prototype,"size",void 0),b([S({type:aA,json:{write:!0}})],Za.prototype,"border",void 0),b([S({readOnly:!0})],Za.prototype,"visible",null),Za=E3=b([J("esri.symbols.callouts.LineCallout3D")],Za);const cW=Za;function h4(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function lA(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!h4(t)}const uA={types:{key:"type",base:oA,typeMap:{line:cW}},json:{write:!0}};var A3;let wc=A3=class extends ye{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new A3({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};b([S(vo)],wc.prototype,"screenLength",void 0),b([S({type:Number,nonNullable:!0,json:{write:!0,default:0}})],wc.prototype,"minWorldLength",void 0),b([S({type:Number,json:{write:!0}})],wc.prototype,"maxWorldLength",void 0),wc=A3=b([J("esri.symbols.support.Symbol3DVerticalOffset")],wc);const hA=wc;var Gy;const cA=Ge.ofType({base:null,key:"type",typeMap:{text:jp}});let Xa=Gy=class extends Dp{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new cA,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return lA(this)}hasVisibleVerticalOffset(){return h4(this)}clone(){return new Gy({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail),callout:ae(this.callout),verticalOffset:ae(this.verticalOffset)})}static fromTextSymbol(t){return new Gy({symbolLayers:[jp.fromTextSymbol(t)]})}};b([S({type:hA,json:{write:!0}})],Xa.prototype,"verticalOffset",void 0),b([S(uA)],Xa.prototype,"callout",void 0),b([S({json:{read:!1,write:!1}})],Xa.prototype,"styleOrigin",void 0),b([S({type:cA})],Xa.prototype,"symbolLayers",void 0),b([De({LabelSymbol3D:"label-3d"},{readOnly:!0})],Xa.prototype,"type",void 0),Xa=Gy=b([J("esri.symbols.LabelSymbol3D")],Xa);const Iv=Xa;var Uy;const pA=Ge.ofType({base:null,key:"type",typeMap:{line:Ff,path:u4}}),pW=Ge.ofType({base:null,key:"type",typeMap:{line:Ff,path:u4}});let V0=Uy=class extends Dp{constructor(t){super(t),this.symbolLayers=new pA,this.type="line-3d"}clone(){return new Uy({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleLineSymbol(t){return new Uy({symbolLayers:[Ff.fromSimpleLineSymbol(t)]})}};b([S({type:pA,json:{type:pW}})],V0.prototype,"symbolLayers",void 0),b([De({LineSymbol3D:"line-3d"},{readOnly:!0})],V0.prototype,"type",void 0),V0=Uy=b([J("esri.symbols.LineSymbol3D")],V0);const Ev=V0;let Qa=class extends Br{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};b([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Qa.prototype,"angle",void 0),b([S({type:["simple-marker","picture-marker"],readOnly:!0})],Qa.prototype,"type",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],Qa.prototype,"xoffset",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],Qa.prototype,"yoffset",void 0),b([S({type:Number,cast:t=>t==="auto"?t:Bt(t),json:{write:!0}})],Qa.prototype,"size",void 0),Qa=b([J("esri.symbols.MarkerSymbol")],Qa);const dA=Qa;var qy;const fA=Ge.ofType({base:null,key:"type",typeMap:{fill:jf}});let G0=qy=class extends Dp{constructor(t){super(t),this.symbolLayers=new fA,this.type="mesh-3d"}clone(){return new qy({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleFillSymbol(t){return new qy({symbolLayers:[jf.fromSimpleFillSymbol(t)]})}};b([S({type:fA})],G0.prototype,"symbolLayers",void 0),b([De({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],G0.prototype,"type",void 0),G0=qy=b([J("esri.symbols.MeshSymbol3D")],G0);const Av=G0;function dW(t,e,i){return e.imageData?JT({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):yA(e.url,i)}function yA(t,e){var i;return yW(e)&&!us(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?Th(e.layer.parsedUrl.path,"images",t):Rp(t,e)}function fW(t,e,i,s){if(Vh(t)){const a=Zd(t);if(!a)return;e.contentType=a.mediaType,e.imageData=a.data,i&&i.imageData===e.imageData&&i.url&&Ph(i.url,e,"url",s)}else Ph(t,e,"url",s)}const gA={json:{read:{source:["imageData","url"],reader:dW},write:{writer(t,e,i,s){fW(t,e,this.source,s)}}}},mA={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const s={};return e.imageData&&(s.imageData=e.imageData),e.contentType&&(s.contentType=e.contentType),e.url&&(s.url=yA(e.url,i)),s}}}};function yW(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var k3;let Ts=k3=class extends HE{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string"&&t.imageData==null)return t;const a={};return t&&(a.url=t),e&&(a.outline=e),i!=null&&(a.width=Bt(i)),s!=null&&(a.height=Bt(s)),a}clone(){const t=new k3({color:ae(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",ae(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};b([De({esriPFS:"picture-fill"},{readOnly:!0})],Ts.prototype,"type",void 0),b([S(gA)],Ts.prototype,"url",void 0),b([S({type:Number,json:{write:!0}})],Ts.prototype,"xscale",void 0),b([S({type:Number,json:{write:!0}})],Ts.prototype,"yscale",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],Ts.prototype,"width",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],Ts.prototype,"height",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],Ts.prototype,"xoffset",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],Ts.prototype,"yoffset",void 0),b([S(mA)],Ts.prototype,"source",void 0),Ts=k3=b([J("esri.symbols.PictureFillSymbol")],Ts);const vA=Ts;var O3;let rn=O3=class extends dA{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e!=null&&(s.width=Bt(e)),i!=null&&(s.height=Bt(i)),s}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new O3({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",ae(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};b([S({json:{write:!1}})],rn.prototype,"color",void 0),b([De({esriPMS:"picture-marker"},{readOnly:!0})],rn.prototype,"type",void 0),b([S(gA)],rn.prototype,"url",void 0),b([S(mA)],rn.prototype,"source",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],rn.prototype,"height",void 0),b([Ce("height",["height","size"])],rn.prototype,"readHeight",null),b([S({type:Number,cast:Bt,json:{write:!0}})],rn.prototype,"width",void 0),b([S({json:{write:!1}})],rn.prototype,"size",void 0),rn=O3=b([J("esri.symbols.PictureMarkerSymbol")],rn);const zf=rn;var Pu;const bA=Ge.ofType({base:null,key:"type",typeMap:{icon:hh,object:l4,text:jp}});let Nu=Pu=class extends Dp{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new bA,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return lA(this)}hasVisibleVerticalOffset(){return h4(this)}clone(){return new Pu({verticalOffset:ae(this.verticalOffset),callout:ae(this.callout),styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new Pu({symbolLayers:[hh.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new Pu({symbolLayers:[hh.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var s,a;if(((a=(s=t.data)==null?void 0:s.symbol)==null?void 0:a.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new Pu(i!=null&&i.callout?{symbolLayers:[hh.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[hh.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new Pu({symbolLayers:[jp.fromTextSymbol(t)]})}};b([S({type:hA,json:{write:!0}})],Nu.prototype,"verticalOffset",void 0),b([S(uA)],Nu.prototype,"callout",void 0),b([S({type:bA,json:{origins:{"web-scene":{write:!0}}}})],Nu.prototype,"symbolLayers",void 0),b([De({PointSymbol3D:"point-3d"},{readOnly:!0})],Nu.prototype,"type",void 0),Nu=Pu=b([J("esri.symbols.PointSymbol3D")],Nu);const ch=Nu;var U0;const wA=Ge.ofType({base:null,key:"type",typeMap:{extrude:qE,fill:jf,icon:hh,line:Ff,object:l4,text:jp,water:sA}});let q0=U0=class extends Dp{constructor(t){super(t),this.symbolLayers=new wA,this.type="polygon-3d"}clone(){return new U0({styleOrigin:ae(this.styleOrigin),symbolLayers:ae(this.symbolLayers),thumbnail:ae(this.thumbnail)})}static fromJSON(t){const e=new U0;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),s=e.symbolLayers.at(1);!s.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new U0({symbolLayers:[jf.fromSimpleFillSymbol(t)]})}};b([S({type:wA,json:{write:!0}})],q0.prototype,"symbolLayers",void 0),b([De({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],q0.prototype,"type",void 0),q0=U0=b([J("esri.symbols.PolygonSymbol3D")],q0);const Vf=q0;var C3;const P2=new Nt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Lu=C3=class extends HE{constructor(...t){super(...t),this.color=new et([0,0,0,.25]),this.outline=new ps,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e&&(s.outline=e),i&&(s.color=i),s}clone(){return new C3({color:ae(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};b([S()],Lu.prototype,"color",void 0),b([S()],Lu.prototype,"outline",void 0),b([De({esriSFS:"simple-fill"},{readOnly:!0})],Lu.prototype,"type",void 0),b([S({type:P2.apiValues,json:{read:P2.read,write:P2.write}})],Lu.prototype,"style",void 0),Lu=C3=b([J("esri.symbols.SimpleFillSymbol")],Lu);const su=Lu;var P3;const N2=new Nt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let eo=P3=class extends dA{constructor(...t){super(...t),this.color=new et([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ps}normalizeCtorArgs(t,e,i,s){if(t&&typeof t!="string")return t;const a={};return t&&(a.style=t),e!=null&&(a.size=Bt(e)),i&&(a.outline=i),s&&(a.color=s),a}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new P3({angle:this.angle,color:ae(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};b([S()],eo.prototype,"color",void 0),b([ke("color")],eo.prototype,"writeColor",null),b([De({esriSMS:"simple-marker"},{readOnly:!0})],eo.prototype,"type",void 0),b([S()],eo.prototype,"size",void 0),b([S({type:N2.apiValues,json:{read:N2.read,write:N2.write}})],eo.prototype,"style",void 0),b([S({type:String,json:{write:!0}})],eo.prototype,"path",null),b([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ps}},json:{default:null,write:!0}})],eo.prototype,"outline",void 0),eo=P3=b([J("esri.symbols.SimpleMarkerSymbol")],eo);const nu=eo;var N3;let ti=N3=class extends Br{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Mv,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const s={};return t&&(s.text=t),e&&(s.font=e),i&&(s.color=i),s}writeLineWidth(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}castLineWidth(t){return Bt(t)}writeLineHeight(t,e,i,s){s&&typeof s!="string"?s.origin:e[i]=t}clone(){return new N3({angle:this.angle,backgroundColor:ae(this.backgroundColor),borderLineColor:ae(this.borderLineColor),borderLineSize:this.borderLineSize,color:ae(this.color),font:this.font&&this.font.clone(),haloColor:ae(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};b([S({type:et,json:{write:!0}})],ti.prototype,"backgroundColor",void 0),b([S({type:et,json:{write:!0}})],ti.prototype,"borderLineColor",void 0),b([S({type:Number,json:{write:!0},cast:Bt})],ti.prototype,"borderLineSize",void 0),b([S({type:Mv,json:{write:!0}})],ti.prototype,"font",void 0),b([S({...QE,json:{write:!0}})],ti.prototype,"horizontalAlignment",void 0),b([S({type:Boolean,json:{write:!0}})],ti.prototype,"kerning",void 0),b([S({type:et,json:{write:!0}})],ti.prototype,"haloColor",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],ti.prototype,"haloSize",void 0),b([S({type:Boolean,json:{write:!0}})],ti.prototype,"rightToLeft",void 0),b([S({type:Boolean,json:{write:!0}})],ti.prototype,"rotated",void 0),b([S({type:String,json:{write:!0}})],ti.prototype,"text",void 0),b([De({esriTS:"text"},{readOnly:!0})],ti.prototype,"type",void 0),b([S({...eA,json:{write:!0}})],ti.prototype,"verticalAlignment",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],ti.prototype,"xoffset",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],ti.prototype,"yoffset",void 0),b([S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],ti.prototype,"angle",void 0),b([S({type:Number,json:{write:!0}})],ti.prototype,"width",void 0),b([S({type:Number})],ti.prototype,"lineWidth",void 0),b([ke("lineWidth")],ti.prototype,"writeLineWidth",null),b([Ft("lineWidth")],ti.prototype,"castLineWidth",null),b([S(XE)],ti.prototype,"lineHeight",void 0),b([ke("lineHeight")],ti.prototype,"writeLineHeight",null),ti=N3=b([J("esri.symbols.TextSymbol")],ti);const Bh=ti;var L3;let sn=L3=class extends Br{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:ar.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new L3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=e!=null?e.cache:null,s=i?this._fetchCacheKey:null;if(i!=null){const g=s&&i.get(s);if(g)return g.clone()}const{resolveWebStyleSymbol:a}=await _e(()=>import("./webStyleSymbolUtils-8aaf42ac.js"),["assets/webStyleSymbolUtils-8aaf42ac.js","assets/devEnvironmentUtils-5002a058.js"]);Xt(e);const d=a(this,{portal:this.portal},t,e);d.catch(g=>{me.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",g)});const y=await d;return t==="webRef"&&y.type==="point-3d"||t==="cimRef"&&y.type==="cim"?(i!=null&&i.set(s,y.clone()),y):null}};b([S({json:{write:!1}})],sn.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],sn.prototype,"styleName",void 0),b([S({type:ar,json:{write:!1}})],sn.prototype,"portal",void 0),b([S({type:String,json:{read:a4,write:Ph}})],sn.prototype,"styleUrl",void 0),b([S({type:kd,json:{read:!1}})],sn.prototype,"thumbnail",void 0),b([S({type:String,json:{write:!0}})],sn.prototype,"name",void 0),b([De({styleSymbolReference:"web-style"},{readOnly:!0})],sn.prototype,"type",void 0),b([S()],sn.prototype,"_fetchCacheKey",null),sn=L3=b([J("esri.symbols.WebStyleSymbol")],sn);const Hh=sn;function hfe(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function R3(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const rp={base:Br,key:"type",typeMap:{"simple-fill":su,"picture-fill":vA,"picture-marker":zf,"simple-line":ps,"simple-marker":nu,text:Bh,"label-3d":Iv,"line-3d":Ev,"mesh-3d":Av,"point-3d":ch,"polygon-3d":Vf,"web-style":Hh,cim:Rf},errorContext:"symbol"},cfe={base:Br,key:"type",typeMap:{"picture-marker":zf,"simple-marker":nu,text:Bh,"web-style":Hh,cim:Rf},errorContext:"symbol"},gW=If({types:rp}),mW={base:Br,key:"type",typeMap:{"simple-fill":su,"picture-fill":vA,"picture-marker":zf,"simple-line":ps,"simple-marker":nu,text:Bh,"line-3d":Ev,"mesh-3d":Av,"point-3d":ch,"polygon-3d":Vf,"web-style":Hh,cim:Rf},errorContext:"symbol"},vW={base:Br,key:"type",typeMap:{text:Bh,"label-3d":Iv},errorContext:"symbol"},tx={base:Br,key:"type",typeMap:{"line-3d":Ev,"mesh-3d":Av,"point-3d":ch,"polygon-3d":Vf,"web-style":Hh,cim:Rf},errorContext:"symbol"},bW={base:Br,key:"type",typeMap:{"label-3d":Iv},errorContext:"symbol"},_A=pa(rp);var j3;function wW(t){if(!t)return null;const e={};for(const i in t){const s=Hl(t[i]);s&&(e[i]=s)}return Object.keys(e).length!==0?e:null}function _W(t){if(t==null)return null;const e={};for(const i in t){const s=t[i];s&&(e[i]=s.toJSON())}return Object.keys(e).length!==0?e:null}let Dr=j3=class extends Ii(ye){constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:bd(),configurable:!0})}normalizeCtorArgs(t,e,i,s){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:i,popupTemplate:s}}set aggregateGeometries(t){const e=this._get("aggregateGeometries");JSON.stringify(e)!==JSON.stringify(t)&&this._set("aggregateGeometries",t)}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t))}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t))}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t))}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t))}cloneShallow(){return new j3({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of[this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate!=null)return e.defaultPopupTemplate}return null}getAttribute(t){var e;return(e=this.attributes)==null?void 0:e[t]}setAttribute(t,e){if(this.attributes){const i=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",i,e,t)}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:_W(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(t={}){const{geometry:e}=this;if((e==null?void 0:e.type)==="mesh"){const i={origin:e.origin,transform:e.transform};this._notifyLayer("origin-transform",i,i,t.action)}}_notifyLayer(t,e,i,s){if(!this.layer||!("graphicChanged"in this.layer))return;const a={graphic:this,property:t,oldValue:e,newValue:i};t==="origin-transform"&&(a.action=s),t==="attributes"&&(a.attributeName=s),this.layer.graphicChanged(a)}};b([S({value:null,json:{read:wW}})],Dr.prototype,"aggregateGeometries",null),b([S({value:null})],Dr.prototype,"attributes",null),b([S({value:null,types:kp,json:{read:Hl}})],Dr.prototype,"geometry",null),b([S({type:Boolean})],Dr.prototype,"isAggregate",void 0),b([S({clonable:"reference"})],Dr.prototype,"layer",void 0),b([S({type:Lf})],Dr.prototype,"popupTemplate",void 0),b([S({clonable:"reference"})],Dr.prototype,"sourceLayer",void 0),b([S({value:null,types:rp})],Dr.prototype,"symbol",null),b([S({type:Boolean,value:!0})],Dr.prototype,"visible",null),Dr=j3=b([J("esri.Graphic")],Dr),function(t){t.generateUID=bd}(Dr||(Dr={}));const Nr=Dr;let c4=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,s,a=0,d=!1){return(s-=a)<e?s+=this.ndiff(e-s):s>i&&(s-=this.ndiff(s-i)),d&&s===i&&(s=e),s+a}normalize(e,i=0,s=!1){return this._normalize(this.min,this.max,e,i,s)}clamp(e,i=0){return zs(e-i,this.min,this.max)+i}monotonic(e,i,s){return e<i?i:i+this.ndiff(e-i,s)}minimalMonotonic(e,i,s){return this._normalize(e,e+this.range,i,s)}center(e,i,s){return i=this.monotonic(e,i,s),this.normalize((e+i)/2,s)}diff(e,i,s){return this.monotonic(e,i,s)-e}shortestSignedDiff(e,i){e=this.normalize(e);const s=(i=this.normalize(i))-e,a=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(s)<Math.abs(a)?s:a}contains(e,i,s){return i=this.minimalMonotonic(e,i),(s=this.minimalMonotonic(e,s))>e&&s<i}};function p4(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}p4(new c4(0,2*Math.PI));p4(new c4(-Math.PI,Math.PI));const SW=p4(new c4(0,360));let Go=class extends Ii(ye){constructor(...e){super(...e),this.position=new Ue([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,s,a){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const d={position:e};return i!=null&&(d.heading=i),s!=null&&(d.tilt=s),a!=null&&(d.fov=a),d}return e}writePosition(e,i,s,a){const d=e.clone();d.x=Cs(e.x||0),d.y=Cs(e.y||0),d.z=e.hasZ?Cs(e.z||0):e.z,i[s]=d.write({},a)}readPosition(e,i){const s=new Ue;return s.read(e,i),s.x=Cs(s.x||0),s.y=Cs(s.y||0),s.z=s.hasZ?Cs(s.z||0):s.z,s}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};b([S({type:Ue,json:{write:{isRequired:!0}}})],Go.prototype,"position",void 0),b([ke("position")],Go.prototype,"writePosition",null),b([Ce("position")],Go.prototype,"readPosition",null),b([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ft(t=>SW.normalize(Cs(t)))],Go.prototype,"heading",void 0),b([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ft(t=>zs(Cs(t),-180,180))],Go.prototype,"tilt",void 0),b([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Go.prototype,"fov",void 0),Go=b([J("esri.Camera")],Go);const xW=Go;var D3;let el=D3=class extends ye{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new D3({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function L2(){return{enabled:!this.camera}}b([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:L2}}}}})],el.prototype,"rotation",void 0),b([Ft("rotation")],el.prototype,"castRotation",null),b([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:L2}}}}})],el.prototype,"scale",void 0),b([S({types:kp,json:{read:Hl,write:!0,origins:{"web-scene":{read:Hl,write:{overridePolicy:L2}}}}})],el.prototype,"targetGeometry",void 0),b([S({type:xW,json:{write:!0}})],el.prototype,"camera",void 0),el=D3=b([J("esri.Viewpoint")],el);const po=el;function Me(t,e,i={}){return d4(t,e,i,SA)}function Jl(t,e,i={}){return d4(t,e,i,xA)}function d4(t,e,i={},s){let a=null;const d=i.once?(y,g)=>{s(y)&&(li(a),e(y,g))}:(y,g)=>{s(y)&&e(y,g)};if(a=wj(t,d,i.sync,i.equals),i.initial){const y=t();d(y,y)}return a}function Nh(t,e,i,s={}){let a=null,d=null,y=null;function g(){var I;a&&d&&(d.remove(),(I=s.onListenerRemove)==null||I.call(s,a),a=null,d=null)}function _(I){s.once&&s.once&&li(y),i(I)}const x=Me(t,(I,A)=>{var C;g(),sv(I)&&(a=I,d=nv(I,e,_),(C=s.onListenerAdd)==null||C.call(s,I))},{sync:s.sync,initial:!0});return y=yo(()=>{x.remove(),g()}),y}function af(t,e){return $W(t,xA,e)}function $W(t,e,i){if(Fs(i))return Promise.reject(ni());const s=t();if(e!=null&&e(s))return Promise.resolve(s);let a=null;function d(){a=li(a)}return new Promise((y,g)=>{a=Xm([ls(i,()=>{d(),g(ni())}),d4(t,_=>{d(),y(_)},{sync:!1,once:!0},e??SA)])})}function SA(t){return!0}function xA(t){return!!t}const Fp={sync:!0},vt={initial:!0},ea={sync:!0,initial:!0};let pm=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new cv,this._items=new Set}get length(){return Ke(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ke(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(s=>{e(s)||this._items.delete(s)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ke(this._observable),yield*this._items}};const TW={statsWorker:()=>_e(()=>import("./statsWorker-2cc1773a.js"),["assets/statsWorker-2cc1773a.js","assets/quantizationUtils-7a483037.js","assets/utils-589b0f1d.js","assets/generateRendererUtils-b8ecb23e.js"]),geometryEngineWorker:()=>_e(()=>import("./geometryEngineWorker-de896437.js"),["assets/geometryEngineWorker-de896437.js","assets/geometryEngineJSON-534b66aa.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>_e(()=>import("./CSVSourceWorker-83dfb910.js"),["assets/CSVSourceWorker-83dfb910.js","assets/json-48e3ea08.js","assets/FeatureStore-c1aa5983.js","assets/BoundsStore-bd1fcf6b.js","assets/PooledRBush-bfcac9e8.js","assets/projectionSupport-b33ba616.js","assets/timeSupport-bbcd0047.js","assets/QueryEngine-2d935593.js","assets/WhereClause-c83dcc9b.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-7a483037.js","assets/utils-589b0f1d.js","assets/generateRendererUtils-b8ecb23e.js","assets/number-1a84fa92.js","assets/clientSideDefaults-2ab47af4.js"]),EdgeProcessingWorker:()=>_e(()=>import("./EdgeProcessingWorker-d75d9062.js"),["assets/EdgeProcessingWorker-d75d9062.js","assets/InterleavedLayout-97b420dd.js","assets/BufferView-ed587754.js","assets/types-1305598a.js","assets/edgeProcessing-65c5bd7a.js","assets/deduplicate-bcef8d64.js","assets/Indices-79a50390.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>_e(()=>import("./ElevationSamplerWorker-10f2967d.js"),["assets/ElevationSamplerWorker-10f2967d.js","assets/PooledRBush-bfcac9e8.js","assets/georeference-13a6e65f.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-2c452f46.js","assets/MeshLocalVertexSpace-eed424c3.js","assets/MeshGeoreferencedRelativeVertexSpace-578fc903.js","assets/quat-0e1007d7.js","assets/quatf64-3363c48e.js","assets/vec32-33d99223.js","assets/BufferView-ed587754.js"]),FeatureServiceSnappingSourceWorker:()=>_e(()=>import("./FeatureServiceSnappingSourceWorker-a6eadf20.js"),["assets/FeatureServiceSnappingSourceWorker-a6eadf20.js","assets/FeatureStore-c1aa5983.js","assets/BoundsStore-bd1fcf6b.js","assets/PooledRBush-bfcac9e8.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/timeSupport-bbcd0047.js","assets/QueryEngine-2d935593.js","assets/WhereClause-c83dcc9b.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-7a483037.js","assets/utils-589b0f1d.js","assets/generateRendererUtils-b8ecb23e.js","assets/byteSizeEstimations-7cf1c05d.js"]),GeoJSONSourceWorker:()=>_e(()=>import("./GeoJSONSourceWorker-551b47a1.js"),["assets/GeoJSONSourceWorker-551b47a1.js","assets/FeatureStore-c1aa5983.js","assets/BoundsStore-bd1fcf6b.js","assets/PooledRBush-bfcac9e8.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/timeSupport-bbcd0047.js","assets/QueryEngine-2d935593.js","assets/WhereClause-c83dcc9b.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-7a483037.js","assets/utils-589b0f1d.js","assets/generateRendererUtils-b8ecb23e.js","assets/geojson-1f96c2e8.js","assets/clientSideDefaults-2ab47af4.js","assets/sourceUtils-bb287bfb.js"]),LercWorker:()=>_e(()=>import("./LercWorker-f13907b6.js"),[]),MemorySourceWorker:()=>_e(()=>import("./MemorySourceWorker-4752a354.js"),["assets/MemorySourceWorker-4752a354.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-c1aa5983.js","assets/BoundsStore-bd1fcf6b.js","assets/PooledRBush-bfcac9e8.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/timeSupport-bbcd0047.js","assets/QueryEngine-2d935593.js","assets/WhereClause-c83dcc9b.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-7a483037.js","assets/utils-589b0f1d.js","assets/generateRendererUtils-b8ecb23e.js","assets/clientSideDefaults-2ab47af4.js","assets/sourceUtils-bb287bfb.js"]),PBFDecoderWorker:()=>_e(()=>import("./PBFDecoderWorker-e7456f85.js"),[]),Pipeline:()=>_e(()=>import("./Pipeline-626864af.js"),["assets/Pipeline-626864af.js","assets/QueryEngine-2d935593.js","assets/WhereClause-c83dcc9b.js","assets/executionError-c92d3b85.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-7a483037.js","assets/timeSupport-bbcd0047.js","assets/utils-589b0f1d.js","assets/generateRendererUtils-b8ecb23e.js","assets/FeatureStore2D-5ce4b69c.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/definitions-c49e2c1e.js","assets/visualVariablesUtils-8f78c9ca.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/ogcFeatureUtils-faf44a69.js","assets/geojson-1f96c2e8.js","assets/clientSideDefaults-2ab47af4.js","assets/createConnection-4407706f.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>_e(()=>import("./PointCloudWorker-56cffc5d.js"),["assets/PointCloudWorker-56cffc5d.js","assets/quat-0e1007d7.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-00a7d3f0.js","assets/VertexAttribute-9f2e53ec.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-3932fe39.js"]),RasterWorker:()=>_e(()=>import("./RasterWorker-6ac3629d.js"),["assets/RasterWorker-6ac3629d.js","assets/dataUtils-af42ae1a.js","assets/pixelRangeUtils-cc28ceb4.js","assets/RasterSymbolizer-026c71b3.js","assets/colorUtils-c0f43caf.js","assets/rasterRendererChecks-e55c06d8.js","assets/utils-b1d7ce9a.js","assets/rasterProjectionHelper-cfbd2d3e.js"]),SceneLayerSnappingSourceWorker:()=>_e(()=>import("./SceneLayerSnappingSourceWorker-42d88771.js"),["assets/SceneLayerSnappingSourceWorker-42d88771.js","assets/lineSegment-8f5dd906.js","assets/sphere-594f3aee.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js","assets/plane-874ee002.js","assets/InterleavedLayout-97b420dd.js","assets/BufferView-ed587754.js","assets/types-1305598a.js","assets/edgeProcessing-65c5bd7a.js","assets/deduplicate-bcef8d64.js","assets/Indices-79a50390.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>_e(()=>import("./SceneLayerWorker-432340c6.js"),["assets/SceneLayerWorker-432340c6.js","assets/MeshLocalVertexSpace-eed424c3.js","assets/MeshGeoreferencedRelativeVertexSpace-578fc903.js","assets/vec32-33d99223.js","assets/sphere-594f3aee.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>_e(()=>import("./WFSSourceWorker-1c247962.js"),["assets/WFSSourceWorker-1c247962.js","assets/FeatureStore-c1aa5983.js","assets/BoundsStore-bd1fcf6b.js","assets/PooledRBush-bfcac9e8.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/timeSupport-bbcd0047.js","assets/QueryEngine-2d935593.js","assets/WhereClause-c83dcc9b.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-7a483037.js","assets/utils-589b0f1d.js","assets/generateRendererUtils-b8ecb23e.js","assets/geojson-1f96c2e8.js","assets/sourceUtils-bb287bfb.js","assets/wfsUtils-097a2be1.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>_e(()=>import("./WorkerTileHandler-f0172dcb.js"),["assets/WorkerTileHandler-f0172dcb.js","assets/enums-fb086c25.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/TurboLine-6feabd94.js","assets/definitions-c49e2c1e.js","assets/StyleRepository-e3120854.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-c0f43caf.js","assets/earcut-3e9b4557.js","assets/BidiEngine-9a40f2f4.js"])};var Zi;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Zi||(Zi={}));let MW=0;function $A(){return MW++}function IW(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function lf(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function f4(t,e,i,s){if(e.type===Zi.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Zi.INVOKE&&e.type!==Zi.RESPONSE)return void t.postMessage(e);let a;if(IW(i)?(a=ix(i.transferList),e.data=i.result):(a=ix(s),e.data=i),a){if(le("ff")){for(const d of a)if("byteLength"in d&&d.byteLength>267386880){const y="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Zi.INVOKE:throw y;case Zi.RESPONSE:return void f4(t,{type:Zi.RESPONSE,jobId:e.jobId,error:lf(y)})}}}t.postMessage(e,a)}else t.postMessage(e)}function uf(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function ix(t){if(!t||!t.length)return null;if(le("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!EW(i));return e.length?e:null}function EW(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)==null?void 0:e.name)==="ArrayBuffer"}const{CLOSE:rx,ABORT:sx,INVOKE:nx,RESPONSE:o0,OPEN_PORT:ox,ON:AW}=Zi,kW=2;let OW=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Zi.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Kl=class _c{static connect(e){const i=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const a=new _c(i.port1,{channel:i,client:s},()=>null);return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=a),_c.clients.set(a,s),i.port2}static loadWorker(e){const i=TW[e];return i?i():Promise.resolve(null)}constructor(e,i,s){this._port=e,this._getNextJob=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new OW(a=>this._onInvokeMessage(a)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:rx}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,s){const a=s==null?void 0:s.signal,d=s==null?void 0:s.transferList;if(!this._port)return Promise.reject(new oe("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const y=$A();return new Promise((g,_)=>{if(Fs(a))return this._processWork(),void _(ni());const x=ls(a,()=>{const A=this._outJobs.get(y);A&&(this._outJobs.delete(y),this._processWork(),li(A.abortHandle),this._post({type:sx,jobId:y}),_(ni()))}),I={resolve:g,reject:_,abortHandle:x,debugInfo:e};this._outJobs.set(y,I),this._post({type:nx,jobId:y,methodName:e,abortable:a!=null},i,d)})}on(e,i){const s=new MessageChannel;function a(d){i(d.data)}return this._port.postMessage({type:Zi.ON,eventType:e,port:s.port2},[s.port2]),s.port1.addEventListener("message",a),s.port1.start(),{remove(){s.port1.postMessage({type:Zi.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",a)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:ox,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=kW)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:s,invokeOptions:a,resolver:d}=e;this.invoke(i,s,a).then(y=>d.resolve(y)).catch(y=>d.reject(y))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{li(e.abortHandle),e.reject(ni(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=uf(e);if(i)switch(i.type){case o0:this._onResponseMessage(i);break;case nx:this._invokeQueue.push(i);break;case sx:this._onAbortMessage(i);break;case rx:this._onCloseMessage();break;case ox:this._onOpenPortMessage(i);break;case AW:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,a=i.get(s);this._invokeQueue.push(e),a&&(a.controller&&a.controller.abort(),i.delete(s))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&_c.clients.get(this)===e&&e.destroy(),_c.clients.delete(this),e!=null&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:s,data:a,abortable:d}=e,y=d?new AbortController:null,g=this._inJobs;let _,x=this._client,I=x[i];try{if(!I&&i&&i.includes(".")){const A=i.split(".");for(let C=0;C<A.length-1;C++)x=x[A[C]],I=x[A[C+1]]}if(typeof I!="function")throw new TypeError(`${i} is not a function`);_=I.call(x,a,{client:this,signal:y?y.signal:null})}catch(A){return void this._post({type:o0,jobId:s,error:lf(A)})}wa(_)?(g.set(s,{controller:y,promise:_}),_.then(A=>{g.has(s)&&(g.delete(s),this._post({type:o0,jobId:s},A))},A=>{g.has(s)&&(g.delete(s),or(A)||this._post({type:o0,jobId:s,error:lf(A||{message:`Error encountered at method ${i}`})}))})):this._post({type:o0,jobId:s},_)}_onOpenPortMessage(e){new _c(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,s=this._client.on(e.eventType,d=>{i.postMessage(d)}),a=nv(e.port,"message",d=>{const y=uf(d);(y==null?void 0:y.type)===Zi.CLOSE&&(a.remove(),s.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:s,data:a}=e,d=this._outJobs;if(!d.has(i))return;const y=d.get(i);d.delete(i),this._processWork(),li(y.abortHandle),s?y.reject(oe.fromJSON(JSON.parse(s))):y.resolve(a)}_post(e,i,s){return f4(this._port,e,i,s)}};Kl.kernelInfo={buildDate:cM,fullVersion:w5,revision:pM},Kl.clients=new Map;let CW=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new pm}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((s,a)=>{let d=!0;const y=g=>{Xt(i.signal),d&&(d=!1,g())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let g=0;g<e.length;++g){const _=e[g];wa(_)?this._clientPromises[g]=_.then(x=>(this._clients[g]=new Kl(x,i,()=>this._ongoingJobsQueue.pop()??null),y(s),this._clients[g]),()=>(y(a),null)):(this._clients[g]=new Kl(_,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[g]=Promise.resolve(this._clients[g]),y(s))}})}broadcast(e,i,s){const a=new Array(this._clientPromises.length);for(let d=0;d<this._clientPromises.length;++d){const y=this._clientPromises[d];a[d]=y.then(g=>g==null?void 0:g.invoke(e,i,s))}return a}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(ni(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(s=>s==null?void 0:s.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(e,i,s){let a;Array.isArray(s)?(me.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),a={transferList:s}):a=s;const d=On();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:a,resolver:d});for(let y=0;y<this._clientPromises.length;y++){const g=this._clients[y];g?g.jobAdded():this._clientPromises[y].then(_=>_==null?void 0:_.jobAdded())}return d.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>Xm(this._clients.map(s=>s.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let a=0;a<this._clientPromises.length;++a)this._clientPromises[a].then(d=>{d&&(i[a]=d.openPort()),--s==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const TA=me.getLogger("esri.intl.substitute");function MA(t,e,i={}){const{format:s={}}=i;return rv(t,a=>PW(a,e,s))}function PW(t,e,i){let s,a;const d=t.indexOf(":");if(d===-1?s=t.trim():(s=t.slice(0,d).trim(),a=t.slice(d+1).trim()),!s)return"";const y=Tf(s,e);if(y==null)return"";const g=(a?i==null?void 0:i[a]:null)??(i==null?void 0:i[s]);return g?NW(y,g):a?LW(y,a):y4(y)}function NW(t,e){switch(e.type){case"date":return Wl(t,e.intlOptions);case"number":return sf(t,e.intlOptions);default:return TA.warn("missing format descriptor for key {key}"),y4(t)}}function LW(t,e){switch(e.toLowerCase()){case"dateformat":return Wl(t);case"numberformat":return sf(t);default:return TA.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Wl(t):/^numberformat/i.test(e)?sf(t):y4(t)}}function y4(t){switch(typeof t){case"string":return t;case"number":return sf(t);case"boolean":return""+t;default:return t instanceof Date?Wl(t):""}}async function RW(t,e,i,s){const a=e.exec(i);if(!a)throw new oe("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const d=a[1]?`${a[1]}/`:"",y=a[2],g=kz(s),_=`${d}${y}.json`,x=g?`${d}${y}_${g}.json`:_;let I;try{I=await ax(t(x))}catch(A){if(x===_)throw new oe("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A});try{I=await ax(t(_))}catch(C){throw new oe("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:C})}}return I}async function ax(t){if(lx.fetchBundleAsset!=null)return lx.fetchBundleAsset(t);const e=await pt(t,{responseType:"text"});return JSON.parse(e.data)}let jW=class{constructor({base:e="",pattern:i,location:s=new URL(window.location.href)}){let a;a=typeof s=="string"?d=>new URL(d,new URL(s,window.location.href)).href:s instanceof URL?d=>new URL(d,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=a,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return RW(this.getAssetUrl,this.matcher,e,i)}};function DW(t){return new jW(t)}const lx={};Az(DW({pattern:"esri/",location:It}));const FW={};function zW(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=FW.baseUrl),e}let VW=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...s)=>e[i](...s)})}},By=class{constructor(){this._dispatcher=new VW,this._workerPostMessage({type:Zi.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){Og(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,s){this._dispatcher.addEventListener(e,i,s)}removeEventListener(e,i,s){this._dispatcher.removeEventListener(e,i,s)}_workerPostMessage(e){Og(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=uf(e);if(i&&i.type===Zi.OPEN){const{modulePath:s,jobId:a}=i;let d=await Kl.loadWorker(s);d||(d=await _e(()=>import(s),[]));const y=Kl.connect(d);this._workerPostMessage({type:Zi.OPENED,jobId:a,data:y})}}};const F3=me.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:GW}=Zi,UW='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let I1,E1;const ux="Failed to create Worker. Fallback to execute module in main thread";async function qW(){if(!le("esri-workers")||(le("mozilla"),0))return hx(new By);if(!I1&&!E1)try{const e=UW.split('"{CONFIGURATION}"').join(`'${BW()}'`);I1=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){E1=e||{}}let t;if(I1)try{t=new Worker(I1,{name:"esri-worker-"+HW++})}catch{F3.warn(ux,E1),t=new By}else F3.warn(ux,E1),t=new By;return hx(t)}async function hx(t){return new Promise(e=>{function i(a){const d=uf(a);d&&d.type===GW&&(t.removeEventListener("message",i),t.removeEventListener("error",s),e(t))}function s(a){a.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",s),F3.warn("Failed to create Worker. Fallback to execute module in main thread",a),(t=new By).addEventListener("message",i),t.addEventListener("error",s)}t.addEventListener("message",i),t.addEventListener("error",s)})}function BW(){let t;if(mt.default!=null){const a={...mt};delete a.default,t=JSON.parse(JSON.stringify(a))}else t=JSON.parse(JSON.stringify(mt));t.assetsPath=ns(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?ns(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=En(),t.has={"esri-csp-restrictions":le("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":le("esri-2d-update-debug"),"esri-2d-log-updating":le("esri-2d-log-updating"),"featurelayer-pbf":le("featurelayer-pbf"),"featurelayer-simplify-thresholds":le("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":le("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":le("featurelayer-simplify-mobile-factor"),"esri-atomics":le("esri-atomics"),"esri-shared-array-buffer":le("esri-shared-array-buffer"),"esri-tiles-debug":le("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":le("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":le("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":le("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=ns(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=ns(t.workers.workerPath):t.workers.workerPath=ns(It("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=mt.workers.loaderConfig,i=zW({baseUrl:e==null?void 0:e.baseUrl,locale:En(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:cM,fullVersion:w5,revision:pM}})}let HW=0;const{ABORT:cx,INVOKE:WW,OPEN:JW,OPENED:KW,RESPONSE:a0}=Zi;let YW=class IA{static async create(e){const i=await qW();return new IA(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",s=>{s.preventDefault(),me.getLogger("esri.core.workers.WorkerOwner").error(s)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:s}=i,a=$A();return new Promise((d,y)=>{const g={resolve:d,reject:y,abortHandle:Y_(s,()=>{this._outJobs.delete(a),this._post({type:cx,jobId:a})})};this._outJobs.set(a,g),this._post({type:JW,jobId:a,modulePath:e})})}_onMessage(e){const i=uf(e);if(i)switch(i.type){case KW:this._onOpenedMessage(i);break;case a0:this._onResponseMessage(i);break;case cx:this._onAbortMessage(i);break;case WW:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,s=e.jobId,a=i.get(s);a&&(a.controller&&a.controller.abort(),i.delete(s))}_onInvokeMessage(e){const{methodName:i,jobId:s,data:a,abortable:d}=e,y=d?new AbortController:null,g=this._inJobs,_=EF[i];let x;try{if(typeof _!="function")throw new TypeError(`${i} is not a function`);x=_.call(null,a,{signal:y?y.signal:null})}catch(I){return void this._post({type:a0,jobId:s,error:lf(I)})}wa(x)?(g.set(s,{controller:y,promise:x}),x.then(I=>{g.has(s)&&(g.delete(s),this._post({type:a0,jobId:s},I))},I=>{g.has(s)&&(g.delete(s),I||(I={message:"Error encountered at method"+i}),or(I)||this._post({type:a0,jobId:s,error:lf(I||{message:`Error encountered at method ${i}`})}))})):this._post({type:a0,jobId:s},x)}_onOpenedMessage(e){const{jobId:i,data:s}=e,a=this._outJobs.get(i);a&&(this._outJobs.delete(i),li(a.abortHandle),a.resolve(s))}_onResponseMessage(e){const{jobId:i,error:s,data:a}=e,d=this._outJobs.get(i);d&&(this._outJobs.delete(i),li(d.abortHandle),s?d.reject(oe.fromJSON(JSON.parse(s))):d.resolve(a))}_post(e,i,s){return f4(this.worker,e,i,s)}};const px=le("host-browser")?Math.min(navigator.hardwareConcurrency-1,le("workers-pool-size")):0;let ph=le("esri-mobile")?Math.min(px,3):px;ph||(ph=le("safari")&&le("mac")?7:2);let dx=0;const Hy=[];function ZW(){EA()}async function A1(t,e){const i=new CW;return await i.open(t,e),i}async function wfe(t,e={}){if(typeof t!="string")throw new oe("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(le("host-webworker")&&!le("esri-workers")&&(i="local"),i==="local"){let s=await Kl.loadWorker(t);s||(s=await _e(()=>import(t),[])),Xt(e.signal);const a=e.client||s;return A1([Kl.connect(s)],{...e,client:a})}if(await EA(),Xt(e.signal),i==="dedicated"){const s=dx++%ph;return A1([await Hy[s].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const s=Math.min(e.maxNumWorkers,ph);if(s<ph){const a=new Array(s);for(let d=0;d<s;++d){const y=dx++%ph;a[d]=Hy[y].open(t,e)}return A1(a,e)}}return A1(Hy.map(s=>s.open(t,e)),e)}let k1=null;async function EA(){if(k1)return k1;new AbortController;const t=[];for(let e=0;e<ph;e++){const i=YW.create(e).then(s=>(Hy[e]=s,s));t.push(i)}return k1=Promise.all(t),k1}function XW(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ou(t,e,i,s,a,d,y,g,_,x,I,A,C,N,j,D,V){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t[4]=d,t[5]=y,t[6]=g,t[7]=_,t[8]=x,t[9]=I,t[10]=A,t[11]=C,t[12]=N,t[13]=j,t[14]=D,t[15]=V,t}function Gf(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Sa(t,e){if(t===e){const i=e[1],s=e[2],a=e[3],d=e[6],y=e[7],g=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=d,t[11]=e[14],t[12]=a,t[13]=y,t[14]=g}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function QW(t,e){return AA(t,e)||Gf(t),t}function AA(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],g=e[5],_=e[6],x=e[7],I=e[8],A=e[9],C=e[10],N=e[11],j=e[12],D=e[13],V=e[14],W=e[15],K=i*g-s*y,Y=i*_-a*y,ee=i*x-d*y,re=s*_-a*g,se=s*x-d*g,ue=a*x-d*_,de=I*D-A*j,we=I*V-C*j,Oe=I*W-N*j,Ne=A*V-C*D,Le=A*W-N*D,Be=C*W-N*V;let Pe=K*Be-Y*Le+ee*Ne+re*Oe-se*we+ue*de;return Pe?(Pe=1/Pe,t[0]=(g*Be-_*Le+x*Ne)*Pe,t[1]=(a*Le-s*Be-d*Ne)*Pe,t[2]=(D*ue-V*se+W*re)*Pe,t[3]=(C*se-A*ue-N*re)*Pe,t[4]=(_*Oe-y*Be-x*we)*Pe,t[5]=(i*Be-a*Oe+d*we)*Pe,t[6]=(V*ee-j*ue-W*Y)*Pe,t[7]=(I*ue-C*ee+N*Y)*Pe,t[8]=(y*Le-g*Oe+x*de)*Pe,t[9]=(s*Oe-i*Le-d*de)*Pe,t[10]=(j*se-D*ee+W*K)*Pe,t[11]=(A*ee-I*se-N*K)*Pe,t[12]=(g*we-y*Ne-_*de)*Pe,t[13]=(i*Ne-s*we+a*de)*Pe,t[14]=(D*Y-j*re-V*K)*Pe,t[15]=(I*re-A*Y+C*K)*Pe,t):null}function eJ(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],g=e[5],_=e[6],x=e[7],I=e[8],A=e[9],C=e[10],N=e[11],j=e[12],D=e[13],V=e[14],W=e[15];return t[0]=g*(C*W-N*V)-A*(_*W-x*V)+D*(_*N-x*C),t[1]=-(s*(C*W-N*V)-A*(a*W-d*V)+D*(a*N-d*C)),t[2]=s*(_*W-x*V)-g*(a*W-d*V)+D*(a*x-d*_),t[3]=-(s*(_*N-x*C)-g*(a*N-d*C)+A*(a*x-d*_)),t[4]=-(y*(C*W-N*V)-I*(_*W-x*V)+j*(_*N-x*C)),t[5]=i*(C*W-N*V)-I*(a*W-d*V)+j*(a*N-d*C),t[6]=-(i*(_*W-x*V)-y*(a*W-d*V)+j*(a*x-d*_)),t[7]=i*(_*N-x*C)-y*(a*N-d*C)+I*(a*x-d*_),t[8]=y*(A*W-N*D)-I*(g*W-x*D)+j*(g*N-x*A),t[9]=-(i*(A*W-N*D)-I*(s*W-d*D)+j*(s*N-d*A)),t[10]=i*(g*W-x*D)-y*(s*W-d*D)+j*(s*x-d*g),t[11]=-(i*(g*N-x*A)-y*(s*N-d*A)+I*(s*x-d*g)),t[12]=-(y*(A*V-C*D)-I*(g*V-_*D)+j*(g*C-_*A)),t[13]=i*(A*V-C*D)-I*(s*V-a*D)+j*(s*C-a*A),t[14]=-(i*(g*V-_*D)-y*(s*V-a*D)+j*(s*_-a*g)),t[15]=i*(g*C-_*A)-y*(s*C-a*A)+I*(s*_-a*g),t}function tJ(t){const e=t[0],i=t[1],s=t[2],a=t[3],d=t[4],y=t[5],g=t[6],_=t[7],x=t[8],I=t[9],A=t[10],C=t[11],N=t[12],j=t[13],D=t[14],V=t[15];return(e*y-i*d)*(A*V-C*D)-(e*g-s*d)*(I*V-C*j)+(e*_-a*d)*(I*D-A*j)+(i*g-s*y)*(x*V-C*N)-(i*_-a*y)*(x*D-A*N)+(s*_-a*g)*(x*j-I*N)}function kA(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=e[4],_=e[5],x=e[6],I=e[7],A=e[8],C=e[9],N=e[10],j=e[11],D=e[12],V=e[13],W=e[14],K=e[15];let Y=i[0],ee=i[1],re=i[2],se=i[3];return t[0]=Y*s+ee*g+re*A+se*D,t[1]=Y*a+ee*_+re*C+se*V,t[2]=Y*d+ee*x+re*N+se*W,t[3]=Y*y+ee*I+re*j+se*K,Y=i[4],ee=i[5],re=i[6],se=i[7],t[4]=Y*s+ee*g+re*A+se*D,t[5]=Y*a+ee*_+re*C+se*V,t[6]=Y*d+ee*x+re*N+se*W,t[7]=Y*y+ee*I+re*j+se*K,Y=i[8],ee=i[9],re=i[10],se=i[11],t[8]=Y*s+ee*g+re*A+se*D,t[9]=Y*a+ee*_+re*C+se*V,t[10]=Y*d+ee*x+re*N+se*W,t[11]=Y*y+ee*I+re*j+se*K,Y=i[12],ee=i[13],re=i[14],se=i[15],t[12]=Y*s+ee*g+re*A+se*D,t[13]=Y*a+ee*_+re*C+se*V,t[14]=Y*d+ee*x+re*N+se*W,t[15]=Y*y+ee*I+re*j+se*K,t}function iJ(t,e,i){const s=i[0],a=i[1],d=i[2];if(e===t)t[12]=e[0]*s+e[4]*a+e[8]*d+e[12],t[13]=e[1]*s+e[5]*a+e[9]*d+e[13],t[14]=e[2]*s+e[6]*a+e[10]*d+e[14],t[15]=e[3]*s+e[7]*a+e[11]*d+e[15];else{const y=e[0],g=e[1],_=e[2],x=e[3],I=e[4],A=e[5],C=e[6],N=e[7],j=e[8],D=e[9],V=e[10],W=e[11];t[0]=y,t[1]=g,t[2]=_,t[3]=x,t[4]=I,t[5]=A,t[6]=C,t[7]=N,t[8]=j,t[9]=D,t[10]=V,t[11]=W,t[12]=y*s+I*a+j*d+e[12],t[13]=g*s+A*a+D*d+e[13],t[14]=_*s+C*a+V*d+e[14],t[15]=x*s+N*a+W*d+e[15]}return t}function rJ(t,e,i){const s=i[0],a=i[1],d=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*d,t[9]=e[9]*d,t[10]=e[10]*d,t[11]=e[11]*d,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function sJ(t,e,i,s){let a,d,y,g,_,x,I,A,C,N,j,D,V,W,K,Y,ee,re,se,ue,de,we,Oe,Ne,Le=s[0],Be=s[1],Pe=s[2],dt=Math.sqrt(Le*Le+Be*Be+Pe*Pe);return dt<Vs()?null:(dt=1/dt,Le*=dt,Be*=dt,Pe*=dt,a=Math.sin(i),d=Math.cos(i),y=1-d,g=e[0],_=e[1],x=e[2],I=e[3],A=e[4],C=e[5],N=e[6],j=e[7],D=e[8],V=e[9],W=e[10],K=e[11],Y=Le*Le*y+d,ee=Be*Le*y+Pe*a,re=Pe*Le*y-Be*a,se=Le*Be*y-Pe*a,ue=Be*Be*y+d,de=Pe*Be*y+Le*a,we=Le*Pe*y+Be*a,Oe=Be*Pe*y-Le*a,Ne=Pe*Pe*y+d,t[0]=g*Y+A*ee+D*re,t[1]=_*Y+C*ee+V*re,t[2]=x*Y+N*ee+W*re,t[3]=I*Y+j*ee+K*re,t[4]=g*se+A*ue+D*de,t[5]=_*se+C*ue+V*de,t[6]=x*se+N*ue+W*de,t[7]=I*se+j*ue+K*de,t[8]=g*we+A*Oe+D*Ne,t[9]=_*we+C*Oe+V*Ne,t[10]=x*we+N*Oe+W*Ne,t[11]=I*we+j*Oe+K*Ne,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function nJ(t,e,i){const s=Math.sin(i),a=Math.cos(i),d=e[4],y=e[5],g=e[6],_=e[7],x=e[8],I=e[9],A=e[10],C=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=d*a+x*s,t[5]=y*a+I*s,t[6]=g*a+A*s,t[7]=_*a+C*s,t[8]=x*a-d*s,t[9]=I*a-y*s,t[10]=A*a-g*s,t[11]=C*a-_*s,t}function oJ(t,e,i){const s=Math.sin(i),a=Math.cos(i),d=e[0],y=e[1],g=e[2],_=e[3],x=e[8],I=e[9],A=e[10],C=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=d*a-x*s,t[1]=y*a-I*s,t[2]=g*a-A*s,t[3]=_*a-C*s,t[8]=d*s+x*a,t[9]=y*s+I*a,t[10]=g*s+A*a,t[11]=_*s+C*a,t}function aJ(t,e,i){const s=Math.sin(i),a=Math.cos(i),d=e[0],y=e[1],g=e[2],_=e[3],x=e[4],I=e[5],A=e[6],C=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=d*a+x*s,t[1]=y*a+I*s,t[2]=g*a+A*s,t[3]=_*a+C*s,t[4]=x*a-d*s,t[5]=I*a-y*s,t[6]=A*a-g*s,t[7]=C*a-_*s,t}function OA(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function lJ(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function uJ(t,e,i){if(e===0)return Gf(t);let s,a,d,y=i[0],g=i[1],_=i[2],x=Math.sqrt(y*y+g*g+_*_);return x<Vs()?null:(x=1/x,y*=x,g*=x,_*=x,s=Math.sin(e),a=Math.cos(e),d=1-a,t[0]=y*y*d+a,t[1]=g*y*d+_*s,t[2]=_*y*d-g*s,t[3]=0,t[4]=y*g*d-_*s,t[5]=g*g*d+a,t[6]=_*g*d+y*s,t[7]=0,t[8]=y*_*d+g*s,t[9]=g*_*d-y*s,t[10]=_*_*d+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function hJ(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cJ(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pJ(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function CA(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=s+s,_=a+a,x=d+d,I=s*g,A=s*_,C=s*x,N=a*_,j=a*x,D=d*x,V=y*g,W=y*_,K=y*x;return t[0]=1-(N+D),t[1]=A+K,t[2]=C-W,t[3]=0,t[4]=A-K,t[5]=1-(I+D),t[6]=j+V,t[7]=0,t[8]=C+W,t[9]=j-V,t[10]=1-(I+N),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function dJ(t,e){const i=fJ,s=-e[0],a=-e[1],d=-e[2],y=e[3],g=e[4],_=e[5],x=e[6],I=e[7],A=s*s+a*a+d*d+y*y;return A>0?(i[0]=2*(g*y+I*s+_*d-x*a)/A,i[1]=2*(_*y+I*a+x*s-g*d)/A,i[2]=2*(x*y+I*d+g*a-_*s)/A):(i[0]=2*(g*y+I*s+_*d-x*a),i[1]=2*(_*y+I*a+x*s-g*d),i[2]=2*(x*y+I*d+g*a-_*s)),CA(t,e,i),t}const fJ=Dn();function yJ(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function gJ(t,e){const i=e[0],s=e[1],a=e[2],d=e[4],y=e[5],g=e[6],_=e[8],x=e[9],I=e[10];return t[0]=Math.sqrt(i*i+s*s+a*a),t[1]=Math.sqrt(d*d+y*y+g*g),t[2]=Math.sqrt(_*_+x*x+I*I),t}function mJ(t,e){const i=e[0]+e[5]+e[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t}function vJ(t,e,i,s){const a=e[0],d=e[1],y=e[2],g=e[3],_=a+a,x=d+d,I=y+y,A=a*_,C=a*x,N=a*I,j=d*x,D=d*I,V=y*I,W=g*_,K=g*x,Y=g*I,ee=s[0],re=s[1],se=s[2];return t[0]=(1-(j+V))*ee,t[1]=(C+Y)*ee,t[2]=(N-K)*ee,t[3]=0,t[4]=(C-Y)*re,t[5]=(1-(A+V))*re,t[6]=(D+W)*re,t[7]=0,t[8]=(N+K)*se,t[9]=(D-W)*se,t[10]=(1-(A+j))*se,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function bJ(t,e,i,s,a){const d=e[0],y=e[1],g=e[2],_=e[3],x=d+d,I=y+y,A=g+g,C=d*x,N=d*I,j=d*A,D=y*I,V=y*A,W=g*A,K=_*x,Y=_*I,ee=_*A,re=s[0],se=s[1],ue=s[2],de=a[0],we=a[1],Oe=a[2],Ne=(1-(D+W))*re,Le=(N+ee)*re,Be=(j-Y)*re,Pe=(N-ee)*se,dt=(1-(C+W))*se,hi=(V+K)*se,kt=(j+Y)*ue,at=(V-K)*ue,er=(1-(C+D))*ue;return t[0]=Ne,t[1]=Le,t[2]=Be,t[3]=0,t[4]=Pe,t[5]=dt,t[6]=hi,t[7]=0,t[8]=kt,t[9]=at,t[10]=er,t[11]=0,t[12]=i[0]+de-(Ne*de+Pe*we+kt*Oe),t[13]=i[1]+we-(Le*de+dt*we+at*Oe),t[14]=i[2]+Oe-(Be*de+hi*we+er*Oe),t[15]=1,t}function wJ(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=i+i,g=s+s,_=a+a,x=i*y,I=s*y,A=s*g,C=a*y,N=a*g,j=a*_,D=d*y,V=d*g,W=d*_;return t[0]=1-A-j,t[1]=I+W,t[2]=C-V,t[3]=0,t[4]=I-W,t[5]=1-x-j,t[6]=N+D,t[7]=0,t[8]=C+V,t[9]=N-D,t[10]=1-x-A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _J(t,e,i,s,a,d,y){const g=1/(i-e),_=1/(a-s),x=1/(d-y);return t[0]=2*d*g,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*d*_,t[6]=0,t[7]=0,t[8]=(i+e)*g,t[9]=(a+s)*_,t[10]=(y+d)*x,t[11]=-1,t[12]=0,t[13]=0,t[14]=y*d*2*x,t[15]=0,t}function SJ(t,e,i,s,a){const d=1/Math.tan(e/2);let y;return t[0]=d/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(y=1/(s-a),t[10]=(a+s)*y,t[14]=2*a*s*y):(t[10]=-1,t[14]=-2*s),t}function xJ(t,e,i,s){const a=Math.tan(e.upDegrees*Math.PI/180),d=Math.tan(e.downDegrees*Math.PI/180),y=Math.tan(e.leftDegrees*Math.PI/180),g=Math.tan(e.rightDegrees*Math.PI/180),_=2/(y+g),x=2/(a+d);return t[0]=_,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=-(y-g)*_*.5,t[9]=(a-d)*x*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t}function $J(t,e,i,s,a,d,y){const g=1/(e-i),_=1/(s-a),x=1/(d-y);return t[0]=-2*g,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*_,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*x,t[11]=0,t[12]=(e+i)*g,t[13]=(a+s)*_,t[14]=(y+d)*x,t[15]=1,t}function TJ(t,e,i,s){const a=e[0],d=e[1],y=e[2];let g=a-i[0],_=d-i[1],x=y-i[2];const I=Vs();if(Math.abs(g)<I&&Math.abs(_)<I&&Math.abs(x)<I)return void Gf(t);let A=1/Math.sqrt(g*g+_*_+x*x);g*=A,_*=A,x*=A;const C=s[0],N=s[1],j=s[2];let D=N*x-j*_,V=j*g-C*x,W=C*_-N*g;A=Math.sqrt(D*D+V*V+W*W),A?(A=1/A,D*=A,V*=A,W*=A):(D=0,V=0,W=0);let K=_*W-x*V,Y=x*D-g*W,ee=g*V-_*D;A=Math.sqrt(K*K+Y*Y+ee*ee),A?(A=1/A,K*=A,Y*=A,ee*=A):(K=0,Y=0,ee=0),t[0]=D,t[1]=K,t[2]=g,t[3]=0,t[4]=V,t[5]=Y,t[6]=_,t[7]=0,t[8]=W,t[9]=ee,t[10]=x,t[11]=0,t[12]=-(D*a+V*d+W*y),t[13]=-(K*a+Y*d+ee*y),t[14]=-(g*a+_*d+x*y),t[15]=1}function MJ(t,e,i,s){const a=e[0],d=e[1],y=e[2],g=s[0],_=s[1],x=s[2];let I=a-i[0],A=d-i[1],C=y-i[2],N=I*I+A*A+C*C;N>0&&(N=1/Math.sqrt(N),I*=N,A*=N,C*=N);let j=_*C-x*A,D=x*I-g*C,V=g*A-_*I;return N=j*j+D*D+V*V,N>0&&(N=1/Math.sqrt(N),j*=N,D*=N,V*=N),t[0]=j,t[1]=D,t[2]=V,t[3]=0,t[4]=A*V-C*D,t[5]=C*j-I*V,t[6]=I*D-A*j,t[7]=0,t[8]=I,t[9]=A,t[10]=C,t[11]=0,t[12]=a,t[13]=d,t[14]=y,t[15]=1,t}function IJ(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function EJ(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function AJ(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function PA(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function kJ(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function OJ(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t[9]=e[9]+i[9]*s,t[10]=e[10]+i[10]*s,t[11]=e[11]+i[11]*s,t[12]=e[12]+i[12]*s,t[13]=e[13]+i[13]*s,t[14]=e[14]+i[14]*s,t[15]=e[15]+i[15]*s,t}function CJ(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function PJ(t,e){if(t===e)return!0;const i=t[0],s=t[1],a=t[2],d=t[3],y=t[4],g=t[5],_=t[6],x=t[7],I=t[8],A=t[9],C=t[10],N=t[11],j=t[12],D=t[13],V=t[14],W=t[15],K=e[0],Y=e[1],ee=e[2],re=e[3],se=e[4],ue=e[5],de=e[6],we=e[7],Oe=e[8],Ne=e[9],Le=e[10],Be=e[11],Pe=e[12],dt=e[13],hi=e[14],kt=e[15],at=Vs();return Math.abs(i-K)<=at*Math.max(1,Math.abs(i),Math.abs(K))&&Math.abs(s-Y)<=at*Math.max(1,Math.abs(s),Math.abs(Y))&&Math.abs(a-ee)<=at*Math.max(1,Math.abs(a),Math.abs(ee))&&Math.abs(d-re)<=at*Math.max(1,Math.abs(d),Math.abs(re))&&Math.abs(y-se)<=at*Math.max(1,Math.abs(y),Math.abs(se))&&Math.abs(g-ue)<=at*Math.max(1,Math.abs(g),Math.abs(ue))&&Math.abs(_-de)<=at*Math.max(1,Math.abs(_),Math.abs(de))&&Math.abs(x-we)<=at*Math.max(1,Math.abs(x),Math.abs(we))&&Math.abs(I-Oe)<=at*Math.max(1,Math.abs(I),Math.abs(Oe))&&Math.abs(A-Ne)<=at*Math.max(1,Math.abs(A),Math.abs(Ne))&&Math.abs(C-Le)<=at*Math.max(1,Math.abs(C),Math.abs(Le))&&Math.abs(N-Be)<=at*Math.max(1,Math.abs(N),Math.abs(Be))&&Math.abs(j-Pe)<=at*Math.max(1,Math.abs(j),Math.abs(Pe))&&Math.abs(D-dt)<=at*Math.max(1,Math.abs(D),Math.abs(dt))&&Math.abs(V-hi)<=at*Math.max(1,Math.abs(V),Math.abs(hi))&&Math.abs(W-kt)<=at*Math.max(1,Math.abs(W),Math.abs(kt))}function NJ(t){const e=Vs(),i=t[0],s=t[1],a=t[2],d=t[4],y=t[5],g=t[6],_=t[8],x=t[9],I=t[10];return Math.abs(1-(i*i+d*d+_*_))<=e&&Math.abs(1-(s*s+y*y+x*x))<=e&&Math.abs(1-(a*a+g*g+I*I))<=e}function LJ(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const RJ=kA,jJ=PA;Object.freeze(Object.defineProperty({__proto__:null,add:AJ,adjoint:eJ,copy:XW,determinant:tJ,equals:PJ,exactEquals:CJ,frob:EJ,fromQuat:wJ,fromQuat2:dJ,fromRotation:uJ,fromRotationTranslation:CA,fromRotationTranslationScale:vJ,fromRotationTranslationScaleOrigin:bJ,fromScaling:lJ,fromTranslation:OA,fromXRotation:hJ,fromYRotation:cJ,fromZRotation:pJ,frustum:_J,getRotation:mJ,getScaling:gJ,getTranslation:yJ,hasIdentityRotation:LJ,identity:Gf,invert:AA,invertOrIdentity:QW,isOrthoNormal:NJ,lookAt:TJ,mul:RJ,multiply:kA,multiplyScalar:kJ,multiplyScalarAndAdd:OJ,ortho:$J,perspective:SJ,perspectiveFromFieldOfView:xJ,rotate:sJ,rotateX:nJ,rotateY:oJ,rotateZ:aJ,scale:rJ,set:ou,str:IJ,sub:jJ,subtract:PA,targetTo:MJ,translate:iJ,transpose:Sa},Symbol.toStringTag,{value:"Module"}));let R2,ie=null;function g4(){return!!ie}function DJ(){return!!le("esri-wasm")}function NA(){return R2||(R2=_e(()=>import("./pe-wasm-004d668b.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>It(`esri/geometry/support/${e}`)})).then(t=>{RA(t)}),R2)}var z3,ri,V3;(function(t){function e(d,y,g){ie.ensureCache.prepare();const _=ih(g),x=g===_,I=ie.ensureFloat64(_),A=ie._pe_geog_to_proj(ie.getPointer(d),y,I);return A&&El(g,y,I,x),A}function i(d,y,g,_){switch(_){case ri.PE_TRANSFORM_P_TO_G:return s(d,y,g);case ri.PE_TRANSFORM_G_TO_P:return e(d,y,g)}return 0}function s(d,y,g){return a(d,y,g,0)}function a(d,y,g,_){ie.ensureCache.prepare();const x=ih(g),I=g===x,A=ie.ensureFloat64(x),C=ie._pe_proj_to_geog_center(ie.getPointer(d),y,A,_);return C&&El(g,y,A,I),C}t.geogToProj=e,t.projGeog=i,t.projToGeog=s,t.projToGeogCenter=a})(z3||(z3={})),function(t){function e(){t.PE_BUFFER_MAX=ie.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=ie.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=ie.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=ie.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=ie.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=ie.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=ie.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=ie.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=ie.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=ie.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=ie.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=ie.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=ie.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=ie.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=ie.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=ie.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=ie.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=ie.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=ie.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=ie.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=ie.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=ie.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=ie.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=ie.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=ie.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=ie.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=ie.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=ie.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=ie.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=ie.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}(ri||(ri={})),function(t){const e={},i={},s=N=>{if(N){const j=N.getType();switch(j){case ri.PE_TYPE_GEOGCS:N=ie.castObject(N,ie.PeGeogcs);break;case ri.PE_TYPE_PROJCS:N=ie.castObject(N,ie.PeProjcs);break;case ri.PE_TYPE_GEOGTRAN:N=ie.castObject(N,ie.PeGeogtran);break;default:j&ri.PE_TYPE_UNIT&&(N=ie.castObject(N,ie.PeUnit))}}return N};function a(){ie.PeFactory.prototype.initialize(null)}function d(N){return y(ri.PE_TYPE_COORDSYS,N)}function y(N,j){let D=null,V=e[N];if(V||(V={},e[N]=V),V.hasOwnProperty(String(j)))D=V[j];else{const W=ie.PeFactory.prototype.factoryByType(N,j);ie.compare(W,ie.NULL)||(D=W,V[j]=D)}return D=s(D),D}function g(N,j){let D=null,V=i[N];if(V||(V={},i[N]=V),V.hasOwnProperty(j))D=V[j];else{const W=ie.PeFactory.prototype.fromString(N,j);ie.compare(W,ie.NULL)||(D=W,V[j]=D)}return D=s(D),D}function _(N){return y(ri.PE_TYPE_GEOGCS,N)}function x(N){return y(ri.PE_TYPE_GEOGTRAN,N)}function I(N){return ie.PeFactory.prototype.getCode(N)}function A(N){return y(ri.PE_TYPE_PROJCS,N)}function C(N){return y(ri.PE_TYPE_UNIT,N)}t.initialize=a,t.coordsys=d,t.factoryByType=y,t.fromString=g,t.geogcs=_,t.geogtran=x,t.getCode=I,t.projcs=A,t.unit=C}(V3||(V3={}));let LA=null;var dm,G3,U3,q3,fm,B3,ym,gm,H3;function RA(t){function e(d,y,g){d[y]=g(d[y])}ie=t,ri.init(),dm.init(),fm.init(),ym.init(),gm.init(),LA=class extends ie.PeGCSExtent{destroy(){ie.destroy(this)}};const i=[ie.PeDatum,ie.PeGeogcs,ie.PeGeogtran,ie.PeObject,ie.PeParameter,ie.PePrimem,ie.PeProjcs,ie.PeSpheroid,ie.PeUnit];for(const d of i)e(d.prototype,"getName",y=>function(){return y.call(this,new Array(ri.PE_NAME_MAX))});for(const d of[ie.PeGeogtran,ie.PeProjcs])e(d.prototype,"getParameters",y=>function(){const g=new Array(ri.PE_PARM_MAX);let _=y.call(this);for(let x=0;x<g.length;x++){const I=ie.getValue(_,"*");g[x]=I?ie.wrapPointer(I,ie.PeParameter):null,_+=Int32Array.BYTES_PER_ELEMENT}return g});e(ie.PeHorizon.prototype,"getCoord",d=>function(){const y=this.getSize();if(!y)return null;const g=[];return El(g,y,d.call(this)),g}),e(ie.PeGTlistExtendedEntry.prototype,"getEntries",d=>{const y=ie._pe_getPeGTlistExtendedGTsSize();return function(){let g=null;const _=d.call(this);if(!ie.compare(_,ie.NULL)){g=[_];const x=this.getSteps();if(x>1){const I=ie.getPointer(_);for(let A=1;A<x;A++)g.push(ie.wrapPointer(I+y*A,ie.PeGTlistExtendedGTs))}}return g}});const s=ie._pe_getPeHorizonSize(),a=d=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(d))return y.get(d);let g=null;const _=d.call(this);if(!ie.compare(_,ie.NULL)){g=[_];const x=_.getNump();if(x>1){const I=ie.getPointer(_);for(let A=1;A<x;A++)g.push(ie.wrapPointer(I+s*A,ie.PeHorizon))}}return y.set(d,g),g};e(ie.PeProjcs.prototype,"horizonGcsGenerate",a),e(ie.PeProjcs.prototype,"horizonPcsGenerate",a),ie.PeObject.prototype.toString=function(d=ri.PE_STR_OPTS_NONE){ie.ensureCache.prepare();const y=ie.getPointer(this),g=ie.ensureInt8(new Array(ri.PE_BUFFER_MAX));return ie.UTF8ToString(ie._pe_object_to_string_ext(y,d,g))}}function Mo(t){if(!t)return;const e=ie.getClass(t);if(!e)return;const i=ie.getCache(e);if(!i)return;const s=ie.getPointer(t);s&&delete i[s]}function O1(t,e){const i=[],s=new Array(e);for(let a=0;a<t;a++)i.push(ie.ensureInt8(s));return i}function ih(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function El(t,e,i,s=!1){if(s)for(let a=0;a<2*e;a++)t[a]=ie.getValue(i+a*Float64Array.BYTES_PER_ELEMENT,"double");else{const a=t.length===0;for(let d=0;d<e;d++)a&&(t[d]=new Array(2)),t[d][0]=ie.getValue(i,"double"),t[d][1]=ie.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=ie.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=ie._pe_getPeGTlistExtendedEntrySize()}function s(a,d,y,g,_,x){let I=null;const A=new ie.PeInteger(x);try{const C=ie.PeGTlistExtended.prototype.getGTlist(a,d,y,g,_,A);if((x=A.val)&&(I=[C],x>1)){const N=ie.getPointer(C);for(let j=1;j<x;j++)I.push(ie.wrapPointer(N+e*j,ie.PeGTlistExtendedEntry))}}finally{ie.destroy(A)}return I}t.init=i,t.getGTlist=s})(dm||(dm={})),function(t){function e(i){if(i&&i.length){for(const s of i)Mo(s),s.getEntries().forEach(a=>{Mo(a);const d=a.getGeogtran();Mo(d),d.getParameters().forEach(Mo),[d.getGeogcs1(),d.getGeogcs2()].forEach(y=>{Mo(y);const g=y.getDatum();Mo(g),Mo(g.getSpheroid()),Mo(y.getPrimem()),Mo(y.getUnit())})});ie.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(G3||(G3={})),function(t){function e(i,s,a,d,y){ie.ensureCache.prepare();const g=ih(a),_=a===g,x=ie.ensureFloat64(g);let I=0;d&&(I=ie.ensureFloat64(d));const A=ie._pe_geog_to_geog(ie.getPointer(i),s,x,I,y);return A&&El(a,s,x,_),A}t.geogToGeog=e}(U3||(U3={})),function(t){const e=(x,I,A,C,N,j)=>{let D,V;switch(ie.ensureCache.prepare(),x){case"dd":D=ie._pe_geog_to_dd,V=ri.PE_DD_MAX;break;case"ddm":D=ie._pe_geog_to_ddm,V=ri.PE_DDM_MAX;break;case"dms":D=ie._pe_geog_to_dms,V=ri.PE_DMS_MAX}let W=0;I&&(W=ie.getPointer(I));const K=ih(C),Y=ie.ensureFloat64(K),ee=O1(A,V),re=D(W,A,Y,N,ie.ensureInt32(ee));if(re)for(let se=0;se<A;se++)j[se]=ie.UTF8ToString(ee[se]);return re},i=(x,I,A,C,N)=>{let j;switch(ie.ensureCache.prepare(),x){case"dd":j=ie._pe_dd_to_geog;break;case"ddm":j=ie._pe_ddm_to_geog;break;case"dms":j=ie._pe_dms_to_geog}let D=0;I&&(D=ie.getPointer(I));const V=C.map(ee=>ie.ensureString(ee)),W=ie.ensureInt32(V),K=ie.ensureFloat64(new Array(2*A)),Y=j(D,A,W,K);return Y&&El(N,A,K),Y};function s(x,I,A,C,N){return e("dms",x,I,A,C,N)}function a(x,I,A,C){return i("dms",x,I,A,C)}function d(x,I,A,C,N){return e("ddm",x,I,A,C,N)}function y(x,I,A,C){return i("ddm",x,I,A,C)}function g(x,I,A,C,N){return e("dd",x,I,A,C,N)}function _(x,I,A,C){return i("dd",x,I,A,C)}t.geogToDms=s,t.dmsToGeog=a,t.geogToDdm=d,t.ddmToGeog=y,t.geogToDd=g,t.ddToGeog=_}(q3||(q3={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=ie.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=ie.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(a,d,y,g,_,x,I){ie.ensureCache.prepare();let A=0;a&&(A=ie.getPointer(a));const C=ih(y),N=ie.ensureFloat64(C),j=O1(d,ri.PE_MGRS_MAX),D=ie.ensureInt32(j),V=ie._pe_geog_to_mgrs_extended(A,d,N,g,_,x,D);if(V)for(let W=0;W<d;W++)I[W]=ie.UTF8ToString(j[W]);return V}function s(a,d,y,g,_){ie.ensureCache.prepare();let x=0;a&&(x=ie.getPointer(a));const I=y.map(j=>ie.ensureString(j)),A=ie.ensureInt32(I),C=ie.ensureFloat64(new Array(2*d)),N=ie._pe_mgrs_to_geog_extended(x,d,A,g,C);return N&&El(_,d,C),N}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=s}(fm||(fm={})),function(t){function e(s,a,d,y,g,_,x){ie.ensureCache.prepare();let I=0;s&&(I=ie.getPointer(s));const A=ih(d),C=ie.ensureFloat64(A),N=O1(a,ri.PE_MGRS_MAX),j=ie.ensureInt32(N),D=ie._pe_geog_to_usng(I,a,C,y,g,_,j);if(D)for(let V=0;V<a;V++)x[V]=ie.UTF8ToString(N[V]);return D}function i(s,a,d,y){ie.ensureCache.prepare();let g=0;s&&(g=ie.getPointer(s));const _=d.map(C=>ie.ensureString(C)),x=ie.ensureInt32(_),I=ie.ensureFloat64(new Array(2*a)),A=ie._pe_usng_to_geog(g,a,x,I);return A&&El(y,a,I),A}t.geogToUsng=e,t.usngToGeog=i}(B3||(B3={})),function(t){function e(){t.PE_UTM_OPTS_NONE=ie.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=ie.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=ie.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(a,d,y,g,_){ie.ensureCache.prepare();let x=0;a&&(x=ie.getPointer(a));const I=ih(y),A=ie.ensureFloat64(I),C=O1(d,ri.PE_UTM_MAX),N=ie.ensureInt32(C),j=ie._pe_geog_to_utm(x,d,A,g,N);if(j)for(let D=0;D<d;D++)_[D]=ie.UTF8ToString(C[D]);return j}function s(a,d,y,g,_){ie.ensureCache.prepare();let x=0;a&&(x=ie.getPointer(a));const I=y.map(j=>ie.ensureString(j)),A=ie.ensureInt32(I),C=ie.ensureFloat64(new Array(2*d)),N=ie._pe_utm_to_geog(x,d,A,g,C);return N&&El(_,d,C),N}t.init=e,t.geogToUtm=i,t.utmToGeog=s}(ym||(ym={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=ie.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=ie.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=ie.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=ie.PePCSInfo.prototype.PE_POLE_POINT}function s(a,d=t.PE_PCSINFO_OPTION_DOMAIN){let y=null,g=null;return e.has(a)&&(g=e.get(a),g[d]&&(y=g[d])),y||(y=ie.PePCSInfo.prototype.generate(a,d),g||(g=[],e.set(a,g)),g[d]=y),y}t.init=i,t.generate=s}(gm||(gm={})),function(t){function e(){return ie.PeVersion.prototype.version_string()}t.versionString=e}(H3||(H3={}));const FJ=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return z3},get PeDefs(){return ri},get PeFactory(){return V3},get PeGCSExtent(){return LA},get PeGTTransformations(){return U3},get PeGTlistExtended(){return dm},get PeGTlistExtendedEntry(){return G3},get PeNotationDms(){return q3},get PeNotationMgrs(){return fm},get PeNotationUsng(){return B3},get PeNotationUtm(){return ym},get PePCSInfo(){return gm},get PeVersion(){return H3},_init:RA,get _pe(){return ie},isLoaded:g4,isSupported:DJ,load:NA},Symbol.toStringTag,{value:"Module"})),La=Vt.radius,Ks=Vt.eccentricitySquared,zJ={a1:La*Ks,a2:La*Ks*La*Ks,a3:La*Ks*Ks/2,a4:La*Ks*La*Ks*2.5,a5:La*Ks+La*Ks*Ks/2,a6:1-Ks};1/294.9786982,1/298.257222101,Vt.radius,Vt.flattening,Bl.radius,Bl.flattening,1/192.0430107526882,aa.radius,aa.flattening,1/10.2079945799458,1/43.61604095563141,aa.radius;let C1=0,j2=class W3{static fromGE(e){const i=new W3;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=C1++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=C1++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=C1++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=C1++}getInverse(){const e=new W3;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},mm=class B0{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new B0;let s="";for(const a of e.steps){const d=j2.fromGE(a);i.steps.push(d),s+=d.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=s,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof j2?this.steps.push(i):this.steps.push(new j2({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new B0;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];e.steps.push(s.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,s){this._cachedProjection[B0.cacheKey(e,i)]=s}getCachedGeTransformation(e,i){let s="";for(const d of this.steps)s+=d.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const a=this._cachedProjection[B0.cacheKey(e,i)];return a===void 0?null:a}};function m4(t,e,i){if(e==null||i==null||i.vcsWkid||Ri(e,i))return null;const s=Hg(e)/Hg(i);if(s===1)return null;switch(t){case"point":case"esriGeometryPoint":return a=>VJ(a,s);case"polyline":case"esriGeometryPolyline":return a=>UJ(a,s);case"polygon":case"esriGeometryPolygon":return a=>GJ(a,s);case"multipoint":case"esriGeometryMultipoint":return a=>qJ(a,s);case"extent":case"esriGeometryEnvelope":return a=>BJ(a,s);default:return null}}function VJ(t,e){t&&t.z!=null&&(t.z*=e)}function GJ(t,e){if(t)for(const i of t.rings)for(const s of i)s.length>2&&(s[2]*=e)}function UJ(t,e){if(t)for(const i of t.paths)for(const s of i)s.length>2&&(s[2]*=e)}function qJ(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function BJ(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let An=null,Yl=null,Od=null,Wy={};const jA=new cv;function Wh(){return!!An&&g4()}function Zl(t){return Od==null&&(Od=Promise.all([NA(),_e(()=>Promise.resolve().then(()=>kre),void 0).then(e=>e.g),_e(()=>Promise.resolve().then(()=>jre),void 0)])),Od.then(([,e,{hydratedAdapter:i}])=>{Xt(t),Yl=i,An=e.default,An._enableProjection(FJ),jA.notify()})}function au(t,e,i=null,s=null){return Array.isArray(t)?t.length===0?[]:J3(Yl,t,t[0].spatialReference,e,i,s):J3(Yl,[t],t.spatialReference,e,i,s)[0]}function J3(t,e,i,s,a=null,d=null){if(i==null||s==null)return e;if(ga(i,s,a))return e.map(y=>GA(y,i,s));if(a==null){const y=mm.cacheKey(i,s);Wy[y]!==void 0?a=Wy[y]:((a=FA(i,s,void 0))==null&&(a=new mm),Wy[y]=a)}if(An==null||t==null)throw new kv;return d!=null?An._project(t,e,i,s,a,d):An._project(t,e,i,s,a)}function HJ(t,e){const i=DA([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function DA(t,e){if(!Wh()){for(const i of t)if(i!=null&&!Ri(i.spatialReference,e)&&Xi(i.spatialReference)&&Xi(e)&&!ga(i.spatialReference,e))return Ke(jA),{pending:Zl(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Ri(i.spatialReference,e)?i:Xi(i.spatialReference)&&Xi(e)?zA(i,e):null)}}function FA(t,e,i=null){if(t==null||e==null)return null;if(An==null||Yl==null)throw new kv;const s=An._getTransformation(Yl,t,e,i,i==null?void 0:i.spatialReference);return s!==null?mm.fromGE(s):null}function WJ(t,e,i=null){if(An==null||Yl==null)throw new kv;const s=An._getTransformationBySuitability(Yl,t,e,i,i==null?void 0:i.spatialReference);if(s!==null){const a=[];for(const d of s)a.push(mm.fromGE(d));return a}return[]}let kv=class extends oe{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};var X;function JJ(){An=null,Yl=null,Od=null,Wy={}}(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(X||(X={}));const KJ={get loadPromise(){return Od}};function zA(t,e){try{const i=au(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const s=m4(i.type,t.spatialReference,e);return s!=null&&s(i),i}catch(i){if(!(i instanceof kv))throw i;return null}}function ga(t,e,i){return!i&&(!!Ri(t,e)||Xi(t)&&Xi(e)&&!!w4(t,e,S4))}async function VA(t,e,i,s){if(Wh())return Cg(s);if(Array.isArray(t)){for(const{source:a,dest:d,geographicTransformation:y}of t)if(!ga(a,d,y))return Zl(s)}else if(!ga(t,e,i))return Zl(s);return Cg(s)}function YJ(t,e){switch(w4(t,e,S4)){case Rt:return"copy3";case Nl:return"wgs84ToSphericalECEF";case Lh:return"wgs84ToWebMercator";case Pl:return"wgs84ToPlateCarree";case Rl:return"wgs84ToWGS84ECEF";case vh:return"webMercatorToWGS84";case ZA:return"webMercatorToSphericalECEF";case XA:return"webMercatorToWGS84ECEF";case ek:return"webMercatorToPlateCarree";case jl:return"wgs84ECEFToWGS84";case rk:return"wgs84ECEFToSphericalECEF";case sk:return"wgs84ECEFToWebMercator";case Ll:return"sphericalECEFToWGS84";case tk:return"sphericalECEFToWebMercator";case e9:return"sphericalMarsPCPFToMars2000";case Q3:return"sphericalMoonPCPFToMoon2000";case ik:return"sphericalECEFToWGS84ECEF";case X3:return"mars2000ToSphericalPCPF";case Z3:return"moon2000ToSphericalPCPF";default:return null}}function GA(t,e,i){return t?"x"in t?UA(t,e,new Ue,i,0):"xmin"in t?WA(t,e,new bt,i,0):"rings"in t?HA(t,e,new Pn,i,0):"paths"in t?BA(t,e,new as,i,0):"points"in t?qA(t,e,new Ap,i,0):null:null}function ZJ(t,e,i=e.spatialReference,s=0){return i!=null&&t.spatialReference!=null&&UA(t,t.spatialReference,e,i,s)!=null}function UA(t,e,i,s,a){ft[0]=t.x,ft[1]=t.y;const d=t.z;return ft[2]=d!==void 0?d:a,Ln(ft,e,0,ft,s,0,1)?(i.x=ft[0],i.y=ft[1],i.spatialReference=s,d===void 0?(i.z=void 0,i.hasZ=!1):(i.z=ft[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function XJ(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&qA(t,t.spatialReference,e,i,s)!=null}function qA(t,e,i,s,a){const{points:d,hasZ:y,hasM:g}=t,_=[],x=d.length,I=[];for(const A of d)I.push(A[0],A[1],y?A[2]:a);if(!Ln(I,e,0,I,s,0,x))return null;for(let A=0;A<x;++A){const C=3*A,N=I[C],j=I[C+1];y&&g?_.push([N,j,I[C+2],d[A][3]]):y?_.push([N,j,I[C+2]]):g?_.push([N,j,d[A][2]]):_.push([N,j])}return i.points=_,i.spatialReference=s,i.hasZ=y,i.hasM=g,i}function QJ(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&BA(t,t.spatialReference,e,i,s)!=null}function BA(t,e,i,s,a){const{paths:d,hasZ:y,hasM:g}=t,_=[];return KA(d,y??!1,g??!1,e,_,s,a)?(i.paths=_,i.spatialReference=s,i.hasZ=y,i.hasM=g,i):null}function eK({hasZ:t,spatialReference:e,paths:i},s,a=0){const d=bo(e,zp),y=Rs[d][X.WGS84_COMPARABLE_LON_LAT];if(y==null)return!1;const g=t?_=>_:_=>bv(ft,_[0],_[1],a);for(const _ of i){const x=[];for(const I of _){const A=[0,0,a];y(g(I),0,A,0),x.push(A)}s.push(x)}return!0}function tK({hasZ:t,spatialReference:e,rings:i},s,a=0){const d=bo(e,zp),y=Rs[d][X.WGS84_COMPARABLE_LON_LAT];if(y==null)return!1;const g=t?_=>_:_=>bv(ft,_[0],_[1],a);for(const _ of i){const x=[];for(const I of _){const A=[0,0,a];y(g(I),0,A,0),x.push(A)}s.push(x)}return!0}function iK(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&HA(t,t.spatialReference,e,i,s)!=null}function HA(t,e,i,s,a){const{rings:d,hasZ:y,hasM:g}=t,_=[];return KA(d,y??!1,g??!1,e,_,s,a)?(i.rings=_,i.spatialReference=s,i.hasZ=y,i.hasM=g,i):null}function rK(t,e,i=e.spatialReference,s=0){return t.spatialReference!=null&&i!=null&&WA(t,t.spatialReference,e,i,s)!=null}function WA(t,e,i,s,a){const{xmin:d,ymin:y,xmax:g,ymax:_,hasZ:x,hasM:I}=t;return K3(d,y,x?t.zmin:a,e,ft,s)?(i.xmin=ft[0],i.ymin=ft[1],x&&(i.zmin=ft[2]),K3(g,_,x?t.zmax:a,e,ft,s)?(i.xmax=ft[0],i.ymax=ft[1],x&&(i.zmax=ft[2]),I&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=s,i):null):null}function sK(t,e,i){if(e==null||i==null)return null;const s=new Ue({spatialReference:i});return Ln(t,e,0,ft,i,0,1)?(s.x=ft[0],s.y=ft[1],s.z=ft[2],s):null}function nK(t,e,i){return Ln(t,e,0,ft,i.spatialReference,0,1)?(i.x=ft[0],i.y=ft[1],i.z=ft[2],i):null}function oK(t,e,i,s=0){ft[0]=t.x,ft[1]=t.y;const a=t.z;return ft[2]=a!==void 0?a:s,Ln(ft,t.spatialReference,0,e,i,0,1)}function K3(t,e,i,s,a,d){return Jt[0]=t,Jt[1]=e,Jt[2]=i,Ln(Jt,s,0,a,d,0,1)}function Y3(t,e,i,s){return!(e==null||s==null||t.length<2)&&(t.length===2&&(Jt[0]=t[0],Jt[1]=t[1],Jt[2]=0,t=Jt),Ln(t,e,0,i,s,0,1))}function aK(t,e){ft[0]=t.x,ft[1]=t.y;const i=t.z;return ft[2]=i!==void 0?i:0,JA(ft,t.spatialReference,e)}function JA(t,e,i){return lK(t,e,i)}function lK(t,e,i){if(e==null)return!1;const s=bo(e,zp),a=Rs[s][X.WGS84_COMPARABLE_LON_LAT];return a!=null&&(a(t,0,Jt,0),i!==Jt&&(i[0]=Jt[0],i[1]=Jt[1],i.length>2&&(i[2]=Jt[2])),!0)}function Ln(t,e,i,s,a,d,y=1){const g=w4(e,a,S4);if(g==null)return!1;if(g===Rt){if(t===s&&i===d)return!0;const x=i+3*y;for(let I=i,A=d;I<x;I++,A++)s[A]=t[I];return!0}const _=i+3*y;for(let x=i,I=d;x<_;x+=3,I+=3)g(t,x,s,I);return!0}function uK(t,e,i,s,a){Xg(ft,t),CM(P1,t,e),Y3(ft,i,ft,a),Y3(P1,i,P1,a),k5(s,P1,ft),Qg(s,s)}function KA(t,e,i,s,a,d,y=0){const g=new Array;for(const x of t)for(const I of x)g.push(I[0],I[1],e?I[2]:y);if(!Ln(g,s,0,g,d,0,g.length/3))return!1;let _=0;a.length=0;for(const x of t){const I=new Array;for(const A of x)e&&i?I.push([g[_++],g[_++],g[_++],A[3]]):e?I.push([g[_++],g[_++],g[_++]]):i?(I.push([g[_++],g[_++],A[2]]),_++):(I.push([g[_++],g[_++]]),_++);a.push(I)}return!0}function hK(t,e,i,s){if(e==null||s==null)return!1;const a=nk(e,s,SK);if(a.projector===Rt)return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],!0;if(a.projector==null)return!1;const{source:d,dest:y}=a;if(y.spatialReferenceId===X.WEB_MERCATOR){const g=Rs[d.spatialReferenceId][X.WGS84];return g!=null&&(g(t,0,gn,0),Lh(gn,0,i,0),i[3]=fx(gn[1],t[2],t[3],Vt.radius),!0)}if(d.spatialReferenceId!==X.WGS84&&d.spatialReferenceId!==X.CGCS2000||y.spatialReferenceId!==X.PLATE_CARREE){a.projector(t,0,i,0);const g=d.metersPerUnit??1,_=y.metersPerUnit??1;i[3]=t[3]*g/_}else{const g=Rs[d.spatialReferenceId][X.SPHERICAL_ECEF],_=Rs[X.SPHERICAL_ECEF][X.PLATE_CARREE];let x=t[3];g!=null&&_!=null&&(x=fx(t[1],t[2],t[3],Vt.radius)),a.projector(t,0,i,0),i[3]=x}return!0}function fx(t,e,i,s){const a=s+e;if(a<s/2||i>a)return Number.MAX_VALUE;const d=Math.abs($n*t)+Math.asin(i/a);return d>=Math.PI/2?Number.MAX_VALUE:i/Math.cos(d)}function cK(t,e,i,s){return t!=null&&(Ri(e,s)?(N5(i,t),!0):(Jt[0]=t[0],Jt[1]=t[1],Jt[2]=0,!!Ln(Jt,e,0,Jt,s,0,1)&&(i[0]=Jt[0],i[1]=Jt[1],Jt[0]=t[2],Jt[1]=t[3],Jt[2]=0,!!Ln(Jt,e,0,Jt,s,0,1)&&(i[2]=Jt[0],i[3]=Jt[1],!0))))}function pK(t,e,i,s){if(e==null||s==null)return!1;const a=bo(e,zp),d=bo(s,ok);if(a===d&&a!==X.UNKNOWN||Ri(e,s))return i[0]=1,i[1]=1,i[2]=1,!0;if(a===X.SPHERICAL_ECEF){const y=vv(t),g=y/Math.sqrt(t[0]*t[0]+t[1]*t[1]),_=y/Vt.radius;if(d===X.WEB_MERCATOR)return i[0]=g*_,i[1]=g*_,i[2]=1,!0;if(d===X.WGS84||d===X.CGCS2000){const x=Cd;return i[0]=x*g*_,i[1]=x*_,i[2]=1,!0}}else if(a===X.PLATE_CARREE){if(d===X.WGS84||d===X.CGCS2000)return i[0]=Cd,i[1]=Cd,i[2]=1,!0;if(d===X.WEB_MERCATOR){const y=t[1]/Vt.radius;return i[0]=1,i[1]=1/Math.cos(y),i[2]=1,!0}}return!1}function dK(t,e,i,s){if(t==null||s==null)return!1;const a=bo(t,zp),d=bo(s,ok);if(a===d&&!yx(d)&&(a!==X.UNKNOWN||Ri(t,s)))return OA(i,e),!0;if(yx(d)){const y=Rs[a][X.LON_LAT],g=Rs[X.LON_LAT][d];return y!=null&&g!=null&&(y(e,0,gn,0),g(gn,0,Ra,0),v4($n*gn[0],$n*gn[1],i),i[12]=Ra[0],i[13]=Ra[1],i[14]=Ra[2],!0)}if((d===X.WEB_MERCATOR||d===X.PLATE_CARREE)&&(a===X.WGS84||a===X.CGCS2000&&d===X.PLATE_CARREE||a===X.SPHERICAL_ECEF||a===X.WEB_MERCATOR)){const y=Rs[a][X.LON_LAT],g=Rs[X.LON_LAT][d];return y!=null&&g!=null&&(y(e,0,gn,0),g(gn,0,Ra,0),a===X.SPHERICAL_ECEF?YA($n*gn[0],$n*gn[1],i):Gf(i),i[12]=Ra[0],i[13]=Ra[1],i[14]=Ra[2],!0)}return!1}function yx(t){return t===X.SPHERICAL_ECEF||t===X.SPHERICAL_MARS_PCPF||t===X.SPHERICAL_MOON_PCPF}function v4(t,e,i){const s=Math.sin(t),a=Math.cos(t),d=Math.sin(e),y=Math.cos(e),g=i;return g[0]=-s,g[4]=-d*a,g[8]=y*a,g[12]=0,g[1]=a,g[5]=-d*s,g[9]=y*s,g[13]=0,g[2]=0,g[6]=y,g[10]=d,g[14]=0,g[3]=0,g[7]=0,g[11]=0,g[15]=1,g}function YA(t,e,i){return v4(t,e,i),Sa(i,i),i}function bo(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=_o(t,1)),t.wkt===hF.wkt?e.spatialReferenceId=X.SPHERICAL_ECEF:Xd(t)?e.spatialReferenceId=X.WGS84:Ih(t)?e.spatialReferenceId=X.WEB_MERCATOR:nF(t)?e.spatialReferenceId=X.PLATE_CARREE:t.wkt===cF.wkt?e.spatialReferenceId=X.WGS84_ECEF:t.wkid===Mh.CGCS2000?e.spatialReferenceId=X.CGCS2000:t.wkt===tM.wkt?e.spatialReferenceId=X.SPHERICAL_MARS_PCPF:t.wkt===iM.wkt?e.spatialReferenceId=X.SPHERICAL_MOON_PCPF:g5(t)?e.spatialReferenceId=X.GCSMARS2000:v5(t)?e.spatialReferenceId=X.GCSMOON2000:e.spatialReferenceId=X.UNKNOWN):X.UNKNOWN}function Rt(t,e,i,s){t!==i&&(i[s++]=t[e++],i[s++]=t[e++],i[s]=t[e])}function vh(t,e,i,s){i[s++]=_p*(t[e++]/Vt.radius),i[s++]=_p*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/Vt.radius))),i[s]=t[e]}function ZA(t,e,i,s){vh(t,e,i,s),Nl(i,s,i,s)}function XA(t,e,i,s){vh(t,e,i,s),Rl(i,s,i,s)}function QA(t,e,i,s,a){const d=.4999999*Math.PI,y=zs($n*t[e+1],-d,d),g=Math.sin(y);i[s++]=$n*t[e]*a.radius,i[s++]=a.halfSemiMajorAxis*Math.log((1+g)/(1-g)),i[s]=t[e+2]}function Lh(t,e,i,s){QA(t,e,i,s,Vt)}const gx=Vt.radius*Math.PI/180,Cd=180/(Vt.radius*Math.PI);function Pl(t,e,i,s){i[s]=t[e]*gx,i[s+1]=t[e+1]*gx,i[s+2]=t[e+2]}function dh(t,e,i,s){i[s]=t[e]*Cd,i[s+1]=t[e+1]*Cd,i[s+2]=t[e+2]}function ek(t,e,i,s){vh(t,e,i,s),Pl(i,s,i,s)}function fK(t,e,i,s){jl(t,e,i,s),Pl(i,s,i,s)}function yK(t,e,i,s){Ll(t,e,i,s),Pl(i,s,i,s)}function gK(t,e,i,s){dh(t,e,i,s),Nl(i,s,i,s)}function mK(t,e,i,s){dh(t,e,i,s),Lh(i,s,i,s)}function vK(t,e,i,s){dh(t,e,i,s),Rl(i,s,i,s)}function bK(t){if(t==null)return!1;const e=bo(t,zp);return!!Rs[e][X.WGS84_COMPARABLE_LON_LAT]}function wK(t,e,i,s){const a=Math.cos(i);t[0]=Math.cos(e)*a*s,t[1]=Math.sin(e)*a*s,t[2]=Math.sin(i)*s}function b4(t,e,i,s,a){const d=a+t[e+2],y=$n*t[e+1],g=$n*t[e],_=Math.cos(y);i[s++]=Math.cos(g)*_*d,i[s++]=Math.sin(g)*_*d,i[s]=Math.sin(y)*d}function Z3(t,e,i,s){b4(t,e,i,s,Bl.radius)}function X3(t,e,i,s){b4(t,e,i,s,aa.radius)}function Nl(t,e,i,s){b4(t,e,i,s,Vt.radius)}function Ov(t,e,i,s,a){const d=t[e],y=t[e+1],g=t[e+2],_=Math.sqrt(d*d+y*y+g*g),x=KM(g/(_===0?1:_)),I=Math.atan2(y,d);i[s++]=_p*I,i[s++]=_p*x,i[s]=_-a}function Q3(t,e,i,s){Ov(t,e,i,s,Bl.radius)}function e9(t,e,i,s){Ov(t,e,i,s,aa.radius)}function Ll(t,e,i,s){Ov(t,e,i,s,Vt.radius)}function tk(t,e,i,s){Ll(t,e,i,s),Lh(i,s,i,s)}function ik(t,e,i,s){Ll(t,e,i,s),Rl(i,s,i,s)}function _K(t,e,i,s,a){const d=$n*t[e],y=$n*t[e+1],g=t[e+2],_=Math.sin(y),x=Math.cos(y),I=a.radius/Math.sqrt(1-a.eccentricitySquared*_*_);i[s++]=(I+g)*x*Math.cos(d),i[s++]=(I+g)*x*Math.sin(d),i[s++]=(I*(1-a.eccentricitySquared)+g)*_}function Rl(t,e,i,s){_K(t,e,i,s,Vt)}function jl(t,e,i,s){const a=zJ,d=t[e],y=t[e+1],g=t[e+2];let _,x,I,A,C,N,j,D,V,W,K,Y,ee,re,se,ue,de,we,Oe,Ne,Le;_=Math.abs(g),x=d*d+y*y,I=Math.sqrt(x),A=x+g*g,C=Math.sqrt(A),Ne=Math.atan2(y,d),N=g*g/A,j=x/A,re=a.a2/C,se=a.a3-a.a4/C,j>.3?(D=_/C*(1+j*(a.a1+re+N*se)/C),Oe=Math.asin(D),W=D*D,V=Math.sqrt(1-W)):(V=I/C*(1-N*(a.a5-re-j*se)/C),Oe=Math.acos(V),W=1-V*V,D=Math.sqrt(W)),K=1-Vt.eccentricitySquared*W,Y=Vt.radius/Math.sqrt(K),ee=a.a6*Y,re=I-Y*V,se=_-ee*D,de=V*re+D*se,ue=V*se-D*re,we=ue/(ee/K+de),Oe+=we,Le=de+ue*we/2,g<0&&(Oe=-Oe),i[s++]=_p*Ne,i[s++]=_p*Oe,i[s]=Le}function rk(t,e,i,s){jl(t,e,i,s),Nl(i,s,i,s)}function sk(t,e,i,s){jl(t,e,i,s),Lh(i,s,i,s)}const Rs={[X.WGS84]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Rt,[X.WGS84_COMPARABLE_LON_LAT]:Rt,[X.SPHERICAL_ECEF]:Nl,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:Lh,[X.PLATE_CARREE]:Pl,[X.WGS84]:Rt,[X.WGS84_ECEF]:Rl},[X.CGCS2000]:{[X.CGCS2000]:Rt,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Rt,[X.WGS84_COMPARABLE_LON_LAT]:Rt,[X.SPHERICAL_ECEF]:Nl,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:Pl,[X.WGS84]:null,[X.WGS84_ECEF]:Rl},[X.GCSMARS2000]:{[X.CGCS2000]:null,[X.GCSMARS2000]:Rt,[X.GCSMOON2000]:null,[X.LON_LAT]:Rt,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:X3,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.GCSMOON2000]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:Rt,[X.LON_LAT]:Rt,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:Z3,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.WEB_MERCATOR]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:vh,[X.WGS84_COMPARABLE_LON_LAT]:vh,[X.SPHERICAL_ECEF]:ZA,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:Rt,[X.PLATE_CARREE]:ek,[X.WGS84]:vh,[X.WGS84_ECEF]:XA},[X.WGS84_ECEF]:{[X.CGCS2000]:jl,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:jl,[X.WGS84_COMPARABLE_LON_LAT]:jl,[X.SPHERICAL_ECEF]:rk,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:sk,[X.PLATE_CARREE]:fK,[X.WGS84]:jl,[X.WGS84_ECEF]:Rt},[X.SPHERICAL_ECEF]:{[X.CGCS2000]:Ll,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Ll,[X.WGS84_COMPARABLE_LON_LAT]:Ll,[X.SPHERICAL_ECEF]:Rt,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:tk,[X.PLATE_CARREE]:yK,[X.WGS84]:Ll,[X.WGS84_ECEF]:ik},[X.SPHERICAL_MARS_PCPF]:{[X.CGCS2000]:null,[X.GCSMARS2000]:e9,[X.GCSMOON2000]:null,[X.LON_LAT]:e9,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:Rt,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.SPHERICAL_MOON_PCPF]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:Q3,[X.LON_LAT]:Q3,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:Rt,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.UNKNOWN]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:null,[X.WGS84_COMPARABLE_LON_LAT]:null,[X.SPHERICAL_ECEF]:null,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:Rt,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:null,[X.WGS84]:null,[X.WGS84_ECEF]:null},[X.LON_LAT]:{[X.CGCS2000]:Rt,[X.GCSMARS2000]:Rt,[X.GCSMOON2000]:Rt,[X.LON_LAT]:Rt,[X.WGS84_COMPARABLE_LON_LAT]:Rt,[X.SPHERICAL_ECEF]:Nl,[X.SPHERICAL_MARS_PCPF]:X3,[X.SPHERICAL_MOON_PCPF]:Z3,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:Lh,[X.PLATE_CARREE]:Pl,[X.WGS84]:Rt,[X.WGS84_ECEF]:Rl},[X.WGS84_COMPARABLE_LON_LAT]:{[X.CGCS2000]:null,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:Rt,[X.WGS84_COMPARABLE_LON_LAT]:Rt,[X.SPHERICAL_ECEF]:Nl,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:null,[X.PLATE_CARREE]:Pl,[X.WGS84]:Rt,[X.WGS84_ECEF]:Rl},[X.PLATE_CARREE]:{[X.CGCS2000]:dh,[X.GCSMARS2000]:null,[X.GCSMOON2000]:null,[X.LON_LAT]:dh,[X.WGS84_COMPARABLE_LON_LAT]:dh,[X.SPHERICAL_ECEF]:gK,[X.SPHERICAL_MARS_PCPF]:null,[X.SPHERICAL_MOON_PCPF]:null,[X.UNKNOWN]:null,[X.WEB_MERCATOR]:mK,[X.PLATE_CARREE]:Rt,[X.WGS84]:dh,[X.WGS84_ECEF]:vK}};function w4(t,e,i=_4()){return t==null||e==null?null:nk(t,e,i).projector}function nk(t,e,i){if(t==null||e==null||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const s=bo(t,i.source),a=bo(e,i.dest);return s===X.UNKNOWN&&a===X.UNKNOWN?Ri(t,e)?i.projector=Rt:i.projector=null:i.projector=Rs[s][a],i}function _4(){return{source:{spatialReference:null,spatialReferenceId:X.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:X.UNKNOWN,metersPerUnit:1},projector:Rt}}const zp={spatialReference:null,spatialReferenceId:X.UNKNOWN},ok={spatialReference:null,spatialReferenceId:X.UNKNOWN},S4=_4(),SK=_4(),$n=mG(1),_p=JM(1),Jt=Dn(),gn=Dn(),Ra=Dn(),ft=Dn(),P1=Dn(),Sfe=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:bK,canProjectWithoutEngine:ga,computeENUToSphericalPCPFLocalRotation:v4,computeSphericalPCPFToENULocalRotation:YA,computeTranslationToOriginAndRotation:dK,getProjectorName:YJ,getTransformation:FA,getTransformations:WJ,initializeProjection:VA,isLoaded:Wh,load:Zl,localLinearScaleFactors:pK,lonLatToSphericalPCPF:wK,lonLatToWebMercatorComparable:QA,project:au,projectBoundingRect:cK,projectBoundingSphere:hK,projectBuffer:Ln,projectDirection:uK,projectExtent:rK,projectMany:J3,projectMultipoint:XJ,projectOrLoad:HJ,projectOrLoadMany:DA,projectPoint:ZJ,projectPointToVector:oK,projectPointToWGS84ComparableLonLat:aK,projectPolygon:iK,projectPolygonToWGS84ComparableLonLat:tK,projectPolyline:QJ,projectPolylineToWGS84ComparableLonLat:eK,projectVectorToDehydratedPoint:nK,projectVectorToPoint:sK,projectVectorToVector:Y3,projectVectorToWGS84ComparableLonLat:JA,projectWithoutEngine:GA,projectXYZToVector:K3,sphericalPCPFtoLonLatElevation:Ov,test:KJ,tryProjectWithZConversion:zA,unload:JJ},Symbol.toStringTag,{value:"Module"}));var t9;let to=t9=class extends ye{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new t9({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],to.prototype,"cols",void 0),b([S({type:Pt,json:{write:!0}})],to.prototype,"level",void 0),b([S({type:String,json:{write:!0}})],to.prototype,"levelValue",void 0),b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],to.prototype,"origin",void 0),b([S({type:Number,json:{write:!0}})],to.prototype,"resolution",void 0),b([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],to.prototype,"rows",void 0),b([S({type:Number,json:{write:!0}})],to.prototype,"scale",void 0),to=t9=b([J("esri.layers.support.LOD")],to);const wl=to;let ak=class{constructor(e,i,s,a,d=void 0){this.id=e,this.level=i,this.row=s,this.col=a,this.extent=d}};var tl;const mx=new Nt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let rr=tl=class extends ye{static create(t={}){const{resolutionFactor:e=1,scales:i,size:s=256,spatialReference:a=Xe.WebMercator,numLODs:d=24}=t;if(!Xi(a)){const A=[];if(i)for(let C=0;C<i.length;C++){const N=i[C];A.push(new wl({level:C,scale:N,resolution:N}))}else{let C=5e-4;for(let N=d-1;N>=0;N--)A.unshift(new wl({level:N,scale:C,resolution:C})),C*=2}return new tl({dpi:96,lods:A,origin:new Ue(0,0,a),size:[s,s],spatialReference:a})}const y=In(a),g=t.origin?new Ue({x:t.origin.x,y:t.origin.y,spatialReference:a}):new Ue(y?{x:y.origin[0],y:y.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),_=96,x=1/(_o(a)*39.37*_),I=[];if(i)for(let A=0;A<i.length;A++){const C=i[A],N=C*x;I.push(new wl({level:A,scale:C,resolution:N}))}else{let A=eM(a)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const C=Math.ceil(d/e);I.push(new wl({level:0,scale:A,resolution:A*x}));for(let N=1;N<C;N++){const j=A/2**e,D=j*x;I.push(new wl({level:N,scale:j,resolution:D})),A=j}}return new tl({dpi:_,lods:I,origin:g,size:[s,s],spatialReference:a})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=In(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return Ue.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const s=[],a=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(d=>{s.push(d.scale),e=d.scale>e?d.scale:e,i=d.scale<i?d.scale:i,a[d.level]=d})),this._set("scales",s),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),s=i+1;return e[i]/(e[i]/e[s])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let s=0;for(;s<i;s++){const a=e[s],d=e[s+1];if(a<=t)return s;if(d===t)return s+1;if(a>t&&d<t)return s+Math.log(a/t)/Math.log(a/d)}return s}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,s){const a=this.lodAt(t);if(!a)return null;let d,y;if(typeof e=="number")d=e,y=i;else if(Ri(e.spatialReference,this.spatialReference))d=e.x,y=e.y,s=i;else{const x=yv(e,this.spatialReference);if(x==null)return null;d=x.x,y=x.y,s=i}const g=a.resolution*this.size[0],_=a.resolution*this.size[1];return s||(s=new ak(null,0,0,0,mo())),s.level=t,s.row=Math.floor((this.origin.y-y)/_+.001),s.col=Math.floor((d-this.origin.x)/g+.001),this.updateTileInfo(s),s}updateTileInfo(t,e=tl.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===tl.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<t.level&&(i=y)}if(!i)return;const s=t.level-i.level,a=i.resolution*this.size[0]/2**s,d=i.resolution*this.size[1]/2**s;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=mo()),t.extent[0]=this.origin.x+t.col*a,t.extent[1]=this.origin.y-(t.row+1)*d,t.extent[2]=t.extent[0]+a,t.extent[3]=t.extent[1]+d}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:s}=i,a=s*this.size[0],d=s*this.size[1];return t[0]=this.origin.x+e.col*a,t[1]=this.origin.y-(e.row+1)*d,t[2]=t[0]+a,t[3]=t[1]+d,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return tl.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],s=this.lods.length;for(let a=0;a<s;a++){const d=this.lods[a],y=d.resolution*e;i.push(new wl({level:d.level,scale:d.scale,resolution:y}))}return new tl({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const s=t[i];this._upsampleLevels[s.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/s.resolution:0},e=s}}};b([S({type:Number,json:{write:!0}})],rr.prototype,"compressionQuality",void 0),b([S({type:Number,json:{write:!0}})],rr.prototype,"dpi",void 0),b([S({type:String,json:{read:mx.read,write:mx.write,origins:{"web-scene":{read:!1,write:!1}}}})],rr.prototype,"format",void 0),b([S({readOnly:!0})],rr.prototype,"isWrappable",null),b([S({type:Ue,json:{write:!0}})],rr.prototype,"origin",void 0),b([Ce("origin")],rr.prototype,"readOrigin",null),b([S({type:[wl],value:null,json:{write:!0}})],rr.prototype,"lods",null),b([S({readOnly:!0})],rr.prototype,"scales",void 0),b([S({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],rr.prototype,"size",void 0),b([Ce("size",["rows","cols"])],rr.prototype,"readSize",null),b([ke("size",{cols:{type:Pt},rows:{type:Pt}})],rr.prototype,"writeSize",null),b([S({type:Xe,json:{write:!0}})],rr.prototype,"spatialReference",void 0),rr=tl=b([J("esri.layers.support.TileInfo")],rr),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(rr||(rr={}));const i9=rr,Jy={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,s=this.values;return e<=i.xsmall?s.xsmall:e<=i.small?s.small:e<=i.medium?s.medium:e<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,s=this.values;return e<=i.xsmall?s.xsmall:e<=i.small?s.small:e<=i.medium?s.medium:e<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],s=e[1],a=this.values;return s>=i?a.portrait:a.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},D2={xsmall:544,small:768,medium:992,large:1200};function xK(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function F2(t,e){return e?Jy[t].valueToClassName[e].split(" "):[]}const $K=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new ba,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=D2}initialize(){this._breakpointsHandles.add(Me(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),vt))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Kt(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const s=xK(i);if(!s){const a=JSON.stringify(D2,null,2);console.warn("provided breakpoints are not valid, using defaults:"+a)}i=s?i:D2,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=kr.acquire(),s=kr.acquire();let a,d=!1;for(a in Jy){const y=this[a],g=Jy[a].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==g&&(d=!0,this[a]=g,F2(a,y).forEach(_=>s.push(_)),F2(a,g).forEach(_=>i.push(_)))}d&&(this._applyClassNameChanges(i,s),kr.release(i),kr.release(s))}_applyClassNameChanges(i,s){const a=this.container;a&&(s.forEach(d=>a.classList.remove(d)),i.forEach(d=>a.classList.add(d)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in Jy)F2(s,this[s]).forEach(a=>i.classList.remove(a))}};return b([S()],e.prototype,"breakpoints",null),b([S()],e.prototype,"orientation",void 0),b([S()],e.prototype,"widthBreakpoint",void 0),b([S()],e.prototype,"heightBreakpoint",void 0),e=b([J("esri.views.BreakpointsOwner")],e),e};function x4(t){return typeof t=="string"?document.getElementById(t):t??null}function lk(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function vx(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function bx(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let sp=class extends je{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new ba,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,s={}){return this._installWatch(e,i,s,Me)}addWhen(e,i,s={}){return this._installWatch(e,i,s,Jl)}addOnCollectionChange(e,i,{initial:s=!1,final:a=!1}={}){const d=++this._handleId;return this._handles.add([Nh(e,"after-changes",this._createSyncUpdatingCallback(),Fp),Nh(e,"change",i,{onListenerAdd:s?y=>i({added:y.toArray(),removed:[]}):void 0,onListenerRemove:a?y=>i({added:[],removed:y.toArray()}):void 0})],d),yo(()=>this._handles.remove(d))}addPromise(e){if(e==null)return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(N1)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const s=()=>this._handles.remove(i);return e.then(s,s),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,s={},a){const d=++this._handleId;s.sync||this._installSyncUpdatingWatch(e,d);const y=a(e,i,s);return this._handles.add(y,d),yo(()=>this._handles.remove(d))}_installSyncUpdatingWatch(e,i){const s=this._createSyncUpdatingCallback(),a=Me(e,s,{sync:!0,equals:()=>!1});return this._handles.add(a,i),a}_createSyncUpdatingCallback(){return()=>{this._handles.remove(N1),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(Ip(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(N1))}),N1)}}};b([S({readOnly:!0})],sp.prototype,"updating",void 0),sp=b([J("esri.core.support.WatchUpdatingTracking")],sp);const N1=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var TK=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},rh={exports:{}},mi={},hf={exports:{}},Jh={};function uk(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function MK(t,e,i){}function IK(t,e,i){}var EK=/javascript\s*\:/img;function AK(t,e){return EK.test(e)?"":e}Jh.whiteList=uk();Jh.getDefaultWhiteList=uk;Jh.onAttr=MK;Jh.onIgnoreAttr=IK;Jh.safeAttrValue=AK;var kK={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,a;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,a=t.length;s<a;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},l0=kK;function OK(t,e){t=l0.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,s=!1,a=0,d=0,y="";function g(){if(!s){var I=l0.trim(t.slice(a,d)),A=I.indexOf(":");if(A!==-1){var C=l0.trim(I.slice(0,A)),N=l0.trim(I.slice(A+1));if(C){var j=e(a,y.length,C,N,I);j&&(y+=j+"; ")}}}a=d+1}for(;d<i;d++){var _=t[d];if(_==="/"&&t[d+1]==="*"){var x=t.indexOf("*/",d+2);if(x===-1)break;d=x+1,a=d+1,s=!1}else _==="("?s=!0:_===")"?s=!1:_===";"?s||g():_===`
`&&g()}return l0.trim(y)}var CK=OK,L1=Jh,PK=CK;function wx(t){return t==null}function NK(t){var e={};for(var i in t)e[i]=t[i];return e}function hk(t){t=NK(t||{}),t.whiteList=t.whiteList||L1.whiteList,t.onAttr=t.onAttr||L1.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||L1.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||L1.safeAttrValue,this.options=t}hk.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,a=i.onAttr,d=i.onIgnoreAttr,y=i.safeAttrValue,g=PK(t,function(_,x,I,A,C){var N=s[I],j=!1;if(N===!0?j=N:typeof N=="function"?j=N(A):N instanceof RegExp&&(j=N.test(A)),j!==!0&&(j=!1),A=y(I,A),!!A){var D={position:x,sourcePosition:_,source:C,isWhite:j};if(j){var V=a(I,A,D);return wx(V)?I+":"+A:V}else{var V=d(I,A,D);if(!wx(V))return V}}});return g};var LK=hk;(function(t,e){var i=Jh,s=LK;function a(y,g){var _=new s(g);return _.process(y)}e=t.exports=a,e.FilterCSS=s;for(var d in i)e[d]=i[d]})(hf,hf.exports);var $4={indexOf:function(t,e){var i,s;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var s,a;if(Array.prototype.forEach)return t.forEach(e,i);for(s=0,a=t.length;s<a;s++)e.call(i,t[s],s,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},RK=hf.exports.FilterCSS,jK=hf.exports.getDefaultWhiteList,vm=$4;function ck(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var pk=new RK;function DK(t,e,i){}function FK(t,e,i){}function zK(t,e,i){}function VK(t,e,i){}function dk(t){return t.replace(UK,"&lt;").replace(qK,"&gt;")}function GK(t,e,i,s){if(i=bk(i),e==="href"||e==="src"){if(i=vm.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(R1.lastIndex=0,R1.test(i))return""}else if(e==="style"){if(_x.lastIndex=0,_x.test(i)||(Sx.lastIndex=0,Sx.test(i)&&(R1.lastIndex=0,R1.test(i))))return"";s!==!1&&(s=s||pk,i=s.process(i))}return i=wk(i),i}var UK=/</g,qK=/>/g,BK=/"/g,HK=/&quot;/g,WK=/&#([a-zA-Z0-9]*);?/gim,JK=/&colon;?/gim,KK=/&newline;?/gim,R1=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,_x=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Sx=/u\s*r\s*l\s*\(.*/gi;function fk(t){return t.replace(BK,"&quot;")}function yk(t){return t.replace(HK,'"')}function gk(t){return t.replace(WK,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function mk(t){return t.replace(JK,":").replace(KK," ")}function vk(t){for(var e="",i=0,s=t.length;i<s;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return vm.trim(e)}function bk(t){return t=yk(t),t=gk(t),t=mk(t),t=vk(t),t}function wk(t){return t=fk(t),t=dk(t),t}function YK(){return""}function ZK(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function s(y){return i?!0:vm.indexOf(t,y)!==-1}var a=[],d=!1;return{onIgnoreTag:function(y,g,_){if(s(y))if(_.isClosing){var x="[/removed]",I=_.position+x.length;return a.push([d!==!1?d:_.position,I]),d=!1,x}else return d||(d=_.position),"[removed]";else return e(y,g,_)},remove:function(y){var g="",_=0;return vm.forEach(a,function(x){g+=y.slice(_,x[0]),_=x[1]}),g+=y.slice(_),g}}}function XK(t){for(var e="",i=0;i<t.length;){var s=t.indexOf("<!--",i);if(s===-1){e+=t.slice(i);break}e+=t.slice(i,s);var a=t.indexOf("-->",s);if(a===-1)break;i=a+3}return e}function QK(t){var e=t.split("");return e=e.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),e.join("")}mi.whiteList=ck();mi.getDefaultWhiteList=ck;mi.onTag=DK;mi.onIgnoreTag=FK;mi.onTagAttr=zK;mi.onIgnoreTagAttr=VK;mi.safeAttrValue=GK;mi.escapeHtml=dk;mi.escapeQuote=fk;mi.unescapeQuote=yk;mi.escapeHtmlEntities=gk;mi.escapeDangerHtml5Entities=mk;mi.clearNonPrintableCharacter=vk;mi.friendlyAttrValue=bk;mi.escapeAttrValue=wk;mi.onIgnoreTagStripAll=YK;mi.StripTagBody=ZK;mi.stripCommentTag=XK;mi.stripBlankChar=QK;mi.cssFilter=pk;mi.getDefaultCSSWhiteList=jK;var Cv={},_l=$4;function eY(t){var e=_l.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=_l.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function tY(t){return t.slice(0,2)==="</"}function iY(t,e,i){var s="",a=0,d=!1,y=!1,g=0,_=t.length,x="",I="";e:for(g=0;g<_;g++){var A=t.charAt(g);if(d===!1){if(A==="<"){d=g;continue}}else if(y===!1){if(A==="<"){s+=i(t.slice(a,g)),d=g,a=g;continue}if(A===">"){s+=i(t.slice(a,d)),I=t.slice(d,g+1),x=eY(I),s+=e(d,s.length,x,I,tY(I)),a=g+1,d=!1;continue}if(A==='"'||A==="'")for(var C=1,N=t.charAt(g-C);N.trim()===""||N==="=";){if(N==="="){y=A;continue e}N=t.charAt(g-++C)}}else if(A===y){y=!1;continue}}return a<t.length&&(s+=i(t.substr(a))),s}var rY=/[^a-zA-Z0-9\\_:.-]/gim;function sY(t,e){var i=0,s=0,a=[],d=!1,y=t.length;function g(C,N){if(C=_l.trim(C),C=C.replace(rY,"").toLowerCase(),!(C.length<1)){var j=e(C,N||"");j&&a.push(j)}}for(var _=0;_<y;_++){var x=t.charAt(_),I,A;if(d===!1&&x==="="){d=t.slice(i,_),i=_+1,s=t.charAt(i)==='"'||t.charAt(i)==="'"?i:oY(t,_+1);continue}if(d!==!1&&_===s){if(A=t.indexOf(x,_+1),A===-1)break;I=_l.trim(t.slice(s+1,A)),g(d,I),d=!1,_=A,i=_+1;continue}if(/\s|\n|\t/.test(x))if(t=t.replace(/\s|\n|\t/g," "),d===!1)if(A=nY(t,_),A===-1){I=_l.trim(t.slice(i,_)),g(I),d=!1,i=_+1;continue}else{_=A-1;continue}else if(A=aY(t,_-1),A===-1){I=_l.trim(t.slice(i,_)),I=xx(I),g(d,I),d=!1,i=_+1;continue}else continue}return i<t.length&&(d===!1?g(t.slice(i)):g(d,xx(_l.trim(t.slice(i))))),_l.trim(a.join(" "))}function nY(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function oY(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function aY(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function lY(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function xx(t){return lY(t)?t.substr(1,t.length-2):t}Cv.parseTag=iY;Cv.parseAttr=sY;var uY=hf.exports.FilterCSS,mn=mi,_k=Cv,hY=_k.parseTag,cY=_k.parseAttr,Ky=$4;function j1(t){return t==null}function pY(t){var e=Ky.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=Ky.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=Ky.trim(t.slice(0,-1))),{html:t,closing:i}}function dY(t){var e={};for(var i in t)e[i]=t[i];return e}function fY(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(s){return s.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Sk(t){t=dY(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=mn.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=fY(t.whiteList||t.allowList):t.whiteList=mn.whiteList,t.onTag=t.onTag||mn.onTag,t.onTagAttr=t.onTagAttr||mn.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||mn.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||mn.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||mn.safeAttrValue,t.escapeHtml=t.escapeHtml||mn.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new uY(t.css))}Sk.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,s=i.whiteList,a=i.onTag,d=i.onIgnoreTag,y=i.onTagAttr,g=i.onIgnoreTagAttr,_=i.safeAttrValue,x=i.escapeHtml,I=e.cssFilter;i.stripBlankChar&&(t=mn.stripBlankChar(t)),i.allowCommentTag||(t=mn.stripCommentTag(t));var A=!1;i.stripIgnoreTagBody&&(A=mn.StripTagBody(i.stripIgnoreTagBody,d),d=A.onIgnoreTag);var C=hY(t,function(N,j,D,V,W){var K={sourcePosition:N,position:j,isClosing:W,isWhite:Object.prototype.hasOwnProperty.call(s,D)},Y=a(D,V,K);if(!j1(Y))return Y;if(K.isWhite){if(K.isClosing)return"</"+D+">";var ee=pY(V),re=s[D],se=cY(ee.html,function(ue,de){var we=Ky.indexOf(re,ue)!==-1,Oe=y(D,ue,de,we);return j1(Oe)?we?(de=_(D,ue,de,I),de?ue+'="'+de+'"':ue):(Oe=g(D,ue,de,we),j1(Oe)?void 0:Oe):Oe});return V="<"+D,se&&(V+=" "+se),ee.closing&&(V+=" /"),V+=">",V}else return Y=d(D,V,K),j1(Y)?x(V):Y},x);return A&&(C=A.remove(C)),C};var yY=Sk;(function(t,e){var i=mi,s=Cv,a=yY;function d(g,_){var x=new a(_);return x.process(g)}e=t.exports=d,e.filterXSS=d,e.FilterXSS=a,function(){for(var g in i)e[g]=i[g];for(var _ in s)e[_]=s[_]}();function y(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=t.exports)})(rh,rh.exports);var gY=function(){function t(e,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(d,y,g,_){return d==="a"&&y==="href"||(d==="img"||d==="source")&&y==="src"?s.sanitizeUrl(g):rh.exports.safeAttrValue(d,y,g,_)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var a;e&&!i?a=e:e&&i?(a=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(d){d==="whiteList"?a.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,e.whiteList||{}]):a[d]=e[d]})):(a=Object.create(this.arcgisFilterOptions),a.whiteList=this.arcgisWhiteList),this.xssFilterOptions=a,this._xssFilter=new rh.exports.FilterXSS(a)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var s=(i??{}).isProtocolRequired,a=s===void 0?!0:s,d=this._trim(e.substring(0,e.indexOf(":"))),y=e==="/",g=/^#/.test(e),_=d&&this.allowedProtocols.indexOf(d.toLowerCase())>-1;return y||g||_?rh.exports.escapeAttrValue(e):!d&&!a?rh.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,s,a){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,s,a):rh.exports.safeAttrValue(e,i,s,a)},t.prototype.validate=function(e,i){i===void 0&&(i={});var s=this.sanitize(e,i);return{isValid:e===s,sanitized:s}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(s){return i._entityMap[s]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(s,a){return i.test(s)?s:"&#x".concat(Number(e.charCodeAt(a)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(s){Object.keys(s).forEach(function(a){Array.isArray(s[a])&&Array.isArray(i[a])?i[a]=i[a].concat(s[a]):i[a]=s[a]})}),i},t.prototype._iterateOverObject=function(e,i){var s=this;i===void 0&&(i={});try{var a=!1,d=void 0;if(Array.isArray(e))d=e.reduce(function(g,_){var x=s.validate(_,i);return x.isValid?g.concat([_]):(a=!0,g.concat([x.sanitized]))},[]);else if(TK(e)){var y=Object.keys(e);d=y.reduce(function(g,_){var x=e[_],I=s.validate(x,i);return I.isValid?g[_]=x:(a=!0,g[_]=I.sanitized),g},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return a?d:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const Pv=new Map;function xk(){Pv.clear()}function mY(t){return Pv.get(t)}function vY(t,e){Pv.set(t,e)}function z2(t){Pv.delete(t)}var Rh,Sp,bY=function(t){if("WebkitTransition"in t.style)Rh="webkitTransitionEnd",Sp="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");Rh="transitionend",Sp="animationend"}},$k=function(t){Rh||bY(t)},wY=function(t,e){return e===void 0&&(e=t+"-active"),function(i){$k(i);var s=!1,a=function(d){s||(s=!0,i.removeEventListener(Rh,a),i.removeEventListener(Sp,a),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(Rh,a),i.addEventListener(Sp,a),requestAnimationFrame(function(){i.classList.add(e)})}},_Y=function(t,e){return e===void 0&&(e=t+"-active"),function(i,s){$k(i);var a=!1,d=function(y){a||(a=!0,i.removeEventListener(Rh,d),i.removeEventListener(Sp,d),s())};i.classList.add(t),i.addEventListener(Rh,d),i.addEventListener(Sp,d),requestAnimationFrame(function(){i.classList.add(e)})}};const SY=me.getLogger("esri.widgets.support.widgetUtils");function xY(t){const e=kr.acquire();for(let s=0;s<arguments.length;s++){const a=arguments[s],d=typeof a;if(d==="string")e.push(a);else if(Array.isArray(a))e.push.apply(e,a);else if(d==="object")for(const y in a)a[y]&&e.push(y)}const i=e.join(" ");return kr.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(s=>{var a;xk();for(const d of s)(a=t.get(d.target))==null||a(d)}),i=(s,a,d)=>(t.has(s)&&SY.error("Already observing element",s),t.set(s,a),e.observe(s,d),yo(()=>{e.unobserve(s),t.delete(s)}));return(s,a,d)=>{let y=null;return Me(()=>typeof s=="function"?s():s,g=>{y==null||y.remove(),g&&(y=i(g,a,d))},ea)}})();function $Y(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function Tfe(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function D1(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function Mfe(t,e){return(t==="enter"?wY:_Y)(e)}const TY=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],MY=TY.reduce((t,e)=>(t[e]=[],t),{}),IY=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Tk=new gY({whiteList:MY,onTagAttr:(t,e,i)=>{const s=`${e}="${i}"`;if(IY.includes(e))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function EY(t,e){const i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),a=i.top+i.height,d=s.top+s.height,y=i.top,g=s.top;(a>d||y<g)&&t.scrollIntoView({block:"end"})}function Mk(t){return t==="Enter"||t===" "}const Ik="http://www.w3.org/",Nv=`${Ik}2000/svg`,Ek=`${Ik}1999/xlink`;let $x=[],T4=(t,e)=>{let i={};return Object.keys(t).forEach(s=>{i[s]=t[s]}),e&&Object.keys(e).forEach(s=>{i[s]=e[s]}),i},M4=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Ak=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},AY=(t,e,i)=>{if(e.vnodeSelector!==""){for(let s=i;s<t.length;s++)if(M4(t[s],e))return s}return-1},V2=(t,e,i,s)=>{let a=t[e];if(a.vnodeSelector==="")return;let d=a.properties;if(!(d&&(d.key===void 0?d.bind:d.key))){for(let y=0;y<t.length;y++)if(y!==e){let g=t[y];if(M4(g,a))throw new Error(`${i.vnodeSelector} had a ${a.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},kY=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},r9=[],s9=!1,kk=t=>{(t.children||[]).forEach(kk),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},Tx=()=>{s9=!1,r9.forEach(kk),r9.length=0},Mx=t=>{r9.push(t),s9||(s9=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Tx,{timeout:16}):setTimeout(Tx,16))},Ix=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),Mx(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),Mx(t))},OY=(t,e,i)=>{if(!e)return;let s=i.eventHandlerInterceptor,a=Object.keys(e),d=a.length;for(let y=0;y<d;y++){let g=a[y],_=e[g];if(g==="className")throw new Error('Property "className" is not supported, use "class".');if(g==="class")n9(t,_,!0);else if(g==="classes"){let x=Object.keys(_),I=x.length;for(let A=0;A<I;A++){let C=x[A];_[C]&&t.classList.add(C)}}else if(g==="styles"){let x=Object.keys(_),I=x.length;for(let A=0;A<I;A++){let C=x[A],N=_[C];N&&(Ak(N),i.styleApplyer(t,C,N))}}else if(g!=="key"&&_!=null){let x=typeof _;x==="function"?(g.lastIndexOf("on",0)===0&&(s&&(_=s(g,_,t,e)),g==="oninput"&&function(){let I=_;_=function(A){I.apply(this,[A]),A.target["oninput-value"]=A.target.value}}()),t[g]=_):i.namespace===Nv?g==="href"?t.setAttributeNS(Ek,g,_):t.setAttribute(g,_):x==="string"&&g!=="value"?g==="innerHTML"?t[g]=Tk.sanitize(_):Ok(t)&&g in t?t[g]=_:t.setAttribute(g,_):t[g]=_}}};function Ok(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let bm,CY=(t,e,i)=>{if(e)for(let s of e)Wc(s,t,void 0,i)},Ck=(t,e,i)=>{CY(t,e.children,i),e.text&&(t.textContent=e.text),OY(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},Wc=(t,e,i,s)=>{let a,d=0,y=t.vnodeSelector,g=e.ownerDocument;if(y==="")a=t.domNode=g.createTextNode(t.text),i!==void 0?e.insertBefore(a,i):e.appendChild(a);else{for(let _=0;_<=y.length;++_){let x=y.charAt(_);if(_===y.length||x==="."||x==="#"){let I=y.charAt(d-1),A=y.slice(d,_);I==="."?a.classList.add(A):I==="#"?a.id=A:(A==="svg"&&(s=T4(s,{namespace:Nv})),s.namespace!==void 0?a=t.domNode=g.createElementNS(s.namespace,A):(a=t.domNode=t.domNode||g.createElement(A),A==="input"&&t.properties&&t.properties.type!==void 0&&a.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(a,i):a.parentNode!==e&&e.appendChild(a)),d=_+1}}Ck(a,t,s)}},n9=(t,e,i)=>{e&&e.split(" ").forEach(s=>{s&&t.classList.toggle(s,i)})},PY=(t,e,i,s)=>{if(!i)return;let a=!1,d=Object.keys(i),y=d.length;for(let g=0;g<y;g++){let _=d[g],x=i[_],I=e[_];if(_==="class")I!==x&&(n9(t,I,!1),n9(t,x,!0));else if(_==="classes"){let A=t.classList,C=Object.keys(x),N=C.length;for(let j=0;j<N;j++){let D=C[j],V=!!x[D];V!==!!I[D]&&(a=!0,V?A.add(D):A.remove(D))}}else if(_==="styles"){let A=Object.keys(x),C=A.length;for(let N=0;N<C;N++){let j=A[N],D=x[j];D!==I[j]&&(a=!0,D?(Ak(D),s.styleApplyer(t,j,D)):s.styleApplyer(t,j,""))}}else if(x||typeof I!="string"||(x=""),_==="value"){let A=t[_];A!==x&&(t["oninput-value"]?A===t["oninput-value"]:x!==I)&&(t[_]=x,t["oninput-value"]=void 0),x!==I&&(a=!0)}else if(x!==I){let A=typeof x;A==="function"&&s.eventHandlerInterceptor||(s.namespace===Nv?_==="href"?t.setAttributeNS(Ek,_,x):t.setAttribute(_,x):A==="string"?_==="innerHTML"?t[_]=Tk.sanitize(x):_==="role"&&x===""?t.removeAttribute(_):Ok(t)&&_ in t?t[_]=x:t.setAttribute(_,x):t[_]!==x&&(t[_]=x),a=!0)}}return a},NY=(t,e,i,s,a)=>{if(i===s)return!1;s=s||$x;let d,y=(i=i||$x).length,g=s.length,_=0,x=0,I=!1;for(;x<g;){let A=_<y?i[_]:void 0,C=s[x];if(A!==void 0&&M4(A,C))I=bm(A,C,a)||I,_++;else{let N=AY(i,C,_+1);if(N>=0){for(d=_;d<N;d++)Ix(i[d]),V2(i,d,t,"removed");I=bm(i[N],C,a)||I,_=N+1}else Wc(C,e,_<y?i[_].domNode:void 0,a),kY(C),V2(s,x,t,"added")}x++}if(y>_)for(d=_;d<y;d++)Ix(i[d]),V2(i,d,t,"removed");return I};bm=(t,e,i)=>{let s=t.domNode,a=!1;if(t===e)return!1;let d=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let y=s.ownerDocument.createTextNode(e.text);return s.parentNode.replaceChild(y,s),e.domNode=y,a=!0,a}e.domNode=s}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=T4(i,{namespace:Nv})),t.text!==e.text&&(d=!0,e.text===void 0?s.removeChild(s.firstChild):s.textContent=e.text),e.domNode=s,d=NY(e,s,t.children,e.children,i)||d,d=PY(s,t.properties,e.properties,i)||d,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[s,i,e.vnodeSelector,e.properties,e.children]);return d&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(s,e.properties,t.properties),a};let u0=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=t;t=i,bm(s,i,e)},domNode:t.domNode});const LY={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let Sc=t=>T4(LY,t),Dl={create:(t,e)=>(e=Sc(e),Wc(t,document.createElement("div"),void 0,e),u0(t,e)),append:(t,e,i)=>(i=Sc(i),Wc(e,t,void 0,i),u0(e,i)),insertBefore:(t,e,i)=>(i=Sc(i),Wc(e,t.parentNode,t,i),u0(e,i)),merge:(t,e,i)=>(i=Sc(i),e.domNode=t,Ck(t,e,i),u0(e,i)),replace:(t,e,i)=>(i=Sc(i),Wc(e,t.parentNode,t,i),t.parentNode.removeChild(t),u0(e,i))},Pk,RY=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Pk=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let jY=(t,e)=>{let i=t;return e.forEach(s=>{i=i&&i.children?Pk(i.children,a=>a.domNode===s):void 0}),i},DY=(t,e,i)=>{let s=function(a){i("domEvent",a);let d=e(),y=RY(a.currentTarget,d.domNode);y.reverse();let g,_=jY(d.getLastRender(),y);return t.scheduleRender(),_&&(g=_.properties[`on${a.type}`].apply(_.properties.bind||this,arguments)),i("domEventProcessed",a),g};return(a,d,y,g)=>s},Ex=t=>{let e,i,s=Sc(t),a=s.performanceLogger,d=!0,y=!1,g=[],_=[],x=(A,C,N)=>{let j,D=()=>j;s.eventHandlerInterceptor=DY(e,D,a),j=A(C,N(),s),g.push(j),_.push(N)},I=()=>{if(i=void 0,d){d=!1,a("renderStart",void 0);for(let A=0;A<g.length;A++){let C=_[A]();a("rendered",void 0),g[A].update(C),a("patched",void 0)}a("renderDone",void 0),d=!0}};return e={renderNow:I,scheduleRender:()=>{i||y||(i=requestAnimationFrame(I))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,d=!0,e.scheduleRender()},append:(A,C)=>{x(Dl.append,A,C)},insertBefore:(A,C)=>{x(Dl.insertBefore,A,C)},merge:(A,C)=>{x(Dl.merge,A,C)},replace:(A,C)=>{x(Dl.replace,A,C)},detach:A=>{for(let C=0;C<_.length;C++)if(_[C]===A)return _.splice(C,1),g.splice(C,1)[0];throw new Error("renderFunction was not found")}},e},il=class extends je{constructor(){super(...arguments),this.items=new Ge,this._watchUpdatingTracking=new sp,this._callbacks=new Map,this._projector=Ex(),this._hiddenProjector=Ex()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const s of i.added){const a=()=>s.render();this._callbacks.set(s,a),this._projector.append(this.surface,a)}for(const s of i.removed){const a=this._projector.detach(this._callbacks.get(s));this.surface.removeChild(a.domNode),this._callbacks.delete(s)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,s=this._hiddenProjector;let a;const d=()=>(a=e.render(),a);s.append(i,d),s.renderNow();const y={left:0,top:0,right:0,bottom:0};if(a&&a.domNode){const g=a.domNode.getBoundingClientRect();y.left=g.left,y.top=g.top,y.right=g.right,y.bottom=g.bottom}for(s.detach(d);i.firstChild;)i.removeChild(i.firstChild);return y}overlaps(e,i){const s=this.computeBoundingRect(e),a=this.computeBoundingRect(i);return Math.max(s.left,a.left)<=Math.min(s.right,a.right)&&Math.max(s.top,a.top)<=Math.min(s.bottom,a.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(s=>s.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(s=>{i.save(),s.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};b([S({readOnly:!0})],il.prototype,"surface",void 0),b([S({readOnly:!0})],il.prototype,"items",void 0),b([S({readOnly:!0})],il.prototype,"needsRender",null),b([S({readOnly:!0})],il.prototype,"_watchUpdatingTracking",void 0),b([S({readOnly:!0})],il.prototype,"updating",null),il=b([J("esri.views.overlay.ViewOverlay")],il);const Ax=il,G2=[0,0];function FY(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return G2[0]=i.left+((e==null?void 0:e.pageXOffset)??0),G2[1]=i.top+((e==null?void 0:e.pageYOffset)??0),G2}function kx(t){t&&(lk(t),t.parentNode&&t.parentNode.removeChild(t))}function zY(t){const e=document.createElement("div");return t.appendChild(e),e}const h0=16,F1=750,VY=512,GY=2,UY=t=>{let e=class extends t{constructor(...i){super(...i),this._freqInfo={freq:h0,time:F1},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Me(()=>this.cursor,s=>{const{surface:a}=this;a&&a.setAttribute("data-cursor",s)}),Me(()=>this.navigating,s=>{const{surface:a}=this;a&&a.setAttribute("data-navigating",s.toString())})])}initialize(){this.addHandles([Me(()=>this.ui,(i,s)=>this._handleUIChange(i,s),vt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Kt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const s=this._get("container"),a=x4(i);if(a||typeof i!="string"||me.getLogger(this).error("#container",`element with id '${i}' not found`),s===a)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(kx(this.root),this._set("root",null)),this.userContent&&(bx(this.userContent,s),kx(this.userContent),this._set("userContent",null))),!a)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);a.classList.add("esri-view");const d=document.createElement("div");d.className="esri-view-user-storage",bx(a,d),a.appendChild(d),this._set("userContent",d);const y=document.createElement("div");y.className="esri-view-root",a.insertBefore(y,a.firstChild),this._set("root",y);const g=document.createElement("div");g.className="esri-view-surface",g.setAttribute("role","application"),g.tabIndex=0,y.appendChild(g),this._set("surface",g);const _=new Ax;y.appendChild(_.surface),this._set("overlay",_),this.addHandles(Me(()=>_.needsRender,x=>{x&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=dp({render:()=>{var I;return(I=this.overlay)==null?void 0:I.render()}}):this._overlayRenderTaskHandle=li(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",a),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,s,a){const d=this.position;return i-=d?d[0]:0,s-=d?d[1]:0,a?(a[0]=i,a[1]=s):a=[i,s],a}containerToPage(i,s,a){const d=this.position;return i+=d?d[0]:0,s+=d?d[1]:0,a?(a[0]=i,a[1]=s):a=[i,s],a}_handleUIChange(i,s){this.removeHandles("ui"),s&&s!==i&&s.destroy(),i&&(i.view=this,this.addHandles(Me(()=>this.root,a=>{i.container=a?zY(a):null},vt),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=h0,i.time=F1,this.addHandles([(()=>{const s=()=>{i.freq=h0,i.time=F1};return window.addEventListener("resize",s),{remove(){window.removeEventListener("resize",s)}}})(),dp({prepare:s=>{const a=this._measure(),d=this._freqInfo;if(d.time+=s.deltaTime,a&&(d.freq=h0,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const y=this._position();d.freq=y||a?h0:Math.min(F1,d.freq*GY),!a&&d.freq>=VY&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,a=i?i.clientHeight:0;if(s===0||a===0)return this.suspended||this._set("suspended",!0),!1;const d=this.width,y=this.height;return s===d&&a===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",a),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:d,oldHeight:y,width:s,height:a}),!0)}_position(){const i=this.container,s=this.position,a=i&&FY(i);return!!a&&(!s||a[0]!==s[0]||a[1]!==s[1])&&(this._set("position",[a[0],a[1]]),!0)}forceDOMReadyCycle(){}};return b([S()],e.prototype,"container",null),b([S({readOnly:!0})],e.prototype,"focused",null),b([S({readOnly:!0})],e.prototype,"height",void 0),b([S({type:Ax})],e.prototype,"overlay",void 0),b([S({readOnly:!0})],e.prototype,"position",void 0),b([S({readOnly:!0})],e.prototype,"resizing",void 0),b([S({readOnly:!0})],e.prototype,"root",void 0),b([S({value:null,readOnly:!0})],e.prototype,"size",null),b([S({readOnly:!0})],e.prototype,"surface",void 0),b([S({readOnly:!0})],e.prototype,"suspended",void 0),b([S()],e.prototype,"ui",void 0),b([S({readOnly:!0})],e.prototype,"userContent",void 0),b([S({readOnly:!0})],e.prototype,"width",void 0),b([S()],e.prototype,"widthBreakpoint",void 0),e=b([J("esri.views.DOMContainer")],e),e};let qY=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const s in e){const a=e[s],d=new rT(a,void 0,void 0,2,2);this._properties[s]={pool:d,acquired:[]}}this._afterDispatchHandle=fj(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const s of i.acquired)L6(s)||i.pool.release(s);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),s=this._properties[e];let a=s.pool.acquire();for(s.acquired.push(a);a===i;)s.acquired.push(a),a=s.pool.acquire();return a}_release(){for(const e in this._properties){const i=this._properties[e];let s=0;for(const a of i.acquired)L6(a)?i.acquired[s++]=a:i.pool.release(a);i.acquired.length=s}}};const BY=le("mac")?"Meta":"Ctrl",Lv={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)Lv[t]=String.fromCharCode(t);for(let t=1;t<25;t++)Lv[111+t]=`F${t}`;for(let t=65;t<91;t++)Lv[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function HY(t){if(t.key!==void 0)return vd(t);const e=Lv[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function WY(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let JY=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}};const Ox=me.getLogger("esri.views.input.InputHandler");let Bi=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?Ox.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,s){let a;typeof i=="function"?(s=i,a=[]):a=i||[];const d=typeof e=="string"?new JY(e,a):e,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},g=I=>{const A=this._incoming[I.match.eventType];if(A){const C=A.indexOf(I);A.splice(C,1),y(),this._manager&&this._manager.updateDependencies()}},_=new KY(d,s,{onPause:g,onRemove:g,onResume:I=>{const A=this._incoming[I.match.eventType];A&&!A.includes(I)&&(A.push(I),y(),this._manager&&this._manager.updateDependencies())}});let x=this._incoming[d.eventType];return x||(x=[],this._incoming[d.eventType]=x),x.push(_),y(),this._manager&&this._manager.updateDependencies(),_}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new YY(e,{onEmit:(s,a,d,y)=>{var g;(g=this._manager)==null||g.emit(s.eventType,a,d,y)},onRemove:s=>{var a;delete this._outgoing[s.eventType],(a=this._manager)==null||a.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):Ox.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var s;const i=this._incoming[e.type];if(i){for(const a of i)if(a.match.matches(e)&&((s=a.callback)==null||s.call(a,e),e.shouldStopPropagation()))break}}},KY=class{constructor(e,i,s){this.match=e,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},YY=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,s){this._removed||this._handler.onEmit(this,e,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}},ZY=class extends Bi{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:s,y:a}=e;i===this._value&&this._x===s&&this._y===a||(this._value=i,this._x=s,this._y=a,this._onChange(i,s,a))}},XY=class{constructor(e,i){this._observable=new cv,this._value=e,this._equalityFunction=i}get value(){return Ke(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function wm(t,e=z$){return new XY(t,e)}let QY=class extends Bi{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=wm(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Ms=class extends je{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=BY,this._latestPointerType="mouse",this._propertiesPool=new qY({latestPointerLocation:iZ},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,s=Gl.INTERNAL){if(this._nameToGroup[e])return void me.getLogger(this).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void me.getLogger(this).error("Can't register a group of zero handlers");const a={name:e,handlers:i.map(d=>({handler:d,active:!0,removed:!1,priorityIndex:0,groupPriority:s,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=a;for(let d=a.handlers.length-1;d>=0;d--){const y=a.handlers[d];this._handlers.push(y),y.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(g,_,x,I,A)=>{this._emitInputEvent(y.priorityIndex+1,g,_,x,A,I)},setPointerCapture:(g,_)=>{this._setPointerCapture(a,y,g,_)},setEventCallback:g=>{y.eventCallback=g},setUninstallCallback:g=>{y.uninstallCallback=g},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(s=>{var a;s.removed=!0,(a=s.uninstallCallback)==null||a.call(s)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):me.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let s=this._handlers.length-1;s>=0;s--){const a=this._handlers[s];a.priorityIndex=s,this._handlersPriority.push(a)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let s=this._handlersPriority.length-1;s>=0;s--){const a=this._handlersPriority[s];a.priorityIndex=s;let d=a.handler.hasSideEffects;if(!d){for(const y of a.handler.outgoingEventTypes)if(e.has(y)){d=!0;break}}if(d)for(const y of a.handler.incomingEventMatches){e.add(y.eventType);for(const g of y.keyModifiers)WY(g)||i.add(g)}a.active=d}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,s){this._latestPointerType=e;const a=this._get("latestPointerLocation");if(a==null||a.x!==i||a.y!==s){const d=this._propertiesPool.get("latestPointerLocation");d.x=i,d.y=s,this._set("latestPointerLocation",d)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const d=i;this._pointerCaptures.delete(d.native.pointerId)}this._updateKeyModifiers(e,i);const s=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,a=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,s,a)}_updateKeyModifiers(e,i){if(!i)return;let s=!1;const a=()=>{if(!s){const g=new Set;this._activeKeyModifiers.forEach(_=>{g.add(_)}),this._activeKeyModifiers=g,s=!0}},d=(g,_)=>{_&&!this._activeKeyModifiers.has(g)?(a(),this._activeKeyModifiers.add(g)):!_&&this._activeKeyModifiers.has(g)&&(a(),this._activeKeyModifiers.delete(g))};if(e==="key-down"||e==="key-up"){const g=i.key;this._keyModifiers.has(g)&&d(g,e==="key-down")}const y=i.native;d("Alt",!(!y||!y.altKey)),d("Ctrl",!(!y||!y.ctrlKey)),d("Shift",!(!y||!y.shiftKey)),d("Meta",!(!y||!y.metaKey)),d("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ZY((e,i,s)=>this._setLatestPointer(e,i,s)),this._multiTouchHandler=new QY,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Gl.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Gl.INTERNAL)}_setPointerCapture(e,i,s,a){const d=e.name+"-"+i.priorityIndex,y=this._pointerCaptures.get(s.pointerId)||new Set;this._pointerCaptures.set(s.pointerId,y),a?(y.add(d),y.size===1&&this.eventSource&&this.eventSource.setPointerCapture(s,!0)):y.has(d)&&(y.delete(d),y.size===0&&(this._pointerCaptures.delete(s.pointerId),this.eventSource&&this.eventSource.setPointerCapture(s,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,s,a){this._emitInputEvent(0,e,i,s,a)}_emitInputEvent(e,i,s,a,d,y){const g=a!==void 0?a:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),_=d!==void 0&&d,x={event:new eZ(i,s,g,y||this._activeKeyModifiers,_),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(x):this._doNewPropagation(x)}_doNewPropagation(e){this._currentPropagation={events:new pm,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,s;this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:a,priorityIndex:d}=e.events.pop(),y=a.data&&a.data.eventId;if(!(y!=null&&this._stoppedPropagationEventIds.has(y)))for(e.currentHandler=this._handlersPriority[d];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!a.shouldStopPropagation()&&((s=(i=e.currentHandler).eventCallback)==null||s.call(i,a)),a.shouldStopPropagation()){y!=null&&this._stoppedPropagationEventIds.add(y);break}if(a.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:a,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new pm;i.push(e);const s=this._currentPropagation;if(s){for(;s.events.length;)i.push(s.events.pop());s.events=i,s.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const s of e.handler.incomingEventMatches)for(const a of i.handler.incomingEventMatches){if(s.eventType!==a.eventType)continue;const d=s.keyModifiers.filter(y=>a.keyModifiers.includes(y));if(d.length===s.keyModifiers.length!=(d.length===a.keyModifiers.length))return s.keyModifiers.length>a.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const s of e){let a=0;for(;a<i.length&&this._compareHandlerPriority(s,i[a])>=0;)a++;i.splice(a,0,s)}return i}get debug(){const e=i=>{const s=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=s};return{injectEvent:(i,s)=>{e(()=>{this._onEventReceived(i,s)})},disablePointerCapture:e}}};b([S({readOnly:!0})],Ms.prototype,"hasPendingInputs",null),b([S({constructOnly:!0})],Ms.prototype,"eventSource",void 0),b([S({constructOnly:!0})],Ms.prototype,"recognizers",void 0),b([S()],Ms.prototype,"_latestPointerType",void 0),b([S()],Ms.prototype,"latestPointerType",null),b([S()],Ms.prototype,"multiTouchActive",null),b([S({readOnly:!0})],Ms.prototype,"latestPointerLocation",void 0),b([S()],Ms.prototype,"_paused",void 0),b([S({readOnly:!0})],Ms.prototype,"updating",null),Ms=b([J("esri.views.input.InputManager")],Ms);let eZ=class{constructor(e,i,s,a,d){this.type=e,this.data=i,this.timestamp=s,this.modifiers=a,this.cancelable=d,this._propagationState=Sl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Sl.STOPPED}shouldStopPropagation(){return(this._propagationState&Sl.STOPPED)!=0}async(e){this._propagationState|=Sl.PAUSED;const i=(s,a)=>{this._propagationState&=~Sl.PAUSED;const d=this._resumeCallback;if(this._resumeCallback=null,d&&d(),a)throw s;return s};return(typeof e=="function"?e():e).then(s=>i(s,!1),s=>i(s,!0))}shouldPausePropagation(e){return!!(this._propagationState&Sl.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Sl;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(Sl||(Sl={}));const Gl={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let tZ=class{};const iZ=tZ;function qn(t){return t!=null&&"open"in t&&"declaredClass"in t}function Cx(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}const rZ=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Me(()=>[this.ui,this.popup],([i,s],a)=>{const d="popup",y="manual";if(a){const[g,_]=a;g&&qn(_)&&(_.view=null,Cx(_)&&g.remove(_,d))}i&&qn(s)&&(s.view=this,Cx(s)&&i.add(s,{key:d,position:y,internal:!0}))},vt),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(!qn(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(qn(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),qn(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)})))},Gl.WIDGET)]),af(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{_e(()=>import("./Popup-723ab073.js").then(i=>i.a0),["assets/Popup-723ab073.js","assets/throttle-7bf02de9.js","assets/AttachmentInfo-e8c393ca.js","assets/symbolUtils-1454c878.js","assets/utils-461a5343.js","assets/utils-fb8f30fc.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/devEnvironmentUtils-5002a058.js","assets/RelationshipQuery-4b5cdfd6.js","assets/TopFeaturesQuery-cef97b61.js","assets/FeatureLayer-96bccf25.js","assets/FeatureLayerBase-32e123ac.js","assets/featureLayerUtils-71d8b720.js","assets/editsZScale-0594243d.js","assets/EditBusLayer-a6a5507e.js","assets/FeatureEffectLayer-6e78ef43.js","assets/FeatureEffect-fa9becb0.js","assets/FeatureReductionLayer-dfeafac1.js","assets/clusterUtils-d077d77a.js","assets/OrderedLayer-0a78e45e.js","assets/fieldProperties-233fbbe4.js","assets/styleUtils-f9f86ae1.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){qn(this.popup)&&this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void me.getLogger(this).error(new oe("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),qn(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,s){await this.when();const{location:a,queryArea:d,layerViewsAndGraphics:y,clientOnlyGraphics:g}=await this._prepareFetchPopupFeatures(i,s),_=Promise.resolve(g),x=this._queryLayerPopupFeatures(d,y,s),I=x.map(A=>A.promise);return{location:a,clientOnlyGraphics:g,allGraphicsPromise:ZR([_,...I]).then(A=>Array.from(new Set(A.flat()))),promisesPerLayerView:x}}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!qn(this.popup))return this._popupSetupTask=n5(async s=>{const{default:a}=await _e(()=>import("./Popup-723ab073.js").then(y=>y.a0),["assets/Popup-723ab073.js","assets/throttle-7bf02de9.js","assets/AttachmentInfo-e8c393ca.js","assets/symbolUtils-1454c878.js","assets/utils-461a5343.js","assets/utils-fb8f30fc.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/devEnvironmentUtils-5002a058.js","assets/RelationshipQuery-4b5cdfd6.js","assets/TopFeaturesQuery-cef97b61.js","assets/FeatureLayer-96bccf25.js","assets/FeatureLayerBase-32e123ac.js","assets/featureLayerUtils-71d8b720.js","assets/editsZScale-0594243d.js","assets/EditBusLayer-a6a5507e.js","assets/FeatureEffectLayer-6e78ef43.js","assets/FeatureEffect-fa9becb0.js","assets/FeatureReductionLayer-dfeafac1.js","assets/clusterUtils-d077d77a.js","assets/OrderedLayer-0a78e45e.js","assets/fieldProperties-233fbbe4.js","assets/styleUtils-f9f86ae1.js"]);if(Xt(s),!this.popup||qn(this.popup))return;const d=this.popup;delete d.open,delete d.close,this.popup=new a(d)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(i,s,a){return s.map(({layerView:d,graphics:y})=>{const g={clientGraphics:y,event:a!=null?a.event:void 0,signal:a!=null?a.signal:void 0,defaultPopupTemplateEnabled:a!=null&&!!a.defaultPopupTemplateEnabled},_=d.fetchPopupFeatures(i,g);return{layerView:d,promise:_}})}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(s!=null&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,s){const{clientGraphics:a,queryArea:d,location:y}=await this._popupHitTestGraphics(i,s),g=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:_,clientOnlyGraphics:x}=this._graphicsPerFetchPopupLayerView(a,g);return{clientOnlyGraphics:x,layerViewsAndGraphics:_,queryArea:d,location:y}}async _popupHitTestGraphics(i,s){const a=await this.popupHitTest(i),d=a.results,y=a.mapPoint,g=d.filter(x=>x.type==="graphic"&&this._isValidPopupGraphic(x.graphic,s)),_=g.length?g[0].mapPoint:null;return{clientGraphics:g.map(x=>x.graphic),queryArea:y,location:y||_}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(s=>{this._isValidPopupLayerView(s)&&i.push(s)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return i!=null&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,s){const a=[],d=new Map,y=s.map(g=>{const _=[];return"layer"in g?d.set(g.layer,_):d.set(g.graphics,_),{layerView:g,graphics:_}});for(const g of i){const _=d.get(g.layer)||d.get(g.sourceLayer)||null;_?_.push(g):a.push(g)}return{layerViewsAndGraphics:y,clientOnlyGraphics:a}}};return b([S({cast(i){return!i||qn(i)||typeof i=="object"&&(i.open=s=>(Gg(me.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(s)),i.close=()=>(Gg(me.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),i}})],e.prototype,"popup",void 0),b([S()],e.prototype,"popupEnabled",void 0),e=b([J("esri.views.PopupView")],e),e},Px={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},sZ={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function nZ(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function bh(t,e,i){const s=new Date(t.getTime());if(e&&i){const a=sZ[i],{getter:d,setter:y,multiplier:g}=a;if(i==="months"){const _=nZ(s.getFullYear(),s.getMonth()+e);s.getDate()>_&&s.setDate(_)}s[y](s[d]()+e*g)}return s}function Nx(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function oZ(t,e,i){return t===0?0:t*Px[e]/Px[i]}var nn;let is=nn=class extends ye{static get allTime(){return Lx}static get empty(){return aZ}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(nn.allTime)}get isEmpty(){return this.equals(nn.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new nn({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=this.start!=null?this.start.getTime():this.start,i=this.end!=null?this.end.getTime():this.end,s=t.start!=null?t.start.getTime():t.start,a=t.end!=null?t.end.getTime():t.end;return e===s&&i===a}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=uh(this.start,s=>Nx(s,t)),i=uh(this.end,s=>{const a=Nx(s,t);return s.getTime()===a.getTime()?a:bh(a,1,t)});return new nn({start:e,end:i})}intersection(t){var g,_,x,I;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return nn.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=((g=this.start)==null?void 0:g.getTime())??-1/0,i=((_=this.end)==null?void 0:_.getTime())??1/0,s=((x=t.start)==null?void 0:x.getTime())??-1/0,a=((I=t.end)==null?void 0:I.getTime())??1/0;let d,y;if(s>=e&&s<=i?d=s:e>=s&&e<=a&&(d=e),i>=s&&i<=a?y=i:a>=e&&a<=i&&(y=a),d!=null&&y!=null&&!isNaN(d)&&!isNaN(y)){const A=new nn;return A.start=d===-1/0?null:new Date(d),A.end=y===1/0?null:new Date(y),A}return nn.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new nn,{start:s,end:a}=this;return s!=null&&(i.start=bh(s,t,e)),a!=null&&(i.end=bh(a,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return Lx.clone();const e=this.start!=null&&t.start!=null?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=this.end!=null&&t.end!=null?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new nn({start:e,end:i})}};b([S({type:Date,json:{write:{allowNull:!0}}})],is.prototype,"end",void 0),b([Ce("end")],is.prototype,"readEnd",null),b([ke("end")],is.prototype,"writeEnd",null),b([S({readOnly:!0,json:{read:!1}})],is.prototype,"isAllTime",null),b([S({readOnly:!0,json:{read:!1}})],is.prototype,"isEmpty",null),b([S({type:Date,json:{write:{allowNull:!0}}})],is.prototype,"start",void 0),b([Ce("start")],is.prototype,"readStart",null),b([ke("start")],is.prototype,"writeStart",null),is=nn=b([J("esri.TimeExtent")],is);const Lx=new is,aZ=new is({start:void 0,end:void 0}),xo=is,lu=t=>{let e=class extends t{constructor(){super(...arguments),this._handles=new ba,this._updatingHandles=new sp}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return b([S({readOnly:!0})],e.prototype,"handles",null),b([S({readOnly:!0})],e.prototype,"updatingHandles",null),e=b([J("esri.core.HandleOwner")],e),e};let _m=class extends lu(je){};_m=b([J("esri.core.HandleOwner")],_m);let Pd=class extends lu(Ge){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Ge.ofType(this.itemType.Type))(e):new Ge(e)}};function Rx(t,e){return{type:t,cast:LT,set(i){const s=$h(i,this._get(e),t);s.owner=this,this._set(e,s)}}}b([S()],Pd.prototype,"owner",null),Pd=b([J("esri.core.support.OwningCollection")],Pd);var H0;const Sm=$r()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Nk=Sm.jsonValues.slice();fR(Nk,"orthometric");const Nd=$r()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let on=H0=class extends ye{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return Sm.write(t,e,i)}readHeightModel(t,e,i){return Sm.read(t)||(i&&i.messages&&i.messages.push(lZ(t,{context:i})),null)}readHeightUnit(t,e,i){return Nd.read(t)||(i&&i.messages&&i.messages.push(jx(t,{context:i})),null)}readHeightUnitService(t,e,i){return oM(t)||Nd.read(t)||(i&&i.messages&&i.messages.push(jx(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new H0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=wF(e);return new H0({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new H0;return e.read(t,{origin:"web-scene"}),e}};function jx(t,e){return new Cn("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function lZ(t,e){return new Cn("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}b([S({type:Sm.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Nk,default:"ellipsoidal"}}}})],on.prototype,"heightModel",void 0),b([ke("web-scene","heightModel")],on.prototype,"writeHeightModel",null),b([Ce(["web-scene","service"],"heightModel")],on.prototype,"readHeightModel",null),b([S({type:Nd.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Nd.jsonValues,write:Nd.write}}}})],on.prototype,"heightUnit",void 0),b([Ce("web-scene","heightUnit")],on.prototype,"readHeightUnit",null),b([Ce("service","heightUnit")],on.prototype,"readHeightUnitService",null),b([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],on.prototype,"vertCRS",void 0),b([Ce("service","vertCRS",["vertCRS","ellipsoid","geoid"])],on.prototype,"readVertCRS",null),on=H0=b([J("esri.geometry.HeightModelInfo")],on);const I4=on;let xm=class extends Pd{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(me.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};xm=b([J("esri.support.AnalysesCollection")],xm);let Ld=class extends Pd{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};b([PT({Type:Nr,ensureType:ui(Nr)})],Ld.prototype,"itemType",void 0),Ld=b([J("esri.support.GraphicsCollection")],Ld);const Dx=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);function uZ(t,e="system"){if(!t||!Dx.has(t.timeZone))return e;const i=Dx.get(t.timeZone);return cZ(t.timeZone)||t.respectsDaylightSaving?i:hZ(i)}function hZ(t){const e=ot.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${xr.instance(-i).formatOffset(0,"narrow")}`}function cZ(t){return t.startsWith("UTC")}let rl=class extends Ii(ye){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:s,respectsDaylightSaving:a}=i;return{timeZone:s,respectsDaylightSaving:a}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:uZ(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return e!=null&&this.timeZone!=null&&e.timeZone!=null&&this.timeZone===e.timeZone}};b([S()],rl.prototype,"legacy",void 0),b([Ce("legacy",["timeZone"])],rl.prototype,"readLegacy",null),b([S({type:String,nonNullable:!0})],rl.prototype,"timeZone",void 0),b([Ce("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],rl.prototype,"readTimeZone",null),b([ke("timeZone")],rl.prototype,"writeTimeZone",null),rl=b([J("esri.time.TimeReference")],rl);const cf=rl;let sl=class extends je{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ge,this.referenceLayerViews=new Ge,this._loadingHandle=Me(()=>{var i,s;return(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap},i=>{i&&i.load().catch(()=>{})},vt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var i,s;if(this.view&&this.view.suspended)return!1;const e=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(a=>a.updating)||this.referenceLayerViews.some(a=>a.updating))}};b([S({constructOnly:!0})],sl.prototype,"view",void 0),b([S({readOnly:!0})],sl.prototype,"baseLayerViews",void 0),b([S({readOnly:!0})],sl.prototype,"referenceLayerViews",void 0),b([S({readOnly:!0})],sl.prototype,"suspended",null),b([S({type:Boolean,readOnly:!0})],sl.prototype,"updating",null),sl=b([J("esri.views.BasemapView")],sl);function pZ(t){return"tryRecycleWith"in t}let dZ=class{constructor(e,i,s){this.layer=e,this.view=i,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=On(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ls(this._controller.signal,()=>{const a=new oe("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(a)})}tryRecycle(e){if(!this.done||!this.layerView||!pZ(this.layerView))return null;const i=this.layer.type,s=this._controller.signal;for(let a=0;a<e.length;a++){const d=e[a];if(d.type!==i)continue;const y=this.layerView.tryRecycleWith(d,{signal:s});if(y){e.splice(a,1),this.layer=d;const g=this.layerView,_=g.view;return this.promise=Promise.race([y.then(()=>(Xt(this._controller.signal),d.emit("layerview-destroy",{view:_,layerView:g}),_.emit("layerview-destroy",{view:_,layerView:g}),d.emit("layerview-create",{view:_,layerView:g}),_.emit("layerview-create",{view:_,layerView:g}),g)),new Promise((x,I)=>ls(this._controller.signal,()=>I(ni())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:s}=this;i.emit("layerview-destroy",{view:s,layerView:e}),s.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var a,d,y;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:s}=this;this._map=s.map;try{let g,_;if(await i.load({signal:e}),"prefetchResources"in i&&await((a=i.prefetchResources)==null?void 0:a.call(i,{signal:e})),yZ(i))g=await i.createLayerView(s,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new oe("layer:view-not-supported","No layerview implementation was found");const A=await this.layerViewImporter.importLayerView(i);Xt(e),g="default"in A?new A.default({layer:i,view:s}):new A({layer:i,view:s})}const x=()=>{_=li(_),g.destroyed||g.destroy(),g.layer=null,g.parent=null,g.view=null,this.done=!0};_=ls(e,x),Xt(e);try{await g.when()}catch(A){throw x(),A}if(!((y=(d=this._map)==null?void 0:d.allLayers)==null?void 0:y.includes(i)))return x(),void this._deferred.reject(new oe("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=g,i.emit("layerview-create",{view:s,layerView:g}),s.emit("layerview-create",{layer:i,layerView:g}),this.done=!0,this._deferred.resolve(g)}catch(g){i.emit("layerview-create-error",{view:s,error:g}),s.emit("layerview-create-error",{layer:i,error:g}),this.done=!0,this._deferred.reject(new oe("layerview:create-error","layerview creation failed",{layer:i,error:g}))}}},Is=class extends je{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new sp,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var s;const i=(s=this.view.map)==null?void 0:s.allLayers;if(i)for(const a of i)this.layerViewImporter.hasLayerViewModule(a)&&this.layerViewImporter.importLayerView(a)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=On(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Ip(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var _,x,I;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const s=new Set,a=[],d=this.view.ready,y=A=>{if(A!=null){for(const C of A)if(C){s.add(C);const N=this._layerLayerViewInfoMap.get(C);N&&d?N.start():N||this._recyclingInfoMap.has(C)||a.push(C),"layers"in C&&C.layers&&y(C.layers)}}};for(const A of this._rootCollectionNames)y(this.get(A));for(const[A,C]of this._layerLayerViewInfoMap)if(!s.has(A)){this._layerLayerViewInfoMap.delete(C.layer);const N=C.tryRecycle(a);N?(this.notifyChange("updating"),this._recyclingInfoMap.set(C.layer,C),N.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),this._layerLayerViewInfoMap.set(C.layer,C),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),C.destroy(),this._reschedule()})):C.destroy()}for(const[A,C]of this._recyclingInfoMap)s.has(A)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(C.layer),C.destroy());for(const A of a)this._createLayerView(A);this._refreshCollections();const g=[(_=i==null?void 0:i.ground)==null?void 0:_.layers,(x=i==null?void 0:i.basemap)==null?void 0:x.baseLayers,(I=i==null?void 0:i.basemap)==null?void 0:I.referenceLayers,i==null?void 0:i.layers].filter(A=>!!A);s.forEach(A=>"layers"in A&&g.push(A.layers)),this.addHandles(g.map(A=>this._watchUpdatingTracking.addOnCollectionChange(()=>A,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Nh(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Me(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),ea)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),_2(this._recyclingInfoMap),_2(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(ni()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||lv(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(_2(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new oe("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,s){if(!e||!i)return void(i&&i.removeAll());let a=0;for(const d of e){const y=this._layerLayerViewInfoMap.get(d);if(!y||!y.layerView)continue;const g=y.layerView;g.layer=d,g.parent=s,i.at(a)!==g&&i.splice(a,0,g),d.layers&&this._populateLayerViewsOwners(d.layers,g.layerViews,g),a+=1}a<i.length&&i.splice(a,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new dZ(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),s=>{s&&(or(s)||s.name==="cancelled:layerview-create")||me.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:s}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};b([S()],Is.prototype,"_workPromise",void 0),b([S({readOnly:!0})],Is.prototype,"_watchUpdatingTracking",void 0),b([S({readOnly:!0})],Is.prototype,"_layersToLayerViews",null),b([S({readOnly:!0})],Is.prototype,"_rootCollectionNames",null),b([S()],Is.prototype,"layerViewImporter",void 0),b([S()],Is.prototype,"supportsGround",void 0),b([S({readOnly:!0})],Is.prototype,"updating",null),b([S({readOnly:!0})],Is.prototype,"updatingRemaining",null),b([S({constructOnly:!0})],Is.prototype,"view",void 0),Is=b([J("esri.views.LayerViewManager")],Is);const fZ=Is;function yZ(t){return"createLayerView"in t&&t.createLayerView!=null}let Jr=class extends je{constructor(e){super(e),this.factor=1.5,this.offset=Cr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};b([S({type:Number})],Jr.prototype,"factor",void 0),b([S({nonNullable:!0})],Jr.prototype,"offset",void 0),b([S()],Jr.prototype,"position",void 0),b([S({type:Number,range:{min:0}})],Jr.prototype,"size",void 0),b([S()],Jr.prototype,"maskUrl",void 0),b([S()],Jr.prototype,"maskEnabled",void 0),b([S()],Jr.prototype,"overlayUrl",void 0),b([S()],Jr.prototype,"overlayEnabled",void 0),b([S({readOnly:!0})],Jr.prototype,"version",null),b([S({type:Boolean})],Jr.prototype,"visible",void 0),Jr=b([J("esri.views.Magnifier")],Jr);const Lk=Jr;let gZ=class{constructor(){this._tasks=new Array,this._running=wm(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,s){return this._running.value=!0,new Promise((a,d)=>this._tasks.push(new Fx(a,d,e,i,s)))}unshift(e,i,s){return this._running.value=!0,new Promise((a,d)=>this._tasks.unshift(new Fx(a,d,e,i,s)))}_process(e){var s;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const a=Fs(i.signal);if(a&&!i.abortCallback)i.reject(ni());else{const d=a?(s=i.abortCallback)==null?void 0:s.call(i,ni()):i.callback(e);wa(d)?d.then(i.resolve,i.reject):i.resolve(d)}}catch(a){i.reject(a)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const e=ni();for(const i of this._tasks)if(i.abortCallback){const s=i.abortCallback(e);i.resolve(s)}else i.reject(e);this._tasks.length=0,this._running.value=!1}},Fx=class{constructor(e,i,s,a=void 0,d=void 0){this.resolve=e,this.reject=i,this.callback=s,this.signal=a,this.abortCallback=d}},W0=class extends je{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};b([S()],W0.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),b([S()],W0.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),W0=b([J("esri.views.support.DebugFlags")],W0);const mZ=new W0;var es;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(es||(es={}));var o9,ut;(function(t){t[t.YIELD=1]="YIELD"})(o9||(o9={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.NONE=0]="NONE",t[t.TEST_PRIO=1]="TEST_PRIO"}(ut||(ut={}));const oo=0,zx=new Map([[ut.RESOURCE_CONTROLLER_IMMEDIATE,oo],[ut.RESOURCE_CONTROLLER,4],[ut.SLIDE,oo],[ut.STREAM_DATA_LOADER,oo],[ut.ELEVATION_QUERY,oo],[ut.TERRAIN_SURFACE,1],[ut.SURFACE_GEOMETRY_UPDATES,1],[ut.LOD_RENDERER,2],[ut.GRAPHICS_CORE,2],[ut.I3S_CONTROLLER,2],[ut.POINT_CLOUD_LAYER,2],[ut.FEATURE_TILE_FETCHER,2],[ut.OVERLAY,4],[ut.STAGE,4],[ut.GRAPHICS_DECONFLICTOR,4],[ut.FILTER_VISIBILITY,4],[ut.SCALE_VISIBILITY,4],[ut.FRUSTUM_VISIBILITY,4],[ut.CLOUDS_GENERATOR,4],[ut.POINT_OF_INTEREST_FREQUENT,6],[ut.POINT_OF_INTEREST_INFREQUENT,30],[ut.LABELER,8],[ut.FEATURE_QUERY_ENGINE,8],[ut.FEATURE_TILE_TREE,16],[ut.FEATURE_TILE_TREE_ACTIVE,oo],[ut.ELEVATION_ALIGNMENT,12],[ut.TEXT_TEXTURE_ATLAS,12],[ut.TEXTURE_UNLOAD,12],[ut.LINE_OF_SIGHT_TOOL,16],[ut.LINE_OF_SIGHT_TOOL_INTERACTIVE,oo],[ut.SNAPPING,oo],[ut.SHADOW_ACCUMULATOR,30]]);function Vx(t){return zx.has(t)?zx.get(t):typeof t=="number"?t:1}const Gx=6.5,Ux=1,vZ=30,qx=1e3/30,Bx=100,Hx=.9;var a9,hu;(function(t){class e{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(d=>d.needsUpdate)}constructor(){this._updating=wm(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new md("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new s,this._state=es.INTERACTING,this._tasks=new zl,this._runQueue=new zl,this._load=0,this._idleStateCallbacks=new zl,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Me(()=>mZ.SCHEDULER_LOG_SLOW_TASKS,y=>this._debug=y,vt);for(const y of Object.keys(ut))this.performanceInfo.tasks.set(ut[y],new md(ut[y]));const d=this;this._test={FRAME_SAFETY_BUDGET:Gx,INTERACTING_BUDGET:qx,IDLE_BUDGET:Bx,get availableBudget(){return d._budget.budget},usedBudget:0,getBudget:()=>d._budget,setBudget:y=>d._budget=y,updateTask:y=>this._updateTask(y),getState:y=>this._getState(y),getRuntime:y=>this._getRuntime(y),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(d=>d.remove()),this._tasks.clear(),li(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(d){this._updatingChanged(),d&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(d,y){const g=Vx(d),_=new i(this,d,y,g);return this._tasks.push(_),this._updatingChanged(),this.performanceInfo.tasks.has(d)||this.performanceInfo.tasks.set(d,new md(d)),_}registerIdleStateCallbacks(d,y){const g={idleBegin:d,idleEnd:y};this._idleStateCallbacks.push(g),this.state===es.IDLE&&this._idleUpdatesStartFired&&g.idleBegin();const _=this;return{remove:()=>this._removeIdleStateCallbacks(g),set idleBegin(x){_._idleUpdatesStartFired&&(g.idleEnd(),_._state===es.IDLE&&x()),g.idleBegin=x},set idleEnd(x){g.idleEnd=x}}}get load(){return this._load}set state(d){this._state!==d&&(this._state=d,this.state!==es.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(y=>y.idleEnd())))}get state(){return this._state}updateBudget(d){this._test.usedBudget=0,++this._frameNumber;let y=Gx,g=d.frameDuration,_=Ux;switch(this.state){case es.IDLE:y=0,g=Math.max(Bx,d.frameDuration),_=vZ;break;case es.INTERACTING:g=Math.max(qx,d.frameDuration);case es.ANIMATING:}return g=g-d.elapsedFrameTime-y,this.state!==es.IDLE&&g<Ux&&!this._forceTask?(this._forceTask=!0,!1):(g=Math.max(g,_),this._budget.reset(g,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case es.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(d=>d.idleBegin())),this._runIdle();break;case es.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(d){this._idleUpdatesStartFired&&d.idleEnd(),this._idleStateCallbacks.removeUnordered(d)}removeTask(d){this._tasks.removeUnordered(d),this._runQueue.removeUnordered(d),this._updatingChanged()}_updateTask(d){this._tasks.forAll(y=>{y.name===d&&y.setPriority(d)})}_getState(d){if(this._runQueue.some(g=>g.name===d))return hu.SCHEDULED;let y=hu.IDLE;return this._tasks.forAll(g=>{g.name===d&&g.needsUpdate&&(g.schedulePriority<=1?y=hu.READY:y!==hu.READY&&(y=hu.WAITING))}),y}_getRuntime(d){let y=0;return this._tasks.forAll(g=>{g.name===d&&(y+=g.runtime)}),y}_resetRuntimes(){this._tasks.forAll(d=>d.runtime=0)}_getRunning(){const d=new Map;if(this._tasks.forAll(g=>{g.needsUpdate&&d.set(g.name,(d.get(g.name)||0)+1)}),d.size===0)return null;let y="";return d.forEach((g,_)=>{y+=g>1?` ${g}x ${_}`:` ${_}`}),y}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const d=this._tasks.reduce((y,g)=>g.needsUpdate?++y:y,0);this._load=this._load*Hx+d*(1-Hx)}_schedule(){for(this._runQueue.filterInPlace(d=>!!d.needsUpdate||(d.schedulePriority=d.basePriority,!1)),this._tasks.forAll(d=>{d.basePriority===oo&&d.needsUpdate&&!this._runQueue.includes(d)&&d.blockFrame!==this._frameNumber&&this._runQueue.unshift(d)});this._runQueue.length===0;){let d=!1,y=0;if(this._tasks.forAll(g=>{g.needsUpdate&&g.schedulePriority!==0&&g.basePriority!==oo&&g.blockFrame!==this._frameNumber&&(d=!0,y=Math.max(y,g.basePriority),g.schedulePriority===1?(g.schedulePriority=0,this._runQueue.push(g)):--g.schedulePriority)}),!d)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const d=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const y=this._budget.now(),g=this._runQueue.pop();this._budget.resetProgress();try{g.task.runTask(this._budget)===o9.YIELD&&(g.blockFrame=this._frameNumber)}catch(x){me.getLogger("esri.views.support.Scheduler").error(`Exception in task "${g.name}"`,x)}!this._budget.hasProgressed&&g.blockFrame!==this._frameNumber&&g.needsUpdate&&(g.name,ut.I3S_CONTROLLER,g.blockFrame=this._frameNumber),g.schedulePriority=g.basePriority;const _=this._budget.now()-y;if(g.runtime+=_,this._frameTaskTimes.set(g.priority,this._frameTaskTimes.get(g.priority)+_),this._debug&&_>2*this._budget.budget&&console.log("Task",g.name,"used",_,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-d)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-d)}_startFrameTaskTimes(){for(const d of Object.keys(ut))this._frameTaskTimes.set(ut[d],0)}_recordFrameTaskTimes(d){this._frameTaskTimes.forEach((y,g)=>this.performanceInfo.tasks.get(g).record(y)),this.performanceInfo.total.record(d)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(d,y,g,_){this._scheduler=d,this.name=y,this._basePriority=_,this.blockFrame=0,this.runtime=0,this._queue=new gZ,this._handles=new ba,this.schedulePriority=this._basePriority,this._task=wm(g??this._queue),this._handles.add(Jl(()=>this.task.running,x=>d.taskRunningChanged(x)))}remove(){this.processQueue(Rk),this._scheduler.removeTask(this),this.schedule=l9.schedule,this.reschedule=l9.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(d){this.name=d;const y=Vx(d);this._basePriority!==oo&&this.schedulePriority===0||(this.schedulePriority=y),this._basePriority=y}get priority(){return this.name}set priority(d){this.setPriority(d)}get needsUpdate(){return this.updating||this.task.running}schedule(d,y,g){return this._queue.push(d,y,g)}reschedule(d,y,g){return this._queue.unshift(d,y,g)}processQueue(d){this._queue.runTask(d)}}class s{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=es.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(d){return!this.done&&(d()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(d){this._enabled=d}reset(d,y){this._begin=this.now(),this._budget=d,this._state=y,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=s})(a9||(a9={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(hu||(hu={}));const Rk=(()=>{const t=new a9.Budget;return t.enabled=!1,t})();let bZ=class{remove(){}processQueue(){}schedule(e,i,s){try{if(Fs(i)){const a=ni();return s?Promise.resolve(s(a)):Promise.reject(a)}return Ub(e(Rk))}catch(a){return Promise.reject(a)}}reschedule(e,i,s){return this.schedule(e,i,s)}};const l9=new bZ;let J0=class extends je{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(ut.TEXTURE_UNLOAD))??l9}normalizeCtorArgs(){return{}}destroy(){var e,i,s;super.destroy(),(e=this._frameTask)==null||e.remove(),(i=this._textureRequests)==null||i.forEach(a=>this._releaseTextureRequest(a)),(s=this._textureRequests)==null||s.clear()}get updating(){return this._frameTask.updating}fromData(e,i,s){var y,g;const a=this.makeUid(e);let d=this._textureRequests.get(a);if(!d){const _=new wZ(s);_.texture=i(),(y=this._stage)==null||y.add(_.texture),(g=this._stage)==null||g.loadImmediate(_.texture),this._textureRequests.set(a,_),d=_}return d.referenceCount++,{uid:a,texture:d.texture,release:()=>this._release(a)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){var i;e.onRemove&&e.onRemove(),e.texture?(i=this._stage)==null||i.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return i!=null?`${e}.${i}px`:e}};b([S()],J0.prototype,"_frameTask",void 0),b([S()],J0.prototype,"updating",null),J0=b([J("esri.views.3d.support.TextureCollection")],J0);let wZ=class{constructor(e){this.onRemove=e,this.referenceCount=0}};var Wx;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(Wx||(Wx={}));const jk=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Dk={};function Fk(t){return!!Dk[t]}function _Z(t){for(const e of t)if(!Fk(e))return!1;return!0}jk.forEach(t=>{Dk[t]=!0});let SZ=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:s},a)=>{var d;return(d=this.inputManager)==null?void 0:d.installHandlers(a,[i],s)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var s;return(s=this.inputManager)==null?void 0:s.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,s,a){const d=Array.isArray(e)?e:e.split(",");if(!_Z(d))return d.some(Fk)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,g;Array.isArray(i)?g=i:(y=i,g=[]),typeof s=="function"?y=s:a=s,a=a??Gl.DEFAULT;const _=this._createUniqueGroupName(),x=new xZ(this.view,d,g,y);this._handlers.set(_,{handler:x,priority:a});for(const I of d){const A=this._handlerCounts.get(I)||0;this._handlerCounts.set(I,A+1)}return this.inputManager&&this.inputManager.installHandlers(_,[x],a),{remove:()=>this._removeHandler(_,d)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const s of i){const a=this._handlerCounts.get(s);a===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",s):a===1?this._handlerCounts.delete(s):this._handlerCounts.set(s,a-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},xZ=class extends Bi{constructor(e,i,s,a){super(!0),this._latestDragStart=void 0,this.view=e;for(const d of i)switch(d){case"click":this.registerIncoming("click",s,y=>a(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",s,y=>a(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",s,y=>a(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,y=>a(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",s,y=>a(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",s,y=>{const g=this._wrapDrag(y);g&&a(g)});break;case"key-down":this.registerIncoming("key-down",s,y=>a(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",s,y=>a(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",s,y=>a(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,y=>a(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,y=>a(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,y=>a(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,y=>a(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,y=>a(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,y=>a(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,y=>{a(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",s,y=>{a(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",s,y=>{a(this._wrapBlur(y))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:g,eventId:_}=e.data,{cancelable:x,timestamp:I}=e;return{type:"click",pointerType:i,button:s,buttons:a,x:d,y,native:g,timestamp:I,screenPoint:Cr(d,y),mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:g,eventId:_}=e.data,{cancelable:x,timestamp:I}=e;return{type:"double-click",pointerType:i,button:s,buttons:a,x:d,y,native:g,timestamp:I,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:x,stopPropagation:()=>e.stopPropagation(),async:A=>e.async(A),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:g,eventId:_}=e.data,x=g.pointerId,{cancelable:I,timestamp:A}=e;return{type:"immediate-click",pointerId:x,pointerType:i,button:s,buttons:a,x:d,y,native:g,timestamp:A,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:C=>e.async(C),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:g,eventId:_}=e.data,x=g.pointerId,{cancelable:I,timestamp:A}=e;return{type:"immediate-double-click",pointerId:x,pointerType:i,button:s,buttons:a,x:d,y,native:g,timestamp:A,mapPoint:this._getMapPoint(d,y),eventId:_,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:C=>e.async(C),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:s,buttons:a,x:d,y,native:g}=e.data,{cancelable:_,timestamp:x}=e;return{type:"hold",pointerType:i,button:s,buttons:a,x:d,y,native:g,timestamp:x,mapPoint:this._getMapPoint(d,y),cancelable:_,stopPropagation:()=>e.stopPropagation(),async:I=>e.async(I),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(Cr(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:s,y:a}=i.center,{action:d,pointerType:y,button:g}=i;if(d==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const _=i.pointer.native,x=i.buttons,{cancelable:I,timestamp:A}=e,C={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return d==="end"&&(this._latestDragStart=void 0),{type:"drag",action:d,x:s,y:a,origin:C,pointerType:y,button:g,buttons:x,radius:i.radius,angle:JM(i.angle),native:_,timestamp:A,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:N=>e.async(N),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:s,native:a}=e.data,{cancelable:d,timestamp:y}=e;return{type:"key-down",key:i,repeat:s,native:a,timestamp:y,cancelable:d,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:s}=e.data,{cancelable:a,timestamp:d}=e;return{type:"key-up",key:i,native:s,timestamp:d,cancelable:a,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:s,y:a,button:d,buttons:y,native:g,eventId:_}=e.data,x=g.pointerId,I=g.pointerType,{cancelable:A,timestamp:C}=e;return{type:i,x:s,y:a,pointerId:x,pointerType:I,button:d,buttons:y,native:g,timestamp:C,eventId:_,cancelable:A,stopPropagation:()=>e.stopPropagation(),async:N=>e.async(N),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:s,buttons:a,native:d,eventId:y}=e.data.currentEvent,{button:g}=e.data.startEvent,_=e.data.startEvent.native.pointerId,x=e.data.startEvent.native.pointerType,I=e.data.action,A={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:C,timestamp:N}=e;return{type:"pointer-drag",x:i,y:s,pointerId:_,pointerType:x,button:g,buttons:a,action:I,origin:A,native:d,timestamp:N,eventId:y,cancelable:C,stopPropagation:()=>e.stopPropagation(),async:j=>e.async(j),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:s,timestamp:a}=e,{x:d,y,deltaY:g,native:_}=s;return{type:"mouse-wheel",x:d,y,deltaY:g,native:_,timestamp:a,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:x=>e.async(x),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:s,device:a}=e.data,{cancelable:d,timestamp:y}=e,{buttons:g,axes:_}=s;return{type:"gamepad",device:a,timestamp:y,action:i,buttons:g,axes:_,cancelable:d,stopPropagation:()=>e.stopPropagation(),async:x=>e.async(x),preventDefault:()=>e.preventDefault()}}};var pf,Jx,Kx;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(pf||(pf={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(Jx||(Jx={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(Kx||(Kx={}));function $Z(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return me.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function u9(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(pf.USER)&&t.getEditableFlag(pf.MANAGER)}function io(t){return Cr(t.x,t.y)}function zk(t,e){var s;const i=(s=t instanceof HTMLElement?t:t.surface)==null?void 0:s.getBoundingClientRect();return i?Cr(e.clientX-i.left,e.clientY-i.top):Cr(0,0)}function Yx(t,e){return e instanceof Event?zk(t,e):io(e)}function Zx(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let TZ=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const s=()=>e.stopPropagation();switch(e.type){case"pointer-move":Xx(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Qx(e))break;const a=io(e),d=this._intersect(a,e.pointerType,i.forEachTool);if(d==null)break;const y=d.manipulator,g=d.tool;y==null||g==null||!y.interactive||y.grabbable&&y.grabbableForEvent(e)||!y.grabbing||y.dragging||this._ungrabManipulatorBeforeDragging(y,e,i),y!=null&&g!=null&&y.interactive&&y.grabbable&&y.grabbableForEvent(e)&&!y.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:y,tool:g,start:a,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(d.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:a}),s());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!Qx(e))break;const a=this._grabbedManipulators.get(e.pointerId),d=uh(a,({manipulator:I})=>I),y=uh(a,({tool:I})=>I);if(d==null||y==null)break;const g=io(e);g.x=zs(g.x,0,i.view.width),g.y=zs(g.y,0,i.view.height);const _=a.start,x=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(d.dragging=!0,x?d.events.emit("drag",{action:"update",start:_,screenPoint:g}):d.events.emit("drag",{action:"start",start:_,screenPoint:g,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:y,manipulator:d,start:_}));break;case"end":d.dragging=!1,x&&d.events.emit("drag",{action:"end",start:_,screenPoint:g}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}s();break}case"immediate-click":{const a=io(e),d=this._intersect(a,e.pointerType,i.forEachTool);if(MZ(e)||i.forEachTool(x=>{if((d==null||d.tool!==x||x.automaticManipulatorSelection)&&x.manipulators){let I=!1;x.manipulators.forEach(({manipulator:A})=>{A.selected&&(A.selected=!1,I=!0)}),I&&x.onManipulatorSelectionChanged&&x.onManipulatorSelectionChanged()}}),d==null)break;const{manipulator:y,tool:g}=d;if(!y.interactive)break;y.selectable&&g.automaticManipulatorSelection&&(y.selected=!y.selected,g.onManipulatorSelectionChanged&&g.onManipulatorSelectionChanged());const _=e.native.shiftKey;y.events.emit("immediate-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:_,stopPropagation:s});break}case"click":{const a=io(e),d=this._intersect(a,e.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const g=e.native.shiftKey;y.events.emit(e.type,{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:g}),s();break}case"double-click":{const a=io(e),d=this._intersect(a,e.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const g=e.native.shiftKey;y.events.emit("double-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:g,stopPropagation:s});break}case"immediate-double-click":{const a=io(e),d=this._intersect(a,e.pointerType,i.forEachTool),y=d!=null?d.manipulator:null;if(y==null||!y.interactive)break;const g=e.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:g,stopPropagation:s});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,s){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:io(i)}),this._grabbedManipulators.forEach(({manipulator:a},d)=>{a===e&&this._grabbedManipulators.delete(d)}),this._afterManipulatorUngrab(s.setActiveTool)}_handlePointerEnd(e,i){const s=uh(this._grabbedManipulators.get(e.pointerId),({manipulator:a})=>a);s!=null&&s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:io(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return lv(e,({manipulator:s})=>!(s==null||!s.interactive)&&(s.grabbing&&s.grabCursor?(i=s.grabCursor,!0):!!s.cursor&&(i=s.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,s=new Set;this._grabbedManipulators.forEach(({tool:a})=>{i.add(a)}),this._hoveredManipulators.forEach(({tool:a})=>{s.add(a)}),e(a=>{a.hasGrabbedManipulators=i.has(a),a.hasHoveredManipulators=s.has(a);const d=this._grabbedManipulators.values(),y=uR(d,({tool:g})=>g===a);a.firstGrabbedManipulator=y!=null?y.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:s},a=!0,d){const y=(g,_)=>g===e&&(d==null||d===_);this._grabbedManipulators.forEach(({tool:g,manipulator:_,pointerType:x},I)=>{y(g,_)&&(this._grabbedManipulators.delete(I),_.grabbing=!1,_.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:x}))}),this._draggedManipulators.forEach(({tool:g,manipulator:_},x)=>{y(g,_)&&(this._draggedManipulators.delete(x),_.dragging=!1,_.events.emit("drag",{action:"cancel"}))}),a&&this._hoveredManipulators.forEach(({tool:g,manipulator:_},x)=>{y(g,_)&&(this._hoveredManipulators.delete(x),_.hovering=!1)}),this._afterManipulatorUngrab(s),this._onFocusChange(i)}_intersect(e,i,s){let a=null;return s(d=>{if(d.manipulators==null||!u9(d))return!1;const y=d.manipulators.intersect(e,i);return y!=null&&(a={tool:d,manipulator:y},!0)}),a}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,s)=>{this._updateHoveredStateForPointerAtScreenPosition(Cr(i.x,i.y),s,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!Xx(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(io(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,s,a){let d=this._intersect(e,s,a);const y=uh(this._hoveredManipulators.get(i),({manipulator:g})=>g);d==null||d.manipulator.interactive||(d=null),d!=null&&y===d.manipulator||(y!=null&&(y.hovering=!1),d!=null?(d.manipulator.hovering=!0,this._hoveredManipulators.set(i,d)):this._hoveredManipulators.delete(i),this._onFocusChange(a))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function Xx(t){return t==="mouse"}function Qx(t){return t.pointerType!=="mouse"||t.button===0}function MZ(t){return!!t.native.shiftKey}const e7="attached",U2="tools",IZ=1e3;let an=class extends _m{constructor(e){super(e),this._clock=Mp,this._manipulatorState=new TZ,this.tools=new Ge,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=i=>{for(const s of this.tools.items)if(i(s))return}}initialize(){this.handles.add([this.view.on(jk,e=>{this._handleInputEvent(e)},Gl.TOOL),...$Z(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void me.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i!=null&&i.deactivate(),e!=null&&e.activate(),this._removeIncompleteTools(e);for(const s of this.tools){this._updateToolEditableFlag(s);const a=u9(s);this.activeTool!=null&&a||this._manipulatorState.clearPointers(s,this._manipulatorStateEventArgs,!a)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=li(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout(()=>this._interacting=!1,IZ)}attach(){var e;this.view.type==="3d"?(this._set("textures",new J0(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Me(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(s=>s.onElevationChange(i))),yo(()=>this._set("textures",Kt(this.textures)))],e7)):this.handles.add(Me(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(e7),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:s})=>e(s,i))})}_handleInputEvent(e){let i=!1;const s={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(s):this._forEachTool(a=>{!i&&a.visible&&a.handleInputEvent(s)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(s,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(s),this._manipulatorState.handleHoverEvent(s,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(U2),this._forEachTool(e=>{if(e instanceof je){const i=Me(()=>[e.cursor,e.visible,e.editable],()=>{u9(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,U2)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],U2)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,pf.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){return{setClock:e=>this._clock=e}}};b([S({constructOnly:!0,nonNullable:!0})],an.prototype,"view",void 0),b([S({readOnly:!0,nonNullable:!0})],an.prototype,"textures",void 0),b([S({value:null})],an.prototype,"activeTool",null),b([S({readOnly:!0,type:Ge})],an.prototype,"tools",void 0),b([S({readOnly:!0})],an.prototype,"cursor",void 0),b([S({readOnly:!0})],an.prototype,"updating",null),b([S()],an.prototype,"_interacting",void 0),b([S({readOnly:!0})],an.prototype,"interacting",null),an=b([J("esri.views.ToolViewManager")],an);let xc=class extends je{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":EZ.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return AZ[this.deviceType]}};b([S({nonNullable:!0,readOnly:!0})],xc.prototype,"nativeIndex",void 0),b([S({type:String,readOnly:!0})],xc.prototype,"deviceType",null),b([S({type:Number,readOnly:!0})],xc.prototype,"axisThreshold",null),xc=b([J("esri.views.input.gamepad.GamepadInputDevice")],xc);const EZ=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),AZ={standard:.15,spacemouse:.025,unknown:0},E4=xc;let K0=class extends je{constructor(...e){super(...e),this.devices=new Ge,this.enabledFocusMode="document"}};b([S({type:Ge.ofType(E4),readOnly:!0})],K0.prototype,"devices",void 0),b([S({type:["document","view","none"]})],K0.prototype,"enabledFocusMode",void 0),K0=b([J("esri.views.input.gamepad.GamepadSettings")],K0);const kZ=K0;let Yy=class extends je{constructor(){super(...arguments),this.gamepad=new kZ}};b([S({readOnly:!0})],Yy.prototype,"gamepad",void 0),Yy=b([J("esri.views.input.Input")],Yy);const OZ=Yy;let nl=class extends je{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};b([S({type:Boolean,nonNullable:!0})],nl.prototype,"enabled",void 0),b([S({type:E4})],nl.prototype,"device",void 0),b([S({type:["pan","zoom"],nonNullable:!0})],nl.prototype,"mode",void 0),b([S({type:["forward-down","forward-up"],nonNullable:!0})],nl.prototype,"tiltDirection",void 0),b([S({type:Number,nonNullable:!0})],nl.prototype,"velocityFactor",void 0),nl=b([J("esri.views.navigation.gamepad.GamepadSettings")],nl);const Vk=nl;let Ru=class extends je{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Vk,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};b([S({type:Boolean})],Ru.prototype,"browserTouchPanEnabled",void 0),b([S({type:Vk,nonNullable:!0})],Ru.prototype,"gamepad",void 0),b([S({type:Boolean})],Ru.prototype,"momentumEnabled",void 0),b([S({type:Boolean})],Ru.prototype,"mouseWheelZoomEnabled",void 0),Ru=b([J("esri.views.navigation.Navigation")],Ru);const Gk=Ru,Uk={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},qk=Object.values(Uk),Bk=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${qk.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),CZ=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${qk.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),PZ=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function NZ(t){return!!Bk.test(t)}function Kh(t){if(t==null)return null;const e=ur(t),i=e.path.match(Bk)||e.path.match(CZ);if(!i)return null;const[,s,a,d,y]=i,g=a.indexOf("/");return{title:Hk(g!==-1?a.slice(g+1):a),serverType:Uk[d.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:s}}}function LZ(t){const e=ur(t).path.match(PZ);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function Hk(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function u1e(t,e){const i=[];if(t){const s=Kh(t);s!=null&&s.title&&i.push(s.title)}if(e){const s=Hk(e);i.push(s)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function A4(t){if(!t)return!1;const e=".arcgis.com/",i="//services",s="//tiles",a="//features",d=(t=t.toLowerCase()).includes(e),y=t.includes(i)||t.includes(s)||t.includes(a);return d&&y}function RZ(t,e){return t&&KT(YT(t,e))}function h1e(t){let{url:e}=t;if(!e)return{url:e};e=YT(e,t.logger);const i=ur(e),s=Kh(i.path);let a;if(s!=null)s.sublayer!=null&&t.layer.layerId==null&&(a=s.sublayer),e=s.url.path;else if(t.nonStandardUrlAllowed){const d=LZ(i.path);d!=null&&(e=d.serviceUrl,a=d.sublayerId)}return{url:KT(e),layerId:a}}function c1e(t,e,i,s,a){Ph(e,s,"url",a),s.url&&t.layerId!=null&&(s.url=Th(s.url,i,t.layerId.toString()))}function p1e(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),s=e.includes("/mapserver/wmsserver"),a=e.includes("/imageserver/wmsserver"),d=e.includes("/wmsserver");return i&&(s||a||d)}var t7;function jZ(t){var s;const e=t.url?Kh(t.url):void 0;return!(((s=t.spatialReference)==null?void 0:s.vcsWkid)==null&&e!=null&&e.serverType==="ImageServer")&&Wk(t)&&t.heightModelInfo?t.heightModelInfo:DZ(t)?I4.deriveUnitFromSR(zZ,t.spatialReference):null}function Wk(t){return"heightModelInfo"in t}function Jk(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function DZ(t){return Jk(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Kk(t)}function FZ(t){return t.layers!=null||Kk(t)||Jk(t)||Wk(t)}function Kk(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(t7||(t7={}));const zZ=new I4({heightModel:"gravity-related-height"});var $m;(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})($m||($m={}));let h9,q2=null;async function VZ(t){q2||(q2=_e(()=>import("./geometryServiceUtils-c90d631f.js"),[]).then(e=>h9=e)),await q2,Xt(t)}async function Yk(t,e,i,s){if(!t)return null;const a=t.spatialReference;return Wh()||ga(a,e)?au(t,e):h9?h9.projectGeometry(t,e,i,s):(await Promise.race([VZ(s),Zl(s)]),Yk(t,e,i,s))}let qt=class extends je{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=_h(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var s,a,d,y;const e=(s=this.map)==null?void 0:s.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(a=e==null?void 0:e.basemap)==null?void 0:a.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(d=e==null?void 0:e.ground)==null?void 0:d.layers},{parent:e==null?void 0:e.basemap,layers:(y=e==null?void 0:e.basemap)==null?void 0:y.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let s=null;for(const d of e){const y=this._getSupportedSpatialReferences(d);if(y.length>0){const g=this._narrowDownSpatialReferenceCandidates(s,y);g!=null&&(s=g)}if(s!=null&&s.length===1)break}if(i&&(s==null||s.length!==1))return{updating:!0};const a=this._pickSpatialReferenceCandidate(s);return{spatialReference:a!=null?a.spatialReference:null,viewingMode:a!=null?a.viewingMode:null,updating:!1}}get _tileInfoTask(){var s,a,d,y,g,_,x;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(a=(s=this.map)==null?void 0:s.call(this))==null?void 0:a.basemap,layers:(g=(y=(d=this.map)==null?void 0:d.call(this))==null?void 0:y.basemap)==null?void 0:g.baseLayers},{layers:(x=(_=this.map)==null?void 0:_.call(this))==null?void 0:x.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const I=e[0].tileInfo;return{tileInfo:I&&I.spatialReference.equals(this.spatialReference)?I:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var s,a,d;if(!this.required.heightModelInfo||this.suspended&&((s=this._get("_heightModelInfoTask"))!=null&&s.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const y of e)if(FZ(y)){const g=jZ(y);if(g)return{heightModelInfo:g,vcsWkid:(a=y.spatialReference)==null?void 0:a.vcsWkid,latestVcsWkid:(d=y.spatialReference)==null?void 0:d.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,s=[];for(const a of e.layers){const d="fullExtents"in a&&a.fullExtents||(a.fullExtent!=null?[a.fullExtent]:[]),y=this.requiresExtentInSpatialReference?null:d[0],g=d.find(_=>_.spatialReference.equals(this.spatialReference))??y;if(g)return{candidates:[{extent:g,layer:a}],updating:!1};if(this._getSupportedSpatialReferences(a).length>0)for(const _ of d)s.push({extent:_,layer:a})}return{candidates:s,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const s=this._pickExtentCandidate(e),a=this.spatialReference;return s.extent.equals(this._projectExtentTask.input)&&a.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=_h(this._projectExtentTask.task)),this._projectExtentTask={input:s.extent.clone(),output:null,spatialReference:a.clone(),task:n5(async d=>{try{const y=await Yk(s.extent,a,"portalItem"in s.layer?s.layer.portalItem:void 0,d);this._projectExtentTask={...this._projectExtentTask,task:null,output:y}}catch{if(Fs(d))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const s=[],a=(d,y)=>d!=null?y!=null?d===y&&d:d:y;for(const d of e)for(const y of i){if(!d.spatialReference.equals(y.spatialReference))continue;const g=a(d.viewingMode,y.viewingMode);if(g!==!1){s.push({spatialReference:d.spatialReference,viewingMode:g});break}}return s.length>0?s:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i!=null?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:s})=>s.equals(i))&&(e=e.filter(({spatialReference:s})=>s.equals(i))),e.length>1&&e.some(({viewingMode:s})=>s!==$m.Local)&&(e=e.filter(({viewingMode:s})=>s!==$m.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const s=[];for(const a of i){const d=this.getSpatialReferenceSupport({spatialReference:a,layer:e});if(d!=null){const y=d.constraints!=null?d.constraints:[{spatialReference:a,viewingMode:null}];for(const{spatialReference:g,viewingMode:_}of y)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!g.equals(this.userSpatialReference)||s.push({spatialReference:g,viewingMode:_})}}return s}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:s})=>i.equals(s.spatialReference))||e[0]}_collectLayers(e){var s;if(this._loadMaybe((s=this.map)==null?void 0:s.call(this))!=="loaded")return{layers:[],updating:!0};const i=new GZ;for(const a of e)if(this._collectCollection(a,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const s of e.layers){switch(this._loadMaybe(s)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(s),"layers"in s&&this._collectCollection({layers:s.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{or(i)||console.log(i)}),"loading"):e.loadStatus:"loaded"}};b([S()],qt.prototype,"required",void 0),b([S({constructOnly:!0})],qt.prototype,"map",void 0),b([S({constructOnly:!0})],qt.prototype,"getSpatialReferenceSupport",void 0),b([S()],qt.prototype,"defaultSpatialReference",void 0),b([S()],qt.prototype,"userSpatialReference",void 0),b([S()],qt.prototype,"sourcePreloadCount",void 0),b([S()],qt.prototype,"priorityCollection",void 0),b([S()],qt.prototype,"requiresExtentInSpatialReference",void 0),b([S()],qt.prototype,"suspended",void 0),b([S({readOnly:!0})],qt.prototype,"ready",null),b([S({readOnly:!0})],qt.prototype,"heightModelInfoReady",null),b([S({readOnly:!0})],qt.prototype,"spatialReference",null),b([S({readOnly:!0})],qt.prototype,"extent",null),b([S({readOnly:!0})],qt.prototype,"heightModelInfo",null),b([S({readOnly:!0})],qt.prototype,"vcsWkid",null),b([S({readOnly:!0})],qt.prototype,"latestVcsWkid",null),b([S({readOnly:!0})],qt.prototype,"viewingMode",null),b([S({readOnly:!0})],qt.prototype,"tileInfo",null),b([S({readOnly:!0})],qt.prototype,"mapCollections",null),b([S({readOnly:!0})],qt.prototype,"_allLayers",null),b([S({readOnly:!0})],qt.prototype,"_spatialReferenceTask",null),b([S({readOnly:!0})],qt.prototype,"_tileInfoTask",null),b([S({readOnly:!0})],qt.prototype,"_heightModelInfoTask",null),b([S({readOnly:!0})],qt.prototype,"_extentCandidatesTask",null),b([S()],qt.prototype,"_extentTask",null),b([S()],qt.prototype,"_projectExtentTask",void 0),qt=b([J("esri.views.support.DefaultsFromMap")],qt);let GZ=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var Y0;let ze=Y0=class extends lu(_a.EventedMixin(t5(je))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new gp({getCollections:()=>{var e,i,s;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:qZ}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Ld,this.analyses=new xm,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ge,this.magnifier=new Lk,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new cf,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new OZ,this.navigation=new Gk,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new SZ(this),this.persistableViewModels=new Ge,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(Me(()=>this.preconditionsReady,e=>{var i,s;e?(this._currentSpatialReference=this.spatialReference,Y0.views.add(this)):(this._currentSpatialReference=null,Y0.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown()):e&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Fp))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,af(()=>this.ready)))),this.basemapView=new sl({view:this}),this.layerViewManager=new fZ({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new an({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Me(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),Me(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),Me(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([Me(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var s;const i=((s=this.map)==null?void 0:s.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(t!=null)return;const a=yo(()=>t=_h(t));t=n5(async d=>{try{await Z_(this.spatialReferenceWarningDelay,null,d)}catch{return}finally{t=null}me.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(a,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var t,e;this.destroyed||(Y0.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Kt(this.graphics),this.analyses=Kt(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Kt(this.analysisViewManager),this.toolViewManager=Kt(this.toolViewManager),this.layerViewManager=Kt(this.layerViewManager),this.basemapView=Kt(this.basemapView),(t=this.groundView)==null||t.destroy(),(e=this.layerViews)==null||e.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=Kt(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return me.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new qt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||da.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(me.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),da.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!Ri(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return t??(this._cursor||"default")}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){var e;return((e=this.layerViewManager)==null?void 0:e.whenLayerView(t))??Promise.reject()}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new oe("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&me.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Jl(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};ze.views=new Ge,b([S()],ze.prototype,"_userSpatialReference",void 0),b([S()],ze.prototype,"activeTool",null),b([S({readOnly:!0})],ze.prototype,"allLayerViews",void 0),b([S()],ze.prototype,"groundView",void 0),b([S()],ze.prototype,"animation",null),b([S()],ze.prototype,"basemapView",void 0),b([S()],ze.prototype,"center",null),b([S({readOnly:!0})],ze.prototype,"_defaultsFromMapSettings",null),b([S()],ze.prototype,"defaultsFromMap",null),b([S()],ze.prototype,"fatalError",void 0),b([S({type:bt})],ze.prototype,"extent",null),b([S(Rx(Ld,"graphics"))],ze.prototype,"graphics",void 0),b([S(Rx(xm,"analyses"))],ze.prototype,"analyses",void 0),b([S({readOnly:!0,type:I4})],ze.prototype,"heightModelInfo",null),b([S({readOnly:!0})],ze.prototype,"interacting",null),b([S({readOnly:!0})],ze.prototype,"navigating",null),b([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ze.prototype,"preconditionsReady",null),b([S({readOnly:!0})],ze.prototype,"typeSpecificPreconditionsReady",void 0),b([S({type:Ge,readOnly:!0})],ze.prototype,"layerViews",void 0),b([S()],ze.prototype,"resolution",null),b([S({type:Lk})],ze.prototype,"magnifier",void 0),b([S({value:null,type:bI})],ze.prototype,"map",null),b([S()],ze.prototype,"padding",void 0),b([S({readOnly:!0})],ze.prototype,"ready",void 0),b([S({type:Xe})],ze.prototype,"spatialReference",null),b([S()],ze.prototype,"spatialReferenceWarningDelay",void 0),b([S()],ze.prototype,"stationary",null),b([S({readOnly:!0})],ze.prototype,"supportsGround",void 0),b([S({type:xo})],ze.prototype,"timeExtent",void 0),b([S({type:cf,nonNullable:!0})],ze.prototype,"timeReference",void 0),b([S()],ze.prototype,"tools",null),b([S()],ze.prototype,"toolViewManager",void 0),b([S({readOnly:!0})],ze.prototype,"type",void 0),b([S({type:Number})],ze.prototype,"scale",void 0),b([S({readOnly:!0})],ze.prototype,"updating",void 0),b([S({readOnly:!0})],ze.prototype,"initialExtentRequired",void 0),b([S({readOnly:!0})],ze.prototype,"initialExtent",null),b([S()],ze.prototype,"cursor",null),b([S({readOnly:!0})],ze.prototype,"input",void 0),b([S({type:Gk,nonNullable:!0})],ze.prototype,"navigation",void 0),b([S()],ze.prototype,"layerViewManager",void 0),b([S()],ze.prototype,"analysisViewManager",void 0),b([S()],ze.prototype,"width",void 0),b([S()],ze.prototype,"height",void 0),b([S({readOnly:!0})],ze.prototype,"resizing",void 0),b([S({value:null,readOnly:!0})],ze.prototype,"size",null),b([S({readOnly:!0})],ze.prototype,"suspended",void 0),b([S({readOnly:!0})],ze.prototype,"viewEvents",void 0),b([S({readOnly:!0})],ze.prototype,"persistableViewModels",void 0),b([S()],ze.prototype,"_isValid",void 0),b([S()],ze.prototype,"_readyCycleForced",void 0),b([S()],ze.prototype,"_currentSpatialReference",void 0),ze=Y0=b([J("esri.views.View")],ze);const UZ=ze;function qZ(t){return t.layerViews}let ol=class extends Ug{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=On(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._resolver)==null||e.reject(new oe("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._resolver)==null||e.resolve())}update(e,i){i||(i=wa(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};b([S({readOnly:!0})],ol.prototype,"done",null),b([S({readOnly:!0,type:String})],ol.prototype,"state",void 0),b([S()],ol.prototype,"target",void 0),ol=b([J("esri.views.ViewAnimation")],ol),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(ol||(ol={}));const c9=ol;function sh(t,e,i,s){const a=3*t,d=3*(i-t)-a,y=1-a-d,g=3*e,_=3*(s-e)-g,x=1-g-_;function I(j){return((y*j+d)*j+a)*j}function A(j){return((x*j+_)*j+g)*j}function C(j){return(3*y*j+2*d)*j+a}function N(j,D){let V,W,K,Y,ee,re;for(K=j,re=0;re<8;re++){if(Y=I(K)-j,Math.abs(Y)<D)return K;if(ee=C(K),Math.abs(ee)<1e-6)break;K-=Y/ee}if(V=0,W=1,K=j,K<V)return V;if(K>W)return W;for(;V<W;){if(Y=I(K),Math.abs(Y-j)<D)return K;j>Y?V=K:W=K,K=.5*(W-V)+V}return K}return function(j,D=1e-6){return A(N(j,D))}}const BZ=/^cubic-bezier\((.*)\)/,Os={};function HZ(t){let e=Os[t]||null;if(!e){const i=BZ.exec(t);if(i){const s=i[1].split(",").map(a=>parseFloat(a.trim()));s.length!==4||s.some(a=>isNaN(a))||(e=sh.apply(sh,s))}}return e}Os.ease=sh(.25,.1,.25,1),Os.linear=sh(0,0,1,1),Os.easeIn=Os["ease-in"]=sh(.42,0,1,1),Os.easeOut=Os["ease-out"]=sh(0,0,.58,1),Os.easeInOut=Os["ease-in-out"]=sh(.42,0,.58,1);function WZ(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function JZ(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function KZ(t,e,i,s,a,d,y){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t[4]=d,t[5]=y,t}function k4(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],g=e[5];let _=i*d-s*a;return _?(_=1/_,t[0]=d*_,t[1]=-s*_,t[2]=-a*_,t[3]=i*_,t[4]=(a*g-d*y)*_,t[5]=(s*y-i*g)*_,t):null}function YZ(t){return t[0]*t[3]-t[1]*t[2]}function Zk(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=e[4],_=e[5],x=i[0],I=i[1],A=i[2],C=i[3],N=i[4],j=i[5];return t[0]=s*x+d*I,t[1]=a*x+y*I,t[2]=s*A+d*C,t[3]=a*A+y*C,t[4]=s*N+d*j+g,t[5]=a*N+y*j+_,t}function Rv(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=e[4],_=e[5],x=Math.sin(i),I=Math.cos(i);return t[0]=s*I+d*x,t[1]=a*I+y*x,t[2]=s*-x+d*I,t[3]=a*-x+y*I,t[4]=g,t[5]=_,t}function O4(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=e[4],_=e[5],x=i[0],I=i[1];return t[0]=s*x,t[1]=a*x,t[2]=d*I,t[3]=y*I,t[4]=g,t[5]=_,t}function df(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=e[4],_=e[5],x=i[0],I=i[1];return t[0]=s,t[1]=a,t[2]=d,t[3]=y,t[4]=s*x+d*I+g,t[5]=a*x+y*I+_,t}function Xk(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t}function Qk(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function C4(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ZZ(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function XZ(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function QZ(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function eO(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function eX(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function tX(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t}function iX(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function rX(t,e){const i=t[0],s=t[1],a=t[2],d=t[3],y=t[4],g=t[5],_=e[0],x=e[1],I=e[2],A=e[3],C=e[4],N=e[5],j=Vs();return Math.abs(i-_)<=j*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-x)<=j*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(a-I)<=j*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(d-A)<=j*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(y-C)<=j*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(g-N)<=j*Math.max(1,Math.abs(g),Math.abs(N))}const sX=Zk,nX=eO;Object.freeze(Object.defineProperty({__proto__:null,add:QZ,copy:WZ,determinant:YZ,equals:rX,exactEquals:iX,frob:XZ,fromRotation:Xk,fromScaling:Qk,fromTranslation:C4,identity:JZ,invert:k4,mul:sX,multiply:Zk,multiplyScalar:eX,multiplyScalarAndAdd:tX,rotate:Rv,scale:O4,set:KZ,str:ZZ,sub:nX,subtract:eO,translate:df},Symbol.toStringTag,{value:"Module"}));function Ul(){return[1,0,0,1,0,0]}function oX(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function aX(t,e,i,s,a,d){return[t,e,i,s,a,d]}function lX(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:oX,create:Ul,createView:lX,fromValues:aX},Symbol.toStringTag,{value:"Module"}));function ff(t,e){return t[0]=e[0],t[1]=e[1],t}function Yi(t,e,i){return t[0]=e,t[1]=i,t}function tO(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function yf(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function iO(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function rO(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function uX(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function hX(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function cX(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function pX(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function dX(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Uf(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function fX(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t}function qf(t,e){const i=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(i*i+s*s)}function Tm(t,e){const i=e[0]-t[0],s=e[1]-t[1];return i*i+s*s}function Mm(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function sO(t){const e=t[0],i=t[1];return e*e+i*i}function nO(t,e){return t[0]=-e[0],t[1]=-e[1],t}function yX(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function p9(t,e){const i=e[0],s=e[1];let a=i*i+s*s;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t}function oO(t,e){return t[0]*e[0]+t[1]*e[1]}function aO(t,e,i){const s=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=s,t}function gX(t,e,i,s){const a=e[0],d=e[1];return t[0]=a+s*(i[0]-a),t[1]=d+s*(i[1]-d),t}function mX(t,e){e=e||1;const i=2*mv()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function vX(t,e,i){const s=e[0],a=e[1];return t[0]=i[0]*s+i[2]*a,t[1]=i[1]*s+i[3]*a,t}function lo(t,e,i){const s=e[0],a=e[1];return t[0]=i[0]*s+i[2]*a+i[4],t[1]=i[1]*s+i[3]*a+i[5],t}function bX(t,e,i){const s=e[0],a=e[1];return t[0]=i[0]*s+i[3]*a+i[6],t[1]=i[1]*s+i[4]*a+i[7],t}function wX(t,e,i){const s=e[0],a=e[1];return t[0]=i[0]*s+i[4]*a+i[12],t[1]=i[1]*s+i[5]*a+i[13],t}function _X(t,e,i,s){const a=e[0]-i[0],d=e[1]-i[1],y=Math.sin(s),g=Math.cos(s);return t[0]=a*g-d*y+i[0],t[1]=a*y+d*g+i[1],t}function SX(t,e){const i=t[0],s=t[1],a=e[0],d=e[1];let y=i*i+s*s;y>0&&(y=1/Math.sqrt(y));let g=a*a+d*d;g>0&&(g=1/Math.sqrt(g));const _=(i*a+s*d)*y*g;return _>1?0:_<-1?Math.PI:Math.acos(_)}function xX(t){return"vec2("+t[0]+", "+t[1]+")"}function $X(t,e){return t[0]===e[0]&&t[1]===e[1]}function TX(t,e){const i=t[0],s=t[1],a=e[0],d=e[1],y=Vs();return Math.abs(i-a)<=y*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-d)<=y*Math.max(1,Math.abs(s),Math.abs(d))}function MX(t,e,i,s,a){let d=e[0]-i[0],y=e[1]-i[1];const g=(s[0]*d+s[1]*y)*(a-1);return d=s[0]*g,y=s[1]*g,t[0]=e[0]+d,t[1]=e[1]+y,t}const IX=Mm,P4=yf,EX=iO,AX=rO,kX=qf,OX=Tm,CX=sO;Object.freeze(Object.defineProperty({__proto__:null,add:tO,angle:SX,ceil:uX,copy:ff,cross:aO,dist:kX,distance:qf,div:AX,divide:rO,dot:oO,equals:TX,exactEquals:$X,floor:hX,inverse:yX,len:IX,length:Mm,lerp:gX,max:pX,min:cX,mul:EX,multiply:iO,negate:nO,normalize:p9,projectAndScale:MX,random:mX,rotate:_X,round:dX,scale:Uf,scaleAndAdd:fX,set:Yi,sqrDist:OX,sqrLen:CX,squaredDistance:Tm,squaredLength:sO,str:xX,sub:P4,subtract:yf,transformMat2:vX,transformMat2d:lo,transformMat3:bX,transformMat4:wX},Symbol.toStringTag,{value:"Module"}));function $i(){return[0,0]}function PX(t){return[t[0],t[1]]}function Bf(t,e){return[t,e]}function NX(t){const e=$i(),i=Math.min(2,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function LX(t,e){return new Float64Array(t,e,2)}function lO(){return $i()}function uO(){return Bf(1,1)}function hO(){return Bf(1,0)}function cO(){return Bf(0,1)}const RX=lO(),jX=uO(),DX=hO(),FX=cO();Object.freeze(Object.defineProperty({__proto__:null,ONES:jX,UNIT_X:DX,UNIT_Y:FX,ZEROS:RX,clone:PX,create:$i,createView:LX,fromArray:NX,fromValues:Bf,ones:uO,unitX:hO,unitY:cO,zeros:lO},Symbol.toStringTag,{value:"Module"}));const pO=96,dO=39.37,zX=180/Math.PI;function fO(t){return t.wkid?t:t.spatialReference||Xe.WGS84}function N4(t,e){return e.type?Yi(t,e.x,e.y):ff(t,e)}function yO(t){return _o(t)}function np(t,e){const i=Math.max(1,e[0]),s=Math.max(1,e[1]);return Math.max(t.width/i,t.height/s)*KX(t.spatialReference)}async function Z0(t,e,i,s){var g,_;let a,d;if(!t||Array.isArray(t)&&!t.length)return null;if(Ge.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const x=t.every(C=>"attributes"in C),I=t.some(C=>!C.geometry);let A=t;if(x&&I&&e&&e.allLayerViews){const C=new Map;for(const V of t){const W=V.layer,K=C.get(W)||[],Y=V.attributes[W.objectIdField];Y!=null&&K.push(Y),C.set(W,K)}const N=[];C.forEach((V,W)=>{const K=e.allLayerViews.find(Y=>Y.layer.id===W.id);if(K&&"queryFeatures"in K){const Y=W.createQuery();Y.objectIds=V,Y.returnGeometry=!0,N.push(K.queryFeatures(Y))}});const j=await Promise.all(N),D=[];for(const V of j)if(V&&V.features&&V.features.length)for(const W of V.features)W.geometry!=null&&D.push(W.geometry);A=D}for(const C of A)s=await Z0(C,e,i,s);return s}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")a=new Ue(t);else if(t instanceof tu)a=t;else if("geometry"in t){if(t.geometry)a=t.geometry;else if(t.layer){const x=t.layer,I=e.allLayerViews.find(A=>A.layer.id===x.id);if(I&&"queryFeatures"in I){const A=x.createQuery();A.objectIds=[t.attributes[x.objectIdField]],A.returnGeometry=!0;const C=await I.queryFeatures(A);a=(_=(g=C==null?void 0:C.features)==null?void 0:g[0])==null?void 0:_.geometry}}}if(a==null||(d=a.type==="point"?new bt({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference}):a.extent,!d))return null;Wh()||ga(d.spatialReference,i)||await Zl();const y=au(d,i);return y?s=s?s.union(y):y:null}function VX(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const s of t){const a=s.layer;a&&a.minScale&&a.maxScale&&(e=a.minScale<e?a.minScale:e,i=a.maxScale>i?a.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function B2(t,e){return Ri(fO(t),e)?t:au(t,e)}async function GX(t,e){if(!t||!e)return new po({targetGeometry:new Ue,scale:0,rotation:0});let i=e.spatialReference;const{constraints:s,padding:a,viewpoint:d,size:y}=e,g=[a?y[0]-a.left-a.right:y[0],a?y[1]-a.top-a.bottom:y[1]];let _=null;t instanceof po?_=t:t.viewpoint?_=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(_=t.target);let x=null;_&&_.targetGeometry?x=_.targetGeometry:t instanceof bt?x=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(x=await Z0(t.center,e,i)||await Z0(t.extent,e,i)||await Z0(t.target,e,i)||await Z0(t,e,i)),!x&&d&&d.targetGeometry?x=d.targetGeometry:!x&&e.extent&&(x=e.extent),i||(i=fO(e.spatialReference||e.extent||x)),Wh()||Ri(x.spatialReference,i)||ga(x,i)||await Zl();const I=B2(x.center??x,i);let A=0;if(_&&_.targetGeometry!=null&&_.targetGeometry.type==="point")A=_.scale;else if("scale"in t&&t.scale)A=t.scale;else if("zoom"in t&&t.zoom!==-1&&s&&s.effectiveLODs)A=s.zoomToScale(t.zoom);else if(Array.isArray(x)||x.type==="point"||x.type==="extent"&&x.width===0&&x.height===0){const D=B2(e.extent,i);A=D!=null?np(D,g):e.extent?np(e.extent,g):d.scale}else A=np(B2(x.extent,i),g);const C=VX(t);C&&(C.min&&C.min>A?A=C.min:C.max&&C.max<A&&(A=C.max));let N=0;_?N=_.rotation:t.hasOwnProperty("rotation")?N=t.rotation:d&&(N=d.rotation);let j=new po({targetGeometry:I,scale:A,rotation:N});return s&&(j=s.fit(j),s.constrainByGeometry(j),s.rotationEnabled||(j.rotation=N)),j}function Fn(t,e){const i=t.targetGeometry,s=e.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function UX(t,e,i){return i?Yi(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Uf(t,e,.5)}const qX=function(){const t=$i();return function(e,i,s){const a=i.targetGeometry;N4(t,a);const d=.5*Vp(i);return e.xmin=t[0]-d*s[0],e.ymin=t[1]-d*s[1],e.xmax=t[0]+d*s[0],e.ymax=t[1]+d*s[1],e.spatialReference=a.spatialReference,e}}();function BX(t,e,i,s,a){var d;return d9(t,e,i.center),t.scale=np(i,s),(d=a==null?void 0:a.constraints)==null||d.constrain(t),t}function HX(t,e,i,s){return j4(t,e,i,s),k4(t,t)}const gO=function(){const t=$i();return function(e,i,s){return P4(e,YX(e,i),UX(t,i,s))}}(),WX=function(){const t=Ul(),e=$i();return function(i,s,a,d){const y=Vp(s),g=L4(s);return Yi(e,y,y),Qk(t,e),Rv(t,t,g),df(t,t,gO(e,a,d)),df(t,t,[0,d.top-d.bottom]),Yi(i,t[4],t[5])}}();function Vp(t){return t.scale*JX(t.targetGeometry)}function JX(t){return t!=null&&Xi(t.spatialReference)?1/(yO(t.spatialReference)*dO*pO):1}function L4(t){return A5(t.rotation)||0}function KX(t){return Xi(t)?yO(t)*dO*pO:1}function YX(t,e){return Uf(t,e,.5)}const R4=function(){const t=$i(),e=$i(),i=$i();return function(s,a,d,y,g,_){return nO(t,a),Uf(e,d,.5*_),Yi(i,1/y*_,-1/y*_),C4(s,e),g&&Rv(s,s,g),O4(s,s,i),df(s,s,t),s}}(),j4=function(){const t=$i();return function(e,i,s,a){const d=Vp(i),y=L4(i);return N4(t,i.targetGeometry),R4(e,t,s,d,y,a)}}(),ZX=function(){const t=$i();return function(e,i,s,a){const d=Vp(i);return N4(t,i.targetGeometry),R4(e,t,s,d,0,a)}}();function XX(t){const e=In(t);return e?e.valid[1]-e.valid[0]:0}function QX(t,e){return Math.round(XX(t)/e)}const eQ=function(){const t=$i(),e=$i(),i=[0,0,0];return function(s,a,d){yf(t,s,a),p9(t,t),yf(e,s,d),p9(e,e),aO(i,t,e);let y=Math.acos(oO(t,e)/(Mm(t)*Mm(e)))*zX;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),tQ=function(){const t=$i();return function(e,i,s,a){const d=e.targetGeometry;return Fn(e,i),WX(t,i,s,a),d.x+=t[0],d.y+=t[1],e}}(),d9=function(t,e,i){Fn(t,e);const s=t.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,t},iQ=function(){const t=$i();return function(e,i,s,a,d){d||(d="center"),P4(t,s,a),Uf(t,t,.5);const y=t[0],g=t[1];switch(d){case"center":Yi(t,0,0);break;case"left":Yi(t,-y,0);break;case"top":Yi(t,0,g);break;case"right":Yi(t,y,0);break;case"bottom":Yi(t,0,-g);break;case"top-left":Yi(t,-y,g);break;case"bottom-left":Yi(t,-y,-g);break;case"top-right":Yi(t,y,g);break;case"bottom-right":Yi(t,y,-g)}return jv(e,i,t),e}}();function g1e(t,e,i){return Fn(t,e),t.rotation+=i,t}function rQ(t,e,i){return Fn(t,e),t.rotation=i,t}const sQ=function(){const t=$i();return function(e,i,s,a,d){return Fn(e,i),isNaN(s)||s===0||(vO(t,a,i,d),e.scale=i.scale*s,bO(t,t,e,d),jv(e,e,Yi(t,t[0]-a[0],a[1]-t[1]))),e}}();function i7(t,e,i){return Fn(t,e),t.scale=i,t}const mO=function(){const t=$i();return function(e,i,s,a,d,y){return Fn(e,i),isNaN(s)||s===0||(vO(t,d,i,y),e.scale=i.scale*s,e.rotation+=a,bO(t,t,e,y),jv(e,e,Yi(t,t[0]-d[0],d[1]-t[1]))),e}}(),m1e=function(){const t=$i(),e=$i();return function(i,s,a,d,y,g,_){return gO(e,g,_),tO(t,y,e),d?mO(i,s,a,d,t,g):sQ(i,s,a,t,g)}}(),vO=function(){const t=Ul();return function(e,i,s,a){return lo(e,i,HX(t,s,a,1))}}(),bO=function(){const t=Ul();return function(e,i,s,a){return lo(e,i,j4(t,s,a,1))}}(),jv=function(){const t=$i(),e=Ul();return function(i,s,a){Fn(i,s);const d=Vp(s),y=i.targetGeometry;return Xk(e,L4(s)),O4(e,e,Bf(d,d)),lo(t,a,e),y.x+=t[0],y.y+=t[1],i}}();let nQ=class{constructor(e,i,s,a){const d=e.targetGeometry,y=i.targetGeometry;a?typeof a=="string"&&(a=HZ(a)||Os.ease):a=Os.ease,this.easing=a,this.duration=s,this.sCenterX=d.x,this.sCenterY=d.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const s=this.easing(i);let a,d,y,g;i>=1?(a=this.tCenterX,d=this.tCenterY,y=this.tRotation,g=this.tScale):(a=this.sCenterX+s*this.dCenterX,d=this.sCenterY+s*this.dCenterY,y=this.sRotation+s*this.dRotation,g=this.sScale+s*this.dScale),e.targetGeometry.x=a,e.targetGeometry.y=d,e.scale=g,e.rotation=y}},Uo=class extends je{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Os.ease,this.view=null,this.viewpoint=new po({targetGeometry:new Ue,scale:0,rotation:0}),this._updateTask=dp({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=li(this._updateTask)}animate(e,i,s){this.stop();const a=this.viewpoint;Fn(a,i),this.transition=new nQ(this.viewpoint,e.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const d=()=>{var y,g;this.animation===e&&this._updateTask&&(e.state==="finished"&&((y=this.transition)==null||y.applyRatio(this.viewpoint,1),(g=this.view)!=null&&g.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(d,d),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const s=new c9({target:e.clone()}),a=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var s,a;const i=this.animation;if(i&&i.state!==c9.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const d=this.transition,y=(performance.now()-this._startTime)/d.duration,g=y>=1;d.applyRatio(this.viewpoint,y),g&&((s=this.animation)==null||s.finish())}(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};b([S()],Uo.prototype,"animation",void 0),b([S()],Uo.prototype,"duration",void 0),b([S()],Uo.prototype,"transition",void 0),b([S()],Uo.prototype,"easing",void 0),b([S()],Uo.prototype,"view",void 0),b([S()],Uo.prototype,"viewpoint",void 0),Uo=b([J("esri.views.2d.AnimationManager")],Uo);const oQ=Uo;let aQ=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var y,g;if(this._updateRequested=!1,(y=this.view)==null?void 0:y.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:a,state:{id:d}}=this.view;i.forEach(this._updateLayerView,this),a!=null&&(a.lastUpdateId!==d&&(a.viewChange(),a.lastUpdateId=d),a.updateRequested&&a.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==d&&(s.viewChange(),s.lastUpdateId=d),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((g=this._frameTaskHandle)==null||g.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Me(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=dp(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){var a;if(!e.attached)return void this.requestUpdate();const i=this.view.state,s=e.lastUpdateId;s!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),s!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&((a=e.layerViews)==null||a.forEach(this._updateLayerView,this))}};function yi(){return Promise.all([_e(()=>import("./webglDeps-f28c3528.js"),["assets/webglDeps-f28c3528.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/ProgramTemplate-c203c82b.js","assets/programUtils-950386fd.js","assets/NestedMap-1b5db22e.js"]),_e(()=>import("./mapViewDeps-03763eee.js"),["assets/mapViewDeps-03763eee.js","assets/CIMResourceManager-d4b72a1c.js","assets/fontUtils-c4906c91.js","assets/Rasterizer-d868c919.js","assets/cimAnalyzer-249b67c5.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-fb8f30fc.js","assets/alignmentUtils-ae955d28.js","assets/definitions-c49e2c1e.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/rasterizingUtils-fa89fcf9.js","assets/imageutils-6c3ff994.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/BufferPool-ed7e530d.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/color-82eb9d53.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/enums-fb086c25.js","assets/programUtils-950386fd.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-9b763256.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-9a9aceb3.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/RenderingContext-a5db5210.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-62e59b66.js","assets/normalizeUtilsSync-0205a13e.js","assets/GraphicContainer-3acb95de.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-fb2a1d63.js"])])}const c0=()=>yi().then(()=>_e(()=>import("./TileLayerView2D-7074db0f.js"),["assets/TileLayerView2D-7074db0f.js","assets/Rasterizer-d868c919.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-fb8f30fc.js","assets/alignmentUtils-ae955d28.js","assets/definitions-c49e2c1e.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/rasterizingUtils-fa89fcf9.js","assets/EffectView-f21b790b.js","assets/Container-7664f554.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/BufferPool-ed7e530d.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/color-82eb9d53.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-9b763256.js","assets/imageutils-6c3ff994.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-9a9aceb3.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-62e59b66.js","assets/normalizeUtilsSync-0205a13e.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-b4c7eb94.js","assets/BitmapTileContainer-0e2ab2d1.js","assets/Bitmap-370c07bd.js","assets/TileContainer-23df8a83.js","assets/LayerView-8c849c97.js","assets/HighlightGraphicContainer-3aeef62a.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/RefreshableLayerView-23ff684b.js","assets/drapedUtils-ec0b423f.js","assets/popupUtils-88e1b549.js"])),rc=()=>yi().then(()=>_e(()=>import("./FeatureLayerView2D-851a860b.js"),["assets/FeatureLayerView2D-851a860b.js","assets/EffectView-f21b790b.js","assets/FeatureEffect-fa9becb0.js","assets/definitions-c49e2c1e.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/BitmapTileContainer-0e2ab2d1.js","assets/Bitmap-370c07bd.js","assets/TileContainer-23df8a83.js","assets/CircularArray-ef508845.js","assets/BufferPool-ed7e530d.js","assets/FeatureContainer-4622de9f.js","assets/popupUtils-88e1b549.js","assets/RefreshableLayerView-23ff684b.js"])),r7={"base-dynamic":()=>yi().then(()=>_e(()=>import("./BaseDynamicLayerView2D-12ea0211.js"),["assets/BaseDynamicLayerView2D-12ea0211.js","assets/BitmapContainer-64ca6ae3.js","assets/WGLContainer-1ddd0e61.js","assets/definitions-c49e2c1e.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js","assets/ExportStrategy-cebcb708.js","assets/Bitmap-370c07bd.js","assets/RefreshableLayerView-23ff684b.js"])),"base-tile":c0,"bing-maps":c0,csv:rc,"geo-rss":()=>yi().then(()=>_e(()=>import("./GeoRSSLayerView2D-0f3d2e91.js"),["assets/GeoRSSLayerView2D-0f3d2e91.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/GraphicContainer-3acb95de.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-62e59b66.js","assets/normalizeUtilsSync-0205a13e.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js"])),feature:rc,geojson:rc,graphics:()=>yi().then(()=>_e(()=>import("./GraphicsLayerView2D-37a91b2c.js"),["assets/GraphicsLayerView2D-37a91b2c.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/GraphicContainer-3acb95de.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-62e59b66.js","assets/normalizeUtilsSync-0205a13e.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js"])),group:()=>yi().then(()=>_e(()=>import("./GroupLayerView2D-520ffafa.js"),["assets/GroupLayerView2D-520ffafa.js","assets/GroupContainer-6972c637.js","assets/WGLContainer-1ddd0e61.js","assets/definitions-c49e2c1e.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js"])),imagery:()=>yi().then(()=>_e(()=>import("./ImageryLayerView2D-0bc6d3a8.js"),["assets/ImageryLayerView2D-0bc6d3a8.js","assets/RasterVFDisplayObject-ce2ef190.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-af42ae1a.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1ddd0e61.js","assets/definitions-c49e2c1e.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js","assets/GraphicsView2D-62e59b66.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/normalizeUtilsSync-0205a13e.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/visualVariablesUtils-8f78c9ca.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-3aeef62a.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-64ca6ae3.js","assets/Bitmap-370c07bd.js","assets/ExportStrategy-cebcb708.js","assets/rasterProjectionHelper-cfbd2d3e.js","assets/popupUtils-88e1b549.js","assets/RefreshableLayerView-23ff684b.js"])),"imagery-tile":()=>yi().then(()=>_e(()=>import("./ImageryTileLayerView2D-5ce3b3ec.js"),["assets/ImageryTileLayerView2D-5ce3b3ec.js","assets/multidimensionalUtils-6482eca5.js","assets/RasterVFDisplayObject-ce2ef190.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-af42ae1a.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1ddd0e61.js","assets/definitions-c49e2c1e.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js","assets/rasterUtils-996abb3c.js","assets/TiledDisplayObject-140c5b09.js","assets/TileContainer-23df8a83.js","assets/RawBlockCache-b411494d.js","assets/rasterProjectionHelper-cfbd2d3e.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-83127115.js","assets/popupUtils-88e1b549.js","assets/RefreshableLayerView-23ff684b.js"])),kml:()=>yi().then(()=>_e(()=>import("./KMLLayerView2D-2a470720.js"),["assets/KMLLayerView2D-2a470720.js","assets/kmlUtils-0be3a63d.js","assets/Bitmap-370c07bd.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/BitmapContainer-64ca6ae3.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js","assets/GraphicContainer-3acb95de.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-62e59b66.js","assets/normalizeUtilsSync-0205a13e.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js","assets/rasterProjectionHelper-cfbd2d3e.js","assets/RenderingContext-a5db5210.js","assets/programUtils-950386fd.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/testSVGPremultipliedAlpha-9a9aceb3.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-996abb3c.js"])),"knowledge-graph":()=>yi().then(()=>_e(()=>import("./KnowledgeGraphLayerView2D-694073bd.js"),["assets/KnowledgeGraphLayerView2D-694073bd.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js"])),"link-chart":()=>yi().then(()=>_e(()=>import("./KnowledgeGraphLayerView2D-694073bd.js"),["assets/KnowledgeGraphLayerView2D-694073bd.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js"])),"knowledge-graph-sublayer":rc,"map-image":()=>yi().then(()=>_e(()=>import("./MapImageLayerView2D-14630fd2.js"),["assets/MapImageLayerView2D-14630fd2.js","assets/BitmapContainer-64ca6ae3.js","assets/WGLContainer-1ddd0e61.js","assets/definitions-c49e2c1e.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js","assets/GraphicsView2D-62e59b66.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/normalizeUtilsSync-0205a13e.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/visualVariablesUtils-8f78c9ca.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-3aeef62a.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-cebcb708.js","assets/Bitmap-370c07bd.js","assets/RefreshableLayerView-23ff684b.js","assets/drapedUtils-ec0b423f.js","assets/popupUtils-88e1b549.js"])),"map-notes":()=>yi().then(()=>_e(()=>import("./MapNotesLayerView2D-f8d28a5b.js"),["assets/MapNotesLayerView2D-f8d28a5b.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/GroupContainer-6972c637.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js","assets/GraphicContainer-3acb95de.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-62e59b66.js","assets/normalizeUtilsSync-0205a13e.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js"])),media:()=>yi().then(()=>_e(()=>import("./MediaLayerView2D-cf9bb8a2.js"),["assets/MediaLayerView2D-cf9bb8a2.js","assets/perspectiveUtils-8d46d4d5.js","assets/normalizeUtilsSync-0205a13e.js","assets/mat3f64-221ce671.js","assets/Rasterizer-d868c919.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-fb8f30fc.js","assets/alignmentUtils-ae955d28.js","assets/definitions-c49e2c1e.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/rasterizingUtils-fa89fcf9.js","assets/EffectView-f21b790b.js","assets/Container-7664f554.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/BufferPool-ed7e530d.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/color-82eb9d53.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-9b763256.js","assets/imageutils-6c3ff994.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-9a9aceb3.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-62e59b66.js","assets/vec3f32-ad1dc57f.js","assets/LayerView-8c849c97.js"])),"ogc-feature":()=>yi().then(()=>_e(()=>import("./OGCFeatureLayerView2D-b2d67784.js"),["assets/OGCFeatureLayerView2D-b2d67784.js","assets/FeatureLayerView2D-851a860b.js","assets/EffectView-f21b790b.js","assets/FeatureEffect-fa9becb0.js","assets/definitions-c49e2c1e.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/BitmapTileContainer-0e2ab2d1.js","assets/Bitmap-370c07bd.js","assets/TileContainer-23df8a83.js","assets/CircularArray-ef508845.js","assets/BufferPool-ed7e530d.js","assets/FeatureContainer-4622de9f.js","assets/popupUtils-88e1b549.js","assets/RefreshableLayerView-23ff684b.js"])),"open-street-map":c0,"oriented-imagery":rc,route:()=>yi().then(()=>_e(()=>import("./RouteLayerView2D-6ab93e1b.js"),["assets/RouteLayerView2D-6ab93e1b.js","assets/Stop-956262f9.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/GraphicContainer-3acb95de.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-62e59b66.js","assets/normalizeUtilsSync-0205a13e.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js"])),stream:()=>yi().then(()=>_e(()=>import("./StreamLayerView2D-0875ae86.js"),["assets/StreamLayerView2D-0875ae86.js","assets/FeatureLayerView2D-851a860b.js","assets/EffectView-f21b790b.js","assets/FeatureEffect-fa9becb0.js","assets/definitions-c49e2c1e.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/BitmapTileContainer-0e2ab2d1.js","assets/Bitmap-370c07bd.js","assets/TileContainer-23df8a83.js","assets/CircularArray-ef508845.js","assets/BufferPool-ed7e530d.js","assets/FeatureContainer-4622de9f.js","assets/popupUtils-88e1b549.js","assets/RefreshableLayerView-23ff684b.js"])),"subtype-group":()=>yi().then(()=>_e(()=>import("./SubtypeGroupLayerView2D-b7c8bebc.js"),["assets/SubtypeGroupLayerView2D-b7c8bebc.js","assets/FeatureEffect-fa9becb0.js","assets/FeatureLayerView2D-851a860b.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/cimAnalyzer-249b67c5.js","assets/fontUtils-c4906c91.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/utils-fb8f30fc.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/BitmapTileContainer-0e2ab2d1.js","assets/Bitmap-370c07bd.js","assets/TileContainer-23df8a83.js","assets/CircularArray-ef508845.js","assets/BufferPool-ed7e530d.js","assets/FeatureContainer-4622de9f.js","assets/popupUtils-88e1b549.js","assets/RefreshableLayerView-23ff684b.js"])),tile:c0,"vector-tile":()=>yi().then(()=>_e(()=>import("./VectorTileLayerView2D-aff7b433.js"),["assets/VectorTileLayerView2D-aff7b433.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/rasterizingUtils-fa89fcf9.js","assets/floatRGBA-3a08c070.js","assets/VertexArrayObject-6676a928.js","assets/config-1337d16e.js","assets/TiledDisplayObject-140c5b09.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/color-82eb9d53.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/TileContainer-23df8a83.js","assets/WGLContainer-1ddd0e61.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/earcut-3e9b4557.js","assets/StyleRepository-e3120854.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-53652037.js","assets/LayerView-8c849c97.js"])),video:()=>yi().then(()=>_e(()=>import("./VideoLayerView2D-a1c201ba.js"),["assets/VideoLayerView2D-a1c201ba.js","assets/LayerView-8c849c97.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js"])),wcs:()=>yi().then(()=>_e(()=>import("./ImageryTileLayerView2D-5ce3b3ec.js"),["assets/ImageryTileLayerView2D-5ce3b3ec.js","assets/multidimensionalUtils-6482eca5.js","assets/RasterVFDisplayObject-ce2ef190.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-af42ae1a.js","assets/pixelRangeUtils-cc28ceb4.js","assets/WGLContainer-1ddd0e61.js","assets/definitions-c49e2c1e.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js","assets/rasterUtils-996abb3c.js","assets/TiledDisplayObject-140c5b09.js","assets/TileContainer-23df8a83.js","assets/RawBlockCache-b411494d.js","assets/rasterProjectionHelper-cfbd2d3e.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-83127115.js","assets/popupUtils-88e1b549.js","assets/RefreshableLayerView-23ff684b.js"])),"web-tile":c0,wfs:rc,wms:()=>yi().then(()=>_e(()=>import("./WMSLayerView2D-62acf23b.js"),["assets/WMSLayerView2D-62acf23b.js","assets/BitmapContainer-64ca6ae3.js","assets/WGLContainer-1ddd0e61.js","assets/definitions-c49e2c1e.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/earcut-3e9b4557.js","assets/LayerView-8c849c97.js","assets/ExportStrategy-cebcb708.js","assets/Bitmap-370c07bd.js","assets/RefreshableLayerView-23ff684b.js","assets/ExportWMSImageParameters-d641b6e8.js"])),wmts:()=>yi().then(()=>_e(()=>import("./WMTSLayerView2D-8d1059b8.js"),["assets/WMTSLayerView2D-8d1059b8.js","assets/imageUtils-b4c7eb94.js","assets/BitmapTileContainer-0e2ab2d1.js","assets/Bitmap-370c07bd.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/definitions-c49e2c1e.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/TiledDisplayObject-140c5b09.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-82eb9d53.js","assets/enums-55085e26.js","assets/number-e491b09e.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/alignmentUtils-ae955d28.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/TileContainer-23df8a83.js","assets/LayerView-8c849c97.js","assets/RefreshableLayerView-23ff684b.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function lQ(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new oe(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const s7={hasLayerViewModule:t=>r7[t.type]!=null,importLayerView:t=>{const e=r7[t.type];if(e==null)throw lQ(t);return e(t)}};function uQ(t,e){const{spatialReference:i}=e,s=[e.x,e.y];let a=Number.POSITIVE_INFINITY,d=0,y=0;const g=[0,0],_=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const x of _)for(let I=0;I<x.length-1;I++){DG(g,s,x,I);const A=qf(s,g);A<a&&(a=A,d=g[0],y=g[1])}return{coordinate:new Ue({x:d,y,spatialReference:i}),distance:a}}var f9;let nh=f9=class extends V5(je){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return au(this.geometry,this.spatialReference)}catch(t){return me.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?gv(this.normalizedGeometry,i):gM(this.normalizedGeometry,i))return t;const{coordinate:s}=uQ(this.normalizedGeometry,i);return s&&(t.targetGeometry=s),t}clone(){var t,e;return new f9({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};b([S({constructOnly:!0})],nh.prototype,"geometry",void 0),b([S({readOnly:!0})],nh.prototype,"normalizedGeometry",null),b([S({constructOnly:!0})],nh.prototype,"spatialReference",void 0),nh=f9=b([J("esri.views.2d.constraints.GeometryConstraint")],nh);var y9;let X0=y9=class extends V5(je){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new y9({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};b([S()],X0.prototype,"enabled",void 0),b([S()],X0.prototype,"rotationEnabled",void 0),X0=y9=b([J("esri.views.2d.constraints.RotationConstraint")],X0);const wO=X0;var g9;let Fr=g9=class extends V5(je){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:s,minZoom:a,maxZoom:d}=this,y=-1,g=-1,_=!1,x=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);e=e.map(I=>I.clone()),e.sort((I,A)=>A.scale-I.scale),e.forEach((I,A)=>I.level=A);for(const I of e)!_&&i>0&&i>=I.scale&&(y=I.level,_=!0),!x&&s>0&&s>=I.scale&&(g=t?t.level:-1,x=!0),t=I;a===-1&&(a=i===0?0:y),d===-1&&(d=s===0?e.length-1:g),a=Math.max(a,0),a=Math.min(a,e.length-1),d=Math.max(d,0),d=Math.min(d,e.length-1),a>d&&([a,d]=[d,a]),i=e[a].scale,s=e[d].scale,e.splice(0,a),e.splice(d-a+1,e.length),e.forEach((I,A)=>{this._lodByScale[I.scale]=I,this._scales[A]=I.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",a),this._set("effectiveMaxZoom",d),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,s=this.effectiveMaxScale,a=t.targetGeometry,d=e&&e.targetGeometry,y=s!==0&&t.scale<s,g=i!==0&&t.scale>i;if(y||g){const _=g?i:s;if(e&&d){const x=(_-e.scale)/(t.scale-e.scale);a.x=d.x+(a.x-d.x)*x,a.y=d.y+(a.y-d.y)*x}t.scale=_}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),s=Math.round(t);return e[s]+(s-t)*(e[i]-e[s])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,s;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let a=0;a<e.length-1;a++){if(i=e[a],s=e[a+1],s===t)return a+this.effectiveMinZoom+1;if(i>t&&s<t)return a+this.effectiveMinZoom+1-(t-s)/(i-s)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new g9({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};b([S({readOnly:!0})],Fr.prototype,"effectiveLODs",void 0),b([S({readOnly:!0})],Fr.prototype,"effectiveMinZoom",void 0),b([S({readOnly:!0})],Fr.prototype,"effectiveMaxZoom",void 0),b([S({readOnly:!0})],Fr.prototype,"effectiveMinScale",void 0),b([S({readOnly:!0})],Fr.prototype,"effectiveMaxScale",void 0),b([S()],Fr.prototype,"lods",void 0),b([S()],Fr.prototype,"minZoom",void 0),b([S()],Fr.prototype,"maxZoom",void 0),b([S()],Fr.prototype,"minScale",void 0),b([S()],Fr.prototype,"maxScale",void 0),b([S()],Fr.prototype,"snapToZoom",void 0),Fr=g9=b([J("esri.views.2d.constraints.ZoomConstraint")],Fr);const _O=Fr,hQ={base:null,key:"type",typeMap:{extent:bt,polygon:Pn}};let bi=class extends je{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Ge}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,s;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(s=this._geometry)==null?void 0:s.uid}`}get _geometry(){var i,s;const e=this._get("_geometry");return e&&this.geometry===e.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===e.spatialReference?e:new nh({geometry:this.geometry,spatialReference:(s=this.view)==null?void 0:s.constraintsInfo.spatialReference})}get _rotation(){return new wO({rotationEnabled:this.rotationEnabled})}get _zoom(){var _;const e=this._get("_zoom"),i=this.lods||((_=this.view)==null?void 0:_.constraintsInfo.lods),s=this.minZoom,a=this.maxZoom,d=this.minScale,y=this.maxScale,g=this.snapToZoom;return e&&e.lods===i&&e.minZoom===s&&e.maxZoom===a&&e.minScale===d&&e.maxScale===y&&e.snapToZoom===g?e:new _O({lods:i,minZoom:s,maxZoom:a,minScale:d,maxScale:y,snapToZoom:g})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(s=>s.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};b([S({readOnly:!0})],bi.prototype,"effectiveLODs",null),b([S({readOnly:!0})],bi.prototype,"effectiveMinScale",null),b([S({readOnly:!0})],bi.prototype,"effectiveMaxScale",null),b([S({readOnly:!0})],bi.prototype,"effectiveMinZoom",null),b([S({readOnly:!0})],bi.prototype,"effectiveMaxZoom",null),b([S({types:hQ,value:null})],bi.prototype,"geometry",null),b([S({type:[wl]})],bi.prototype,"lods",void 0),b([S()],bi.prototype,"minScale",void 0),b([S()],bi.prototype,"maxScale",void 0),b([S()],bi.prototype,"minZoom",void 0),b([S()],bi.prototype,"maxZoom",void 0),b([S()],bi.prototype,"rotationEnabled",void 0),b([S()],bi.prototype,"snapToZoom",void 0),b([S({type:Ge})],bi.prototype,"customConstraints",void 0),b([S()],bi.prototype,"view",void 0),b([S({readOnly:!0})],bi.prototype,"version",null),b([S({type:nh,readOnly:!0})],bi.prototype,"_geometry",null),b([S({type:wO})],bi.prototype,"_rotation",null),b([S({readOnly:!0,type:_O})],bi.prototype,"_zoom",null),bi=b([J("esri.views.2d.MapViewConstraints")],bi);const SO=bi;let cQ=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},xO=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new pm(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=li(this._schedule),this._task=li(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,s)=>e(s))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const s=this.get(e);if(s)return s;const a=new AbortController;let d=null;i&&(d=ls(i,()=>a.abort()));const y=()=>{const I=this._processingItems.get(e);I&&I.controller.abort(),g(),x.reject(ni())},g=()=>{_.remove(),d!=null&&d.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},_=Y_(a.signal,y),x=On();return this._deferreds.set(e,x),this._controllers.set(e,a),x.promise.then(g,g),this._queue.push(e),this._scheduleNext(),x.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Ip(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const s=new AbortController,a=new cQ(e,s);this._processingItems.set(e,a);try{i=this.process(e,s.signal)}catch(d){this._processError(a,d)}wa(i)?(a.promise=i,i.then(d=>this._processResult(a,d),d=>this._processError(a,d))):this._processResult(a,i)}get test(){return{update:e=>this.runTask(e)}}};function pQ(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const H2=new Set,z1=[],sc=new Map,n7=[0,0];let ja=class extends je{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new xO({concurrency:e,process:(s,a)=>{const d=this._keyToItem.get(s);return i(d,{signal:a})},peeker:s=>s.values().next().value})}destroy(){this.clear(),this._queue=Kt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const s=e.key.id+"-"+i;if(this.has(s))return this.get(s);const a=this._queue.push(s),d=()=>{this._keyToItem.delete(s),this.notifyChange("updating")};return this._keyToItem.set(s,e),a.then(d,d),this.notifyChange("updating"),a}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;e.forEach(I=>{const A=this._keyToItem.get(I),C=this.tileInfoView.getTileScale(A.key);sc.has(C)||(sc.set(C,[]),s=Math.max(C,s),a=Math.min(C,a)),sc.get(C).push(A.key),H2.add(C)});let d=this.state.scale;sc.has(d)||(pQ(z1,H2),z1.sort((I,A)=>I-A),d=z1.reduce((I,A)=>Math.abs(A-d)<Math.abs(I-d)?A:I,z1[0])),d=Math.min(d,s),d=Math.max(d,a);const y=sc.get(d),g=i.getClosestInfoForScale(d),_=g.getColumnForX(this.state.center[0]),x=g.getRowForY(this.state.center[1]);return y.sort((I,A)=>{const C=g.denormalizeCol(I.col,I.world),N=g.denormalizeCol(A.col,A.world);return Math.sqrt((_-C)*(_-C)+(x-I.row)*(x-I.row))-Math.sqrt((_-N)*(_-N)+(x-A.row)*(x-A.row))}),H2.clear(),sc.clear(),y[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,s=this.state.center;let a,d=Number.POSITIVE_INFINITY;return e.forEach(y=>{const g=this._keyToItem.get(y);i.getTileCoords(n7,g.key);const _=qf(n7,s);_<d&&(d=_,a=g.key)}),a.id}};b([S({constructOnly:!0})],ja.prototype,"concurrency",void 0),b([S({constructOnly:!0})],ja.prototype,"process",void 0),b([S()],ja.prototype,"state",void 0),b([S({constructOnly:!0})],ja.prototype,"strategy",void 0),b([S({constructOnly:!0})],ja.prototype,"tileInfoView",void 0),b([S({readOnly:!0})],ja.prototype,"updating",null),ja=b([J("esri.views.2d.tiling.PagedTileQueue")],ja);let jh=class ju{static getId(e,i,s,a){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${s}/${a}`}constructor(e,i,s,a){this.set(e,i,s,a)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,s=63&this.level;return(3&this.world)<<30|i<<22|e<<8|s}acquire(e,i,s,a){this.set(e,i,s,a)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new ju(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,s,a){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[d,y,g,_]=e.split("/");this.level=parseFloat(d),this.row=parseFloat(y),this.col=parseFloat(g),this.world=parseFloat(_)}else this.level=+e,this.row=+i,this.col=+s,this.world=+a||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ju(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,s=this.col<<1,a=this.world;return[new ju(e,i,s,a),new ju(e,i,s+1,a),new ju(e,i+1,s,a),new ju(e,i+1,s+1,a)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};jh.pool=new eu(jh,null,null,25,50);function Da(t,e){return[t,e]}function cu(t,e,i){return t[0]=e,t[1]=i,t}function dQ(t,e,i,s,a){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t}const Ys=new jh("0/0/0/0");let fQ=class $O{static create(e,i,s=null){const a=In(e.spatialReference),d=i.origin||Da(e.origin.x,e.origin.y),y=Da(e.size[0]*i.resolution,e.size[1]*i.resolution),g=Da(-1/0,-1/0),_=Da(1/0,1/0),x=Da(1/0,1/0);s!=null&&(cu(g,Math.max(0,Math.floor((s.xmin-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymax)/y[1]))),cu(_,Math.max(0,Math.floor((s.xmax-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymin)/y[1]))),cu(x,_[0]-g[0]+1,_[1]-g[1]+1));const{cols:I,rows:A}=i;let C,N,j,D;return!s&&I&&A&&(cu(g,I[0],A[0]),cu(_,I[1],A[1]),cu(x,I[1]-I[0]+1,A[1]-A[0]+1)),e.isWrappable?(C=Da(Math.ceil(Math.round((a.valid[1]-a.valid[0])/i.resolution)/e.size[0]),x[1]),N=Da(Math.floor((a.origin[0]-d[0])/y[0]),g[1]),j=Da(C[0]+N[0]-1,_[1]),D=!0):(N=g,j=_,C=x,D=!1),new $O(i.level,i.resolution,i.scale,d,g,_,x,y,N,j,C,D)}constructor(e,i,s,a,d,y,g,_,x,I,A,C){this.level=e,this.resolution=i,this.scale=s,this.origin=a,this.first=d,this.last=y,this.size=g,this.norm=_,this.worldStart=x,this.worldEnd=I,this.worldSize=A,this.wrap=C}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,s=!1){Ys.set(i);const a=s?Ys.col:this.denormalizeCol(Ys.col,Ys.world),d=Ys.row;return dQ(e,this.getXForColumn(a),this.getYForRow(d+1),this.getXForColumn(a+1),this.getYForRow(d)),e}getTileCoords(e,i,s=!1){Ys.set(i);const a=s?Ys.col:this.denormalizeCol(Ys.col,Ys.world);return Array.isArray(e)?cu(e,this.getXForColumn(a),this.getYForRow(Ys.row)):(e.x=this.getXForColumn(a),e.y=this.getYForRow(Ys.row)),e}},gf=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:s,lodInfo:a}=this,{level:d}=a;if(s.length!==0)for(const{row:y,colFrom:g,colTo:_}of s)for(let x=g;x<=_;x++)e.call(i,d,y,a.normalizeCol(x),a.getWorldForColumn(x))}};gf.pool=new eu(gf);let W2=class{constructor(e,i,s){this.row=e,this.colFrom=i,this.colTo=s}};const Qt=new jh("0/0/0/0");let yQ=class TO{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[s,a]=e,[d,y]=i,g=d-s,_=y-a,x=_!==0?g/_:0,I=(Math.ceil(a)-a)*x,A=(Math.floor(a)-a)*x;return new TO(s,Math.floor(a),Math.ceil(y),x,g<0?I:A,g<0?A:I,g<0?d:s,g<0?s:d)}constructor(e,i,s,a,d,y,g,_){this.x=e,this.ymin=i,this.ymax=s,this.invM=a,this.leftAdjust=d,this.rightAdjust=y,this.leftBound=g,this.rightBound=_}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Wr=[[0,0],[0,0],[0,0],[0,0]],gQ=1e-6;let mQ=class{constructor(e,i=null,s=e.lods[0].level,a=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const d=e.lods.filter(g=>g.level>=s&&g.level<=a);this.minScale=d[0].scale,this.maxScale=d[d.length-1].scale;const y=this._lodInfos=d.map(g=>fQ.create(e,g,i));d.forEach((g,_)=>{this._infoByLevel[g.level]=y[_],this._infoByScale[g.scale]=y[_],this.scales[_]=g.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,s=!1){Qt.set(i);const a=this._infoByLevel[Qt.level];return a?a.getTileBounds(e,Qt,s):e}getTileCoords(e,i,s=!1){Qt.set(i);const a=this._infoByLevel[Qt.level];return a?a.getTileCoords(e,Qt,s):e}getTileCoverage(e,i=192,s=!0,a="closest"){if(!s&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const d=a==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),y=gf.pool.acquire(d),g=this._wrap;let _,x,I,A=1/0,C=-1/0;const N=y.spans;Wr[0][0]=Wr[0][1]=Wr[1][1]=Wr[3][0]=-i,Wr[1][0]=Wr[2][0]=e.size[0]+i,Wr[2][1]=Wr[3][1]=e.size[1]+i;for(const W of Wr)e.toMap(W,W),W[0]=d.getColumnForX(W[0]),W[1]=d.getRowForY(W[1]);const j=[];let D=3;for(let W=0;W<4;W++){if(Wr[W][1]===Wr[D][1]){D=W;continue}const K=yQ.create(Wr[W],Wr[D]);A=Math.min(K.ymin,A),C=Math.max(K.ymax,C),j[K.ymin]===void 0&&(j[K.ymin]=[]),j[K.ymin].push(K),D=W}if(A==null||C==null||C-A>100)return null;let V=[];for(_=A;_<C;){j[_]!=null&&(V=V.concat(j[_])),x=1/0,I=-1/0;for(let W=V.length-1;W>=0;W--){const K=V[W];x=Math.min(x,K.getLeftCol()),I=Math.max(I,K.getRightCol())}if(x=Math.floor(x),I=Math.floor(I),_>=d.first[1]&&_<=d.last[1])if(g)if(d.size[0]<d.worldSize[0]){const W=Math.floor(I/d.worldSize[0]);for(let K=Math.floor(x/d.worldSize[0]);K<=W;K++)N.push(new W2(_,Math.max(d.getFirstColumnForWorld(K),x),Math.min(d.getLastColumnForWorld(K),I)))}else N.push(new W2(_,x,I));else x>d.last[0]||I<d.first[0]||(x=Math.max(x,d.first[0]),I=Math.min(I,d.last[0]),N.push(new W2(_,x,I)));_+=1;for(let W=V.length-1;W>=0;W--){const K=V[W];K.ymax>=_?K.incrRow():V.splice(W,1)}}return y}getTileParentId(e){Qt.set(e);const i=this._infoByLevel[Qt.level],s=this._lodInfos.indexOf(i)-1;return s<0?null:(this._getTileIdAtLOD(Qt,this._lodInfos[s],Qt),Qt.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Qt.set(i);const s=this._infoByLevel[Qt.level],a=e.lodInfo;if(a.resolution>s.resolution){this._getTileIdAtLOD(Qt,a,Qt);const y=a.denormalizeCol(Qt.col,Qt.world);for(const g of e.spans)if(g.row===Qt.row&&g.colFrom<=y&&g.colTo>=y)return!0}if(a.resolution<s.resolution){const[y,g,_,x]=e.spans.reduce((D,V)=>(D[0]=Math.min(D[0],V.row),D[1]=Math.max(D[1],V.row),D[2]=Math.min(D[2],V.colFrom),D[3]=Math.max(D[3],V.colTo),D),[1/0,-1/0,1/0,-1/0]),I=s.denormalizeCol(Qt.col,Qt.world),A=a.getColumnForX(s.getXForColumn(I)),C=a.getRowForY(s.getYForRow(Qt.row)),N=a.getColumnForX(s.getXForColumn(I+1))-1,j=a.getRowForY(s.getYForRow(Qt.row+1))-1;return!(A>x||N<_||C>g||j<y)}const d=a.denormalizeCol(Qt.col,Qt.world);return e.spans.some(y=>y.row===Qt.row&&y.colFrom<=d&&y.colTo>=d)}normalizeBounds(e,i,s){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const a=In(this.tileInfo.spatialReference),d=-s*(a.valid[1]-a.valid[0]);e[0]+=d,e[2]+=d}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let s=1;s<i.length-1;s++)if(e>i[s]+gQ)return this._infoByScale[i[s-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((s,a)=>Math.abs(a-e)<Math.abs(s-e)?a:s,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let s=i.length-1;s>=0;s--)if(e<i[s])return s===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[s]].level+(i[s]-e)/(i[s]-i[s+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,s){const a=this._infoByLevel[s.level];return e.set(s),i.resolution<a.resolution?null:(i.resolution===a.resolution||(e.level=i.level,e.col=Math.floor(s.col*a.resolution/i.resolution+.01),e.row=Math.floor(s.row*a.resolution/i.resolution+.01)),e)}};function vQ(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const J2=new Set,V1=[],nc=new Map,o7=[0,0];let qo=class extends je{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:s}=this;this._queue=new xO({concurrency:e,process:(a,d)=>{const y=this._keyToItem.get(a);return i(y,{signal:d})},peeker:s==="scale-first"?a=>this._peekByScaleFirst(a):a=>this._peekByCenterFirst(a)})}destroy(){this.clear(),this._queue=Kt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const s=this._queue.push(i),a=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),s.then(a,a),this.notifyChange("updating"),s}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;e.forEach(I=>{const A=this._keyToItem.get(I),C=this.tileInfoView.getTileScale(A.key);nc.has(C)||(nc.set(C,[]),s=Math.max(C,s),a=Math.min(C,a)),nc.get(C).push(A.key),J2.add(C)});let d=this.state.scale;nc.has(d)||(vQ(V1,J2),V1.sort((I,A)=>I-A),d=V1.reduce((I,A)=>Math.abs(A-d)<Math.abs(I-d)?A:I,V1[0])),d=Math.min(d,s),d=Math.max(d,a);const y=nc.get(d),g=i.getClosestInfoForScale(d),_=g.getColumnForX(this.state.center[0]),x=g.getRowForY(this.state.center[1]);return y.sort((I,A)=>{const C=g.denormalizeCol(I.col,I.world),N=g.denormalizeCol(A.col,A.world);return Math.sqrt((_-C)*(_-C)+(x-I.row)*(x-I.row))-Math.sqrt((_-N)*(_-N)+(x-A.row)*(x-A.row))}),J2.clear(),nc.clear(),y[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,s=this.state.center;let a,d=Number.POSITIVE_INFINITY;return e.forEach(y=>{const g=this._keyToItem.get(y);i.getTileCoords(o7,g.key);const _=qf(o7,s);_<d&&(d=_,a=g.key)}),a.id}};b([S({constructOnly:!0})],qo.prototype,"concurrency",void 0),b([S({constructOnly:!0})],qo.prototype,"process",void 0),b([S()],qo.prototype,"state",void 0),b([S({constructOnly:!0})],qo.prototype,"strategy",void 0),b([S({constructOnly:!0})],qo.prototype,"tileInfoView",void 0),b([S({readOnly:!0})],qo.prototype,"updating",null),qo=b([J("esri.views.2d.tiling.TileQueue")],qo);const A1e=qo;let bQ=class{constructor(e,i,s){this.maxSize=e,this._tileInfoView=i,this._removedFunc=s,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const s=i.key.level,a=this._tileKeysPerLevel[s];a7(this._tilePerId,e);for(let d=0;d<a.length;d++)if(a[d].id===e){a.splice(d,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,s=i.id;if(this._tilePerId.has(s))return;this._tilePerId.set(s,e);const a=i.level;this._tileKeysPerLevel[a]||(this._tileKeysPerLevel[a]=[]),this._tileKeysPerLevel[a].push(i)}prune(e,i,s){let a=this._tilePerId.size;if(a<=this.maxSize)return;let d=this._tileKeysPerLevel.length-1;for(;a>this.maxSize&&d>=0;)d!==e&&(a=this._pruneAroundCenterTile(a,i,s,d)),d--;a>this.maxSize&&(a=this._pruneAroundCenterTile(a,i,s,e))}_pruneAroundCenterTile(e,i,s,a){const d=this._tileKeysPerLevel[a];if(!d||d.length===0)return e;const{size:y,origin:g}=this._tileInfoView.tileInfo,_=s*y[0],x=s*y[1],I=[0,0],A=[0,0];for(d.sort((C,N)=>(I[0]=g.x+_*(C.col+.5),I[1]=g.y-x*(C.row+.5),A[0]=g.x+_*(N.col+.5),A[1]=g.y-x*(N.row+.5),Tm(I,i)-Tm(A,i)));d.length>0;){const C=d.pop();if(this._removeTile(C.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),a7(this._tilePerId,e)}};function a7(t,e){t.delete(e)}const pu=new jh(0,0,0,0),Io=new Map,du=[],K2=[];let O1e=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new bQ(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){var W,K;const{resampling:i,tileIndex:s}=this,{scale:a,center:d,resolution:y}=e.state,{minScale:g,maxScale:_}=this.tileInfoView,x=!e.stationary&&a>this._previousScale;if(this._previousScale=a,!i&&(a>g||a<_))return this.tiles.length=0,void this.clear();const I=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!I)return this.tiles.length=0,void this.clear();const{spans:A,lodInfo:C}=I,{level:N}=C;this.tiles.length=0,s.forEach(Y=>Y.visible=!0);let j=0,D=0;if(A.length>0)for(const{row:Y,colFrom:ee,colTo:re}of A)for(let se=ee;se<=re;se++){j++;const ue=pu.set(N,Y,C.normalizeCol(se),C.getWorldForColumn(se)).id;let de=s.get(ue);if(de)de.isReady?(Io.set(ue,de),D++):x||this._addParentTile(ue,Io);else{if((W=this._tileCache)!=null&&W.has(ue)){if(de=this._tileCache.pop(ue),this.tileIndex.set(ue,de),de.isReady){Io.set(ue,de),D++;continue}}else de=this.acquireTile(pu),this.tileIndex.set(ue,de);x||this._addParentTile(ue,Io)}}const V=D===j;for(const[Y,ee]of s){if(Io.has(Y))continue;pu.set(Y);const re=this.tileInfoView.intersects(I,pu),se=this.cachePolicy==="purge"?pu.level!==N:pu.level>N;!re||!x&&V?!se&&re||du.push(ee):ee.isReady?se&&this.cachePolicy==="purge"&&this._hasReadyAncestor(pu,N)?du.push(ee):K2.push(ee):se&&du.push(ee)}for(const Y of K2)Y.isReady&&Io.set(Y.key.id,Y);for(const Y of du)this._tileCache?this._tileCache.add(Y):this.releaseTile(Y),s.delete(Y.key.id);for(const Y of Io.values())this.tiles.push(Y);for(const Y of s.values())Io.has(Y.key.id)||(Y.visible=!1);(K=this._tileCache)==null||K.prune(N,d,y),gf.pool.release(I),K2.length=0,du.length=0,Io.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){var i;for(const s of this.tileIndex.values())this.tiles.includes(s)?e(s):du.push(s);for(const s of du)this.releaseTile(s),this.tileIndex.delete(s.key.id);(i=this._tileCache)==null||i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){var d;let s=e,a=null;for(;s=this.tileInfoView.getTileParentId(s),s;)if(this.tileIndex.has(s)){if(a=this.tileIndex.get(s),a==null?void 0:a.isReady){i.has(a.key.id)||i.set(a.key.id,a);break}}else if((d=this._tileCache)!=null&&d.has(s)&&(a=this._tileCache.pop(s),this.tileIndex.set(s,a),a==null?void 0:a.isReady)){i.has(a.key.id)||i.set(a.key.id,a);break}}_hasReadyAncestor(e,i){const s=mo();this.tileInfoView.getTileBounds(s,e,!0);for(const a of this.tileIndex.values())if(a.isReady&&a.key.level>=i&&a.key.level<e.level){const d=mo();if(this.tileInfoView.getTileBounds(d,a.key,!0),QG(d,s))return!0}return!1}};function MO(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function wQ(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function _Q(t,e,i,s,a,d){const y=new Float32Array(6);return y[0]=t,y[1]=e,y[2]=i,y[3]=s,y[4]=a,y[5]=d,y}function SQ(t,e){return new Float32Array(t,e,6)}function IO(t,e,i,s){const a=e[s],d=e[s+1];t[s]=i[0]*a+i[2]*d+i[4],t[s+1]=i[1]*a+i[3]*d+i[5]}function xQ(t,e,i,s=0,a=0,d=2){const y=a||e.length/d;for(let g=s;g<y;g++)IO(t,e,i,g*d)}Object.freeze(Object.defineProperty({__proto__:null,clone:wQ,create:MO,createView:SQ,fromValues:_Q,transform:IO,transformMany:xQ},Symbol.toStringTag,{value:"Module"}));function $Q(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function TQ(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function EO(t,e,i,s,a,d,y,g,_,x){return t[0]=e,t[1]=i,t[2]=s,t[3]=a,t[4]=d,t[5]=y,t[6]=g,t[7]=_,t[8]=x,t}function AO(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function MQ(t,e){if(t===e){const i=e[1],s=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function IQ(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],g=e[5],_=e[6],x=e[7],I=e[8],A=I*y-g*x,C=-I*d+g*_,N=x*d-y*_;let j=i*A+s*C+a*N;return j?(j=1/j,t[0]=A*j,t[1]=(-I*s+a*x)*j,t[2]=(g*s-a*y)*j,t[3]=C*j,t[4]=(I*i-a*_)*j,t[5]=(-g*i+a*d)*j,t[6]=N*j,t[7]=(-x*i+s*_)*j,t[8]=(y*i-s*d)*j,t):null}function EQ(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],g=e[5],_=e[6],x=e[7],I=e[8];return t[0]=y*I-g*x,t[1]=a*x-s*I,t[2]=s*g-a*y,t[3]=g*_-d*I,t[4]=i*I-a*_,t[5]=a*d-i*g,t[6]=d*x-y*_,t[7]=s*_-i*x,t[8]=i*y-s*d,t}function AQ(t){const e=t[0],i=t[1],s=t[2],a=t[3],d=t[4],y=t[5],g=t[6],_=t[7],x=t[8];return e*(x*d-y*_)+i*(-x*a+y*g)+s*(_*a-d*g)}function D4(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=e[4],_=e[5],x=e[6],I=e[7],A=e[8],C=i[0],N=i[1],j=i[2],D=i[3],V=i[4],W=i[5],K=i[6],Y=i[7],ee=i[8];return t[0]=C*s+N*y+j*x,t[1]=C*a+N*g+j*I,t[2]=C*d+N*_+j*A,t[3]=D*s+V*y+W*x,t[4]=D*a+V*g+W*I,t[5]=D*d+V*_+W*A,t[6]=K*s+Y*y+ee*x,t[7]=K*a+Y*g+ee*I,t[8]=K*d+Y*_+ee*A,t}function m9(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=e[4],_=e[5],x=e[6],I=e[7],A=e[8],C=i[0],N=i[1];return t[0]=s,t[1]=a,t[2]=d,t[3]=y,t[4]=g,t[5]=_,t[6]=C*s+N*y+x,t[7]=C*a+N*g+I,t[8]=C*d+N*_+A,t}function kO(t,e,i){const s=e[0],a=e[1],d=e[2],y=e[3],g=e[4],_=e[5],x=e[6],I=e[7],A=e[8],C=Math.sin(i),N=Math.cos(i);return t[0]=N*s+C*y,t[1]=N*a+C*g,t[2]=N*d+C*_,t[3]=N*y-C*s,t[4]=N*g-C*a,t[5]=N*_-C*d,t[6]=x,t[7]=I,t[8]=A,t}function kQ(t,e,i){const s=i[0],a=i[1],d=i[2];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=d*e[6],t[7]=d*e[7],t[8]=d*e[8],t}function OQ(t,e,i){const s=i[0],a=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t}function CQ(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function PQ(t,e){const i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function NQ(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function LQ(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function RQ(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=i+i,g=s+s,_=a+a,x=i*y,I=s*y,A=s*g,C=a*y,N=a*g,j=a*_,D=d*y,V=d*g,W=d*_;return t[0]=1-A-j,t[3]=I-W,t[6]=C+V,t[1]=I+W,t[4]=1-x-j,t[7]=N-D,t[2]=C-V,t[5]=N+D,t[8]=1-x-A,t}function jQ(t,e){const i=e[0],s=e[1],a=e[2],d=e[4],y=e[5],g=e[6],_=e[8],x=e[9],I=e[10],A=I*y-g*x,C=-I*d+g*_,N=x*d-y*_,j=i*A+s*C+a*N;if(!j)return null;const D=1/j;return t[0]=A*D,t[1]=(-I*s+a*x)*D,t[2]=(g*s-a*y)*D,t[3]=C*D,t[4]=(I*i-a*_)*D,t[5]=(-g*i+a*d)*D,t[6]=N*D,t[7]=(-x*i+s*_)*D,t[8]=(y*i-s*d)*D,t}function DQ(t,e){const i=e[0],s=e[1],a=e[2],d=e[3],y=e[4],g=e[5],_=e[6],x=e[7],I=e[8],A=e[9],C=e[10],N=e[11],j=e[12],D=e[13],V=e[14],W=e[15],K=i*g-s*y,Y=i*_-a*y,ee=i*x-d*y,re=s*_-a*g,se=s*x-d*g,ue=a*x-d*_,de=I*D-A*j,we=I*V-C*j,Oe=I*W-N*j,Ne=A*V-C*D,Le=A*W-N*D,Be=C*W-N*V;let Pe=K*Be-Y*Le+ee*Ne+re*Oe-se*we+ue*de;return Pe?(Pe=1/Pe,t[0]=(g*Be-_*Le+x*Ne)*Pe,t[1]=(_*Oe-y*Be-x*we)*Pe,t[2]=(y*Le-g*Oe+x*de)*Pe,t[3]=(a*Le-s*Be-d*Ne)*Pe,t[4]=(i*Be-a*Oe+d*we)*Pe,t[5]=(s*Oe-i*Le-d*de)*Pe,t[6]=(D*ue-V*se+W*re)*Pe,t[7]=(V*ee-j*ue-W*Y)*Pe,t[8]=(j*se-D*ee+W*K)*Pe,t):null}function FQ(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function zQ(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function VQ(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function GQ(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function OO(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function UQ(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function qQ(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t}function BQ(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function HQ(t,e){const i=t[0],s=t[1],a=t[2],d=t[3],y=t[4],g=t[5],_=t[6],x=t[7],I=t[8],A=e[0],C=e[1],N=e[2],j=e[3],D=e[4],V=e[5],W=e[6],K=e[7],Y=e[8],ee=Vs();return Math.abs(i-A)<=ee*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(s-C)<=ee*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(a-N)<=ee*Math.max(1,Math.abs(a),Math.abs(N))&&Math.abs(d-j)<=ee*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(y-D)<=ee*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(g-V)<=ee*Math.max(1,Math.abs(g),Math.abs(V))&&Math.abs(_-W)<=ee*Math.max(1,Math.abs(_),Math.abs(W))&&Math.abs(x-K)<=ee*Math.max(1,Math.abs(x),Math.abs(K))&&Math.abs(I-Y)<=ee*Math.max(1,Math.abs(I),Math.abs(Y))}function WQ(t){const e=Vs(),i=t[0],s=t[1],a=t[2],d=t[3],y=t[4],g=t[5],_=t[6],x=t[7],I=t[8];return Math.abs(1-(i*i+d*d+_*_))<=e&&Math.abs(1-(s*s+y*y+x*x))<=e&&Math.abs(1-(a*a+g*g+I*I))<=e}const JQ=D4,KQ=OO;Object.freeze(Object.defineProperty({__proto__:null,add:GQ,adjoint:EQ,copy:TQ,determinant:AQ,equals:HQ,exactEquals:BQ,frob:VQ,fromMat2d:LQ,fromMat4:$Q,fromQuat:RQ,fromRotation:PQ,fromScaling:NQ,fromTranslation:CQ,identity:AO,invert:IQ,isOrthoNormal:WQ,mul:JQ,multiply:D4,multiplyScalar:UQ,multiplyScalarAndAdd:qQ,normalFromMat4:DQ,normalFromMat4Legacy:jQ,projection:FQ,rotate:kO,scale:kQ,scaleByVec2:OQ,set:EO,str:zQ,sub:KQ,subtract:OO,translate:m9,transpose:MQ},Symbol.toStringTag,{value:"Module"}));function Zy(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function YQ(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ZQ(t,e,i,s,a,d,y,g,_){const x=new Float32Array(9);return x[0]=t,x[1]=e,x[2]=i,x[3]=s,x[4]=a,x[5]=d,x[6]=y,x[7]=g,x[8]=_,x}function XQ(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:YQ,create:Zy,createView:XQ,fromValues:ZQ},Symbol.toStringTag,{value:"Module"}));function CO(){return new Float32Array(2)}function QQ(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function xp(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function eee(t,e){return new Float32Array(t,e,2)}function PO(){return CO()}function NO(){return xp(1,1)}function LO(){return xp(1,0)}function RO(){return xp(0,1)}const tee=PO(),iee=NO(),ree=LO(),see=RO();Object.freeze(Object.defineProperty({__proto__:null,ONES:iee,UNIT_X:ree,UNIT_Y:see,ZEROS:tee,clone:QQ,create:CO,createView:eee,fromValues:xp,ones:NO,unitX:LO,unitY:RO,zeros:PO},Symbol.toStringTag,{value:"Module"}));function nee(t){return t instanceof Float32Array&&t.length>=2}function oee(t){return Array.isArray(t)&&t.length>=2}function Y2(t){return nee(t)||oee(t)}var v9;const Eo=[0,0];let al=v9=class extends ye{constructor(t){super(t),this._viewpoint2D={center:$i(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new bt,this.id=0,this.inverseTransform=Ul(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ul(),this.transformNoRotation=Ul(),this.displayMat3=Zy(),this.displayViewMat3=Zy(),this.viewMat3=Zy(),this.viewMat2d=MO(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Fn(i,t.viewpoint),this._set("size",ff(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new v9({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return Y2(e)?lo(t,e,this.inverseTransform):(Eo[0]=e,Eo[1]=i,lo(t,Eo,this.inverseTransform))}toScreen(t,e,i){return Y2(e)?lo(t,e,this.transform):(Eo[0]=e,Eo[1]=i,lo(t,Eo,this.transform))}toScreenNoRotation(t,e,i){return Y2(e)?lo(t,e,this.transformNoRotation):(Eo[0]=e,Eo[1]=i,lo(t,Eo,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,a=this._get("size");return R4(t,i,a,e,0,s),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:s}=this._viewpoint2D,a=this._get("pixelRatio")||1,d=this._get("size"),y=new po({targetGeometry:new Ue(t[0],t[1],e),scale:i,rotation:s});if(this._set("viewpoint",y),!d||!e||!i)return;this.resolution=Vp(y),this.rotation=s,this.scale=i,this.spatialReference=e,ff(this.center,t);const g=d[0]!==0?2/d[0]:0,_=d[1]!==0?-2/d[1]:0;EO(this.displayMat3,g,0,0,0,_,0,-1,1,1);const x=AO(this.viewMat3),I=xp(d[0]/2,d[1]/2),A=xp(-d[0]/2,-d[1]/2),C=A5(s);m9(x,x,I),kO(x,x,C),m9(x,x,A),D4(this.displayViewMat3,this.displayMat3,x);const N=C4(this.viewMat2d,I);return Rv(N,N,C),df(N,N,A),qX(this.extent,y,d),j4(this.transform,y,d,a),k4(this.inverseTransform,this.transform),ZX(this.transformNoRotation,y,d,a),this.worldScreenWidth=QX(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};b([S({readOnly:!0})],al.prototype,"id",void 0),b([S({value:1,json:{write:!0}})],al.prototype,"pixelRatio",null),b([S({json:{write:!0}})],al.prototype,"size",null),b([S()],al.prototype,"spatialReference",void 0),b([S({type:po,json:{write:!0}})],al.prototype,"viewpoint",null),al=v9=b([J("esri.views.2d.ViewState")],al);const l7=al;var b9,w9;let ta=b9=class extends je{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new b9({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};b([S()],ta.prototype,"left",void 0),b([S()],ta.prototype,"top",void 0),b([S()],ta.prototype,"right",void 0),b([S()],ta.prototype,"bottom",void 0),ta=b9=b([J("esri.views.2d.PaddedViewState.Padding")],ta);let $c=w9=class extends l7{constructor(...t){super(...t),this.paddedViewState=new l7,this._updateContent=(()=>{const e=$i();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const a=this.paddedViewState;Yi(e,s.left+s.right,s.top+s.bottom),yf(e,i,e),ff(a.size,e);const d=a.viewpoint;d&&(this.viewpoint=d)}})(),this.addHandles(Me(()=>[this.size,this.padding],()=>this._updateContent(),Fp)),this.padding=new ta,this.size=[0,0]}set padding(t){this._set("padding",t||new ta)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,tQ(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=e.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=s.spatialReference,this._update()}}clone(){return new w9({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};b([S()],$c.prototype,"paddedViewState",void 0),b([S({type:ta})],$c.prototype,"padding",null),b([S()],$c.prototype,"viewpoint",null),$c=w9=b([J("esri.views.2d.PaddedViewState")],$c);const aee=$c;let Ir=class extends je{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Me(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Fp)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Ue({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(a){return void me.getLogger(this).error(new oe("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:a}))}const s=this.viewpoint;d9(s,s,i),this.viewpoint=s}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void me.getLogger(this).error(new oe("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(a){return void me.getLogger(this).error(new oe("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:a}))}const s=this.viewpoint;BX(s,s,i,this.state.size,{constraints:this.constraints}),this.viewpoint=s}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;rQ(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.viewpoint;i7(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){var d;if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,s;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?s=new oe("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(s=new oe("mapview:invalid-viewpoint","geometry not defined"))}catch(y){s=new oe("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:y})}if(s)return void me.getLogger(this).error(s);this._scaleBeforeChangingSpatialReference=null;const a=new po({targetGeometry:new Ue,scale:0,rotation:0});Fn(a,i),(d=this.constraints)==null||d.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this._set("viewpoint",a)}get zoom(){var e;return this.ready?((e=this.constraints)==null?void 0:e.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(e){var a,d;if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const y=this._get("extent");return void(y&&(this._set("extent",void 0),this._set("center",y.center)))}const i=((a=this.constraints)==null?void 0:a.zoomToScale(e))??0;if(!i)return void this._set("zoom",-1);const s=this.viewpoint;i7(s,s,i),this.viewpoint=s,this._set("zoom",((d=this.constraints)==null?void 0:d.scaleToZoom(this.scale))??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:s}=this,a=this._get("center"),d=this._get("extent"),y=this._get("scale"),g=this._get("rotation"),_=this._get("viewpoint"),x=this._get("zoom"),I=x!=null&&s!=null&&s.zoomToScale(x)||void 0;let A,C,N;const j=_==null?void 0:_.rotation,D=_==null?void 0:_.targetGeometry;(D==null?void 0:D.type)==="extent"?A=D:(D==null?void 0:D.type)==="point"&&(C=D,N=_==null?void 0:_.scale);const V=d??A;return{center:a??C??(V==null?void 0:V.center),rotation:g??j,scale:(y??I??N??(V&&np(V,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,s,a){var y;const d=e.targetGeometry;try{this._project(e,s)}catch(g){me.getLogger(this).warn(new Cn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:d.toJSON(),spatialReference:s,error:g})),e.targetGeometry=a||new Ue({x:0,y:0,spatialReference:s})}(y=this.constraints)==null||y.fit(e),this._set("state",new aee({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:s,rotation:a,scale:d}=this.state.paddedViewState,y=new Ue({x:e,y:i,spatialReference:s});this._set("viewpoint",null),this._set("extent",null),this._set("center",y),this._set("zoom",-1),this._set("rotation",a),this._set("scale",d),this._set("state",null)}changeSpatialReference(e){var _;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const x=i.viewpoint.clone();x.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=x}const s=i.clone(),[a,d]=i.center;let y=null;try{y=this._project(new Ue({x:a,y:d,spatialReference:i.spatialReference}),e)}catch(x){g4()||me.getLogger(this).warn(new Cn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:y==null?void 0:y.toJSON(),spatialReference:e,error:x}))}y||(y=new Ue({x:0,y:0,spatialReference:e}));const g=d9(new po({targetGeometry:new Ue,scale:0,rotation:0}),i.viewpoint,y);s.viewpoint=g;try{const I=[i.size[0]/2,i.size[1]/2],A=[I[0]+20,I[1]],C=i.toMap([0,0],A),{x:N,y:j}=this._project(new Ue({x:C[0],y:C[1],spatialReference:i.spatialReference}),e);C[0]=N,C[1]=j,s.toScreen(C,C);const D=eQ(I,C,A),V=Math.hypot(C[0]-I[0],C[1]-I[1])/20;!Number.isFinite(V)||Math.abs(V)>4?(g.rotation=0,g.targetGeometry=new Ue({x:0,y:0,spatialReference:e})):(g.scale*=V,g.scale>le("mapview-srswitch-adjust-rotation-scale-threshold")?g.rotation=0:g.rotation+=Number.isFinite(D)?D:0)}catch{}(_=this._get("constraints"))==null||_.constrain(g,void 0),this._get("state").viewpoint=g}resize(e,i){var y;if(!this.ready)return;const s=this.state;let a=this.state.paddedViewState.viewpoint;const d=this.state.paddedViewState.size.concat();s.size=[e,i],iQ(a,a,d,this.state.paddedViewState.size,this.resizeAlign),a=((y=this.constraints)==null?void 0:y.constrain(a,void 0))??a,this.state.viewpoint=a}toMap(e){if(!this.ready)return null;const i=[0,0],[s,a]=this.state.toMap(i,[e.x,e.y]),d=this.state.spatialReference;return new Ue({x:s,y:a,spatialReference:d})}toScreen(e){if(!this.ready)return null;const i=this._project(e,this.state.spatialReference),s=[i.x,i.y];return this.state.toScreen(s,s),Cr(s[0],s[1])}_project(e,i){var d;const s=e&&e.targetGeometry||e;if(!i)return e;if(!s)return null;if(i.imageCoordinateSystem||(d=s.spatialReference)!=null&&d.imageCoordinateSystem||Ri(i,s.spatialReference))return e;const a=au(s,i);if(!a)throw new oe("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:s,spatialReference:i});return lee(e)?(e.targetGeometry=a,e):a}};function lee(t){return(t==null?void 0:t.declaredClass)==="esri.Viewpoint"}b([S({type:Ue})],Ir.prototype,"center",null),b([S()],Ir.prototype,"constraints",void 0),b([S({type:bt})],Ir.prototype,"extent",null),b([S({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Ir.prototype,"padding",null),b([S()],Ir.prototype,"ready",void 0),b([S()],Ir.prototype,"resizeAlign",void 0),b([S({readOnly:!0})],Ir.prototype,"resolution",null),b([S({type:Number})],Ir.prototype,"rotation",null),b([S({type:Number})],Ir.prototype,"scale",null),b([S({readOnly:!0})],Ir.prototype,"state",void 0),b([S({type:po})],Ir.prototype,"viewpoint",null),b([S()],Ir.prototype,"zoom",null),Ir=b([J("esri.views.2d.ViewStateManager")],Ir);function F4(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let u7=class extends Bi{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,s=>this._handleDoubleClick(s,i))}_handleDoubleClick(e,i){F4(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},uee=class extends Bi{constructor(e,i,s){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",s,a=>this._handleDoubleTapDrag(a))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:s}=i;if(s!==this.pointerType)return;e.stopPropagation();const{action:a,delta:d}=i,{view:y}=this,{mapViewNavigation:g}=y;switch(a){case"begin":{const{scale:_}=y;this._startScale=_,this._currentScale=_,this._previousDelta=d,g.begin();break}case"update":{if(this._previousDelta.y===d.y)return;this._previousDelta=d;const _=1.015**d.y,x=this._startScale*_,I=x/this._currentScale;g.setViewpointImmediate(I),this._currentScale=x;break}case"end":{const{constraints:_}=y,{effectiveLODs:x,snapToZoom:I}=_;if(!I||!x)return void g.end();const A=_.snapScale(this._currentScale),C=(d.y>0?Math.max(A,_.snapToPreviousScale(this._startScale)):Math.min(A,_.snapToNextScale(this._startScale)))/this._currentScale;g.zoom(C);break}}}},Dv=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,s=i.pointers.size;switch(i.action){case"start":this._currentCount=s,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=s,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,s;this._startEvent=e,(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,s;(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,s;(s=(i=this._callbacks).condition)!=null&&s.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},hee=class extends Bi{constructor(e,i,s){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",s,a=>this._handleDrag(a)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new Dv({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&F4(s.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},cee=class extends Bi{constructor(e,i,s){super(!0),this._view=e,this.pointerAction=i;const a=this._view.mapViewNavigation;this._dragEventSeparator=new Dv({start:(d,y)=>{a.rotate.begin(this._view,y.data),y.stopPropagation()},update:(d,y)=>{a.rotate.update(this._view,y.data),y.stopPropagation()},end:(d,y)=>{a.rotate.end(),y.stopPropagation()},condition:(d,y)=>d===1&&F4(y.data,this.pointerAction)}),this.registerIncoming("drag",s,d=>this._dragEventSeparator.handle(d))}};function Zs(t){let e=t*t;return t<0&&(e*=-1),e}function pee(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function dee(t,e,i){const s=i,a=t.state,d=t.device,y=e.tiltDirection==="forward-down"?1:-1,g=1;return d.deviceType==="standard"?(s.translation[0]=Zs(a.axes[0]),s.translation[1]=Zs(a.axes[1]),s.translation[2]=Zs(a.buttons[7])-Zs(a.buttons[6]),s.heading=Zs(a.axes[2]),s.tilt=Zs(a.axes[3])):d.deviceType==="spacemouse"&&(s.translation[0]=1.2*Zs(a.axes[0]),s.translation[1]=1.2*Zs(a.axes[1]),s.translation[2]=2*-Zs(a.axes[2]),s.heading=1.2*Zs(a.axes[5]),s.tilt=1.2*Zs(a.axes[3])),s.tilt*=y,LM(s.translation,s.translation,g),s}function fee(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let yee=class extends Bi{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new ba,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Me(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=dp({update:s=>this._frameUpdate(s.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},vt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,pee(this._transformation)):(this._currentDevice=e.data.device,dee(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(fee(i))return;const s=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,d=mee*a*e;jv(s,s,[i.translation[0]*d,-i.translation[1]*d]);const y=1+i.translation[2]*vee*e,g=this._view.constraints.rotationEnabled?-i.heading*gee*e:0,_=this._view.size,x=[_[0]/2,_[1]];mO(s,s,y,g,x,_);const I=this._view.constraints.constrain(s,this._view.viewpoint);this._view.viewpoint=I}};const gee=.06,mee=.7,vee=6e-4;let bee=class extends Bi{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",s,a=>this._handleKeyUp(a)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const s=this._keyMap[e.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},wee=class extends Bi{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",s,a=>this._handleKeyUp(a)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const s=e.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const a=this._keyToDirection[e.data.key];if(this._pressed=a!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),a){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var Jc;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(Jc||(Jc={}));let _ee=class extends Bi{constructor(e,i,s){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,a=>this._handleKeyDown(a)),i.zoomIn.forEach(a=>this._keysToZoomAction[a]=Jc.IN),i.zoomOut.forEach(a=>this._keysToZoomAction[a]=Jc.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=e.data;if(!(s in this._keysToZoomAction))return;const a=this._keysToZoomAction[s],{mapViewNavigation:d}=this.view;let y=null;switch(a){case Jc.IN:y=d.zoomIn();break;case Jc.OUT:y=d.zoomOut();break;default:return}d.begin(),y.then(()=>d.end()),e.stopPropagation()}};const See=.6;let xee=class extends Bi{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,s=>this._handleMouseWheel(s))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:s,y:a,deltaY:d}=e.data,y=1/See**(1/60*d),g=i.zoom(y,[s,a]);g&&(this._canZoom=!1,g.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},$ee=class extends Bi{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new Dv({start:(s,a)=>{i.pinch.begin(this.view,a.data),a.stopPropagation()},update:(s,a)=>{i.pinch.update(this.view,a.data),a.stopPropagation()},end:(s,a)=>{i.pinch.end(this.view),a.stopPropagation()},condition:s=>s>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function h7(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>Iee(i,t.axisThreshold))}:{buttons:[],axes:[]}}function Tee(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function Mee(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function Iee(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let Eee=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=d=>{this._connectGamepad(d.gamepad)},this._onDisconnectGamepad=d=>{const y=d.gamepad,g=y.index,_=this._inputDevices[g];_&&(this._emitGamepadEvent(y,h7(_),!1),this._inputDevices.splice(g,1),this._latestUpdate.splice(g,1),this._input.gamepad.devices.remove(_),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const s="getGamepads"in window.navigator,a=window.isSecureContext;this.supported=s&&a,this.supported&&(this._forEachGamepad(d=>this._connectGamepad(d)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new E4(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=dp({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),s=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(a=>{const d=this._inputDevices[a.index];if(!d)return;const y=this._latestUpdate[a.index],g=h7(d),_=s||Mee(g);y&&(y.timestamp===a.timestamp||!y.active&&_||Tee(y.state,g))||this._emitGamepadEvent(a,g,!_)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let s=0;s<i.length;s++){const a=i[s];this._validate(a)&&e(a)}}_emitGamepadEvent(e,i,s){const a=this._latestUpdate[e.index],d=a&&a.active;if(!d&&!s)return;const y=!d&&s?"start":d&&s?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:y})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const c7=le("edge"),Aee=le("chrome"),kee=le("ff"),Oee=le("safari"),p7="esri-view-surface",oc={touchNone:`${p7}--touch-none`,touchPan:`${p7}--touch-pan`};let jO=class DO{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Eee(e,this._input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=Kt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const s=this._active[i];this._element.removeEventListener(Z2[i],s),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&Z2[i]){const s=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(Z2[i],s),this._active[i]=s}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?this._setPointerCatpureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?oc.touchNone:oc.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?oc.touchPan:oc.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(oc.touchNone),this._element.classList.remove(oc.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const s=zk(this._element,e);return DO.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),i.x=s.x,i.y=s.y,i}_handleKey(e,i){const s=HY(i);s&&e==="key-up"&&this._keyDownState.delete(s);const a={native:i,key:s,repeat:!!s&&this._keyDownState.has(s)};s&&e==="key-down"&&this._keyDownState.add(a.key),this._callback(e,a)}_handlePointer(e,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,s)}_handlePointerPreventDefault(e,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,s)}_handleMouseWheel(e,i){let s=i.deltaY;switch(i.deltaMode){case 0:c7&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}c7?s*=.7:Aee||Oee?s*=.6:kee&&(s*=1.375);const a=100,d=Math.abs(s);d>a&&(s=s/d*200/(1+Math.exp(-.02*(d-a))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:s});this._callback(e,y)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const s={native:i};i.preventDefault(),this._callback(e,s)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};jO.test={disableSubpixelCoordinates:!1};const Z2={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Cee=class extends Bi{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function z4(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Pee(t,e){const i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}function Nee(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Cr()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[Y,ee]=t,[re,se]=[ee.x-Y.x,ee.y-Y.y];return e.radius=Math.sqrt(re*re+se*se)/2,e.center.x=(Y.x+ee.x)/2,e.center.y=(Y.y+ee.y)/2,e}let i=0,s=0;for(let Y=0;Y<t.length;Y++)i+=t[Y].x,s+=t[Y].y;i/=t.length,s/=t.length;const a=t.map(Y=>Y.x-i),d=t.map(Y=>Y.y-s);let y=0,g=0,_=0,x=0,I=0,A=0,C=0;for(let Y=0;Y<a.length;Y++){const ee=a[Y],re=d[Y],se=ee*ee,ue=re*re;y+=se,g+=ue,_+=ee*re,x+=se*ee,I+=ue*re,A+=ee*ue,C+=re*se}const N=.5*(x+A),j=.5*(I+C),D=y*g-_*_,V=(N*g-j*_)/D,W=(y*j-_*N)/D,K=Cr(V+i,W+s);return{radius:Math.sqrt(V*V+W*W+(y+g)/t.length),center:K}}function wh(t){const{native:e}=t,{pointerId:i,button:s,pointerType:a}=e;return a==="mouse"?`${i}:${s}`:`${a}`}const js={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let Lee=class extends Bi{constructor(e=js.maximumDoubleClickDelay,i=js.maximumDoubleClickDistance,s=js.maximumDoubleTouchDelay,a=js.maximumDoubleTouchDistance,d=Mp){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=a,this._clock=d,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=li(e.doubleClickTimer))}get hasPendingInputs(){return lv(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const s=this._pointerState.get(e);s&&(s.doubleClickTimer=li(s.doubleClickTimer),i&&this._click.emit(s.event.data,void 0,s.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:s,button:a}=e.native;return s==="mouse"?`${i}:${a}`:`${s}`}_handleImmediateClick(e){const i=e.data,{pointerType:s}=i.native,a=this._getPointerId(i);if(!this._pointerState.has(a))return void this._startClick(e);const d=this._pointerState.get(a),{data:y,modifiers:g}=d.event,_=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;z4(y,i)>_?(this._clearDoubleClickTimer(a,!0),this._startClick(e)):(this._clearDoubleClickTimer(a,!1),d.pointerDownCount===2&&this._doubleClick.emit(y,void 0,g))}_handlePointerDown(e){const i=wh(e.data),s=this._pointerState.get(i);s&&(s.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:s}}=i,a=wh(i),d=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(a),d),g=1;this._pointerState.set(a,{event:e,doubleClickTimer:y,pointerDownCount:g}),this.refreshHasPendingInputs()}},Ree=class extends Bi{constructor(e=js.maximumDoubleClickDelay,i=js.maximumDoubleClickDistance,s=js.maximumDoubleTouchDelay,a=js.maximumDoubleTouchDistance,d=Mp){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=a,this._clock=d,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Cr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Dv({start:(y,g)=>this._dragStart(y,g),update:(y,g)=>this._dragUpdate(g),end:(y,g)=>this._dragEnd(g)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=li(e.doubleTapTimeout)})}get hasPendingInputs(){return lv(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=li(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,s){const{button:a,buttons:d,pointer:y,pointers:g,pointerType:_,timestamp:x}=s;return{action:e,delta:i,button:a,buttons:d,pointer:y,pointers:g,pointerType:_,timestamp:x}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:a}=i,{center:d}=s;this._dragStartCenter=d;const y=this._createDoubleTapDragData("begin",Cr(0,0),s);this._doubleTapDrag.emit(y,void 0,a),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=e,{center:a}=i,d=Cr(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",d,i);this._doubleTapDrag.emit(y,void 0,s),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=e,{center:a}=i,d=Cr(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",d,i);this._doubleTapDrag.emit(y,void 0,s),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,s=wh(i),a=this._pointerState.get(s),{pointerType:d}=i.native;if(a){const y=d==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(s),z4(a.event.data,i)>y?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:s}=i.native,a=wh(i),d=s==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(a),d);this._pointerState.set(a,{event:e,doubleTapTimeout:y}),this.refreshHasPendingInputs()}},jee=class extends Bi{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,s,a){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:a,pointers:Dee(this._activePointerMap),pointer:i,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(e){const i=e.native.pointerId,s=G1(this._activePointerMap).angle,a={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,a);const d=Xy(a,FO(this._activePointerMap));a.initialAngle=d,a.lastAngle=d,this._updatePointerAngles(s)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,s=this._activePointerMap.get(i);s?s.event=e:this._addPointer(e)}_removePointer(e){const i=G1(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=G1(this._activePointerMap);this._activePointerMap.forEach(s=>{s.initialAngle=Xy(s,i)-e,s.lastAngle=Xy(s,i)-e})}_emitEvent(e,i,s){const a=G1(this._activePointerMap);this._drag.emit(this._createPayload(e,i,a,s),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,s=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,s),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,s=i.currentEvent,a=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this._isCurrentDragSuppressed&&this._emitEvent("update",s,a)):(this._addPointer(s),this._emitEvent("added",s,a),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(s),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",s,a))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function FO(t){const e=[];return t.forEach(i=>{e.push(Cr(i.event.x,i.event.y))}),Nee(e)}function G1(t){const e=FO(t);let i=0;return t.forEach(s=>{let a=Xy(s,e),d=a-s.lastAngle;for(;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;a=s.lastAngle+d,s.lastAngle=a;const y=a-s.initialAngle;i+=y}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function Dee(t){const e=new Map;return t.forEach((i,s)=>e.set(s,i.event)),e}function Xy(t,e){const i=t.event,s=i.x-e.center.x,a=i.y-e.center.y;return Math.atan2(a,s)}var d7;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(d7||(d7={}));let Fee=class extends Bi{constructor(e=js.maximumDoubleClickDelay,i=js.maximumDoubleClickDistance,s=js.maximumDoubleTouchDelay,a=js.maximumDoubleTouchDistance,d=Mp){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=s,this._maximumDoubleTouchDistance=a,this._clock=d,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,s=wh(i);if(!this._pointerState.has(s)){const a={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(s,a),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,s=wh(i),a=this._pointerState.get(s);if(a&&a.downButton===i.native.button){const d=a.immediateDoubleClick;if(d){d.timeoutHandle.remove();const y=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;z4(d,e.data)>y?this._startImmediateDoubleClick(e,a):(this._immediateDoubleClick.emit(e.data,void 0,d.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,a)}}_startImmediateDoubleClick(e,i){const s=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),s)}}_removeState(e){const i=wh(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const p0={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let zee=class extends Bi{constructor(e=p0.maximumClickDelay,i=p0.movementUntilMouseDrag,s=p0.movementUntilPenDrag,a=p0.movementUntilTouchDrag,d=p0.holdDelay,y=Mp){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=s,this._movementUntilTouchDrag=a,this._holdDelay=d,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",g=>{this._handlePointerLoss(g,"pointer-up")}),this.registerIncoming("pointer-capture-lost",g=>{this._handlePointerLoss(g,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",g=>{this._handlePointerLoss(g,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=li(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,s=i.native.pointerId;let a=null;this._pointerState.size===0&&(a=this._clock.setTimeout(()=>{const y=this._pointerState.get(s);if(y){if(!y.isDragging){const g=y.previousEvent;this._pointerHold.emit(g,void 0,e.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this._holdDelay));const d={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(s,d),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,s){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:s}}_handlePointerMove(e){const i=e.data,s=i.native.pointerId,a=this._pointerState.get(s);a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,i),void 0,a.modifiers):Pee(i,a.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),a.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,s=i.native.pointerId;this._pointerState.forEach(a=>{a.holdTimeout!=null&&(a.holdTimeout.remove(),a.holdTimeout=null),a.isDragging||(a.modifiers=e.modifiers,a.isDragging=!0,s===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,i)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const s=e.data,a=s.native.pointerId,d=this._pointerState.get(a);d&&(d.holdTimeout!=null&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,i==="pointer-up"?s:d.previousEvent),void 0,d.modifiers):i==="pointer-up"&&d.downButton===s.native.button&&e.timestamp-d.startTimestamp<=this._maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(a),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}};const U1={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Du=class extends je{constructor(){super(...arguments),this._handles=new ba}initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([Jl(()=>!e(),()=>this._disconnect()),Jl(e,()=>this._connect())])}destroy(){this._handles=Kt(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Kt(this._inputManager)}_connect(){const e=this.view.surface,i=new jO(e,this.view.input),s=[new Fee,new zee,new Lee,new jee(this.view.navigation),new Ree],a=new Ms({eventSource:i,recognizers:s});a.installHandlers("prevent-context-menu",[new Cee],Gl.INTERNAL),a.installHandlers("navigation",[new $ee(this.view),new yee(this.view),new xee(this.view),new u7(this.view),new u7(this.view,[U1.counter]),new hee(this.view,"primary"),new bee(this.view,U1.pan),new _ee(this.view,U1.zoom),new wee(this.view,U1.rotate),new cee(this.view,"secondary"),new uee(this.view,"touch")],Gl.INTERNAL),this.view.viewEvents.connect(a),this._source=i,this._inputManager=a,Me(()=>{var d,y;return(y=(d=this.view)==null?void 0:d.navigation)==null?void 0:y.browserTouchPanEnabled},d=>{this._source&&(this._source.browserTouchPanningEnabled=!d)},vt)}get test(){return{inputManager:this._inputManager}}};b([S()],Du.prototype,"view",void 0),b([S()],Du.prototype,"latestPointerType",null),b([S()],Du.prototype,"latestPointerLocation",null),b([S()],Du.prototype,"multiTouchActive",null),Du=b([J("esri.views.2d.input.MapViewInputManager")],Du);const Vee=Du;var Q1e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f7,y7,g7,_9={exports:{}};_9.exports,f7=_9,y7=function(){function t(a,d,y,g,_){e(a,d,y||0,g||a.length-1,_||s)}function e(a,d,y,g,_){for(;g>y;){if(g-y>600){var x=g-y+1,I=d-y+1,A=Math.log(x),C=.5*Math.exp(2*A/3),N=.5*Math.sqrt(A*C*(x-C)/x)*(I-x/2<0?-1:1);e(a,d,Math.max(y,Math.floor(d-I*C/x+N)),Math.min(g,Math.floor(d+(x-I)*C/x+N)),_)}var j=a[d],D=y,V=g;for(i(a,y,d),_(a[g],j)>0&&i(a,y,g);D<V;){for(i(a,D,V),D++,V--;_(a[D],j)<0;)D++;for(;_(a[V],j)>0;)V--}_(a[y],j)===0?i(a,y,V):i(a,++V,g),V<=d&&(y=V+1),d<=V&&(g=V-1)}}function i(a,d,y){var g=a[d];a[d]=a[y],a[y]=g}function s(a,d){return a<d?-1:a>d?1:0}return t},(g7=y7())!==void 0&&(f7.exports=g7);const Gee=zO(_9.exports);function Im(t,e){if(!(this instanceof Im))return new Im(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function Uee(t,e,i){if(!i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(t,e[s]))return s;return-1}function ac(t,e){Q0(t,0,t.children.length,e,t)}function Q0(t,e,i,s,a){a||(a=Tc(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var d,y=e;y<i;y++)d=t.children[y],ed(a,t.leaf?s(d):d);return a}function ed(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function m7(t,e){return t.minX-e.minX}function v7(t,e){return t.minY-e.minY}function X2(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function q1(t){return t.maxX-t.minX+(t.maxY-t.minY)}function qee(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Bee(t,e){var i=Math.max(t.minX,e.minX),s=Math.max(t.minY,e.minY),a=Math.min(t.maxX,e.maxX),d=Math.min(t.maxY,e.maxY);return Math.max(0,a-i)*Math.max(0,d-s)}function Q2(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function B1(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Tc(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b7(t,e,i,s,a){for(var d,y=[e,i];y.length;)(i=y.pop())-(e=y.pop())<=s||(d=e+Math.ceil((i-e)/s/2)*s,Gee(t,d,e,i,a),y.push(e,d,d,i))}Im.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],s=this.toBBox;if(!B1(t,e))return i;for(var a,d,y,g,_=[];e;){for(a=0,d=e.children.length;a<d;a++)y=e.children[a],B1(t,g=e.leaf?s(y):y)&&(e.leaf?i.push(y):Q2(t,g)?this._all(y,i):_.push(y));e=_.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!B1(t,e))return!1;for(var s,a,d,y,g=[];e;){for(s=0,a=e.children.length;s<a;s++)if(d=e.children[s],B1(t,y=e.leaf?i(d):d)){if(e.leaf||Q2(t,y))return!0;g.push(d)}e=g.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var s=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var a=this.data;this.data=s,s=a}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Tc([]),this},remove:function(t,e){if(!t)return this;for(var i,s,a,d,y=this.data,g=this.toBBox(t),_=[],x=[];y||_.length;){if(y||(y=_.pop(),s=_[_.length-1],i=x.pop(),d=!0),y.leaf&&(a=Uee(t,y.children,e))!==-1)return y.children.splice(a,1),_.push(y),this._condense(_),this;d||y.leaf||!Q2(y,g)?s?(i++,y=s.children[i],d=!1):y=null:(_.push(y),x.push(i),i=0,s=y,y=y.children[0])}return this},toBBox:function(t){return t},compareMinX:m7,compareMinY:v7,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,s){var a,d=i-e+1,y=this._maxEntries;if(d<=y)return ac(a=Tc(t.slice(e,i+1)),this.toBBox),a;s||(s=Math.ceil(Math.log(d)/Math.log(y)),y=Math.ceil(d/Math.pow(y,s-1))),(a=Tc([])).leaf=!1,a.height=s;var g,_,x,I,A=Math.ceil(d/y),C=A*Math.ceil(Math.sqrt(y));for(b7(t,e,i,C,this.compareMinX),g=e;g<=i;g+=C)for(b7(t,g,x=Math.min(g+C-1,i),A,this.compareMinY),_=g;_<=x;_+=A)I=Math.min(_+A-1,x),a.children.push(this._build(t,_,I,s-1));return ac(a,this.toBBox),a},_chooseSubtree:function(t,e,i,s){for(var a,d,y,g,_,x,I,A;s.push(e),!e.leaf&&s.length-1!==i;){for(I=A=1/0,a=0,d=e.children.length;a<d;a++)_=X2(y=e.children[a]),(x=qee(t,y)-_)<A?(A=x,I=_<I?_:I,g=y):x===A&&_<I&&(I=_,g=y);e=g||e.children[0]}return e},_insert:function(t,e,i){var s=this.toBBox,a=i?t:s(t),d=[],y=this._chooseSubtree(a,this.data,e,d);for(y.children.push(t),ed(y,a);e>=0&&d[e].children.length>this._maxEntries;)this._split(d,e),e--;this._adjustParentBBoxes(a,d,e)},_split:function(t,e){var i=t[e],s=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,s);var d=this._chooseSplitIndex(i,a,s),y=Tc(i.children.splice(d,i.children.length-d));y.height=i.height,y.leaf=i.leaf,ac(i,this.toBBox),ac(y,this.toBBox),e?t[e-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(t,e){this.data=Tc([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ac(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var s,a,d,y,g,_,x,I;for(_=x=1/0,s=e;s<=i-e;s++)y=Bee(a=Q0(t,0,s,this.toBBox),d=Q0(t,s,i,this.toBBox)),g=X2(a)+X2(d),y<_?(_=y,I=s,x=g<x?g:x):y===_&&g<x&&(x=g,I=s);return I},_chooseSplitAxis:function(t,e,i){var s=t.leaf?this.compareMinX:m7,a=t.leaf?this.compareMinY:v7;this._allDistMargin(t,e,i,s)<this._allDistMargin(t,e,i,a)&&t.children.sort(s)},_allDistMargin:function(t,e,i,s){t.children.sort(s);var a,d,y=this.toBBox,g=Q0(t,0,e,y),_=Q0(t,i-e,i,y),x=q1(g)+q1(_);for(a=e;a<i-e;a++)d=t.children[a],ed(g,t.leaf?y(d):d),x+=q1(g);for(a=i-e-1;a>=e;a--)d=t.children[a],ed(_,t.leaf?y(d):d),x+=q1(_);return x},_adjustParentBBoxes:function(t,e,i){for(var s=i;s>=0;s--)ed(e[s],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():ac(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var S9;const w7=new Nt({upperLeft:"upper-left",lowerLeft:"lower-left"});let Fu=S9=class extends ye{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new S9(ae({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};b([S({type:bt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Fu.prototype,"extent",void 0),b([S({type:["view","edit"],json:{write:!0}})],Fu.prototype,"mode",void 0),b([S({type:String,json:{read:w7.read,write:w7.write}})],Fu.prototype,"originPosition",void 0),b([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Fu.prototype,"tolerance",void 0),Fu=S9=b([J("esri.rest.support.QuantizationParameters")],Fu);const VO=Fu;let _7=class GO{constructor(e,i){this.key=new jh(0,0,0,0),this.bounds=mo(),this.objectIds=new Set,this.key.set(i);const s=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level}get id(){return this.key.id}get extent(){return bt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=kr.acquire();for(let s=0;s<e.length;s++)i[s]=new GO(this.tileInfoView,e[s]);return i}getQuantizationParameters(){return VO.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const fu={added:[],removed:[]},eb=new Set,Hee=new jh(0,0,0,0);let Wee=class extends _a{constructor(e){super(),this._tiles=new Map,this._index=Im(9,le("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const a=new _7(this.tileScheme,s);this._tiles.set(s,a),this._index.insert(a),i.added.push(a)}for(const s of e.removed)if(this.has(s)){const a=this.get(s);this._tiles.delete(s),this._index.remove(a),i.removed.push(a)}this.tiles.length=0,this._tiles.forEach(s=>this.tiles.push(s)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:s,lodInfo:a}=i,{level:d}=a;if(s.length>0)for(const{row:y,colFrom:g,colTo:_}of s)for(let x=g;x<=_;x++){const I=Hee.set(d,y,a.normalizeCol(x),a.getWorldForColumn(x)).id;if(eb.add(I),!this.has(I)){const A=new _7(this.tileScheme,I);this._tiles.set(I,A),this._index.insert(A),this.tiles.push(A),fu.added.push(A)}}for(let y=this.tiles.length-1;y>=0;y--){const g=this.tiles[y];eb.has(g.id)||(this._tiles.delete(g.id),this.tiles.splice(y,1),this._index.remove(g),fu.removed.push(g))}(fu.added.length||fu.removed.length)&&this.emit("update",fu),gf.pool.release(i),eb.clear(),fu.added.length=0,fu.removed.length=0}},zu=class extends je{constructor(){super(...arguments),this.color=new et([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};b([S({type:et})],zu.prototype,"color",void 0),b([S({type:et})],zu.prototype,"haloColor",void 0),b([S()],zu.prototype,"haloOpacity",void 0),b([S()],zu.prototype,"fillOpacity",void 0),zu=b([J("esri.views.2d.support.HighlightOptions")],zu);const UO=zu,Jee=t=>t.includes("Brush");let qO=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Jee(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function Kee(t,e,i,s,a,d,y,g){t.ignorePadding&&(s={left:0,right:0,top:0,bottom:0});let _=null;t.width!=null&&t.height!=null?_=[t.width,t.height]:t.width==null&&t.height!=null?_=[t.height,t.height]:t.width!=null&&t.height==null?_=[t.width,t.width]:t.width==null&&t.height==null&&(_=null);const x=i[0]-(s.left+s.right),I=i[1]-(s.top+s.bottom);let A,C,N=t.area||{x:0,y:0,width:x,height:I};if(_){const j=x/I,D=_[0]/_[1];if(D>j){const V=N.width/D;N={x:N.x,y:Math.round(N.y+(N.height-V)/2),width:N.width,height:Math.round(V)}}else{const V=N.height*D;N={x:Math.round(N.x+(N.width-V)/2),y:N.y,width:Math.round(V),height:N.height}}}else _=[N.width,N.height];return _[0]>N.width?(A=Math.min(_[0]/N.width,e),C=_[0]/N.width/A):(A=1,C=_[0]/N.width),{resolutionScale:A,cropArea:{x:Math.round((N.x+s.left)*A),y:Math.round((N.y+s.top)*A),width:Math.round(N.width*A),height:Math.round(N.height*A)},outputScale:C,format:a,quality:d,children:y,rotation:g}}function Yee(t,e,i){const{ctx:s,canvas:a}=BO(t,i),d=s.getImageData(0,0,t.width,t.height),y=Qee(a,e);return HO(a),{dataUrl:y,data:d}}function Zee(t,e){const{ctx:i,canvas:s}=BO(t,e),a=i.getImageData(0,0,t.width,t.height);return HO(s),a}function BO(t,e){const i=Xee();e.premultipliedAlpha&&ste(t),i.width=t.width,i.height=t.height;const s=i.getContext("2d",{willReadFrequently:!0});return s.putImageData(t,0,0),e.flipY&&rte(s),{ctx:s,canvas:i}}function HO(t){t.width=0,t.height=0}function Xee(){return tb==null&&(tb=document.createElement("canvas")),tb}let tb=null;function Qee(t,e){const i=nte[e.format],s=e.quality/100;return t.toDataURL(i,s)}function ete(t,e){const i=ite(t),s=ate[i];return{format:i,quality:zs(e??s,0,100)}}function tte(t,e){return e/Math.max(t[0],t[1])}function rye(t,e,i,s=0,a=0,d=t.width-s,y=t.height-a,g=!1){const{data:_}=t,{width:x,height:I,data:A}=e,C=d/x,N=y/I,j=Math.ceil(C/2),D=Math.ceil(N/2),V=t.width;for(let W=0;W<I;W++)for(let K=0;K<x;K++){const Y=4*(K+(g?I-W-1:W)*x);let ee=0,re=0,se=0,ue=0,de=0,we=0;const Oe=(W+.5)*N;for(let Ne=Math.floor(W*N);Ne<(W+1)*N;Ne++){const Le=Math.abs(Oe-(Ne+.5))/D,Be=(K+.5)*C,Pe=Le*Le;for(let dt=Math.floor(K*C);dt<(K+1)*C;dt++){const hi=Math.abs(Be-(dt+.5))/j,kt=Math.sqrt(Pe+hi*hi);if(kt>=1)continue;let at=2*kt*kt*kt-3*kt*kt+1;const er=4*(s+dt+(a+Ne)*V);we+=at*_[er+3],re+=at,!i&&_[er+3]<255&&(at=at*_[er+3]/255),se+=at*_[er],ue+=at*_[er+1],de+=at*_[er+2],ee+=at}}A[Y]=se/ee,A[Y+1]=ue/ee,A[Y+2]=de/ee,A[Y+3]=we/re}return e}function ite(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return ote}}function rte(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function ste(t){const e=t.data,i=e.length;for(let s=0;s<i;s+=4){const a=e[s+3];if(a!==255&&a>0){const d=255/a;e[s]=e[s]*d,e[s+1]=e[s+1]*d,e[s+2]=e[s+2]*d}}}const nte={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},S7=98,ote="png",ate={png:100,jpg:S7,jpeg:S7};var Li;function x9(t,e,i={}){const s=e===Li.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const a of s){const d=t.getContext(a,i);if(d)return d}return null}function sye(t,e,i={}){const s=WO(t);for(const a of s){const d=x9(e,a,i);if(d)return d}return null}function WO(t){if(t==="3d")return[Li.WEBGL2];const e=le("esri-force-webgl");return e===Li.WEBGL1||e===Li.WEBGL2?[e]:le("mac")&&le("chrome")?[Li.WEBGL1,Li.WEBGL2]:[Li.WEBGL2,Li.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(Li||(Li={}));let ib,rb;function lte(t){const e=WO(t);for(;e.length>1;){const i=x7(e.shift());if(i.available)return i}return x7(e.shift())}function x7(t){switch(t){case Li.WEBGL1:return ute();case Li.WEBGL2:return hte()}}function ute(){return ib||(ib=dte()),ib}function hte(){return rb||(rb=fte()),rb}let JO=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},cte=class extends JO{constructor(){super(...arguments),this.type=Li.WEBGL1}},pte=class extends JO{constructor(){super(...arguments),this.type=Li.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function KO(t,e){if(t===Li.WEBGL1&&typeof WebGLRenderingContext>"u"||t===Li.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let s=x9(i,t,{failIfMajorPerformanceCaveat:!0});if(s==null&&(s=x9(i,t),s!=null&&(e.majorPerformanceCaveat=!0)),s==null)return s;if(t===Li.WEBGL1){const d=s.getParameter(s.VERSION),y=d==null?void 0:d.match(/^WebGL\s+([\d.]*)/);if(y){const g=parseFloat(y[1]);e.available=g>=.94}}else e.available=!0;e.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const a=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return a&&(e.supportsHighPrecisionFragment=a.precision>0),s}function dte(){const t=new cte,e=KO(Li.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function fte(){const t=new pte,e=KO(Li.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function yte(t){const e=lte(t);if(!e.available)return new oe("webgl:required",t==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(t==="3d"&&e.majorPerformanceCaveat)return new oe("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new oe("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new oe("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Li.WEBGL1){if(!e.supportsElementIndexUint)return new oe("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new oe("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new oe("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function gte(t){return t&&"nodeType"in t}function mte(t){return t&&typeof t.render=="function"}const $7={component:"esri-component"};let Vu=class extends je{constructor(){super(...arguments),this.widget=null}destroy(){var e;this.node=null,(e=this.widget)==null||e.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add($7.component),i&&i.classList.remove($7.component),this._set("node",e))}castNode(e){var i;return(i=this.widget)==null||i.destroy(),e?typeof e=="string"||gte(e)?(this._set("widget",null),x4(e)):(mte(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};b([S({dependsOn:[]})],Vu.prototype,"id",null),b([S()],Vu.prototype,"node",null),b([Ft("node")],Vu.prototype,"castNode",null),b([S({readOnly:!0})],Vu.prototype,"widget",void 0),Vu=b([J("esri.views.ui.Component")],Vu);const Qy=Vu,YO="calcite-mode-";function vte(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function bte(){return vte().startsWith("dark")}function wte(){return`${YO}${bte()?"dark":"light"}`}function _te(t){Ste(t),t.classList.add(wte())}function Ste(t){Array.from(t.classList).forEach(e=>{e.startsWith(YO)&&t.classList.remove(e)})}const xte={left:0,top:0,bottom:0,right:0},ZO={bottom:30,top:15,right:15,left:15},Ao="esri-ui",Lr={ui:Ao,corner:`${Ao}-corner`,innerContainer:`${Ao}-inner-container`,manualContainer:`${Ao}-manual-container`,cornerContainer:`${Ao}-corner-container`,topLeft:`${Ao}-top-left`,topRight:`${Ao}-top-right`,bottomLeft:`${Ao}-bottom-left`,bottomRight:`${Ao}-bottom-right`};function $te(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function H1(t){return t===0?"0":`${t}px`}function sb(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function nb(t,{top:e,bottom:i,left:s,right:a}){t.style.top=e,t.style.bottom=i,t.style.left=s,t.style.right=a}let ro=class extends _a.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=En(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&nb(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&nb(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Me(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,vt),Me(()=>this.padding,this._applyUIPadding,vt),Me(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},vt),S5(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Lr.ui),_te(e),this._attachContainers(e)),i&&(i.classList.remove(Lr.ui),nb(i,{top:"",bottom:"",left:"",right:""}),lk(i)),this._set("container",e))}get height(){var d;const e=((d=this.view)==null?void 0:d.height)??0;if(e===0)return e;const i=this._getViewPadding(),{top:s,bottom:a}=i;return Math.max(e-s-a,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...ZO,...e}}get width(){var d;const e=((d=this.view)==null?void 0:d.width)??0;if(e===0)return e;const i=this._getViewPadding(),{left:s,right:a}=i;return Math.max(e-s-a,0)}add(e,i){let s,a,d;if(Array.isArray(e))return void e.forEach(g=>this.add(g,i));const y=sb(e);y&&({index:s,position:i,component:e,key:a}=y),i&&typeof i=="object"&&({index:s,key:a,position:i,internal:d}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,s,a,d)}remove(e,i){var a;if(!e)return;if(Array.isArray(e))return e.map(d=>this.remove(d,i));const s=this._find(e);if(s){if(this._componentMap.has(e)&&((a=this._componentMap.get(e))==null?void 0:a.key)!==i)return;const d=this._components.indexOf(s),y=s.node.parentNode;return y==null||y.removeChild(s.node),this._componentMap.delete(e),this._components.splice(d,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const d of e)this.empty(d,i);return}const s=this._positionNameToContainerLookup[e??"manual"],a=Array.prototype.slice.call(s.children).map(d=>this._findByNode(d)).filter(d=>{var y;return d==null?!1:!(((y=this._componentMap.get(d))==null?void 0:y.internal)??!1)||i.removeInternal});for(const d of a)this.remove(d)}move(e,i){if(Array.isArray(e)&&e.forEach(y=>this.move(y,i)),!e)return;let s;const a=sb(e)||sb(i);if(a&&(s=a.index,i=a.position,e=a.component||e),i&&!this._isValidPosition(i))return;const d=this.remove(e);d&&this.add(d,{position:i,index:s})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.map(s=>this._getComponentsAtPosition(s,i)).flat():this._getComponentsAtPosition(e,i):this._components.filter(s=>{var a;return i.includeInternal||!((a=this._componentMap.get(s))!=null&&a.internal)}).map(({widget:s,node:a})=>s??a)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,s,a,d){e instanceof Qy||(e=new Qy({node:e})),this._place({component:e,position:i,index:s}),this._components.push(e),this._componentMap.set(e,{key:a,internal:d})}_find(e){return e?e instanceof Qy?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){var e;return((e=this.view)==null?void 0:e.padding)??xte}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Lr.innerContainer,Lr.cornerContainer);const i=document.createElement("div");i.classList.add(Lr.innerContainer,Lr.manualContainer);const s=document.createElement("div");s.classList.add(Lr.topLeft,Lr.corner),e.appendChild(s);const a=document.createElement("div");a.classList.add(Lr.topRight,Lr.corner),e.appendChild(a);const d=document.createElement("div");d.classList.add(Lr.bottomLeft,Lr.corner),e.appendChild(d);const y=document.createElement("div");y.classList.add(Lr.bottomRight,Lr.corner),e.appendChild(y),this._innerContainer=e,this._manualContainer=i;const g=$Y();this._cornerNameToContainerLookup={"top-left":s,"top-right":a,"bottom-left":d,"bottom-right":y,"top-leading":g?a:s,"top-trailing":g?s:a,"bottom-leading":g?y:d,"bottom-trailing":g?d:y},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:s,index:a}=e,d=this._positionNameToContainerLookup[i],y=a!=null&&a>-1;if($te(s.widget)&&s.widget.startup(),!y)return void d.appendChild(s.node);const g=Array.from(d.children);if(a===0)return void(d.firstChild?vx(s.node,d.firstChild):d.appendChild(s.node));a>=g.length?d.appendChild(s.node):vx(s.node,g[a])}_toPixelPosition(e){return{top:H1(e.top),left:H1(e.left),right:H1(e.right),bottom:H1(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return this._components.find(({node:i})=>i===e)??null}_getComponentsAtPosition(e,i){const s=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(s.children).map(a=>this._findByNode(a)).filter(ho).filter(a=>{var d;return i.includeInternal||!((d=this._componentMap.get(a))!=null&&d.internal)}).map(({widget:a,node:d})=>a??d)}};b([S()],ro.prototype,"_locale",void 0),b([S()],ro.prototype,"container",null),b([S()],ro.prototype,"height",null),b([S({value:ZO})],ro.prototype,"padding",null),b([Ft("padding")],ro.prototype,"castPadding",null),b([S()],ro.prototype,"view",void 0),b([S()],ro.prototype,"width",null),ro=b([J("esri.views.ui.UI")],ro);const Tte=ro,Mte="randomUUID"in crypto;function XO(){if(Mte)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function hye(){return`{${XO()}}`}const Ite={handleInterceptedEvent:(t,e,i,s)=>(t.scheduleRender(),e.properties[`on${s.type}`].apply(e.properties.bind||i,[s]))},Ete={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},Ate=t=>({...Ete,...t}),kte=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},Ote=(t,e)=>t.find(e),T7=(t,e,i=!1)=>{let s=t;return e.forEach((a,d)=>{const y=s!=null&&s.children?Ote(s.children,g=>g.domNode===a):void 0;i&&!y&&d!==e.length-1||(s=y)}),s},Cte=t=>{let e;const i={...Ite,...t},s=Ate(i),a=s.performanceLogger;let d,y=!0,g=!1;const _=[],x=[],I=(C,N,j)=>{var W;let D;s.eventHandlerInterceptor=(K,Y,ee,re)=>function(se){let ue;a("domEvent",se);const de=kte(se.currentTarget,D.domNode),we=de.some(Ne=>{var Le;return customElements.get((Le=Ne==null?void 0:Ne.tagName)==null?void 0:Le.toLowerCase())});if(se.eventPhase===Event.CAPTURING_PHASE||!we)de.reverse(),ue=T7(D.getLastRender(),de);else{const Ne=se.composedPath(),Le=Ne.slice(Ne.indexOf(se.currentTarget),Ne.indexOf(D.domNode)).filter(Be=>Be.getRootNode()===Be.ownerDocument).reverse();ue=T7(D.getLastRender(),Le,!0)}let Oe;return ue&&(Oe=i.handleInterceptedEvent(e,ue,this,se)),a("domEventProcessed",se),Oe},(W=i.postProcessProjectionOptions)==null||W.call(i,s);const V=j();D=C(N,V,s),_.push(D),x.push(j),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(D,V)};let A=()=>{if(d=void 0,y){y=!1,a("renderStart",void 0);for(let C=0;C<_.length;C++){const N=x[C]();a("rendered",void 0),_[C].update(N),a("patched",void 0)}a("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(A=i.modifyDoRenderImplementation(A,_,x)),e={renderNow:A,scheduleRender:()=>{d||g||(d=requestAnimationFrame(A))},stop:()=>{d&&(cancelAnimationFrame(d),d=void 0),g=!0},resume:()=>{g=!1,y=!0,e.scheduleRender()},append:(C,N)=>{I(Dl.append,C,N)},insertBefore:(C,N)=>{I(Dl.insertBefore,C,N)},merge:(C,N)=>{I(Dl.merge,C,N)},replace:(C,N)=>{I(Dl.replace,C,N)},detach:C=>{for(let N=0;N<x.length;N++)if(x[N]===C)return x.splice(N,1),_.splice(N,1)[0];throw new Error("renderFunction was not found")}},e},Mc={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Ic,QO,Fv,eC=!1,Em=!1,V4=!1,rs=!1,M7=null,$9=!1;const Pte=t=>{const e=new URL(t,Qi.$resourcesUrl$);return e.origin!==Jf.location.origin?e.href:e.pathname},Nte=t=>Qi.$resourcesUrl$=t,Dh=(t,e="")=>()=>{},I7="http://www.w3.org/1999/xlink",E7={},Lte="http://www.w3.org/2000/svg",Rte="http://www.w3.org/1999/xhtml",jte=t=>t!=null,G4=t=>(t=typeof t,t==="object"||t==="function");function Dte(t){var e,i,s;return(s=(i=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||i===void 0?void 0:i.getAttribute("content"))!==null&&s!==void 0?s:void 0}const tC=(t,e,...i)=>{let s=null,a=null,d=null,y=!1,g=!1;const _=[],x=A=>{for(let C=0;C<A.length;C++)s=A[C],Array.isArray(s)?x(s):s!=null&&typeof s!="boolean"&&((y=typeof t!="function"&&!G4(s))&&(s=String(s)),y&&g?_[_.length-1].$text$+=s:_.push(y?Am(null,s):s),g=y)};if(x(i),e){e.key&&(a=e.key),e.name&&(d=e.name);{const A=e.className||e.class;A&&(e.class=typeof A!="object"?A:Object.keys(A).filter(C=>A[C]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,_,Vte);const I=Am(t,null);return I.$attrs$=e,_.length>0&&(I.$children$=_),I.$key$=a,I.$name$=d,I},Am=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Fte={},zte=t=>t&&t.$tag$===Fte,Vte={forEach:(t,e)=>t.map(A7).forEach(e),map:(t,e)=>t.map(A7).map(e).map(Gte)},A7=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Gte=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),tC(t.vtag,i,...t.vchildren||[])}const e=Am(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Ute=t=>gie.map(e=>e(t)).find(e=>!!e),qte=(t,e)=>t!=null&&!G4(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Bte=t=>t,cye=(t,e,i)=>{const s=Bte(t);return{emit:a=>Hte(s,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:a})}},Hte=(t,e,i)=>{const s=Qi.ce(e,i);return t.dispatchEvent(s),s},k7=new WeakMap,Wte=(t,e,i)=>{let s=Om.get(t);bie&&i?(s=s||new CSSStyleSheet,typeof s=="string"?s=e:s.replaceSync(e)):s=e,Om.set(t,s)},Jte=(t,e,i,s)=>{var a;let d=iC(e,i);const y=Om.get(d);if(t=t.nodeType===11?t:kn,y)if(typeof y=="string"){t=t.head||t;let g=k7.get(t),_;if(g||k7.set(t,g=new Set),!g.has(d)){{_=kn.createElement("style"),_.innerHTML=y;const x=(a=Qi.$nonce$)!==null&&a!==void 0?a:Dte(kn);x!=null&&_.setAttribute("nonce",x),t.insertBefore(_,t.querySelector("link"))}g&&g.add(d)}}else t.adoptedStyleSheets.includes(y)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,y]);return d},Kte=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,s=e.$flags$,a=Dh("attachStyles",e.$tagName$),d=Jte(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);s&10&&(i["s-sc"]=d,i.classList.add(d+"-h"),s&2&&i.classList.add(d+"-s")),a()},iC=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),O7=(t,e,i,s,a,d)=>{if(i!==s){let y=L7(t,e),g=e.toLowerCase();if(e==="class"){const _=t.classList,x=C7(i),I=C7(s);_.remove(...x.filter(A=>A&&!I.includes(A))),_.add(...I.filter(A=>A&&!x.includes(A)))}else if(e==="style"){for(const _ in i)(!s||s[_]==null)&&(_.includes("-")?t.style.removeProperty(_):t.style[_]="");for(const _ in s)(!i||s[_]!==i[_])&&(_.includes("-")?t.style.setProperty(_,s[_]):t.style[_]=s[_])}else if(e!=="key")if(e==="ref")s&&s(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):L7(Jf,g)?e=g.slice(2):e=g[2]+e.slice(3),i&&Qi.rel(t,e,i,!1),s&&Qi.ael(t,e,s,!1);else{const _=G4(s);if((y||_&&s!==null)&&!a)try{if(t.tagName.includes("-"))t[e]=s;else{const I=s??"";e==="list"?y=!1:(i==null||t[e]!=I)&&(t[e]=I)}}catch{}let x=!1;g!==(g=g.replace(/^xlink\:?/,""))&&(e=g,x=!0),s==null||s===!1?(s!==!1||t.getAttribute(e)==="")&&(x?t.removeAttributeNS(I7,e):t.removeAttribute(e)):(!y||d&4||a)&&!_&&(s=s===!0?"":s,x?t.setAttributeNS(I7,e,s):t.setAttribute(e,s))}}},Yte=/\s/,C7=t=>t?t.split(Yte):[],rC=(t,e,i,s)=>{const a=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,d=t&&t.$attrs$||E7,y=e.$attrs$||E7;for(s in d)s in y||O7(a,s,d[s],void 0,i,e.$flags$);for(s in y)O7(a,s,d[s],y[s],i,e.$flags$)},km=(t,e,i,s)=>{const a=e.$children$[i];let d=0,y,g,_;if(eC||(V4=!0,a.$tag$==="slot"&&(Ic&&s.classList.add(Ic+"-s"),a.$flags$|=a.$children$?2:1)),a.$text$!==null)y=a.$elm$=kn.createTextNode(a.$text$);else if(a.$flags$&1)y=a.$elm$=kn.createTextNode("");else{if(rs||(rs=a.$tag$==="svg"),y=a.$elm$=kn.createElementNS(rs?Lte:Rte,a.$flags$&2?"slot-fb":a.$tag$),rs&&a.$tag$==="foreignObject"&&(rs=!1),rC(null,a,rs),jte(Ic)&&y["s-si"]!==Ic&&y.classList.add(y["s-si"]=Ic),a.$children$)for(d=0;d<a.$children$.length;++d)g=km(t,a,d,y),g&&y.appendChild(g);a.$tag$==="svg"?rs=!1:y.tagName==="foreignObject"&&(rs=!0)}return y["s-hn"]=Fv,a.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=QO,y["s-sn"]=a.$name$||"",_=t&&t.$children$&&t.$children$[i],_&&_.$tag$===a.$tag$&&t.$elm$&&mf(t.$elm$,!1)),y},mf=(t,e)=>{Qi.$flags$|=1;const i=t.childNodes;for(let s=i.length-1;s>=0;s--){const a=i[s];a["s-hn"]!==Fv&&a["s-ol"]&&(oC(a).insertBefore(a,U4(a)),a["s-ol"].remove(),a["s-ol"]=void 0,V4=!0),e&&mf(a,e)}Qi.$flags$&=-2},sC=(t,e,i,s,a,d)=>{let y=t["s-cr"]&&t["s-cr"].parentNode||t,g;for(y.shadowRoot&&y.tagName===Fv&&(y=y.shadowRoot);a<=d;++a)s[a]&&(g=km(null,i,a,t),g&&(s[a].$elm$=g,y.insertBefore(g,U4(e))))},nC=(t,e,i,s,a)=>{for(;e<=i;++e)(s=t[e])&&(a=s.$elm$,uC(s),Em=!0,a["s-ol"]?a["s-ol"].remove():mf(a,!0),a.remove())},Zte=(t,e,i,s)=>{let a=0,d=0,y=0,g=0,_=e.length-1,x=e[0],I=e[_],A=s.length-1,C=s[0],N=s[A],j,D;for(;a<=_&&d<=A;)if(x==null)x=e[++a];else if(I==null)I=e[--_];else if(C==null)C=s[++d];else if(N==null)N=s[--A];else if(W1(x,C))Ec(x,C),x=e[++a],C=s[++d];else if(W1(I,N))Ec(I,N),I=e[--_],N=s[--A];else if(W1(x,N))(x.$tag$==="slot"||N.$tag$==="slot")&&mf(x.$elm$.parentNode,!1),Ec(x,N),t.insertBefore(x.$elm$,I.$elm$.nextSibling),x=e[++a],N=s[--A];else if(W1(I,C))(x.$tag$==="slot"||N.$tag$==="slot")&&mf(I.$elm$.parentNode,!1),Ec(I,C),t.insertBefore(I.$elm$,x.$elm$),I=e[--_],C=s[++d];else{for(y=-1,g=a;g<=_;++g)if(e[g]&&e[g].$key$!==null&&e[g].$key$===C.$key$){y=g;break}y>=0?(D=e[y],D.$tag$!==C.$tag$?j=km(e&&e[d],i,y,t):(Ec(D,C),e[y]=void 0,j=D.$elm$),C=s[++d]):(j=km(e&&e[d],i,d,t),C=s[++d]),j&&oC(x.$elm$).insertBefore(j,U4(x.$elm$))}a>_?sC(t,s[A+1]==null?null:s[A+1].$elm$,i,s,d,A):d>A&&nC(e,a,_)},W1=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,U4=t=>t&&t["s-ol"]||t,oC=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Ec=(t,e)=>{const i=e.$elm$=t.$elm$,s=t.$children$,a=e.$children$,d=e.$tag$,y=e.$text$;let g;y===null?(rs=d==="svg"?!0:d==="foreignObject"?!1:rs,d==="slot"||rC(t,e,rs),s!==null&&a!==null?Zte(i,s,e,a):a!==null?(t.$text$!==null&&(i.textContent=""),sC(i,null,e,a,0,a.length-1)):s!==null&&nC(s,0,s.length-1),rs&&d==="svg"&&(rs=!1)):(g=i["s-cr"])?g.parentNode.textContent=y:t.$text$!==y&&(i.data=y)},aC=t=>{const e=t.childNodes;let i,s,a,d,y,g;for(s=0,a=e.length;s<a;s++)if(i=e[s],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,d=0;d<a;d++)if(g=e[d].nodeType,e[d]["s-hn"]!==i["s-hn"]||y!==""){if(g===1&&y===e[d].getAttribute("slot")){i.hidden=!0;break}}else if(g===1||g===3&&e[d].textContent.trim()!==""){i.hidden=!0;break}}aC(i)}},_n=[],lC=t=>{let e,i,s,a,d,y,g=0;const _=t.childNodes,x=_.length;for(;g<x;g++){if(e=_[g],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,a=e["s-sn"],y=s.length-1;y>=0;y--)i=s[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(P7(i,a)?(d=_n.find(I=>I.$nodeToRelocate$===i),Em=!0,i["s-sn"]=i["s-sn"]||a,d?d.$slotRefNode$=e:_n.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&_n.map(I=>{P7(I.$nodeToRelocate$,i["s-sn"])&&(d=_n.find(A=>A.$nodeToRelocate$===i),d&&!I.$slotRefNode$&&(I.$slotRefNode$=d.$slotRefNode$))})):_n.some(I=>I.$nodeToRelocate$===i)||_n.push({$nodeToRelocate$:i}));e.nodeType===1&&lC(e)}},P7=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",uC=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(uC)},Xte=(t,e)=>{const i=t.$hostElement$,s=t.$cmpMeta$,a=t.$vnode$||Am(null,null),d=zte(e)?e:tC(null,null,e);Fv=i.tagName,s.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},s.$attrsToReflect$.map(([y,g])=>d.$attrs$[g]=i[y])),d.$tag$=null,d.$flags$|=4,t.$vnode$=d,d.$elm$=a.$elm$=i.shadowRoot||i,Ic=i["s-sc"],QO=i["s-cr"],eC=(s.$flags$&1)!==0,Em=!1,Ec(a,d);{if(Qi.$flags$|=1,V4){lC(d.$elm$);let y,g,_,x,I,A,C=0;for(;C<_n.length;C++)y=_n[C],g=y.$nodeToRelocate$,g["s-ol"]||(_=kn.createTextNode(""),_["s-nr"]=g,g.parentNode.insertBefore(g["s-ol"]=_,g));for(C=0;C<_n.length;C++)if(y=_n[C],g=y.$nodeToRelocate$,y.$slotRefNode$){for(x=y.$slotRefNode$.parentNode,I=y.$slotRefNode$.nextSibling,_=g["s-ol"];_=_.previousSibling;)if(A=_["s-nr"],A&&A["s-sn"]===g["s-sn"]&&x===A.parentNode&&(A=A.nextSibling,!A||!A["s-nr"])){I=A;break}(!I&&x!==g.parentNode||g.nextSibling!==I)&&g!==I&&(!g["s-hn"]&&g["s-ol"]&&(g["s-hn"]=g["s-ol"].parentNode.nodeName),x.insertBefore(g,I))}else g.nodeType===1&&(g.hidden=!0)}Em&&aC(d.$elm$),Qi.$flags$&=-2,_n.length=0}},Qte=(t,e)=>{},q4=(t,e)=>(t.$flags$|=16,Qte(t,t.$ancestorComponent$),_ie(()=>eie(t,e))),eie=(t,e)=>{const i=t.$hostElement$,s=Dh("scheduleUpdate",t.$cmpMeta$.$tagName$),a=i;let d;return e?d=op(a,"componentWillLoad"):d=op(a,"componentWillUpdate"),d=N7(d,()=>op(a,"componentWillRender")),s(),N7(d,()=>tie(t,a,e))},tie=async(t,e,i)=>{const s=t.$hostElement$,a=Dh("update",t.$cmpMeta$.$tagName$);s["s-rc"],i&&Kte(t);const d=Dh("render",t.$cmpMeta$.$tagName$);iie(t,e,s),d(),a(),rie(t)},iie=(t,e,i)=>{try{M7=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Mc.hasRenderFn||Mc.reflect)&&(Mc.vdomRender||Mc.reflect)&&(Mc.hydrateServerSide||Xte(t,e))}catch(g){Wf(g,t.$hostElement$)}return M7=null,null},rie=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,s=Dh("postUpdate",e),a=i;t.$ancestorComponent$,op(a,"componentDidRender"),t.$flags$&64?(op(a,"componentDidUpdate"),s()):(t.$flags$|=64,op(a,"componentDidLoad"),s())},pye=t=>{{const e=Hf(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&q4(e,!1),i}},op=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(s){Wf(s)}},N7=(t,e)=>t&&t.then?t.then(e):e(),sie=(t,e)=>Hf(t).$instanceValues$.get(e),nie=(t,e,i,s)=>{const a=Hf(t),d=t,y=a.$instanceValues$.get(e),g=a.$flags$,_=d;i=qte(i,s.$members$[e][0]);const x=Number.isNaN(y)&&Number.isNaN(i);if(i!==y&&!x){a.$instanceValues$.set(e,i);{if(s.$watchers$&&g&128){const A=s.$watchers$[e];A&&A.map(C=>{try{_[C](i,y,e)}catch(N){Wf(N,d)}})}if((g&18)===2){if(_.componentShouldUpdate&&_.componentShouldUpdate(i,y,e)===!1)return;q4(a,!1)}}}},oie=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const s=Object.entries(e.$members$),a=t.prototype;s.map(([d,[y]])=>{(y&31||y&32)&&Object.defineProperty(a,d,{get(){return sie(this,d)},set(g){nie(this,d,g,e)},configurable:!0,enumerable:!0})});{const d=new Map;a.attributeChangedCallback=function(y,g,_){Qi.jmp(()=>{const x=d.get(y);if(this.hasOwnProperty(x))_=this[x],delete this[x];else if(a.hasOwnProperty(x)&&typeof this[x]=="number"&&this[x]==_)return;this[x]=_===null&&typeof this[x]=="boolean"?!1:_})},t.observedAttributes=s.filter(([y,g])=>g[0]&15).map(([y,g])=>{const _=g[1]||y;return d.set(_,y),g[0]&512&&e.$attrsToReflect$.push([y,_]),_})}}return t},aie=async(t,e,i,s,a)=>{if(!(e.$flags$&32)&&(a=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),a.style)){let y=a.style;typeof y!="string"&&(y=y[e.$modeName$=Ute(t)]);const g=iC(i,e.$modeName$);if(!Om.has(g)){const _=Dh("registerStyles",i.$tagName$);Wte(g,y,!!(i.$flags$&1)),_()}}e.$ancestorComponent$,(()=>q4(e,!0))()},lie=t=>{},uie=t=>{if(!(Qi.$flags$&1)){const e=Hf(t),i=e.$cmpMeta$,s=Dh("connectedCallback",i.$tagName$);e.$flags$&1?(hC(t,e,i.$listeners$),lie(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&hie(t),i.$members$&&Object.entries(i.$members$).map(([a,[d]])=>{if(d&31&&t.hasOwnProperty(a)){const y=t[a];delete t[a],t[a]=y}}),aie(t,e,i)),s()}},hie=t=>{const e=t["s-cr"]=kn.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},cie=t=>{if(!(Qi.$flags$&1)){const e=Hf(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},dye=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const s=t.prototype.connectedCallback,a=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){yie(this,i)},connectedCallback(){uie(this),s&&s.call(this)},disconnectedCallback(){cie(this),a&&a.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,oie(t,i)},fye=(t,e)=>e,hC=(t,e,i,s)=>{i&&i.map(([a,d,y])=>{const g=die(t,a),_=pie(e,y),x=fie(a);Qi.ael(g,d,_,x),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Qi.rel(g,d,_,x))})},pie=(t,e)=>i=>{try{Mc.lazyLoad||t.$hostElement$[e](i)}catch(s){Wf(s)}},die=(t,e)=>e&4?kn:e&8?Jf:e&16?kn.body:t,fie=t=>mie?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,cC=new WeakMap,Hf=t=>cC.get(t),yie=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return hC(t,i,e.$listeners$),cC.set(t,i)},L7=(t,e)=>e in t,Wf=(t,e)=>(0,console.error)(t,e),Om=new Map,gie=[],Jf=typeof window<"u"?window:{},kn=Jf.document||{head:{}},yye=Jf.HTMLElement||class{},Qi={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,s)=>t.addEventListener(e,i,s),rel:(t,e,i,s)=>t.removeEventListener(e,i,s),ce:(t,e)=>new CustomEvent(t,e)},mie=(()=>{let t=!1;try{kn.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),vie=t=>Promise.resolve(t),bie=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),T9=[],pC=[],dC=(t,e)=>i=>{t.push(i),$9||($9=!0,e&&Qi.$flags$&4?wie(M9):Qi.raf(M9))},R7=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){Wf(i)}t.length=0},M9=()=>{R7(T9),R7(pC),($9=T9.length>0)&&Qi.raf(M9)},wie=t=>vie().then(t),gye=dC(T9,!1),_ie=dC(pC,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */const fC="calcite-mode-auto",yC="calcite-mode-dark",Sie="calcite-mode-light",mye={autoMode:fC,darkMode:yC,lightMode:Sie,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var gC=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Cm=gC.join(","),mC=typeof Element>"u",Fh=mC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Pm=!mC&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Nm=function t(e,i){var s;i===void 0&&(i=!0);var a=e==null||(s=e.getAttribute)===null||s===void 0?void 0:s.call(e,"inert"),d=a===""||a==="true",y=d||i&&e&&t(e.parentNode);return y},xie=function(e){var i,s=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return s===""||s==="true"},vC=function(e,i,s){if(Nm(e))return[];var a=Array.prototype.slice.apply(e.querySelectorAll(Cm));return i&&Fh.call(e,Cm)&&a.unshift(e),a=a.filter(s),a},bC=function t(e,i,s){for(var a=[],d=Array.from(e);d.length;){var y=d.shift();if(!Nm(y,!1))if(y.tagName==="SLOT"){var g=y.assignedElements(),_=g.length?g:y.children,x=t(_,!0,s);s.flatten?a.push.apply(a,x):a.push({scopeParent:y,candidates:x})}else{var I=Fh.call(y,Cm);I&&s.filter(y)&&(i||!e.includes(y))&&a.push(y);var A=y.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(y),C=!Nm(A,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(y));if(A&&C){var N=t(A===!0?y.children:A.children,!0,s);s.flatten?a.push.apply(a,N):a.push({scopeParent:y,candidates:N})}else d.unshift.apply(d,y.children)}}return a},wC=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},_C=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||xie(e))&&!wC(e)?0:e.tabIndex},$ie=function(e,i){var s=_C(e);return s<0&&i&&!wC(e)?0:s},Tie=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},SC=function(e){return e.tagName==="INPUT"},Mie=function(e){return SC(e)&&e.type==="hidden"},Iie=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(s){return s.tagName==="SUMMARY"});return i},Eie=function(e,i){for(var s=0;s<e.length;s++)if(e[s].checked&&e[s].form===i)return e[s]},Aie=function(e){if(!e.name)return!0;var i=e.form||Pm(e),s=function(g){return i.querySelectorAll('input[type="radio"][name="'+g+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=s(window.CSS.escape(e.name));else try{a=s(e.name)}catch(y){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",y.message),!1}var d=Eie(a,e.form);return!d||d===e},kie=function(e){return SC(e)&&e.type==="radio"},Oie=function(e){return kie(e)&&!Aie(e)},Cie=function(e){var i,s=e&&Pm(e),a=(i=s)===null||i===void 0?void 0:i.host,d=!1;if(s&&s!==e){var y,g,_;for(d=!!((y=a)!==null&&y!==void 0&&(g=y.ownerDocument)!==null&&g!==void 0&&g.contains(a)||e!=null&&(_=e.ownerDocument)!==null&&_!==void 0&&_.contains(e));!d&&a;){var x,I,A;s=Pm(a),a=(x=s)===null||x===void 0?void 0:x.host,d=!!((I=a)!==null&&I!==void 0&&(A=I.ownerDocument)!==null&&A!==void 0&&A.contains(a))}}return d},j7=function(e){var i=e.getBoundingClientRect(),s=i.width,a=i.height;return s===0&&a===0},Pie=function(e,i){var s=i.displayCheck,a=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var d=Fh.call(e,"details>summary:first-of-type"),y=d?e.parentElement:e;if(Fh.call(y,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof a=="function"){for(var g=e;e;){var _=e.parentElement,x=Pm(e);if(_&&!_.shadowRoot&&a(_)===!0)return j7(e);e.assignedSlot?e=e.assignedSlot:!_&&x!==e.ownerDocument?e=x.host:e=_}e=g}if(Cie(e))return!e.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return j7(e);return!1},Nie=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var s=0;s<i.children.length;s++){var a=i.children.item(s);if(a.tagName==="LEGEND")return Fh.call(i,"fieldset[disabled] *")?!0:!a.contains(e)}return!0}i=i.parentElement}return!1},Lm=function(e,i){return!(i.disabled||Nm(i)||Mie(i)||Pie(i,e)||Iie(i)||Nie(i))},I9=function(e,i){return!(Oie(i)||_C(i)<0||!Lm(e,i))},Lie=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Rie=function t(e){var i=[],s=[];return e.forEach(function(a,d){var y=!!a.scopeParent,g=y?a.scopeParent:a,_=$ie(g,y),x=y?t(a.candidates):g;_===0?y?i.push.apply(i,x):i.push(g):s.push({documentOrder:d,tabIndex:_,item:a,isScope:y,content:x})}),s.sort(Tie).reduce(function(a,d){return d.isScope?a.push.apply(a,d.content):a.push(d.content),a},[]).concat(i)},jie=function(e,i){i=i||{};var s;return i.getShadowRoot?s=bC([e],i.includeContainer,{filter:I9.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Lie}):s=vC(e,i.includeContainer,I9.bind(null,i)),Rie(s)},vye=function(e,i){i=i||{};var s;return i.getShadowRoot?s=bC([e],i.includeContainer,{filter:Lm.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):s=vC(e,i.includeContainer,Lm.bind(null,i)),s},bye=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Fh.call(e,Cm)===!1?!1:I9(i,e)},Die=gC.concat("iframe").join(","),wye=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Fh.call(e,Die)===!1?!1:Lm(i,e)};const Fie={getShadowRoot:!0};function _ye(t){const e="dir",i=`[${e}]`,s=zie(t,i);return s?s.getAttribute(e):"ltr"}function B4(t){return t.getRootNode()}function Sye(t){const e=B4(t);return"host"in e?e:null}function xC(t){return t.host||null}function xye(t,{selector:e,id:i}){function s(a){if(!a)return null;a.assignedSlot&&(a=a.assignedSlot);const d=B4(a),y=i?"getElementById"in d?d.getElementById(i):null:e?d.querySelector(e):null,g=xC(d);return y||(g?s(g):null)}return s(t)}function zie(t,e){function i(s){return s?s.closest(e)||i(xC(B4(s))):null}return i(t)}function Vie(t,e){return $C(t,e)}function $C(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:s}=t;return $C(s instanceof ShadowRoot?s.host:s,e)}function $ye(t,e){return!!Vie(e,i=>i===t?!0:void 0)}function Gie(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function Tye(t){if(t)return Gie(t)?t.setFocus():t.focus()}function Mye(t){t&&(jie(t,Fie)[0]||t).focus()}const vf=":not([slot])";function Iye(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const s=e?Array.isArray(e)?e.map(a=>`[slot="${a}"]`).join(","):`[slot="${e}"]`:vf;return i!=null&&i.all?Uie(t,s,i):qie(t,s,i)}function TC(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function Uie(t,e,i){let s=e===vf?TC(t,vf):Array.from(t.querySelectorAll(e));s=i&&i.direct===!1?s:s.filter(d=>d.parentElement===t),s=i!=null&&i.matches?s.filter(d=>d==null?void 0:d.matches(i.matches)):s;const a=i==null?void 0:i.selector;return a?s.map(d=>Array.from(d.querySelectorAll(a))).reduce((d,y)=>[...d,...y],[]).filter(d=>!!d):s}function qie(t,e,i){let s=e===vf?TC(t,vf)[0]||null:t.querySelector(e);s=i&&i.direct===!1||(s==null?void 0:s.parentElement)===t?s:null,s=i!=null&&i.matches?s!=null&&s.matches(i.matches)?s:null:s;const a=i==null?void 0:i.selector;return a?s==null?void 0:s.querySelector(a):s}function Eye(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function Aye(t){return Boolean(t).toString()}function kye(t){return Jie(t)||Hie(t)}function Bie(t){return Wie(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function Hie(t){return!!Bie(t)}function Wie(t){return t.target.assignedNodes({flatten:!0})}function Jie(t){return!!Kie(t).length}function Kie(t){return t.target.assignedElements({flatten:!0})}function Oye(t){return!!(t.isPrimary&&t.button===0)}function Cye(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.9.1
 */function D7(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(yC)||t.contains(fC)&&e?"dark":"light",s=y=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:y}})),a=y=>{d!==y&&s(y),d=y};let d=i();s(d),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",y=>a(y.matches?"dark":"light")),new MutationObserver(()=>a(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Yie(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?D7():document.addEventListener("DOMContentLoaded",()=>D7(),{once:!0}))}const Zie=Yie;Zie();let MC;function Xie(){try{Pte(".")}catch{Nte(ns(It(MC)))}}function Qie(t){var i;const e=[];for(const s of Object.keys(t))customElements.get(`calcite-${s}`)||e.push((i=t[s])==null?void 0:i.call(t));return Promise.all(e)}MC="components/assets";const IC=Symbol("widget"),ere=Symbol("widget-test-data"),tre=[],ire={},Rm=new WeakMap;function EC(t,e){let i=e.children;if(i&&i.length)for(let a=0;a<i.length;++a)i[a]=EC(t,i[a]);else i=tre;const s=e.vnodeSelector;if(H4(s)){const a=e.properties||ire,d=a.key||s;return{vnodeSelector:"div",properties:{key:d,afterCreate:rre,afterUpdate:sre,afterRemoved:AC,parentWidget:t,widgetConstructor:s,widgetProperties:{...a,key:d,children:i}},children:void 0,text:void 0,domNode:null}}return e}function rre(t,e,i,{parentWidget:s,widgetConstructor:a,widgetProperties:d}){var g;const y=new a(d);y.container=t,Rm.set(t,y),(g=y.afterCreate)==null||g.call(y,y,t),s._internalHandles.add(yo(()=>AC(t)))}function sre(t,e,i,{widgetProperties:s}){var d;const a=Rm.get(t);a&&(a.set(s),(d=a.afterUpdate)==null||d.call(a,a,t))}function AC(t){var i;const e=Rm.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),Rm.delete(t))}function H4(t){return typeof t=="function"&&t[IC]}const F7=new Set;function nre(t){F7.add(t),t.finally(()=>F7.delete(t))}var kC;const ore="esri.widgets.Widget";let are=0;const lre={widgetIcon:"esri-icon-checkbox-unchecked"};function OC(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?OC(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const ure=Cte({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(s,a,d,y)=>{const g=e==null?void 0:e(s,a,d,y),_=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in d)||_){const x=s[2].toLowerCase()+s.slice(3),I=N=>g==null?void 0:g.call(d,N);d.addEventListener(x,I,_);const A=()=>d.removeEventListener(x,I,_),C=y.afterRemoved;y.afterRemoved=N=>{C==null||C(N),A()}}return g}},handleInterceptedEvent(t,e,i,s){const{eventPhase:a,type:d}=s,y=a===Event.CAPTURING_PHASE;let g=`on${d}${y?"capture":""}`;const _=e.properties;(_&&g in _||(g=`on${d[0].toUpperCase()}${d.slice(1)}${y?"Capture":""}`,_&&g in _))&&(xk(),t.scheduleRender(),_[g].call(_.bind||i,s))}});let ob=!1,ki=class extends t5(_a.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new ba,this._projector=ure,this._readyForTrueRender=!1,this.iconClass=lre.widgetIcon,this.icon=null,this.key=this,this._loadLocale=nT(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const y=await Sn(this._messageBundleProps.map(async({bundlePath:g,propertyName:_})=>{if(this.destroyed)return;let x=await T5(g);this.uiStrings&&Object.keys(this.uiStrings)&&(x=OC(ae(x),this.uiStrings)),this[_]=x}));if(this.destroyed)return;for(const g of y)g.error&&me.getLogger(this).error("widget-intl:locale-error",this.declaredClass,g.error)}await this.loadLocale()}),Xie();const s="esri-widget-uid-"+XO(),a=this.render.bind(this);this._trackingTarget=new av(()=>this.scheduleRender());const d=()=>{var I;if(!this._readyForTrueRender||this.destroyed)return null;const y=a();let{properties:g}=y;g||(y.properties=g={});const{key:_}=g;_||(g.key=s),this.visible?g.styles||(g.styles={}):(g.class="",g.styles={display:"none"}),g.styles.display||(g.styles.display="");let x=0;return(I=y.children)==null||I.forEach(A=>{if(H4(A.vnodeSelector))return;let{properties:C}=A;C||(A.properties=C={}),C.key||(C.key=`${this.id}--${x++}`)}),EC(this,y)};this.render=()=>{if(ob)return d();let y=mY(this)??null;if(y)return y;this._trackingTarget.clear(),ob=!0;try{y=ca(this._trackingTarget,d)}catch(g){throw console.error(g),g}finally{ob=!1}return y&&vY(this,y),y},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),nre(this._resourcesFetch)}normalizeCtorArgs(e,i){const s={...e};return i&&(s.container=i),s}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(P6)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Kt(this._trackingTarget),Kt(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,z2(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return x4(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+are++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(kC=IC,ere)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(z2(this),this._projector.scheduleRender())}classes(...e){return xY.apply(this,e)}renderNow(){z2(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(Me(()=>this.viewModel,(s,a)=>{a&&this._internalHandles.remove("delegated-events"),s&&sv(s)&&this._internalHandles.add(this._delegatedEventNames.map(d=>nv(s,d,y=>{this.emit(d,y)})),"delegated-events")},vt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(P6),this.scheduleRender()};this._internalHandles.add([S5(e),Me(()=>this.uiStrings,e),Jl(()=>this.container,s=>{this.destroyed||this._attach(s)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};ki[kC]=!0,b([S()],ki.prototype,"_readyForTrueRender",void 0),b([S({value:null})],ki.prototype,"container",null),b([Ft("container")],ki.prototype,"castContainer",null),b([S()],ki.prototype,"iconClass",void 0),b([S()],ki.prototype,"icon",void 0),b([S()],ki.prototype,"id",null),b([S()],ki.prototype,"label",null),b([S()],ki.prototype,"renderable",null),b([S()],ki.prototype,"uiStrings",void 0),b([S()],ki.prototype,"viewModel",void 0),b([S({value:!0})],ki.prototype,"visible",null),b([S()],ki.prototype,"key",void 0),b([S()],ki.prototype,"children",void 0),b([S()],ki.prototype,"afterCreate",void 0),b([S()],ki.prototype,"afterUpdate",void 0),b([S()],ki.prototype,"afterRemoved",void 0),ki=b([J(ore)],ki);const xa=ki;function z7(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function hre(t,e){return t.length!==e.length||t.some((i,s)=>i.text!==e[s].text)}function J1(t,e,i){!i||!e||t.find(s=>s.layerView===e&&s.text===i)||t.push({text:i,layerView:e})}function cre(t){return t.type==="bing-maps"}const Fa=[];let Ac=class extends _m{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ge,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const s=this.get("view.allLayerViews");s&&this.handles.add(s.map(a=>Me(()=>{var d;return[a.suspended,(d=a.layer)==null?void 0:d.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(a=>{this._pendingAttributions.delete(a),this._fetchedAttributionData.delete(a)}),this._updateAttributionItems()},this.handles.add([Nh(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Jl(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;Fa.length=0,e&&i?(i.forEach(s=>{var y;if(s.suspended||!((y=s.layer)!=null&&y.attributionVisible))return;const a=s.layer;if(z7(a,"user"))return void J1(Fa,s,a.copyright);if(a.hasAttributionData){if(this._fetchedAttributionData.has(s)){const g=this._fetchedAttributionData.get(s);return void(g?J1(Fa,s,this._getDynamicAttribution(g,e,a)):z7(a)&&J1(Fa,s,a.copyright))}return void this._fetchAttributionData(s)}const d=a.get("portalItem.accessInformation");J1(Fa,s,d||a.copyright)}),hre(this.items,Fa)&&(this.items.removeAll(),this.items.addMany(Fa)),Fa.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await s5(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const s=i.ok?this._createContributionIndex(i.value,cre(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,s)}this._updateAttributionItems()}_createContributionIndex(e,i){const s=e.contributors,a={};if(!s)return a;for(let d=0;d<s.length;d++){const y=s[d],g=y.coverageAreas;if(!g)return;for(const _ of g){const x=_.bbox,I=_.zoomMin-(i&&_.zoomMin?1:0),A=_.zoomMax-(i&&_.zoomMax?1:0),C=new bt({xmin:x[1],ymin:x[0],xmax:x[3],ymax:x[2],spatialReference:Xe.WGS84}),N={extent:Vl(C),attribution:y.attribution||"",score:_.score!=null?_.score:100,id:d};for(let j=I;j<=A;j++)a[j]??(a[j]=[]),a[j].push(N)}}return a.maxKey=Math.max.apply(null,Object.keys(a)),a}_getDynamicAttribution(e,i,s){var I;const{extent:a,scale:d}=i;let y=((I=s.tileInfo)==null?void 0:I.scaleToZoom(d))??0;if(y=Math.min(e.maxKey??0,Math.round(y)),!a||y==null||y<=-1)return"";const g=e[y],_=yv(a.center.clone().normalize(),i.spatialReference),x=new Set;return g?g.filter(A=>{const C=A.id,N=!x.has(C)&&_&&A.extent&&gv(A.extent,_);return N&&x.add(C),N}).sort((A,C)=>C.score-A.score||A.objectId-C.objectId).map(A=>A.attribution).join(", "):""}};b([S({readOnly:!0,type:Ge})],Ac.prototype,"items",void 0),b([S({readOnly:!0})],Ac.prototype,"state",null),b([S()],Ac.prototype,"view",void 0),Ac=b([J("esri.widgets.Attribution.AttributionViewModel")],Ac);const CC=Ac;function Ns(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:dre(t[e])}}}function pre(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function dre(t){return function(e,...i){pre(e)?Mk(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function ma(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var fre=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},PC=function(t,e){for(var i=0,s=t.length;i<s;i++){var a=t[i];Array.isArray(a)?PC(a,e):a!=null&&a!==!1&&(a.hasOwnProperty("vnodeSelector")||(a=fre(a)),e.push(a))}},yre=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var a=[];return PC(i,a),{vnodeSelector:t,properties:e||void 0,children:a,text:void 0,domNode:null}};function fe(t,e,...i){return typeof t!="function"||H4(t)?yre(t,e,...i):t(e,...i)}const lc="esri-attribution",za={base:`${lc} esri-widget`,poweredBy:`${lc}__powered-by`,sources:`${lc}__sources`,open:`${lc}--open`,sourcesOpen:`${lc}__sources--open`,link:`${lc}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let gr=class extends xa{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(s=>s.forEach(({target:a})=>this._checkSourceTextOverflow(a))),this.iconClass=za.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new CC}initialize(){this.addHandles(Nh(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[za.open]:this._isOpen};return fe("div",{bind:this,class:this.classes(za.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return fe("div",{class:za.poweredBy},"Powered by"," ",fe("a",{class:za.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,s=i?"0":"",{attributionText:a}=this,d={[za.sourcesOpen]:e,[za.interactive]:i};return fe("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(za.sources,d),innerHTML:a,tabindex:s})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:s,clientWidth:a,scrollWidth:d}=e,y=d>a,g=this._attributionTextOverflowed!==y;if(this._attributionTextOverflowed=y,g&&(i=!0),this._isOpen){const _=s<this._prevSourceNodeHeight;this._prevSourceNodeHeight=s,_&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};b([S()],gr.prototype,"_isOpen",void 0),b([S()],gr.prototype,"_isInteractive",null),b([S()],gr.prototype,"_attributionTextOverflowed",void 0),b([S()],gr.prototype,"_prevSourceNodeHeight",void 0),b([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],gr.prototype,"attributionText",null),b([S()],gr.prototype,"iconClass",void 0),b([S()],gr.prototype,"icon",void 0),b([S()],gr.prototype,"itemDelimiter",void 0),b([S()],gr.prototype,"label",null),b([S(),ma("esri/widgets/Attribution/t9n/Attribution")],gr.prototype,"messages",void 0),b([S()],gr.prototype,"view",null),b([S({type:CC})],gr.prototype,"viewModel",void 0),b([Ns()],gr.prototype,"_toggleState",null),gr=b([J("esri.widgets.Attribution")],gr);const gre=gr,NC=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return Zm(s),this.goToOverride?this.goToOverride(s,i):s.goTo(i.target,i.options)}};return b([S()],e.prototype,"goToOverride",void 0),b([S()],e.prototype,"view",void 0),e=b([J("esri.widgets.support.GoTo")],e),e},mre="esri.widgets.CompassViewModel";let Gu=class extends NC(je){constructor(e){super(e),this._handles=new ba,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Me(()=>this.view,this._updateRotationWatcher,vt))}destroy(){li(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const e={};((i=this.view)==null?void 0:i.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?Me(()=>e==null?void 0:e.rotation,this._updateForRotation,vt):Me(()=>e==null?void 0:e.camera,this._updateForCamera,vt))}};b([S({readOnly:!0})],Gu.prototype,"canShowNorth",null),b([S()],Gu.prototype,"orientation",void 0),b([S({readOnly:!0})],Gu.prototype,"state",null),b([S()],Gu.prototype,"view",void 0),Gu=b([J(mre)],Gu);const LC=Gu,Va={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let ln=class extends xa{constructor(e,i){super(e,i),this.iconClass=Va.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new LC}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,s=i==="disabled",a=(i==="rotation"?"rotation":"compass")=="compass",d=s?-1:0,y={[Va.disabled]:s,[Va.interactive]:!s},g={[Va.northIcon]:a,[Va.rotationIcon]:!a},{messages:_}=this;return fe("div",{bind:this,class:this.classes(Va.base,y),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:d,"aria-label":_.reset,title:_.reset},fe("span",{"aria-hidden":"true",class:this.classes(Va.icon,g),styles:this._toRotationTransform(e)}),fe("span",{class:Va.text},_.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};b([S()],ln.prototype,"goToOverride",null),b([S()],ln.prototype,"iconClass",void 0),b([S()],ln.prototype,"icon",void 0),b([S()],ln.prototype,"label",null),b([S(),ma("esri/widgets/Compass/t9n/Compass")],ln.prototype,"messages",void 0),b([S()],ln.prototype,"view",null),b([S({type:LC})],ln.prototype,"viewModel",void 0),b([Ns()],ln.prototype,"_reset",null),ln=b([J("esri.widgets.Compass")],ln);const vre=ln,uc="esri-navigation-toggle",ms={base:`${uc} esri-widget`,button:`${uc}__button esri-widget--button`,activeButton:`${uc}__button--active`,panButton:`${uc}__button--pan`,rotateButton:`${uc}__button--rotate`,isLayoutHorizontal:`${uc}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let kc=class extends je{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Jl(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};b([S({readOnly:!0})],kc.prototype,"state",null),b([S()],kc.prototype,"navigationMode",void 0),b([S()],kc.prototype,"view",void 0),kc=b([J("esri.widgets.NavigationToggleViewModel")],kc);const RC=kc;let un=class extends xa{constructor(e,i){super(e,i),this.iconClass=ms.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new RC}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",s={[ms.disabled]:e,[ms.isLayoutHorizontal]:this.layout==="horizontal"},a={[ms.activeButton]:i},d={[ms.activeButton]:!i},y=e?-1:0,g=this.messages.toggle;return fe("div",{bind:this,class:this.classes(ms.base,s),onclick:this._toggle,onkeydown:this._toggle,tabIndex:y,"aria-label":g,title:g},fe("div",{class:this.classes(ms.button,ms.panButton,a)},fe("span",{class:ms.panIcon})),fe("div",{class:this.classes(ms.button,ms.rotateButton,d)},fe("span",{class:ms.rotationIcon})))}_toggle(){this.toggle()}};b([S()],un.prototype,"iconClass",void 0),b([S()],un.prototype,"icon",void 0),b([S()],un.prototype,"label",null),b([S({value:"vertical"})],un.prototype,"layout",null),b([S(),ma("esri/widgets/NavigationToggle/t9n/NavigationToggle")],un.prototype,"messages",void 0),b([S()],un.prototype,"view",null),b([S({type:RC})],un.prototype,"viewModel",void 0),b([Ns()],un.prototype,"_toggle",null),un=b([J("esri.widgets.NavigationToggle")],un);const bre=un,d0={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Bo=class extends xa{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const e=this.enabled?0:-1,i={[d0.disabled]:!this.enabled,[d0.interactive]:this.enabled};return fe("div",{bind:this,class:this.classes(d0.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},fe("span",{"aria-hidden":"true",role:"presentation",class:this.classes(d0.icon,this.iconClass??"")}),fe("span",{class:d0.iconText},this.title))}_triggerAction(){this.action.call(this)}};b([S()],Bo.prototype,"action",void 0),b([S()],Bo.prototype,"enabled",void 0),b([S()],Bo.prototype,"iconClass",void 0),b([S()],Bo.prototype,"icon",void 0),b([S()],Bo.prototype,"title",void 0),b([Ns()],Bo.prototype,"_triggerAction",null),Bo=b([J("esri.widgets.IconButton")],Bo);const V7=Bo;let Oc=class extends je{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};b([S({readOnly:!0})],Oc.prototype,"canZoomIn",null),b([S({readOnly:!0})],Oc.prototype,"canZoomOut",null),b([S()],Oc.prototype,"view",void 0),Oc=b([J("esri.widgets.Zoom.ZoomConditions2D")],Oc);const wre=Oc;let Cc=class extends je{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};b([S({readOnly:!0})],Cc.prototype,"canZoomIn",null),b([S({readOnly:!0})],Cc.prototype,"canZoomOut",null),b([S()],Cc.prototype,"view",void 0),Cc=b([J("esri.widgets.Zoom.ZoomConditions3D")],Cc);const _re=Cc;let ll=class extends je{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return this._zoomConditions!=null&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new wre({view:e}):e.type==="3d"&&(this._zoomConditions=new _re({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Gb(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Gb(e.goTo({zoomFactor:.5}))}};b([S()],ll.prototype,"_zoomConditions",void 0),b([S()],ll.prototype,"canZoomIn",null),b([S()],ll.prototype,"canZoomOut",null),b([S({readOnly:!0})],ll.prototype,"state",null),b([S()],ll.prototype,"view",null),ll=b([J("esri.widgets.Zoom.ZoomViewModel")],ll);const jC=ll,f0={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let so=class extends xa{constructor(e,i){super(e,i),this.iconClass=f0.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new jC}initialize(){this._zoomInButton=new V7({action:this.zoomIn.bind(this),iconClass:f0.zoomInIcon}),this._zoomOutButton=new V7({action:this.zoomOut.bind(this),iconClass:f0.zoomOutIcon})}destroy(){this._zoomInButton=Kt(this._zoomInButton),this._zoomOutButton=Kt(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[f0.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:s,canZoomOut:a}=e;this._zoomInButton.enabled=s,this._zoomOutButton.enabled=a;const{zoomIn:d,zoomOut:y}=this.messages;return this._zoomInButton.title=d,this._zoomOutButton.title=y,fe("div",{class:this.classes(f0.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};b([S()],so.prototype,"iconClass",void 0),b([S()],so.prototype,"icon",void 0),b([S()],so.prototype,"label",null),b([S({value:"vertical"})],so.prototype,"layout",null),b([S(),ma("esri/widgets/Zoom/t9n/Zoom")],so.prototype,"messages",void 0),b([S()],so.prototype,"view",null),b([S({type:jC})],so.prototype,"viewModel",void 0),so=b([J("esri.widgets.Zoom")],so);const Sre=so;function xre(t){return(t==null?void 0:t.view)!==void 0}let eg=class extends Tte{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(s=>{const a=this._find(s),d=a==null?void 0:a.widget;xre(d)&&(d.view=i)})},this._componentsWatcher=(i,s)=>{this._removeComponents(s),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Me(()=>this.components,this._componentsWatcher,vt),Me(()=>this.view,this._updateViewAwareWidgets,vt)])}_add(e,i,s,a,d){let y=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;y=this._createComponent(e)}super._add(y,i,s,a,d)}_removeComponents(e){e.forEach(i=>{const s=this._find(i);s&&(this.remove(s),s.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new Qy({id:e,node:i})}_createWidget(e){const{view:i}=this;switch(e){case"attribution":return new gre({view:i});case"compass":return new vre({view:i});case"navigation-toggle":return new bre({view:i});case"zoom":return new Sre({view:i})}}};b([S()],eg.prototype,"components",void 0),eg=b([J("esri.views.ui.DefaultUI")],eg);const DC=eg;let tg=class extends DC{constructor(e){super(e),this.components=["attribution","zoom"]}};b([S()],tg.prototype,"components",void 0),tg=b([J("esri.views.ui.2d.DefaultUI2D")],tg);const FC=tg;var E9;let ig=E9=class extends ye{constructor(t){super(t),this.color=new et([0,0,0,1])}clone(){return new E9(ae({color:this.color}))}};b([S({type:et,json:{write:!0}})],ig.prototype,"color",void 0),ig=E9=b([J("esri.webmap.background.ColorBackground")],ig);const $re=ig;let zC,VC,GC,UC,qC,BC;async function Tre(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:s,MagnifierView2D:a,Stage:d}]=await Promise.all([_e(()=>import("./webglDeps-f28c3528.js"),["assets/webglDeps-f28c3528.js","assets/VertexArrayObject-6676a928.js","assets/Texture-b27e2ed5.js","assets/enums-b14466b3.js","assets/ProgramTemplate-c203c82b.js","assets/programUtils-950386fd.js","assets/NestedMap-1b5db22e.js"]),_e(()=>import("./mapViewDeps-03763eee.js"),["assets/mapViewDeps-03763eee.js","assets/CIMResourceManager-d4b72a1c.js","assets/fontUtils-c4906c91.js","assets/Rasterizer-d868c919.js","assets/cimAnalyzer-249b67c5.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/utils-fb8f30fc.js","assets/alignmentUtils-ae955d28.js","assets/definitions-c49e2c1e.js","assets/number-e491b09e.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-7a483037.js","assets/floatRGBA-3a08c070.js","assets/rasterizingUtils-fa89fcf9.js","assets/imageutils-6c3ff994.js","assets/Container-7664f554.js","assets/EffectView-f21b790b.js","assets/enums-b14466b3.js","assets/Texture-b27e2ed5.js","assets/BufferPool-ed7e530d.js","assets/AttributeStoreView-1e813df9.js","assets/TiledDisplayObject-140c5b09.js","assets/color-82eb9d53.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-1ddd0e61.js","assets/VertexArrayObject-6676a928.js","assets/ProgramTemplate-c203c82b.js","assets/GeometryUtils-017e7c0c.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/earcut-3e9b4557.js","assets/visualVariablesUtils-8f78c9ca.js","assets/ExpandedCIM-b2cd66b9.js","assets/clusterUtils-d077d77a.js","assets/util-83127115.js","assets/enums-fb086c25.js","assets/programUtils-950386fd.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-9b763256.js","assets/Matcher-2d1dc9bd.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-6feabd94.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-9a9aceb3.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-bebfb184.js","assets/arcadeTimeUtils-12bfe600.js","assets/executionError-c92d3b85.js","assets/projectionSupport-b33ba616.js","assets/json-48e3ea08.js","assets/RenderingContext-a5db5210.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-62e59b66.js","assets/normalizeUtilsSync-0205a13e.js","assets/GraphicContainer-3acb95de.js","assets/BaseGraphicContainer-64e198ba.js","assets/FeatureContainer-4622de9f.js","assets/TileContainer-23df8a83.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-fb2a1d63.js"])]);VC=t,GC=e,UC=i,qC=s,BC=a,zC=d}const G7=160,U7={flipY:!0,premultipliedAlpha:!0};let We=class extends $K(rZ(UY(UZ))){constructor(t){super(t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new gp({getCollections:()=>{var e,i;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new Ir({constraints:new SO({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new aQ(this),this._pePromise=null,this.floors=new Ge,this.highlightOptions=new UO,this.inputManager=new Vee({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new qO,this.type="2d",this.ui=new FC,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Me(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(G7)},Fp),this.on("resize",e=>this.stateManager.resize(e.width,e.height)),Me(()=>{var e;return(e=this.animationManager)==null?void 0:e.animation},e=>{this.animation=e})]),ZW()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Kt(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Wee(this.featuresTilingScheme)}get constraintsInfo(){var i,s;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,e=this.spatialReference;return{lods:(s=t==null?void 0:t.spatialReference)!=null&&s.equals(e)?t.lods:null,spatialReference:e}}get state(){return this.stateManager.state}get initialExtentRequired(){var y;if(!this.stateManager)return!1;const{scale:t,constraints:e,center:i,viewpoint:s,extent:a}=this;let d=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)!=null&&y.viewpoint))&&!a&&(e!=null&&e.effectiveLODs||(d=-1),(!i||t===0&&d===-1)&&(!s||s.targetGeometry==null||s.targetGeometry.type!=="extent"&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Wh()||(this._pePromise||(this._pePromise=Zl().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const e=this.spatialReference,i=t.targetGeometry;return!!ga(i.spatialReference,e)||this._projectionEngineLoaded}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{var s;t===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame()),this.frameTask.animationInProgress=!1};t.when(i,i)}get background(){return Ire(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get constraints(){var t;return(t=this.stateManager)==null?void 0:t.constraints}set constraints(t){t.view=this;const e=this.stateManager.constraints;this.stateManager.constraints=t,e==null||e.destroy()}get extent(){var t;return((t=this.stateManager)==null?void 0:t.extent)??null}set extent(t){this.stateManager.extent=t}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){this.stateManager.rotation=t}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var e,i,s;const t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(a=>!a.destroyed&&!("layerViews"in a)&&a.updating===!0));if(le("esri-2d-log-updating")){const a=this.allLayerViews.reduce((d,y)=>({...d,[y.layer.id]:!y.destroyed&&!("layerViews"in y)&&y.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(e=this.layerViewManager)==null?void 0:e.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(s=this.graphicsView)==null?void 0:s.updating}
-> allLayerViews: ${JSON.stringify(a)}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),af(()=>this.ready,e).then(()=>{var a;const i={animate:!0,...e},s=GX(t,this);return(a=this.animation)==null||a.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});me.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(t,e){const i=Zx(t)?Yx(this,t):t;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set,a=!1,d=null,y=null;e!=null&&e.include?B7(e.include,q7(this,I=>s.add(I),I=>{d||(d=new Set),d.add(I)},I=>s.add(I),()=>a=!0)):(a=!0,s=new Set(this.allLayerViews)),e!=null&&e.exclude&&B7(e.exclude,q7(this,I=>s.delete(I),I=>{y||(y=new Set),y.add(I)}));const g=this.allLayerViews.filter(I=>!I.suspended&&s.has(I)).reverse(),_=this.toMap(i);let x=[...a?this.graphicsView.hitTest(_).map(I=>({type:"graphic",graphic:I,layer:null,mapPoint:_})):[],...await Promise.all(g.map(I=>I.hitTest(_,i)).toArray())].filter(ho).flat().filter(ho);return d&&(x=x.filter(I=>!("graphic"in I)||!I.graphic||(d==null?void 0:d.has(A9(I.graphic))))),y&&(x=x.filter(I=>!("graphic"in I)||!I.graphic||!(y!=null&&y.has(A9(I.graphic))))),{screenPoint:i,results:x}}async takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return Yee(i,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},U7)}async _takeScreenshot(t){const e=this._createScreenshotPlan(t),i=await this._stage.takeScreenshot(e);return Zee(i,U7)}_createScreenshotPlan(t){t=t??{};const e=this.supersampleScreenshotsEnabled?Math.min(4,tte(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;t.layers?(i=[],t.layers.forEach(d=>{const y=this.allLayerViews.find(g=>g.layer.id===d.id);y&&"container"in y&&y.container&&i.push(y.container)})):i=this._stage.children;const{format:s,quality:a}=ete(t.format,t.quality);return Kee(t,e,this.size,this.padding,s,a,i,t.rotation)}get test(){return{takeScreenshot:t=>this._takeScreenshot(t)}}toMap(t){if(!this.ready)return null;const e=Zx(t)?Yx(this,t):t;return this.stateManager.toMap(e)}toScreen(t){return this.stateManager.toScreen(t)}on(t,e,i,s){return this.inputManager&&this.viewEvents.on(t,e,i,s)||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t,e,i;return this.map&&"initialViewProperties"in this.map&&((e=(t=this.map)==null?void 0:t.initialViewProperties)==null?void 0:e.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(t){return s7.hasLayerViewModule(t)}importLayerView(t){return s7.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(me.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return this.hitTest(t).then(e=>({...e,mapPoint:this.toMap(t)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let t=yte(this.type);return le("safari")&&le("safari")<9&&(t=new oe("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:le("safari")})),t!=null?(me.getLogger(this).warn("#validate()",t.message),Promise.reject(t)):Tre()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new c9),this.animation}_cancellableGoTo(t,e,i){const s=()=>t===this._gotoTask,a=i.then(()=>{s()&&(this.animation=null)}).catch(y=>{throw s()&&(e&&!e.done&&(e.stop(),this.frameTask.animationInProgress=!1),this.animation=null),y}),d=new Promise(y=>y(a));return e.when().catch(()=>{s()&&d.cancel&&d.cancel()}),d}_gotoImmediate(t,e){const i=this._gotoTask,s=this.animation,a=t.then(d=>{if(Xt(e),i!==this._gotoTask)throw new oe("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=d,s.finish()});return this._cancellableGoTo(i,s,a)}_flipStationary(t){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<G7&&(this._stationaryTimer=this._flipStationary(e))},t)),this._stationaryTimer}_getDefaultViewpoint(){var D;const{constraints:t,initialExtent:e,map:i,padding:s,size:a}=this;if(!t)return null;const d=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,y=this.stateManager.getUserStartupOptions(this.size),g=d==null?void 0:d.viewpoint,_=((D=g==null?void 0:g.targetGeometry)==null?void 0:D.extent)??e,x=_==null?void 0:_.center,I=(g==null?void 0:g.rotation)??0,A=(g==null?void 0:g.scale)||_&&np(_,[a[0]-s.left-s.right,a[1]-s.top-s.bottom]),C=y.center??x,N=y.rotation??I,j=y.scale??A;return C&&j?new po({targetGeometry:C,scale:j,rotation:N}):null}_gotoAnimated(t,e){const i=this._gotoTask,s=this.animation;if(!s)return Promise.resolve();const a=t.then(d=>{if(Xt(e),i!==this._gotoTask)throw new oe("view:goto-interrupted","Goto was interrupted");return s.update(d),this.animationManager.animate(s,this.viewpoint,e),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,a)}_startup(){var y;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(y=this.defaultsFromMap.extent)==null?void 0:y.center),this.graphics.owner=this;const e=new zC(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=e,this._magnifierView=new BC,this._magnifierView.magnifier=this.magnifier;const i=new UC({view:this});this._set("labelManager",i);const s=new oQ({view:this});this._set("animationManager",s);const a=new qC({view:this,animationManager:s});this._set("mapViewNavigation",a),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),e.on("post-render",()=>this._set("rendering",e.renderRequested)),e.on("will-render",()=>this._set("rendering",e.renderRequested)),e.on("webgl-error",g=>this.fatalError=g.error),Me(()=>this.stationary,g=>e.stationary=g,ea),Me(()=>this.background,g=>{e.backgroundColor=g==null?void 0:g.color,this._magnifierView.backgroundColor=g==null?void 0:g.color},ea),Me(()=>this.magnifier,g=>this._magnifierView.magnifier=g,ea),Me(()=>this.renderingOptions,g=>e.renderingOptions=g,ea),Me(()=>this.highlightOptions,g=>e.highlightOptions=g,ea),Me(()=>this.state.id,()=>e.state=this.state,ea)],"map-view"),this._updateStageChildren();const d=this._resolveWhenReady;this._resolveWhenReady=[],d.forEach(g=>g(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const t=new mQ(i9.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const e=new VC({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new GC(t)});this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const e of this.allLayerViews)e.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const e of this.allLayerViews)e.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};We.type="2d",b([S({readOnly:!0})],We.prototype,"animationManager",void 0),b([S({constructOnly:!0})],We.prototype,"deactivatedWebGLExtensions",void 0),b([S({constructOnly:!0})],We.prototype,"debugWebGLExtensions",void 0),b([S({readOnly:!0})],We.prototype,"featuresTilingScheme",void 0),b([S({readOnly:!0})],We.prototype,"fullOpacity",void 0),b([S({readOnly:!0})],We.prototype,"graphicsTileStore",null),b([S()],We.prototype,"graphicsView",void 0),b([S()],We.prototype,"stateManager",void 0),b([S()],We.prototype,"constraintsInfo",null),b([S({readOnly:!0})],We.prototype,"state",null),b([S()],We.prototype,"initialExtentRequired",null),b([S()],We.prototype,"labelManager",void 0),b([S({readOnly:!0})],We.prototype,"resourceManager",null),b([S({readOnly:!0})],We.prototype,"textureManager",null),b([S({readOnly:!0})],We.prototype,"mapViewNavigation",void 0),b([S({constructOnly:!0})],We.prototype,"renderCanvas",void 0),b([S()],We.prototype,"renderingOptions",void 0),b([S({readOnly:!0})],We.prototype,"rendering",void 0),b([S({constructOnly:!0})],We.prototype,"supersampleScreenshotsEnabled",void 0),b([S({readOnly:!0})],We.prototype,"supportsGround",void 0),b([S()],We.prototype,"_stationaryTimer",void 0),b([S()],We.prototype,"_defaultsFromMapSettings",null),b([S()],We.prototype,"_pePromise",void 0),b([S({readOnly:!0})],We.prototype,"typeSpecificPreconditionsReady",null),b([S()],We.prototype,"animation",null),b([S({type:$re})],We.prototype,"background",null),b([S()],We.prototype,"center",null),b([S({type:SO})],We.prototype,"constraints",null),b([S()],We.prototype,"extent",null),b([S()],We.prototype,"floors",void 0),b([S({type:UO})],We.prototype,"highlightOptions",void 0),b([S({readOnly:!0})],We.prototype,"inputManager",void 0),b([S()],We.prototype,"map",void 0),b([S()],We.prototype,"padding",null),b([S()],We.prototype,"resizeAlign",null),b([S({readOnly:!0})],We.prototype,"resolution",null),b([S()],We.prototype,"rotation",null),b([S()],We.prototype,"scale",null),b([S({constructOnly:!0})],We.prototype,"spatialReferenceLocked",void 0),b([S()],We.prototype,"stationary",null),b([S({type:qO,readOnly:!0})],We.prototype,"timeline",void 0),b([S({readOnly:!0})],We.prototype,"type",void 0),b([S({readOnly:!0})],We.prototype,"updating",null),b([S()],We.prototype,"viewpoint",null),b([S()],We.prototype,"zoom",null),b([S({readOnly:!0})],We.prototype,"navigating",null),b([S(),Ft(t=>t instanceof DC?t:xh(FC,t))],We.prototype,"ui",void 0),We=b([J("esri.views.MapView")],We);const Mre=We;function A9(t){var i,s;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((s=t.sourceLayer)==null?void 0:s.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function q7(t,e,i,s,a){return d=>{if(d instanceof Nr){if(d.layer===t)a==null||a();else{const y=t.allLayerViews.find(g=>g.layer===d.layer);y&&(s==null||s(y))}i(A9(d))}else{const y=t.allLayerViews.find(g=>g.layer===d);y&&e(y)}}}function B7(t,e){if(t)if(Tg(t))for(const i of t)if(Tg(i))for(const s of i)e(s);else e(i);else e(t)}function Ire(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}function Ere(t,e){for(var i=0;i<e.length;i++){const s=e[i];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const d=Object.getOwnPropertyDescriptor(s,a);d&&Object.defineProperty(t,a,d.get?d:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var rg={exports:{}};rg.exports,function(t,e){function i(){function a(h){if(typeof h=="number")return q.Uc.ah(h);if(h==null)return null;if(qs[h]!=null)return q.Uc.ah(qs[h]);throw Error("Unrecognised Unit Type")}function d(h){if(typeof h=="number")return q.Uc.ah(h);if(h==null)return null;if(o1[h]!=null)return q.Uc.ah(o1[h]);throw Error("Unrecognised Unit Type")}function y(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function g(h,k,v,u){if(v==null||v.B())return null;switch(v.K()){case q.sn.Point:return h.exportPoint(k,v,u);case q.sn.Polygon:return h.exportPolygon(k,v,u);case q.sn.Polyline:return h.exportPolyline(k,v,u);case q.sn.MultiPoint:return h.exportMultipoint(k,v,u);case q.sn.Envelope:return h.exportExtent(k,v,u)}return null}function _(h,k,v,u){if(v.K()!==q.sn.Point)throw Error("Geometry not Point");return h.exportPoint(k,v,u)}function x(h,k,v){return h.convertToGEGeometry(k,v)}function I(h){var k=h.wkid;h=h.wkt;var v=To.get(k||h);return v==null&&(k!==-1&&k!=null?(v=q.Gg.create(k),To.set(k,v)):h&&(v=q.Gg.lP(h),To.set(h,v)),Ma.has(k||h)&&v.QW(Ma.get(k||h))),v}function A(h){var k;if(h==null)return null;var v=I(h);return h=v.Id(),v=v.Mn(),(k={}).tolerance=v,k.unitType=h==null?-1:h.pd,k.unitID=h==null?-1:h.Fc(),k.unitBaseFactor=h==null?0:h.ci,k.unitSquareDerivative=h==null?0:q.Uc.WF(h).Fc(),k}function C(h,k,v,u){return v==null?null:(v=q.ac.clip(x(h,be,v),x(h,be,u),I(k)),g(h,be,v,k))}function N(h,k,v,u){v=q.ac.fl(x(h,be,v),x(h,be,u),I(k)),u=[];for(var o=0;o<v.length;o++)u.push(g(h,be,v[o],k));return u}function j(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.contains(x(h,be,v),x(h,be,u),I(k))}function D(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.wP(x(h,be,v),x(h,be,u),I(k))}function V(h,k,v,u,o){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.ub(x(h,be,v),x(h,be,u),I(k),a(o))}function W(h,k,v,u){return!(v==null&&u!=null||u==null&&v!=null)&&q.ac.Nb(x(h,be,v),x(h,be,u),I(k))}function K(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.OS(x(h,be,v),x(h,be,u),I(k))}function Y(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.touches(x(h,be,v),x(h,be,u),I(k))}function ee(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.mY(x(h,be,v),x(h,be,u),I(k))}function re(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.OP(x(h,be,v),x(h,be,u),I(k))}function se(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.yU(x(h,be,v),x(h,be,u),I(k))}function ue(h,k,v,u,o){if(v==null||u==null)throw Error("Illegal Argument Exception");return q.ac.tB(x(h,be,v),x(h,be,u),I(k),o)}function de(h,k,v){if(v==null)throw Error("Illegal Argument Exception");return q.ac.ZS(x(h,be,v),I(k))}function we(h,k,v){if(v==null)throw Error("Illegal Argument Exception");return v=q.ac.$B(x(h,be,v),I(k)),g(h,be,v,k)}function Oe(h,k,v,u){if(u===void 0&&(u=!1),v==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){var o=u,r=[];for(u=0;u<v.length;u++)r.push(x(h,be,v[u]));for(v=q.ac.eP(r,o),o=Array(v.length),u=0;u<v.length;u++)o[u]=g(h,be,v[u],k);return o}return u=q.ac.dP(x(h,be,v),I(k)),g(h,be,u,k)}function Ne(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(x(h,be,v[r]));for(v=q.ac.LP(o,x(h,be,u),I(k)),u=Array(v.length),r=0;r<v.length;r++)u[r]=g(h,be,v[r],k);return u}return r=q.ac.km(x(h,be,v),x(h,be,u),I(k)),g(h,be,r,k)}function Le(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(x(h,be,v[r]));for(v=q.ac.RX(o,x(h,be,u),I(k)),u=Array(v.length),r=0;r<v.length;r++)u[r]=g(h,be,v[r],k);return u}return r=q.ac.gp(x(h,be,v),x(h,be,u),I(k)),g(h,be,r,k)}function Be(h,k,v,u){if(v==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(v)){for(var o=[],r=0;r<v.length;r++)o.push(x(h,be,v[r]));for(v=q.ac.MS(o,x(h,be,u),I(k)),u=Array(v.length),r=0;r<v.length;r++)u[r]=g(h,be,v[r],k);return u}return r=q.ac.Fa(x(h,be,v),x(h,be,u),I(k)),g(h,be,r,k)}function Pe(h,k,v,u){if(v==null)return null;var o=[];if(Array.isArray(v)){if(v.length===0)return null;for(u=0;u<v.length;u++)o.push(x(h,be,v[u]))}else o.push(x(h,be,v)),u!=null&&o.push(x(h,be,u));return g(h,be,q.ac.fY(o,I(k)),k)}function dt(h,k,v,u,o,r,n,l){var c=0;if(r!=null)switch(r){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(v)){if(v==null)h=null;else if(v.length===0)h=[];else{var p=[];for(r=0;r<v.length;r++)p.push(x(h,be,v[r]));for(v=q.ac.wU(p,I(k),u,c,n,l,a(o)),u=Array(v.length),r=0;r<v.length;r++)u[r]=g(h,be,v[r],k);h=u}return h}return v=q.ac.offset(x(h,be,v),I(k),u,c,n,l,a(o)),g(h,be,v,k)}function hi(h,k,v,u,o,r){if(r===void 0&&(r=!1),Array.isArray(v)){if(!Array.isArray(u)){for(var n=[],l=0;l<v.length;l++)n.push(u);u=n}if(u.length!=v.length){if(u.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(l=0;l<v.length;l++)u[l]===void 0?n.push(c):(n.push(u[l]),c=u[l]);u=n}return at(h,k,v,u,o,!1,r,"geodesic",NaN)}return v=q.ac.buffer(x(h,be,v),I(k),u,a(o),!1,0,NaN),g(h,be,v,k)}function kt(h,k,v,u,o,r,n,l){if(Array.isArray(v)){if(!Array.isArray(u)){for(var c=[],p=0;p<v.length;p++)c.push(u);u=c}if(u.length!==v.length){if(u.length===0)throw Error("Illegal Argument Exception");c=[];var f=0;for(p=0;p<v.length;p++)u[p]===void 0?c.push(f):(c.push(u[p]),f=u[p]);u=c}return at(h,k,v,u,o,!0,r,n,l)}return n===void 0&&(n=NaN),v=q.ac.buffer(x(h,be,v),I(k),u,a(o),!0,y(r),n),g(h,be,v,k)}function at(h,k,v,u,o,r,n,l,c){if(c===void 0&&(c=NaN),v==null)return null;if(v.length===0)return[];for(var p=[],f=0;f<v.length;f++)p.push(x(h,be,v[f]));for(v=q.ac.HN(p,I(k),u,a(o),r,n,y(l),c),u=Array(v.length),f=0;f<v.length;f++)u[f]=g(h,be,v[f],k);return u}function er(h,k,v,u,o){var r;return o===void 0&&(o=!0),v=q.ac.iz(x(h,be,v),x(h,be,u),o),(r={}).coordinate=_(h,be,v.az(),k),r.distance=v.cz(),r.isRightSide=v.Nz(),r.vertexIndex=v.Va(),r.isEmpty=v.B(),r}function Zh(h,k,v,u){var o;return v=q.ac.jz(x(h,be,v),x(h,be,u)),(o={}).coordinate=_(h,be,v.az(),k),o.distance=v.cz(),o.isRightSide=v.Nz(),o.vertexIndex=v.Va(),o.isEmpty=v.B(),o}function $o(h,k,v,u,o,r){var n;for(v=q.ac.kz(x(h,be,v),x(h,be,u),o,r),u=[],o=0;o<v.length;o++)v[o].B()===!1&&u.push(((n={}).coordinate=_(h,be,v[o].az(),k),n.distance=v[o].cz(),n.isRightSide=v[o].Nz(),n.vertexIndex=v[o].Va(),n.isEmpty=v[o].B(),n));return u}function Kp(h,k,v,u,o,r){return v=q.ac.LQ(x(h,be,v),I(k),u,o,a(r)),g(h,be,v,k)}function i1(h,k,v,u,o){return v=q.ac.Sr(x(h,be,v),I(k),u,a(o)),g(h,be,v,k)}function Kv(h,k,v,u,o,r){return r===void 0&&(r=0),v=q.ac.Ry(x(h,be,v),I(k),u,a(o),r),g(h,be,v,k)}function Yv(h,k,v,u){if(v==null)throw Error("Illegal Argument Exception");return q.ac.EU(x(h,be,v),I(k),d(u))}function Zv(h,k,v,u){if(v==null)throw Error("Illegal Argument Exception");return q.ac.FU(x(h,be,v),I(k),a(u))}function r1(h,k,v,u,o){if(v==null)throw Error("Illegal Argument Exception");return q.ac.RQ(x(h,be,v),I(k),d(u),y(o))}function Xv(h,k,v,u,o){if(v==null)throw Error("Illegal Argument Exception");return q.ac.UQ(x(h,be,v),I(k),a(u),y(o))}function Qv(h){q.IL.bind(h)}function e2(h,k,v,u,o){var r=null,n=null;if(u){if(!o)throw q.i.O("AOI missing Spatial Reference");r=x(h,be,u),n=I(o).hh()}return(h=q.iu.SR(I(k).hh(),I(v).hh(),r,n))!==null?h:null}function t2(h,k,v,u,o){var r=null,n=null;if(u){if(!o)throw q.i.O("AOI missing Spatial Reference");r=x(h,be,u),n=I(o).hh()}return q.iu.TR(I(k).hh(),I(v).hh(),r,n)}function i2(h,k,v,u,o,r){if(o===void 0&&(o=null),r===void 0&&(r=null),r){var n=new q.tC;n.Xu=r.densificationStep,n.Lr=r.centralMeridianOfOutputGCS,r.clipWithInputHorizon&&n.KW(r.clipWithInputHorizon),r.clipWithOutputHorizon&&n.LW(r.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(k.length===0)return[];if(o){if(!(r=o.getCachedGeTransformation(v,u)))e:{if(r=o,o=null,r){var l=r.getGTListEntry();if(l!==null){o=new q.rC(null);for(var c=0,p=l.steps;c<p.length;c++){l=p[c];var f=new q.Cx(l.geogtran);l.isInverse&&f.Lz(),o.add(f)}n=q.xr.Pr(I(v).hh(),I(u).hh(),o,n),r.assignCachedGe(v,u,n),r=n;break e}}if(o===null&&r&&r.steps&&0<r.steps.length){for(o=new q.rC(null),c=0,p=r.steps;c<p.length;c++)(l=p[c]).wkid!=-1&&l.wkid!=null?o.add(q.Cx.create(l.wkid,l.isInverse)):o.add(q.Cx.pP(l.wkt,l.isInverse));n=q.xr.Pr(I(v).hh(),I(u).hh(),o,n),r.assignCachedGe(v,u,n),r=n}else r=q.xr.Pr(I(v).hh(),I(u).hh(),o,n)}for(v=[],o=0;o<k.length;o++)n=k[o],v.push(s1(h,n,u,r))}else for(r=q.xr.Pr(I(v).hh(),I(u).hh(),null),v=[],o=0;o<k.length;o++)n=k[o],v.push(s1(h,n,u,r));return v}function s1(h,k,v,u){return k=q.ac.Bh(x(h,be,k),u),g(h,be,k,v)}function r2(h,k){h!=null&&(h=h.wkid||h.wkt,Ma.has(h),Ma.set(h,k),To.has(h)&&To.delete(h))}function s2(h){h!=null&&(h=h.wkid||h.wkt,Ma.has(h)&&(Ma.delete(h),To.has(h)&&To.delete(h)))}function n2(h,k,v,u){if(v==null||u==null)return[];var o=[],r=0;for(v=q.ac.LS(x(h,be,v),x(h,be,u),I(k))||[];r<v.length;r++)o.push(g(h,be,v[r],k));return o}var Ei,q,hr,n1,wt=this&&this.__extends||function(){function h(k,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var r in o)o.hasOwnProperty(r)&&(u[r]=o[r])})(k,v)}return function(k,v){function u(){this.constructor=k}h(k,v),k.prototype=v===null?Object.create(v):(u.prototype=v.prototype,new u)}}();(function(h){var k;(k=h.sn||(h.sn={}))[k.Unknown=0]="Unknown",k[k.Point=33]="Point",k[k.Line=322]="Line",k[k.Envelope=197]="Envelope",k[k.MultiPoint=550]="MultiPoint",k[k.Polyline=1607]="Polyline",k[k.Polygon=1736]="Polygon",function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"}(h.TK||(h.TK={}));var v=function(){function u(){this.description=null,this.QA=0}return u.prototype.K=function(){return 0},u.prototype.Eb=function(){return-1},u.prototype.Pf=function(o){this.wc(),o!=this.description&&this.un(o)},u.prototype.un=function(){},u.prototype.Ll=function(o){this.wc(),o!=this.description&&(o=h.fe.xR(this.description,o))!=this.description&&this.un(o)},u.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},u.prototype.se=function(o){this.wc(),this.description.hasAttribute(o)||(o=h.fe.wR(this.description,o),this.un(o))},u.prototype.Vg=function(){return null},u.prototype.dn=function(){},u.prototype.A=function(){},u.prototype.So=function(){},u.prototype.yc=function(o){this.A(o)},u.prototype.B=function(){return!0},u.prototype.Pa=function(){},u.prototype.Pc=function(){},u.prototype.Ja=function(){return null},u.prototype.copyTo=function(){},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.dG=function(){return this.hasAttribute(1)},u.uf=function(o){return 1+((192&o)>>6)>>1},u.Tn=function(o){return(32&o)!=0},u.PS=function(o){return(128&o)!=0},u.zd=function(o){return(256&o)!=0},u.zj=function(o){return(512&o)!=0},u.Ic=function(o){return(1024&o)!=0},u.prototype.Qf=function(){var o=this.Ja();return this.copyTo(o),o},u.prototype.ng=function(){return null},u.kg=function(o){var r=o.Ja();return o.copyTo(r),r},u.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},u.zx=function(o){var r=o.K();if(u.zj(r))return o.I();if(o.B())return 0;if(r==197)return 4;if(r==33)return 1;if(u.zd(r))return 2;throw h.i.ga("missing type")},u}();h.ba=v})(q||(q={})),hr=q||(q={}),n1=function(){function h(){this.y=this.x=0}return h.construct=function(k,v){var u=new h;return u.x=k,u.y=v,u},h.cl=function(k){var v=new h;return v.x=k.x,v.y=k.y,v},h.prototype.na=function(k,v){this.x=k,this.y=v},h.prototype.N=function(k){this.x=k.x,this.y=k.y},h.prototype.hq=function(k,v){return this.x===k&&this.y===v},h.prototype.Mz=function(k){return 2220446049250313e-31>=Math.abs(this.x-k.x)&&2220446049250313e-31>=Math.abs(this.y-k.y)},h.prototype.rb=function(k){return this.x===k.x&&this.y===k.y},h.prototype.Nb=function(k){return k==this||k instanceof h&&this.x==k.x&&this.y==k.y},h.prototype.sub=function(k){this.x-=k.x,this.y-=k.y},h.prototype.vc=function(k,v){this.x=k.x-v.x,this.y=k.y-v.y},h.prototype.add=function(k,v){v!==void 0?(this.x=k.x+v.x,this.y=k.y+v.y):(this.x+=k.x,this.y+=k.y)},h.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},h.prototype.nt=function(k){this.x=-k.x,this.y=-k.y},h.prototype.IS=function(k,v,u){this.x=k.x*(1-u)+v.x*u,this.y=k.y*(1-u)+v.y*u},h.prototype.Dt=function(k,v){this.x=this.x*k+v.x,this.y=this.y*k+v.y},h.prototype.BW=function(k,v,u){this.x=v.x*k+u.x,this.y=v.y*k+u.y},h.prototype.scale=function(k){this.x*=k,this.y*=k},h.prototype.compare=function(k){return this.y<k.y?-1:this.y>k.y?1:this.x<k.x?-1:this.x>k.x?1:0},h.prototype.normalize=function(){var k=this.length();k==0&&(this.x=1,this.y=0),this.x/=k,this.y/=k},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Uk=function(){return this.x*this.x+this.y*this.y},h.ub=function(k,v){return Math.sqrt(this.zc(k,v))},h.Jy=function(k,v,u,o){return k-=u,v-=o,Math.sqrt(k*k+v*v)},h.prototype.Sh=function(k){return this.x*k.x+this.y*k.y},h.prototype.aD=function(k){return Math.abs(this.x*k.x)+Math.abs(this.y*k.y)},h.prototype.yi=function(k){return this.x*k.y-this.y*k.x},h.prototype.Ct=function(k,v){var u=-this.x*v+this.y*k;this.x=this.x*k+this.y*v,this.y=u},h.prototype.Jv=function(){var k=this.x;this.x=-this.y,this.y=k},h.prototype.HG=function(k){this.x=-k.y,this.y=k.x},h.prototype.cr=function(){var k=this.x;this.x=this.y,this.y=-k},h.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.pu=function(k,v){var u=k.su(),o=v.su();return o==u?0>(k=k.yi(v))?1:0<k?-1:0:u<o?-1:1},h.zc=function(k,v){var u=k.x-v.x;return u*u+(k=k.y-v.y)*k},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Sc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(k,v){var u=h.ub(k,v),o=h.construct(this.x,this.y);if(u==0)return h.ub(o,k);var r=new h;return r.N(v),r.sub(k),o.sub(k),o.yi(r)/u},h.Wq=function(k,v,u){var o=new hr.Xb;o.set(v.x),o.sub(k.x);var r=new hr.Xb;r.set(u.y),r.sub(k.y);var n=new hr.Xb;n.set(v.y),n.sub(k.y);var l=new hr.Xb;return l.set(u.x),l.sub(k.x),o.Bg(r),n.Bg(l),o.sub(n),o.rs()?(o=new hr.jp(v.x),r=new hr.jp(k.x),n=new hr.jp(k.y),o=o.kt(r),k=(k=new hr.jp(u.y)).kt(n),v=(v=new hr.jp(v.y)).kt(n),u=(u=new hr.jp(u.x)).kt(r),o=o.nr(k),v=v.nr(u),(o=o.nr(v)).iT()?-1:o.aS()?1:0):0>(u=o.value())?-1:0<u?1:0},h.prototype.dc=function(){return hr.P.wj(hr.P.wj())},h}(),hr.h=n1,function(h){var k=function(){function v(u){this.Ay=this.Ot=0,this.KX=u}return v.prototype.reset=function(){this.Ay=this.Ot=0},v.prototype.add=function(u){u-=this.Ay;var o=this.Ot+u;this.Ay=o-this.Ot-u,this.Ot=o},v.prototype.sub=function(u){this.add(-u)},v.prototype.tm=function(){return this.KX+this.Ot},v}();h.Ex=k,h.mc=function(){function v(){}return v.En=function(u,o){return 0<=o?Math.abs(u):-Math.abs(u)},v.sign=function(u){return 0>u?-1:0<u?1:0},v.MK=function(u){return u-360*Math.floor(u/360)},v.round=function(u){return Math.floor(u+.5)},v.ox=function(u){return u*u},v.jq=function(u,o,r){return .5>=r?u+(o-u)*r:o-(o-u)*(1-r)},v.JG=function(u,o,r,n){.5>=r?(n.x=u.x+(o.x-u.x)*r,n.y=u.y+(o.y-u.y)*r):(n.x=o.x-(o.x-u.x)*(1-r),n.y=o.y-(o.y-u.y)*(1-r))},v.gT=function(u,o,r,n,l,c){.5>=l?(c.x=u+(r-u)*l,c.y=o+(n-o)*l):(c.x=r-(r-u)*(1-l),c.y=n-(n-o)*(1-l))},v}()}(q||(q={})),function(h){var k=function(v){function u(){var o=v.call(this)||this;return o.ta=0,o.oa=0,o.qa=0,o.ma=0,o.la=null,o}return wt(u,v),u.prototype.bc=function(){return h.h.construct(this.ta,this.oa)},u.prototype.$p=function(o){o.x=this.ta,o.y=this.oa},u.prototype.Ec=function(o){this.gm(0,o)},u.prototype.UB=function(o,r){this.gm(0,h.h.construct(o,r))},u.prototype.Vo=function(o){this.cD(0,o)},u.prototype.setStart=function(o){this.pD(0,o)},u.prototype.yv=function(o,r){return this.Pd(0,o,r)},u.prototype.TB=function(o,r,n){this.vn(0,o,r,n)},u.prototype.xc=function(){return h.h.construct(this.qa,this.ma)},u.prototype.Vr=function(o){o.x=this.qa,o.y=this.ma},u.prototype.Rc=function(o){this.gm(1,o)},u.prototype.Sl=function(o,r){this.gm(1,h.h.construct(o,r))},u.prototype.Ro=function(o){this.cD(1,o)},u.prototype.setEnd=function(o){this.pD(1,o)},u.prototype.jv=function(o,r){return this.Pd(1,o,r)},u.prototype.JB=function(o,r,n){this.vn(1,o,r,n)},u.prototype.Eb=function(){return 1},u.prototype.B=function(){return this.Bc()},u.prototype.Pa=function(){},u.prototype.He=function(){return 0},u.prototype.Fa=function(o,r,n,l,c){return this.FM(o,r,n,l,c)},u.prototype.isIntersecting=function(o,r){return this.Br(o,r,!1)!=0},u.prototype.ss=function(o,r){return this.tu(o,r,!1)},u.prototype.tu=function(){return null},u.prototype.Bc=function(){return!1},u.prototype.$x=function(o){if(this.wc(),this.la==null&&0<o)this.la=h.P.mg(2*o);else if(this.la!=null&&this.la.length<2*o){for(var r=this.la.slice(0),n=this.la.length;n<2*o;n++)r[n]=0;this.la=r}},u.bM=function(o,r,n){if(0<n)var l=0;for(var c=0;c<n;c++)r[0+l]=o[0],l++},u.prototype.gm=function(o,r){o!=0?(this.qa=r.x,this.ma=r.y):(this.ta=r.x,this.oa=r.y)},u.prototype.un=function(o){if(this.la!=null){for(var r=h.fe.Kw(o,this.description),n=[],l=u.Ig(this.description,0),c=u.Ig(this.description,1),p=u.Ig(o,0),f=u.Ig(o,1),m=0,w=1,$=o.Ba;w<$;w++){var T=o.ld(w),E=h.sa.Wa(T);if(r[w]==-1){var O=h.sa.te(T);for(T=0;T<E;T++)n[p+m]=O,n[f+m]=O,m++}else for(O=this.description.bk(r[w])-2,T=0;T<E;T++)n[p+m]=this.la[l+O],n[f+m]=this.la[c+O],m++,O++}this.la=n}this.description=o},u.prototype.cD=function(o,r){if(this.Bc())throw h.i.ga("empty geometry");r.Pf(this.description),r.Bc()&&r.wn();for(var n=0;n<this.description.Ba;n++)for(var l=this.description.Fd(n),c=0,p=h.sa.Wa(l);c<p;c++){var f=this.Pd(o,l,c);r.setAttribute(l,c,f)}},u.prototype.pD=function(o,r){if(this.wc(),r.Bc())throw h.i.ga("empty geometry");for(var n=r.description,l=0,c=n.Ba;l<c;l++)for(var p=n.Fd(l),f=h.sa.Wa(p),m=0;m<f;m++){var w=r.Vc(p,m);this.vn(o,p,m,w)}},u.prototype.Pd=function(o,r,n){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.ma:this.qa:n!=0?this.oa:this.ta;if(n>=h.sa.Wa(r))throw h.i.de();var l=this.description.Rf(r);return 0<=l?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.bk(l)-2+n]):h.sa.te(r)},u.prototype.vn=function(o,r,n,l){if(this.wc(),n>=h.sa.Wa(r))throw h.i.de();var c=this.description.Rf(r);0>c&&(this.se(r),c=this.description.Rf(r)),r==0?o!=0?n!=0?this.ma=l:this.qa=l:n!=0?this.oa=l:this.ta=l:(this.la==null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.bk(c)-2+n]=l)},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();o.description=this.description,o.$x(this.description.Be.length-2),u.bM(this.la,o.la,2*(this.description.Be.length-2)),o.ta=this.ta,o.oa=this.oa,o.qa=this.qa,o.ma=this.ma,o.wc(),this.qp(o)},u.prototype.Vg=function(o,r){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(n.pa=this.Pd(0,o,r),n.wa=n.pa,n.Nk(this.Pd(1,o,r)),n)},u.prototype.UI=function(o){this.Bc()?o.Pa():(o.pa=this.Pd(0,0,0),o.wa=o.pa,o.Nk(this.Pd(1,0,0)))},u.prototype.Vw=function(o,r){r.Pf(this.description),r.Db(this.ic(o));for(var n=1,l=this.description.Ba;n<l;n++)for(var c=this.description.Fd(n),p=h.sa.Wa(c),f=0;f<p;f++){var m=this.Vc(o,c,f);r.setAttribute(c,f,m)}},u.prototype.AM=function(o){if(this.description!=o.description||this.ta!=o.ta||this.qa!=o.qa||this.oa!=o.oa||this.ma!=o.ma)return!1;for(var r=0;r<2*(this.description.Be.length-2);r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},u.prototype.reverse=function(){var o=this.ta;this.ta=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=1;for(var r=this.description.Ba;o<r;o++)for(var n=this.description.ld(o),l=0,c=h.sa.Wa(n);l<c;l++){var p=this.Pd(0,n,l),f=this.Pd(1,n,l);this.vn(0,n,l,f),this.vn(1,n,l,p)}},u.prototype.Br=function(o,r,n){var l=o.K();if(this.K()===322){if(l==322)return h.zb.JM(this,o,r,n);throw h.i.Ra()}throw h.i.Ra()},u.prototype.FM=function(o,r,n,l,c){var p=o.K();if(this.K()===322){if(p==322)return h.zb.Yx(this,o,r,n,l,c);throw h.i.Ra()}throw h.i.Ra()},u.prototype.Sx=function(){return null},u.Ig=function(o,r){return r*(o.Be.length-2)},u.prototype.ic=function(o,r){if(r===void 0)return r=new h.h,this.ic(o,r),r;h.mc.gT(this.ta,this.oa,this.qa,this.ma,o,r)},u.prototype.ge=function(){return null},u.prototype.$F=function(){return null},u.prototype.fq=function(){return null},u.prototype.Di=function(){return null},u.prototype.Rn=function(){return null},u.prototype.lg=function(){return null},u.prototype.Tx=function(o,r){return r!==void 0?this.ux(r)-this.ux(o):this.ux(o)},u.prototype.qp=function(){},u.prototype.fl=function(){return null},u.prototype.dh=function(){},u.prototype.Vc=function(){return null},u.prototype.Me=function(){return null},u.prototype.ux=function(){return null},u.prototype.IG=function(){return null},u.prototype.ub=function(o,r){if(!r&&this.Br(o,0,!1)!=0)return 0;r=17976931348623157e292;var n=this.bc(),l=o.ge(n,!1);return n.sub(o.ic(l)),(n=n.length())<r&&(r=n),n=this.xc(),l=o.ge(n,!1),n.sub(o.ic(l)),(n=n.length())<r&&(r=n),n=o.bc(),l=this.ge(n,!1),n.sub(this.ic(l)),(n=n.length())<r&&(r=n),n=o.xc(),l=this.ge(n,!1),n.sub(this.ic(l)),(n=n.length())<r&&(r=n),r},u.prototype.ng=function(){return h.si.im(this,null)},u}(h.ba);h.NC=k}(q||(q={})),new q.h,function(h){var k;(k=h.VK||(h.VK={}))[k.Unknown=-1]="Unknown",k[k.Not=0]="Not",k[k.Weak=1]="Weak",k[k.Strong=2]="Strong",function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"}(h.HK||(h.HK={}));var v=function(u){function o(){var r=u.call(this)||this;return r.Jm=65535,r.xa=0,r.Rg=-1,r.Cb=null,r}return wt(o,u),o.prototype.qp=function(){},o.prototype.Zx=function(){},o.prototype.ey=function(){},o.prototype.I=function(){return this.xa},o.prototype.B=function(){return this.Bc()},o.prototype.Bc=function(){return this.xa==0},o.prototype.ck=function(r){return(this.Jm&r)!=0},o.prototype.Nf=function(r,n){this.Jm=n?this.Jm|r:this.Jm&~r},o.prototype.oc=function(){this.ck(32)&&this.XM()},o.prototype.vx=function(){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.")},o.prototype.we=function(r,n){if(0>r||r>=this.xa)throw h.i.ga("index out of bounds");this.oc(),n.Pf(this.description),n.B()&&n.wn();for(var l=0;l<this.description.Ba;l++)for(var c=this.description.Fd(l),p=0,f=h.sa.Wa(c);p<f;p++){var m=this.Aa[l].gg(f*r+p);n.setAttribute(c,p,m)}},o.prototype.It=function(r,n){this.oc();for(var l=n.description,c=0;c<l.Ba;c++)for(var p=l.Fd(c),f=h.sa.Wa(p),m=0;m<f;m++){var w=n.Vc(p,m);this.setAttribute(p,r,m,w)}},o.prototype.D=function(r,n){if(0>r||r>=this.I())throw h.i.de();this.oc(),this.Aa[0].uc(2*r,n)},o.prototype.Oa=function(r){var n=new h.h;return this.D(r,n),n},o.prototype.Hc=function(r,n){this.Aa[0].uc(2*r,n)},o.prototype.Db=function(r,n,l){if(0>r||r>=this.xa)throw h.i.de();this.oc();var c=this.Aa[0];l!==void 0?(c.write(2*r,n),c.write(2*r+1,l)):c.Vt(2*r,n),this.Qc(1993)},o.prototype.xz=function(){if(void 0>=this.I())throw h.i.de();this.oc();var r=this.Aa[0],n=new h.Od;return n.x=r.read(NaN),n.y=r.read(NaN),n.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):h.sa.te(1),n},o.prototype.ZB=function(r){if(0>r||r>=this.I())throw h.i.de();this.se(1),this.oc(),this.Qc(1993);var n=this.Aa[0];n.write(2*r,(void 0).x),n.write(2*r+1,(void 0).y),this.Aa[1].rr(r,(void 0).z)},o.prototype.Vc=function(r,n,l){if(0>n||n>=this.xa)throw h.i.de();var c=h.sa.Wa(r);if(l>=c)throw h.i.de();this.oc();var p=this.description.Rf(r);return 0<=p?this.Aa[p].gg(n*c+l):h.sa.te(r)},o.prototype.tF=function(r,n){return this.Vc(r,n,void 0)},o.prototype.setAttribute=function(r,n,l,c){if(0>n||n>=this.xa)throw h.i.de();var p=h.sa.Wa(r);if(l>=p)throw h.i.de();this.se(r),this.oc(),r=this.description.Rf(r),this.Qc(1993),this.Aa[r].rr(n*p+l,c)},o.prototype.vb=function(r){return this.vx(),this.se(r),this.oc(),this.Aa[this.description.Rf(r)]},o.prototype.kn=function(r,n){if(n!=null&&h.sa.Vp(r)!=n.Vp())throw h.i.O();this.se(r),r=this.description.Rf(r),this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Aa[r]=n,this.Qc(16777215)},o.prototype.un=function(r){var n=null;if(this.Aa!=null){var l=h.fe.Kw(r,this.description);n=[];for(var c=0,p=r.Ba;c<p;c++)l[c]!=-1&&(n[c]=this.Aa[l[c]])}this.description=r,this.Aa=n,this.Rg=-1,this.Qc(16777215)},o.prototype.vD=function(r){this.yu(!0),r instanceof h.l?this.aa.A(r):this.aa.So(r)},o.prototype.WM=function(r){this.yu(!1),r instanceof h.l?this.aa.A(r):this.aa.So(r)},o.prototype.dn=function(r){this.yu(!0),this.aa.copyTo(r)},o.prototype.A=function(r){this.vD(r)},o.prototype.So=function(r){this.vD(r)},o.prototype.yc=function(r){this.WM(r)},o.prototype.Vg=function(r,n){var l=new h.Oc;return this.Bc()?(l.Pa(),l):(this.yu(!0),this.aa.Vg(r,n))},o.prototype.dc=function(){var r=this.description.dc();if(!this.Bc())for(var n=this.I(),l=0,c=this.description.Ba;l<c;l++)r=this.Aa[l].Cn(r,0,n*h.sa.Wa(this.description.Fd(l)));return r},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&this.description.Nb(r.description))||this.Bc()!=r.Bc())return!1;if(this.Bc())return!0;var n=this.I();if(n!=r.I())return!1;for(var l=0;l<this.description.Ba;l++){var c=this.description.ld(l),p=this.vb(c),f=r.vb(c);if(!p.Nb(f,0,n*h.sa.Wa(c)))return!1}return!0},o.prototype.copyTo=function(r){if(r.K()!=this.K())throw h.i.O();this.ZC(r)},o.prototype.ZC=function(r){this.oc(),r.description=this.description,r.Aa=null;var n=this.description.Ba,l=null;if(this.Aa!=null){l=[];for(var c=0;c<n;c++)this.Aa[c]!=null&&(l[c]=this.Aa[c].BB(this.I()*h.sa.Wa(this.description.Fd(c))))}this.aa!=null?(r.aa=this.aa.Ja(),this.aa.copyTo(r.aa)):r.aa=null,r.xa=this.xa,r.Jm=this.Jm,r.Aa=l;try{this.qp(r)}catch{throw r.Pa(),h.i.hu()}},o.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},o.prototype.Qc=function(r){r==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=r,this.gM(),this.wc()},o.prototype.yu=function(r){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new h.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(r);for(var n=1;n<this.description.Ba;n++)for(var l=this.description.Fd(n),c=h.sa.Wa(l),p=this.Aa[n],f=0;f<c;f++){var m=new h.Oc;m.Pa();for(var w=0;w<this.xa;w++){var $=p.gg(w*c+f);m.$b($)}this.aa.setInterval(l,f,m)}r&&this.Nf(192,!1)}},o.prototype.dy=function(){this.aa.Pa();for(var r=this.Aa[0],n=new h.h,l=0;l<this.xa;l++)r.uc(2*l,n),this.aa.$b(n)},o.prototype.Ap=function(r){r.Pa();for(var n=this.Aa[0],l=new h.h,c=0;c<this.xa;c++)n.uc(2*c,l),r.$b(l)},o.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=h.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var r=0;r<this.description.Ba;r++){var n=this.description.Fd(r);if(this.Aa[r]!=null){var l=h.sa.Wa(n),c=h.P.truncate(this.Aa[r].size/l);c<this.xa&&(c=h.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[r].resize(c*l,h.sa.te(n))),c<this.Rg&&(this.Rg=c)}else this.Aa[r]=h.Zc.TE(n,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},o.prototype.fm=function(r){if(0>r)throw h.i.O();r!=this.xa&&(this.xa=r,this.Qc(65535))},o.prototype.qm=function(r){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=r)return this.ck(8)?1:2}return-1},o.prototype.Eh=function(r,n){if(this.LT=n,r==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),r==0)this.Nf(2,!1),this.Nf(4,!1);else if(r==1)this.Nf(2,!0),this.Nf(4,!1);else{if(r!=2)throw h.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},o.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},o.prototype.fD=function(r,n,l,c){if(0>r||r>=this.xa||0>n||n>=this.xa)throw h.i.ga("index out of bounds");this.oc(),c.Pf(this.description),c.B()&&c.wn();for(var p=0;p<this.description.Ba;p++)for(var f=this.description.Fd(p),m=0,w=h.sa.Wa(f);m<w;m++){var $=this.Aa[p].gg(w*r+m),T=this.Aa[p].gg(w*n+m);c.setAttribute(f,m,h.mc.jq($,T,l))}},o.prototype.Ar=function(r,n){var l=this.Aa[0].o,c=l[2*r]-l[2*n];return r=l[2*r+1]-l[2*n+1],Math.sqrt(c*c+r*r)},o.prototype.FR=function(r){if(0>r||r>=this.xa)throw h.i.de();this.oc();var n=new h.Ta;n.Pf(this.description),n.B()&&n.wn();for(var l=0;l<this.description.Ba;l++)for(var c=this.description.ld(l),p=0,f=h.sa.Wa(c);p<f;p++){var m=this.Aa[l].gg(f*r+p);n.setAttribute(c,p,m)}return n},o.prototype.Fh=function(r,n){if(0>r||r>=this.xa)throw h.i.de();if(n.B())throw h.i.O();this.oc();for(var l=n.description,c=0;c<l.Ba;c++)for(var p=l.ld(c),f=h.sa.Wa(p),m=0;m<f;m++){var w=n.Vc(p,m);this.setAttribute(p,r,m,w)}},o.prototype.nu=function(){return null},o.prototype.hj=function(){return null},o}(h.ba);h.Fx=v}(q||(q={})),function(h){var k=function(){function v(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new h.ad(7),this.ao=null}return v.prototype.Xo=function(u){this.ao=u},v.prototype.MP=function(){this.Tv=!1},v.prototype.Ee=function(u){this.ob.Ee(u)},v.prototype.Rr=function(u){var o=this.ob.De();return this.nX(o),this.qX(u,o),o},v.prototype.HP=function(u){this.ob.kd(u)},v.prototype.addElement=function(u,o){return o==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),o=this.Ne),this.AD(u,0,o)},v.prototype.ED=function(u){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(u,1,this.Ne)},v.prototype.zn=function(u){this.Ne==-1&&(this.Ne=this.Rr(-1));var o=this.Ne,r=this.ob.o;if(o==-1||r[7*o]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(r=this.ob.o)[7*o]=u,this.xp(-1,u,o,r),u;var n=o==-1?-1:r[7*o+2];return u=this.ob.Nl([-1,-1,n,u,this.il(),-1,-1]),(r=this.ob.o)[7*n+1]=u,this.ky(u,r),r[7*u+2]===-1&&(r[7*o]=u),this.xp(-1,u,o,r),u},v.prototype.Bu=function(u,o,r,n){var l=-1;l==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),l=this.Ne);var c=this.ob.o;if(l==-1||c[7*l]==-1)return r=this.ob.Nl([-1,-1,-1,r,this.il(),-1,-1]),(c=this.ob.o)[7*l]=r,this.xp(-1,r,l,c),r;if(n){n=o!=-1?this.ao.compare(this,r,o):-1;var p=u!=-1?this.ao.compare(this,r,u):1}else n=-1,p=1;if(n==0||p==0)return c[7*l+3]=n==0?o:u,-1;for((o!=-1&&u!=-1?this.Vm>h.P.XA(this.Vm)>>1:o!=-1)?u=o:n=p,o=!0;;){if(0>n){if((p=c[7*u])==-1){n=u,r=this.ob.Nl([-1,-1,u,r,this.il(),-1,-1]),(c=this.ob.o)[7*u]=r;break}u=p}else{if((p=c[7*u+1])==-1){n=c[7*u+6],r=this.ob.Nl([-1,-1,u,r,this.il(),-1,-1]),(c=this.ob.o)[7*u+1]=r;break}u=p}o&&(n*=-1,o=!1)}return this.ky(r,c),c[7*r+2]===-1&&(c[7*l]=r),this.xp(n,r,l,c),r},v.prototype.AF=function(){return this.dR(this.Ne)},v.prototype.wd=function(u,o){o=o==-1?this.Ne:o,this.Tv?this.GP(u,o):this.eY(u,o)},v.prototype.search=function(u,o){for(o=this.uv(o);o!=-1;){var r=this.ao.compare(this,u,o);if(r==0)return o;o=0>r?this.nl(o):this.Zp(o)}return-1},v.prototype.DW=function(u){for(var o=this.uv(-1),r=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?o=this.nl(o):(r=o,o=this.Zp(o))}return r},v.prototype.pJ=function(u){for(var o=this.uv(-1),r=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?(r=o,o=this.nl(o)):o=this.Zp(o)}return r},v.prototype.ka=function(u){return this.ob.U(u,3)},v.prototype.nl=function(u){return this.ob.U(u,0)},v.prototype.Zp=function(u){return this.ob.U(u,1)},v.prototype.getParent=function(u){return this.ob.U(u,2)},v.prototype.lb=function(u){return this.ob.U(u,6)},v.prototype.xe=function(u){return this.ob.U(u,5)},v.prototype.sc=function(u){return u==-1?this.ml(this.Ne):this.ml(u)},v.prototype.Gc=function(u){return u==-1?this.bs(this.Ne):this.bs(u)},v.prototype.UR=function(u){return u==-1?this.XF(this.Ne):this.XF(u)},v.prototype.Uj=function(u,o){this.IB(u,o)},v.prototype.uv=function(u){return u==-1?this.TF(this.Ne):this.TF(u)},v.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},v.prototype.size=function(u){return u==-1?this.VF(this.Ne):this.VF(u)},v.prototype.FN=function(u,o){for(var r=o[7*u],n=o[7*u+1],l=o[7*u+4];r!=-1||n!=-1;){var c=r!=-1?o[7*r+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,l<=Math.min(c,n))break;c<=n?this.nJ(r,o):this.mJ(u,o),r=o[7*u],n=o[7*u+1]}},v.prototype.ky=function(u,o){if(this.Tv)for(var r=o[7*u+4],n=o[7*u+2];n!=-1&&o[7*n+4]>r;)o[7*n]==u?this.nJ(u,o):this.mJ(n,o),n=o[7*u+2]},v.prototype.mJ=function(u,o){var r=o[7*u+1];o[7*r+2]=o[7*u+2],o[7*u+2]=r;var n=o[7*r];o[7*u+1]=n,n!=-1&&(o[7*n+2]=u),o[7*r]=u,(n=o[7*r+2])!=-1&&(o[7*n]==u?o[7*n]=r:o[7*n+1]=r)},v.prototype.nJ=function(u,o){var r=o[7*u+2];o[7*u+2]=o[7*r+2],o[7*r+2]=u;var n=o[7*u+1];o[7*r]=n,n!=-1&&(o[7*n+2]=r),o[7*u+1]=r,(n=o[7*u+2])!=-1&&(o[7*n]===r?o[7*n]=u:o[7*n+1]=u)},v.prototype.Rk=function(u,o){this.ob.T(u,2,o)},v.prototype.OB=function(u,o){this.ob.T(u,0,o)},v.prototype.SB=function(u,o){this.ob.T(u,1,o)},v.prototype.RB=function(u,o){this.ob.T(u,5,o)},v.prototype.fx=function(u,o){this.ob.T(u,6,o)},v.prototype.SJ=function(u,o){this.ob.T(o,0,u)},v.prototype.nX=function(u){this.ob.T(u,4,0)},v.prototype.qX=function(u,o){this.ob.T(o,5,u)},v.prototype.TF=function(u){return u==-1?-1:this.ob.U(u,0)},v.prototype.ml=function(u){return u==-1?-1:this.ob.U(u,1)},v.prototype.bs=function(u){return u==-1?-1:this.ob.U(u,2)},v.prototype.dR=function(u){return u==-1?-1:this.ob.U(u,3)},v.prototype.VF=function(u){return u==-1?0:this.ob.U(u,4)},v.prototype.XF=function(u){return this.ob.U(u,5)},v.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},v.prototype.hl=function(u){u!=-1&&this.ob.kd(u)},v.prototype.il=function(){return this.Vm=h.P.XA(this.Vm),1073741823&this.Vm},v.prototype.AD=function(u,o,r){var n=this.ob.o;if(r==-1||n[7*r]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(n=this.ob.o)[7*r]=u,this.xp(-1,u,r,n),u;for(var l=r==-1?-1:n[7*r];;){var c=o==-1?1:this.ao.compare(this,u,l);if(0>c){if((c=this.nl(l))==-1){o=l,u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(n=this.ob.o)[7*l]=u;break}l=c}else{if(o==1&&c==0)return n[7*r+3]=l,-1;if((c=n[7*l+1])==-1){o=n[7*l+6],u=this.ob.Nl([-1,-1,l,u,this.il(),-1,-1]),(n=this.ob.o)[7*l+1]=u;break}l=c}}return this.ky(u,n),n[7*u+2]===-1&&(n[7*r]=u),this.xp(o,u,r,n),u},v.prototype.xp=function(u,o,r,n){if(u!=-1){var l=n[7*u+5];n[7*u+5]=o}else l=r==-1?-1:n[7*r+2];n[7*o+5]=l,l!=-1&&(n[7*l+6]=o),n[7*o+6]=u,u==(r==-1?-1:n[7*r+1])&&(n[7*r+1]=o),u==-1&&(n[7*r+2]=o),n[7*r+4]=(r==-1?0:n[7*r+4])+1},v.prototype.vB=function(u,o){var r=this.ob.o,n=r[7*u+5];u=r[7*u+6],n!=-1?r[7*n+6]=u:r[7*o+1]=u,u!=-1?r[7*u+5]=n:r[7*o+2]=n,r[7*o+4]=o===-1?-1:r[7*o+4]-1},v.prototype.eY=function(u,o){this.vB(u,o);var r=this.nl(u),n=this.Zp(u),l=this.getParent(u),c=u;if(r!=-1&&n!=-1){this.Vm=h.P.XA(this.Vm);var p=1073741823<this.Vm?this.lb(u):this.xe(u),f=this.getParent(p)==u;this.ob.bC(u,p,0),this.ob.bC(u,p,1),this.ob.bC(u,p,2),l!=-1?this.nl(l)==u?this.OB(l,p):this.SB(l,p):this.SJ(p,o),f?(r==p?(this.OB(p,u),this.Rk(n,p)):n==p&&(this.SB(p,u),this.Rk(r,p)),this.Rk(u,p),l=p):(this.Rk(r,p),this.Rk(n,p),l=this.getParent(u),c=p),r=this.nl(u),n=this.Zp(u),r!=-1&&this.Rk(r,u),n!=-1&&this.Rk(n,u)}r=r!=-1?r:n,l==-1?this.SJ(r,o):this.nl(l)==c?this.OB(l,r):this.SB(l,r),r!=-1&&this.Rk(r,l),this.hl(u)},v.prototype.GP=function(u,o){var r=this.ob.o;r[7*u+4]=2147483647;var n=-1,l=-1,c=o===-1?-1:r[7*o],p=c==u;if(p&&(n=r[7*c],l=r[7*c+1],n==-1&&l==-1))return this.vB(c,o),this.hl(c),void(r[7*o]=-1);this.FN(u,r),(c=r[7*u+2])!=-1&&(r[7*c]==u?r[7*c]=-1:r[7*c+1]=-1),this.vB(u,o),this.hl(u),p&&(r[7*o]=n==-1||r[7*n+2]!=-1?l:n)},v.prototype.IB=function(u,o){this.ob.T(u,3,o)},v}();h.$j=k}(q||(q={})),function(h){var k=function(){function v(u,o){u!==void 0&&this.L(u,o)}return v.prototype.L=function(u,o){this.pa=u,this.wa=o,this.normalize()},v.prototype.isIntersecting=function(u){return this.pa<=u.pa?this.wa>=u.pa:u.wa>=this.pa},v.prototype.move=function(u){this.B()||(this.pa+=u,this.wa+=u)},v.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var u=this.pa;this.pa=this.wa,this.wa=u}isNaN(this.wa)&&this.Pa()}},v.prototype.Pa=function(){this.wa=this.pa=NaN},v.prototype.B=function(){return isNaN(this.pa)},v.prototype.$b=function(u){typeof u=="number"?this.B()?this.wa=this.pa=u:this.Nk(u):u.B()||(this.B()?(this.pa=u.pa,this.wa=u.wa):(this.pa>u.pa&&(this.pa=u.pa),this.wa<u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa()))},v.prototype.Nk=function(u){u<this.pa?this.pa=u:u>this.wa&&(this.wa=u)},v.prototype.contains=function(u){return typeof u=="number"?u>=this.pa&&u<=this.wa:u.pa>=this.pa&&u.wa<=this.wa},v.prototype.Fa=function(u){this.B()||u.B()?this.Pa():(this.pa<u.pa&&(this.pa=u.pa),this.wa>u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa())},v.prototype.X=function(u){this.B()||(this.pa-=u,this.wa+=u,this.wa<this.pa&&this.Pa())},v.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},v.prototype.FB=function(u,o){u>o?(this.pa=o,this.wa=u):(this.pa=u,this.wa=o)},v.prototype.Kt=function(u){return h.P.Tk(u,this.pa,this.wa)},v.prototype.S=function(){return this.wa-this.pa},v.prototype.tf=function(){return .5*(this.pa+this.wa)},v.prototype.Nb=function(u){return u==this||u instanceof v&&(!(!this.B()||!u.B())||this.pa==u.pa&&this.wa==u.wa)},v.prototype.dc=function(){return h.P.wj(h.P.wj())},v}();h.Oc=k}(q||(q={})),function(h){var k=new h.Oc,v=new h.Oc,u=function(){this.oe=null,this.pb=-1,this.tb=new h.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new h.Oc,this.Wf.FB(0,0)};h.EY=u;var o=function(){function r(n,l,c){this.g=n,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=l,this.Pq=10*l,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=c,this.OA=new u,this.TH=new u,h.P.truncate(3*n.gd/2)}return r.prototype.hG=function(n,l,c,p){n.oe=p===null?null:p[c[5*l]],n.Vv=n.oe!=null,n.Vv||((p=c[5*l+2])!==-1&&this.g.hW(c[5*l],c[5*p],n.tb),n.oe=n.tb,n.Wf.FB(n.tb.ta,n.tb.qa),n.Wf.wa+=this.ra,n.tb.mI(),n.Xv=n.tb.ma==n.tb.oa,n.Xv||(n.lA=(n.tb.qa-n.tb.ta)/(n.tb.ma-n.tb.oa)))},r.prototype.JO=function(n,l){var c=n.Br(l,this.ra,!0);return c!=0?c==2?this.Ly():this.zi():(n.$p(Gs),n.Vr(zn),l.$p(Us),l.Vr(Vn),ci.na(this.Mq,this.Jk),Gs.rb(Us)&&this.Jk==Gs.y?0>zn.compare(Vn)?ci.N(zn):ci.N(Vn):Gs.rb(Vn)&&this.Jk==Gs.y?0>zn.compare(Us)?ci.N(zn):ci.N(Us):Us.rb(zn)&&this.Jk==Us.y?0>Gs.compare(Vn)?ci.N(Gs):ci.N(Vn):zn.rb(Vn)&&this.Jk==zn.y&&(0>Gs.compare(Us)?ci.N(Gs):ci.N(Us)),n.Me(ci.y,ci.x)<l.Me(ci.y,ci.x)?-1:1)},r.prototype.HO=function(n,l){if(n.tb.oa==l.tb.oa&&n.tb.ta==l.tb.ta)return n.tb.ma==l.tb.ma&&n.tb.qa==l.tb.qa?this.bA?this.Ly():0:this.KE(n,l);if(n.tb.ma==l.tb.ma&&n.tb.qa==l.tb.qa)return this.JE(n,l);var c=this.JE(n,l);return n=this.KE(n,l),0>c&&0>n?-1:0<c&&0<n?1:this.zi()},r.prototype.DO=function(n,l){if(n.qa>l.qa){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&n.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(n.qa-n.ta)<this.Pq&&l.xi(n.qa,n.ma,this.ra))return this.zi();return 1},r.prototype.EO=function(n,l){if(n.ta<l.ta){if(l.qa>l.ta&&l.ma-l.oa<2*this.ra&&n.xi(l.qa,l.ma,this.ra))return this.zi()}else if((l.ma-l.oa)/(l.qa-l.ta)*(n.ta-n.qa)<this.Pq&&l.xi(n.ta,n.oa,this.ra))return this.zi();return-1},r.prototype.FO=function(n,l){var c=new h.h;c.vc(l.xc(),l.bc()),c.cr(),c.normalize();var p=new h.h;p.vc(n.bc(),l.bc());var f=new h.h;f.vc(n.xc(),l.bc()),p=p.Sh(c),c=f.Sh(c),f=Math.abs(p);var m=Math.abs(c);if(f<m){if(f<this.Pq&&l.xi(n.ta,n.oa,this.ra))return this.zi()}else if(m<this.Pq&&l.xi(n.qa,n.ma,this.ra))return this.zi();return 0>p&&0>c?-1:0<p&&0<c?1:this.zi()},r.prototype.IE=function(n,l){return n.oa==l.oa&&n.ta==l.ta?this.DO(n,l):n.ma==l.ma&&n.qa==l.qa?this.EO(n,l):this.FO(n,l)},r.prototype.GO=function(n,l){return n.ma==l.ma&&n.qa==l.qa&&n.oa==l.oa&&n.ta==l.ta?this.bA?this.Ly():0:this.zi()},r.prototype.JE=function(n,l){var c=1;if(n.tb.oa<l.tb.oa){c=-1;var p=n;n=l,l=p}n=n.tb,p=l.tb;var f=n.ta-p.ta;l=l.lA*(n.oa-p.oa);var m=this.Pq;return f<l-m?-c:f>l+m?c:p.xi(n.ta,n.oa,this.ra)?this.zi():f<l?-c:c},r.prototype.KE=function(n,l){var c=1;if(l.tb.ma<n.tb.ma){c=-1;var p=n;n=l,l=p}n=n.tb,p=l.tb;var f=n.qa-p.ta;l=l.lA*(n.ma-p.oa);var m=this.Pq;return f<l-m?-c:f>l+m?c:p.xi(n.qa,n.ma,this.ra)?this.zi():f<l?-c:c},r.prototype.Ly=function(){return this.sg=!0,this.Pi=new h.Nd(5,this.No,this.ht),-1},r.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new h.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},r.prototype.IO=function(n,l,c,p){if(this.sg)return-1;var f=this.JH==this.Jk&&this.IH==this.Mq;if(f&&n==this.Ys)var m=this.KH;else m=NaN,this.Ys=-1;return f&&l==this.Zs?f=this.LH:(f=NaN,this.Zs=-1),c.oe.UI(k),p.oe.UI(v),k.wa<v.pa?-1:v.wa<k.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(m)&&(this.Ys=n,this.KH=m=n=c.oe.Me(this.Jk,this.Mq)),isNaN(f)&&(this.Zs=l,this.LH=f=n=p.oe.Me(this.Jk,this.Mq)),Math.abs(m-f)<=this.ra?this.JO(c.oe,p.oe):m<f?-1:m>f?1:0)},r.prototype.Mr=function(){this.sg=!1},r.prototype.tm=function(){return this.Pi},r.prototype.VJ=function(n,l){this.Jk=n,this.Mq=l,this.ht=this.No=this.Zs=this.Ys=-1},r.prototype.compare=function(n,l,c){return this.sg?-1:(n=n.ka(c),this.Fm=c,this.ME(l,l,n,n))},r.prototype.ME=function(n,l,c,p){if(this.No==l)var f=this.OA;else this.No=l,f=this.OA,this.OA.pb=n,this.hG(f,l,this.g.ud.o,this.g.Te);if(m==null){this.ht=p;var m=this.TH;this.TH.pb=c,this.hG(m,p,this.g.ud.o,this.g.Te)}return f.Vv||m.Vv?this.IO(l,p,f,m):f.Wf.wa<m.Wf.pa?-1:m.Wf.wa<f.Wf.pa?1:(n=f.Xv?1:0,(n|=m.Xv?2:0)==0?this.HO(f,m):n==1?this.IE(f.tb,m.tb):n==2?-1*this.IE(m.tb,f.tb):this.GO(f.tb,m.tb))},r}();h.PC=o}(q||(q={})),function(h){var k=function(){function v(u,o){this.g=u,this.ra=o,this.sg=!1,this.No=-1,this.Wf=new h.Oc,this.Iq=new h.h,this.Iq.Sc(),this.je=new h.zb,this.Fm=-1,this.wA=17976931348623157e292}return v.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},v.prototype.Fh=function(u){this.Iq.N(u)},v.prototype.compare=function(u,o){return this.NE(o,u.ka(o))},v.prototype.NE=function(u,o){var r=this.g.cc(o)!=null;if(r||(this.g.fd(o,this.je),this.Wf.FB(this.je.ta,this.je.qa)),r)throw h.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=u,this.sg=!0,0;this.je.mI(),r=this.je.bc(),(o=new h.h).vc(this.je.xc(),r),o.cr();var n=new h.h;return n.vc(this.Iq,r),r=o.Sh(n),(r/=o.length())<10*-this.ra?-1:r>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((o=Math.abs(r))<this.wA&&(this.Fm=u,this.wA=o),this.sg=!0,o<.25*this.ra)?0:0>r?-1:1},v}();h.WL=k}(q||(q={})),function(h){function k(u,o,r,n){r=new Float64Array(u.subarray(r,n)),u.set(r,o)}var v=function(){function u(o){this.Pb=this.rk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Float64Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),l=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)l[c]=r;return n},u.Dn=function(o){var r=new u(0);return r.o=new Float64Array(o.o),r.size=o.size,r},u.Nr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Float64Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Vt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=r}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Cn=function(o,r,n){for(var l=this.size;r<l&&r<n;r++)o=h.P.wj(this.read(r));return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(r,r+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+l+m]}}},u.prototype.On=function(o,r,n,l,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||l%p!=0))throw h.i.O();var m=this.size-f;if(m<l&&this.resize(this.size+l-m),k(this.o,o+l,o,o+(f-o)),this.o==r.o&&o<n&&(n+=l),c)this.o.set(r.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p)for(c-=p,m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]},u.prototype.Dz=function(o,r,n,l,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.Nn=function(o,r,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=r},u.prototype.xj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Wt=function(o,r,n,l,c,p){if(0>o||0>r||0>l||!c&&(0>=p||r%p!=0)||n.size<l+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,l,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},u.prototype.Gn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var l=r>>1,c=0;c<l;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var l=r;l<r+n;l++)this.o[l]=o},u.prototype.Cr=function(o,r,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+r),o),l)))for(n=o,o=o+r-c,l=0,r=h.P.truncate(r/2);l<r;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.qC=function(o,r,n,l,c){if(0>o||0>r||0>l)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=l;l<r;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.pC=function(o,r,n){if(0>o||0>r)throw h.i.O();if(r!=0){this.size<(r<<1)+o&&this.resize((r<<1)+o),r+=0;for(var l=0;l<r;l++)this.o[o]=n[l][0],this.o[o+1]=n[l][1],o+=2}},u.prototype.Xw=function(o,r,n,l,c){if(0>o||0>r||0>l||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[l+c]=this.o[o+c];else for(l=l+r-1;o<r;o++)n[l]=this.o[o],l--},u.prototype.pB=function(o,r,n){if(0>o||0>r||this.size<(r>>1)+o)throw h.i.O();if(r!=0){r=0+r;for(var l=0;l<r;l++)n[l][0]=this.o[o],n[l][1]=this.o[o+1],o+=2}},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,r,n){Array.prototype.sort.call(this.o.subarray(o,r),n)},u.prototype.Vp=function(){return 1},u}();h.ce=v}(q||(q={})),function(h){function k(u,o,r,n){r=new Int32Array(u.subarray(r,n)),u.set(r,o)}h.nY=function(){this.random=1973};var v=function(){function u(o){this.Pb=this.rk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Int32Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),l=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)l[c]=r;return n},u.Dn=function(o){var r=new u(0);return r.o=new Int32Array(o.o),r.size=o.size,r},u.Nr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int32Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Vt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=r}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Cn=function(o,r,n){for(var l=this.size;r<l&&r<n;r++)o=h.P.Vh(this.read(r),o);return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(r,r+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+l+m]}}},u.prototype.On=function(o,r,n,l,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||l%p!=0))throw h.i.O();if(k(this.o,o+l,o,o+(f-o)),this.o==r.o&&o<n&&(n+=l),c)this.o.set(r.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p){c-=p;for(var m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]}},u.prototype.Dz=function(o,r,n,l,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.Nn=function(o,r,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=r},u.prototype.xj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Wt=function(o,r,n,l,c,p){if(0>o||0>r||0>l||!c&&(0>=p||r%p!=0)||n.size<l+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,l,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},u.prototype.Gn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var l=r>>1,c=0;c<l;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var l=r;l<r+n;l++)this.o[l]=o},u.prototype.Cr=function(o,r,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+r),o),l)))for(n=o,o=o+r-c,l=0,r=h.P.truncate(r/2);l<r;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.qC=function(o,r,n,l,c){if(0>o||0>r||0>l)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=l;l<r;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.Xw=function(o,r,n,l,c){if(0>o||0>r||0>l||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[l+c]=this.o[o+c];else for(l=l+r-1;o<r;o++)n[l]=this.o[o],l--},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,r,n){10>r-o?u.mG(this.o,o,r,n):u.lB(this.o,o,r-1,n)},u.prototype.Vp=function(){return 2},u.prototype.Gc=function(){return this.o[this.size-1]},u.prototype.Jf=function(){this.resize(this.size-1)},u.prototype.XW=function(o){this.o[this.size-1]=o},u.prototype.NV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.gF=function(o){for(var r=0,n=this.size;r<n;r++)if(this.o[r]==o)return r;return-1},u.prototype.cG=function(o){return 0<=this.gF(o)},u.mG=function(o,r,n,l){for(var c=r;c<n;c++){for(var p=o[c],f=c-1;f>=r&&0<l(o[f],p);)o[f+1]=o[f],f--;o[f+1]=p}},u.sx=function(o,r,n){var l=o[n];o[n]=o[r],o[r]=l},u.lB=function(o,r,n,l){if(!(r>=n))for(;;){if(9>n-r){u.mG(o,r,n+1,l);break}var c=o[r];u.sx(o,r,n);for(var p=r,f=r;f<n;f++)0>=l(o[f],c)&&(u.sx(o,p,f),p+=1);u.sx(o,p,n),p-r<n-p?(u.lB(o,r,p-1,l),r=p+1):(u.lB(o,p+1,n,l),n=p-1)}},u}();h.ja=v}(q||(q={})),function(h){function k(u,o,r,n){r=new Int8Array(u.subarray(r,n)),u.set(r,o)}var v=function(){function u(o){this.o=null;var r=o;2>r&&(r=2),this.o=new Int8Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),l=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)l[c]=r;return n},u.Dn=function(o){var r=new u(0);return r.o=new Int8Array(o.o),r.size=o.size,r},u.Nr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int8Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Vt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.BB=function(o){return u.Nr(this,o)},u.prototype.gg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=r}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.rk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Cn=function(o,r,n){for(var l=this.size;r<l&&r<n;r++)o=h.P.Vh(this.read(r),o);return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),l)this.o.set(o.o.subarray(r,r+n),p);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+l+m]}}},u.prototype.On=function(o,r,n,l,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||l%p!=0))throw h.i.O();if(k(this.o,o+l,o,o+(f-o)),this.o==r.o&&o<n&&(n+=l),c)this.o.set(r.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=p){c-=p;for(var m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]}},u.prototype.Nn=function(o,r,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,k(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=r},u.prototype.Dz=function(o,r,n,l,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,k(this.o,o+2*l,o,o+(p-o)),c)for(c=0;c<l;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=l-1;c<l;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.xj=function(o,r,n){if(this.Pb)throw h.i.Hb();k(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Wt=function(o,r,n,l,c,p){if(0>o||0>r||0>l||!c&&(0>=p||r%p!=0)||n.size<l+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,l,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[l+f];o+=p,l-=p}},u.prototype.Gn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&k(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var l=r>>1,c=0;c<l;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var l=r;l<r+n;l++)this.o[l]=o},u.prototype.Cr=function(o,r,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+r),o),l)))for(n=o,o=o+r-c,l=0,r=h.P.truncate(r/2);l<r;l++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.qC=function(o,r,n,l,c){if(0>o||0>r||0>l)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=l;l<r;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.Xw=function(o,r,n,l,c){if(0>o||0>r||0>l||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[l+c]=this.o[o+c];else for(l=l+r-1;o<r;o++)n[l]=this.o[o],l--},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.rk=this.Pb=!0},u.prototype.Wd=function(o,r,n){r=this.o.subarray(o,r),Array.prototype.sort.call(r,n),this.o.set(r,o)},u.prototype.uJ=function(o,r){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]|=r},u.prototype.FE=function(o,r){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]&=~r},u.prototype.Vp=function(){return 1},u}();h.rn=v}(q||(q={})),function(h){h.Zc=function(){function k(){}return k.Or=function(v,u){return h.rn.rf(v,u)},k.Fn=function(v,u){return h.ce.rf(v,u)},k.kP=function(v,u,o){switch(v){case 1:v=h.ce.rf(u,o);break;case 2:v=h.ja.rf(u,o);break;case 4:v=h.rn.rf(u,o);break;default:throw h.i.Ra()}return v},k.TE=function(v,u){return k.kP(h.sa.Vp(v),u*h.sa.Wa(v),h.sa.te(v))},k.Qh=function(v,u){return h.ja.rf(v,u)},k.lI=function(v){var u,o=[];for(u=0;u<v;u++)o.push(null);return o},k}()}(q||(q={})),function(h){h.ha=function(k){k===void 0&&(k=0),this.u=k}}(q||(q={})),function(h){h.IL=function(){function k(){}return k.bind=function(v){h.Tc=v.PeDefs,h.qf=v.PeFactory,h.IC=v.PeVertcs,h.gj=v.PeCSTransformations,h.HC=v.PeGTTransformations,h.GL=v.PeGeogtran,h.FL=v.PeFactoryCodechange,h.GC=v.PeGCSExtent,h.Eg=v.PePCSInfo,h.HL=v.PeHorizon,h.EL=v.PeCoordsys,h.np=v.PeGTlistExtended,h.np.PE_GTLIST_OPTS_USE_DEFAULT=128,h.qf.initialize(null),h.Lx=v.PeGTlistExtendedEntry,h.qf.fromString(h.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},k}(),h.qf=null,h.IC=null,h.EL=null,h.HL=null,h.Eg=null,h.np=null,h.Lx=null,h.GC=null,h.FL=null,h.GL=null,h.Tc=null,h.HC=null,h.gj=null}(q||(q={})),function(h){var k=function(){function v(){}return v.Mb=function(u,o){return 0<=o?v.R(u):-v.R(u)},v.R=function(u){return 0>u?-u:u},v.vi=function(u){return 3552713678800501e-30>u},v.FC=function(u,o,r){return v.R(u-o)<=r*(1+(v.R(u)+v.R(o))/2)},v.$=function(u,o){return v.FC(u,o,3552713678800501e-30)},v.AL=function(u){return 3552713678800501e-30>=v.R(u)},v.Dd=function(u){return v.AL(u)},v}();h.s=k,h.F=function(){function v(){}return v.ip=function(u,o){var r=0;return(u=k.R(u))+(o=k.R(o))!=0&&(u>o?(r=o/u,r=u*Math.sqrt(1+r*r)):(r=u/o,r=o*Math.sqrt(1+r*r))),r},v.Yq=function(u,o,r,n,l){for(var c=[0,0,0],p=[0,0,0],f=0;2>=f;f++)o[f]-=u[f],r[f]-=o[f];r=c[1]*p[2]-c[2]*p[1],o=c[2]*p[0]-c[0]*p[2],c=c[0]*p[1]-c[1]*p[0],u=-1*(r*u[0]+o*u[1]+c*u[2]),n[0]=r,n[1]=o,n[2]=c,n[3]=u,p=v.qn(n),n[0]/=p,n[1]/=p,n[2]/=p,n[3]/=p,l!=0&&(p=k.Dd(c)?k.Dd(u)?k.Mb(1,o):-k.Mb(1,u):k.Mb(1,c),p*=k.Mb(1,l),n[0]*=p,n[1]*=p,n[2]*=p,n[3]*=p)},v.yx=function(u,o,r){r[0]=u[1]*o[2]-o[1]*u[2],r[1]=u[2]*o[0]-o[2]*u[0],r[2]=u[0]*o[1]-o[0]*u[1]},v.Ut=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},v.qn=function(u){return v.ip(v.ip(u[0],u[1]),u[2])},v.el=function(u,o,r,n,l,c,p,f){u=v.n(u,o,r);var m=Math.cos(r);c.u=(u+l)*m*Math.cos(n),p.u=(u+l)*m*Math.sin(n),f.u=(u*(1-o)+l)*Math.sin(r)},v.eO=function(u,o,r,n,l,c,p){var f=v.ip(o,r),m=1*Math.sqrt(1-u),w=m/1;if(k.$(f,0))c.u=0,l.u=k.Mb(1.570796326794897,n),p.u=k.R(n)-m;else{c.u=Math.atan2(r,o),r=Math.atan2(1*n,m*f),c=Math.cos(r);var $=Math.sin(r);o=m*u/(1-u),u*=1,r=Math.atan2(n+o*$*$*$,f-u*c*c*c),3.141592653589793<k.R(r)&&(r=k.Mb(3.141592653589793,r)-r),r=Math.atan(w*Math.tan(r)),$=Math.sin(r),c=Math.cos(r),l.u=Math.atan2(n+o*$*$*$,f-u*c*c*c),1.570796326794897<k.R(l.u)&&(l.u=k.Mb(3.141592653589793,l.u)-l.u),r=Math.atan(w*Math.tan(l.u)),$=Math.sin(r),c=Math.cos(r),p.u=(n-m*$)*Math.sin(l.u)+(f-1*c)*Math.cos(l.u)}},v.n=function(u,o,r){return r=Math.sin(r),u/Math.sqrt(1-o*r*r)},v.pt=function(u,o){return Math.atan2(Math.sin(o)*(1-u),Math.cos(o))},v.Sj=function(u,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-u))},v.Tq=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=Math.sqrt(1-u),n=(1-r)/(1+r),l=n*n,c=n*l,p=n*c,f=n*p,m=n*f,w=n*m,$=1.572916666666667*c-3.2578125*f+4.295068359375*w;u=2.142578125*p-6.071484375*m,r=3.129296875*f-11.249837239583334*w;var T=4.775276692708333*m,E=7.958636765252976*w,O=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*f-.2688395182291667*w-$+r-E+O*(2*(1.3125*l-1.71875*p+1.650146484375*m)-4*u+6*T+O*(4*$-12*r+24*E+O*(8*u-32*T+O*(16*r-80*E+O*(32*T+64*O*E))))))}for(r=1-u,n=u/2,c=(l=k.R(o))*v.av(u)/(1.570796326794897*r),p=9999,m=l,l=0;1e-16<p&&50>l;l++)w=v.w(u,m),f=m-($=(f=(v.fG(m,u)-n*Math.sin(2*m)/w)/r-c)/(w=1/(w*w*w))),p=k.R($),m=f;return 0<=o?m:-m},v.lW=function(u,o){return k.vi(o)?u:u*v.av(o)/1.570796326794897},v.ca=function(u){return 0>(u=v.kF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>k.R(u)||k.$(k.R(u),3.141592653589793)?u:u-6.283185307179586},v.kF=function(u,o){return u-Math.floor(u/o)*o},v.Ch=function(u,o){if(.006884661117170036>o){var r=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=r*r;return u/(1+o)*(1+.25*r+.015625*n+.00390625*r*n)*1.570796326794897}return u*v.av(o)},v.Xq=function(u,o){var r=k.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=k.R(v.kF(o,3.141592653589793)))?o:3.141592653589793-o,(k.$(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-u)*Math.tan(o)))*r},v.q=function(u,o,r){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,l=o*n,c=o*l,p=o*c,f=o*p,m=o*f,w=-.7291666666666666*l+.2278645833333333*p+.03987630208333334*m,$=.615234375*c-.21533203125*f,T=-.54140625*p+.20302734375*m,E=.48876953125*f,O=-.4488699776785715*m,P=Math.cos(2*r);return u/(1+o)*((1+.25*n+.015625*c+.00390625*f)*r+Math.sin(2*r)*(-1.5*o+.1875*l+.0234375*p+.00732421875*m-w+T-O+P*(2*(.9375*n-.234375*c-.03662109375*f)-4*$+6*E+P*(4*w-12*T+24*O+P*(8*$-32*E+P*(16*T-80*O+P*(32*E+64*P*O)))))))}return u*(v.fG(r,o)-.5*o*Math.sin(2*r)/v.w(o,r))},v.w=function(u,o){return o=Math.sin(o),Math.sqrt(1-u*o*o)},v.av=function(u){return k.FC(u,1,2220446049250313e-31)?1:1>u?v.Zw(0,1-u)-u/3*v.Ww(0,1-u):NaN},v.fG=function(u,o){var r=k.Mb(1,u);u=k.R(u);var n=Math.floor(u/1.570796326794897);if(1<o)o=u==0?0:NaN;else if(k.Dd(n))o=(u=v.sin(u))*v.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Ww(1-u*u,1-o*u*u);else{var l=h.P.truncate(n%2),c=v.av(o);0<l?o=c*(n+1)-(o=(u=Math.sin(1.570796326794897*(n+1)-u))*v.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Ww(1-u*u,1-o*u*u)):o=c*n+(o=(u=Math.sin(u-1.570796326794897*n))*v.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*v.Ww(1-u*u,1-o*u*u))}return o*r},v.sin=function(u){u=v.ca(u);var o=k.Mb(1,u);return u=k.R(u),k.$(u,3.141592653589793)?0:k.$(u,1.570796326794897)?1*o:Math.sin(u)*o},v.Ww=function(u,o){var r,n,l,c,p=u,f=o,m=1;for(o=0,u=1;n=((r=.2*(p+f+3*m))-p)/r,l=(r-f)/r,c=(r-m)/r,!(1e-4>k.R(n)&&1e-4>k.R(l)&&1e-4>k.R(c));)c=Math.sqrt(f),o+=u/((r=Math.sqrt(m))*(m+(c=Math.sqrt(p)*(c+r)+c*r))),u*=.25,p=.25*(p+c),f=.25*(f+c),m=.25*(m+c);return f=(p=n*l)-(m=c*c),3*o+u*(1+(m=p-6*m)*(.10227272727272728*m-.2142857142857143-.1730769230769231*c*(n=m+f+f))+c*(.1666666666666667*n+c*(-.4090909090909091*f+.1153846153846154*c*p)))/(r*Math.sqrt(r))},v.Zw=function(u,o){for(var r,n,l,c,p=1;n=2-((r=(u+o+p)/3)+u)/r,l=2-(r+o)/r,c=2-(r+p)/r,!(1e-4>k.R(n)&&1e-4>k.R(l)&&1e-4>k.R(c));p=.25*(p+r))r=Math.sqrt(o),n=Math.sqrt(p),u=.25*(u+(r=Math.sqrt(u)*(r+n)+r*n)),o=.25*(o+r);return(1+(.04166666666666666*(u=n*l-c*c)-.1-.06818181818181818*(o=n*l*c))*u+.07142857142857142*o)/Math.sqrt(r)},v.Sw=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=u*u,n=u*r,l=u*n,c=u*l,p=u*c,f=u*p,m=-(.02708333333333333*n+.03430059523809524*l+.03149181547619048*c+.02634359154541446*p+.02156896735835538*f),w=.007669890873015873*l+.01299603174603175*c+.0148051353064374*p+.01454454953803912*f,$=-(.002275545634920635*c+.004830845032667949*p+.006558395368616723*f),T=.0006957236677288761*p+.001775193002406544*f,E=-.000217324089394402*f,O=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*u+.2083333333333333*r+.09375*n+.04878472222222222*l+.02916666666666667*c+.01938905423280423*p+.01388255931712963*f)-m+$-E+O*(2*(.1041666666666667*r+.0875*n+.06050347222222222*l+.04151785714285714*c+.02958958540013228*p+.02203667534722222*f)-4*w+6*T+O*(4*m-12*$+24*E+O*(8*w-32*T+O*(16*$-80*E+O*(32*T+64*O*E))))))}return o==0||k.$(k.R(o),1.570796326794897)?r=o:(l=(n=Math.sqrt(u))*Math.sin(o),r=Math.tan(.7853981633974483+o/2)*Math.pow((1-l)/(1+l),n/2),r=2*Math.atan(r)-1.570796326794897),r},v.tO=function(u,o){if(k.vi(u)||o==0||k.$(k.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=u*(T=u*($=u*(O=u*u))),n=u*(E=u*r),l=.05833333333333333*$+.07232142857142858*T+.05634300595238095*r+.0355325796406526*E+.020235546186067*n,c=.02653149801587302*T+.04379960317460317*r+.0429211791776896*E+.03255384637546096*n,p=.01294022817460318*r+.02668104344536636*E+.03155651254609588*n,f=.00659454790965208*E+.0163075268674227*n,m=.003463473736911237*n,w=Math.cos(2*o);return o+Math.sin(2*o)*(.5*u+.2083333333333333*O+.08333333333333333*$+.03611111111111111*T+.01875*r+.01195601851851852*E+.008863673941798942*n-l+p-m+w*(2*(.1458333333333333*O+.1208333333333333*$+.07039930555555556*T+.03616071428571429*r+.01839451058201058*E+.01017113095238095*n)-4*c+6*f+w*(4*l-12*p+24*m+w*(8*c-32*f+w*(16*p-80*m+w*(32*f+64*w*m))))))}var $=Math.sqrt(u),T=$/2,E=Math.tan(.7853981633974483+o/2);u=0,l=1;for(var O=o;l!=0;O=n)r=$*Math.sin(O),n=E*Math.pow((1+r)/(1-r),T),n=2*Math.atan(n)-1.570796326794897,u++,(k.$(n,O)||3e4<u)&&(l=0);return O},v}()}(q||(q={})),function(h){var k=function(){function v(u){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new h.h,this.SH=new h.h,this.FA=!1,this.xq=new h.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=u,this.Cs=h.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var o=u.getCode();0<o?(this.Mk=o,h.qf.getCode(u)):this.Mk=h.qf.getCode(u),0>this.Mk&&(this.Mk=0);var r=this.Re.getType();if(this.eH=r==h.Tc.PE_TYPE_PROJCS?2:1,r==h.Tc.PE_TYPE_PROJCS&&!u.loadConstants())throw h.i.O("PeProjcs.loadConstants failed");o=r==h.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),r!=h.Tc.PE_TYPE_GEOGCS&&h.qf.getCode(o),this.Go=u.getUnit(),this.MH=o.getPrimem().getLongitude(),this.rH=u=o.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.BA=u,r&h.Tc.PE_TYPE_PROJCS?(o=this.Re,this.CA=1/o.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=h.Eg.generate(o,h.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=h.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,r=1/o.getUnit().getUnitFactor(),this.uw=.001/o.getDatum().getSpheroid().getAxis()*r,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return v.prototype.cs=function(){return this.Mk},v.prototype.mk=function(){return this.vw},v.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.Mk==0&&o.Mk==0&&u.Cs===o.Cs},v.prototype.Xc=function(){return this.Bl},v.prototype.ih=function(u){u.L(this.uo)},v.prototype.rv=function(){return this.uo.v},v.prototype.qv=function(){return this.uo.C},v.prototype.BR=function(u){u.L(this.ww)},v.prototype.hY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){u=this.Re;var o=this.mk().getCentralMeridian(),r=u.getGeogcs();if(r==null)throw h.i.ga("internal error");o=[[o+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],h.gj.geogToProj(u,1,o),o=o[0][0],r=u.getParameters()[h.Tc.PE_PARM_X0].getValue();var n=this.ol();u=new h.l,n.A(u),o=(n=Math.abs(o-r))+r,r=-1*n+r,n=u.H,u=u.G;var l=new h.l;l.L(r,u,o,n),this.uo==null&&(this.uo=l)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");r=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-r,-r/2,r,r/2),this.uo==null&&(this.uo=u)}},v.prototype.iY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){var o=this.Re;if(u=this.mk().getCentralMeridian(),(o=o.getGeogcs())==null)throw h.i.ga("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var r=this.Xr(),n=new h.l;r.A(n),(r=new h.l).L(u-o,n.G,u+o,n.H),this.ww==null&&(this.ww=r)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");o=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-o,-o/2,o,o/2),this.ww==null&&(this.ww=u)}},v.prototype.bf=function(){return this.BA},v.prototype.rm=function(){return this.CA},v.prototype.Xr=function(){if(this.Bl)return this.wl;var u=this.wl;return u??(this.wx(),this.wl)},v.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},v.prototype.wx=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=this.Re,o=u.getGeogcs(),r=u.horizonGcsGenerate();if(r!=null){var n=r[0].getNump(),l=r[0].getKind();u=0<r[0].getInclusive();var c=this.bf(),p=90*c,f=360*c,m=370*c,w=180*c*h.Tc.PE_HORIZON_DELTA/Math.PI,$=new h.l,T=null;if(1<n){for(var E=1;E<n;E++)if(r[E].getKind()==h.Tc.PE_HORIZON_LINE){T==null&&(T=new h.Ua);var O=r[E].getCoord();T.rx(O[0][0],O[0][1]),T.Aj(O[1][0],O[1][1])}}if(l==h.Tc.PE_HORIZON_RECT)r=r[0].getCoord(),$.L(r[0][0],r[0][1]),$.$b(r[1][0],r[1][1]),Math.abs($.H-p)<1e-7*w&&($.H=p),Math.abs($.G+p)<1e-7*w&&($.G=-p),$.S()>m&&(r=-400*c,$.L(r,$.G,r+5*f,$.H)),r=new h.Hh($),this.wl==null&&(this.wl=r,this.Kv=u);else{if(m=new h.Ea,f=this.mk().isGcsHorizonMultiOverlap(),$=h.iu.XE(o,h.ju.Integer64),f){for(m=new h.bL,w=h.Ih.local().W(m,$,null),E=0;E<n;E++)if(r[E].getKind()==h.Tc.PE_HORIZON_POLY){for(o=r[E].getSize(),c=r[E].getCoord(),l=[],p=0;p<o;p++)l[p]=h.h.construct(c[p][0],c[p][1]);r[E].getInclusive(),f&&((c=new h.Ea).$k(l,o-1),m.VX(c),w.re())}m=w.next()}else for(E=0;E<n;E++)if(r[E].getKind()==h.Tc.PE_HORIZON_POLY){for(o=r[E].getSize(),c=r[E].getCoord(),f=[],p=0;p<o;p++)f[p]=h.h.construct(c[p][0],c[p][1]);r[E].getInclusive(),m.$k(f,o-1)}u?h.Zj.local().yn(m,$,1):h.mp.local().yn(m,$,1),h.fj.local().yn(m,$,1),this.wl==null&&(this.wl=m,this.Kv=u,this.TG=T)}}}},v.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},v.prototype.yK=function(){if(this.eH==2){var u=this.Re.horizonPcsGenerate();if(u!=null){var o=u[0].getKind();u[0].getInclusive();var r=u[0].getNump(),n=!1;if(o==h.Tc.PE_HORIZON_RECT)u=u[0].getCoord(),(r=new h.l).L(u[0][0],u[0][1]),r.$b(u[1][0],u[1][1]),u=new h.Hh(r);else{for(o=-1,n=0;n<r;n++)u[n].getKind()==h.Tc.PE_HORIZON_POLY&&(o=n);for(n=u[o].getSize()-1,u=u[o].getCoord(),r=[],o=0;o<n;o++)r[o]=h.h.construct(u[o][0],u[o][1]);u=o=new h.Ea,o.$k(r,n),n=!0}this.mk().isDensificationNeeded()&&(r=1e5*this.rm(),u=h.Zl.local().W(u,r,null)),n&&(n=new h.Hh,u.dn(n),u.He(),u.Rb(),u.kR(),h.Zj.local().yn(u,null,1)),this.Ws==null&&(this.Ws=u)}}},v.prototype.ol=function(){if(this.Bl)return this.Ws;var u=this.Ws;return u??(this.yK(),this.Ws)},v.prototype.jY=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],h.gj.geogToProj(this.Re,2,u);var o=this.mk(),r=o.getNorthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(r&&this.CH.na(u[0][0],u[0][1]),o&&this.SH.na(u[1][0],u[1][1]))}this.FA=!0},v.prototype.xK=function(){if(this.eH==1){var u=400*this.bf();this.xq.L(-u,-u,u,u)}else u=h.Eg.generate(this.Re,h.Eg.PE_PCSINFO_OPTION_DOMAIN),u=h.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.xq.B()&&this.xq.L(u)},v.prototype.cR=function(u){this.Bl&&u.L(this.xq),this.xq.B()&&this.xK(),u.L(this.xq)},v.prototype.Wp=function(){return this.MH},v.prototype.Bi=function(){return this.Xz},v.prototype.Id=function(){return this.Go},v.prototype.Zr=function(){return this.rH},v}();h.JC=k}(q||(q={})),function(h){var k=function(){function v(u){this.FT=u,this.Cs=h.Ab.zv(u,0,!0);var o=u.getCode();this.us=0<o?o:h.qf.getCode(u),0>this.us&&(this.us=0),this.Go=o=this.FT.getUnit(),this.DH=1/o.getUnitFactor(),h.qf.getCode(u)}return v.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.us==0&&o.us==0&&u.Cs===o.Cs},v.prototype.cs=function(){return this.us},v}();h.KL=k}(q||(q={})),function(h){h.$g=function(){function k(){}return k.ub=function(v,u,o,r,n,l,c,p){if(l!=null||c!=null||p!=null){r=h.F.ca(r),u=h.F.ca(u),o=h.F.ca(o),n=h.F.ca(n),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),1.570796326794897<h.s.R(n)&&(n=h.s.Mb(3.141592653589793,n)-n,r=h.F.ca(r+3.141592653589793));var f=h.F.ca(r-u);if(h.s.$(o,n)&&(h.s.$(u,r)||h.s.$(h.s.R(o),1.570796326794897)))l!=null&&(l.u=0),c!=null&&(c.u=0),p!=null&&(p.u=0);else{if(h.s.$(o,-n)){if(h.s.$(h.s.R(o),1.570796326794897))return l!=null&&(l.u=3.141592653589793*v),c!=null&&(c.u=0<o?h.F.ca(3.141592653589793-h.F.ca(r)):h.F.ca(r)),void(p!=null&&(p.u=0<o?h.F.ca(r):h.F.ca(3.141592653589793-h.F.ca(r))));if(h.s.$(h.s.R(f),3.141592653589793))return l!=null&&(l.u=3.141592653589793*v),c!=null&&(c.u=0),void(p!=null&&(p.u=0))}var m=h.s.R(o)==1.570796326794897?0:Math.cos(o),w=Math.sin(o),$=h.s.R(n)==1.570796326794897?0:Math.cos(n),T=Math.sin(n),E=h.s.R(f)==1.570796326794897?0:Math.cos(f),O=h.s.R(f)==3.141592653589793?0:Math.sin(f);if(l!=null){var P=Math.sin((n-o)/2);f=Math.sin(f/2),l.u=2*Math.asin(Math.sqrt(P*P+m*$*f*f))*v}c!=null&&(c.u=h.s.$(h.s.R(o),1.570796326794897)?0>o?r:h.F.ca(3.141592653589793-r):Math.atan2($*O,m*T-w*$*E)),p!=null&&(h.s.$(h.s.R(n),1.570796326794897)?p.u=0>n?u:h.F.ca(3.141592653589793-u):(p.u=Math.atan2(m*O,T*m*E-$*w),p.u=h.F.ca(p.u+3.141592653589793)))}}},k.sf=function(v,u,o,r,n,l,c){if(l!=null||c!=null){u=h.F.ca(u),o=h.F.ca(o),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),h.s.$(h.s.R(o),1.570796326794897)&&(u=0),n=h.F.ca(n);var p=h.s.$(h.s.R(n),1.570796326794897)?0:Math.cos(n),f=h.s.$(h.s.R(n),3.141592653589793)?0:Math.sin(n),m=h.s.$(h.s.R(o),1.570796326794897)?0:Math.cos(o),w=Math.sin(o);v=r/v,r=h.s.$(h.s.R(v),1.570796326794897)?0:Math.cos(v);var $=h.s.$(h.s.R(v),3.141592653589793)?0:Math.sin(v),T=Math.asin(w*r+m*$*p);c!=null&&(c.u=T),l!=null&&(l.u=h.s.$(h.s.R(T),1.570796326794897)?h.s.$(o,-T)?0>T?n:h.F.ca(3.141592653589793-n):u:h.s.$(h.s.R(o),1.570796326794897)&&h.s.$(v,3.141592653589793)?0>o?n:h.F.ca(3.141592653589793-n):h.F.ca(u+Math.atan2($*f,m*r-w*$*p)))}},k}()}(q||(q={})),function(h){h.Yk=function(){function k(){}return k.ub=function(v,u,o,r,n,l,c,p,f){var m=new h.ha(0),w=new h.ha(0),$=[0,0,0],T=[0,0,0],E=[0,0,0],O=new h.ha(0),P=new h.ha(0),L=new h.ha(0),F=new h.ha(0),z=new h.ha(0);if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(v,o,r,n,l,c,p,f);else{n=h.F.ca(n),o=h.F.ca(o);var R=h.F.ca(n-o);if(h.s.$(r,l)&&(h.s.$(o,n)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-l)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(R),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897))&&(h.s.$(h.s.R(r),1.570796326794897)?o=n:n=o);var G=0;if(0>R){G=1;var H=o;o=n,n=H,H=r,r=l,l=H}R=h.F.pt(u,r);var B=h.F.pt(u,l);p==null&&f==null||(h.$g.ub(v,o,R,n,B,null,m,w),m=Math.atan2(Math.sin(m.u)*Math.cos(r-R),Math.cos(m.u)),w=Math.atan2(Math.sin(w.u)*Math.cos(l-B),Math.cos(w.u)),G!=0&&(H=m,m=w,w=H),p!=null&&(p.u=m),f!=null&&(f.u=w)),c!=null&&(h.F.el(1,u,r,o,0,L,F,z),$[0]=L.u,$[1]=F.u,$[2]=z.u,h.F.el(1,u,l,n,0,L,F,z),T[0]=L.u,T[1]=F.u,T[2]=z.u,E[0]=$[1]*T[2]-T[1]*$[2],E[1]=-($[0]*T[2]-T[0]*$[2]),E[2]=$[0]*T[1]-T[0]*$[1],u=1-h.F.w(u,h.F.Xq(u,h.F.Sj(u,Math.acos(E[2]/Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]))))),u*=2-u,p=Math.atan2(-E[1],-E[0]),E=h.F.ca(p-1.570796326794897),p=h.F.ca(p+1.570796326794897),E=h.s.R(h.F.ca(o-E))<=h.s.R(h.F.ca(o-p))?E:p,h.$g.ub(1,E,0,o,R,O,null,null),h.$g.ub(1,E,0,n,B,P,null,null),3.141592653589793<O.u+P.u&&(E=h.F.ca(E+3.141592653589793),h.$g.ub(1,E,0,o,R,O,null,null),h.$g.ub(1,E,0,n,B,P,null,null)),O.u*=h.s.Mb(1,r),P.u*=h.s.Mb(1,l),O.u=h.F.Sj(u,O.u),P.u=h.F.Sj(u,P.u),o=h.F.q(v,u,O.u),v=h.F.q(v,u,P.u),c.u=h.s.R(v-o))}}},k.sf=function(v,u,o,r,n,l,c,p){var f=0,m=new h.ha(0),w=new h.ha(0),$=[0,0,0],T=[0,0,0],E=new h.ha(0),O=new h.ha(0),P=new h.ha(0);if(c!=null||p!=null)if(h.s.vi(u))h.$g.sf(v,o,r,n,l,c,p);else if(h.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),o=h.F.ca(o),r=h.F.ca(r),1.570796326794897<h.s.R(r)&&(o=h.F.ca(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.$(h.s.R(r),1.570796326794897)&&(o=0),h.s.Dd(r)){var L=h.s.R(1.570796326794897-h.s.R(l));L=h.F.Sj(u,L),L=1-h.F.w(u,h.F.Xq(u,L)),L*=2-L,v=n/h.F.Ch(v,L)*1.570796326794897,v=h.F.Tq(L,v),v=h.F.pt(L,v),h.$g.sf(1,o,r,v,l,c,m),p!=null&&(f=m.u),p!=null&&(p.u=h.F.Sj(u,f))}else if(h.s.$(h.s.R(r),1.570796326794897))m=2*(f=h.F.Ch(v,u)),l=0<(v=h.s.Mb(1.570796326794897,r))?h.F.ca(3.141592653589793-l):l,r=f-n,h.s.R(r)<=f?c!=null&&(c.u=l):(r=Math.floor(n/m),h.P.truncate(r%2)==0?(c!=null&&(c.u=l),n-=r*m):(c!=null&&(c.u=h.F.ca(l+3.141592653589793)),n=(r+1)*m-n),r=f-n),p!=null&&(p.u=h.F.Tq(u,r/f*v));else{L=h.F.pt(u,r),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(r-L));var F=h.P.truncate(h.s.Mb(1,L))*(1.570796326794897>=h.s.R(l)?1:-1);l=h.F.ca(o+Math.atan(Math.tan(l)*-Math.sin(L))),h.$g.ub(v,l,0,o,L,null,w,null),L=h.s.R(1.570796326794897-h.s.R(w.u)),L=h.F.Sj(u,L),L=1-h.F.w(u,h.F.Xq(u,L)),L*=2-L,h.F.el(1,u,0,l,0,E,O,P),$[0]=E.u,$[1]=O.u,$[2]=P.u,h.F.el(1,u,r,o,0,E,O,P),T[0]=E.u,T[1]=O.u,T[2]=P.u,r=Math.acos(($[0]*T[0]+$[1]*T[1]+$[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),r=h.F.Sj(L,r),n=0<(r=h.F.q(v,L,r)+n*F)?w.u:h.F.ca(w.u+3.141592653589793),v=h.s.R(r)/h.F.Ch(v,L)*1.570796326794897,v=h.F.Tq(L,v),v=h.F.pt(L,v),h.$g.sf(1,l,0,v,n,c,m),p!=null&&(f=m.u),p!=null&&(p.u=h.F.Sj(u,f))}},k}()}(q||(q={})),function(h){h.eu=function(){function k(){}return k.ub=function(v,u,o,r,n,l,c,p,f){var m=0,w=0,$=0;if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(v,o,r,n,l,c,p,f);else{var T=h.F.ca(n-o);if(h.s.$(r,l)&&(h.s.Dd(T)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-l)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(T),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897)||h.s.Dd(T)||h.s.$(h.s.R(T),3.141592653589793))return void h.Yk.ub(v,u,o,r,n,l,c,p,f);var E=1-Math.sqrt(1-u),O=u/(1-u),P=v*(1-E);v=h.F.Xq(u,r);var L=h.F.Xq(u,l);u=h.s.R(v)==1.570796326794897?0:Math.cos(v);var F=Math.sin(v),z=h.s.R(L)==1.570796326794897?0:Math.cos(L),R=Math.sin(L),G=T,H=Math.cos(G),B=Math.sin(G),te=1,Q=0;do{var ne=G,pe=Math.sqrt(Math.pow(z*B,2)+Math.pow(u*R-F*z*H,2)),he=F*R+u*z*H,Ie=Math.atan2(pe,he);if(pe==0){te=0;break}var ge=u*z*B/pe;if(m=Math.cos(Math.asin(ge)),w=he-2*F*R/(m*=m),1<h.s.R(w)&&(w=h.s.Mb(1,w)),G=T+(1-(G=E/16*m*(4+E*(4-3*m))))*E*ge*(Ie+G*pe*(w+G*he*(2*($=w*w)-1))),H=Math.cos(G),B=Math.sin(G),Q++,3.141592653589793<h.s.R(G)&&30<Q){te=0;break}}while(5e3>=Q&&!h.s.$(ne,G));if(te!=0)E=(O*=m)*(256+O*(O*(74-47*O)-128))/1024,c!=null&&(c.u=P*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(Ie-E*pe*(w+E/4*(he*(2*$-1)-E/6*w*(4*pe*pe-3)*(4*$-3))))),p!=null&&(p.u=h.s.$(h.s.R(r),1.570796326794897)?0>r?n:h.F.ca(3.141592653589793-n):Math.atan2(z*B,u*R-F*z*H)),f!=null&&(h.s.$(h.s.R(l),1.570796326794897)?f.u=0>l?o:h.F.ca(3.141592653589793-o):(f.u=Math.atan2(u*B,u*R*H-F*z),f.u=h.F.ca(f.u+3.141592653589793)));else{G=h.s.Mb(3.141592653589793,T),he=F*R-u*z,Ie=Math.acos(he),pe=Math.sin(Ie),m=1,Q=ge=0;do $=ge,H=1-.25*(ge=E*(m*=m)*(1+E+E*E))+.1875*(w=E*E*(H=m*m)*(1+2.25*E))-.1953125*(te=E*E*E*H*m),ge=.25*ge-.25*w+.29296875*te,B=.03125*w-.05859375*te,te*=.00651041666666667,w=he-2*F*R/m,1<h.s.R(w)&&(w=h.s.Mb(1,w)),m=Math.acos(w),he=Math.cos(2*m),ne=Math.cos(3*m),B=(ge=h.s.$(r,-l)?h.F.ca(3.141592653589793-T)/(3.141592653589793*E*H):h.F.ca(G-T)/(E*(H*Ie+ge*pe*w+B*Math.sin(2*Ie)*he+te*Math.sin(3*Ie)*ne)))*pe/(u*z),G=1.570796326794897<h.s.R(T)?h.s.Mb(3.141592653589793,B)-Math.asin(B):Math.asin(B),H=Math.cos(G),pe=Math.sqrt(Math.pow(z*B,2)+Math.pow(u*R-F*z*H,2)),Ie=3.141592653589793-Math.asin(h.s.R(pe)),he=Math.cos(Ie),m=Math.cos(Math.asin(ge)),Q++;while(70>=Q&&!h.s.$($,ge));c!=null&&(H=1+(O*=m*=m)*(4096+O*(O*(320-175*O)-768))/16384,h.s.$(r,-l)?c.u=3.141592653589793*P*H:(w=he-2*F*R/m,m=Math.acos(w),he=Math.cos(2*m),ne=Math.cos(3*m),c.u=P*(H*Ie+O*(O*(128+O*(35*O-60))-512)/2048*pe*w+O*(5*O-4)/6144*O*O*Math.sin(2*Ie)*he+te*Math.sin(3*Ie)*ne+-762939453125e-16*O*O*O*O*Math.sin(4*Ie)*Math.cos(4*m)))),p!=null&&(h.s.Dd(r)&&h.s.Dd(l)?(m=Math.sqrt(1-ge*ge),p.u=Math.acos(m),0>T&&(p.u*=-1)):h.s.$(h.s.R(r),1.570796326794897)?p.u=0>r?n:h.F.ca(3.141592653589793-n):(c=ge/u,P=Math.sqrt(1-c*c),0>u*R-F*z*Math.cos(G)&&(P*=-1),p.u=Math.atan2(c,P),h.s.$(r,-l)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(r))&&(0<r&&1.570796326794897>h.s.R(p.u)||0>r&&1.570796326794897<h.s.R(p.u))&&(p.u=h.s.Mb(3.141592653589793,p.u)-p.u))),f!=null&&(h.s.Dd(r)&&h.s.Dd(l)?(m=Math.sqrt(1-ge*ge),f.u=Math.acos(m),0<=T&&(f.u*=-1)):h.s.$(h.s.R(l),1.570796326794897)?f.u=0>l?o:h.F.ca(3.141592653589793-o):(T=ge/z,c=Math.sqrt(1-T*T),P=Math.sin(G/2),0>Math.sin(L-v)-2*u*R*P*P&&(c*=-1),f.u=Math.atan2(T,c),f.u=h.F.ca(f.u+3.141592653589793),h.s.$(r,-l)&&!h.s.Dd(r)&&!h.s.$(h.s.R(r),1.570796326794897)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(r))&&(p!=null?P=p.u:(c=ge/u,P=Math.sqrt(1-c*c),0>u*R-F*z*Math.cos(G)&&(P*=-1),P=Math.atan2(c,P),h.s.$(r,-l)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-E*Math.cos(r))&&(0<r&&1.570796326794897>h.s.R(P)||0>r&&1.570796326794897<h.s.R(P))&&(P=h.s.Mb(3.141592653589793,P)-P)),1.570796326794897>=h.s.R(P)&&1.570796326794897<h.s.R(f.u)||1.570796326794897<=h.s.R(P)&&1.570796326794897>h.s.R(f.u))&&(f.u=-1*h.F.ca(f.u+3.141592653589793))))}}}},k.sf=function(v,u,o,r,n,l,c,p){if(c!=null||p!=null)if(h.s.vi(u))h.$g.sf(v,o,r,n,l,c,p);else if(l=h.F.ca(l),h.s.$(h.s.R(r),1.570796326794897)||h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))h.Yk.sf(v,u,o,r,n,l,c,p);else{var f=h.s.R(l)==1.570796326794897?0:Math.cos(l),m=h.s.R(l)==3.141592653589793?0:Math.sin(l);h.s.$(h.s.R(r),1.570796326794897)&&(o=0),l=1-Math.sqrt(1-u);var w=h.F.Xq(u,r);r=h.s.R(w)==1.570796326794897?0:Math.cos(w);var $=Math.sin(w);w=Math.atan2(Math.tan(w),f);var T=r*m,E=T*T,O=1-E,P=u/(1-u)*O,L=(u=P*(256+P*(P*(74-47*P)-128))/1024)/4,F=u/6,z=n/(v*(1-l)*(1+P*(4096+P*(P*(320-175*P)-768))/16384)),R=z;do{var G=R;n=h.s.R(R)==1.570796326794897?0:Math.cos(R);var H=(P=h.s.R(R)==3.141592653589793?0:Math.sin(R))*P;R=u*P*((v=Math.cos(2*w+R))+L*(n*(2*(R=v*v)-1)-F*v*(4*H-3)*(4*R-3)))+z}while(!h.s.$(G,R));n=h.s.R(R)==1.570796326794897?0:Math.cos(R),P=h.s.R(R)==3.141592653589793?0:Math.sin(R),c!=null&&(m=Math.atan2(P*m,r*n-$*P*f),O=l/16*O*(4+l*(4-3*O)),v=Math.cos(2*w+R),c.u=h.F.ca(o+(m-(1-O)*l*T*(R+O*P*(v+O*n*(2*v*v-1)))))),p!=null&&(O=$*P-r*n*f,O=(1-l)*Math.sqrt(E+O*O),p.u=Math.atan2($*n+r*P*f,O))}},k}()}(q||(q={})),function(h){h.KC=function(){function k(){}return k.ub=function(v,u,o,r,n,l,c,p,f){var m=h.F.ca(n-o),w=h.s.$(h.s.R(r),1.570796326794897),$=h.s.$(h.s.R(l),1.570796326794897);if(h.s.$(r,l)&&(h.s.Dd(m)||w))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.vi(u)){var T=Math.sin(r),E=Math.sin(l);T=Math.sqrt((1+T)/(1-T)),E=Math.sqrt((1+E)/(1-E)),T=Math.log(E)-Math.log(T),T=Math.atan2(m,T),c!=null&&(c.u=h.s.$(r,l)?h.s.R(v*Math.cos(r)*m):h.s.R((v*l-v*r)/Math.cos(T)))}else E=h.F.Sw(u,l),T=Math.sin(h.F.Sw(u,r)),E=Math.sin(E),T=Math.sqrt((1+T)/(1-T)),E=Math.sqrt((1+E)/(1-E)),T=Math.log(E)-Math.log(T),T=Math.atan2(m,T),c!=null&&(h.s.$(r,l)?c.u=h.s.R(v*m*Math.cos(r)/h.F.w(u,r)):(m=h.F.q(v,u,r),v=h.F.q(v,u,l),c.u=h.s.R((v-m)/Math.cos(T))));p==null&&f==null||(c=h.F.ca(T+3.141592653589793),w&&$||!w&&!$||(w?T=0>r?n:h.F.ca(3.141592653589793-n):$&&(c=0>l?o:h.F.ca(3.141592653589793-o))),p!=null&&(p.u=T),f!=null&&(f.u=c))}},k.sf=function(v,u,o,r,n,l,c,p){l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),h.s.vi(u)?h.s.$(h.s.R(r),1.570796326794897)?(o=0>r?l:h.F.ca(3.141592653589793-l),3.141592653589793>=(l=n/v%6.283185307179586)?v=r-h.s.Mb(l,r):(o=h.F.ca(o+3.141592653589793),v=-r+h.s.Mb(l-3.141592653589793,r))):h.s.$(h.s.R(l),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,l)/(v*Math.cos(r))),v=r):(v=r+n*Math.cos(l)/v,1.570796326794897<h.s.R(v)&&(v=1.570796326794897),h.s.$(h.s.R(v),1.570796326794897)&&(h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))||(1.570796316258184<h.s.R(v)&&(v=h.s.Mb(1.570796316258184,v)),u=Math.sin(r),r=Math.sin(v),u=Math.sqrt((1+u)/(1-u)),r=Math.sqrt((1+r)/(1-r)),u=Math.log(r)-Math.log(u),o=h.F.ca(o+Math.tan(l)*u))):h.s.$(h.s.R(r),1.570796326794897)?(o=0>r?l:h.F.ca(3.141592653589793-l),l=n/h.F.lW(v,u),3.141592653589793>=(l%=6.283185307179586)?v=r-h.s.Mb(l,r):(o=h.F.ca(o+3.141592653589793),v=-r+h.s.Mb(l-3.141592653589793,r)),v=h.F.Tq(u,v)):h.s.$(h.s.R(l),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,l)*h.F.w(u,r)/(v*Math.cos(r))),v=r):(v=1.570796326794897*(n*Math.cos(l)+h.F.q(v,u,r))/h.F.Ch(v,u),1.570796326794897<h.s.R(v)&&(v=h.s.Mb(1.570796326794897,v)),v=h.F.Tq(u,v),h.s.$(h.s.R(v),1.570796326794897)&&(h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))||(n=h.F.Sw(u,r),r=h.F.Sw(u,v),1.570796316258184<h.s.R(r)&&(r=h.s.Mb(1.570796316258184,v),v=h.F.tO(u,r)),u=Math.sin(n),r=Math.sin(r),u=Math.sqrt((1+u)/(1-u)),r=Math.sqrt((1+r)/(1-r)),u=Math.log(r)-Math.log(u),o=h.F.ca(o+Math.tan(l)*u))),c!=null&&(c.u=o),p!=null&&(p.u=v)},k}()}(q||(q={})),function(h){h.kb=function(){function k(){}return k.Sy=function(v,u,o,r,n,l,c){h.eu.ub(v,u,o,r,n,l,null,c,null)},k.Ai=function(v,u,o,r,n,l,c,p){h.eu.sf(v,u,o,r,n,l,c,p)},k.xd=function(v,u,o,r,n,l,c,p,f,m){switch(m){case 2:h.Yk.ub(v,u,o,r,n,l,c,p,f);break;case 3:h.LC.ub(v,u,o,r,n,l,c,p,f);break;case 1:h.KC.ub(v,u,o,r,n,l,c,p,f);break;default:h.eu.ub(v,u,o,r,n,l,c,p,f)}},k.qj=function(v,u,o,r,n,l,c,p,f){switch(f){case 2:h.Yk.sf(v,u,o,r,n,l,c,p);break;case 3:h.LC.sf(v,u,o,r,n,l,c,p);break;case 1:h.KC.sf(v,u,o,r,n,l,c,p);break;default:h.eu.sf(v,u,o,r,n,l,c,p)}},k}()}(q||(q={})),function(h){var k=function(){function u(){this.y=this.x=null}return u.construct=function(o){var r=new u;return r.x=new h.Xb,r.x.set(o.x),r.y=new h.Xb,r.y.set(o.y),r},u.QE=function(o,r){var n=new u;return n.x=new h.Xb,n.x.set(o),n.y=new h.Xb,n.y.set(r),n},u.prototype.rg=function(){return this.x.rg()&&this.y.rg()},u.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},u}();h.rY=k;var v=function(){function u(){this.z=this.y=this.x=null}return u.construct=function(o){var r=new u;return r.x=new h.Xb,r.x.set(o.x),r.y=new h.Xb,r.y.set(o.y),r.z=new h.Xb,r.z.set(o.z),r},u.QE=function(o,r,n){var l=new u;return l.x=new h.Xb,l.x.set(o),l.y=new h.Xb,l.y.set(r),l.z=new h.Xb,l.z.set(n),l},u.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},u.prototype.value=function(){return new h.Od(this.x.value(),this.y.value(),this.z.value())},u.prototype.Sh=function(o){var r=new h.Xb,n=new h.Xb,l=new h.Xb;return r.Ml(this.x,o.x),n.Ml(this.y,o.y),l.Ml(this.z,o.z),(o=new h.Xb).ZM(r,n),o.add(l),o},u.prototype.YE=function(o){var r=new u;r.x.Ml(this.y,o.z),r.y.Ml(this.z,o.x),r.z.Ml(this.x,o.y);var n=new h.Xb,l=new h.Xb,c=new h.Xb;return n.Ml(this.z,o.y),l.Ml(this.x,o.z),c.Ml(this.y,o.x),r.x.sub(n),r.y.sub(l),r.z.sub(c),r},u}();h.sY=v,h.Nx=function(){function u(){}return u.zP=function(o,r,n){var l=r.x;r=r.y,u.el(1,o,Math.cos(l),Math.sin(l),Math.cos(r),Math.sin(r),n)},u.yP=function(o,r){var n=new h.Od;return u.zP(o,r,n),n},u.el=function(o,r,n,l,c,p,f){o/=Math.sqrt(1-r*p*p),f.L(o*c*n,o*c*l,o*(1-r)*p)},u.$u=function(o,r){var n=new h.Xb,l=new h.Xb,c=new h.Xb,p=new h.Xb;n.cos(r.x),l.sin(r.x),c.cos(r.y),p.sin(r.y);var f=new h.Xb;return f.set(p),f.Bg(p),f.Po(o),f.Po(-1),f.fN(),f.sqrt(),(r=new h.Xb).set(1),r.lm(f),(f=new h.Xb).set(r),f.Bg(c),f.Bg(n),(n=new h.Xb).set(r),n.Bg(c),n.Bg(l),(l=new h.Xb).set(r),l.Po(1-o),l.Bg(p),v.QE(f,n,l)},u.NS=function(o,r,n,l){if(Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x)return NaN;if(l=u.YA(l,Math.min(r.x,n.x),Math.max(r.x,n.x)),!new h.Oc(r.x,n.x).contains(l))return NaN;var c=k.construct(r);if(n=k.construct(n),c=u.$u(o,c),n=u.$u(o,n),(n=c.YE(n)).z.rg())return r.y;var p=new h.Xb;p.set(n.x),p.lm(n.z),p.Po(-1);var f=new h.Xb;f.set(n.y),f.lm(n.z),f.Po(-1);var m=new h.Xb;return m.set(f),m.Bg(f),(c=new h.Xb).set(p),c.Bg(p),c.add(m),c.sqrt(),c.rg()||p.rg()&&f.rg()?r.y:(r=Math.atan2(f.value(),p.value()),r=Math.atan2(c.value()*Math.cos(r-l),1-o),l=u.yP(o,h.h.construct(l,r)),o=new h.Od(l.x,l.y,-l.z),l=n.value().Sh(l),o=n.value().Sh(o),Math.abs(o)<Math.abs(l)&&(r=-r),r)},u.Jz=function(o,r,n,l,c){if(c[0]=NaN,c[1]=NaN,Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x||Math.abs(l)>=.5*Math.PI||0<r.y&&0<n.y&&r.y>l&&n.y>l||0>r.y&&0>n.y&&r.y<l&&n.y<l)return 0;var p=k.construct(r),f=k.construct(n);p=u.$u(o,p),f=u.$u(o,f);var m=p.YE(f);if(m.z.rg())return new h.Oc(r.y,n.y).contains(l)?(c[0]=r.x,1):0;(f=new h.Xb).set(m.x),f.lm(m.z),f.Po(-1),(p=new h.Xb).set(m.y),p.lm(m.z),p.Po(-1),(m=new h.Xb).set(p),m.Bg(p);var w=new h.Xb;return w.set(f),w.Bg(f),w.add(m),w.sqrt(),w.rg()||f.rg()&&p.rg()?l==0?(c[0]=r.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(l)/w.value(),1<Math.abs(o)?0:(o=Math.acos(o),m=Math.atan2(p.value(),f.value()),f=Math.min(r.x,n.x),p=Math.max(r.x,n.x),n=u.YA(m-o,f,p),o=l!=0?u.YA(m+o,f,p):n,l=0,f<=n&&n<=p&&(c[l]=n,l++),o!=n&&f<=o&&o<=p&&(c[l]=o,++l==2&&Math.abs(c[0]-r.x)>Math.abs(c[1]-r.x)&&(r=c[0],c[0]=c[1],c[1]=r)),l))},u.YA=function(o,r,n){return o>n?o-=2*(r=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<r&&(o+=2*(r=Math.ceil((r-o)/(2*Math.PI)))*Math.PI),o},u}()}(q||(q={})),function(h){h.SK=function(){function k(){}return k.WX=function(v,u){var o=8,r=[0,0,0,0],n=new h.h;n.N(u),n.scale(h.cb.tc(v).Id().Fc()==9102?1:h.cb.tc(v).Id().ci/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var l=-180,c=180,p=(v=5*o)-1,f=(u=(v+31)/32)-1;0<=f;f--)for(var m=p-32*f,w=Math.min(32,v-32*f),$=1;$<w;$+=2){var T=.5*(c+l);n.x>=T?(r[f]|=1<<m,l=T):c=T,m-=2,p-=2}for(l=-90,c=90,p=v-2,f=u-1;0<=f;f--)for(m=p-32*f,w=Math.min(32,v-32*f),$=0;$<w;$+=2)T=.5*(c+l),n.y>=T?(r[f]|=1<<m,l=T):c=T,m-=2,p-=2;return k.VP(r,o,o)},k.VP=function(v,u,o){for(var r=[],n=0;n<u;n++)r[n]="";for(var l=n=0,c=0;c<u;c++){var p=v[n]>>l&31;if(31<(l+=5)){var f=37-l;p&=(1<<f)-1,l-=32,p|=(v[++n]&(1<<l)-1)<<f}r[u-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(o>u)for(c=0;c<o-u;c++)r.push("0");else o<u&&(r.length=o);return r.join("")},k}()}(q||(q={})),function(h){var k={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},v={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.yr=function(){function u(){}return u.Ny=function(o){u.zp===!1&&u.zt();var r=u.AQ(o);if(r==-1){var n=u.Ax(o);n!=o&&(r=u.Ny(n))}return r==-1&&(n=u.AK(o))!=o&&(r=u.Ny(n)),r},u.AQ=function(o){return u.Hw[o]!==void 0?u.Hw[o]:-1},u.xQ=function(o){u.zp===!1&&u.zt();var r=u.iF(o);if(r==1e38){var n=u.Ax(o);if(n!=o&&(r=u.iF(n)),r==1e38)return 1e-10}return r},u.US=function(o){if(u.Ks[o]!==void 0)return!0;var r=u.Ax(o);return r!=o&&u.Ks[r]!==void 0},u.WS=function(o){if(u.zo[o]!==void 0)return!0;var r=u.Ax(o);return r!=o&&u.zo[r]!==void 0},u.iF=function(o){return u.zp===!1&&u.zt(),u.Ks[o]!==void 0?u.Ks[o]:u.zo[o]!==void 0?u.zo[o]:1e38},u.AK=function(o){return u.zp===!1&&u.zt(),u.RA[o]!==void 0?u.RA[o]:o},u.Ax=function(o){return u.zp===!1&&u.zt(),u.SA[o]!==void 0?u.SA[o]:o},u.zt=function(){for(var o,r=k,n=0;n<r.pcsid.length;n+=2)u.zo[r.pcsid[n]]=r.pcstol[2*r.pcsid[n+1]+1];for(n=0;n<r.pcsidc.length;n+=1)for(var l=(o=r.pcsidc[n])[0];l<=o[1];l++)u.zo[l]=r.pcstol[2*o[2]+1];for(n=0;n<r.gcsid.length;n+=2)u.Ks[r.gcsid[n]]=r.gcstol[2*r.gcsid[n+1]+1];for(n=0;n<r.gcsidc.length;n+=1)for(l=(o=r.gcsidc[n])[0];l<=o[1];l++)u.zo[l]=r.gcstol[2*o[2]+1];for(n=0;n<v.c.length;n+=1)for(l=(o=v.c[n])[0];l<=o[1];l++)u.Hw[l]=o[2];for(n=0;n<v.nc.length;n+=2)u.Hw[v.nc[n]]=v.nc[n+1];for(v=null,n=0;n<r.newtoold.length;n+=2)u.RA[r.newtoold[n+1]]=r.newtoold[n],u.SA[r.newtoold[n]]=r.newtoold[n+1];k=null,u.zp=!0},u.zp=!1,u.Ks=[],u.zo=[],u.RA=[],u.SA=[],u.Hw=[],u}()}(q||(q={})),function(h){function k(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var v=[];h.SC=function(){function u(){}return u.zQ=function(o){try{for(var r=0;r<v.length;r++)if(v[r].wkttext===o)return v[r].unit;for(var n,l=r="",c=!1,p=0;p<o.length;p++){var f=o[p];c===!0?f=='"'?o[p+1]=='"'?r+=f:c=c=!1:r+=f:/[\s]/.test(f)||(f==","?(l=r!==""?l+(k(r)+","):l+",",r=""):f==")"||f=="]"?(l=r!==""?l+(k(r)+"]}"):l+"]}",r=""):f=="("||f=="["?(l+='{ "entity": "'+r.toUpperCase().trim()+'", "values":[',r=""):f=='"'?(c=!0,r=""):r+=f)}n=JSON.parse(l);var m=u.hF(n);if(m===null)return null;for(n=null,f=0;f<m.values.length;f++)if(typeof m.values[f]=="object"&&m.values[f].entity==="UNIT"){n=m.values[f];break}if(n===null)return null;var w=h.Uc.UO(m.entity==="GEOGCS"?1:0,n.values[1],n.values[2]);return v.push({wkttext:o,unit:w}),10<v.length&&v.shift(),w}catch{return null}},u.hF=function(o){if(o===null)return null;if(o.entity==="GEOGCS"||o.entity==="PROJCS")return o;for(var r=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0){if(o.values[n].entity==="GEOGCS"||o.values[n].entity=="PROJCS")return o.values[n];r.push(o.values[n])}for(o=0;o<r.length;o++)if((n=u.hF(r[o]))!==null)return n;return null},u.yQ=function(o){var r=-1;if(o!=null&&0<o.length){var n=o.indexOf("PROJCS");if(0<=n){var l=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<l&&(r=.001/l)}else if(0<=(n=o.indexOf("GEOGCS"))){var p=0;if(l=0,0<(n=o.indexOf("SPHEROID",n+6))&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{p=parseFloat(o.substring(n,c))}catch{p=0}if(0<p&&0<=(n=o.indexOf("UNIT",c+1))&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1))))try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<p&&0<l&&(r=.001/(p*l))}}return r},u}()}(q||(q={})),function(h){var k;(k=h.$K||(h.$K={}))[k.NONE=0]="NONE",k[k.LINEAR=1]="LINEAR",k[k.ANGULAR=2]="ANGULAR",function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"}(h.LL||(h.LL={})),function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Kh||(h.Kh={}));var v=function(){function u(o,r){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,r!==void 0){for(this.Ba=r.Ba,this.Qq=r.Qq,this.dg=r.dg.slice(0),this.wh=r.wh.slice(0),this.yl=r.yl,this.Xs=[],o=r=0;o<this.Ba;o++)this.Xs[o]=r,r+=u.Wa(this.dg[o]);for(this.Qq=r,this.Be=[],o=0;o<this.Ba;o++){r=u.Wa(this.ld(o));for(var n=u.te(this.ld(o)),l=0;l<r;l++)this.Be[this.Xs[o]+l]=n}}else this.Qq=this.Ba=0}return u.prototype.ld=function(o){if(0>o||o>this.Ba)throw h.i.O();return this.dg[o]},u.prototype.Rf=function(o){return this.wh[o]},u.gz=function(o){return u.EM[o]},u.Vp=function(o){return u.NM[o]},u.Wa=function(o){return u.mM[o]},u.prototype.hasAttribute=function(o){return 0<=this.wh[o]},u.prototype.dG=function(){return this.hasAttribute(1)},u.te=function(o){return u.$C[o]},u.prototype.GR=function(o){return this.Xs[o]},u.yG=function(o,r){return u.$C[o]===r},u.prototype.Nb=function(o){return this===o},u.prototype.Cn=function(){for(var o=h.P.Vh(this.dg[0]),r=1;r<this.Ba;r++)o=h.P.Vh(this.dg[r],o);return o},u.prototype.bk=function(o){return this.Xs[o]},u.prototype.dc=function(){return this.yl},u.prototype.Fd=function(o){return this.dg[o]},u.$C=[0,0,NaN,0,0,0,0,0,0],u.EM=[1,1,1,0,2,1,1,1,0],u.NM=[1,1,1,2,0,0,0,0,2],u.mM=[2,1,1,1,3,1,2,3,2],u}();h.sa=v}(q||(q={})),function(h){function k(c,p,f){var m=p-(c=new l(c)).e,w=c.c;for(w.length>++p&&v(c,m,l.gu),w[0]?f?m=p:(w=c.c,m=c.e+m+1):++m;w.length<m;w.push(0));return m=c.e,f===1||f&&(p<=m||m<=o)?(0>c.Cd&&w[0]?"-":"")+(1<w.length?w[0]+"."+w.join("").slice(1):w[0])+(0>m?"e":"e+")+m:c.toString()}function v(c,p,f,m){var w=c.c,$=c.e+p+1;if(f===1?m=5<=w[$]:f===2?m=5<w[$]||w[$]==5&&(m||0>$||w[$+1]!==void 0||1&w[$-1]):f===3?m=m||w[$]!==void 0||0>$:(m=!1,f!==0&&u("!Big.RM!")),1>$||!w[0])m?(c.e=-p,c.c=[1]):c.c=[c.e=0];else{if(w.length=$--,m)for(;9<++w[$];)w[$]=0,$--||(++c.e,w.unshift(1));for($=w.length;!w[--$];w.pop());}return c}function u(c){throw(c=Error(c)).name="BigError",c}var o=-7,r=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function c(p){if(p instanceof c)this.Cd=p.Cd,this.e=p.e,this.c=p.c.slice();else{var f,m,w;for(p===0&&0>1/p?p="-0":n.test(p+="")||u(NaN),this.Cd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(f=p.indexOf("."))&&(p=p.replace(".","")),0<(m=p.search(/e/i))?(0>f&&(f=m),f+=+p.slice(m+1),p=p.substring(0,m)):0>f&&(f=p.length),m=0;p.charAt(m)=="0";m++);if(m==(w=p.length))this.c=[this.e=0];else{for(;p.charAt(--w)=="0";);for(this.e=f-m-1,this.c=[],f=0;m<=w;this.c[f++]=+p.charAt(m++));}}}return c.prototype.abs=function(){var p=new c(this);return p.Cd=1,p},c.prototype.cmp=function(p){var f=this.c,m=(p=new c(p)).c,w=this.Cd,$=p.Cd,T=this.e,E=p.e;if(!f[0]||!m[0])return f[0]?w:m[0]?-$:0;if(w!=$)return w;if(p=0>w,T!=E)return T>(E^p)?1:-1;for(w=-1,$=(T=f.length)<(E=m.length)?T:E;++w<$;)if(f[w]!=m[w])return f[w]>(m[w]^p)?1:-1;return T==E?0:T>(E^p)?1:-1},c.prototype.lm=function(p){var f=this.c,m=(p=new c(p)).c,w=this.Cd==p.Cd?1:-1,$=c.tr;if(($!==~~$||0>$||1e6<$)&&u("!Big.DP!"),!f[0]||!m[0])return f[0]==m[0]&&u(NaN),m[0]||u(w/0),new c(0*w);var T,E,O=m.slice(),P=T=m.length,L=f.length,F=f.slice(0,T),z=F.length,R=p,G=R.c=[],H=0,B=$+(R.e=this.e-p.e)+1;for(R.Cd=w,w=0>B?0:B,O.unshift(0);z++<T;F.push(0));do{for(E=0;10>E;E++){if(T!=(z=F.length))var te=T>z?1:-1;else{var Q=-1;for(te=0;++Q<T;)if(m[Q]!=F[Q]){te=m[Q]>F[Q]?1:-1;break}}if(!(0>te))break;for(p=z==T?m:O;z;){if(F[--z]<p[z]){for(Q=z;Q&&!F[--Q];F[Q]=9);--F[Q],F[z]+=10}F[z]-=p[z]}for(;!F[0];F.shift());}G[H++]=te?E:++E,F[0]&&te?F[z]=f[P]||0:F=[f[P]]}while((P++<L||F[0]!==void 0)&&w--);return G[0]||H==1||(G.shift(),R.e--),H>B&&v(R,$,c.gu,F[0]!==void 0),R},c.prototype.aS=function(){return 0<this.cmp(0)},c.prototype.iT=function(){return 0>this.cmp(0)},c.prototype.kt=function(p){var f,m=this.Cd,w=(p=new c(p)).Cd;if(m!=w)return p.Cd=-w,this.oI(p);var $=this.c.slice(),T=this.e,E=p.c,O=p.e;if(!$[0]||!E[0])return E[0]?(p.Cd=-w,p):new c($[0]?this:0);if(m=T-O){for((f=0>m)?(m=-m,T=$):(O=T,T=E),T.reverse(),w=m;w--;T.push(0));T.reverse()}else for(T=((f=$.length<E.length)?$:E).length,m=w=0;w<T;w++)if($[w]!=E[w]){f=$[w]<E[w];break}if(f&&(T=$,$=E,E=T,p.Cd=-p.Cd),0<(w=(T=E.length)-(f=$.length)))for(;w--;$[f++]=0);for(w=f;T>m;){if($[--T]<E[T]){for(f=T;f&&!$[--f];$[f]=9);--$[f],$[T]+=10}$[T]-=E[T]}for(;$[--w]==0;$.pop());for(;$[0]==0;)$.shift(),--O;return $[0]||(p.Cd=1,$=[O=0]),p.c=$,p.e=O,p},c.prototype.oI=function(p){var f=this.Cd,m=(p=new c(p)).Cd;if(f!=m)return p.Cd=-m,this.kt(p);m=this.e;var w=this.c,$=p.e,T=p.c;if(!w[0]||!T[0])return T[0]?p:new c(w[0]?this:0*f);if(w=w.slice(),f=m-$){for(0<f?($=m,m=T):(f=-f,m=w),m.reverse();f--;m.push(0));m.reverse()}for(0>w.length-T.length&&(m=T,T=w,w=m),f=T.length,m=0;f;)m=(w[--f]=w[f]+T[f]+m)/10|0,w[f]%=10;for(m&&(w.unshift(m),++$),f=w.length;w[--f]==0;w.pop());return p.c=w,p.e=$,p},c.prototype.pow=function(p){var f=this,m=new c(1),w=m,$=0>p;for((p!==~~p||-1e6>p||1e6<p)&&u("!pow!"),p=$?-p:p;1&p&&(w=w.nr(f)),p>>=1;)f=f.nr(f);return $?m.lm(w):w},c.prototype.round=function(p,f){var m=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&u("!round!"),v(m=new c(m),p,f??c.gu),m},c.prototype.sqrt=function(){var p=this.c,f=this.Cd,m=this.e,w=new c("0.5");if(!p[0])return new c(this);0>f&&u(NaN),(f=Math.sqrt(this.toString()))==0||f==1/0?((f=p.join("")).length+m&1||(f+="0"),(p=new c(Math.sqrt(f).toString())).e=((m+1)/2|0)-(0>m||1&m)):p=new c(f.toString()),f=p.e+(c.tr+=4);do m=p,p=w.nr(m.oI(this.lm(m)));while(m.c.slice(0,f).join("")!==p.c.slice(0,f).join(""));return v(p,c.tr-=4,c.gu),p},c.prototype.nr=function(p){var f=this.c,m=(p=new c(p)).c,w=f.length,$=m.length,T=this.e,E=p.e;if(p.Cd=this.Cd==p.Cd?1:-1,!f[0]||!m[0])return new c(0*p.Cd);if(p.e=T+E,w<$){var O=f;f=m,m=O,E=w,w=$,$=E}for(O=Array(E=w+$);E--;O[E]=0);for(T=$;T--;){for($=0,E=w+T;E>T;)$=O[E]+m[T]*f[E-T-1]+$,O[E--]=$%10,$=$/10|0;O[E]=(O[E]+$)%10}for($&&++p.e,O[0]||O.shift(),T=O.length;!O[--T];O.pop());return p.c=O,p},c.prototype.toString=function(){var p=this.e,f=this.c.join(""),m=f.length;if(p<=o||p>=r)f=f.charAt(0)+(1<m?"."+f.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;f="0"+f);f="0."+f}else if(0<p)if(++p>m)for(p-=m;p--;f+="0");else p<m&&(f=f.slice(0,p)+"."+f.slice(p));else 1<m&&(f=f.charAt(0)+"."+f.slice(1));return 0>this.Cd&&this.c[0]?"-"+f:f},c.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&u("!toExp!"),k(this,p,1)},c.prototype.toFixed=function(p){var f=o,m=r;if(o=-(r=1/0),p==null)var w=this.toString();else p===~~p&&0<=p&&1e6>=p&&(w=k(this,this.e+p),0>this.Cd&&this.c[0]&&0>w.indexOf("-")&&(w="-"+w));return o=f,r=m,w||u("!toFix!"),w},c.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&u("!toPre!"),k(this,p-1,2))},c.tr=20,c.gu=1,c}();h.jp=l}(q||(q={})),function(h){var k=function(){function v(u){this.lf=u}return v.prototype.qr=function(u,o,r){var n=new h.h,l=new h.h,c=this.lf;r.Wd(u,o,function(p,f){return c.uc(2*p,n),c.uc(2*f,l),n.compare(l)})},v.prototype.bq=function(u){return this.lf.read(2*u+1)},v}();h.si=function(){function v(){}return v.cq=function(u){if(u.B())return!1;var o=u.K();return o==1736?u.He()!=0:o==1607?(o=[!1],v.nE(u,!0,o),o[0]):!(o!=197&&(!h.ba.zd(o)||u.wG()))},v.im=function(u){var o=u.K();if(o==1736)return o=new h.Ua(u.description),u.B()||u.ZC(o),o;if(o==1607)return v.nE(u,!1,null);if(o==197)return o=new h.Ua(u.description),u.B()||o.bd(u,!1),o;if(h.ba.zd(o)){if(o=new h.ee(u.description),!u.B()&&!u.wG()){var r=new h.Ta;u.Vo(r),o.add(r),u.Ro(r),o.add(r)}return o}if(h.ba.Tn(o))return null;throw h.i.O()},v.nE=function(u,o,r){r!=null&&(r[0]=!1);var n=null;if(o||(n=new h.ee(u.description)),!u.B()){var l=new h.ja(0);l.Jb(2*u.ea());for(var c=0,p=u.ea();c<p;c++)if(0<u.Ka(c)&&!u.Pn(c)){var f=u.Ca(c);l.add(f),f=u.Wc(c)-1,l.add(f)}if(0<l.size){p=new h.Zt,c=u.vb(0),p.sort(l,0,l.size,new k(c)),p=new h.h,c.uc(2*l.get(0),p),f=0;for(var m=1,w=new h.Ta,$=new h.h,T=1,E=l.size;T<E;T++)if(c.uc(2*l.get(T),$),$.rb(p))l.get(f)>l.get(T)?(l.set(f,2147483647),f=T):l.set(T,2147483647),m++;else{if(!(1&m))l.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;p.N($),f=T,m=1}if(!(1&m))l.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;if(!o)for(l.Wd(0,l.size,function(O,P){return O-P}),T=0,E=l.size;T<E&&l.get(T)!=2147483647;T++)u.we(l.get(T),w),n.add(w)}}return o?null:n},v}()}(q||(q={})),function(h){var k=function(){function v(){this.zf=new h.ja(0),this.As=new h.ja(0),this.zH=1,this.Gs=NaN}return v.prototype.sort=function(u,o,r,n){if(32>r-o)n.qr(o,r,u);else{var l=!0;try{for(var c=1/0,p=-1/0,f=o;f<r;f++){var m=n.bq(u.get(f));m<c&&(c=m),m>p&&(p=m)}if(this.reset(r-o,c,p,r-o)){for(f=o;f<r;f++){var w=u.get(f);m=n.bq(w);var $=this.uF(m);this.zf.set($,this.zf.get($)+1),this.As.write(f-o,w)}var T=this.zf.get(0);this.zf.set(0,0),f=1;for(var E=this.zf.size;f<E;f++){var O=this.zf.get(f);this.zf.set(f,T),T+=O}for(f=o;f<r;f++){w=this.As.read(f-o),m=n.bq(w),$=this.uF(m);var P=this.zf.get($);u.set(P+o,w),this.zf.set($,P+1)}l=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(l)n.qr(o,r,u);else{for(f=r=0,E=this.zf.size;f<E;f++)l=r,(r=this.zf.get(f))>l&&n.qr(o+l,o+r,u);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},v.prototype.reset=function(u,o,r,n){return!(2>u||r==o)&&(u=Math.min(v.cL,u),this.zf.Jb(u),this.zf.resize(u),this.zf.Yj(0,0,this.zf.size),this.zH=o,this.As.resize(n),this.Gs=(r-o)/(u-1),!0)},v.prototype.uF=function(u){return h.P.truncate((u-this.zH)/this.Gs)},v.cL=65536,v}();h.Zt=k}(q||(q={})),function(h){var k,v;(v=k||(k={}))[v.enum_line=1]="enum_line",v[v.enum_arc=2]="enum_arc",v[v.enum_dummy=4]="enum_dummy",v[v.enum_concave_dip=8]="enum_concave_dip",v[v.enum_connection=3]="enum_connection";var u=function(){function c(){}return c.Su=function(p,f,m,w,$,T){var E=new c;return E.Km=new h.h,E.Xm=new h.h,E.cw=new h.h,E.Km.N(p),E.Xm.N(f),E.cw.N(m),E.Eo=w,E.sh=$,E.uh=T,E},c.construct=function(p,f,m,w){var $=new c;return $.Km=new h.h,$.Xm=new h.h,$.cw=new h.h,$.Km.N(p),$.Xm.N(f),$.cw.Sc(),$.Eo=4,$.sh=m,$.uh=w,$},c}(),o=function(){function c(p,f,m,w,$,T){this.$v=null,this.za=0,this.zA=p,this.XH=this.VH=0,this.La=f,this.Oj=m,this.xk=w,this.Fq=$,this.Vb=T}return c.prototype.next=function(){for(var p=new h.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,p),this.za++,!p.B())break}var f=!1;if(this.$v==null&&(this.VH=p.Ng(),this.XH=p.kh(),this.$v=l.buffer(p,this.La,this.Oj,this.xk,this.Fq,this.Vb),f=!0),this.za<this.zA.I()){var m=new h.Ea;this.$v.copyTo(m)}else m=this.$v;if(!f){f=new h.Ed;var w=p.Ng()-this.VH;p=p.kh()-this.XH,f.ig(w,p),m.Pc(f)}return m},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),r=function(){function c(p,f){this.Xa=p,this.za=0,this.qq=f}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;if(this.za++,!p.Pn(f))for(var m=p.Oa(p.Wc(f)-1);this.za<p.ea();){var w=p.Oa(p.Ca(this.za));if(p.Pn(this.za)||w!=m)break;m=p.Oa(p.Wc(this.za)-1),this.za++}if(this.za-f==1)return this.Xa.fE(this.Xa.Y,f,this.qq);for((m=new h.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,f,!0),f+=1;f<this.za;f++)m.Fr(this.Xa.Y,f,0,p.tv(f),!1);return this.Xa.fE(m,0,this.qq)}return null},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),n=function(){function c(p){this.Xa=p,this.za=0}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;for(p.Kr(this.za),this.za++;this.za<p.ea()&&!(0<p.Kr(this.za));)this.za++;return f==0&&this.za==p.ea()?this.Xa.ly(p,0,p.ea()):this.Xa.ly(p,f,this.za)}return null},c.prototype.Ma=function(){return 0},c.prototype.re=function(){},c}(),l=function(){function c(p){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=p,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return c.buffer=function(p,f,m,w,$,T){if(p==null||0>w)throw h.i.O();if(p.B())return new h.Ea(p.description);var E=new h.l;return p.yc(E),0<f&&E.X(f,f),(T=new c(T)).Oj=m,T.Y=p,T.ra=h.ua.Xd(m,E,!0),T.dt=h.ua.Xd(null,E,!0),T.La=f,T.ET=p.K(),0>=$&&($=96),T.sb=Math.abs(T.La),T.Mv=T.sb!=0?1/T.sb:0,isNaN(w)||w==0?w=1e-5*T.sb:w>.5*T.sb&&(w=.5*T.sb),12>$&&($=12),(p=Math.abs(f)*(1-Math.cos(Math.PI/$)))>w?w=p:(p=Math.PI/Math.acos(1-w/Math.abs(f)))<$-1&&12>($=h.P.truncate(p))&&($=12,w=Math.abs(f)*(1-Math.cos(Math.PI/$))),T.xk=w,T.Fq=$,T.oA=Math.min(T.dt,.25*w),T.gE()},c.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var p=this.lE();p=h.P.truncate((p+3)/4);var f=.5*Math.PI/p;this.jA=f;for(var m=0;m<4*p;m++)this.Jd.push(null);var w=Math.cos(f);f=Math.sin(f);var $=h.h.construct(0,1);for(m=0;m<p;m++)this.Jd[m+0*p]=h.h.construct($.y,-$.x),this.Jd[m+1*p]=h.h.construct(-$.x,-$.y),this.Jd[m+2*p]=h.h.construct(-$.y,$.x),this.Jd[m+3*p]=$,($=h.h.construct($.x,$.y)).Ct(w,f)},c.prototype.gE=function(){var p=this.Y.K();if(h.ba.zd(p))return(p=new h.Ua(this.Y.description)).pc(this.Y,!0),this.Y=p,this.gE();if(this.La<=this.ra){if(!h.ba.PS(p))return new h.Ea(this.Y.description);if(0>=this.La&&(p=new h.l,this.Y.A(p),p.S()<=2*-this.La||p.da()<=2*this.La))return new h.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw h.i.Ra()}},c.prototype.MN=function(){if(this.zG(this.Y)){var p=new h.Ta;this.Y.we(0,p);var f=new h.l;return this.Y.A(f),p.Db(f.tf()),this.Iu(p)}return this.Y=this.RV(this.Y),p=new r(this,this.qq),h.Ih.local().W(p,this.Oj,this.Vb).next()},c.prototype.LN=function(){if(this.La==0)return this.Y;var p=h.$l.local();if(this.ev(),this.Y=p.W(this.Y,null,!1,this.Vb),0>this.La){var f=this.Y;return f=this.ly(f,0,f.ea()),p.W(f,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(p=new h.Ta,this.Y.we(0,p),f=new h.l,this.Y.A(f),p.Db(f.tf()),this.Iu(p)):(p=new n(this),h.Ih.local().W(p,this.Oj,this.Vb).next())},c.prototype.ly=function(p,f,m){for(var w=new h.Ea(p.description);f<m;f++)if(!(1>p.Ka(f))){var $=p.Kr(f),T=new h.l;if(p.Tj(f,T),0<this.La){if(0<$)if(this.AG(p,f))$=new h.Ta,p.we(p.Ca(f),$),$.Db(T.tf()),this.Au(w,$);else{var E=$=new h.Ua(p.description);E=h.au.EG(this.Y,f)||this.Bn(this.Y,f,E,!0,1)==2?this.eE(p,f):this.An($),w.add(E,!1)}else if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(E=$=new h.Ua(p.description),this.Bn(this.Y,f,E,!0,1),$.B()))){var O=new h.l;for(O.L(T),O.X(this.sb,this.sb),E.vp(O),T=1,$=(E=this.An($)).ea();T<$;T++)w.addPath(E,T,!0)}}else if(0<$){if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||(E=$=new h.Ua(p.description),this.Bn(this.Y,f,E,!0,-1),$.B())))for(O=new h.l,E.yc(O),O.X(this.sb,this.sb),E.vp(O),T=1,$=(E=this.An($)).ea();T<$;T++)w.addPath(E,T,!0)}else for(E=$=new h.Ua(p.description),this.Bn(this.Y,f,E,!0,-1),T=0,$=(E=this.An($)).ea();T<$;T++)w.addPath(E,T,!0)}if(0<this.La)return 1<w.ea()?w=this.An(w):c.kx(w);if(p=new h.l,w.yc(p),w.B())return c.kx(w);for(p.X(this.sb,this.sb),w.vp(p),w=this.An(w),p=new h.Ea(w.description),T=1,$=w.ea();T<$;T++)p.addPath(w,T,!1);return c.kx(p)},c.prototype.KN=function(){return this.Iu(this.Y)},c.prototype.Iu=function(p){var f=new h.Ea(this.Y.description);return this.Au(f,p),this.oX(f)},c.prototype.JN=function(){var p=new o(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return h.Ih.local().W(p,this.Oj,this.Vb).next()},c.prototype.GN=function(){var p=new h.Ea(this.Y.description);if(0>=this.La){if(this.La==0)p.bd(this.Y,!1);else{var f=new h.Hh;this.Y.dn(f),f.X(this.La,this.La),p.bd(f,!1)}return p}return p.bd(this.Y,!1),this.Y=p,this.eE(p,0)},c.prototype.eE=function(p,f){this.ev();var m=new h.Ea(p.description),w=new h.h,$=new h.h,T=new h.h,E=new h.h,O=new h.h,P=new h.h,L=new h.h,F=new h.h,z=p.Ka(f),R=p.Ca(f),G=0;for(f=p.Ka(f);G<f;G++){if(p.D(R+G,$),p.D(R+(G+1)%z,E),p.D(R+(G+2)%z,P),L.vc(E,$),L.length()==0||(L.Jv(),L.normalize(),L.scale(this.sb),w.add(L,$),T.add(L,E),G==0?m.Nt(w):m.Ei(w),m.Ei(T),F.vc(P,E),F.length()==0))throw h.i.Ra();F.Jv(),F.normalize(),F.scale(this.sb),O.add(F,E),this.BD(m,E,T,O,!1)}return c.kx(m)},c.prototype.fE=function(p,f,m){if(this.ev(),1>p.Ka(f))return null;if(this.AG(p,f)&&0<this.La){m=new h.Ta,p.we(p.Ca(f),m);var w=new h.l;return p.Tj(f,w),m.Db(w.tf()),this.Iu(m)}if(w=new h.Ua(p.description),p.Pn(f))this.Bn(p,f,w,m,1),this.Bn(p,f,w,m,-1);else{var $=new h.Ua(p.description);$.addPath(p,f,!1),$.Fr(p,f,0,p.tv(f),!1),this.Bn($,0,w,m,1)}return this.An(w)},c.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw h.i.hu("user_canceled")},c.prototype.An=function(p){return h.Hg.Ok(p,this.dt,!0,!0,this.Vb)},c.prototype.lE=function(){if(this.xk==0)return this.Fq;var p=1-this.xk*Math.abs(this.Mv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Fq&&(p=this.Fq),h.P.truncate(p)},c.prototype.BD=function(p,f,m,w,$){this.ev();var T=new h.h;T.vc(m,f),T.scale(this.Mv);var E=new h.h;E.vc(w,f),E.scale(this.Mv),0>(T=Math.atan2(T.y,T.x)/this.jA)&&(T=this.Jd.length+T),T=this.Jd.length-T,0>(E=Math.atan2(E.y,E.x)/this.jA)&&(E=this.Jd.length+E),(E=this.Jd.length-E)<T&&(E+=this.Jd.length);var O=h.P.truncate(E);E=h.P.truncate(Math.ceil(T)),(T=new h.h).N(this.Jd[E%this.Jd.length]),T.Dt(this.sb,f);var P=10*this.ra;for(T.sub(m),T.length()<P&&(E+=1),T.N(this.Jd[O%this.Jd.length]),T.Dt(this.sb,f),T.sub(w),T.length()<P&&--O,m=O-E,m++,O=0,E%=this.Jd.length;O<m;O++,E=(E+1)%this.Jd.length)T.N(this.Jd[E]),T.Dt(this.sb,f),p.Ei(T),this.Zq();$&&p.Ei(w)},c.prototype.Bn=function(p,f,m,w,$){var T=new h.hd,E=T.hN(p,f);if(T.Ip(this.oA,!1,!1),2>T.I(E))return 0>$||($=p,T=new h.Ta,$.we($.Ca(f),T),this.Au(m,T)),1;var O=T.Oa(T.Ya(T.Ob(E))),P=new h.Ed;if(P.ig(-O.x,-O.y),T.Pc(P),w&&(this.oQ(T,E,$),2>T.I(E)))return 0>$||($=p,T=new h.Ta,$.we($.Ca(f),T),this.Au(m,T)),1;this.$d.length=0;var L=T.Ob(E);f=T.Ya(L);var F=$==1?T.Na(f):T.V(f);p=$==1?T.V(f):T.Na(f);var z=!0;w=new h.h,E=new h.h;var R=new h.h,G=new h.h,H=new h.h,B=new h.h,te=new h.h,Q=new h.h,ne=new h.h,pe=new h.h,he=this.sb;L=T.Ka(L);for(var Ie=0;Ie<L;Ie++)T.D(p,E),z&&(T.D(f,w),T.D(F,R),Q.vc(w,R),Q.normalize(),pe.HG(Q),pe.scale(he),G.add(pe,w)),te.vc(E,w),te.normalize(),ne.HG(te),ne.scale(he),H.add(w,ne),F=Q.yi(te),z=Q.Sh(te),0>F||0>z&&F==0?this.$d.push(u.Su(G,H,w,2,this.$d.length+1,this.$d.length-1)):G.rb(H)||(this.$d.push(u.construct(G,w,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(u.construct(w,H,this.$d.length+1,this.$d.length-1,"dummy"))),B.add(E,ne),this.$d.push(u.Su(H,B,w,1,this.$d.length+1,this.$d.length-1)),G.N(B),pe.N(ne),R.N(w),w.N(E),Q.N(te),F=f,f=p,z=!1,p=$==1?T.V(f):T.Na(f);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(m),P.ig(O.x,O.y),m.TD(P,m.ea()-1),1},c.prototype.TV=function(p){for(var f=this.uO(),m=!0,w=f+1,$=f;w!=f;$=w){var T=this.$d[$];w=T.sh!=-1?T.sh:($+1)%this.$d.length,T.Eo!=0&&(m&&p.Nt(T.Km),T.Eo==2?this.BD(p,T.cw,T.Km,T.Xm,!0):p.Ei(T.Xm),m=!1)}},c.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var p=0,f=0,m=this.$d.length;f<m;){var w=this.$d[f];if(3&w.Eo){p=f;break}f=w.sh}for(m=p+1,f=p;m!=p;f=m){m=(w=this.$d[f]).sh;for(var $=1,T=null;m!=f&&!(3&(T=this.$d[m]).Eo);)m=T.sh,$++;$!=1&&(w.Eo&T.Eo)==1&&(this.Ns==null&&(this.Ns=new h.zb,this.nw=new h.zb),this.Ns.Ec(w.Km),this.Ns.Rc(w.Xm),this.nw.Ec(T.Km),this.nw.Rc(T.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(w.Xm.N(this.Ms[0]),T.Km.N(this.Ms[0]),w.sh=m,T.uh=f))}return p},c.prototype.Hv=function(p,f,m){var w=new h.h;if(w.vc(m,p),m=w.length(),0<(m=this.sb*this.sb-m*m*.25)){m=Math.sqrt(m),w.normalize(),w.cr();var $=new h.h;if($.vc(f,p),$.Sh(w)+m>=this.sb)return!0}return!1},c.prototype.oQ=function(p,f,m){for(var w=0;1>w;w++){var $=!1,T=p.Ob(f),E=p.Ka(T);if(E==0)break;var O=E;if(3>E)break;!p.ec(T)&&(O=E-1),T=p.Ya(T),E=0<m?p.Na(T):p.V(T);for(var P=0<m?p.V(T):p.Na(T),L=E,F=!0,z=new h.h,R=new h.h,G=new h.h,H=new h.h,B=new h.h,te=h.h.construct(0,0),Q=new h.h,ne=new h.h,pe=new h.h,he=new h.h,Ie=this.sb,ge=0,He=0;He<O&&(p.D(P,R),F&&(p.D(T,z),p.D(E,G),L=E),ne.vc(z,G),ne.normalize(),Q.vc(R,z),Q.normalize(),L!=P);){var Fe=ne.yi(Q),xe=ne.Sh(Q),zt=!0;if(0>Fe||0>xe&&Fe==0||!this.Hv(G,z,R)||(te.N(R),zt=!1,++ge,$=!0),zt){if(0<ge)for(;(Fe=0<m?p.Na(L):p.V(L))!=T;){if(p.D(Fe,H),!this.Hv(H,G,te)){Fe!=P&&this.Hv(H,G,R)&&this.Hv(H,z,R)&&(G.N(H),L=Fe,zt=!1,++ge);break}G.N(H),L=Fe,zt=!1,++ge}if(!zt)continue;if(0<ge){for(L=0<m?p.Na(E):p.V(E),F=1;F<ge;F++)zt=0<m?p.Na(L):p.V(L),p.qd(L,!0),L=zt;pe.vc(z,G),ge=Ie*Ie-(ge=pe.length())*ge*.25,Ie-(ge=Math.sqrt(ge))>.5*this.xk?(B.add(G,z),B.scale(.5),pe.normalize(),pe.cr(),he.N(pe),he.scale(Ie-ge),B.add(he),p.mf(E,B)):p.qd(E,!0),ge=0}G.N(z),L=T}z.N(R),E=T,T=P,P=0<m?p.V(T):p.Na(T),He++,F=!1}if(0<ge){for(L=0<m?p.Na(E):p.V(E),F=1;F<ge;F++)zt=0<m?p.Na(L):p.V(L),p.qd(L,!0),L=zt;B.add(G,z),B.scale(.5),pe.vc(z,G),ge=Ie*Ie-(ge=pe.length())*ge*.25,ge=Math.sqrt(ge),pe.normalize(),pe.cr(),he.N(pe),he.scale(Ie-ge),B.add(he),p.mf(E,B)}if(p.Ip(this.oA,!1,!1),!$)break}},c.prototype.AG=function(p,f){if(p.Ka(f)==1)return!0;var m=new h.l;return p.Tj(f,m),Math.max(m.S(),m.da())<.5*this.xk},c.prototype.zG=function(p){var f=new h.l;return p.A(f),Math.max(f.S(),f.da())<.5*this.xk},c.prototype.RV=function(p){for(var f=0,m=0,w=(p=h.zC.local().W(p,.25*this.xk,!1,this.Vb)).ea();m<w;m++)f=Math.max(p.Ka(m),f);return 32>f?(this.qq=!1,p):(this.qq=!0,h.Hg.Ok(p,this.dt,!1,!0,this.Vb))},c.prototype.Au=function(p,f){if(f=f.D(),this.Jd!=null&&this.Jd.length!==0){var m=new h.h;m.N(this.Jd[0]),m.Dt(this.sb,f),p.Nt(m);for(var w=1,$=this.Jd.length;w<$;w++)m.N(this.Jd[w]),m.Dt(this.sb,f),p.Ei(m)}else{w=this.lE(),m=h.P.truncate((w+3)/4),w=.5*Math.PI/m,$=Math.cos(w);for(var T=Math.sin(w),E=new h.h,O=3;0<=O;O--){switch(E.na(0,this.sb),O){case 0:for(w=0;w<m;w++)p.Aj(E.x+f.x,E.y+f.y),E.Ct($,T);break;case 1:for(w=0;w<m;w++)p.Aj(-E.y+f.x,E.x+f.y),E.Ct($,T);break;case 2:for(w=0;w<m;w++)p.Aj(-E.x+f.x,-E.y+f.y),E.Ct($,T);break;default:for(p.rx(E.y+f.x,-E.x+f.y),w=1;w<m;w++)E.Ct($,T),p.Aj(E.y+f.x,-E.x+f.y)}this.Zq()}}},c.kx=function(p){return p.Eh(1,0),p},c.prototype.oX=function(p){return p.Eh(2,this.ra),p.hm(),p},c}();h.CK=l}(q||(q={})),function(h){var k=function(){function v(u){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0)}return v.prototype.Nh=function(u,o,r){switch(o){case 0:if(u.v<r&&u.C<=r)break;return u.v>=r?1:-1;case 1:if(u.G<r&&u.H<=r)break;return u.G>=r?1:-1;case 2:if(u.v>=r&&u.C>r)break;return u.C<=r?1:-1;case 3:if(!(u.G>=r&&u.H>r))return u.H<=r?1:-1}return 0},v.prototype.vy=function(u,o){return u.K()==1736?this.xy(u,o):this.yy(u)},v.prototype.xy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var r=new h.l;u.yc(r),this.Y=this.g.Ib(u);var n=new h.l,l=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0];new h.jg;var w=new h.zb,$=new h.ja(0);$.Jb(Math.min(100,u.I()));for(var T=!1,E=0;!T&&4>E;E++){var O=!1,P=(1&E)!=0,L=0;switch(E){case 0:L=this.Da.v,O=r.v<=L&&r.C>=L;break;case 1:L=this.Da.G,O=r.G<=L&&r.H>=L;break;case 2:L=this.Da.C,O=r.v<=L&&r.C>=L;break;case 3:L=this.Da.H,O=r.G<=L&&r.H>=L}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var F=-1,z=-1,R=this.g.Ya(O),G=R;do{var H=this.g.cc(G);H==null&&(H=w,this.g.D(G,c),H.Ec(c),this.g.D(this.g.V(G),p),H.Rc(p)),H.A(n);var B=this.Nh(n,E,L),te=0,Q=-1;if(B==-1){te=0<(H=H.fq(P,L,f,m))?this.g.Wl(G,m,H):0,te+=1;var ne=G,pe=this.g.V(ne);for(H=0;H<te;H++){if(this.g.D(ne,c),this.g.D(pe,p),(Q=this.g.cc(ne))==null&&((Q=w).Ec(c),Q.Rc(p)),Q.A(l),(Q=this.Nh(l,E,L))==-1){if(P)(Q=Math.abs(c.y-L))<(he=Math.abs(p.y-L))?(c.y=L,this.g.mf(ne,c)):(p.y=L,this.g.mf(pe,p));else{Q=Math.abs(c.x-L);var he=Math.abs(p.x-L);Q<he?(c.x=L,this.g.mf(ne,c)):(p.x=L,this.g.mf(pe,p))}(Q=this.g.cc(ne))==null&&((Q=w).Ec(c),Q.Rc(p)),Q.A(l),Q=this.Nh(l,E,L)}he=F,F=Q,z==-1&&(z=F),he==0&&F==1||he==1&&F==0||he!=0||F!=0||$.add(ne),F==1&&(T=!1),Q=ne=pe,pe=this.g.V(pe)}}te==0&&(he=F,F=B,z==-1&&(z=F),he==0&&F==1||he==1&&F==0||he!=0||F!=0||$.add(G),F==1&&(T=!1),Q=this.g.V(G)),G=Q}while(G!=R);for(z==0&&F==0&&$.add(R),H=0,F=$.size;H<F;H++)z=$.get(H),this.g.qd(z,!1);$.clear(!1),O=3>this.g.Ka(O)?this.g.ar(O):this.g.Sb(O)}}return T?u.Ja():(this.AB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},v.prototype.yy=function(u){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new h.jg,p=u,f=new h.l;u.yc(f);for(var m=0;4>m;m++){var w=!1,$=(1&m)!=0,T=0;switch(m){case 0:T=this.Da.v,w=f.v<=T&&f.C>=T;break;case 1:T=this.Da.G,w=f.G<=T&&f.H>=T;break;case 2:T=this.Da.C,w=f.v<=T&&f.C>=T;break;case 3:T=this.Da.H,w=f.G<=T&&f.H>=T}if(w){w=p,p=u.Ja(),(w=w.Ha()).aj();for(var E,O=new h.h;w.ab();)for(var P,L=!0;w.Ia();){var F=w.ia();F.A(o);var z=this.Nh(o,m,T);if(z==-1){if(0<(z=F.fq($,T,n,l))){var R=0;E=F.bc();for(var G=0;G<=z;G++)if(R!=(P=G<z?l[G]:1)){F.dh(R,P,c);var H=c.get();H.Ec(E),G<z&&($?(O.x=n[G],O.y=T):(O.x=T,O.y=n[G]),H.Rc(O)),H.A(r);var B=this.Nh(r,m,T);if(B==-1){if(E=H.bc(),R=H.xc(),$)(B=Math.abs(E.y-T))<(te=Math.abs(R.y-T))?(E.y=T,H.Ec(E)):(R.y=T,H.Rc(R));else{B=Math.abs(E.x-T);var te=Math.abs(R.x-T);B<te?(E.x=T,H.Ec(E)):(R.x=T,H.Rc(R))}H.A(r),B=this.Nh(r,m,T)}E=H.xc(),R=P,(P=B)==1?(p.pc(H,L),L=!1):L=!0}}}else(P=z)==1?(p.pc(F,L),L=!1):L=!0}}}return p},v.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var r=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++,r=this.g.V(r))this.g.D(r,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(r,this.li,this.ed.size),this.ed.add(r));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},v.prototype.Hy=function(u){for(var o=new h.h,r=new h.h,n=h.P.mg(2048,0),l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l)){var c=this.g.Ya(l),p=c;do{var f=this.g.V(p);this.g.D(p,o);var m=-1;if(o.x==this.Da.v?(this.g.D(f,r),r.x==this.Da.v&&(m=1)):o.x==this.Da.C&&(this.g.D(f,r),r.x==this.Da.C&&(m=1)),o.y==this.Da.G?(this.g.D(f,r),r.y==this.Da.G&&(m=0)):o.y==this.Da.H&&(this.g.D(f,r),r.y==this.Da.H&&(m=0)),m!=-1&&(m=h.h.ub(o,r),!(1>=(m=h.P.truncate(Math.min(Math.ceil(m/u),2048)))))){for(var w=1;w<m;w++)n[w-1]=1*w/m;this.g.Wl(p,n,m-1)}p=f}while(p!=c)}},v.prototype.Xl=function(u,o){var r=this.g.Hd(),n=new h.h,l=new h.ja(0);l.Jb(100);for(var c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,m=this.g.Ka(c);f<m;f++){var w=this.g.V(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(this.g.Qa(p,r)!=1&&(l.add(p),this.g.Sa(p,r,1)),this.g.Qa(w,r)!=1&&(l.add(w),this.g.Sa(w,r,1)))),p=w}if(this.g.Ud(r),!(3>l.size)){var $=this;l.Wd(0,l.size,function(B,te){return $.Oh(B,te)}),r=new h.h,c=new h.h,p=new h.h,c.Sc();var T=-1;f=new h.ja(0),m=new h.ja(0),w=this.g.Hd();for(var E=this.g.Hd(),O=0,P=l.size;O<P;O++){var L=l.get(O);if(this.g.D(L,n),!n.rb(c)){if(T!=-1){for(var F=T;F<O;F++){T=l.get(F);var z=this.g.V(T);L=this.g.Na(T);var R=!1;0>this.Oh(T,z)&&(this.g.D(z,r),u?r.y==o:r.x==o)&&(f.add(T),R=!0,this.g.Sa(T,E,1)),0>this.Oh(T,L)&&(this.g.D(L,r),u?r.y==o:r.x==o)&&(R||f.add(T),this.g.Sa(T,w,1))}for(F=0,R=f.size;F<R;F++){if(T=f.get(F),L=this.g.Qa(T,w),z=this.g.Qa(T,E),L==1){L=this.g.Na(T),this.g.D(L,p);var G=[0];if(G[0]=0,!p.rb(n)){var H=h.h.ub(c,p);G[0]=h.h.ub(p,n)/H,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(L,G,1),L=this.g.Na(T),this.g.mf(L,n),m.add(L),this.g.Sa(L,w,1),this.g.Sa(L,E,-1)}}z==1&&(z=this.g.V(T),this.g.D(z,p),(G=[0])[0]=0,p.rb(n)||(H=h.h.ub(c,p),G[0]=h.h.ub(c,n)/H,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(T,G,1),L=this.g.V(T),this.g.mf(L,n),m.add(L),this.g.Sa(L,w,-1),this.g.Sa(L,E,1)))}T=f,f=m,(m=T).clear(!1)}T=O,c.N(n)}}this.g.Ud(w),this.g.Ud(E)}},v.prototype.Pl=function(u,o){var r=new h.h,n=new h.ja(0);n.Jb(100);for(var l=this.g.Hd(),c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var m=this.g.V(f);this.g.D(f,r),(u?r.y==o:r.x==o)&&(this.g.D(m,r),(u?r.y==o:r.x==o)&&(this.g.Qa(f,l)!=-2&&(n.add(f),this.g.Sa(f,l,-2)),this.g.Qa(m,l)!=-2&&(n.add(m),this.g.Sa(m,l,-2))))}}if(n.size!=0){var w=this;for(n.Wd(0,n.size,function(te,Q){return w.Oh(te,Q)}),c=0,p=n.size;c<p;c++){var $=n.get(c);this.g.Sa($,l,c)}f=new h.h,(m=new h.h).Sc();var T=-1;for(c=0,p=n.size;c<p;c++)if(($=n.get(c))!=-1&&(this.g.D($,r),!r.rb(m))){if(T!=-1)for(;;){$=!1;for(var E=1<c-T?c-1:c,O=T;O<E;O++){var P=n.get(O);if(P!=-1){var L=-1,F=this.g.V(P);0>this.Oh(P,F)&&(this.g.D(F,f),u?f.y==o:f.x==o)&&(L=F),F=-1;var z=this.g.Na(P);if(0>this.Oh(P,z)&&(this.g.D(z,f),u?f.y==o:f.x==o)&&(F=z),L!=-1&&F!=-1)this.Mh(P,n,l),this.g.qd(P,!1),this.Mh(L,n,l),this.g.qd(L,!1),$=!0;else if(L!=-1||F!=-1){for(z=O+1;z<c;z++){var R=n.get(z);if(R!=-1){var G=this.g.V(R),H=-1;0>this.Oh(R,G)&&(this.g.D(G,f),u?f.y==o:f.x==o)&&(H=G),G=this.g.Na(R);var B=-1;if(0>this.Oh(R,G)&&(this.g.D(G,f),u?f.y==o:f.x==o)&&(B=G),H!=-1&&B!=-1){this.Mh(R,n,l),this.g.qd(R,!1),this.Mh(H,n,l),this.g.qd(H,!1),$=!0;break}if(L!=-1&&B!=-1){this.At(n,P,L,R,B,l),$=!0;break}if(F!=-1&&H!=-1){this.At(n,R,H,P,F,l),$=!0;break}}}if($)break}}}if(!$)break}T=c,m.N(r)}}this.g.Ud(l)},v.prototype.Mh=function(u,o,r){r=this.g.Qa(u,r),o.set(r,-1),r=this.g.Qa(u,this.li),this.ed.set(r,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},v.prototype.At=function(u,o,r,n,l,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(r,l),this.g.Cc(l,r),this.Mh(n,u,c),this.g.oi(n,!1),this.Mh(l,u,c),this.g.oi(l,!0)},v.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var r=this.ed.get(u);r!=-1&&this.g.cj(r,-1)}for(var n=0,l=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{r=p,f=0;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.qd(p,!1),f==2&&(r=this.g.Qa(p,this.li),this.ed.set(r,-1),this.g.qd(p,!1)),f=c,c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)):(this.g.fp(c,!1),this.g.Yg(c,this.g.Na(p)),this.g.Xj(c,f),l+=f,n++,c=this.g.Sb(c))}}for(u=0,o=this.ed.size;u<o;u++)if((r=this.ed.get(u))!=-1&&(c=this.g.cd(r))==-1){c=this.g.wf(this.Y,-1),f=0,p=r;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.qd(p,!1),f==2&&(0<=(r=this.g.Qa(p,this.li))&&this.ed.set(r,-1),this.g.qd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,p),this.g.Yg(c,this.g.Na(p)),this.g.fp(c,!1),l+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,l),u=0,o=this.g.md;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.XB(u)},v.wy=function(u,o,r){return new v(o).vy(u,r)},v.clip=function(u,o,r,n){if(u.B())return u;if(o.B())return u.Ja();if((r=u.K())==33)return n=u.D(),o.contains(n)?u:u.Ja();if(r==197)return n=new h.l,u.A(n),n.Fa(o)?(o=new h.Hh,u.copyTo(o),o.Zo(n),o):u.Ja();var l=new h.l;if(u.yc(l),o.contains(l))return u;if(!o.isIntersecting(l))return u.Ja();if((l=u.Cb)!=null&&(l=l.Hk)!=null){if((l=l.To(o))==1){if(r!=1736)throw h.i.Ra();return(u=new h.Ea(u.description)).vp(o),u}if(l==0)return u.Ja()}switch(r){case 550:r=null,l=u.I();for(var c=u.vb(0),p=0,f=0;f<l;f++)n=new h.h,c.uc(2*f,n),o.contains(n)||(p==0&&(r=u.Ja()),p<f&&r.Gd(u,p,f),p=f+1);return 0<p&&r.Gd(u,p,l),p==0?u:r;case 1736:case 1607:return v.wy(u,o,n);default:throw h.i.Ra()}},v.prototype.Oh=function(u,o){var r=new h.h;return this.g.D(u,r),u=new h.h,this.g.D(o,u),r.compare(u)},v}();h.Vd=k}(q||(q={})),function(h){var k=function(){function v(u,o){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0),this.od=o}return v.prototype.Nh=function(u,o,r){switch(o){case 0:if(u.v<r&&u.C<=r)break;return u.v>=r?1:-1;case 1:if(u.G<r&&u.H<=r)break;return u.G>=r?1:-1;case 2:if(u.v>=r&&u.C>r)break;return u.C<=r?1:-1;case 3:if(!(u.G>=r&&u.H>r))return u.H<=r?1:-1}return 0},v.prototype.vy=function(u,o){return u.K()==1736?this.xy(u,o):this.yy(u)},v.prototype.xy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var r=new h.l;u.yc(r),this.Y=this.g.Ib(u);var n=new h.l,l=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0],w=new h.zb,$=new h.ja(0);$.Jb(256);for(var T=!1,E=0;!T&&4>E;E++){var O=!1,P=(1&E)!=0,L=0;switch(E){case 0:L=this.Da.v,O=r.v<=L&&r.C>=L;break;case 1:L=this.Da.G,O=r.G<=L&&r.H>=L;break;case 2:L=this.Da.C,O=r.v<=L&&r.C>=L;break;case 3:L=this.Da.H,O=r.G<=L&&r.H>=L}if(O)for(T=!0,O=this.g.Ob(this.Y);O!=-1;){var F=!0,z=-1,R=-1,G=this.g.Ya(O),H=G;do{var B=this.g.cc(H);B==null&&(B=w,this.g.D(H,c),B.Ec(c),this.g.D(this.g.V(H),p),B.Rc(p)),B.A(n);var te=this.Nh(n,E,L),Q=0,ne=-1;if(te==-1){Q=0<(B=B.fq(P,L,f,m))?this.g.HX(H,m,B):0,Q+=1;var pe=H,he=this.g.V(pe);for(B=0;B<Q;B++){if(this.g.D(pe,c),this.g.D(he,p),(ne=this.g.cc(pe))==null&&((ne=w).Ec(c),ne.Rc(p)),ne.A(l),(ne=this.Nh(l,E,L))==-1){if(P)(ne=Math.abs(c.y-L))<(Ie=Math.abs(p.y-L))?(c.y=L,this.g.mf(pe,c)):(p.y=L,this.g.mf(he,p));else{ne=Math.abs(c.x-L);var Ie=Math.abs(p.x-L);ne<Ie?(c.x=L,this.g.mf(pe,c)):(p.x=L,this.g.mf(he,p))}(ne=this.g.cc(pe))==null&&((ne=w).Ec(c),ne.Rc(p)),ne.A(l),ne=this.Nh(l,E,L)}Ie=z,z=ne,R==-1&&(R=z),Ie==0&&z==1||Ie==1&&z==0||Ie!=0||z!=0||$.add(pe),z==1&&(F=T=!1),ne=pe=he,he=this.g.V(he)}}if(Q==0&&(Ie=z,z=te,R==-1&&(R=z),Ie==0&&z==1||Ie==1&&z==0||Ie!=0||z!=0||$.add(H),z==1&&(F=T=!1),ne=this.g.V(H)),H=ne,256<=$.size){for(B=1,te=$.size-1;B<te;B++)Q=$.get(B),this.g.qd(Q,!1);$.set(1,$.Gc()),$.Dh(2)}}while(H!=G);if(!F)for(R==0&&z==0&&$.add(G),B=0,te=$.size;B<te;B++)Q=$.get(B),this.g.qd(Q,!1);$.clear(!1),O=F||this.g.Ka(O)==0?this.g.ar(O):this.g.Sb(O)}}return T?u.Ja():(this.AB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},v.prototype.yy=function(u){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new h.jg,p=u,f=new h.l;u.yc(f);for(var m=new h.h,w=new h.h,$=null,T=null,E=0;4>E;E++){var O=!1,P=(1&E)!=0,L=0;switch(E){case 0:L=this.Da.v,O=f.v<=L&&f.C>=L;break;case 1:L=this.Da.G,O=f.G<=L&&f.H>=L;break;case 2:L=this.Da.C,O=f.v<=L&&f.C>=L;break;case 3:L=this.Da.H,O=f.G<=L&&f.H>=L}if(O)for(O=p,p=u.Ja(),(O=O.Ha()).aj();O.ab();)for(var F,z=!0;O.Ia();){var R=O.ia();R.A(o);var G=this.Nh(o,E,L);if(G==-1){if(0<(G=R.fq(P,L,n,l))){var H=0;R.$p(m);for(var B=0;B<=G;B++)if(H!=(F=B<G?l[B]:1)){R.dh(H,F,c);var te=c.get();te.Ec(m),B<G&&(P?(w.x=n[B],w.y=L):(w.x=L,w.y=n[B]),te.Rc(w)),te.A(r);var Q=this.Nh(r,E,L);Q==-1&&($==null&&($=new h.h),T==null&&(T=new h.h),te.$p($),te.Vr(T),P?(H=Math.abs($.y-L))<(Q=Math.abs(T.y-L))?($.y=L,te.Ec($)):(T.y=L,te.Rc(T)):(H=Math.abs($.x-L))<(Q=Math.abs(T.x-L))?($.x=L,te.Ec($)):(T.x=L,te.Rc(T)),te.A(r),Q=this.Nh(r,E,L)),te.Vr(m),H=F,(F=Q)==1?(p.pc(te,z),z=!1):z=!0}}}else(F=G)==1?(p.pc(R,z),z=!1):z=!0}}return p},v.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var r=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++,r=this.g.V(r))this.g.D(r,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(r,this.li,this.ed.size),this.ed.add(r));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},v.prototype.Hy=function(u){for(var o=new h.h,r=new h.h,n=null,l=null,c=h.P.mg(2048,0),p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p)){var f=this.g.Ya(p),m=f;do{var w=this.g.V(m);this.g.D(m,o);var $=-1;if(o.x==this.Da.v?(this.g.D(w,r),r.x==this.Da.v&&($=1)):o.x==this.Da.C&&(this.g.D(w,r),r.x==this.Da.C&&($=1)),o.y==this.Da.G?(this.g.D(w,r),r.y==this.Da.G&&($=0)):o.y==this.Da.H&&(this.g.D(w,r),r.y==this.Da.H&&($=0)),$!=-1){if(n==null&&(n=new h.h),l==null&&(l=new h.h),n.N(o),l.na(0,0),$==0){var T=o.x-this.Da.v;l.x=h.mc.sign(r.x-o.x),n.x=u*h.mc.En(Math.floor(Math.abs(T/u)),T)+this.Da.v,0>n.x&&(n.x+=u)}else T=o.y-this.Da.G,l.y=h.mc.sign(r.y-o.y),n.y=u*h.mc.En(Math.floor(Math.abs(T/u)),T)+this.Da.G,0>n.y&&(n.y+=u);T=$!=0?r.y-o.y:r.x-o.x;var E=Math.abs(T);if(65536<E/u)throw h.i.ga("internal error");if(0<E){E=h.P.truncate(E/u)+2,c.length<E&&(c=h.P.mg(E));for(var O=E=0;;O++){var P=new h.h;if(P.x=n.x+l.x*O*u,P.y=n.y+l.y*O*u,1<=(P=($!=0?P.y-o.y:P.x-o.x)/T))break;0>=P||(c[E]=P,E++)}E!=0&&this.g.Wl(m,c,E)}}m=w}while(m!=f)}},v.prototype.Xl=function(u,o){for(var r=-1,n=new h.h,l=null,c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,m=this.g.Ka(c);f<m;f++){var w=this.g.V(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(w,n),(u?n.y==o:n.x==o)&&(r==-1&&(r=this.g.Hd()),l==null&&(l=new h.ja(0)).Jb(100),this.g.Qa(p,r)!=1&&(l.add(p),this.g.Sa(p,r,1)),this.g.Qa(w,r)!=1&&(l.add(w),this.g.Sa(w,r,1)))),p=w}if(r!=-1&&this.g.Ud(r),!(l==null||3>l.size)){var $=this;l.Wd(0,l.size,function(B,te){return $.Oh(B,te)}),r=new h.h,c=new h.h,p=new h.h,c.Sc();var T=-1;f=new h.ja(0),m=new h.ja(0),w=null;for(var E=this.g.Hd(),O=this.g.Hd(),P=0,L=l.size;P<L;P++){var F=l.get(P);if(this.g.D(F,n),!n.rb(c)){if(T!=-1){for(var z=T;z<P;z++){T=l.get(z);var R=this.g.V(T);F=this.g.Na(T);var G=!1;this.g.D(R,r),0>c.compare(r)&&(u?r.y==o:r.x==o)&&(f.add(T),G=!0,this.g.Sa(T,O,1)),this.g.D(F,r),0>c.compare(r)&&(u?r.y==o:r.x==o)&&(G||f.add(T),this.g.Sa(T,E,1))}for(z=0,G=f.size;z<G;z++){if(T=f.get(z),F=this.g.Qa(T,E),R=this.g.Qa(T,O),F==1&&(F=this.g.Na(T),this.g.D(F,p),!p.rb(n))){w==null&&(w=[]);var H=h.h.ub(c,p);w[0]=h.h.ub(p,n)/H,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Wl(F,w,1),F=this.g.Na(T),this.g.mf(F,n),m.add(F),this.g.Sa(F,E,1),this.g.Sa(F,O,-1)}R==1&&(R=this.g.V(T),this.g.D(R,p),p.rb(n)||(w==null&&(w=[]),H=h.h.ub(c,p),w[0]=h.h.ub(c,n)/H,w[0]==0?w[0]=2220446049250313e-31:w[0]==1&&(w[0]=.9999999999999998),this.g.Wl(T,w,1),F=this.g.V(T),this.g.mf(F,n),m.add(F),this.g.Sa(F,E,-1),this.g.Sa(F,O,1)))}T=f,f=m,(m=T).clear(!1)}T=P,c.N(n)}}this.g.Ud(E),this.g.Ud(O)}},v.prototype.Pl=function(u,o){for(var r=new h.h,n=null,l=-1,c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var m=this.g.V(f);this.g.D(f,r),(u?r.y==o:r.x==o)&&(this.g.D(m,r),(u?r.y==o:r.x==o)&&(l==-1&&(l=this.g.Hd()),n==null&&(n=new h.ja(0)).Jb(100),this.g.Qa(f,l)!=-2&&(n.add(f),this.g.Sa(f,l,-2)),this.g.Qa(m,l)!=-2&&(n.add(m),this.g.Sa(m,l,-2))))}}if(n==null)l!=-1&&this.g.Ud(l);else{var w=this;for(n.Wd(0,n.size,function(te,Q){return w.Oh(te,Q)}),c=0,p=n.size;c<p;c++){var $=n.get(c);this.g.Sa($,l,c)}f=new h.h,(m=new h.h).Sc();var T=-1;for(c=0,p=n.size;c<p;c++)if(($=n.get(c))!=-1&&(this.g.D($,r),!r.rb(m))){if(T!=-1)for(;;){$=!1;for(var E=1<c-T?c-1:c,O=T;O<E;O++){var P=n.get(O);if(P!=-1){var L=-1,F=this.g.V(P);this.g.D(F,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(L=F),F=-1;var z=this.g.Na(P);if(this.g.D(z,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(F=z),L!=-1&&F!=-1)this.Mh(P,n,l),this.g.qd(P,!1),this.Mh(L,n,l),this.g.qd(L,!1),$=!0;else if(L!=-1||F!=-1){for(z=O+1;z<c;z++){var R=n.get(z);if(R!=-1){var G=this.g.V(R),H=-1;this.g.D(G,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(H=G),G=this.g.Na(R);var B=-1;if(this.g.D(G,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(B=G),H!=-1&&B!=-1){this.Mh(R,n,l),this.g.qd(R,!1),this.Mh(H,n,l),this.g.qd(H,!1),$=!0;break}if(L!=-1&&B!=-1){this.At(n,P,L,R,B,l),$=!0;break}if(F!=-1&&H!=-1){this.At(n,R,H,P,F,l),$=!0;break}}}if($)break}}}if(!$)break}T=c,m.N(r)}this.g.Ud(l)}},v.prototype.Mh=function(u,o,r){r=this.g.Qa(u,r),o.set(r,-1),r=this.g.Qa(u,this.li),this.ed.set(r,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},v.prototype.At=function(u,o,r,n,l,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(r,l),this.g.Cc(l,r),this.Mh(n,u,c),this.g.oi(n,!1),this.Mh(l,u,c),this.g.oi(l,!0)},v.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var r=this.ed.get(u);r!=-1&&this.g.cj(r,-1)}for(var n=0,l=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{r=p,f=0;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);this.g.fp(c,!1),this.g.Yg(c,this.g.Na(p)),this.g.Xj(c,f),l+=f,n++,c=this.g.Sb(c)}}for(u=0,o=this.ed.size;u<o;u++)if((r=this.ed.get(u))!=-1&&(c=this.g.cd(r))==-1){c=this.g.wf(this.Y,-1),f=0,p=r;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.qd(p,!1),f==2&&(0<=(r=this.g.Qa(p,this.li))&&this.ed.set(r,-1),this.g.qd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,p),this.g.Yg(c,this.g.Na(p)),this.g.fp(c,!1),l+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,l),u=0,o=this.g.md;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.XB(u)},v.wy=function(u,o,r,n){return new v(o,n).vy(u,r)},v.clip=function(u,o,r,n,l){return v.Pu(u,o,null,r,n,l)},v.Pu=function(u,o,r,n,l,c){var p=u.K();if(p==33)return l=u.D(),o.contains(l)?u:u.Ja();if(p==197)return l=new h.l,u.A(l),l.Fa(o)?(o=new h.Hh,u.copyTo(o),o.Zo(l),o):u.Ja();if(u.B())return u;if(o.B())return u.Ja();var f=new h.l;if(u.yc(f),o.contains(f))return u;if(!o.isIntersecting(f))return u.Ja();if((r!=null||isNaN(n))&&h.ua.oy(r,o,!1),!h.ba.zj(p))throw h.i.O();if((r=u.Cb)!=null&&(r=r.Hk)!=null){if((r=r.To(o))==1){if(p!=1736)throw h.i.ga("internal error");return(u=new h.Ea(u.description)).vp(o),u}if(r==0)return u.Ja()}switch(p){case 550:for(c=null,p=u.I(),r=u.vb(0),n=0,l=new h.h,f=0;f<p;f++)r.uc(2*f,l),o.contains(l)||(n==0&&(c=u.Ja()),n<f&&c.Gd(u,n,f),n=f+1);return 0<n&&c.Gd(u,n,p),n==0?u:c;case 1736:case 1607:return v.wy(u,o,l,c);default:throw h.i.ga("internal error")}},v.prototype.Oh=function(u,o){var r=new h.h;return this.g.D(u,r),u=new h.h,this.g.D(o,u),r.compare(u)},v}();h.ti=k}(q||(q={})),function(h){var k=new h.h,v=function(){function o(r,n,l,c,p){this.Rm=new h.h,this.Fk=new h.h,this.Ri=new h.h,this.g=r,this.Cw=l,this.po=c,this.Rm=n,this.Al=p,this.Fk.Sc(),this.Ri.Sc()}return o.prototype.sE=function(r){this.g.D(r,this.Fk),r=h.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var n=h.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return u.eG(r,n)},o.prototype.ez=function(r){return this.g.Qa(r,this.Al)},o.prototype.Ky=function(r,n){return this.g.D(r,this.Fk),this.g.D(n,this.Ri),u.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},o}();h.oY=function(){};var u=function(){function o(){this.Rm=new h.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return o.dQ=function(r,n){var l=new o;return l.g=r,l.ra=n,l.Cw=n*n,l.bw=2*n,l.po=1/l.bw,l.wO()},o.Ev=function(r,n,l,c,p){return(r-=l)*r+(n-=c)*n<=p},o.eG=function(r,n){return h.P.Vh(n,h.P.Vh(r))},o.prototype.yO=function(r,n){this.g.Hc(r,k);for(var l=(k.y-this.Rm.y)*this.po,c=h.P.truncate((k.x-this.Rm.x)*this.po),p=h.P.truncate(l),f=l=0;1>=f;f+=1)for(var m=0;1>=m;m+=1){var w=o.eG(c+f,p+m),$=this.zl.lR(w);$!=-1&&(this.rq[l]=$,this.zs[l]=w,l++)}for(c=l-1;1<=c;c--)for($=this.rq[c],p=c-1;0<=p;p--)if($==this.rq[p]){this.zs[p]=-1,c!=--l&&(this.zs[c]=this.zs[l],this.rq[c]=this.rq[l]);break}for(p=0;p<l;p++)this.zO(r,this.zs[p],k,this.rq[p],n)},o.prototype.zO=function(r,n,l,c,p){for(var f=new h.h;c!=-1;c=this.zl.zR(c)){var m=this.zl.ka(c);r==m||n!=-1&&this.g.Qa(m,this.Al)!=n||(this.g.Hc(m,f),o.Ev(l.x,l.y,f.x,f.y,this.Cw)&&p.add(c))}},o.prototype.Zm=function(r,n,l){var c=this.g.Qa(r,this.so),p=this.g.Qa(n,this.so);return c==-1&&(c=this.Ad.Rh(),this.Ad.addElement(c,r),this.g.Sa(r,this.so,c)),p==-1?this.Ad.addElement(c,n):this.Ad.Cy(c,p),this.g.Sa(n,this.so,-2),n=this.TT(r,n),l&&(l=this.mw.sE(r),this.g.Sa(r,this.Al,l)),n},o.RT=function(r,n,l){r.Nb(n),l=r;var c=new h.h;o.ST(r.D(),n.D(),c),l.Db(c)},o.ST=function(r,n,l){var c=r.x;r.x!=n.x&&(c=(1*r.x+1*n.x)/2);var p=r.y;r.y!=n.y&&(p=(1*r.y+1*n.y)/2),l.na(c,p)},o.prototype.TT=function(r,n){var l=new h.h;this.g.D(r,l);var c=new h.h;this.g.D(n,c);var p=this.g.YF(r),f=p+(n=this.g.YF(n)),m=0,w=l.x;l.x!=c.x&&(w=(l.x*p+c.x*n)/f,m++);var $=l.y;return l.y!=c.y&&($=(l.y*p+c.y*n)/f,m++),0<m&&this.g.Db(r,w,$),this.g.rX(r,f),m!=0},o.prototype.wO=function(){var r=this.g.gd,n=this.g.DF();for(this.Rm=n.hz(),n=Math.max(n.da(),n.S())/2147483646,this.bw<n&&(this.bw=n,this.po=1/this.bw),this.Ad=new h.cu,this.Ad.Bt(h.P.truncate(this.g.gd/3+1)),this.Ad.hn(h.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new v(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new h.ZK(h.P.truncate(4*r/3),this.mw),this.zl.vW(this.g.gd),r=!1,n=this.g.md;n!=-1;n=this.g.ve(n))for(var l=this.g.Ob(n);l!=-1;l=this.g.Sb(l))for(var c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++){var m=this.mw.sE(c);this.g.Sa(c,this.Al,m),this.zl.addElement(c,m),c=this.g.V(c)}var w=new h.ja(0);for(w.Jb(10),n=this.g.md;n!=-1;n=this.g.ve(n))for(l=this.g.Ob(n);l!=-1;l=this.g.Sb(l))for(c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++){if(this.g.Qa(c,this.so)!=-2)for(m=this.g.Qa(c,this.Al),this.zl.kd(c,m);this.yO(c,w),w.size!=0;){m=!1;for(var $=0,T=w.size;$<T;$++){var E=w.get($),O=this.zl.ka(E);this.zl.wd(E),m=this.Zm(c,O,$+1==T)||m}if(r=r||m,w.clear(!1),!m)break}c=this.g.V(c)}return r&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),r},o.prototype.qN=function(){for(var r=new h.h,n=this.Ad.ke;n!=-1;n=this.Ad.lz(n)){var l=this.Ad.sc(n);for(this.g.D(this.Ad.ka(l),r),l=this.Ad.lb(l);l!=-1;l=this.Ad.lb(l))this.g.mf(this.Ad.ka(l),r)}},o}();h.$t=u}(q||(q={})),function(h){var k=function(){function v(u){u===void 0&&(u=null),this.zg=null,this.Pb=!1,this.zg=u===null?[]:u}return v.prototype.copyTo=function(u){if(u.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");for(var o=0;o<this.zg.length;o++)u.zg.push(this.zg[o].Qf())},v.prototype.count=function(){return this.zg.length},v.prototype.add=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(u.Qf())},v.prototype.clear=function(){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},v.prototype.remove=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(u,1)},v.prototype.kg=function(){var u=new v;return this.copyTo(u),u},v.prototype.Qf=function(){return this.kg()},v.prototype.transform=function(u,o,r,n){if(u.length<o)throw h.i.ga("invalid Argument");var l=r;for(r=0;r<this.zg.length;r++){var c=this.zg[r];if(c.sm()!=null){var p=c.Wn,f=p?1:0,m=p?c.sm().getGeogcs2():c.sm().getGeogcs1();if(m=l/(m=m.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(m-1))for(l=0;l<o;l++)u[l][0]*=m,u[l][1]*=m;h.HC.geogToGeog(c.sm(),o,u,null,f),l=(p?c.sm().getGeogcs1():c.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(m=l/n,3552713678800501e-30<Math.abs(m-1))for(l=0;l<o;l++)u[l][0]*=m,u[l][1]*=m;return o},v.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof v)||this.zg.length!=u.zg.length)return!1;for(var o=0;o<this.zg.length;o++)if(!this.zg[o].Nb(u.zg[o]))return!1;return!0},v.prototype.ix=function(){this.Pb=!0},v.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",o=0,r=this.count();o<r;++o)u+=this.zg[o].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},v.create=function(){return new v},v}();h.rC=k}(q||(q={})),function(h){var k,v=Math.PI,u=2*Math.PI,o=Math.PI/2,r=function(){function c(){}return c.OO=function(p,f){var m=new c;return m.x=p,m.y=f,m.type=0,m.Wh=0,m},c.cl=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=0,f.Wh=0,f},c.NO=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=p.type,f.Wh=p.Wh,f},c.Qd=function(p,f,m){var w=new c;return w.x=p.x+f*Math.cos(m),w.y=p.y+f*Math.sin(m),w.type=p.type,w.Wh=p.Wh,w},c.Ru=function(p,f){var m=new c;return m.x=.5*(p.x+f.x),m.y=.5*(p.y+f.y),m.type=p.type,m.Wh=p.Wh,m},c.OE=function(p,f){var m=new c;return m.x=p.x+.001*(f.x-p.x),m.y=p.y+.001*(f.y-p.y),m.type=p.type,m.Wh=p.Wh,m},c}(),n=function(){};(k=h.aL||(h.aL={}))[k.Round=0]="Round",k[k.Bevel=1]="Bevel",k[k.Miter=2]="Miter",k[k.Square=3]="Square";var l=function(){function c(p){this.IA=this.Zb=this.xg=null,this.od=p}return c.W=function(p,f,m,w,$,T){if(p==null||1>p.Eb())throw h.i.O();return f==0||p.B()?p:((T=new c(T)).mo=p,T.La=f,T.ra=$,T.Mi=m,T.xA=w,T.Qx())},c.prototype.$L=function(){var p=this.mo,f=p.bc(),m=p.xc(),w=new h.h;return w.vc(m,f),w.normalize(),w.Jv(),w.scale(this.La),f.add(w),m.add(w),w=p.Ja(),p.Ec(f),p.Rc(m),w},c.prototype.ZL=function(){var p=this.mo;if(0<this.La&&this.Mi!=2){var f=new h.Ea;return f.bd(p,!1),this.mo=f,this.Qx()}return(p=new h.Hh(p.aa)).X(this.La,this.La),p},c.prototype.oJ=function(p,f,m,w){return(f.x-p.x)*(w.x-m.x)+(f.y-p.y)*(w.y-m.y)},c.prototype.hc=function(p,f){if(f===void 0)this.Zb.push(p),this.gf++;else if(this.gf==0)this.hc(p);else{var m=this.Dw,w=this.xg[f==0?m-1:f-1],$=this.xg[f],T=this.oJ(w,$,this.Zb[this.gf-1],p);0<T?this.hc(p):0>T&&(0<this.oJ(w,$,$,this.Zb[this.gf-1])?($=this.xg[f==0?m-2:f==1?m-1:f-2],m=r.Qd(w,this.La,Math.atan2(w.y-$.y,w.x-$.x)-o),this.Zb[this.gf-1]=m,this.Mi==1||this.Mi==2?(m=r.Ru(m,w),this.hc(m),m=r.Qd(w,this.La,this.Lv+o),(w=r.Ru(m,w)).type|=256,this.hc(w)):(m=r.Qd(w,this.La,this.Lv+o)).type|=256,this.hc(m),this.hc(p,f)):(m=r.Qd($,this.La,this.Lv+o),this.hc(m),this.Mi==1||this.Mi==2?(m=r.Ru(m,$),this.hc(m),m=r.Qd($,this.La,this.Wz-o),(w=r.Ru(m,$)).type|=256,this.hc(w)):(m=r.Qd($,this.La,this.Wz-o)).type|=256,this.hc(m)))}},c.prototype.hE=function(){var p,f=this.Dw;this.gf=0;var m=.5*this.ra,w=0,$=0;for(p=0;p<f;p++){var T=this.xg[p],E=p==0?this.xg[f-1]:this.xg[p-1],O=p==f-1?this.xg[0]:this.xg[p+1],P=E.x-T.x,L=E.y-T.y,F=O.x-T.x,z=O.y-T.y,R=Math.atan2(L,P),G=Math.atan2(z,F);if(this.Lv=R,this.Wz=G,p==0&&(w=R,$=G),P=P*z-F*L,L=G,G<R&&(G+=u),0<P*this.La)this.Mi==1||this.Mi==2?(R=r.Qd(T,this.La,R+o),this.hc(R),R=r.OE(T,R),this.hc(R),R=r.Qd(T,this.La,G-o),(T=r.OE(T,R)).type|=256,this.hc(T),this.hc(R)):(P=.5*(G-R),P=this.La/Math.abs(Math.sin(P)),R=r.Qd(T,P,.5*(R+G)),this.hc(R,p));else if(512&T.type){for(P=1-m/Math.abs(this.La),E=1,O=0>this.La?-v:v,-1<P&&1>P&&(.017453292519943295>(L=2*Math.acos(P))&&(L=.017453292519943295),1<(E=h.P.truncate(v/L+1.5))&&(O/=E)),L=R+o,R=r.Qd(T,this.La,L),p==0&&(R.type|=1024),this.hc(R,p),P=this.La/Math.cos(O/2),L+=O/2,(R=r.Qd(T,P,L)).type|=1024,this.hc(R);0<--E;)L+=O,(R=r.Qd(T,P,L)).type|=1024,this.hc(R);(R=r.Qd(T,this.La,G-o)).type|=1024,this.hc(R)}else if(this.Mi==1)R=r.Qd(T,this.La,R+o),this.hc(R,p),R=r.Qd(T,this.La,G-o),this.hc(R);else if(this.Mi==0)for(P=1-m/Math.abs(this.La),E=1,O=G-o-(R+o),-1<P&&1>P&&(.017453292519943295>(L=2*Math.acos(P))&&(L=.017453292519943295),1<(E=h.P.truncate(Math.abs(O)/L+1.5))&&(O/=E)),P=this.La/Math.cos(.5*O),L=R+o+.5*O,R=r.Qd(T,P,L),this.hc(R,p);0<--E;)L+=O,R=r.Qd(T,P,L),this.hc(R);else this.Mi==2?(P=E.x-T.x,L=E.y-T.y,.99999999<(E=(P*(F=O.x-T.x)+L*(z=O.y-T.y))/Math.sqrt(P*P+L*L)/Math.sqrt(F*F+z*z))?(R=r.Qd(T,1.4142135623730951*this.La,G-.25*v),this.hc(R,p),R=r.Qd(T,1.4142135623730951*this.La,G+.25*v),this.hc(R)):(E=Math.abs(this.La/Math.sin(.5*Math.acos(E))))>(O=Math.abs(this.xA*this.La))?(P=.5*(G-R),P=this.La/Math.abs(Math.sin(P)),R=r.Qd(T,P,.5*(R+G)),G=h.h.construct(R.x,R.y),R=h.h.construct(T.x,T.y),(T=new h.h).vc(G,R),(G=new h.h).BW(O/T.length(),T,R),R=(E-O)*Math.abs(this.La)/Math.sqrt(E*E-this.La*this.La),0<this.La?T.Jv():T.cr(),T.scale(R/T.length()),(R=new h.h).add(G,T),(E=new h.h).vc(G,T),R=r.cl(R),this.hc(R,p),R=r.cl(E),this.hc(R)):(P=.5*(G-R),P=this.La/Math.abs(Math.sin(P)),R=r.Qd(T,P,.5*(R+G)),this.hc(R,p))):(G=L,0<this.La?(G>R&&(G-=u),E=R-G<o):(G<R&&(G+=u),E=G-R<o),E?(L=0>(P=1.4142135623730951*this.La)?R+.25*v:R+.75*v,R=r.Qd(T,P,L),this.hc(R,p),L=0>P?G-.25*v:G-.75*v,R=r.Qd(T,P,L),this.hc(R)):(P=.5*(G-R),P=this.La/Math.abs(Math.sin(P)),G<R&&(G+=u),R=r.Qd(T,P,(R+G)/2),this.hc(R,p)))}return this.Lv=w,this.Wz=$,this.hc(this.Zb[0],0),T=r.NO(this.Zb[this.gf-1]),this.Zb[0]=T,this.rW()},c.prototype.Cu=function(p,f){if(!(2>f))for(var m=0;m<f;m++){var w=this.Zb[p+m];m!=0?this.IA.Ei(h.h.construct(w.x,w.y)):this.IA.Nt(h.h.construct(w.x,w.y))}},c.prototype.aM=function(p,f,m){var w=p.Ca(f),$=p.Wc(f);if(this.Zb=[],this.IA=m,p.ec(f)){for(f=p.Oa(w);p.Oa($-1).rb(f);)$--;if(2<=$-w){for(this.Dw=$-w,this.xg=[],f=w;f<$;f++)this.xg.push(r.cl(p.Oa(f)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(f=p.Oa(w);w<$&&p.Oa(w+1).rb(f);)w++;for(f=p.Oa($-1);w<$&&p.Oa($-2).rb(f);)$--;if(2<=$-w){for(this.Dw=2*($-w)-2,this.xg=[],(m=r.cl(p.Oa(w))).type|=1536,this.xg.push(m),f=w+1;f<$-1;f++)m=r.cl(p.Oa(f)),this.xg.push(m);for((m=r.cl(p.Oa($-1))).type|=512,this.xg.push(m),f=$-2;f>=w+1;f--)(m=r.cl(p.Oa(f))).type|=1024,this.xg.push(m);if(this.hE())if(2<=this.Zb.length){for(p=-1,($=(1024&this.Zb[this.gf-1].type)!=0)||(p=0),f=1;f<this.gf;f++)(w=(1024&this.Zb[f].type)!=0)?$||1<($=f-1)-p+1&&this.Cu(p,$-p+1):$&&(p=f-1),$=w;$||1<($=this.gf-1)-p+1&&this.Cu(p,$-p+1)}else p=0,$=this.gf-1,0<=p&&1<=$-p&&this.Cu(p,$-p+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},c.prototype.rW=function(){for(var p=!1,f=0;f<this.gf;f++){var m=this.Zb[f];m.sh=f+1,m.uh=f-1,this.Zb[f]=m}for((m=this.Zb[0]).uh=this.gf-2,this.Zb[0]=m,(m=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=m,f=m=0;f<this.gf;f++)if(256&this.Zb[m].type){var w=this.BP(m);if(w==-1){p=!0;break}m=w}else m=this.Zb[m].sh;return!p&&(this.LO(m),!0)},c.prototype.BP=function(p){for(var f,m,w=this.gf-1,$=p,T=1;T<=w-2;T++){f=$=this.Zb[$].sh,m=p;for(var E=1;E<=T;E++){if(m=this.Zb[m].uh,(256&this.Zb[m].type)==0&&(256&this.Zb[f].type)==0){var O=this.bS(m,f);if(O!=-1)return O}f=this.Zb[f].uh}}return-1},c.prototype.bS=function(p,f){var m=this.Zb[this.Zb[p].uh],w=this.Zb[p],$=this.Zb[this.Zb[f].uh],T=this.Zb[f];if(!this.EW(m,w,$,T))return-1;var E=new n;return this.sQ(m,w,$,T,E)&&!E.XD&&h.P.XJ((w.x-m.x)*(T.y-$.y)-(w.y-m.y)*(T.x-$.x))!=h.P.XJ(this.La)?(m=this.Zb[p].uh,E.cn.type=w.type,E.cn.sh=f,E.cn.uh=m,this.Zb[p]=E.cn,E.cn=this.Zb[f],E.cn.uh=p,this.Zb[f]=E.cn,f):-1},c.prototype.EW=function(p,f,m,w){return Math.max(p.x,f.x)>=Math.min(m.x,w.x)&&Math.max(m.x,w.x)>=Math.min(p.x,f.x)&&Math.max(p.y,f.y)>=Math.min(m.y,w.y)&&Math.max(m.y,w.y)>=Math.min(p.y,f.y)},c.prototype.sQ=function(p,f,m,w,$){$.XD=!1;var T=(f.y-p.y)*(w.x-m.x)-(f.x-p.x)*(w.y-m.y),E=(m.y-p.y)*(f.x-p.x)-(m.x-p.x)*(f.y-p.y);if(0<=(T=T==0?2:E/T)&&1>=T){var O=T;if(T=(w.y-m.y)*(f.x-p.x)-(w.x-m.x)*(f.y-p.y),E=(p.y-m.y)*(w.x-m.x)-(p.x-m.x)*(w.y-m.y),0<=(T=T==0?2:E/T)&&1>=T)return $.cn=r.OO(p.x+T*(f.x-p.x),p.y+T*(f.y-p.y)),$.cn.Wh=m.Wh+O*(w.Wh-m.Wh),O!=0&&O!=1||T!=0&&T!=1||($.XD=!0),$.RY=T,$.SY=O,!((O==0||O==1)&&0<T&&1>T||(T==0||T==1)&&0<O&&1>O)}return!1},c.prototype.LO=function(p){for(;this.Zb[p].uh<p;)p=this.Zb[p].uh;var f=0,m=p;do m=this.Zb[m],this.Zb[f]=m,m=m.sh,f++;while(m!=p);this.Zb[f]=this.Zb[0],this.gf=f+1},c.prototype.VC=function(p){var f=this.mo,m=f.Ha();if(m!=null){m.aj();for(var w=-1;m.ab();)w++,this.aM(f,w,p)}},c.prototype.Qx=function(){var p=this.mo.K();return p==322?this.$L():p==197?this.ZL():h.ba.zd(p)?((p=new h.Ua).pc(this.mo,!0),this.mo=p,this.Qx()):p==1607?(p=new h.Ua,this.VC(p),p):p==1736?(p=new h.Ea,this.VC(p),p):null},c}();h.DK=l}(q||(q={})),function(h){var k=function(){function r(n){this.sk=n}return r.prototype.D=function(n,l){this.sk.g.D(n,l)},r.prototype.wd=function(n){var l=this.sk.Ga.ka(n);this.sk.Ga.wd(n,-1),this.sk.g.qd(l,!1)},r}(),v=function(){function r(n){this.sk=n}return r.prototype.D=function(n,l){this.sk.DT.D(n,l)},r.prototype.wd=function(n){this.sk.Ga.wd(n,-1)},r}(),u=function(){function r(n){this.sk=n}return r.prototype.D=function(n,l){l.N(this.sk.GT[n])},r.prototype.wd=function(n){this.sk.Ga.wd(n,-1)},r}(),o=function(){function r(n){n===void 0?(this.Ga=new h.$j,this.Ga.Ee(20),this.g=new h.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new k(this)):n instanceof Array?(this.Ga=new h.$j,this.Ga.Ee(20),this.GT=n,this.Zh=new u(this)):(this.Ga=new h.$j,this.Ga.Ee(20),this.DT=n,this.Zh=new v(this))}return r.prototype.Ib=function(n){var l=n.K();if(h.Fx.zj(l))this.eN(n);else if(h.Xk.zd(l))this.jN(n);else if(l==197)this.bN(n);else{if(l!=33)throw h.i.O("invalid shape type");this.iN(n)}},r.prototype.YQ=function(){var n=new h.Ta,l=this.Ga.sc(-1),c=new h.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(l),n),c.nf(n),l=this.Ga.lb(l);l!=-1;l=this.Ga.lb(l))this.g.Xi(this.Ga.ka(l),n),c.lineTo(n);return c},r.MO=function(n){var l=new r(n),c=n.I(),p=1,f=new h.h,m=new h.h,w=new h.h;for(n.D(0,f);n.D(p,m),m.Mz(f)&&p<c-1;)p++;for(l.Ga.addElement(0,-1),l.Ga.zn(p),c=p+1;c<n.I();c++)n.D(c,w),(p=l.kC(w))!=-1&&l.Ga.Uj(p,c);for(w=new h.Ta,p=l.Ga.sc(-1),c=new h.Ea(n.description),n.we(l.Ga.ka(p),w),c.nf(w),p=l.Ga.lb(p);p!=-1;p=l.Ga.lb(p))n.we(l.Ga.ka(p),w),c.lineTo(w);return c},r.construct=function(n,l,c){for(var p=new r(n),f=1,m=n[0];n[f].Mz(m)&&f<l-1;)f++;for(p.Ga.addElement(0,-1),p.Ga.zn(f),f+=1;f<l;f++)(m=p.kC(n[f]))!=-1&&p.Ga.Uj(m,f);for(n=0,l=p.Ga.sc(-1);l!=-1;l=p.Ga.lb(l))c[n++]=p.Ga.ka(l);return n},r.EG=function(n,l){var c=n.Ca(l),p=n.Wc(l);if(l=!n.ec(l)&&n.Pn(l),n=n.vb(0),p*=2,l&&(p-=2),6>p-(c*=2))return!0;l=new h.h;var f=new h.h,m=new h.h;n.uc(c,l),n.uc(c+2,f),n.uc(c+4,m);var w=r.Yu(f,m,l);if(w.rs()||!r.wm(w.value()))return!1;var $=h.h.construct(f.x,f.y),T=new h.h;for(c+=6;c<p;c+=2)if(T.N(f),f.N(m),n.uc(c,m),(w=r.Yu(f,m,l)).rs()||!r.wm(w.value())||(w=r.Yu($,m,l)).rs()||!r.wm(w.value())||(w=r.Yu(f,m,T)).rs()||!r.wm(w.value()))return!1;return!0},r.prototype.eN=function(n){for(var l=new h.Ta,c=new h.h,p=0;p<n.I();p++){n.D(p,c);var f=this.Er(c);if(f!=-1){n.we(p,l);var m=this.g.hc(this.Us,l);this.Ga.Uj(f,m)}}},r.prototype.bN=function(n){for(var l=new h.Ta,c=new h.h,p=0;4>p;p++){n.hB(p,c);var f=this.Er(c);if(f!=-1){n.If(p,l);var m=this.g.hc(this.Us,l);this.Ga.Uj(f,m)}}},r.prototype.jN=function(n){var l=new h.Ta,c=n.bc();if((c=this.Er(c))!=-1){n.Vo(l);var p=this.g.hc(this.Us,l);this.Ga.Uj(c,p)}c=n.xc(),(c=this.Er(c))!=-1&&(n.Ro(l),n=this.g.hc(this.Us,l),this.Ga.Uj(c,n))},r.prototype.iN=function(n){var l=n.D();(l=this.Er(l))!=-1&&(n=this.g.hc(this.Us,n),this.Ga.Uj(l,n))},r.prototype.Er=function(n){var l=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var c=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return n.Mz(c)||(l=this.Ga.zn(-5)),l}return this.kC(n)},r.prototype.kC=function(n){var l=-1;do{var c=this.Ga.sc(-1),p=this.Ga.Gc(-1),f=this.Ga.ka(c),m=this.Ga.ka(p),w=new h.h,$=new h.h;if(this.Zh.D(f,w),this.Zh.D(m,$),f=h.h.Wq($,n,w),r.wm(f))l=this.Ga.zn(-1),(w=this.iC(n,p,c))!=c&&this.jC(n,c,this.Ga.xe(w));else if(r.xG(f)){$=this.Ga.uv(-1);var T=this.Ga.sc(-1),E=this.Ga.Gc(-1);for(f=new h.h,m=new h.h;T!=this.Ga.xe(E);){var O=this.Ga.ka($);this.Zh.D(O,f),O=h.h.Wq(f,n,w),r.xG(O)?(E=$,$=this.Ga.nl($)):(T=$,$=this.Ga.Zp($))}if($=E,w=T,O=this.Ga.ka($),T=this.Ga.ka(w),this.Zh.D(O,f),this.Zh.D(T,m),w!=c&&(f=h.h.Wq(m,n,f),!r.wm(f)))continue;l=this.Ga.Bu(w,$,-2,!1),this.jC(n,$,p),this.iC(n,w,c)}else this.tb==null&&(this.tb=new h.zb),this.tb.Ec($),this.tb.Rc(w),0>(w=this.tb.ge(n,!0))?(w=this.Ga.xe(p),this.Ga.wd(p,-1),l=this.Ga.zn(-3),this.iC(n,w,c)):1<w&&(w=this.Ga.lb(c),this.Ga.wd(c,-1),l=this.Ga.Bu(-1,w,-3,!1),this.jC(n,w,p))}while(0);return l},r.prototype.jC=function(n,l,c){if(l!=c){var p=this.Ga.ka(l),f=this.Ga.lb(l),m=new h.h,w=new h.h;for(this.Zh.D(p,m);l!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),w),p=h.h.Wq(w,n,m),!r.wm(p));)p=l,l=f,m.N(w),f=this.Ga.lb(l),this.Zh.wd(p)}},r.prototype.iC=function(n,l,c){if(l==c)return c;var p=this.Ga.ka(l),f=this.Ga.xe(l),m=new h.h,w=new h.h;for(this.Zh.D(p,m);l!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),w),p=h.h.Wq(m,n,w),!r.wm(p));)p=l,l=f,m.N(w),f=this.Ga.xe(l),this.Zh.wd(p);return l},r.Yu=function(n,l,c){var p=new h.Xb;p.set(l.x),p.sub(n.x);var f=new h.Xb;f.set(c.y),f.sub(n.y);var m=new h.Xb;return m.set(l.y),m.sub(n.y),(l=new h.Xb).set(c.x),l.sub(n.x),p.Bg(f),m.Bg(l),p.sub(m),p},r.wm=function(n){return 0>n},r.xG=function(n){return 0<n},r}();h.au=o}(q||(q={})),function(h){var k=function(){function v(u){this.g=null,this.oH=!0,this.od=u}return v.uU=function(u,o,r){return u=h.ua.Gr(u),h.$t.Ev(o.Ng(),o.kh(),r.Ng(),r.kh(),h.mc.ox(u))},v.xO=function(u,o){var r=new h.Ta;return h.$t.RT(u,o,r),r},v.W=function(u,o,r,n){return(r=new v(r)).g=u,r.ra=o,r.oH=n,r.zM()},v.prototype.iM=function(u){return h.$t.dQ(this.g,u)},v.prototype.nM=function(u){return h.bu.W(this.g,u,this.od)},v.prototype.zM=function(){var u=this.ra,o=h.ua.Gr(u),r=1.00001*(u=h.ua.mN(u));u*=1.000001;for(var n=!1,l=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),c=0,p=this.g.eS();;c++){if(c>l)throw h.i.ga("Internal Error: max number of iterations exceeded");var f=this.iM(o);if(n=n||f,this.oH&&(f=this.g.Ip(o,!0,!1)!=0,n=n||f),f=!1,(c==0||p||h.bu.fI(!0,this.g,u,null,this.od))&&(f=this.nM(r),n=n||f),!f)break;h.op.Bp(this.od)}return n},v}();h.Vk=k}(q||(q={})),function(h){var k=function(){function u(o){this.ae=this.Nc=null,this.$s=0,this.Vb=o,this.Yz=!0}return u.prototype.wv=function(o,r){var n=this.g.cc(o);if(n==null){if(!this.g.fd(o,r))return null;n=r}return n},u.prototype.Zq=function(){var o;o===void 0&&(o=!1),this.$s++,(o||!(4095&this.$s))&&(this.$s=0,h.op.Bp(this.Vb))},u.prototype.iP=function(){var o=this.g.$q(!1),r=!1,n=new h.zb,l=new h.zb,c=new h.l;c.Pa();var p=new h.l;p.Pa();for(var f=new h.Ta,m=new h.OC,w=o.next();w!=-1;w=o.next()){h.op.Bp(this.Vb);var $=null,T=!1;if(!h.ba.Tn(this.g.jc(o.ek))){if(($=this.wv(w,n))==null)continue;if($.A(c),c.X(this.ra,this.ra),$.Di(this.ra)){if(!$.Di(0))continue;T=!0,$=null}}var E=this.g.$q(o),O=E.next();for(O!=-1&&(O=E.next());O!=-1;O=E.next()){var P=null,L=!1;if(!h.ba.Tn(this.g.jc(E.ek))){if((P=this.wv(O,l))==null)continue;if(P.A(p),P.Di(this.ra)){if(!P.Di(0))continue;L=!0,P=null}}var F=0,z=0;if($!=null&&P!=null)c.CG(p)&&(m.Qo($),m.Qo(P),m.Fa(this.ra,!1),0<(F=m.ql(0))+(z=m.ql(1))&&(this.g.lr(w,m,0,!0),this.g.lr(O,m,1,!0)),m.clear());else if($!=null){var R=new h.h;if(this.g.D(O,R),c.contains(R)){if(m.Qo($),this.g.Xi(O,f),m.Fz(this.ra,f,!1),0<(F=m.ql(0)))if(this.g.lr(w,m,0,!0),L){for(L=-1,R=this.g.V(O);R!=-1&&R!=O&&(L=R,(P=this.wv(R,l))!=null&&P.Di(0));R=this.g.V(R));for(R=O;R!=-1&&(this.g.Fh(R,m.Cf),R!=L);R=this.g.V(R));}else this.g.Fh(O,m.Cf);m.clear()}}else{if(P==null)continue;if(R=new h.h,this.g.D(w,R),p.X(this.ra,this.ra),p.contains(R)){if(m.Qo(P),this.g.Xi(w,f),m.Fz(this.ra,f,!1),0<(z=m.ql(0)))if(this.g.lr(O,m,0,!0),T){for(L=-1,R=this.g.V(w);R!=-1&&R!=w&&(L=R,(P=this.wv(R,l))!=null&&P.Di(0));R=this.g.V(R));for(R=w;R!=-1&&(this.g.Fh(R,m.Cf),R!=L);R=this.g.V(R));}else this.g.Fh(w,m.Cf);m.clear()}}if(F+z!=0){if(F!=0){if(($=this.g.cc(w))==null){if(!this.g.fd(w,n))continue;$=n,n.A(c)}else $.A(c);if($.Di(this.ra))break}r=!0}}}return r},u.prototype.jP=function(){return this.LU()},u.prototype.LU=function(){return new h.MC().LX(this.g,this.ra)},u.prototype.gI=function(){var o=!1;this.Nc==null&&(this.Nc=new h.$j);var r=new h.ja(0);r.Jb(this.g.gd+1);for(var n=this.g.$q(),l=n.next();l!=-1;l=n.next())r.add(l);this.g.nx(r,r.size),r.add(-1),n=this.g.Hd(),l=this.g.Hd(),this.ae=new h.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var c=new h.ja(0),p=new h.ja(0),f=0;new h.h;var m=this.g.ud;this.g.wb.oc();for(var w,$,T=this.g.wb.Aa[0].o,E=r.get(f++);E!=-1;){var O=w=T[2*($=m.U(E,0))],P=$=T[2*$+1];do{var L=m.U(E,2),F=m.U(E,1);if(L!=-1){var z=m.U(L,0),R=T[2*z];0>(P<(z=T[2*z+1])?-1:P>z?1:O<R?-1:O>R?1:0)&&(p.add(E),p.add(L))}F!=-1&&(R=T[2*(z=m.U(F,0))],0>(P<(z=T[2*z+1])?-1:P>z?1:O<R?-1:O>R?1:0)&&(p.add(F),p.add(F))),(R=this.g.Qa(E,n))!=-1&&(c.add(R),this.g.Sa(E,n,-1)),(R=this.g.Qa(E,l))!=-1&&(c.add(R),this.g.Sa(E,l,-1)),(E=r.get(f++))!==-1&&(O=T[2*(P=m.U(E,0))],P=T[2*P+1])}while(E!=-1&&O===w&&P===$);for(O=c.size==1&&p.size==2,R=P=-1,L=0,F=c.size;L<F;L++){z=c.get(L);var G=this.Nc.xe(z);if(G==-1||c.cG(G)||(P=G),(z=this.Nc.lb(z))==-1||c.cG(z)||(R=z),P!=-1&&R!=-1)break}for(this.ae.VJ($,w),L=0,F=c.size;L<F;L++)z=c.get(L),this.Nc.wd(z,-1);if(c.clear(!1),!O&&P!=-1&&R!=-1&&this.lO(P,R)){o=!0,this.Pi=this.ae.tm();break}for(L=0,F=p.size;L<F;L+=2){if($=p.get(L),w=p.get(L+1),O?($=this.Nc.Bu(P,R,$,!0),O=!1):$=this.Nc.addElement($,-1),this.ae.sg){this.Pi=this.ae.tm(),o=!0;break}this.g.Qa(w,n)==-1?this.g.Sa(w,n,$):this.g.Sa(w,l,$)}if(o)break;p.Dh(0)}return this.g.Ud(n),this.g.Ud(l),o},u.prototype.lO=function(o,r){return this.ae.compare(this.Nc,this.Nc.ka(o),r),o=this.ae.sg,this.ae.Mr(),o},u.tE=function(o){for(var r=o.md;r!=-1;r=o.ve(r))if(h.ba.Ic(o.jc(r)))return!0;return!1},u.aQ=function(o,r,n,l){return!!u.tE(o)&&((r=new u(l)).g=o,r.ra=n,15>o.gd?o=r.iP():r.jP())},u.W=function(o,r,n){return u.aQ(o,o.DF(),r,n)},u.fI=function(o,r,n,l,c){if(!u.tE(r))return!1;var p=new u(c);if(p.g=r,p.ra=n,p.Yz=o,p.gI())return l!=null&&l.Yt(p.Pi),!0;var f=new h.Ed;return f.VB(),r.Pc(f),(p=new u(c)).g=r,p.ra=n,p.Yz=o,o=p.gI(),f.VB(),r.Pc(f),!!o&&(l!=null&&l.Yt(p.Pi),!0)},u.Ol=function(o,r){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*r<1*o*r},u.gP=function(o,r,n,l){if(h.ba.Ic(r.K()))return new u(l).hP(o,r,n);throw h.i.ga("crack_A_with_B")},u.prototype.hP=function(o,r,n){var l=new h.l;o.yc(l);var c=new h.l;if(r.yc(c),c.X(n,n),!c.isIntersecting(l))return o;var p=o.Cb,f=null;p!=null&&(f=p.Gb),u.Ol(o,o.I())&&(f=h.ua.lj(o,c));var m=f!=null?f.getIterator():null,w=r.Ha();r=o.Ha();var $=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];w.ab();)for(;w.Ia();){var T=w.ia();if(f!=null){for(m.Wo(T,n),p=m.next();p!=-1;p=m.next())if(this.Zq(),r.Wb(f.ka(p),-1),r.Ia()){var E=(p=r.ia()).Fa(T,null,$,null,n);for(p=0;p<E;++p){var O=$[p];if(O!=0&&O!=1){var P=r.xb(),L=new v;L.t=O,L.index=P,c.push(L)}}}}else{var F=new h.l;if(T.yc(F),F.X(n,n),l.isIntersecting(F)){for(r.aj();r.ab();)for(;r.Ia();)if(this.Zq(),p=r.ia(),O=new h.l,p.yc(O),O.isIntersecting(F))for(E=p.Fa(T,null,$,null,n),p=0;p<E;++p)(O=$[p])!=0&&O!=1&&(P=r.xb(),(L=new v).t=O,L.index=P,c.push(L))}}}if(c.length==0)return o;for(c=c.sort(v.zy),o=o.Ja(),r.aj();r.ab()&&!r.Ia(););for(n=r.ia(),l=new h.jg,f=-1,p=0,m=c.length;p<m;){for($=c[p].index,w=p+1;w<m&&c[w].index==$;)++w;for(;r.xb()<$;){if(this.Zq(),T=r.Ia(),O=r.gb,(F=T||!r.Qn()||r.Rn())&&o.pc(n,f!=O),f=O,!T)for(;r.ab()&&!r.Ia(););n=r.ia()}for($=0;p<w;p++)(O=c[p].t)!=$&&(n.dh($,O,l),$=O,O=r.gb,o.pc(l.get(),f!=O),f=O);if((F=(T=r.Ia())||!r.Qn()||r.Rn())&&(n.dh($,1,l),o.pc(l.get(),!1)),T)n=r.ia();else{for(;r.ab()&&!r.Ia(););n=r.Ia()?r.ia():null}p=w}for(n!=null&&(O=r.gb,(F=(T=r.Ia())||!r.Qn()||r.Rn())&&o.pc(n,f!=O),f=O),T=r.Ia();;){if(!T){for(;r.ab()&&!(T=r.Ia()););if(!T)break}n=r.ia(),O=r.gb,(F=(T=r.Ia())||!r.Qn()||r.Rn())&&o.pc(n,f!=O),f=O}return o},u}();h.bu=k;var v=function(){function u(){}return u.zy=function(o,r){return o.index==r.index?o.t>r.t?1:o.t<r.t?-1:0:o.index>r.index?1:-1},u}()}(q||(q={})),function(h){var k;(k=h.FK||(h.FK={}))[k.Left=0]="Left",k[k.Right=1]="Right",k[k.Coincident=2]="Coincident",k[k.Undefined=3]="Undefined",k[k.Uncut=4]="Uncut";var v=function(r,n,l,c,p,f,m,w,$,T,E){this.Y=r,this.ct=n,this.Ps=l,this.ug=c,this.Nm=T,this.Cl=E};h.qY=v;var u=function(){function r(n,l){this.EH=n,this.Ji=l}return r.prototype.lM=function(n,l){var c=new h.h;this.Ji.D(n,c);var p=new h.h;return this.Ji.D(l,p),(c=c.compare(p))!=0?c:(n=this.Ji.Qa(n,this.EH))<(l=this.Ji.Qa(l,this.EH))?-1:n==l?0:1},r}(),o=function(r,n,l,c,p,f,m,w,$){this.ug=r,this.Ps=n,this.JA=l,this.PH=c,this.Gi=p,this.Cl=f,this.Nm=m,this.QH=w,this.JT=$};h.pY=o,h.GK=function(){function r(){}return r.EK=function(n,l,c,p,f,m){if(l.B())n=new v(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else if(c.B())n=new v(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{var w=new h.hd;if(w.Ib(l),w.Ib(c),h.Vk.W(w,p,m,!0),w.gd==0)n=new v(l.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{for(l=0,c=w.Hd(),p=w.md;p!=-1;p=w.ve(p))for(m=w.Ob(p);m!=-1;m=w.Sb(m))for(var $=w.Ya(m),T=0,E=w.Ka(m);T<E;$=w.V($),T++)w.Sa($,c,l++);l=r.CM(c,w),r.YL(n,l,w,f)}}},r.CM=function(n,l){for(var c=l.gd,p=new h.ja(0),f=l.md;f!=-1;f=l.ve(f))for(var m=l.Ob(f);m!=-1;m=l.Sb(m))for(var w=l.Ya(m),$=0,T=l.Ka(m);$<T;w=l.V(w),$++)p.add(w);var E=new u(n,l);p.Wd(0,c,function(pe,he){return E.lM(pe,he)}),n=[];var O=[],P=l.Hd(),L=l.Hd();f=l.md,m=l.ve(f),T=new h.h;var F=new h.h,z=p.get(0),R=l.cd(z),G=l.Sf(R);l.D(z,T);var H=1;for(w=0;H<c-1;){var B=!1;for($=H;$<c;$++)if($!=w){var te=p.get($),Q=l.cd(te),ne=l.Sf(Q);if(l.D(te,F),!T.rb(F))break;G==f&&ne==m&&(B=r.pM(P,L,l,n,O,R,z,Q,te))}if(B||w==H-1){if(B&&w==H-1&&H--,++w==c)break;z=p.get(w),R=l.cd(z),G=l.Sf(R),l.D(z,T)}B||(H=w+1)}for(c=[],f=l.md;f!=-1;f=l.ve(f))for(m=l.Ob(f);m!=-1;m=l.Sb(m))for(p=l.Ya(m),$=0,T=l.Ka(m);$<T;p=l.V(p),$++){if(0<=(w=l.Qa(p,L)))for(;w<O.length&&O[w].ug==p;)c.push(O[w++]);if(0<=(w=l.Qa(p,P)))for(;w<n.length&&n[w].ug==p;)c.push(n[w++])}return l.Ud(P),l.Ud(L),c},r.pM=function(n,l,c,p,f,m,w,$,T){var E=c.tj(m),O=c.tj($),P=c.Ya(m),L=c.Ya($),F=c.Na(w),z=c.Na(T),R=!1,G=!1,H=!1,B=!1;return w!=P&&(T!=L&&(R=r.qM(n,c,p,m,F,$,z)),T!=O&&(G=r.rM(n,c,p,m,F,$,T))),w!=E&&(T!=L&&(H=r.sM(l,c,f,m,w,$,z,P)),T!=O&&(B=r.tM(l,c,f,m,w,$,T,P))),R&&G&&H?(n=p.length-1,f[B?f.length-2:f.length-1].Gi==2&&(p[n-1]=p[n],--p.length)):R&&G&&B&&f[f.length-1].Gi==2&&(f=p[p.length-1],--p.length,c.Qa(f.ug,n)==p.length&&c.Sa(f.ug,n,-1)),R||G||H||B},r.qM=function(n,l,c,p,f,m,w){var $=new h.zb,T=new h.zb,E=[0,0],O=[0,0],P=l.cc(f);return P==null&&(l.fd(f,$),P=$),($=l.cc(w))==null&&(l.fd(w,T),$=T),2>(P=P.Fa($,null,E,O,0))&&(p=new o(f,p,E[0],NaN,P,w,m,O[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1)),!0},r.rM=function(n,l,c,p,f,m,w){var $=new h.zb,T=new h.zb,E=[0,0],O=[0,0],P=l.cc(f);return P==null&&(l.fd(f,$),P=$),($=l.cc(w))==null&&(l.fd(w,T),$=T),2>(P=P.Fa($,null,E,O,0))&&(p=new o(f,p,E[0],NaN,P,w,m,O[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0)},r.sM=function(n,l,c,p,f,m,w,$){var T=new h.zb,E=new h.zb,O=[0,0],P=[0,0],L=l.cc(f);return L==null&&(l.fd(f,T),L=T),(T=l.cc(w))==null&&(l.fd(w,E),T=E),(L=L.Fa(T,null,O,P,0))==2?(p=new o(f,p,O[0],O[1],L,w,m,P[0],P[1]),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0):(E=!1,f==$&&(p=new o(f,p,O[0],NaN,L,w,m,P[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),E=!0),E)},r.tM=function(n,l,c,p,f,m,w,$){var T=new h.zb,E=new h.zb,O=[0,0],P=[0,0],L=l.cc(f);return L==null&&(l.fd(f,T),L=T),(T=l.cc(w))==null&&(l.fd(w,E),T=E),(L=L.Fa(T,null,O,P,0))==2?(p=new o(f,p,O[0],O[1],L,w,m,P[0],P[1]),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),!0):(E=!1,f==$&&(p=new o(f,p,O[0],NaN,L,w,m,P[0],NaN),c.push(p),0>(p=l.Qa(f,n))&&l.Sa(f,n,c.length-1),E=!0),E)},r.YL=function(n,l,c,p){var f=[];f[0]=new h.h,f[1]=new h.h,f[2]=new h.h,f[3]=new h.h;var m=new h.h,w=new h.h,$=new h.h,T=new h.h,E=null;p!=null&&(E=new h.jg).Qr();var O=0,P=null,L=new h.zb;new h.zb;for(var F=c.Ob(c.md);F!=-1;F=c.Sb(F)){for(var z=4,R=-1,G=-1,H=-1,B=-1,te=NaN,Q=!0,ne=!1,pe=!0,he=!0,Ie=!0,ge=0,He=F,Fe=0,xe=c.Ya(F),zt=c.Ka(F),vi=0;vi<zt;xe=c.V(xe),vi++){var Gt=c.cc(xe);if(Gt==null){if(!c.fd(xe,L))continue;Gt=L}G==-1&&(G=xe);for(var yt=0;O<l.length&&xe==l[O].ug;){R=l[O].Ps;var gt=l[O].ug,it=l[O].JA,Ht=l[O].Nm,tt=l[O].Cl,Hr=l[O].QH;if(l[O].Gi==2){if(ne||(He=R,G=gt,Fe=it,H=Ht,B=tt,te=Hr,z=2,p!=null?P=new h.Ua:ge=0,Ie=!1,he=!0),it=l[O].PH,Hr=l[O].JT,p!=null?(Gt.dh(yt,l[O].PH,E),P.pc(E.get(),he)):ge++,yt=it,ne=!0,he=Q=!1,O+1==l.length||l[O+1].Gi!=2||l[O+1].ug==gt&&l[O+1].JA!=yt){if(p!=null){var ct=new v(P,2,R,gt,it,z,He,G,Fe,Ht,tt);p.push(ct)}else null.add(ge);He=R,G=gt,Fe=it,H=Ht,B=tt,te=Hr,z=2,ne=Q=!1,he=Ie=!0}}else{var tr=c.V(gt);if(O<l.length-1&&l[O+1].ug==tr&&l[O+1].Cl==tt&&l[O+1].Gi==2)it!=yt&&(Ie&&(p!=null?P=new h.Ua:ge=0),Q=0<O&&l[O-1].Ps==R?z==1?0:z==0?1:3:3,p!=null?(Gt.dh(yt,it,E),P.pc(E.get(),he),ct=new v(P,Q,R,gt,it,z,He,G,Fe,Ht,tt),p.push(ct)):(ge++,null.add(ge)),yt=it,He=R,G=gt,Fe=it,H=Ht,B=tt,te=Hr,z=Q,Q=pe=!1,he=Ie=!0);else if(!r.xM(n,c,l,O,m,w)){r.uM(c,l,O,F,xe,$,T);var $t=!1;if(tr=!1,ct=!0,!(m.rb($)||w.rb($)||m.rb(T)||w.rb(T))){f[0].N(m),f[1].N(w),f[2].N($),f[3].N(T),f.sort(h.h.pu);var Xh=f[0],Qh=f[1],ec=f[2],cr=f[3];Xh.rb(m)?Qh.rb(w)?n?(tr=$t=!0,ct=!1):$t=!1:cr.rb(w)?n?ct=tr=$t=!0:$t=!1:($t=!0,ct=Qh.rb($)):Qh.rb(m)?ec.rb(w)?n?(tr=$t=!0,ct=!1):$t=!1:Xh.rb(w)?n?ct=tr=$t=!0:$t=!1:($t=!0,ct=ec.rb($)):ec.rb(m)?cr.rb(w)?n?(tr=$t=!0,ct=!1):$t=!1:Qh.rb(w)?n?ct=tr=$t=!0:$t=!1:($t=!0,ct=cr.rb($)):Xh.rb(w)?n?(tr=$t=!0,ct=!1):$t=!1:ec.rb(w)?n?ct=tr=$t=!0:$t=!1:($t=!0,ct=Xh.rb($))}$t&&($t=xe==gt,(it!=yt||$t&&yt==0)&&(Ie&&(p!=null?P=new h.Ua:ge=0),p!=null?(Gt.dh(yt,it,E),P.pc(E.get(),he)):ge++),ct?z!=1?((it!=yt||$t&&yt==0)&&(p!=null?(ct=new v(P,1,R,gt,it,z,He,G,Fe,Ht,tt),p.push(ct)):null.add(ge)),tr?(O>=l.length-2||l[O+2].Ps!=R)&&(z=0):z=1):((it!=yt||$t&&yt==0)&&(p!=null?(ct=new v(P,3,R,gt,it,z,He,G,Fe,Ht,tt),p.push(ct)):null.add(ge)),z=1):z!=0?((it!=yt||$t&&yt==0)&&(p!=null?(ct=new v(P,0,R,gt,it,z,He,G,Fe,Ht,tt),p.push(ct)):null.add(ge)),tr?(O>=l.length-2||l[O+2].Ps!=R)&&(z=1):z=0):((it!=yt||$t&&yt==0)&&(p!=null?(ct=new v(P,3,R,gt,it,z,He,G,Fe,Ht,tt),p.push(ct)):null.add(ge)),z=0),(it!=yt||$t&&yt==0)&&(yt=it,He=R,G=gt,Fe=it,H=Ht,B=tt,te=Hr,Q=pe=!1,he=Ie=!0))}}O++}yt!=1&&(Ie&&(p!=null?P=new h.Ua:ge=0),p!=null?(Gt.dh(yt,1,E),P.pc(E.get(),he)):ge++,he=Ie=!1,pe=!0)}pe&&(it=1,gt=c.tj(F),gt=c.Na(gt),tt=Ht=-1,Hr=NaN,Q?p!=null?(ct=new v(P,4,R,gt,it,z,He,G,Fe,Ht,tt),p.push(ct)):null.add(ge):(Q=z==1?0:z==0?1:3,p!=null?(ct=new v(P,Q,R,gt,it,z,He,G,Fe,Ht,tt),p.push(ct)):null.add(ge)))}},r.xM=function(n,l,c,p,f,m){var w=c[p].QH;if(w==1)return r.vM(n,l,c,p,f,m);if(w==0)return r.wM(n,l,c,p,f,m);throw h.i.Ra()},r.vM=function(n,l,c,p,f,m){var w=new h.zb,$=c[p].ug,T=c[p].Nm,E=c[p].Cl,O=-1,P=-1,L=-1,F=-1;if(!n&&0<p){var z=c[p-1];O=z.ug,P=z.Nm,L=z.Cl,F=z.Gi}var R=-1,G=-1,H=-1,B=-1;p<c.length-1&&(R=(z=c[p+1]).ug,G=z.Nm,H=z.Cl,B=z.Gi);var te=l.V($);return z=l.V(E),n?p==c.length-1||R!=$||G!=T||H!=z||B==2?((n=l.cc(E))==null&&(l.fd(E,w),n=w),m.N(n.lg()),f.nt(m),m.normalize(),f.normalize(),!1):((n=l.cc(E))==null&&(l.fd(E,w),n=w),f.N(n.lg()),(n=l.cc(z))==null&&(l.fd(z,w),n=w),m.N(n.lg()),f.Uq(),m.normalize(),f.normalize(),!1):0<p&&O==$&&P==T&&L==z&&F==2||p<c.length-1&&R==te&&G==T&&H==z&&B==2?((n=l.cc(E))==null&&(l.fd(E,w),n=w),m.N(n.lg()),f.nt(m),m.normalize(),f.normalize(),!1):!(p<c.length-1&&R==$&&G==T&&H==z)||((n=l.cc(E))==null&&(l.fd(E,w),n=w),f.N(n.lg()),(n=l.cc(z))==null&&(l.fd(z,w),n=w),m.N(n.lg()),f.Uq(),m.normalize(),f.normalize(),!1)},r.wM=function(n,l,c,p,f,m){var w=new h.zb,$=c[p].ug,T=c[p].Nm,E=c[p].Cl,O=-1,P=-1,L=-1,F=-1;if(!n&&p<c.length-1){var z=c[p+1];O=z.ug,P=z.Nm,L=z.Cl,F=z.Gi}var R=-1,G=-1,H=-1;z=-1,0<p&&(R=(z=c[p-1]).ug,G=z.Nm,H=z.Cl,z=z.Gi);var B=l.V($),te=l.Na(E);return n?p!=0&&R==$&&G==T&&H==te&&z!=2||((n=l.cc(E))==null&&(l.fd(E,w),n=w),m.N(n.lg()),f.nt(m),m.normalize(),f.normalize(),!1):!(0<p&&R==$&&G==T&&H==te&&z==2||p<c.length-1&&O==B&&P==T&&L==te&&F==2)||((n=l.cc(E))==null&&(l.fd(E,w),n=w),m.N(n.lg()),f.nt(m),m.normalize(),f.normalize(),!1)},r.uM=function(n,l,c,p,f,m,w){var $=new h.zb,T=n.cc(f);if(T==null&&(n.fd(f,$),T=$),l=(c=l[c]).ug,c=c.JA,f=n.V(l),c==1)m.N(T.lg()),f!=-1&&f!=n.tj(p)?((T=n.cc(f))==null&&(n.fd(f,$),T=$),w.N(T.lg()),(T=n.cc(l))==null&&n.fd(l,$)):w.N(m),m.Uq(),w.normalize(),m.normalize();else{if(c!=0)throw h.i.Ra();w.N(T.lg()),m.nt(w),w.normalize(),m.normalize()}},r}()}(q||(q={})),function(h){var k;(k=h.XL||(h.XL={}))[k.Linear=0]="Linear",k[k.Angular=1]="Angular",k[k.Area=2]="Area";var v=function(){function p(f,m,w){this.pd=m,this.ci=w,this.qA=f}return p.prototype.Nb=function(f){return f instanceof p&&this.ci===f.ci},p.WF=function(f){return f.pd!==0?null:f.qA===-1?new p(-1,2,f.ci*f.ci):p.ah(l[f.qA])},p.ah=function(f){return(f=n[f])===void 0?null:f},p.UO=function(f,m,w){var $=null;if(w!=null)try{w.values[0]==="EPSG"&&($=p.ah(parseInt(w.values[1])))}catch{}return $===null&&($=new p(-1,f,m)),$},p.prototype.Fc=function(){return this.qA},p.prototype.xF=function(f){if(f.pd!=this.pd)throw h.i.Hb();return this.ci/f.ci},p.Ph=function(f,m,w){return m.xF(w)*f},p.SE=function(f,m,w,$,T){for(w=w.xF($),$=0;$<m;$++)T[$]=f[$]*w},p}();h.Uc=v;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],r=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],l=[],c=0;c<u.length;c+=2)n[u[c]]=new v(u[c],2,u[c+1]);for(u=null,c=0;c<o.length;c+=2)n[o[c]]=new v(o[c],1,o[c+1]);for(o=null,c=0;c<r.length;c+=3)n[r[c]]=new v(r[c],0,r[c+1]),l[r[c]]=r[c+2];r=null}(q||(q={})),function(h){var k=function(){function v(){this.yb=this.pb=0}return v.prototype.set=function(u,o){o!==void 0?(this.pb=u,this.yb=o):typeof u=="number"?(this.pb=u,this.yb=0):(this.pb=u.pb,this.yb=u.yb)},v.prototype.value=function(){return this.pb},v.prototype.add=function(u){var o=this.pb+u.pb;u=this.yb+u.yb+2220446049250313e-31*Math.abs(o),this.pb=o,this.yb=u},v.prototype.fN=function(){var u=this.pb+1,o=this.yb+2220446049250313e-31*Math.abs(u);this.pb=u,this.yb=o},v.prototype.ZM=function(u,o){this.pb=u.pb+o.pb,this.yb=u.yb+o.yb+2220446049250313e-31*Math.abs(this.pb)},v.prototype.sub=function(u){if(typeof u=="number"){var o=this.pb-u;u=this.yb+2220446049250313e-31*Math.abs(o)}else o=this.pb-u.pb,u=this.yb+u.yb+2220446049250313e-31*Math.abs(o);this.pb=o,this.yb=u},v.prototype.Bg=function(u){var o=this.pb*u.pb;this.yb=this.yb*Math.abs(u.pb)+u.yb*Math.abs(this.pb)+this.yb*u.yb+2220446049250313e-31*Math.abs(o),this.pb=o},v.prototype.Po=function(u){var o=this.pb*u;this.yb=this.yb*Math.abs(u)+2220446049250313e-31*Math.abs(o),this.pb=o},v.prototype.Ml=function(u,o){var r=Math.abs(u.pb)*Math.abs(o.pb);this.yb=u.yb*Math.abs(o.pb)+o.yb*Math.abs(u.pb)+u.yb*o.yb+2220446049250313e-31*Math.abs(r),this.pb=r},v.prototype.lm=function(u){var o=Math.abs(u.pb),r=this.pb/u.pb,n=(this.yb+Math.abs(r)*u.yb)/o;u.yb>.01*o&&(n*=1+(1+(u=u.yb/o))*u),this.pb=r,this.yb=n+2220446049250313e-31*Math.abs(r)},v.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),o=this.pb>10*this.yb?.5*this.yb/u:this.pb>this.yb?u-Math.sqrt(this.pb-this.yb):Math.max(u,Math.sqrt(this.pb+this.yb)-u);o+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.yb?o=u=NaN:(u=0,o=Math.sqrt(this.yb));this.pb=u,this.yb=o},v.prototype.sin=function(u){var o=Math.sin(u.pb),r=Math.cos(u.pb);this.pb=o,o=Math.abs(o),this.yb=(Math.abs(r)+.5*o*u.yb)*u.yb+2220446049250313e-31*o},v.prototype.cos=function(u){var o=Math.sin(u.pb),r=Math.cos(u.pb);this.pb=r,r=Math.abs(r),this.yb=(Math.abs(o)+.5*r*u.yb)*u.yb+2220446049250313e-31*r},v.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},v.prototype.rs=function(){return this.rg()&&this.yb!=0},v}();h.Xb=k}(q||(q={}));var ci=new q.h,Gs=new q.h,zn=new q.h,Us=new q.h,Vn=new q.h;(function(h){var k,v;(v=k||(k={}))[v.closedPath=1]="closedPath",v[v.exteriorPath=2]="exteriorPath",v[v.ringAreaValid=4]="ringAreaValid";var u=function(){function o(r,n,l,c,p,f,m){n!==void 0?(this.ib=r,this.ek=n,this.dl=l,this.ki=c,this.za=f,this.cA=m,this.gw=p):(this.ib=r.ib,this.ek=r.ek,this.dl=r.dl,this.ki=r.ki,this.za=r.za,this.cA=r.cA,this.gw=r.gw),this.XG=!0}return o.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},o.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!h.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},o.vP=function(r,n,l,c,p,f,m){return new o(r,n,l,c,p,f,m)},o}();h.vY=u,k=function(){function o(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return o.prototype.Uh=function(r){return this.Te!=null?this.Te[r]:null},o.prototype.Zg=function(r,n){if(this.Te==null){if(n==null)return;this.Te=[];for(var l=0,c=this.wb.I();l<c;l++)this.Te.push(null)}this.Te[r]=n},o.prototype.ep=function(r,n){this.nd.T(r,1,n)},o.prototype.cp=function(r,n){this.nd.T(r,2,n)},o.prototype.QB=function(r,n){this.nd.T(r,6,n)},o.prototype.Up=function(r){return this.nd.U(r,6)},o.prototype.gx=function(r,n){this.nd.T(r,7,n)},o.prototype.sv=function(r){return this.nd.U(r,0)},o.prototype.JJ=function(r,n){this.dd.T(r,1,n)},o.prototype.NJ=function(r,n){this.dd.T(r,0,n)},o.prototype.EF=function(r){return this.dd.U(r,7)},o.prototype.ap=function(r,n){this.dd.T(r,3,n)},o.prototype.bp=function(r,n){this.dd.T(r,4,n)},o.prototype.pU=function(r){this.dd==null&&(this.dd=new h.ad(8));var n=this.dd.De();return this.dd.T(n,2,r),this.dd.T(n,5,0),this.dd.T(n,6,0),this.dd.T(n,7,n),n},o.prototype.JQ=function(r){this.dd.kd(r)},o.prototype.rU=function(r){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var n=this.nd.De();return this.nd.T(n,0,n),this.nd.T(n,3,0),this.nd.T(n,6,0),this.gx(n,r),n>=this.Qi.size&&(r=16>n?16:h.P.truncate(3*n/2),this.Qi.resize(r),this.xo.resize(r)),this.Qi.set(n,0),this.xo.set(n,0),n},o.prototype.nF=function(r){this.nd.kd(r)},o.prototype.Qy=function(r){this.ud.kd(r),this.gd--},o.prototype.jI=function(r){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0));var n=this.ud.De(),l=0<=r?r:n;if(this.ud.T(n,0,l),0>r){if(l>=this.wb.I()){if(r=16>l?16:h.P.truncate(3*l/2),this.wb.resize(r),this.Te!=null)for(var c=0;c<r;c++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(r),this.jt=this.wb.vb(0)}this.wb.Db(l,-1e38,-1e38),this.Te!=null&&(this.Te[l]=null),this.Ug!=null&&this.Ug.write(l,1)}return this.ud.T(n,4,2*l),this.gd++,n},o.prototype.yj=function(r,n,l){var c=n!=-1?this.Na(n):this.tj(r),p=c!=-1?this.V(c):-1,f=this.jI(l==null?this.gd:-1),m=this.Va(f);return l!=null&&this.wb.It(m,l),this.cj(f,r),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),l=this.ec(r),c=this.Ya(r),n==-1&&this.Yg(r,f),n==c&&this.Kf(r,f),l&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(r,this.Ka(r)+1),r=this.Sf(r),this.Vj(r,this.I(r)+1),f},o.prototype.pm=function(){return this.lo==null&&(this.lo=new h.Ta(this.wb.description)),this.lo},o.prototype.$o=function(r,n){this.dd.T(r,2,-134217729&this.dd.U(r,2)||(n==1?134217728:0))},o.prototype.Kn=function(r){return 134217728&this.dd.U(r,2)?1:0},o.prototype.cN=function(r){var n=this.Kg(r.K(),r.description);return r.K()==1736&&this.$o(n,r.Kn()),this.PD(n,r),n},o.prototype.dN=function(r){var n=this.Kg(r.K(),r.description);return this.QD(n,r),n},o.prototype.SV=function(r,n){this.nd==null&&(this.nd=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.xo=new h.ce(0)),this.nd.Ee(this.nd.Jg+r),this.ud.Ee(this.ud.Jg+n),this.Qi.Jb(this.Qi.size+r),this.xo.Jb(this.xo.size+r)},o.prototype.PD=function(r,n){this.SV(n.ea(),n.I()),this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0);for(var l=this.Te!=null&&n.Se!=null,c=0,p=n.ea();c<p;c++)if(!(2>n.Ka(c))){var f=this.wf(r,-1);this.mn(f,n.ec(c));for(var m=n.Ca(c),w=n.Wc(c);m<w;m++){var $=this.yj(f,-1,null);if(l)if($=this.Va($),(1&n.UF(m))!=0)this.Zg($,null);else{var T=new h.jg;n.cc(m,T,!0),this.Zg($,T.get())}}}},o.prototype.QD=function(r,n){this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0),r=this.wf(r,-1);var l=0;for(n=n.I();l<n;l++)this.yj(r,-1,null)},o.prototype.JX=function(r,n,l){var c=this.V(r);if(c==-1)throw h.i.Ra();for(var p=this.pm(),f=this.cd(r),m=0,w=n.ql(l);m<w;m++){var $=this.Va(r),T=this.V(r),E=n.Xp(l,m);m==0&&(E.Vo(p),this.Fh(r,p)),E.K()==322?this.Zg($,null):this.Zg($,h.ba.kg(E)),E.Ro(p),m<w-1?r=this.yj(f,T,p):this.Fh(c,p)}},o.prototype.IX=function(r,n,l){var c=this.V(r);if(c==-1)throw h.i.Ra();for(var p=this.pm(),f=this.cd(r),m=0,w=n.ql(l);m<w;m++){var $=this.Va(r),T=this.V(r),E=n.Xp(l,w-m-1);m==0&&(E.Ro(p),this.Fh(r,p)),E.K()==322?this.Zg($,null):this.Zg($,h.ba.kg(E)),E.Vo(p),m<w-1?r=this.yj(f,T,p):this.Fh(c,p)}},o.prototype.DF=function(){var r=new h.l;r.Pa();for(var n=this.$q(),l=new h.h,c=!0,p=n.next();p!=-1;p=n.next())this.D(p,l),c?r.$b(l.x,l.y):r.Nk(l.x,l.y),c=!1;return r},o.prototype.Ib=function(r){var n=r.K();if(h.ba.Ic(n))return this.cN(r);if(n==550)return this.dN(r);throw h.i.Ra()},o.prototype.pN=function(r,n){var l=n.K();if(h.ba.Ic(l))this.PD(r,n);else{if(l!=550)throw h.i.Ra();this.QD(r,n)}},o.prototype.hN=function(r,n){var l=this.Kg(1736,r.description);if(2>r.Ka(n))return l;this.Kl.Gd(r,r.Ca(n),r.Wc(n)),this.jt=this.wb.vb(0);var c=this.wf(l,-1);this.mn(c,r.ec(n)||!0);var p=this.Te!=null&&r.Se!=null,f=r.Ca(n);for(n=r.Wc(n);f<n;f++){var m=this.yj(c,-1,null);if(p)if(m=this.Va(m),(1&r.UF(f))!=0)this.Zg(m,null);else{var w=new h.jg;r.cc(f,w,!0),this.Zg(m,w.get())}}return l},o.prototype.Ke=function(r){var n=this.jc(r),l=h.UK.Kg(n,this.Kl.description),c=this.I(r);if(c==0)return l;if(h.ba.Ic(n)){n=this.ea(r);for(var p=h.Zc.Qh(n+1),f=h.Zc.Or(n+1,0),m=l.description,w=0,$=m.Ba;w<$;w++){for(var T=m.ld(w),E=h.sa.Wa(T),O=h.Zc.TE(T,c),P=this.wb.vb(T),L=0,F=0,z=0,R=this.Ob(r);R!=-1;R=this.Sb(R)){var G=0;this.ec(R)&&(G|=1),this.TS(R)&&(G|=4),G!=0&&f.uJ(F,G);var H=this.Ka(R);if(p.write(F++,z),z+=H,T==0){H=P;var B=O,te=new h.h;for(G=this.Ya(R);L<z;G=this.V(G),L++){var Q=this.Va(G);H.uc(2*Q,te),B.Vt(2*L,te)}}else for(G=this.Ya(R);L<z;G=this.V(G),L++)for(Q=this.Va(G),B=0;B<E;B++)te=P.gg(Q*E+B),O.rr(L*E+B,te)}l.kn(T,O),p.write(n,c)}l.KJ(f),l.LJ(p),l.Qc(16777215)}else if(n==550){for(m=l.description,l.resize(c),w=0,$=m.Ba;w<$;w++){for(T=m.ld(w),E=h.sa.Wa(T),O=l.vb(T),P=this.wb.vb(T),L=0,R=this.Ob(r),H=this.Ka(R),G=this.Ya(R);L<H;G=this.V(G),L++)for(Q=this.Va(G),B=0;B<E;B++)te=P.gg(Q*E+B),O.rr(L*E+B,te);l.kn(T,O)}l.Qc(16777215)}return l},o.prototype.wB=function(r){for(var n=this.Ob(r);n!=-1;n=this.ar(n));n=this.KR(r);var l=this.ve(r);n!=-1?this.JJ(n,l):this.md=l,l!=-1?this.NJ(l,n):this.sw=n,this.JQ(r)},o.prototype.Kg=function(r,n){return n===void 0?this.VE(r,h.fe.pg()):this.VE(r,n)},o.prototype.VE=function(r,n){return r=this.pU(r),this.wb==null?this.wb=this.Kl=new h.ee(n):this.Kl.Ll(n),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=r:(this.NJ(r,this.sw),this.JJ(this.sw,r)),this.sw=r},o.prototype.ve=function(r){return this.dd.U(r,1)},o.prototype.KR=function(r){return this.dd.U(r,0)},o.prototype.jc=function(r){return 2147483647&this.dd.U(r,2)},o.prototype.CJ=function(r,n,l){n=this.yk[n],(r=this.EF(r))>=n.size&&n.resize(Math.max(h.P.truncate(1.25*r),16),-1),n.write(r,l)},o.prototype.FF=function(r,n){return(r=this.EF(r))<(n=this.yk[n]).size?n.read(r):-1},o.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var r=0;r<this.yk.length;r++)if(this.yk[r]==null)return this.yk[r]=h.Zc.Qh(0),r;return this.yk.push(h.Zc.Qh(0)),this.yk.length-1},o.prototype.sW=function(r){this.yk[r]=null},o.prototype.Ob=function(r){return this.dd.U(r,3)},o.prototype.mv=function(r){return this.dd.U(r,4)},o.prototype.I=function(r){return this.dd.U(r,5)},o.prototype.ea=function(r){return this.dd.U(r,6)},o.prototype.Ip=function(r,n,l){for(var c=0,p=this.md;p!=-1;p=this.ve(p)){var f=this.jc(p);if(h.ba.Ic(f)&&(!l||f==1736)){f=this.jc(p)==1736;for(var m=this.Ob(p);m!=-1;){for(var w=0,$=this.Ya(m);w<h.P.truncate(this.Ka(m)/2);){var T=this.V($);if(T==-1)break;var E=this.Va($),O=this.Uh(E);O!=null?E=O.Rb():(O=this.Va(T),E=this.wb.Ar(E,O)),E<=r?(E==0?c==0&&(c=-1):c=1,T!=this.tj(m)&&(this.gC(T,$),this.qd(T,!0))):$=this.V($),w++}for(w=this.Ya(m),$=this.ec(m)?w:this.tj(m);0<this.Ka(m);){if((T=this.Na($))==-1){this.qd($,!0),c==0&&(c=-1);break}var P=this.Va(T);if((O=this.Uh(P))!=null?E=O.Rb():(E=this.Va($),E=this.wb.Ar(E,P)),E<=r)E==0?c==0&&(c=-1):c=1,this.gC(T,$),this.qd(T,!1),w==T&&(w=this.Ya(m));else if(($=this.Na($))==w)break}$=this.Ka(m),n&&(f?3>$:2>$)?(m=this.ar(m),c=0<$?1:c==0?-1:c):m=this.Sb(m)}}}return c},o.prototype.gC=function(r,n){var l=this.Va(r),c=this.Va(n);if(this.Ug!=null&&(l=this.Ug.read(l),this.Ug.write(c,l)),this.di!=null){for(c=0,l=this.di.length;c<l;c++)if(this.di[c]!=null){var p=this.Qa(r,c);p!=-1&&this.Sa(n,c,p)}}},o.prototype.Wl=function(r,n,l){var c=0,p=this.V(r);if(p==-1)throw h.i.Ra();for(var f=this.Va(r),m=this.Va(p),w=this.Uh(f),$=w==null?this.wb.Ar(f,m):w.Rb(),T=0;T<l;T++){var E=n[T];if(0<E&&1>E){var O=E;w!=null&&(O=0<$?w.Tx(E)/$:0),this.wb.fD(f,m,O,this.pm());var P=this.yj(this.cd(r),p,this.pm());if(c++,w!=null){var L=w.fl(0,E);O=this.Va(this.Na(P)),this.Zg(O,L),this.mf(P,L.xc()),T!=l-1&&n[T+1]!=1||(E=w.fl(E,1),this.Zg(O,E))}}}return c},o.prototype.HX=function(r,n,l){var c=0,p=this.V(r);if(p==-1)throw h.i.ga("internal error");var f=this.Va(r),m=this.Va(p),w=this.Uh(f),$=w==null?this.wb.Ar(f,m):w.Rb(),T=0;r=this.cd(r);for(var E=0;E<l;E++){var O=n[E];if(T<O&&1>O){var P=O;if(w!=null&&(P=0<$?w.Tx(O)/$:0),this.wb.fD(f,m,P,this.pm()),P=this.tS(r,p,this.pm()),c++,w!=null){T=w.fl(T,O);var L=this.Va(this.Na(P));this.Zg(L,T),this.Db(P,T.qa,T.ma),E!=l-1&&n[E+1]!=1||(T=w.fl(O,1),P=this.Va(P),this.Zg(P,T))}}T=O}return c},o.prototype.tS=function(r,n,l){var c=n!=-1?this.Na(n):this.tj(r),p=c!=-1?this.V(c):-1,f=this.jI(l==null?this.gd:-1),m=this.Va(f);return l!=null&&this.wb.It(m,l),this.cj(f,r),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),l=this.ec(r),c=this.Ya(r),n==-1&&this.Yg(r,f),n==c&&(l&&c!=-1||this.Kf(r,f)),l&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(r,this.Ka(r)+1),r=this.Sf(r),this.Vj(r,this.I(r)+1),f},o.prototype.pE=function(r,n,l){var c=this.Va(n),p=this.Va(l);if(0>c||p>this.gd-1)throw h.i.O("invalid call");if(c>p&&!this.ec(r))throw h.i.O("cannot iterate across an open path");for(r=0;n!=l;n=this.V(n))c=this.Va(n),(p=this.Uh(c))!=null?r+=p.Rb():(p=this.Va(this.V(n)),r+=this.wb.Ar(c,p));return r},o.prototype.Fh=function(r,n){var l=this.Va(r);this.wb.It(l,n),(l=this.Uh(l))!=null&&l.setStart(n),(r=this.Na(r))!=-1&&(r=this.Va(r),this.Uh(r)!=null&&l.setEnd(n))},o.prototype.Xi=function(r,n){r=this.Va(r),this.wb.we(r,n)},o.prototype.mf=function(r,n){this.Db(r,n.x,n.y)},o.prototype.Db=function(r,n,l){var c=this.Va(r);this.wb.Db(c,n,l),(c=this.Uh(c))!=null&&c.UB(n,l),(r=this.Na(r))!=-1&&(r=this.Va(r),this.Uh(r)!=null&&c.Sl(n,l))},o.prototype.D=function(r,n){this.wb.D(this.ud.U(r,0),n)},o.prototype.Hc=function(r,n){this.wb.Aa[0].uc(2*this.ud.U(r,0),n)},o.prototype.Oa=function(r){var n=new h.h;return this.wb.D(this.ud.U(r,0),n),n},o.prototype.ZF=function(r,n){this.jt.uc(2*r,n)},o.prototype.Vc=function(r,n,l){return this.wb.Vc(r,this.Va(n),l)},o.prototype.setAttribute=function(r,n,l,c){this.wb.setAttribute(r,this.Va(n),l,c)},o.prototype.Va=function(r){return this.ud.U(r,0)},o.prototype.kh=function(){var r=new h.h;return this.D(void 0,r),r.y},o.prototype.hq=function(r,n){r=this.Va(r),n=this.Va(n);var l=this.wb.Aa[0].o;return l[2*r]===l[2*n]&&l[2*r+1]===l[2*n+1]},o.prototype.Fv=function(r,n){r=this.Va(r);var l=this.wb.Aa[0].o;return l[2*r]===n.x&&l[2*r+1]===n.y},o.prototype.rX=function(r,n){if(1>n&&(n=1),this.Ug==null){if(n==1)return;this.Ug=h.Zc.Fn(this.wb.I(),1)}(r=this.Va(r))>=this.Ug.size&&this.Ug.resize(r+1,1),this.Ug.write(r,n)},o.prototype.YF=function(r){return r=this.Va(r),this.Ug==null||r>=this.Ug.size?1:this.Ug.read(r)},o.prototype.Sa=function(r,n,l){n=this.di[n],r=this.Va(r),n.size<this.wb.I()&&n.resize(this.wb.I(),-1),n.write(r,l)},o.prototype.Qa=function(r,n){return(r=this.Va(r))<(n=this.di[n]).size?n.read(r):-1},o.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var r=0;r<this.di.length;r++)if(this.di[r]==null)return this.di[r]=h.Zc.Qh(0,-1),r;return this.di.push(h.Zc.Qh(0,-1)),this.di.length-1},o.prototype.Ud=function(r){this.di[r]=null},o.prototype.cc=function(r){return this.Te!=null?(r=this.Va(r),this.Te[r]):null},o.prototype.fd=function(r,n){var l=this.ud.U(r,2);if(l==-1)return!1;if(this.aA){var c=new h.Ta;this.Xi(r,c),n.setStart(c),this.Xi(l,c),n.setEnd(c)}else this.wb.Hc(this.ud.U(r,0),ci),n.gm(0,ci),this.wb.Hc(this.ud.U(l,0),ci),n.gm(1,ci);return!0},o.prototype.hW=function(r,n,l){if(this.aA){var c=new h.Ta;this.Xi(r,c),l.setStart(c),this.Xi(n,c),l.setEnd(c)}else this.wb.Hc(r,ci),l.gm(0,ci),this.wb.Hc(n,ci),l.gm(1,ci)},o.prototype.wf=function(r,n){if(n!=-1){if(r!=this.Sf(n))throw h.i.Ra();var l=this.es(n)}else l=this.mv(r);var c=this.rU(r);return n!=-1&&this.ep(n,c),this.cp(c,n),this.ep(c,l),l!=-1?this.cp(l,c):this.ap(r,c),n==-1&&this.bp(r,c),this.Tl(r,this.ea(r)+1),c},o.prototype.iG=function(r,n,l,c){r=this.wf(r,-1);for(var p=0,f=n,m=!1;f==l&&(m=!0),this.cj(f,r),p++,(f=this.V(f))!=n;);return this.mn(r,!0),this.Xj(r,p),m&&(n=l),this.Kf(r,n),this.Yg(r,this.Na(n)),this.fp(r,!1),c!=null&&(c[0]=m),r},o.prototype.ar=function(r){var n=this.es(r),l=this.Sb(r),c=this.Sf(r);return n!=-1?this.cp(n,l):this.ap(c,l),l!=-1?this.ep(l,n):this.bp(c,n),this.vO(r),this.Tl(c,this.ea(c)-1),this.nF(r),l},o.prototype.vO=function(r){var n=this.Ya(r);if(n!=-1){for(var l=0,c=this.Ka(r);l<c;l++){var p=n;n=this.V(n),this.Qy(p)}n=this.Sf(r),this.Vj(n,this.I(n)-this.Ka(r))}this.Xj(r,0)},o.prototype.Sb=function(r){return this.nd.U(r,2)},o.prototype.es=function(r){return this.nd.U(r,1)},o.prototype.Ka=function(r){return this.nd.U(r,3)},o.prototype.ec=function(r){return(1&this.Up(r))!=0},o.prototype.mn=function(r,n){if(this.ec(r)!=n){if(0<this.Ka(r)){var l=this.Ya(r),c=this.tj(r);n?(this.Cc(c,l),this.Dc(l,c),l=this.Va(c)):(this.Cc(c,-1),this.Dc(l,-1),l=this.Va(c)),this.Zg(l,null)}this.QB(r,(1|this.Up(r))-1|(n?1:0))}},o.prototype.Sf=function(r){return this.nd.U(r,7)},o.prototype.TS=function(r){return(2&this.Up(r))!=0},o.prototype.KB=function(r,n){this.QB(r,(2|this.Up(r))-2|(n?2:0))},o.prototype.qz=function(r){if(this.YS(r))return this.Qi.get(this.sv(r));var n=new h.zb,l=this.Ya(r);if(l==-1)return 0;var c=new h.h;this.D(l,c);for(var p=0,f=0,m=this.Ka(r);f<m;f++,l=this.V(l)){var w=this.cc(l);if(w==null){if(!this.fd(l,n))continue;w=n}p+=w.Sx(c.x,c.y)}return this.fp(r,!0),this.Qi.set(this.sv(r),p),p},o.prototype.ir=function(r,n,l){n=this.Ek[n],r=this.sv(r),n.size<this.Qi.size&&n.resize(this.Qi.size,-1),n.write(r,l)},o.prototype.uj=function(r,n){return(r=this.sv(r))<(n=this.Ek[n]).size?n.read(r):-1},o.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var r=0;r<this.Ek.length;r++)if(this.Ek[r]==null)return this.Ek[r]=h.Zc.Qh(0),r;return this.Ek.push(h.Zc.Qh(0)),this.Ek.length-1},o.prototype.xB=function(r){this.Ek[r]=null},o.prototype.UT=function(r,n,l){if(l==-1)throw h.i.O();if(n!=l){var c=this.Sb(l),p=this.es(l),f=this.Sf(l);p==-1?this.ap(f,c):this.cp(p,c),c==-1?this.bp(f,p):this.ep(c,p),this.Vj(f,this.I(f)-this.Ka(l)),this.Tl(f,this.ea(f)-1),p=n==-1?this.mv(r):this.es(n),this.ep(l,p),this.cp(l,n),n==-1?this.bp(r,l):this.ep(n,l),p==-1?this.ap(r,l):this.cp(p,l),this.Vj(r,this.I(r)+this.Ka(l)),this.Tl(r,this.ea(r)+1),this.gx(l,r)}},o.prototype.kj=function(r,n){this.wb.we(this.Va(n),this.pm()),this.yj(r,-1,this.pm())},o.prototype.qd=function(r,n){var l=this.cd(r),c=this.Na(r),p=this.V(r);c!=-1&&this.Cc(c,p);var f=this.Ka(l);if(r==this.Ya(l)&&this.Kf(l,1<f?p:-1),p!=-1&&this.Dc(p,c),r==this.tj(l)&&this.Yg(l,1<f?c:-1),c!=-1&&p!=-1){c=this.Va(c);var m=this.Va(p);n?(n=this.Uh(c))!=null&&(c=new h.h,this.wb.D(m,c),n.Rc(c)):(m=this.Va(r),n=this.Uh(m),this.Zg(c,n),n!=null&&(c=this.wb.Oa(c),n.Ec(c)))}return this.Xj(l,f-1),l=this.Sf(l),this.Vj(l,this.I(l)-1),this.Qy(r),p},o.prototype.Ya=function(r){return this.nd.U(r,4)},o.prototype.tj=function(r){return this.nd.U(r,5)},o.prototype.V=function(r){return this.ud.U(r,2)},o.prototype.Na=function(r){return this.ud.U(r,1)},o.prototype.cd=function(r){return this.ud.U(r,3)},o.prototype.hc=function(r,n){return this.yj(r,-1,n)},o.prototype.$q=function(r){if(r===void 0)return this.$q(!1);if(r instanceof u)return new u(r);var n,l=-1,c=-1,p=-1,f=0,m=!1;for(n=this.md;n!=-1;n=this.ve(n))if(!r||h.ba.Ic(this.jc(n))){for(l=this.Ob(n);l!=-1;l=this.Sb(l))if(p=c=this.Ya(l),f=0,c!=-1){m=!0;break}if(m)break}return u.vP(this,n,l,c,p,f,r)},o.prototype.Pc=function(r){if(this.Kl.Pc(r),this.Te!=null)for(var n=0,l=this.Te.length;n<l;n++)this.Te[n]!=null&&this.Te[n].Pc(r)},o.prototype.lr=function(r,n,l,c){c?this.JX(r,n,l):this.IX(r,n,l)},o.prototype.Dc=function(r,n){this.ud.T(r,1,n)},o.prototype.Cc=function(r,n){this.ud.T(r,2,n)},o.prototype.cj=function(r,n){this.ud.T(r,3,n)},o.prototype.Xj=function(r,n){this.nd.T(r,3,n)},o.prototype.Kf=function(r,n){this.nd.T(r,4,n)},o.prototype.Yg=function(r,n){this.nd.T(r,5,n)},o.prototype.Tl=function(r,n){this.dd.T(r,6,n)},o.prototype.Vj=function(r,n){this.dd.T(r,5,n)},o.prototype.kJ=function(r){var n=r;do{var l=this.V(n);this.Cc(n,this.Na(n)),this.Dc(n,l),n=l}while(n!=r)},o.prototype.XB=function(r){this.gd=r},o.prototype.br=function(r){var n=this.es(r),l=this.Sb(r),c=this.Sf(r);n!=-1?this.cp(n,l):this.ap(c,l),l!=-1?this.ep(l,n):this.bp(c,n),this.Kf(r,-1),this.Yg(r,-1),this.nF(r)},o.prototype.oi=function(r,n){var l=this.Na(r),c=this.V(r);if(l!=-1&&this.Cc(l,c),c!=-1&&this.Dc(c,l),l!=-1&&c!=-1)if(l=this.Va(l),c=this.Va(c),n){if((n=this.Uh(l))!=null){var p=new h.h;this.wb.D(c,p),n.Rc(p)}}else n=this.Va(r),n=this.Uh(n),this.Zg(l,n),n!=null&&(p=new h.h,this.wb.D(l,p),n.Ec(p));this.Qy(r)},o.prototype.YS=function(r){return(4&this.Up(r))!=0},o.prototype.fp=function(r,n){this.QB(r,(4|this.Up(r))-4|(n?4:0))},o.prototype.nx=function(r,n){var l=this.ud.o;this.wb.oc();var c=this.wb.Aa[0].o;r.Wd(0,n,function(p,f){var m=l[5*p];p=l[5*f],f=c[2*m],m=c[2*m+1];var w=c[2*p];return m<(p=c[2*p+1])?-1:m>p?1:f<w?-1:f>w?1:0})},o.prototype.eS=function(){for(var r=this.md;r!=-1;r=this.ve(r))if(!h.ba.Ic(this.jc(r)))return!0;return!1},o.prototype.cC=function(r,n){for(var l=this.Ob(r),c=this.Ob(n),p=this.mv(r),f=this.mv(n),m=this.Ob(r);m!=-1;m=this.Sb(m))this.gx(m,n);for(m=this.Ob(n);m!=-1;m=this.Sb(m))this.gx(m,r);this.ap(r,c),this.ap(n,l),this.bp(r,f),this.bp(n,p),l=this.I(r),c=this.ea(r),p=this.ea(n),this.Vj(r,this.I(n)),this.Vj(n,l),this.Tl(r,p),this.Tl(n,c),l=this.dd.U(r,2),this.dd.T(r,2,this.dd.U(n,2)),this.dd.T(n,2,l)},o}(),h.hd=k})(q||(q={})),function(h){var k=function(v){function u(o,r,n,l){var c=v.call(this)||this;return c.aa=new h.l,o===void 0?c.PE():typeof o=="number"?c.QO(o,r,n,l):o instanceof h.Ta?r!==void 0?c.Su(o,r,n):c.RO(o):o instanceof h.sa?r!==void 0?c.TO(o,r):c.SO(o):o instanceof h.l?c.PO(o):c.PE(),c}return wt(u,v),u.prototype.Su=function(o,r,n){this.description=h.fe.pg(),this.aa.Pa(),o.B()||this.vu(o,r,n)},u.prototype.PO=function(o){this.description=h.fe.pg(),this.aa.L(o),this.aa.normalize()},u.prototype.SO=function(o){if(o==null)throw h.i.O();this.description=o,this.aa.Pa()},u.prototype.TO=function(o,r){if(o==null)throw h.i.O();this.description=o,this.aa.L(r),this.aa.normalize()},u.prototype.PE=function(){this.description=h.fe.pg(),this.aa.Pa()},u.prototype.RO=function(o){this.description=h.fe.pg(),this.aa.Pa(),o.B()||this.vu(o)},u.prototype.QO=function(o,r,n,l){this.description=h.fe.pg(),this.L(o,r,n,l)},u.prototype.L=function(o,r,n,l){if(this.wc(),typeof o=="number")this.aa.L(o,r,n,l);else for(this.Pa(),r=0,n=o.length;r<n;r++)this.$b(o[r])},u.prototype.Zo=function(o){if(this.wc(),!o.aT())throw h.i.O();this.aa.L(o)},u.prototype.Pa=function(){this.wc(),this.aa.Pa()},u.prototype.B=function(){return this.aa.B()},u.prototype.S=function(){return this.aa.S()},u.prototype.da=function(){return this.aa.da()},u.prototype.ik=function(){return this.aa.ik()},u.prototype.Lp=function(){return this.aa.Lp()},u.prototype.Kp=function(){return this.aa.tf()},u.prototype.$b=function(o){if(o instanceof h.h)this.wc(),this.aa.$b(o);else if(o instanceof h.l)this.wc(),this.aa.$b(o);else if(o instanceof h.Ta){if(this.wc(),!o.Bc()){var r=o.description;if(this.description!=r&&this.Ll(r),this.B())this.vu(o);else{this.aa.$b(o.D());for(var n=1,l=r.Ba;n<l;n++)for(var c=r.Fd(n),p=h.sa.Wa(c),f=0;f<p;f++){var m=o.Vc(c,f),w=this.Vg(c,f);w.$b(m),this.setInterval(c,f,w)}}}}else if(o instanceof u&&!o.B())for((r=o.description)!=this.description&&this.Ll(r),this.aa.$b(o.aa),n=1,l=r.Ba;n<l;n++)for(c=r.ld(n),p=h.sa.Wa(c),f=0;f<p;f++)m=o.Vg(c,f),(w=this.Vg(c,f)).$b(m),this.setInterval(c,f,w)},u.prototype.vu=function(o,r,n){if(r!==void 0){this.aa.L(o.D(),r,n),n=1;for(var l=(r=o.description).Ba;n<l;n++)for(var c=r.Fd(n),p=h.sa.Wa(c),f=0;f<p;f++){var m=o.Vc(c,f);this.setInterval(c,f,m,m)}}else for(this.aa.L(o.la[0],o.la[1]),n=1,l=(r=o.description).Ba;n<l;n++)for(c=r.Fd(n),p=h.sa.Wa(c),f=0;f<p;f++)m=o.Vc(c,f),this.setInterval(c,f,m,m)},u.prototype.setInterval=function(o,r,n,l){if(n=typeof n=="number"?new h.Oc(n,l):n,this.wc(),o==0)if(r==0)this.aa.v=n.pa,this.aa.C=n.wa;else{if(r!=1)throw h.i.de();this.aa.G=n.pa,this.aa.H=n.wa}else this.qD(0,o,r,n.pa),this.qD(1,o,r,n.wa)},u.prototype.X=function(o,r){this.wc(),this.aa.X(o,r)},u.prototype.Pc=function(o){if(o instanceof h.Ed)this.wc(),o.hC(this.aa);else if(this.wc(),!this.aa.B()){var r=new h.JK;this.So(r),r.SS()?r.Pa():o.hC(r)}},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();if(o.wc(),o.description=this.description,o.aa.L(this.aa),o.la=null,this.la!=null){o.qu();for(var r=0;r<2*(this.description.Be.length-2);r++)o.la[r]=this.la[r]}},u.prototype.Ja=function(){return new u(this.description)},u.prototype.He=function(){return this.aa.rF()},u.prototype.Rb=function(){return this.aa.tR()},u.prototype.K=function(){return 197},u.prototype.Eb=function(){return 2},u.prototype.dn=function(o){this.copyTo(o)},u.prototype.A=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H},u.prototype.So=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H,o.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},u.prototype.Vg=function(o,r){var n=new h.Oc;return n.L(this.Pd(0,o,r),this.Pd(1,o,r)),n},u.prototype.If=function(o,r){r.Pf(this.description);var n=this.description.Ba-1;switch(o){case 0:for(o=0;o<n;o++)for(var l=this.description.ld(o),c=h.sa.Wa(l),p=0;p<c;p++)r.setAttribute(l,p,this.Pd(0,l,p));r.Db(this.aa.v,this.aa.G);break;case 1:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),p=0;p<c;p++)r.setAttribute(l,p,this.Pd(1,l,p));r.Db(this.aa.v,this.aa.H);break;case 2:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),p=0;p<c;p++)r.setAttribute(l,p,this.Pd(0,l,p));r.Db(this.aa.C,this.aa.H);break;case 3:for(o=0;o<n;o++)for(l=this.description.ld(o),c=h.sa.Wa(l),p=0;p<c;p++)r.setAttribute(l,p,this.Pd(1,l,p));r.Db(this.aa.C,this.aa.G);break;default:throw h.i.de()}},u.prototype.hB=function(o,r){o=this.aa.hB(o),r.na(o.x,o.y)},u.prototype.fR=function(o,r){return r*(o.Qq-2)},u.prototype.sF=function(o,r,n){if(this.aa.B())throw h.i.ga("empty geometry");if(r==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.sa.Wa(r))throw h.i.O();var l=this.description.Rf(r);return this.qu(),0<=l?this.la[this.fR(this.description,o)+this.description.GR(l)-2+n]:h.sa.te(r)},u.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var o=u.Ig(this.description,0),r=u.Ig(this.description,1),n=0,l=1,c=this.description.Ba;l<c;l++){var p=this.description.ld(l),f=h.sa.Wa(p);p=h.sa.te(p);for(var m=0;m<f;m++)this.la[o+n]=p,this.la[r+n]=p,n++}}},u.prototype.un=function(o){if(this.la!=null)if(2<o.Be.length){for(var r=h.fe.Kw(o,this.description),n=[],l=u.Ig(this.description,0),c=u.Ig(this.description,1),p=u.Ig(o,0),f=u.Ig(o,1),m=0,w=1,$=o.Ba;w<$;w++){var T=o.ld(w),E=h.sa.Wa(T);if(r[w]==-1){var O=h.sa.te(T);for(T=0;T<E;T++)n[p+m]=O,n[f+m]=O,m++}else for(O=this.description.bk(r[w])-2,T=0;T<E;T++)n[p+m]=this.la[l+O],n[f+m]=this.la[c+O],m++,O++}this.la=n}else this.la=null;this.description=o},u.prototype.Pd=function(o,r,n){if(this.aa.B())throw h.i.ga("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.sa.Wa(r))throw h.i.de();var l=this.description.Rf(r);return 0<=l?(this.qu(),this.la[u.Ig(this.description,o)+this.description.bk(l)-2+n]):h.sa.te(r)},u.prototype.qD=function(o,r,n,l){if(this.wc(),r==0)o!=0?n!=0?this.aa.H=l:this.aa.C=l:n!=0?this.aa.G=l:this.aa.v=l;else{if(n>=h.sa.Wa(r))throw h.i.de();if(!this.hasAttribute(r)){if(h.sa.yG(r,l))return;this.se(r)}r=this.description.Rf(r),this.qu(),this.la[u.Ig(this.description,o)+this.description.bk(r)-2+n]=l}},u.Ig=function(o,r){return r*(o.Be.length-2)},u.prototype.Fa=function(o){this.wc();var r=new h.l;return o.A(r),this.aa.Fa(r)},u.prototype.isIntersecting=function(o){return o instanceof h.l?this.aa.isIntersecting(o):this.aa.isIntersecting(o.aa)},u.prototype.Lu=function(o,r){this.wc(),o.B()?this.Pa():r!==void 0?this.vu(o,r,void 0):this.aa.Lu(o.Ng(),o.kh())},u.prototype.offset=function(o,r){this.wc(),this.aa.offset(o,r)},u.prototype.normalize=function(){this.wc(),this.aa.normalize()},u.prototype.tf=function(o){if(o===void 0){if(o=new h.Ta(this.description),this.B())return o;for(r=this.description.Ba,n=1;n<r;n++)for(l=this.description.Fd(n),c=h.sa.Wa(l),p=0;p<c;p++)f=.5*(this.Pd(0,l,p)+this.Pd(1,l,p)),o.setAttribute(l,p,f);return o.Db(this.aa.ik(),this.aa.Lp()),o}if(o.Pf(this.description),this.B())o.Pa();else{for(var r=this.description.Ba,n=1;n<r;n++)for(var l=this.description.ld(n),c=h.sa.Wa(l),p=0;p<c;p++){var f=.5*(this.sF(0,l,p)+this.sF(1,l,p));o.setAttribute(l,p,f)}o.Db(this.aa.tf())}},u.prototype.hz=function(){return new h.Ta(this.aa.hz())},u.prototype.contains=function(o){return o instanceof h.Ta?!o.B()&&this.aa.contains(o.Ng(),o.kh()):this.aa.contains(o.aa)},u.prototype.ZO=function(o){return this.aa.contains(o)},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.aa.Nb(o.aa))return!1;for(var r=0,n=2*(this.description.Be.length-2);r<n;r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(o=h.P.Vh(o,this.aa.dc()),!this.B()&&this.la!=null)for(var r=0,n=2*(this.description.Be.length-2);r<n;r++)o=h.P.Vh(o,this.la[r]);return o},u.prototype.gs=function(){return this.aa.v},u.prototype.js=function(){return this.aa.G},u.prototype.fs=function(){return this.aa.C},u.prototype.hs=function(){return this.aa.H},u.prototype.ng=function(){return h.si.im(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},u}(h.ba);h.Hh=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n){u===void 0?this.Pa():(this.v=u,this.G=o,this.C=r,this.H=n)}return v.construct=function(u,o,r,n){var l=new v;return l.v=u,l.G=o,l.C=r,l.H=n,l},v.prototype.L=function(u,o,r,n){typeof u=="number"?r!==void 0?(this.v=u,this.G=o,this.C=r,this.H=n,this.normalize()):(this.v=u,this.G=o,this.C=u,this.H=o):u instanceof h.h?o!==void 0?(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*r,this.H=this.G+r,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof v?this.L(u.v,u.G,u.C,u.H):u instanceof h.Oc&&(u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa))},v.prototype.bx=function(u,o){if(o!==void 0)if(o==0)this.Pa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var r=1;r<o;r++){var n=u[r];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(u==null||u.length==0)this.Pa();else for(n=u[0],this.L(n.x,n.y),r=1;r<u.length;r++)o=u[r],this.Nk(o.x,o.y)},v.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},v.prototype.B=function(){return isNaN(this.v)},v.prototype.$b=function(u,o){typeof u=="number"?this.B()?(this.v=u,this.G=o,this.C=u,this.H=o):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)):u instanceof h.h||u instanceof h.Od?this.$b(u.x,u.y):u instanceof v&&!u.B()&&(this.$b(u.v,u.G),this.$b(u.C,u.H))},v.prototype.Nk=function(u,o){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)},v.prototype.X=function(u,o){this.B()||(this.v-=u,this.C+=u,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Pa())},v.prototype.scale=function(u){0>u&&this.Pa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},v.prototype.zoom=function(u,o){this.B()||this.L(this.tf(),u*this.S(),o*this.da())},v.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},v.prototype.CG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},v.prototype.Fa=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Pa(),u)},v.prototype.hB=function(u){switch(u){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.de()}},v.prototype.iB=function(u){if(u==null||4>u.length)throw h.i.O();u[0]!=null?u[0].na(this.v,this.G):u[0]=h.h.construct(this.v,this.G),u[1]!=null?u[1].na(this.v,this.H):u[1]=h.h.construct(this.v,this.H),u[2]!=null?u[2].na(this.C,this.H):u[2]=h.h.construct(this.C,this.H),u[3]!=null?u[3].na(this.C,this.G):u[3]=h.h.construct(this.C,this.G)},v.prototype.rF=function(){return this.B()?0:this.S()*this.da()},v.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},v.prototype.ik=function(){return(this.C+this.v)/2},v.prototype.Lp=function(){return(this.H+this.G)/2},v.prototype.S=function(){return this.C-this.v},v.prototype.da=function(){return this.H-this.G},v.prototype.move=function(u,o){this.B()||(this.v+=u,this.G+=o,this.C+=u,this.H+=o)},v.prototype.Lu=function(u,o){if(o!==void 0)this.move(u-this.ik(),o-this.Lp());else if(u instanceof h.h)this.Lu(u.x,u.y);else{if(!(u instanceof h.Ta))throw h.i.O();o=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=u.Ng()-o,this.C=u.Ng()+o,this.G=u.kh()-r,this.H=u.kh()+r}},v.prototype.offset=function(u,o){this.v+=u,this.C+=u,this.G+=o,this.H+=o},v.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=u,this.C=o,u=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=u,this.H=o}},v.prototype.fn=function(u){u.na(this.v,this.G)},v.prototype.VI=function(u){u.na(this.C,this.G)},v.prototype.YI=function(u){u.na(this.v,this.H)},v.prototype.gn=function(u){u.na(this.C,this.H)},v.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},v.prototype.tf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},v.prototype.hz=function(){return h.h.construct(this.v,this.G)},v.prototype.contains=function(u,o){if(o!==void 0)return u>=this.v&&u<=this.C&&o>=this.G&&o<=this.H;if(u instanceof h.Ta)return this.contains(u.Ng(),u.kh());if(u instanceof h.h)return this.contains(u.x,u.y);if(u instanceof v)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw h.i.O()},v.prototype.jm=function(u,o){if(o!==void 0)return u>this.v&&u<this.C&&o>this.G&&o<this.H;if(u instanceof h.h)return this.jm(u.x,u.y);if(u instanceof v)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw h.i.O()},v.prototype.Nb=function(u){return u==this||u instanceof v&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},v.prototype.dc=function(){var u=this.v;u=h.P.truncate(u^u>>>32);var o=h.P.Vh(u);return u=this.C,u=h.P.truncate(u^u>>>32),o=h.P.Vh(u,o),u=this.G,u=h.P.truncate(u^u>>>32),o=h.P.Vh(u,o),u=this.H,u=h.P.truncate(u^u>>>32),h.P.Vh(u,o)},v.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},v.prototype.uy=function(u,o){var r=this.ak(u),n=this.ak(o);if(r&n)return 0;if(!(r|n))return 4;var l=(r!=0?1:0)|(n!=0?2:0);do{var c=o.x-u.x,p=o.y-u.y;if(c>p?r&v.TC?(r&v.lu?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),r=this.ak(u)):n&v.TC?(n&v.lu?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.ak(o)):r!=0?(r&v.mu?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),r=this.ak(u)):(n&v.mu?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.ak(o)):r&v.UC?(r&v.mu?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),r=this.ak(u)):n&v.UC?(n&v.mu?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.ak(o)):r!=0?(r&v.lu?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),r=this.ak(u)):(n&v.lu?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.ak(o)),(r&n)!=0)return 0}while(r|n);return l},v.prototype.ak=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},v.prototype.Di=function(u){return!this.B()&&(this.S()<=u||this.da()<=u)},v.prototype.ub=function(u){return u instanceof h.h?Math.sqrt(this.dK(u)):Math.sqrt(this.px(u))},v.prototype.px=function(u){var o=0,r=0,n=this.v-u.C;return n>o&&(o=n),(n=this.G-u.H)>r&&(r=n),(n=u.v-this.C)>o&&(o=n),(n=u.G-this.H)>r&&(r=n),o*o+r*r},v.prototype.dK=function(u){var o=0,r=0,n=this.v-u.x;return n>o&&(o=n),(n=this.G-u.y)>r&&(r=n),(n=u.x-this.C)>o&&(o=n),(n=u.y-this.H)>r&&(r=n),o*o+r*r},v.prototype.en=function(u){this.B()?u.Pa():u.L(this.v,this.C)},v.lu=1,v.mu=4,v.TC=3,v.UC=12,v}();h.l=k}(q||(q={})),function(h){var k,v;(v=k||(k={}))[v.initialize=0]="initialize",v[v.initializeRed=1]="initializeRed",v[v.initializeBlue=2]="initializeBlue",v[v.initializeRedBlue=3]="initializeRedBlue",v[v.sweep=4]="sweep",v[v.sweepBruteForce=5]="sweepBruteForce",v[v.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",v[v.sweepRedBlue=7]="sweepRedBlue",v[v.sweepRed=8]="sweepRed",v[v.sweepBlue=9]="sweepBlue",v[v.iterate=10]="iterate",v[v.iterateRed=11]="iterateRed",v[v.iterateBlue=12]="iterateBlue",v[v.iterateBruteForce=13]="iterateBruteForce",v[v.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",v[v.resetRed=15]="resetRed",v[v.resetBlue=16]="resetBlue";var u=function(){function o(r,n){this.ei=r,this.ZG=n}return o.prototype.qr=function(r,n,l){this.ei.FX(l,r,n,this.ZG)},o.prototype.bq=function(r){return this.ei.Tr(r,this.ZG)},o}();k=function(){function o(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new h.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return o.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},o.prototype.bd=function(r,n){if(!this.Rv)throw h.i.Hb();var l=new h.l;l.L(n),this.io.add(r),this.Fb.push(l)},o.prototype.Hp=function(){if(!this.Rv)throw h.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},o.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new h.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},o.prototype.DD=function(r,n){if(!this.Qv)throw h.i.Hb();var l=new h.l;l.L(n),this.io.add(r),this.Fb.push(l)},o.prototype.dF=function(){if(!this.Qv)throw h.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},o.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new h.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},o.prototype.zD=function(r,n){if(!this.Pv)throw h.i.Hb();var l=new h.l;l.L(n),this.ew.add(r),this.rd.push(l)},o.prototype.cF=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},o.prototype.next=function(){if(this.Jc)return!1;for(var r=!0;r;)switch(this.Yb){case 0:r=this.Bz();break;case 1:r=this.mS();break;case 2:r=this.jS();break;case 3:r=this.lS();break;case 4:r=this.QX();break;case 5:r=this.MX();break;case 6:r=this.NX();break;case 7:r=this.OX();break;case 8:r=this.tx();break;case 9:r=this.dC();break;case 10:r=this.Pz();break;case 11:r=this.eT();break;case 12:r=this.bT();break;case 13:r=this.cT();break;case 14:r=this.dT();break;case 15:r=this.fJ();break;case 16:r=this.eJ();break;default:throw h.i.Ra()}return!this.Jc},o.prototype.WB=function(r){this.ra=r},o.prototype.oz=function(r){return this.Fb[r]},o.prototype.Wy=function(r){return this.rd[r]},o.prototype.pl=function(r){return this.io.read(r)},o.prototype.jl=function(r){return this.ew.read(r)},o.Oz=function(r){return(1&r)==1},o.gq=function(r){return(1&r)==0},o.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},o.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},o.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},o.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.ff.mr();for(var r=0;r<this.rd.length;r++){var n=this.rd[r];this.ff.Dr(n.v,n.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),r=0;r<2*this.rd.length;r++)this.Ff.add(r);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},o.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.qo=this.sd.getIterator(),this.Md=new h.ja(0)),this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.ff.mr(),r=0;r<this.rd.length;r++)n=this.rd[r],this.ff.Dr(n.v,n.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);for(r=0;r<2*this.rd.length;r++)this.Ff.add(r);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},o.prototype.QX=function(){var r=this.Md.get(--this.qe),n=r>>1;return o.gq(r)?(this.sd.remove(n),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Xf=n,this.Yb=10,!0)},o.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},o.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},o.prototype.OX=function(){var r=this.Md.get(this.qe-1),n=this.Ff.get(this.Tg-1),l=this.Tr(r,!0),c=this.Tr(n,!1);return l>c?this.tx():l<c?this.dC():o.Oz(r)?this.tx():o.Oz(n)?this.dC():this.tx()},o.prototype.tx=function(){var r=this.Md.get(--this.qe),n=r>>1;if(o.gq(r))return this.Ef!=-1&&this.Kj.get(n)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(n)),this.Kj.set(n,-1)):this.sd.remove(n),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(r=this.Bd.sc(this.Df);r!=-1;){var l=this.Bd.getData(r);this.ff.xj(l),this.Jj.set(l,-1),l=this.Bd.lb(r),this.Bd.kd(this.Df,r),r=l}return 0<this.ff.size()?(this.qw.zB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Xf=n,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Kj=new h.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(n,this.Bd.addElement(this.Ef,n)),this.Yb=7),!0},o.prototype.dC=function(){var r=this.Ff.get(--this.Tg),n=r>>1;if(o.gq(r))return this.Df!=-1&&this.Jj.get(n)!=-1?(this.Bd.kd(this.Df,this.Jj.get(n)),this.Jj.set(n,-1)):this.ff.remove(n),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(r=this.Bd.sc(this.Ef);r!=-1;){var l=this.Bd.getData(r);this.sd.xj(l),this.Kj.set(l,-1),l=this.Bd.lb(r),this.Bd.kd(this.Ef,r),r=l}return 0<this.sd.size()?(this.qo.zB(this.rd[n].v,this.rd[n].C,this.ra),this.Bf=n,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new h.lp),this.Jj=new h.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(n,this.Bd.addElement(this.Df,n)),this.Yb=7),!0},o.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var r=this.Md.get(this.qe)>>1;return this.sd.xj(r),this.Yb=4,!0},o.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var r=this.Ff.get(this.Tg)>>1;return this.ff.xj(r),this.Yb=7,!0},o.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var r=this.Md.get(this.qe)>>1;return this.sd.xj(r),this.Yb=7,!0},o.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var r=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(r)||(this.Bf=this.Tg,!1)},o.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var r=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(r)||(this.Bf=this.Tg,!1)},o.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},o.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},o.prototype.Mt=function(r,n,l){this.Cm==null&&(this.Cm=new h.Zt),l=new u(this,l),this.Cm.sort(r,0,n,l)},o.prototype.FX=function(r,n,l,c){var p=this;r.Wd(n,l,function(f,m){var w=p.Tr(f,c),$=p.Tr(m,c);return w<$||w==$&&o.gq(f)&&o.Oz(m)?-1:1})},o.prototype.Tr=function(r,n){var l=.5*this.ra;return n?(n=this.Fb[r>>1],o.gq(r)?n.G-l:n.H+l):(n=this.rd[r>>1],o.gq(r)?n.G-l:n.H+l)},o}(),h.sC=k}(q||(q={})),function(h){var k=function(){function v(){}return v.construct=function(u,o,r,n,l,c){var p=new v;return p.v=u,p.G=o,p.Xe=r,p.C=n,p.H=l,p.Dg=c,p},v.prototype.Pa=function(){this.Xe=this.v=NaN},v.prototype.B=function(){return isNaN(this.v)},v.prototype.SS=function(){return isNaN(this.Xe)},v.prototype.L=function(u,o,r,n,l,c){n!==void 0?typeof u=="number"?(this.v=u,this.G=o,this.Xe=r,this.C=n,this.H=l,this.Dg=c):(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*r,this.H=this.G+r,this.Xe=u.z-.5*n,this.Dg=this.Xe+n):(this.v=u,this.G=o,this.Xe=r,this.C=u,this.H=o,this.Dg=r)},v.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Xe+=u.z,this.C+=u.x,this.H+=u.y,this.Dg+=u.z},v.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},v.prototype.Nk=function(u,o,r){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Xe)==0?this.Xe>r?this.Xe=r:this.Dg<r&&(this.Dg=r):this.Dg=this.Xe=r},v.prototype.$b=function(u,o,r){if(typeof u=="number")this.B()?(this.v=u,this.G=o,this.Xe=r,this.C=u,this.H=o,this.Dg=r):this.Nk(u,o,r);else if(u instanceof h.Od)this.$b(u.x,u.y,u.z);else{if(!(u instanceof v))throw h.i.O();u.B()||(this.$b(u.v,u.G,u.Xe),this.$b(u.C,u.H,u.Dg))}},v.prototype.construct=function(u,o,r){u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa,this.Xe=r.pa,this.Dg=r.wa)},v.prototype.iB=function(u){if(u==null||8>u.length)throw h.i.O();u[0]=new h.Od(this.v,this.G,this.Xe),u[1]=new h.Od(this.v,this.H,this.Xe),u[2]=new h.Od(this.C,this.H,this.Xe),u[3]=new h.Od(this.C,this.G,this.Xe),u[4]=new h.Od(this.v,this.G,this.Dg),u[5]=new h.Od(this.v,this.H,this.Dg),u[6]=new h.Od(this.C,this.H,this.Dg),u[7]=new h.Od(this.C,this.G,this.Dg)},v.prototype.bx=function(u){if(u==null||u.length==0)this.Pa();else{var o=u[0];for(this.L(o.x,o.y,o.z),o=1;o<u.length;o++){var r=u[o];this.Nk(r.x,r.y,r.z)}}},v}();h.JK=k}(q||(q={})),function(h){(function(k){k.Ra=function(){var v=Error();return v.message="Internal Error",v},k.Fe=function(){var v=Error();return v.message="Not Implemented",v},k.Zk=function(){var v=Error();return v.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",v},k.Hb=function(){var v=Error();return v.message="Invalid Call",v},k.O=function(v){var u=Error();return u.message="Illegal Argument Exception",v!==void 0&&(u.message+=": "+v),u},k.hu=function(v){var u=Error();return u.message=v!==void 0?"Runtime Exception: "+v:"Runtime Exception.",u},k.ga=function(v){var u=Error();return u.message="Geometry Exception: "+v,u},k.BK=function(){var v=Error();return v.message="Assert Failed Exception",v},k.de=function(){var v=Error();return v.message="IndexOutOfBoundsException",v},k.RC=function(){var v=Error();return v.message="UserCancelException",v}})(h.i||(h.i={}))}(q||(q={})),function(h){(h=h.dm||(h.dm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(q||(q={})),function(h){var k=function(){function o(r,n){this.Xa=r,this.AH=n,this.GH=-1,this.ul=!1}return o.prototype.re=function(){},o.prototype.next=function(){if(++this.GH==this.AH.I())return null;var r=this.AH.Oa(this.GH);r.scale(this.Xa.fc);var n=new h.Ea;return this.Xa.ny(r,this.ul,n),n},o.prototype.Ma=function(){return 0},o}(),v=function(){function o(r,n,l){this.Xa=r,this.tw=n,this.Zn=!1,this.fo=l,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new h.Ea,this.wk=[]}return o.prototype.re=function(){},o.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var r=h.ba.kg(this.sq);return h.Hg.Ok(r,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}r=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var n=this.wk.length=0,l=new h.h,c=new h.h,p=[0];this.td.Ia()&&8>this.AA;){var f=this.td.ia();if(l.N(f.bc()),c.N(f.xc()),l.scale(this.Xa.fc),c.scale(this.Xa.fc),h.ej.Ou(l,c)?l.x=c.x:h.ej.Mu(l,c)&&(c.x=l.x),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,l,c,this.Xa.LA,this.Xa.at,p,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(f=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,f,f.length-1)),h.ej.Nu(l,c)?(this.sq.Pa(),this.Xa.ny(l,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(p[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}r==null&&(r=new h.Ea).$k(null,0),this.JD(r),n++}if(this.dw[0]=0,0<n){for(p=this.td.xb();0<n;)this.td.ni(),l.N(this.tw.Oa(this.td.xb())),c.N(this.tw.Oa(this.td.kk())),l.scale(this.Xa.fc),c.scale(this.Xa.fc),this.ul&&(h.ej.Ou(l,c)?l.x=c.x:h.ej.Mu(l,c)&&(c.x=l.x)),this.wk.length=0,h.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,c,l,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(r),n--;return l.N(this.tw.Oa(this.td.xb())),l.scale(this.Xa.fc),u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,l,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,r,NaN,NaN),this.td.Wb(p),this.td.ia(),n=h.ua.mj(null,r,!0),h.Hg.Ok(r,n,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),r=h.ba.kg(this.sq),h.Hg.Ok(r,this.Xa.Cq,!0,!0,this.Xa.Vb)},o.prototype.JD=function(r){var n=this.wk[0],l=this.Pj[0]-1.570796326794897,c=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var p=this.fi+1.570796326794897;l=p+3.141592653589793-(this.fi-this.Pj[0])}else l=(p=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var f=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),m=!1;if(Math.abs(l-p)<=.5*this.Xa.co)if(f){var w=r.Oa(r.I()-2);w.scale(this.Xa.fc);var $=new h.ha(0);for(h.kb.Sy(this.Xa.Ub,this.Xa.lc,n.x,n.y,w.x,w.y,$),w=$.u;w<=p;)w+=6.283185307179586;for(;w>p;)w-=6.283185307179586;w<l&&(m=!0)}else m=!0;m?(r.yB(0,r.I()-1),this.ul||((n=new h.h).N(r.Oa(r.I()-1)),n.scale(this.Xa.fc),-3.141592653589793>n.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<n.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),f||(l=.5*(l+p))):(f?((p=new h.h).N(n),p.scale(1/this.Xa.fc),r.xf(0,-1,p)):u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],p,l,this.Xa.co,this.ul,this.uk,r,NaN,NaN),this.AA+=1)}u.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,l,c,this.ul,this.uk,r),this.fi=this.Is[0]},o.prototype.sy=function(r,n){return this.Xa.sy(this.wk,r,this.Pj[0],this.Is[0],this.ul,n)},o.prototype.Ma=function(){return 0},o}(),u=function(){function o(){}return o.buffer=function(r,n,l,c,p,f){if(r==null)throw h.i.O("Geometry::Geodesic_bufferer::buffer");if(r.B())return new h.Ea(r.description);var m=new o;m.Sg=n,m.Kc=h.cb.tc(n);var w=h.cb.xv(m.Kc);if(m.Vb=f,m.Ub=h.cb.gv(m.Kc),m.lc=w*(2-w),m.fc=m.Kc.Id().ci,m.ra=m.Sg.Mn(),m.Cq=m.Kc.Mn(),m.at=m.Cq*m.fc,m.Bq=1.570796326794897/m.fc,m.KY=3.141592653589793/m.fc,m.Ls=6.283185307179586/m.fc,m.LY=m.Ls/6,m.GA=0,m.JY=1.5707963267948966*m.Ub/m.GA,l==4?(m.Ae=2,m.Yv=!0):(m.Ae=l,m.Yv=!1),m.La=c,m.sb=Math.abs(c),isNaN(p)||.001>p?m.tX():m.bo=p,l=r.K(),h.ba.zd(l)?((l=new h.Ua(r.description)).pc(r,!0),r=l,l=1607):l==197&&(l=new h.l,r.A(l),l.S()<=m.ra||l.da()<=m.ra?((l=new h.Ua(r.description)).bd(r,!1),r=l,l=1607):((l=new h.Ea(r.description)).bd(r,!1),r=l,l=1736)),m.uX(),h.ba.Tn(l)||m.vX(),m.sb<=.5*m.bo)return l!=1736?new h.Ea(r.description):m.Yv?r:h.ej.Sr(r,m.Sg,m.Ae,m.LA,-1,f);if(0>m.La&&l!=1736)return new h.Ea(r.description);if(m.Yv&&h.ba.Ic(l)?(n=h.ej.Sr(r,n,4,NaN,m.bo,f),r=h.cb.Bh(n,m.Sg,m.Kc)):r=h.cb.Bh(r,m.Sg,m.Kc),(r=h.Jh.nj(r,m.Kc)).B())return new h.Ea(r.description);switch(!m.Yv&&h.ba.Ic(l)&&(r=h.ej.kI(m.fc,r)),r=o.GX(r,m.Kc),l){case 1736:n=m.PN(r);break;case 1607:n=m.QN(r);break;case 550:n=m.NN(r);break;case 33:n=m.ON(r);break;default:throw h.i.ga("corrupted_geometry")}return(m=h.cb.Bh(n,m.Kc,m.Sg)).Ll(r.description),m},o.prototype.PN=function(r){var n=new h.Ea;r=new v(this,r,n),r=h.Ih.local().W(r,this.Kc,this.Vb).next(),r=h.kp.pj(r,this.Kc,2);var l=new h.Ed;return l.scale(1/this.fc,1/this.fc),n.Pc(l),n=h.kp.pj(n,this.Kc,2),0<=this.La?h.Ih.local().W(n,r,this.Kc,this.Vb):h.mp.local().W(n,r,this.Kc,this.Vb)},o.prototype.QN=function(r){return r=new v(this,r,null),r=h.Ih.local().W(r,this.Kc,this.Vb).next(),h.kp.pj(r,this.Kc,2)},o.prototype.NN=function(r){return r=new k(this,r),r=h.Ih.local().W(r,this.Kc,this.Vb).next(),h.kp.pj(r,this.Kc,2)},o.prototype.ON=function(r){(r=r.D()).scale(this.fc);var n=new h.Ea;return this.ny(r,!1,n),h.kp.pj(n,this.Kc,2)},o.prototype.sy=function(r,n,l,c,p,f){var m=r[0],w=r[r.length-1],$=m.y>w.y?m.y:w.y,T=h.F.q(this.Ub,this.lc,m.y<w.y?m.y:w.y);if($=h.F.q(this.Ub,this.lc,$),.001<this.GA-(T+n+this.sb)&&.001<this.GA+($-n-this.sb))return!1;T=(n=l-1.570796326794897)-3.141592653589793,$=n+3.141592653589793;var E=(l=c+1.570796326794897)+3.141592653589793,O=[NaN],P=[NaN],L=[NaN],F=[NaN];if(c=!1,o.ZI(this.Ub,this.lc,this.sb,m,n,T,w,l,O,P),o.ZI(this.Ub,this.lc,this.sb,w,E,l,m,T,L,F),(l<O[0]&&O[0]<E||l<P[0]&&P[0]<E)&&(c=!0),c||(T<L[0]&&L[0]<n||T<F[0]&&F[0]<n)&&(c=!0),!c&&p)return!1;for(var z=[],R=r.length-1;0<=R;R--)z.push(r[R]);return f.Pa(),f.$k(null,0),R=[0],o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,r,n,l,p,R,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,w,l,E,this.co,p,R,f,O[0],P[0]),o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,z,E,$,p,R,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,m,T,n,this.co,p,R,f,L[0],F[0]),r=!1,p||(r=this.DE(this.fc,f)),c||r},o.prototype.ny=function(r,n,l){l.Pa(),l.$k(null,0),o.Jr(this.Ub,this.lc,this.fc,this.sb,r,-this.co,6.283185307179586,this.co,n,[0],l,NaN,NaN),n||this.DE(this.fc,l)},o.prototype.DE=function(r,n){var l=this.qO(r,n);return r=this.rO(r,n),l||r},o.prototype.qO=function(r,n){var l=n.I(),c=!1,p=new h.l;if(n.A(p),!h.s.$(p.H*r,1.570796326794897)&&!h.s.$(p.G*r,-1.570796326794897))return!1;var f=new h.h;for(--l;0<=l;l--)n.D(l,f),(f.y==p.H&&h.s.$(f.y*r,1.570796326794897)||f.y==p.G&&h.s.$(f.y*r,-1.570796326794897))&&(c=!0,this.JI(f,l,n));return c},o.prototype.rO=function(r,n){var l=n.Oa(0),c=n.Oa(n.I()-1);return 3.141592653589793<Math.abs(l.x-c.x)*r?(this.QV(n),!0):this.pO(n)},o.prototype.pO=function(r){return 0>r.He()&&(this.PV(r),!0)},o.prototype.JI=function(r,n,l){var c=l.I(),p=0<n?n-1:c-1;if(c=l.Oa(n<c-1?n+1:0),p=l.Oa(p),!h.s.$(c.y,r.y)&&!h.s.$(c.x,r.x)){var f=new h.h;f.na(c.x,r.y),l.Db(n,f)}h.s.$(p.y,r.y)||h.s.$(p.x,r.x)||((c=new h.h).na(p.x,r.y),l.xf(0,n,c))},o.prototype.QV=function(r){var n=new h.Ea,l=new h.Ea,c=new h.Ed,p=r.Oa(0),f=r.Oa(r.I()-1),m=new h.h;p.x>f.x?(f=this.Bq,c.ig(-this.Ls,0)):(f=-this.Bq,c.ig(this.Ls,0)),n.add(r,!1),r.Pa(),l.add(n,!1),l.Pc(c),p=new h.l,l.A(p),p.X((this.Ls-p.S())/2,0),p.G=-this.Bq,p.H=this.Bq;for(var w=0;w<l.I();w++)l.D(w,m),n.xf(0,-1,m);for(l.Pc(c),w=0;w<l.I();w++)l.D(w,m),n.xf(0,-1,m);l=n.Oa(0),c=n.Oa(n.I()-1),m.na(c.x,f),n.xf(0,-1,m),m.na(.5*(c.x+l.x),f),n.xf(0,-1,m),m.na(l.x,f),n.xf(0,-1,m),n=h.Jh.ms(n,this.Kc,2,!0,p.v),n=h.Jh.ms(n,this.Kc,2,!0,p.C),n=h.Vd.clip(n,p,this.Cq,NaN),r.add(n,!1)},o.prototype.PV=function(r){var n=new h.l;r.A(n),n.X((this.Ls-n.S())/2,0),n.G=-this.Bq,n.H=this.Bq,r.$k(null,0);var l=new h.h;l.na(n.v,n.G),r.xf(1,-1,l),l.na(n.v,n.H),r.xf(1,-1,l),l.na(.5*(n.v+n.C),n.H),r.xf(1,-1,l),l.na(n.C,n.H),r.xf(1,-1,l),l.na(n.C,n.G),r.xf(1,-1,l),l.na(.5*(n.v+n.C),n.G),r.xf(1,-1,l)},o.my=function(r,n,l,c,p,f,m,w,$,T,E){var O=null;$||((O=new h.h).Sc(),0<E.I()&&(O.N(E.Oa(E.I()-1)),O.scale(l)));var P=new h.ha(0),L=new h.ha(0),F=new h.ha(0),z=new h.h,R=new h.h,G=f[f.length-1];l=1/l;for(var H=0;H<f.length;H++){var B=f[H];if(H==0)var te=m;else H==f.length-1?te=w:(h.kb.xd(r,n,G.x,G.y,B.x,B.y,null,null,P,p),te=P.u-1.570796326794897);h.kb.Ai(r,n,B.x,B.y,c,te,L,F),$?R.na(L.u,F.u):(z.na(L.u,F.u),o.bJ(B.x,z.x,O.x,T),R.na(T[0]+z.x,z.y),O.N(R)),R.scale(l),E.xf(0,-1,R)}},o.Jr=function(r,n,l,c,p,f,m,w,$,T,E,O,P){if(!(m-f<w)){var L=new h.ha(0),F=new h.ha(0),z=new h.h,R=new h.h,G=null;$||((G=new h.h).Sc(),0<E.I()&&(G.N(E.Oa(E.I()-1)),G.scale(l)));var H=h.P.truncate(Math.ceil(f/w)),B=H++*w;for(B==f&&(B=H++*w),l=1/l;B<m+w&&(f<O&&O<B?(B=O,H--):f<P&&P<B&&(B=P,H--),!(B>=m));)h.kb.Ai(r,n,p.x,p.y,c,B,L,F),$?R.na(L.u,F.u):(z.na(L.u,F.u),o.bJ(p.x,z.x,G.x,T),R.na(T[0]+z.x,z.y),G.N(R)),R.scale(l),E.xf(0,-1,R),f=B,B=H++*w}},o.ZI=function(r,n,l,c,p,f,m,w,$,T){var E=new h.h,O=new h.h,P=new h.ha(0),L=new h.ha(0);for(h.kb.Ai(r,n,c.x,c.y,l,p,P,L),E.na(P.u,L.u),h.kb.Ai(r,n,c.x,c.y,l,f,P,L),O.na(P.u,L.u),l=new h.ha(0),h.kb.Sy(r,n,m.x,m.y,E.x,E.y,l),$[0]=l.u,h.kb.Sy(r,n,m.x,m.y,O.x,O.y,l),T[0]=l.u;$[0]<=T[0];)$[0]+=6.283185307179586;for(;$[0]>T[0];)$[0]-=6.283185307179586;for(;$[0]>=w;)$[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;$[0]<w;)$[0]+=6.283185307179586,T[0]+=6.283185307179586},o.bJ=function(r,n,l,c){if(isNaN(l)){for(;3.141592653589793<c[0]+n-r;)c[0]-=6.283185307179586;for(;3.141592653589793<r-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-l?c[0]-=6.283185307179586:3.141592653589793<l-(c[0]+n)&&(c[0]+=6.283185307179586)},o.GX=function(r,n){var l=r.K(),c=h.ba.Ic(l)?r.ea():l==550?r.I():1;if(c==1)return r;var p=new h.ja(0);p.resize(c);for(var f=[],m=new h.l,w=0;w<c;w++){if(p.write(w,w),h.ba.Ic(l)){r.Tj(w,m);var $=m.tf()}else $=r.Oa(w);$=h.SK.WX(n,$),f[w]=$}for(p.Wd(0,p.size,function(T,E){return f[T]<f[E]?-1:f[T]>f[E]?1:0}),n=r.Ja(),w=0;w<c;w++)m=p.read(w),h.ba.Ic(l)?n.addPath(r,m,!0):n.Gd(r,m,m+1);return n},o.prototype.uX=function(){var r=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);r=Math.min(r,.39269908169872414*this.Ub);var n=new h.h;n.na(0,10*this.fc);var l=45*this.fc,c=new h.ha(0),p=new h.ha(0),f=new h.ha(0),m=new h.ha(0),w=new h.ha(0),$=new h.ha(0),T=new h.ha(0),E=new h.ha(0),O=new h.h,P=new h.h,L=new h.h,F=new h.h;h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,0,c,p),O.na(c.u,p.u),h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,l,f,m),P.na(f.u,m.u),c=new h.ha(0),p=new h.ha(0);for(var z=new h.ha(0);h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,.5*(0+l),w,$),L.na(w.u,$.u),h.kb.xd(this.Ub,this.lc,O.x,O.y,P.x,P.y,c,p,null,2),h.kb.qj(this.Ub,this.lc,O.x,O.y,.5*c.u,p.u,T,E,2),F.na(T.u,E.u),h.kb.xd(this.Ub,this.lc,L.x,L.y,F.x,F.y,z,null,null,2),!(z.u<=this.bo);)l*=.9,h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,l,f,m),P.na(f.u,m.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},o.prototype.vX=function(){var r=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);r=Math.min(r,.39269908169872414*this.Ub);var n=new h.h,l=new h.h;n.na(0,10*this.fc),l.na(10*this.fc,10*this.fc);var c=new h.ha(0),p=new h.ha(0),f=new h.ha(0);h.kb.xd(this.Ub,this.lc,n.x,n.y,l.x,l.y,f,c,p,this.Ae);var m=new h.ha(0),w=new h.ha(0),$=new h.ha(0),T=new h.ha(0),E=new h.h,O=new h.ha(0),P=new h.ha(0),L=new h.ha(0),F=new h.ha(0),z=new h.ha(0),R=new h.ha(0),G=new h.ha(0),H=new h.ha(0),B=new h.ha(0),te=new h.h,Q=new h.h,ne=new h.h,pe=new h.h,he=1;c=c.u,p=p.u+1.570796326794897,f=f.u,h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,c-1.570796326794897,P,L),te.na(P.u,L.u),h.kb.Ai(this.Ub,this.lc,l.x,l.y,r,p,F,z),Q.na(F.u,z.u),P=new h.ha(0),L=new h.ha(0),p=new h.ha(0);for(var Ie=new h.ha(0);h.kb.qj(this.Ub,this.lc,n.x,n.y,.5*(0+he)*f,c,m,w,this.Ae),E.na(m.u,w.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,E.x,E.y,null,null,O,this.Ae),h.kb.Ai(this.Ub,this.lc,E.x,E.y,r,O.u+1.570796326794897,R,G),ne.na(R.u,G.u),h.kb.xd(this.Ub,this.lc,te.x,te.y,Q.x,Q.y,P,L,null,2),h.kb.qj(this.Ub,this.lc,te.x,te.y,.5*P.u,L.u,H,B,2),pe.na(H.u,B.u),h.kb.xd(this.Ub,this.lc,ne.x,ne.y,pe.x,pe.y,p,null,null,2),!(p.u<=this.bo);)he*=.9,h.kb.qj(this.Ub,this.lc,n.x,n.y,he*f,c,$,T,this.Ae),l.na($.u,T.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,l.x,l.y,null,null,Ie,this.Ae),h.kb.Ai(this.Ub,this.lc,l.x,l.y,r,Ie.u+1.570796326794897,F,z),Q.na(F.u,z.u);1e5<(r=he*f)&&(r=1e5),this.LA=r},o.prototype.tX=function(){var r=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/r&&(r=this.sb/500),.01>r&&(r=.01),this.bo=r},o}();h.QK=u}(q||(q={})),function(h){var k=function(){function v(){}return v.Of=function(u,o){var r=new h.h;r.N(o),u.push(r)},v.wp=function(u,o){u.add(o.x),u.add(o.y)},v.cB=function(u){u.Dh(u.size-2)},v.jB=function(u,o){o.na(u.get(u.size-2),u.get(u.size-1))},v.Sr=function(u,o,r,n,l,c){if(u==null)throw h.i.O();var p=u.K();if(u.B()||h.ba.Tn(p))return u;var f=new v;f.Sg=o,f.Kc=h.cb.tc(o);var m=h.cb.xv(f.Kc);if(f.Vb=c,f.Ub=h.cb.gv(f.Kc),f.lc=m*(2-m),f.fc=f.Kc.Id().ci,f.Cq=f.Kc.Mn(),f.at=f.Cq*f.fc,f.vA=n,f.uA=l,f.Ae=r,p==197?(r=new h.Ea(u.description)).bd(u,!1):h.ba.zd(p)?(r=new h.Ua(u.description)).pc(u,!0):r=u,f.Ae!=4){if((o=f.Sg.Nb(f.Kc)==0?h.cb.Bh(r,f.Sg,f.Kc):h.Jh.nj(r,f.Kc)).B())return o;o=v.kI(f.fc,o),o=f.Uy(o),o=h.kp.pj(o,f.Kc,f.Ae),f=h.cb.Bh(o,f.Kc,f.Sg)}else{if(h.Gg.Tb(o)==2?(u=h.cb.ol(),(o=h.Zj.local().W(r,u,o,c))==u&&(o=new h.Ea,u.copyTo(o))):o=h.Jh.nj(r,f.Kc),o.B())return o;f=f.yX(o)}return f},v.kI=function(u,o){var r=new h.l;if(o.yc(r),3.141592653589793>r.S()*u)return o;var n=!1;r=o.Ha();for(var l=new h.h,c=new h.h;r.ab();)for(;r.Ia();){var p=r.ia();if(l.N(p.bc()),c.N(p.xc()),l.scale(u),c.scale(u),3.141592653589793<Math.abs(l.x-c.x)){var f=v.Nu(l,c);if(!f){n=!0;break}if(6.283185307179586<Math.abs(l.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ja();var m=1<o.description.Ba,w=new h.h,$=new h.h,T=new h.h,E=new h.h,O=new h.Ta;for(r.aj();r.ab();)for(var P=NaN,L=[0];r.Ia();){if(p=r.ia(),l.N(p.bc()),c.N(p.xc()),l.scale(u),c.scale(u),isNaN(P)?(v.Yi(l.x,NaN,L),$.N(l)):$.N(T),P=$.x,f=v.Nu(l,c)){if(6.283185307179586<c.x-l.x)for(;6.283185307179586<c.x-l.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-l.x)for(;-6.283185307179586>c.x-l.x;)c.x+=6.283185307179586;v.Yi(c.x,NaN,L),T.N(c)}else w.N(c),v.vU(w),v.Yi(w.x,P,L),T.na(L[0]+w.x,w.y);.5>Math.abs(T.x-c.x)&&T.N(c),m?(p.Vw(0,O),E.N($),E.scale(1/u),O.Db(E),(f=r.xm())?n.nf(O):n.lineTo(O),r.Sn()&&!o.ec(r.gb)&&(p.Vw(1,O),E.N(T),E.scale(1/u),O.Db(E),n.lineTo(O))):((f=r.xm())&&n.Cz(null,0),p=n.ea()-1,E.N($),E.scale(1/u),n.xf(p,-1,E),r.Sn()&&!o.ec(r.gb)&&(E.N(T),E.scale(1/u),n.xf(p,-1,E)))}return n},v.oF=function(u,o,r,n,l,c,p,f,m,w,$,T){var E=new h.h,O=new h.h,P=0<n.compare(l);v.aJ(P,n,l,E,O),v.pF(u,o,r,E,O,c,NaN,p,f,m,w,null,$,T),P&&v.aC(m,w,null,$)},v.prototype.Uy=function(u){var o=u.Ja(),r=u.Ha(),n=[],l=null,c=null,p=1<u.description.Ba;p&&(l=new h.ce(0),c=new h.jg);for(var f=[0],m=new h.h,w=new h.h,$=new h.h,T=new h.h;r.ab();)for(f[0]=0;r.Ia();){var E=r.ia();m.N(E.bc()),w.N(E.xc()),m.scale(this.fc),w.scale(this.fc);var O=0<m.compare(w);v.aJ(O,m,w,$,T),n.length=0,l!=null&&l.Dh(0),0<this.vA?v.pF(this.Ub,this.lc,this.Ae,$,T,this.vA,this.uA,this.at,null,null,null,p?l:null,n,f):v.WQ(this.Ub,this.lc,this.Ae,$,T,this.uA,this.at,p?l:null,n,f),O&&v.aC(null,null,p?l:null,n),n[0].N(E.bc()),n[n.length-1].N(E.xc());for(var P=1;P<n.length-1;P++)n[P].scale(1/this.fc);p?(O=v.$I(O,E,c),v.OD(r.xm(),r.Sn()&&!u.ec(r.gb),E,O,l,n,o)):v.ND(r.xm(),r.Sn()&&!u.ec(r.gb),n,o)}return o},v.prototype.yX=function(u){var o=u.Ja(),r=u.Ha(),n=[],l=null,c=new h.jg,p=1<u.description.Ba;for(p&&(l=new h.ce(0));r.ab();)for(;r.Ia();){var f=r.ia(),m=f.bc(),w=f.xc();m=0<m.compare(w),w=v.$I(m,f,c),n.length=0,l!=null&&l.Dh(0),v.xX(this.Ub,this.lc,this.fc,w,this.Sg,this.vA,this.uA,p?l:null,n),m&&v.aC(null,null,p?l:null,n),p?v.OD(r.xm(),r.Sn()&&!u.ec(r.gb),f,w,l,n,o):v.ND(r.xm(),r.Sn()&&!u.ec(r.gb),n,o)}return o},v.ND=function(u,o,r,n){u&&n.Cz(null,0),u=n.ea()-1;var l=r.slice(0);n.lG(u,l,l.length-1),o&&n.xf(u,-1,r[r.length-1])},v.OD=function(u,o,r,n,l,c,p){var f=new h.Ta;if(r.Vo(f),u?p.nf(f):p.lineTo(f),2<c.length){u=n.Rb();for(var m=1;m<c.length-1;m++){var w=n.IG(l.get(m)*u);n.Vw(w,f),f.Db(c[m]),p.lineTo(f)}}o&&(r.Ro(f),p.lineTo(f))},v.pF=function(u,o,r,n,l,c,p,f,m,w,$,T,E,O){var P=new h.ha(0),L=new h.ha(0),F=new h.ha(0);h.kb.xd(u,o,n.x,n.y,l.x,l.y,F,P,L,r),F=F.u;var z=P=P.u;0>z&&(z+=6.283185307179586),0>(L=L.u)&&(L+=6.283185307179586),m!=null&&(m[0]=F),w!=null&&(w[0]=z),$!=null&&($[0]=L),w=m=NaN,T!=null&&(m=((w=h.F.Ch(u,o))-($=h.F.q(u,o,n.y)))/F,w=(w+$)/F),$=v.Ou(n,l),L=v.Mu(n,l),z=$||L;var R=v.AE(n,l,f),G=new h.ha(0),H=new h.ha(0),B=new h.h,te=new h.h,Q=new h.h;v.Yi(n.x,NaN,O);var ne=[O[0]];if(F<=c)v.Of(E,n),v.Yi(l.x,NaN,O),T!=null&&T.add(0),z?($&&v.fB(n,l,T,E),L&&v.dB(n,l,T,E)):R?v.eB(n,l,P,m,w,T,E):0<p&&(te.na(n.x-ne[0],n.y),B.na(l.x-O[0],l.y),v.Ty(u,o,r,n,F,P,te,B,0,1,p,T,E,ne)),v.Of(E,l);else{var pe=F/((c=1+h.P.truncate(Math.ceil(F/c)))-1),he=new h.h,Ie=0;v.Of(E,n),he.N(n),te.na(n.x-O[0],n.y),T!=null&&T.add(0);for(var ge=1;ge<c;ge++){if(ge<c-1){h.kb.qj(u,o,n.x,n.y,ge*pe,P,G,H,r),B.na(G.u,H.u),v.Yi(B.x,he.x,O),Q.na(O[0]+B.x,B.y);var He=ge/(c-1)}else v.Yi(l.x,NaN,O),B.na(l.x-O[0],l.y),Q.N(l),He=1;z?(ge==1&&$&&v.fB(n,Q,T,E),ge==c-1&&L&&v.dB(he,l,T,E)):R?v.zE(he,Q,f)&&(n.x<l.x?he.x>Q.x&&(O[0]+=6.283185307179586,Q.na(O[0]+B.x,B.y)):he.x<Q.x&&(O[0]-=6.283185307179586,Q.na(O[0]+B.x,B.y)),v.eB(he,Q,P,m,w,T,E)):0<p&&v.Ty(u,o,r,n,F,P,te,B,Ie,He,p,T,E,ne),v.Of(E,Q),T!=null&&T.add(He),he.N(Q),te.N(B),ne[0]=O[0],Ie=He}}},v.WQ=function(u,o,r,n,l,c,p,f,m,w){var $=new h.ha(0),T=new h.ha(0),E=new h.ha(0);h.kb.xd(u,o,n.x,n.y,l.x,l.y,E,$,T,r),T=E.u,$=$.u;var O=E=NaN;if(f!=null){O=h.F.Ch(u,o);var P=h.F.q(u,o,n.y);E=(O-P)/T,O=(O+P)/T}P=v.Ou(n,l);var L=v.Mu(n,l),F=P||L;p=v.AE(n,l,p);var z=v.Nu(n,l);z=F||p||z,v.Yi(n.x,NaN,w);var R=new h.h;v.Of(m,n),R.N(n),f!=null&&f.add(0),z?(F?(P&&v.fB(n,l,f,m),L&&v.dB(n,l,f,m)):p&&v.eB(n,l,$,E,O,f,m),v.Yi(l.x,NaN,w),v.Of(m,l)):T<=c?(v.Yi(l.x,NaN,w),v.Of(m,l)):(E=new h.h,p=new h.h,E.N(n),p.N(l),E.x-=w[0],p.x-=w[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),v.Ty(u,o,r,n,T,$,E,p,0,1,c,f,m,w),v.Of(m,l),v.Yi(l.x,NaN,w)),f!=null&&f.add(1)},v.Ty=function(u,o,r,n,l,c,p,f,m,w,$,T,E,O){var P=new h.h,L=new h.h;P.na(p.x+O[0],p.y),new h.ha(0),new h.ha(0),new h.ha(0),new h.ha(0);var F=new h.ha(0),z=new h.ha(0),R=new h.ha(0),G=new h.h,H=new h.h,B=new h.h,te=new h.h;G.N(p),H.N(f),p=new h.ce(0),f=new h.ce(0),v.wp(p,H),f.add(w);var Q=new h.h,ne=new h.zb,pe=[];for(v.TJ(4,pe);0<p.size;){for(var he,Ie=!1,ge=NaN,He=0;3>He;He++)if(he=pe[He]*w+(1-pe[He])*m,h.kb.qj(u,o,n.x,n.y,he*l,c,F,z,r),B.na(F.u,z.u),He==0&&(ge=he,te.N(B)),v.RW(G,B,H,ne),ne.ic(ne.ge(B,!0),Q),h.kb.xd(u,o,B.x,B.y,Q.x,Q.y,R,null,null,2),R.u>$){Ie=!0;break}Ie?(H.N(te),w=ge,v.wp(p,H),f.add(w)):(v.cB(p),f.Gn(f.size-1,1,f.size-1),0<p.size&&(v.Yi(H.x,P.x,O),L.na(O[0]+H.x,H.y),v.Of(E,L),P.N(L),T!=null&&T.add(w),G.N(H),m=w,v.jB(p,H),w=f.get(f.size-1)))}},v.xX=function(u,o,r,n,l,c,p,f,m){var w=new h.h,$=new h.h,T=new h.h,E=new h.h,O=new h.h,P=new h.h,L=new h.h,F=new h.h,z=new h.h,R=new h.h,G=new h.ha(0),H=new h.ha(0),B=new h.h,te=[[],[]],Q=h.Gg.Tb(l)==1;l=l.Yd(0);var ne=n.bc(),pe=n.xc();Q?(P.na(ne.x*r,ne.y*r),L.na(pe.x*r,pe.y*r)):(te[0][0]=ne.x,te[0][1]=ne.y,te[1][0]=pe.x,te[1][1]=pe.y,h.cb.wt(),P.x=te[0][0]*r,P.y=te[0][1]*r,L.x=te[1][0]*r,L.y=te[1][1]*r);var he=0,Ie=0,ge=1,He=n.Rn();w.N(ne),$.N(pe),pe=new h.ce(0);var Fe=new h.ce(0),xe=new h.ce(0);v.wp(pe,$),v.wp(Fe,L),xe.add(ge),v.Of(m,w),f!=null&&f.add(Ie);var zt=[],vi=0<p?He?5:3:He?5:1;v.TJ(vi,zt);for(var Gt=new h.ha(0),yt=new h.ha(0),gt=new h.ha(0),it=new h.ha(0),Ht=new h.ha(0),tt=new h.ha(0),Hr=new h.ha(0);0<Fe.size;){var ct=!1,tr=NaN;for(h.kb.xd(u,o,P.x,P.y,L.x,L.y,Gt,yt,null,2),ne=0;ne<vi&&!(ne==0&&(!He&&0>=p&&Gt.u<=c&&3.141592653589793>Math.abs(P.x-L.x)||n.Tx(Ie,ge)<=l));ne++){var $t=zt[ne]*ge+(1-zt[ne])*Ie;if(n.ic($t,T),Q?F.na(T.x*r,T.y*r):(te[0][0]=T.x,te[0][1]=T.y,h.cb.wt(),F.x=te[0][0]*r,F.y=te[0][1]*r),ne==0&&(tr=$t,O.N(T),R.N(F),0<c&&(Gt.u>c||3.141592653589793<=Math.abs(P.x-L.x)))){ct=!0;break}if(He&&0<c){if(h.kb.xd(u,o,P.x,P.y,F.x,F.y,gt,null,null,2),gt.u>c||3.141592653589793<=Math.abs(P.x-F.x)){ct=!0;break}}else if(0<p){if(He?(E.IS(w,$,zt[ne]),Q?z.na(E.x*r,E.y*r):(te[0][0]=E.x,te[0][1]=E.y,h.cb.wt(),z.x=te[0][0]*r,z.y=te[0][1]*r)):(E.N(T),z.N(F)),h.kb.xd(u,o,P.x,P.y,z.x,z.y,it,null,null,2),!(it.u<=Gt.u)){ct=!0;break}if(h.kb.qj(u,o,P.x,P.y,it.u,yt.u,G,H,2),B.na(G.u,H.u),h.kb.xd(u,o,B.x,B.y,F.x,F.y,Ht,null,null,2),Ht.u>p){ct=!0;break}if(He){if(h.kb.xd(u,o,B.x,B.y,z.x,z.y,tt,null,null,2),tt.u>p){ct=!0;break}if(h.kb.xd(u,o,z.x,z.y,F.x,F.y,Hr,null,null,2),Hr.u>p){ct=!0;break}}}}ct?($.N(O),L.N(R),ge=tr,v.wp(pe,$),v.wp(Fe,L),xe.add(ge)):(v.cB(pe),v.cB(Fe),xe.Gn(xe.size-1,1,xe.size-1),v.Of(m,$),he+=Gt.u,f!=null&&f.add(he),0<Fe.size&&(w.N($),P.N(L),Ie=ge,v.jB(pe,$),v.jB(Fe,L),ge=xe.get(xe.size-1)))}if(f!=null)for(u=1/he,ne=0;ne<f.size;ne++)f.write(ne,f.read(ne)*u)},v.aC=function(u,o,r,n){n.reverse(),r!=null&&r.pi(0,r.size,1),r=u!=null?u[0]:NaN,n=o!=null?o[0]:NaN,u!=null&&(u[0]=n),o!=null&&(o[0]=r)},v.aJ=function(u,o,r,n,l){u?(n.N(r),l.N(o)):(n.N(o),l.N(r))},v.$I=function(u,o,r){return u?(r.create(o.K()),o.copyTo(r.get()),r.get().reverse(),r.get()):o},v.Yi=function(u,o,r){if(isNaN(o)){for(;3.141592653589793<r[0]-u;)r[0]-=6.283185307179586;for(;3.141592653589793<u-r[0];)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+u-o?r[0]-=6.283185307179586:3.141592653589793<o-(r[0]+u)&&(r[0]+=6.283185307179586)},v.RW=function(u,o,r,n){3.141592653589793>Math.abs(o.x-u.x)?(n.Ec(u),3.141592653589793<=r.x-u.x?n.Sl(r.x-6.283185307179586,r.y):3.141592653589793<=u.x-r.x?n.Sl(r.x+6.283185307179586,r.y):n.Sl(r.x,r.y)):(n.Ec(r),3.141592653589793<=u.x-r.x?n.Sl(u.x-6.283185307179586,u.y):3.141592653589793<=r.x-u.x?n.Sl(u.x+6.283185307179586,u.y):n.Sl(u.x,u.y))},v.TJ=function(u,o){for(var r=0;r<u;r++){var n=Math.ceil(r/2)/(u+1);r%2!=0&&(n=-n),o[r]=.5+n}},v.Ou=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&!h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&!h.s.$(o.y,-1.570796326794897))},v.Mu=function(u,o){return!!(h.s.$(o.y,1.570796326794897)&&!h.s.$(u.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897)&&!h.s.$(u.y,-1.570796326794897))},v.AE=function(u,o,r){return!(!v.zE(u,o,r)||h.s.$(u.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)||h.s.$(o.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897))},v.zE=function(u,o,r){return Math.abs(Math.abs(u.x-o.x)-3.141592653589793)<=r},v.Nu=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&h.s.$(o.y,-1.570796326794897))},v.fB=function(u,o,r,n){if(0<u.y){var l=new h.h;l.na(o.x,1.570796326794897)}else(l=new h.h).na(o.x,-1.570796326794897);h.s.$(u.x,l.x)||h.s.$(o.y,l.y)||(v.Of(n,l),r!=null&&r.add(0))},v.dB=function(u,o,r,n){if(0<o.y){var l=new h.h;l.na(u.x,1.570796326794897)}else(l=new h.h).na(u.x,-1.570796326794897);h.s.$(o.x,l.x)||h.s.$(u.y,l.y)||(v.Of(n,l),r!=null&&r.add(1))},v.eB=function(u,o,r,n,l,c,p){h.s.Dd(r)?(0<1.570796326794897-u.y&&((r=new h.h).na(u.x,1.570796326794897),v.Of(p,r),c!=null&&c.add(n)),0<1.570796326794897-o.y&&((r=new h.h).na(o.x,1.570796326794897),v.Of(p,r),c!=null&&c.add(n))):(0<1.570796326794897+u.y&&((r=new h.h).na(u.x,-1.570796326794897),v.Of(p,r),c!=null&&c.add(l)),0<1.570796326794897+o.y&&((r=new h.h).na(o.x,-1.570796326794897),v.Of(p,r),c!=null&&c.add(l)))},v.vU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},v}();h.ej=k}(q||(q={})),function(h){h.kp=function(){function k(){}return k.pj=function(v,u,o){if(v==null||u==null||!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var r=v,n=r.K();if(h.ba.Ic(n)){r=h.Jh.nj(v,u),v=new h.l,r.A(v),n=h.ua.Xd(u,v,!1);for(var l=h.cb.ih(u),c=Math.floor((v.v-l.v)/l.S())*l.S()+l.v;c<v.C;)c>v.v+n&&c<v.C-n&&(r=h.Jh.ms(r,u,o,!0,c)),c+=l.S()}else{if(n==197)return(v=new h.Ea(r.description)).bd(r,!1),k.pj(v,u,o);if(h.ba.zd(n))return(v=new h.Ua(r.description)).pc(r,!0),k.pj(v,u,o)}return k.Py(r,u)},k.Py=function(v,u){if(v==null||u==null||!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var o=v.K();return o==197?(o=new h.Ea(v.description)).bd(v,!1):h.ba.zd(o)?(o=new h.Ua(v.description)).pc(v,!0):o=v,(o=h.Jh.nj(o,u)).B()?o:h.Gg.Tb(u)==1?h.Jh.Hn(o,u,0,o!=v,0):k.IQ(o,u,o!=v)},k.IQ=function(v,u,o){if(!h.cb.Xc(u))throw h.i.O();if(v.B())return v;var r=h.cb.bf(u),n=-180*r;return r*=360,h.Gg.Tb(u)==2&&(r=(n=h.cb.ih(u)).C,r-=n=n.v),h.Jh.Jp(v,n,r,u,o,0,!0)},k}()}(q||(q={})),function(h){h.xY=function(){function k(){}return k.R=function(v){return 0>v?-v:v},k.Mb=function(v,u){return 0<=u?k.R(v):-k.R(v)},k.$=function(v,u){return v==u||k.R(v-u)<=k.EC*(1+(k.R(v)+k.R(u))/2)},k.Dd=function(v){return v==0||k.R(v)<=k.EC},k.Ch=function(v,u){var o=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return v/(1+u)*(1+o*(.25+o*(.015625+1/256*o)))*k.zL},k.zL=1.5707963267948966,k.EC=3552713678800501e-30,k}()}(q||(q={})),function(h){var k=function(u){this.Yf=u,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};h.zY=k;var v=function(){function u(o){o===void 0&&(o=null),this.Ej=null,this.Wn=!1,o!==null&&(this.Ej=new k(o))}return u.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},u.prototype.Qf=function(){var o=new u;return this.copyTo(o),o},u.prototype.copyTo=function(o){o.Ej=this.Ej,o.Wn=this.Wn},u.prototype.Lz=function(){this.Wn=!this.Wn},u.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},u.prototype.GJ=function(o){if(0>=o)throw h.i.O();if(o!=this.Fc()){if((o=h.qf.geogtran(o))==null)throw h.i.O("Geogtran not found.");this.Ej=new k(o)}},u.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},u.prototype.pX=function(o){if(o==null)throw h.i.O();var r=null;try{r=h.qf.fromString(h.Tc.PE_TYPE_GEOGTRAN,o)}catch{throw h.i.O()}this.Ej=new k(r)},u.prototype.Nb=function(o){return o==this||!(!(o instanceof u)||(0>=this.Fc()||this.Fc()!=o.Fc())&&!this.sm().isEqual(o.sm()))&&this.Wn==o.Wn},u.prototype.toString=function(){var o="GeographicTransformation: "+this.wz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},u.create=function(o,r){var n=new u;return n.GJ(o),r&&n.Lz(),n},u.pP=function(o,r){var n=new u;return n.pX(o),r&&n.Lz(),n},u}();h.Cx=v}(q||(q={})),function(h){var k=function(){function u(){}return u.construct=function(o,r,n,l){var c=new u;return c.jw=o,c.kw=r,c.MY=n,c.NY=l,c},u.zy=function(o,r){return o.jw==r.jw?o.kw==r.kw?0:o.kw<r.kw?-1:1:o.jw<r.jw?-1:1},u}(),v=function(){function u(){this.tT=[],this.uT=[],this.sp()}return u.fz=function(){return u.eK==null&&(u.eK=new u),u.eK},u.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},u.prototype.dD=function(o){try{var r=[];r=r.sort(k.zy);for(var n=0;n<r.length;n++)o.push(r[n])}catch{}},u}();h.yY=v}(q||(q={})),function(h){var k=function(){function v(){}return v.prototype.tD=function(u){this.Hk=u},v.prototype.RM=function(u){this.Gb=u},v.prototype.sD=function(u){this.Bo=u},v.xE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736)},v.vE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},v.wE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},v}();h.Wk=k}(q||(q={})),function(h){h.ac=function(){function k(){}return k.OT=function(v){var u=new h.Ea;return u.rx(v.gs(),v.js()),u.Aj(v.gs(),v.hs()),u.Aj(v.fs(),v.hs()),u.Aj(v.fs(),v.js()),u},k.Bh=function(v,u){return v===null?null:h.Gx.local().W(v,u,null)},k.fY=function(v,u){var o=h.Ih.local();return v=new h.$c(v),o.W(v,u,null).next()},k.km=function(v,u,o){return h.mp.local().W(v,u,o,null)},k.gp=function(v,u,o){return h.Jx.local().W(v,u,o,null)},k.RX=function(v,u,o){var r=h.Jx.local();for(v=new h.$c(v),u=new h.$c(u),o=r.W(v,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},k.Nb=function(v,u,o){return h.fj.local().W(3,v,u,o,null)},k.OP=function(v,u,o){return h.fj.local().W(4,v,u,o,null)},k.MS=function(v,u,o){var r=h.Zj.local();for(v=new h.$c(v),u=new h.$c(u),o=r.W(v,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},k.LP=function(v,u,o){var r=h.mp.local();for(v=new h.$c(v),u=new h.$c(u),o=r.W(v,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},k.Fa=function(v,u,o){return h.Zj.local().W(v,u,o,null)},k.LS=function(v,u,o){if((v=h.Zj.local().W(v,u,o,null,1))===null)return[];if(v.K()===550){for(u=[],o=0;o<v.xa;o++)u.push(v.FR(o));return u}return v.K()===33?[v]:[]},k.mY=function(v,u,o){return h.fj.local().W(2,v,u,o,null)},k.contains=function(v,u,o){return h.fj.local().W(1,v,u,o,null)},k.wP=function(v,u,o){return h.fj.local().W(16,v,u,o,null)},k.touches=function(v,u,o){return h.fj.local().W(8,v,u,o,null)},k.yU=function(v,u,o){return h.fj.local().W(32,v,u,o,null)},k.OS=function(v,u,o){return h.fj.local().W(1073741824,v,u,o,null)},k.tB=function(v,u,o,r){return h.uL.local().W(v,u,o,r,null)},k.ub=function(v,u,o,r){var n=null;if(o!=null){if(n=o.Id(),r!=null&&n.Fc()!=r.Fc()&&n.pd!=r.pd)throw h.i.Zk()}else if(r!=null)throw h.i.O();return v=h.lL.local().W(v,u,null),n!==null&&r!==null&&(v=h.Uc.Ph(v,n,r)),v},k.clip=function(v,u,o){return h.fL.local().W(v,h.l.construct(u.gs(),u.js(),u.fs(),u.hs()),o,null)},k.fl=function(v,u,o){if(v==null||u==null)return null;for(v=h.hL.local().W(!0,v,u,o,null),u=[];(o=v.next())!=null;)o.B()||u.push(o);return u.slice(0)},k.HN=function(v,u,o,r,n,l,c,p){if(n===!0)return k.IN(v,u,o,r,l,c,p);if(n=o,u!=null){if(c=u.Id(),r!=null&&c.Fc()!=r.Fc()){if(c.pd!=r.pd)throw h.i.Zk();n=[],h.Uc.SE(o,o.length,r,c,n)}}else if(r!=null)throw h.i.O();if(o=h.vC.local(),l){for(v=new h.$c(v),u=o.W(v,u,n,l,null),v=[];(l=u.next())!=null;)v.push(l);l=v.slice(0)}else for(l=[],r=0;r<v.length;r++)l[r]=o.W(v[r],u,n[r],null);return l},k.IN=function(v,u,o,r,n,l,c){if(u===null||(r==null&&(r=u.Fc()!==4326?u.Id():h.Uc.ah(9001)),r.pd!==0))throw h.i.O();if(h.Uc.SE(o,o.length,r,h.Uc.ah(9001),o),r=h.AC.local(),n){for(v=new h.$c(v),u=r.W(v,u,l,o,c,!1,n,null),o=[];(l=u.next())!=null;)o.push(l);n=o.slice(0)}else{n=[];for(var p=0;p<v.length;p++)n[p]=r.W(v[p],u,l,o[p],c,!1,null)}return n},k.buffer=function(v,u,o,r,n,l,c){var p=o;if(n===!1){if(u!=null){if(n=u.Id(),r!=null&&n.Fc()!=r.Fc()){if(n.pd!=r.pd)throw h.i.Zk();p=h.Uc.Ph(o,r,n)}}else if(r!=null)throw h.i.O();v=h.vC.local().W(v,u,p,null)}else{if(u===null||(r==null&&(r=u.Fc()!==4326?u.Id():h.Uc.ah(9001)),r.pd!==0))throw h.i.O();p=h.Uc.Ph(o,r,h.Uc.ah(9001)),v=h.AC.local().W(v,u,l,p,c,!1,null)}return v},k.wU=function(v,u,o,r,n,l,c){if(u!=null){var p=u.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.pd!=c.pd)throw h.i.Zk();o=h.Uc.Ph(o,c,p)}}else if(c!=null)throw h.i.O();for(v=new h.$c(v),u=h.DC.local().W(v,u,o,r,n,l,null),o=[];(r=u.next())!=null;)o.push(r);return o.slice(0)},k.offset=function(v,u,o,r,n,l,c){if(u!=null){var p=u.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.pd!=c.pd)throw h.i.Zk();o=h.Uc.Ph(o,c,p)}}else if(c!=null)throw h.i.O();return h.DC.local().W(v,u,o,r,n,l,null)},k.dP=function(v){return h.xC.local().W(v,null)},k.eP=function(v,u){var o=h.xC.local();for(v=new h.$c(v),u=o.W(v,u,null),o=[];(v=u.next())!=null;)o.push(v);return o},k.iz=function(v,u,o){return h.Hx.local().iz(v,u,o)},k.jz=function(v,u){return h.Hx.local().jz(v,u)},k.kz=function(v,u,o,r){return h.Hx.local().kz(v,u,o,r)},k.$B=function(v,u){return h.$l.local().W(v,u,!1,null)},k.ZS=function(v,u){return h.$l.local().ts(v,u,null)},k.LQ=function(v,u,o,r,n){var l=h.zC.local();if(u!=null){if(u=u.Id(),n!=null&&u.Fc()!=n.Fc()){if(u.pd!=n.pd)throw h.i.Zk();o=h.Uc.Ph(o,n,u)}}else if(n!=null)throw h.i.O();return l.W(v,o,r,null)},k.Sr=function(v,u,o,r){var n=h.Zl.local();if(u!=null){if(u=u.Id(),r!=null&&u.Fc()!=r.Fc()){if(u.pd!=r.pd)throw h.i.Zk();o=h.Uc.Ph(o,r,u)}}else if(r!=null)throw h.i.O();return n.W(v,o,null)},k.Ry=function(v,u,o,r,n){n===void 0&&(n=0);var l=h.nL.local();if(n==4||n!==0)throw h.i.Fe();if(r!==null){if(r.pd!==0)throw h.i.O("Unit must be a linear unit type");o=h.Uc.Ph(o,r,h.Uc.ah(9001))}return l.W(v,o,u,n,null)},k.RQ=function(v,u,o,r){if(v===null)return 0;if(r==4||r!==0)throw h.i.Fe();if(v.K()==197)v=k.OT(v);else if(v.K()!=1736)return 0;if(r=h.cb.tc(u),v=h.cb.Bh(v,u,r),v=h.PK.SQ([v])[0],o!==null){if(o.pd!==2)throw h.i.O("Unit must be a area unit type");v=h.Uc.Ph(v,h.Uc.ah(109404),o)}return v},k.UQ=function(v,u,o,r){if(v=h.qL.local().W(v,u,r,null),o!==null){if(o.pd!==0)throw h.i.O("Unit must be a linear unit type");v=h.Uc.Ph(v,h.Uc.ah(9001),o)}return v},k.EU=function(v,u,o){if(v===null)return 0;var r=null;if(u!=null){if((r=u.Id()).pd==0&&(r=h.Uc.WF(r))==null&&o!==null)throw h.i.O();if(o!=null&&r.Fc()!=o.Fc()&&r.pd!=o.pd)throw h.i.Zk()}else if(o!=null)throw h.i.O();return v.K()==1736||v.K()==197?(v=v.He(),o!==null?h.Uc.Ph(v,r,o):v):0},k.FU=function(v,u,o){if(v===null||v.B()||1>v.Eb())return 0;var r=null;if(u!=null){if(r=u.Id(),o!=null&&r.Fc()!=o.Fc()&&r.pd!=o.pd)throw h.i.Zk()}else if(o!=null)throw h.i.O();v.K()==1736||v.K()==197?u=v.ng():h.ba.zd(v.K())?(u=new h.Ua(v.description)).pc(v,!0):u=v,v=0,u=u.Ha();for(var n=new h.h,l=new h.h;u.ab();)for(;u.Ia();){var c=u.ia();c.$p(n),c.Vr(l),v+=h.h.ub(n,l)}return r!==null&&o!==null&&(v=h.Uc.Ph(v,r,o)),v},k.aP=function(v){return v.points!==void 0?k.hS(v,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM):v.rings!==void 0?k.gG(v.rings,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM,"P"):v.paths!==void 0?k.gG(v.paths,v.hasZ!==void 0&&v.hasZ,v.hasM!==void 0&&v.hasM,"L"):v.x!==void 0?k.iS(v):v.xmin!==void 0?k.gS(v):null},k.iS=function(v){if(v.x==null||v.x=="NaN")return new h.Ta;var u=new h.Ta(v.x,v.y);return v.z!==void 0&&v.z!==null&&u.sX(v.z),v.m!==void 0&&v.m!==null&&u.cX(v.m),u},k.gS=function(v){if(v.xmin==null||v.xmin=="NaN")return new h.Hh;var u=new h.Hh(v.xmin,v.ymin,v.xmax,v.ymax);return v.zmin!==void 0&&v.zmin!==null&&u.setInterval(1,0,v.zmin,v.zmax),v.mmin!==void 0&&v.mmin!==null&&u.setInterval(2,0,v.mmin,v.mmax),u},k.hS=function(v,u,o){var r=0,n=new h.ee,l=3*v.points.length;l%2!=0&&l++,2>l&&(l=2);var c=h.P.truncate(3*v.points.length/2);4>c?c=4:16>c&&(c=16),l=h.Zc.Fn(l,0);var p=h.Zc.Fn(c);c=h.Zc.Fn(c);for(var f=0;f<v.points.length;f++)l.write(2*f,v.points[f][0]),l.write(2*f+1,v.points[f][1]),p.write(f,u||o?v.points[f][2]:NaN),c.write(f,o&&u?v.points[f][3]:NaN),r++;return r!=0&&(n.resize(r),n.kn(0,l)),u&&(n.se(1),n.kn(1,p)),o&&(n.se(2),n.kn(2,u==0?p:c)),n.Qc(16777215),n},k.gG=function(v,u,o,r){var n=0,l=2;if(r=="P"){var c=new h.Ea;n=1,l=3}else c=new h.Ua;for(var p=h.Zc.Qh(0),f=h.Zc.Or(0),m=0,w=0,$=[],T=[],E=0;E<v.length;E++){var O=v[E].length;if($[E]=!1,r==="P"&&v[E][0][0]===v[E][v[E].length-1][0]&&v[E][0][1]===v[E][v[E].length-1][1]){var P=o==0||v[E][0][3]===v[E][v[E].length-1][3]||v[E][0][3]===void 0&&v[E][v[E].length-1][3]===void 0;(u==0||v[E][0][2]===v[E][v[E].length-1][2]||v[E][0][2]===void 0&&v[E][v[E].length-1][2]===void 0)&&P&&($[E]=!0,--O)}O>=l?(T[E]=!1,w+=1,p.add(m),f.add(n),m+=O):T[E]=!0}for((r=3*m)%2!=0&&r++,2>r&&(r=2),4>(E=h.P.truncate(3*m/2))?E=4:16>E&&(E=16),r=h.Zc.Fn(r,0),n=h.Zc.Fn(E),l=h.Zc.Fn(E),E=O=0;E<v.length;E++)if(T[E]===!1)for(P=0;P<v[E].length;P++){var L=!1;P===v[E].length-1&&$[E]===!0&&(L=!0),L||(r.write(2*O,v[E][P][0]),r.write(2*O+1,v[E][P][1]),n.write(O,u||o?v[E][P][2]:NaN),l.write(O,o&&u?v[E][P][3]:NaN),O++)}return m!=0&&(v=c,p.resize(w),f.resize(w),0<m&&(p.add(m),f.add(0)),v.kn(0,r),v.KJ(f),v.LJ(p)),u&&(c.se(1),c.kn(1,n)),o&&(c.se(2),c.kn(2,u==0?n:l)),c.Qc(16777215),c},k}()}(q||(q={})),function(h){h.Dx=function(){function k(){}return k.dr=function(v){var u,o=0,r=v.length,n=v[0];for(u=0;u<r-1;u++){var l=v[u+1];o+=(l[0]-n[0])*(l[1]+n[1]),n=l}return 0<=o},k.rotate=function(v,u,o){u=u*Math.PI/180;var r=Math.cos(u),n=Math.sin(u);if(v.paths!==void 0){u={paths:[]};for(var l=0;l<v.paths.length;l++){for(var c=v.paths[l],p=[],f=0;f<c.length;f++){var m=c[f].slice(0);p.push(m);var w=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,$=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y;m[0]=w,m[1]=$}u.paths.push(p),v.hasZ!==void 0&&(u.hasZ=v.hasZ),v.hasM!==void 0&&(u.hasM=v.hasM)}return u}if(v.rings!==void 0){for(u={rings:[]},l=0;l<v.rings.length;l++){c=v.rings[l],p=[];var T=k.dr(c);for(f=0;f<c.length;f++)m=c[f].slice(0),p.push(m),w=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,$=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y,m[0]=w,m[1]=$;k.dr(p)!==T&&p.reverse(),u.rings.push(p),v.hasZ!==void 0&&(u.hasZ=v.hasZ),v.hasM!==void 0&&(u.hasM=v.hasM)}return u}if(v.x!==void 0)return u={x:r*(v.x-o.x)-n*(v.y-o.y)+o.x,y:n*(v.x-o.x)+r*(v.y-o.y)+o.y},v.z!==void 0&&(u.z=v.z),v.m!==void 0&&(u.m=v.m),v.hasZ!==void 0&&(u.hasZ=v.hasZ),v.hasM!==void 0&&(u.hasM=v.hasM),u;if(v.points!==void 0){for(u={points:[]},l=v.points,f=0;f<l.length;f++)(c=l[f].slice(0))[0]=r*(l[f][0]-o.x)-n*(l[f][1]-o.y)+o.x,c[1]=n*(l[f][0]-o.x)+r*(l[f][1]-o.y)+o.y,u.points.push(c);return v.hasZ!==void 0&&(u.hasZ=v.hasZ),v.hasM!==void 0&&(u.hasM=v.hasM),u}return null},k.EQ=function(v,u){if(v.paths!==void 0){for(var o={paths:[]},r=0;r<v.paths.length;r++){for(var n=v.paths[r],l=[],c=0;c<n.length;c++){var p=n[c].slice(0);l.push(p);var f=u.x-n[c][0];p[0]=n[c][0]+2*f}o.paths.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.rings!==void 0){for(o={rings:[]},r=0;r<v.rings.length;r++){n=v.rings[r];var m=k.dr(n);for(l=[],c=0;c<n.length;c++)p=n[c].slice(0),l.push(p),f=u.x-n[c][0],p[0]=n[c][0]+2*f;k.dr(l)!==m&&l.reverse(),o.rings.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.x!==void 0)return f=u.x-v.x,o={x:v.x+2*f,y:v.y},v.z!==void 0&&(o.z=v.z),v.m!==void 0&&(o.m=v.m),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o;if(v.points!==void 0){for(o={points:[]},r=v.points,c=0;c<r.length;c++)n=r[c].slice(0),f=u.x-n[0],n[0]+=2*f,o.points.push(n);return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}return v.xmin!==void 0?(o={v:v.xmin,G:v.ymin,C:v.xmax,H:v.ymax},v.zmin!==void 0&&(o.zmin=v.zmin,o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin,o.mmax=v.mmax),f=u.x-v.xmin,o.xmax=v.xmin+2*f,f=u.x-v.xmax,o.xmin=v.xmax+2*f,v.zmin!==void 0&&(o.zmin=v.zmin),v.zmax!==void 0&&(o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin),v.mmax!==void 0&&(o.mmax=v.mmax),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o):null},k.FQ=function(v,u){if(v.paths!==void 0){for(var o={paths:[]},r=0;r<v.paths.length;r++){for(var n=v.paths[r],l=[],c=0;c<n.length;c++){var p=n[c].slice(0);l.push(p);var f=u.y-n[c][1];p[1]=n[c][1]+2*f}o.paths.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.rings!==void 0){for(o={rings:[]},r=0;r<v.rings.length;r++){n=v.rings[r];var m=k.dr(n);for(l=[],c=0;c<n.length;c++)p=n[c].slice(0),l.push(p),f=u.y-n[c][1],p[1]=n[c][1]+2*f;k.dr(l)!==m&&l.reverse(),o.rings.push(l)}return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}if(v.x!==void 0)return f=u.y-v.y,o={y:v.y+2*f,x:v.x},v.z!==void 0&&(o.z=v.z),v.m!==void 0&&(o.m=v.m),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o;if(v.points!==void 0){for(o={points:[]},r=v.points,c=0;c<r.length;c++)n=r[c].slice(0),f=u.y-n[1],n[1]+=2*f,o.points.push(n);return v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o}return v.xmin!==void 0?(o={v:v.xmin,G:v.ymin,C:v.xmax,H:v.ymax},v.zmin!==void 0&&(o.zmin=v.zmin,o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin,o.mmax=v.mmax),f=u.y-v.ymin,o.ymax=v.ymin+2*f,f=u.y-v.ymax,o.ymin=v.ymax+2*f,v.zmin!==void 0&&(o.zmin=v.zmin),v.zmax!==void 0&&(o.zmax=v.zmax),v.mmin!==void 0&&(o.mmin=v.mmin),v.mmax!==void 0&&(o.mmax=v.mmax),v.hasZ!==void 0&&(o.hasZ=v.hasZ),v.hasM!==void 0&&(o.hasM=v.hasM),o):null},k}()}(q||(q={})),function(h){h.UK=function(){function k(){}return k.Kg=function(v,u){switch(u==null&&(u=h.fe.pg()),v){case 33:return new h.Ta(u);case 322:return new h.zb(u);case 197:return new h.Hh(u);case 550:return new h.ee(u);case 1607:return new h.Ua(u);case 1736:return new h.Ea(u);default:throw h.i.ga("invalid argument.")}},k}()}(q||(q={})),function(h){var k=function(){function v(u,o){this.Qe=h.ja.rf(u,-1),this.va=new h.cu,this.yl=o}return v.prototype.vW=function(u){this.va.Bt(Math.min(this.Qe.size,u)),this.va.hn(u)},v.prototype.addElement=function(u,o){if(o===void 0)return this.$M(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);return r==-1&&(r=this.va.Rh(),this.Qe.set(o,r)),this.va.addElement(r,u)},v.prototype.$M=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);return r==-1&&(r=this.va.Rh(),this.Qe.set(o,r)),this.va.addElement(r,u)},v.prototype.kd=function(u,o){if(o===void 0)this.FP(u);else{o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),l=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(r,l,n),this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1))):l=n,n=c}}},v.prototype.FP=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),l=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(r,l,n),this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1))):l=n,n=c}},v.prototype.lR=function(u){return u=h.P.truncate(u%this.Qe.size),(u=this.Qe.get(u))==-1?-1:this.va.sc(u)},v.prototype.zR=function(u){return this.va.lb(u)},v.prototype.wd=function(u){var o=this.yl.ez(this.ka(u));o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),l=-1;n!=-1;){if(n==u)return this.va.kd(r,l,n),void(this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1)));l=n,n=this.va.lb(n)}throw h.i.O()},v.prototype.ka=function(u){return this.va.ka(u)},v.prototype.clear=function(){this.Qe=h.ja.rf(this.Qe.size,-1),this.va.clear()},v.prototype.size=function(){return this.va.OF()},v}();h.ZK=k}(q||(q={})),function(h){var k=function(){function v(){this.Ni=new h.ad(3),this.va=new h.ad(6),this.mT=!1,this.ke=-1}return v.prototype.hl=function(u){this.Ni.kd(u)},v.prototype.Rw=function(){return this.Ni.De()},v.prototype.dv=function(u){this.va.kd(u)},v.prototype.VA=function(){return this.va.De()},v.prototype.RB=function(u,o){this.Ni.T(u,1,o)},v.prototype.fx=function(u,o){this.Ni.T(u,2,o)},v.prototype.bX=function(u,o){this.Ni.T(u,3,o)},v.prototype.PB=function(u,o){this.va.T(u,4,o)},v.prototype.eX=function(u,o){this.va.T(u,3,o)},v.prototype.OJ=function(u,o){this.va.T(u,2,o)},v.prototype.Rh=function(u){var o=this.VA();return this.va.T(o,3,this.ke),this.va.T(o,4,0),this.va.T(o,5,u),this.ke!=-1&&this.OJ(this.ke,o),this.ke=o},v.prototype.eh=function(u){this.GE(u);var o=this.va.U(u,2),r=this.va.U(u,3);return o!=-1?this.eX(o,r):this.ke=r,r!=-1&&this.OJ(r,o),this.dv(u),r},v.prototype.Bt=function(u){this.va.Ee(u)},v.prototype.KF=function(u){return this.va.U(u,5)},v.prototype.aX=function(u,o){this.va.T(u,5,o)},v.prototype.addElement=function(u,o){return this.oS(u,o)},v.prototype.oS=function(u,o){var r=this.Rw();this.fx(r,-1),this.va.U(u,0)==-1&&this.va.T(u,0,r);var n=this.va.U(u,1);return this.RB(r,n),n!=-1&&this.fx(n,r),this.va.T(u,1,r),this.setData(r,o),this.PB(u,this.ds(u)+1),this.mT&&this.bX(r,u),r},v.prototype.kd=function(u,o){var r=this.xe(o),n=this.lb(o);return r!=-1?this.fx(r,n):this.va.T(u,0,n),n!=-1?this.RB(n,r):this.va.T(u,1,r),this.hl(o),this.PB(u,this.ds(u)-1),n},v.prototype.hn=function(u){this.Ni.Ee(u)},v.prototype.getData=function(u){return this.Ni.U(u,0)},v.prototype.setData=function(u,o){this.Ni.T(u,0,o)},v.prototype.lb=function(u){return this.Ni.U(u,2)},v.prototype.xe=function(u){return this.Ni.U(u,1)},v.prototype.sc=function(u){return this.va.U(u,0)},v.prototype.Gc=function(u){return this.va.U(u,1)},v.prototype.clear=function(){for(var u=this.ke;u!=-1;)u=this.eh(u)},v.prototype.GE=function(u){for(var o=this.Gc(u);o!=-1;){var r=o;o=this.xe(r),this.hl(r)}this.va.T(u,0,-1),this.va.T(u,1,-1),this.PB(u,0)},v.prototype.B=function(){return this.Ni.size==0},v.prototype.OF=function(){return this.Ni.size},v.prototype.ds=function(u){return this.va.U(u,4)},v.prototype.lz=function(u){return this.va.U(u,3)},v}();h.lp=k}(q||(q={})),function(h){var k=function(){function v(u){u===void 0?(this.vg=new h.ad(2),this.va=new h.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new h.ad(2),this.va=new h.ad(u?4:2),this.ke=-1,this.Sv=u)}return v.prototype.hl=function(u){this.vg.kd(u)},v.prototype.Rw=function(){return this.vg.De()},v.prototype.dv=function(u){this.va.kd(u)},v.prototype.VA=function(){return this.va.De()},v.prototype.Rh=function(){var u=this.VA();return this.Sv&&(this.va.T(u,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,u),this.ke=u),u},v.prototype.eh=function(u){for(var o=this.sc(u);o!=-1;){var r=o;o=this.lb(o),this.hl(r)}this.Sv&&(o=this.va.U(u,2),r=this.va.U(u,3),o!=-1?this.va.T(o,3,r):this.ke=r,r!=-1&&this.va.T(r,2,o)),this.dv(u)},v.prototype.Bt=function(u){this.va.Ee(u)},v.prototype.addElement=function(u,o){var r=this.va.U(u,1),n=this.Rw();return r!=-1?this.vg.T(r,1,n):this.va.T(u,0,n),this.va.T(u,1,n),this.vg.T(n,0,o),n},v.prototype.hn=function(u){this.vg.Ee(u)},v.prototype.kd=function(u,o,r){o!=-1?(this.vg.T(o,1,this.vg.U(r,1)),this.va.U(u,1)==r&&this.va.T(u,1,o)):(this.va.T(u,0,this.vg.U(r,1)),this.va.U(u,1)==r&&this.va.T(u,1,-1)),this.hl(r)},v.prototype.Cy=function(u,o){var r=this.va.U(u,1),n=this.va.U(o,0);n!=-1&&(r!=-1?this.vg.T(r,1,n):this.va.T(u,0,n),this.va.T(u,1,this.va.U(o,1))),this.Sv&&(u=this.va.U(o,2),r=this.va.U(o,3),u!=-1?this.va.T(u,3,r):this.ke=r,r!=-1&&this.va.T(r,2,u)),this.dv(o)},v.prototype.ka=function(u){return this.vg.U(u,0)},v.prototype.Uj=function(u,o){this.vg.T(u,0,o)},v.prototype.lb=function(u){return this.vg.U(u,1)},v.prototype.sc=function(u){return this.va.U(u,0)},v.prototype.Ln=function(u){return this.ka(this.sc(u))},v.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},v.prototype.B=function(){return this.vg.size==0},v.prototype.OF=function(){return this.vg.size},v.prototype.lz=function(u){return this.va.U(u,3)},v}();h.cu=k}(q||(q={})),function(h){h.ua=function(){function k(){}return k.Xd=function(v,u,o){return u=u.zr(),v=v!=null&&v.Yd!==void 0?v.Yd(0):0,o&&(u*=4,v*=1.1),Math.max(v,u)},k.Gr=function(v){return 2*Math.sqrt(2)*v},k.mN=function(v){return Math.sqrt(2)*v},k.mj=function(v,u,o){var r=new h.l;return u.A(r),k.Xd(v,r,o)},k.rE=function(v,u,o){return u=u.Vg(1,0).zr(),v=v!=null?v.Yd(1):0,o&&(u*=4,v*=1.1),Math.max(v,u)},k.ov=function(v,u){var o=new h.l;return v.yc(o),v=new h.l,u.yc(v),o.$b(v),o},k.TN=function(v){var u=new h.l;if(v.yc(u),u.B())return null;var o=new h.fu(u,8),r=-1,n=new h.l,l=!1;do for(var c=0,p=v.ea();c<p;c++){if(v.Tj(c,n),(r=o.Ez(c,n,r))==-1){if(l)throw h.i.ga("internal error");v.Ap(u,!1),l=!0,o.reset(u,8);break}l=!1}while(l);return o},k.iE=function(v){var u=new h.l;v.yc(u);for(var o=new h.fu(u,8),r=-1,n=v.Ha(),l=new h.l,c=!1;n.ab();)for(;n.Ia();){var p=n.ia(),f=n.xb();if(p.A(l),(r=o.Ez(f,l,r))==-1){if(c)throw h.i.Ra();v.Ap(u,!1),c=!0,o.reset(u,8),n.aj();break}}return o},k.lj=function(v,u){var o=new h.l;v.yc(o);for(var r=new h.fu(o,8),n=-1,l=new h.l,c=v.Ha(),p=!1;c.ab();)for(;c.Ia();){var f=c.ia(),m=c.xb();if(f.A(l),l.isIntersecting(u)&&(n=r.Ez(m,l,n))==-1){if(p)throw h.i.ga("internal error.");v.Ap(o,!1),p=!0,r.reset(o,8),c.aj();break}}return r},k.jE=function(v,u){for(var o=new h.fu(u,8),r=new h.h,n=!1,l=new h.l,c=0;c<v.I();c++)if(v.D(c,r),u.contains(r)&&(l.L(r),o.xj(c,l)==-1)){if(n)throw h.i.Ra();n=!0,c=new h.l,v.Ap(c,!1),o.reset(c,8),c=-1}return o},k.gR=function(v,u,o){var r=new h.l,n=new h.l;v.yc(r),u.yc(n),r.X(o,o),n.X(o,o);var l=new h.l;l.L(r),l.Fa(n),v=v.Ha(),u=u.Ha();var c=new h.sC;c.WB(o);var p=!1;for(c.kK();v.ab();)for(;v.Ia();)v.ia().A(r),r.isIntersecting(l)&&(p=!0,(o=new h.l).L(r),c.DD(v.xb(),o));if(c.dF(),!p)return null;for(r=!1,c.jK();u.ab();)for(;u.Ia();)u.ia().A(n),n.isIntersecting(l)&&(r=!0,(o=new h.l).L(n),c.zD(u.xb(),o));return c.cF(),r?c:null},k.hR=function(v,u,o,r,n){var l=v.K(),c=u.K(),p=new h.l,f=new h.l;v.yc(p),u.yc(f),p.X(o,o),f.X(o,o);var m=new h.l;m.L(p),m.Fa(f);var w=new h.sC;w.WB(o);var $=!1;w.kK();var T=0;for(o=v.ea();T<o;T++)r&&l==1736&&!v.Gv(T)||(v.Tj(T,p),p.isIntersecting(m)&&($=!0,w.DD(T,p)));if(w.dF(),!$)return null;for(v=!1,w.jK(),r=0,o=u.ea();r<o;r++)n&&c==1736&&!u.Gv(r)||(u.Tj(r,f),f.isIntersecting(m)&&(v=!0,w.zD(r,f)));return w.cF(),v?w:null},k.Tu=function(v,u,o){if(v!=u)for(var r=0;r<o;r++)v[r]==null?v[r]=h.h.cl(u[r]):v[r].N(u[r])},k.Ey=function(v,u,o,r){var n=0;for(r+=0;n<r;o++,n++)v[n]==null&&(v[n]=[0,0]),v[n][0]=u[o].x,v[n][1]=u[o].y},k.Dy=function(v,u,o,r){var n=u,l=0;for(u=r+u;n<u;l++,n++)v[n]==null?v[n]=h.h.construct(o[l][0],o[l][1]):v[n].na(o[l][0],o[l][1])},k.fP=function(v,u,o){if(v!=u)for(var r=0;r<o;r++)v[r]==null?v[r]=new h.Ta(u[r]):u[r].copyTo(v[r])},k.qE=function(v,u,o,r){var n=0;return v!=null&&(n=v.Yd(0),r&&!o||v==null||(n+=1.01*v.pz(0))),o&&(u*=4,n*=1.01),Math.max(n,u)},k.oy=function(v,u,o){return k.qE(v,u.zr(),o,!1)},k.bO=function(v,u){var o=new h.l;return u.A(o),k.oy(v,o,!0)},k.py=function(v,u){return k.qE(v,u.zr(),!1,!0)},k.Ju=function(v,u){var o=new h.l;return u.A(o),k.py(v,o)},k.vG=function(v,u,o,r){r*=r;var n=new h.h;if(n.vc(v,u),(v=new h.h).vc(o,u),u=n.Uk(),o=v.Uk(),u<=r&&o<=r)return!0;var l=h.mc.ox(n.yi(v));return(l<=r*u||l<=r*o)&&0<=n.Sh(v)},k.ZJ=function(v,u,o,r){for(var n=0;n<u;n++){var l=v[n].y,c=h.P.Tk(l,o,r);c!=l&&(v[n].y=c)}},k}()}(q||(q={})),function(h){var k,v,u=function(){function l(c){this.Za=c}return l.prototype.compare=function(c,p,f){c=c.ka(f),f=this.Za.qk(p);var m=this.Za.qk(c);return f<m?-1:f==m?n.iq(p)&&n.Iv(c)?-1:n.iq(c)&&n.Iv(p)?1:0:1},l}(),o=function(){function l(c){this.Za=c}return l.prototype.qr=function(c,p,f){this.Za.CX(f,c,p)},l.prototype.bq=function(c){return this.Za.qk(c)},l}();(v=k||(k={}))[v.initialize=0]="initialize",v[v.pIn=1]="pIn",v[v.pL=2]="pL",v[v.pR=3]="pR",v[v.pT=4]="pT",v[v.right=5]="right",v[v.left=6]="left",v[v.all=7]="all";var r=function(){function l(){this.Za=null,this.Si=new h.Oc,this.ji=new h.ja(0),this.tg=[0,0]}return l.prototype.Zi=function(c,p){this.Si.pa=c.pa-p,this.Si.wa=c.wa+p,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.zB=function(c,p,f){if(c>p)throw h.i.O();this.Si.pa=c-f,this.Si.wa=p+f,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.Wo=function(c,p){this.Si.pa=c-p,this.Si.wa=c+p,this.ji.resize(0),this.ie=0,this.tg[0]=0},l.prototype.next=function(){if(!this.Za.nq)throw h.i.Hb();if(0>this.ie)return-1;for(var c=!0;c;)switch(this.tg[this.ie]){case 1:c=this.AU();break;case 2:c=this.BU();break;case 3:c=this.CU();break;case 4:c=this.DU();break;case 5:c=this.AW();break;case 6:c=this.fT();break;case 7:c=this.oN();break;case 0:c=this.Bz();break;default:throw h.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},l.construct=function(c){var p=new l;return p.Za=c,p.ji.Jb(20),p.ie=-1,p},l.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},l.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var c=this.Za.Pp(this.Mc);return this.Si.wa<c?(c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=6),!0):c<this.Si.pa?(c=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),!0)},l.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var c=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.tg[++this.ie]=5),!0}return c=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),(c=this.Za.nk(this.Mc))!=-1&&this.ji.add(c),!0},l.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var c=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=6),!0}return c=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),(c=this.Za.sj(this.Mc))!=-1&&this.ji.add(c),!0},l.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var c=this.Za.pk(this.Mc);return c!=-1&&(this.gi=this.Za.ml(c),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},l.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&n.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},l.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},l.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},l.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},l.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},l}();h.AY=r;var n=function(){function l(c){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=c,this.nq=this.Uv=!1}return l.prototype.mr=function(){this.Pk(!0)},l.prototype.Dr=function(c,p){if(!this.Uv)throw h.i.Hb();this.Hj.push(new h.Oc(c,p))},l.prototype.Hp=function(){if(!this.Uv)throw h.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},l.prototype.xj=function(c){if(!this.Uf||!this.nq)throw h.i.O("invalid call");if(this.kf==-1){var p=this.Hj.length;if(this.dA){var f=new h.ja(0);f.Jb(2*p),this.XI(f),this.bi.Jb(2*p),this.bi.resize(0),this.WI(f),this.Mm.resize(p,-1),this.Mm.Yj(-1,0,p),this.dA=!1}else this.Mm.Yj(-1,0,p);this.kf=this.Vu()}p=this.kG(c<<1,this.kf),f=this.bg.addElement(1+(c<<1),this.rz(p)),this.QJ(p,f),this.Mm.set(c,p),this.aw++},l.prototype.remove=function(c){if(!this.Uf||!this.nq)throw h.i.ga("invalid call");var p=this.Mm.get(c);if(p==-1)throw h.i.O("the interval does not exist in the interval tree");this.Mm.set(c,-1),this.aw--;var f=this.rz(p),m=this.bg.UR(f);this.bg.wd(this.rR(p),f),this.bg.wd(this.OR(p),f),(c=this.bg.size(f))==0&&(this.bg.HP(f),this.UJ(m,-1)),this.Gj.kd(p),f=this.PF(m);var w=this.sj(m),$=this.nk(m);for(p=0;!(0<c||m==this.kf||w!=-1&&$!=-1);)m==this.sj(f)?w!=-1?(this.Qk(f,w),this.Wj(w,f),this.Qk(m,-1)):$!=-1?(this.Qk(f,$),this.Wj($,f),this.Sk(m,-1)):this.Qk(f,-1):w!=-1?(this.Sk(f,w),this.Wj(w,f),this.Qk(m,-1)):$!=-1?(this.Sk(f,$),this.Wj($,f),this.Sk(m,-1)):this.Sk(f,-1),this.Wj(m,-1),p++,m=f,c=(f=this.pk(m))!=-1?this.bg.size(f):0,w=this.sj(m),$=this.nk(m),f=this.PF(m)},l.prototype.reset=function(){if(!this.Uf||!this.nq)throw h.i.O("invalid call");this.Pk(!1)},l.prototype.size=function(){return this.aw},l.prototype.getIterator=function(){return r.construct(this)},l.prototype.XI=function(c){for(var p=this.Hj.length,f=0;f<2*p;f++)c.add(f);this.DX(c,2*p)},l.prototype.WI=function(c){for(var p=NaN,f=0;f<c.size;f++){var m=c.get(f),w=this.qk(m);w!=p&&(this.bi.add(m),p=w)}},l.prototype.qS=function(){var c=this.Hj.length,p=new h.ja(0);p.Jb(2*c),this.XI(p),this.bi.Jb(2*c),this.bi.resize(0),this.WI(p),this.Gj.Ee(c),this.Vi.hn(2*c);var f=h.Zc.Qh(c);for(f.Yj(-1,0,c),this.kf=this.Vu(),c=0;c<p.size;c++){var m=p.get(c),w=f.get(m>>1);w!=-1?this.QJ(w,this.Vi.addElement(this.rz(w),m)):(w=this.kG(m,this.kf),f.set(m>>1,w))}},l.prototype.kG=function(c,p){var f=p,m=p,w=-1,$=0,T=this.bi.size-1,E=0,O=c>>1,P=NaN,L=NaN,F=!0,z=this.yR(O);for(O=this.vR(O);F;){$<T?(E=$+h.P.truncate((T-$)/2),this.bz(f)==-1&&this.AJ(f,this.bi.get(E),this.bi.get(E+1))):this.bz(f)==-1&&this.AJ(f,this.bi.get($),this.bi.get($));var R=this.Pp(f);if(O<R)p!=-1&&(p==f?(m=f,P=R,L=(p=this.sj(f))!=-1?this.Pp(p):NaN):L>R&&(R<P?this.Qk(m,f):this.Sk(m,f),this.Sk(f,p),this.Uf&&(this.Wj(f,m),this.Wj(p,f)),m=f,P=R,p=-1,L=NaN)),(T=this.sR(f))==-1&&(T=this.Vu(),this.ZW(f,T)),f=T,T=E;else if(z>R)p!=-1&&(p==f?(m=f,P=R,L=(p=this.nk(f))!=-1?this.Pp(p):NaN):L<R&&(R<P?this.Qk(m,f):this.Sk(m,f),this.Qk(f,p),this.Uf&&(this.Wj(f,m),this.Wj(p,f)),m=f,P=R,p=-1,L=NaN)),($=this.PR(f))==-1&&($=this.Vu(),this.jX(f,$)),f=$,$=E+1;else{(F=this.pk(f))==-1&&(F=this.uP(f),this.UJ(f,F));var G=this.aN(F,c);w=this.sP(),this.mX(w,F),this.YW(w,G),f!=p&&(R<P?this.Qk(m,f):this.Sk(m,f),this.Uf&&this.Wj(f,m),p!=-1&&(L<R?this.Qk(f,p):this.Sk(f,p),this.Uf&&this.Wj(p,f))),F=!1}}return w},l.prototype.Vu=function(){return this.ne.De()},l.prototype.uP=function(c){return this.Uf?this.bg.Rr(c):this.Vi.Rh(c)},l.prototype.sP=function(){return this.Gj.De()},l.prototype.Pk=function(c){c?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=h.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=h.Zc.Qh(0),this.bg=new h.$j,this.bg.Xo(new u(this))):this.bg.clear():this.Vi==null?this.Vi=new h.lp:this.Vi.clear(),this.ne==null?(this.Gj=new h.ad(3),this.ne=new h.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},l.prototype.AJ=function(c,p,f){this.SW(c,p),this.TW(c,f)},l.prototype.Pp=function(c){var p=this.bz(c);return p==-1?NaN:(p=this.qk(p))==(c=this.qk(this.bR(c)))?p:.5*(p+c)},l.prototype.SW=function(c,p){this.ne.T(c,0,p)},l.prototype.TW=function(c,p){this.ne.T(c,1,p)},l.prototype.ZW=function(c,p){this.ne.T(c,3,p)},l.prototype.jX=function(c,p){this.ne.T(c,4,p)},l.prototype.UJ=function(c,p){this.ne.T(c,2,p)},l.prototype.Qk=function(c,p){this.ne.T(c,5,p)},l.prototype.Sk=function(c,p){this.ne.T(c,6,p)},l.prototype.Wj=function(c,p){this.ne.T(c,7,p)},l.prototype.mX=function(c,p){this.Gj.T(c,0,p)},l.prototype.aN=function(c,p){return this.Uf?this.bg.addElement(p,c):this.Vi.addElement(c,p)},l.prototype.YW=function(c,p){this.Gj.T(c,1,p)},l.prototype.QJ=function(c,p){this.Gj.T(c,2,p)},l.prototype.ml=function(c){return this.Uf?this.bg.sc(c):this.Vi.sc(c)},l.prototype.bs=function(c){return this.Uf?this.bg.Gc(c):this.Vi.Gc(c)},l.iq=function(c){return(1&c)==0},l.Iv=function(c){return(1&c)==1},l.prototype.bz=function(c){return this.ne.U(c,0)},l.prototype.bR=function(c){return this.ne.U(c,1)},l.prototype.pk=function(c){return this.ne.U(c,2)},l.prototype.sR=function(c){return this.ne.U(c,3)},l.prototype.PR=function(c){return this.ne.U(c,4)},l.prototype.sj=function(c){return this.ne.U(c,5)},l.prototype.nk=function(c){return this.ne.U(c,6)},l.prototype.PF=function(c){return this.ne.U(c,7)},l.prototype.rz=function(c){return this.Gj.U(c,0)},l.prototype.rR=function(c){return this.Gj.U(c,1)},l.prototype.OR=function(c){return this.Gj.U(c,2)},l.prototype.yR=function(c){return this.Hj[c].pa},l.prototype.vR=function(c){return this.Hj[c].wa},l.prototype.DX=function(c,p){this.Cm==null&&(this.Cm=new h.Zt);var f=new o(this);this.Cm.sort(c,0,p,f)},l.prototype.CX=function(c,p,f){var m=this;c.Wd(p,f,function(w,$){var T=m.qk(w),E=m.qk($);return T<E||T==E&&l.iq(w)&&l.Iv($)?-1:1})},l.prototype.qk=function(c){var p=this.Hj[c>>1];return l.iq(c)?p.pa:p.wa},l}();h.ur=n}(q||(q={})),function(h){var k=function(){function v(u){if(u==null)throw h.i.ga("Invalid arguement");this.hf=u;var o=u.iR();o.cS()?u.ef.DG()?this.no=h.ui.PannableFold:this.no=h.ui.Clip:this.no=h.ui.DontClip,o.dS()?u.$f.DG()?this.Sm=h.ui.PannableFold:this.Sm=h.ui.Clip:this.Sm=h.ui.DontClip,this.Dm=o.Lr,this.hH=o.Xu,u=this.hf.nH,this.WG=u.ks(2147483648),this.Wv=u.ks(1073741824)}return v.Bh=function(u,o,r){return o.yw.Bh(u,r)},v.Tt=function(u,o,r,n){return u.yw.Tt(o,r,n)},v.St=function(u,o,r,n){if(r=0>r?o.length:r,(u=u.yw.Tt(o,r,n))==r)return u;for(var l=o=0;l<r;l++){var c=n[l];c.isNaN()||(o<l&&n[o].N(c),o++)}for(;o<r;o++)n[o].Sc();return u},v.transform=function(u,o,r,n,l){if(u.isIdentity())return h.ua.fP(n,o,r),r;for(var c=[],p=0,f=0;f<r;){for(var m=Math.min(c.length,r-f),w=f,$=0;w<m;w++,$++)c[$]==null?c[$]=o[w].D():o[w].D(c[$]);var T=l?v.St(u,c,m,c):v.Tt(u,c,m,c);for($=w=0;w<T;w++,$++)n[f]==null&&(n[f]=new h.Ta(o[f])),n[f].Db(c[$]);f+=m,p+=T}return p},v.prototype.Tt=function(u,o,r){if(this.hf.isIdentity())return u!=r&&h.ua.Tu(r,u,o),o;var n=this.hf.ef,l=this.hf.$f,c=n.Tb(),p=l.Tb();if(c==0&&c===p){var f=n.Sp();return l=f/(l=l.Sp()),(f=new h.Ed).Jt(l,l),f.aY(u,o,r),o}if(f=h.P.Hu(Math.min(o,64)),c==3){var m=n.Li;c=(n=m.hk()).Tb(),r!=u&&h.ua.Tu(r,u,o),h.Ab.bl(m,r,o,!0),m.St(h.dm.forward,r,o),h.Ab.al(m,r,o,!0)}if(c==3||p===3)throw h.i.ga("image: transform_in_place_");if(c==2)this.no==h.ui.Clip?(r!=u&&h.ua.Tu(r,u,o),u=n.ol(),h.Ab.JS(u,n,r,o)):(r!=u&&h.ua.Tu(r,u,o),n.Xc()&&(c=n.Yd(0),m=n.Le(),h.Ab.AX(r,o,m,c),h.Ab.lF(r,o,n,0))),h.Ab.DL(n,r,o,f);else for(c=n.Yd(0),m=n.Le(),n=0;n<o;n++)h.Ab.BX(u[n],m,c,r[n]);for(h.Ab.BL(this.hf,r,o,f),u=0,(p=p==2)?u=l.Bi():isNaN(this.Dm)||(u=this.Dm),p&&this.Sm!=h.ui.Clip||h.Ab.lF(r,o,l.tc(),u),p&&(h.Ab.tG(r,o,l,this.Sm),h.Ab.CL(l,r,o,f)),u=o,n=0;n<o;++n)r[n].isNaN()&&u--;return u},v.prototype.Bh=function(u,o){if(this.hf.isIdentity()||u.B())return u;if(u.K()==33)return this.SI(u);var r=this.hf.ef,n=this.hf.$f,l=r.Tb(),c=n.Tb();if(l==0&&l==c)return o=r.Sp(),o/=n=n.Sp(),(n=new h.Ed).Jt(o,o),(u=h.ba.kg(u)).Pc(n),u;switch(u.K()){case 1607:case 1736:u=this.QI(u,o);break;case 550:u=this.aW(u,o);break;case 197:u=this.$V(u,o);break;default:throw h.i.ga("")}return u},v.prototype.SI=function(u){var o=u.D(),r=[];return r[0]=o,this.Tt(r,1,r),(u=new h.Ta(u)).Db(r[0]),u},v.prototype.QI=function(u,o){if(u.vm())throw h.i.ga("curves not supported");var r=u.K();if(r==1736)return this.bW(u,o);if(r==1607)return this.cW(u,o);throw h.i.ga("projectMultiPath")},v.prototype.bW=function(u,o){var r=this.hf.ef,n=this.hf.$f,l=r.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64)),f=h.Ea.kg(u);l==3&&(l=(r=(u=r.Li).hk()).Tb(),f=u.bl(f,!0),this.yp(u,h.dm.forward,f),f=u.al(f,!0)),u=null,c==3&&(c=(n=(u=n.Li).hk()).Tb());var m=l==2,w=c==2,$=w?n.tc():n,T=!w&&!this.Wv;c=!1;var E=f;if(m){if((E=h.Ab.OI(E,r,this.no,o)).B())return E}else{if(f=new h.l,E.yc(f),l=r.Le(),f.G<l.G||f.H>l.H){var O=h.l.construct(f.v-1,l.G,f.C+1,l.H);if((E=h.ti.Pu(E,O,r,NaN,0,o)).B())return E}f.S()>2*l.S()&&(E=h.Ab.Jp(E,-2*l.S(),2*l.S(),r,!0,0,!0,o))}f=this.hH,(l=!isNaN(f))&&(E=h.Zl.local().W(E,f,o)),O=w?n.mk():null;var P=NaN;m&&(P=r.Bi());var L=n.Yr()!=null;if(this.WG)m&&(h.Ab.wr(r,P,E,p),l&&(m=r.jh(),f*=(P=r.tc().jh())/m)),h.Ab.vr(this.hf,E,T,p),l&&(m=r.tc().jh(),f*=(P=n.tc().jh())/m),r=E;else{var F=new h.Ua(E.description);F.yD(E),m&&(h.Ab.wr(r,P,F,p),l&&(m=r.jh(),f*=(P=r.tc().jh())/m)),h.Ab.vr(this.hf,F,T,p),l&&(m=r.tc().rm(),f*=(P=n.tc().rm())/m),T=NaN,w?(O=n.mk(),T=n.Bi()):isNaN(this.Dm)||(T=this.Dm),m=v.vv(r)|v.vv(n),P=10*$.Yd(0),this.Wv&&(m=3,P=0),r=h.Ab.PQ(E,r,F,$,T,o,m,P)}return L&&(r=h.Ab.SD(r,n,o)),w&&(c||(w=$.Le().S(),r.Vg(0,0).S()>=w-$.Yd(0)&&($=O.getNorthPoleLocation(),w=O.getSouthPoleLocation(),E=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),T=0,E==h.Eg.PE_POLE_POINT&&$!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),O==h.Eg.PE_POLE_POINT&&w!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(c=!0))),r=h.Ab.Hz(r,n,this.Sm,o),l&&(r=h.Zl.local().W(r,f,o)),h.Ab.Kx(n,r,p)),r.B()||(c&&(r=h.$l.local().W(r,n,!1,o)),u!=null&&(r=u.al(r,!1),this.yp(u,h.dm.reverse,r),r=u.bl(r,!1))),r},v.vv=function(u){if(u.Tb()!=2)return 0;var o=0,r=u.mk();u=r.getNorthPoleLocation();var n=r.getSouthPoleLocation(),l=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),l==h.Eg.PE_POLE_POINT&&u!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),r==h.Eg.PE_POLE_POINT&&n!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},v.prototype.cW=function(u,o){var r=this.hf.ef,n=this.hf.$f,l=r.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64)),f=h.Ua.kg(u);l==3&&(l=(r=(u=r.Li).hk()).Tb(),f=u.bl(f,!0),this.yp(u,h.dm.forward,f),f=u.al(f,!0)),u=null,c==3&&(c=(n=(u=n.Li).hk()).Tb());var m=l==2;l=(c=c==2)?n.tc():n;var w=!c&&!this.Wv;if(m){if((f=h.Ab.OI(f,r,this.no,o)).B())return f}else{var $=new h.l;f.yc($);var T=r.Le();if(($.G<T.G||$.H>T.H)&&($=h.l.construct($.v-1,T.G,$.C+1,T.H),(f=h.ti.Pu(f,$,r,NaN,0,o)).B()))return f}var E=NaN;m&&(E=r.Bi()),$=n.Yr()!=null,T=this.hH;var O=!isNaN(T);if(O&&(f=h.Zl.local().W(f,T,o)),this.WG)m&&h.Ab.wr(r,E,f,p),O&&(m=r.jh(),T*=(E=r.tc().jh())/m),h.Ab.vr(this.hf,f,w,p),O&&(m=r.tc().jh(),T*=(E=n.tc().jh())/m),r=f;else{var P=new h.Ua(f.description);P.yD(f),m&&(h.Ab.wr(r,E,P,p),O&&(m=r.jh(),T*=(E=r.tc().jh())/m)),h.Ab.vr(this.hf,P,w,p),O&&(m=r.tc().jh(),T*=(E=n.tc().jh())/m),w=NaN,c?w=n.Bi():isNaN(this.Dm)||(w=this.Dm),m=v.vv(r)|v.vv(n),E=10*l.Yd(0),this.Wv&&(m=3,E=0),r=h.Ab.QQ(f,r,P,l,w,o,m,E)}return $&&(r=h.Ab.SD(r,n,o)),c&&(r=h.Ab.Hz(r,n,this.Sm,o),O&&(r=h.Zl.local().W(r,T,o)),h.Ab.Kx(n,r,p)),r.B()||u!=null&&(r=u.al(r,!1),this.yp(u,h.dm.reverse,r),r=u.bl(r,!1)),r},v.prototype.$V=function(u,o){var r=(u.da()+u.S())/400;return r!=0?(r=h.Zl.local().W(u,r,o),r=this.QI(r,o),o=u.Ja(),r.dn(o)):(o=new h.Ta(u.Kp()),r=this.SI(o),o=u.Ja(),r.B()?o.Pa():(u.copyTo(o),u=r.D(),o.L(u.x,u.y,u.x,u.y))),o},v.prototype.aW=function(u,o){u=h.ba.kg(u);var r=this.hf.ef,n=this.hf.$f,l=r.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64));if(l==3){var f=r.Li;l=(r=f.hk()).Tb(),u=f.al(u,!0),this.yp(f,h.dm.forward,u),u=f.bl(u,!0)}if(l==2){if(this.no==h.ui.Clip?u=h.Zj.local().W(u,r.ol(),r,o):r.Xc()&&(l=new h.l,u.yc(l),r.Le().contains(l)||(this.no==h.ui.PannableFold&&(u=h.Ab.nj(u,r)),h.Ab.Lt(u,r.Le(),r.Yd(0),!0),u=h.Ab.Hn(u,r,0,!0,0,o))),u.B())return u;h.Ab.wr(r,0,u,p)}else h.Ab.Lt(u,r.Le(),r.Yd(0),!0);return h.Ab.vr(this.hf,u,!1,p),r=0,l=!1,f=null,c==3&&(l=!0,c=(n=(f=n.Li).hk()).Tb()),(c=c==2)?r=n.Bi():isNaN(this.Dm)||(r=this.Dm),c&&this.Sm!=h.ui.Clip||(u=h.Ab.Hn(u,n.tc(),r,!1,0,o)),c&&(u=h.Ab.Hz(u,n,this.Sm,o),h.Ab.Kx(n,u,p),u.B())||l&&(u=f.al(u,!0),this.yp(f,h.dm.reverse,u),u=f.bl(u,!0)),u},v.prototype.yp=function(u,o,r){var n=r.I();if(n!=0){for(var l=r.vb(0),c=h.P.mg(200,0),p=[],f=0;f<n;){var m=Math.min(100,n-f);l.Xw(2*f,2*m,c,2,!0);for(var w=0;w<m;++w)p[w]=h.h.construct(c[2*f],c[2*f+1]);u.St(o,p,m),f+=m}r.Qc(1993)}},v.Py=function(u,o,r){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var n=u.K();return n==197?(n=new h.Ea(u.description)).bd(u,!1):h.ba.zd(n)?(n=new h.Ua(u.description)).pc(u,!0):n=u,(n=h.Ab.nj(n,o)).B()?n:h.Ab.Hn(n,o,0,n!=u,0,r)},v.pj=function(u,o,r,n){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var l=u.K();if(h.ba.Ic(l)){u=h.Ab.nj(u,o),l=new h.l,u.A(l);for(var c=h.ua.oy(o,l,!1),p=o.ih(),f=Math.floor((l.v-p.v)/p.S())*p.S()+p.v;f<l.C;)f>l.v+c&&f<l.C-c&&(u=h.Ab.pS(u,o,r,f)),f+=p.S()}else{if(l==197)return(l=new h.Ea(u.description)).bd(u,!1),v.pj(l,o,r,n);if(h.ba.zd(l))return(l=new h.Ua(u.description)).pc(u,!0),v.pj(l,o,r,n)}return v.Py(u,o,n)},v}();h.du=k}(q||(q={})),function(h){var k=function(v){function u(o,r,n,l){var c=v.call(this)||this;return o===void 0?c.description=h.fe.pg():n===void 0?c.description=o:(c.description=h.fe.pg(),c.UB(o,r),c.Sl(n,l)),c}return wt(u,v),u.prototype.K=function(){return 322},u.prototype.Rb=function(){var o=this.ta-this.qa,r=this.oa-this.ma;return Math.sqrt(o*o+r*r)},u.prototype.Di=function(o){var r=this.ta-this.qa,n=this.oa-this.ma;return Math.sqrt(r*r+n*n)<=o},u.prototype.Rn=function(){return!1},u.prototype.lg=function(){var o=new h.h;return o.vc(this.xc(),this.bc()),o},u.YO=function(o,r){return new u(o.x,o.y,r.x,r.y)},u.prototype.dn=function(o){o.Pa(),o.Pf(this.description);var r=new h.l;this.A(r),o.Zo(r),r=1;for(var n=this.description.Ba;r<n;r++)for(var l=this.description.ld(r),c=h.sa.Wa(l);r<c;r++){var p=this.Vg(l,0);o.setInterval(l,0,p)}},u.prototype.A=function(o){o.L(this.ta,this.oa,this.qa,this.ma),o.normalize()},u.prototype.So=function(o){o.Pa(),o.$b(this.ta,this.oa,this.Pd(0,1,0)),o.$b(this.qa,this.ma,this.Pd(1,1,0))},u.prototype.Pc=function(o){if(o instanceof h.Ed){this.wc();var r=new h.h;r.x=this.ta,r.y=this.oa,o.Gh(r,r),this.ta=r.x,this.oa=r.y,r.x=this.qa,r.y=this.ma,o.Gh(r,r),this.qa=r.x,this.ma=r.y}else this.wc(),(r=new h.Od).x=this.ta,r.y=this.oa,r.z=this.Pd(0,1,0),r=o.hp(r),this.ta=r.x,this.oa=r.y,this.vn(0,1,0,r.z),r.x=this.qa,r.y=this.ma,r.z=this.Pd(1,1,0),r=o.hp(r),this.qa=r.x,this.ma=r.y,this.vn(1,1,0,r.z)},u.prototype.Ja=function(){return new u(this.description)},u.prototype.Sx=function(o,r){return(this.qa-o-(this.ta-o))*(this.ma-r+(this.oa-r))*.5},u.prototype.ux=function(o){return o*this.Rb()},u.prototype.IG=function(o){return o/this.Rb()},u.prototype.yF=function(o){return h.mc.jq(this.ta,this.qa,o)},u.prototype.aR=function(o){return h.mc.jq(this.oa,this.ma,o)},u.prototype.fl=function(o,r){var n=new h.jg;return this.dh(o,r,n),n.get()},u.prototype.dh=function(o,r,n){if(n==null)throw h.i.O();n.Qr(),(n=n.get()).Pf(this.description);var l=new h.h;this.ic(o,l),n.UB(l.x,l.y),this.ic(r,l),n.Sl(l.x,l.y),l=1;for(var c=this.description.Ba;l<c;l++)for(var p=this.description.Fd(l),f=h.sa.Wa(p),m=0;m<f;m++){var w=this.Vc(o,p,m);n.TB(p,m,w),w=this.Vc(r,p,m),n.JB(p,m,w)}},u.prototype.Vc=function(o,r,n){if(r==0)return n==0?this.ic(o).x:this.ic(o).y;switch(h.sa.gz(r)){case 0:return .5>o?this.yv(r,n):this.jv(r,n);case 1:var l=this.yv(r,n);return r=this.jv(r,n),h.mc.jq(l,r,o);case 2:throw h.i.ga("not implemented")}throw h.i.Ra()},u.prototype.ge=function(o,r){var n=this.qa-this.ta,l=this.ma-this.oa,c=n*n+l*l;return c==0?.5:(o=((o.x-this.ta)*n+(o.y-this.oa)*l)/c,r||(0>o?o=0:1<o&&(o=1)),o)},u.prototype.fq=function(o,r,n,l){if(o){if((o=this.ma-this.oa)==0)return r==this.ma?-1:0;if(0>(r=(r-this.oa)/o)||1<r)return 0;n!=null&&(n[0]=this.yF(r))}else{if((o=this.qa-this.ta)==0)return r==this.qa?-1:0;if(0>(r=(r-this.ta)/o)||1<r)return 0;n!=null&&(n[0]=this.aR(r))}return l!=null&&(l[0]=r),1},u.prototype.Me=function(o,r){var n=this.ma-this.oa;return n==0?o==this.ma?r:NaN:(o=(o-this.oa)/n,r=this.yF(o),o==1&&(r=this.qa),r)},u.prototype.tu=function(o,r,n){return 0<=this.tp(o.x,o.y,r,n)},u.prototype.xi=function(o,r,n){return 0<=this.tp(o,r,n,!0)},u.prototype.ss=function(o,r){return this.tu(o,r,!1)},u.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var o=this.ta;this.ta=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=0;for(var r=this.description.Qq-2;o<r;o++){var n=this.la[o];this.la[o]=this.la[o+r],this.la[o+r]=n}}},u.prototype.wu=function(o,r){(r=h.h.construct(o,r)).sub(this.bc());var n=new h.h;return n.vc(this.xc(),this.bc()),(o=n.yi(r))>(r=8881784197001252e-31*(Math.abs(n.x*r.y)+Math.abs(n.y*r.x)))?-1:o<-r?1:0},u.prototype.tp=function(o,r,n,l){var c=this.ta,p=this.oa,f=o-c,m=r-p;if((f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:0;if(f=o-this.qa,m=r-this.ma,(f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:1;if(f=this.qa-this.ta,m=this.ma-this.oa,0<(l=Math.sqrt(f*f+m*m))){var w=1/l,$=o-c,T=r-p,E=$*(f*=w)+T*(m*=w),O=17763568394002505e-31*(Math.abs($*f)+Math.abs(T*m)),P=f;if(f=-m,m=P,E<-(O=Math.max(n,O))||E>l+O)return NaN;if(Math.abs($*f+T*m)<=Math.max(n,17763568394002505e-31*(Math.abs($*f)+Math.abs(T*m)))&&(.5>=(f=h.P.Tk(E*w,0,1))?(m=this.ta+(this.qa-this.ta)*f,l=this.oa+(this.ma-this.oa)*f):(m=this.qa-(this.qa-this.ta)*(1-f),l=this.ma-(this.ma-this.oa)*(1-f)),h.h.Jy(m,l,o,r)<=n)){if(.5>f){if(h.h.Jy(m,l,c,p)<=n)return 0}else if(h.h.Jy(m,l,this.qa,this.ma)<=n)return 1;return f}}return NaN},u.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.AM(o))},u.prototype.mD=function(o,r,n){var l=n?this.ta:this.qa;n=n?this.oa:this.ma;var c=new h.h;return c.x=o.qa-l,c.y=o.ma-n,!(r.Sh(c)>6661338147750939e-31*r.aD(c))||(c.x=o.ta-l,c.y=o.oa-n,r.Sh(c)<=6661338147750939e-31*r.aD(c))},u.prototype.lD=function(o){var r=new h.h;return r.x=this.qa-this.ta,r.y=this.ma-this.oa,!!this.mD(o,r,!1)&&(r.Uq(),!!this.mD(o,r,!0))},u.IM=function(o,r){var n=o.wu(r.ta,r.oa),l=o.wu(r.qa,r.ma);return!(0>n&&0>l||0<n&&0<l)&&(n=r.wu(o.ta,o.oa),l=r.wu(o.qa,o.ma),!(0>n&&0>l||0<n&&0<l)&&((n=o.Rb())>(l=r.Rb())?o.lD(r):r.lD(o)))},u.GM=function(o,r,n){var l=h.h.construct(NaN,NaN),c=o.qa-o.ta,p=o.ma-o.oa,f=r.qa-r.ta,m=r.ma-r.oa,w=f*p-c*m;if(w==0)return l;var $=8881784197001252e-31*(Math.abs(f*p)+Math.abs(c*m)),T=r.ta-o.ta,E=r.oa-o.oa,O=f*E-T*m,P=O/w,L=Math.abs(w);return P<-(f=(8881784197001252e-31*(Math.abs(f*E)+Math.abs(T*m))*L+$*Math.abs(O))/(w*w)+2220446049250313e-31*Math.abs(P))||P>1+f||(f=(m=c*E-T*p)/w)<-(c=(8881784197001252e-31*(Math.abs(c*E)+Math.abs(T*p))*L+$*Math.abs(m))/(w*w)+2220446049250313e-31*Math.abs(f))||f>1+c||(P=h.P.Tk(P,0,1),c=h.P.Tk(f,0,1),p=o.ic(P),w=r.ic(c),($=new h.h).vc(p,w),$.length()>n&&($.add(p,w),$.scale(.5),P=o.ge($,!1),c=r.ge($,!1),o=o.ic(P),r=r.ic(c),o.sub(r),o.length()>n)||l.na(P,c)),l},u.JM=function(o,r,n,l){var c=0;if((o.ta==r.ta&&o.oa==r.oa||o.ta==r.qa&&o.oa==r.ma)&&(c++,!l))return 1;if(o.qa==r.ta&&o.ma==r.oa||o.qa==r.qa&&o.ma==r.ma){if(++c==2)return 2;if(!l)return 1}return r.xi(o.ta,o.oa,n)||r.xi(o.qa,o.ma,n)||o.xi(r.ta,r.oa,n)||o.xi(r.qa,r.ma,n)?1:l&&c!=0||u.IM(o,r)==0?0:1},u.Yx=function(o,r,n,l,c,p){var f=0,m=o.tp(r.ta,r.oa,p,!1),w=o.tp(r.qa,r.ma,p,!1),$=r.tp(o.ta,o.oa,p,!1),T=r.tp(o.qa,o.ma,p,!1);return isNaN(m)||(l!=null&&(l[f]=m),c!=null&&(c[f]=0),n!=null&&(n[f]=h.h.construct(r.ta,r.oa)),f++),isNaN(w)||(l!=null&&(l[f]=w),c!=null&&(c[f]=1),n!=null&&(n[f]=h.h.construct(r.qa,r.ma)),f++),f==2||isNaN($)||m==0&&$==0||w==0&&$==1||(l!=null&&(l[f]=0),c!=null&&(c[f]=$),n!=null&&(n[f]=h.h.construct(o.ta,o.oa)),f++),f==2||isNaN(T)||m==1&&T==0||w==1&&T==1||(l!=null&&(l[f]=1),c!=null&&(c[f]=T),n!=null&&(n[f]=h.h.construct(r.qa,r.ma)),f++),0<f?(f==2&&l!=null&&l[0]>l[1]&&(o=l[0],l[0]=l[1],l[1]=o,c!=null&&(l=c[0],c[0]=c[1],c[1]=l),n!=null&&(c=h.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),f):(f=u.GM(o,r,p),isNaN(f.x)?0:(n!=null&&(n[0]=o.ic(f.x)),l!=null&&(l[0]=f.x),c!=null&&(c[0]=f.y),1))},u.prototype.$F=function(){return 0},u.prototype.qp=function(){},u.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},u}(h.NC);h.zb=k}(q||(q={})),function(h){var k=function(){function v(){this.Lm=[],this.za=-1}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var u=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),u}return this.Lm=null},v.prototype.VX=function(u){this.Lm.push(u)},v.prototype.re=function(){},v}();h.bL=k}(q||(q={})),function(h){var k;(k=h.NL||(h.NL={}))[k.enumFillRuleOddEven=0]="enumFillRuleOddEven",k[k.enumFillRuleWinding=1]="enumFillRuleWinding";var v=function(u){function o(r,n){var l=u.call(this)||this;if(l.yf=!1,l.Gq=null,l.uq=0,l.tq=0,l.Cj=null,l.Og=!1,l.nb=null,l.mb=null,l.Se=null,l.Nj=null,l.Td=null,l.vq=0,l.gb=0,l.zq=0,n===void 0)l.yf=r,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=h.fe.pg();else{if(n==null)throw h.i.O();l.yf=r,l.Og=!1,l.vq=0,l.uq=0,l.tq=0,l.xa=0,l.description=n}return l.Cj=null,l.gb=0,l}return wt(o,u),o.prototype.vm=function(){return 0<this.vq},o.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new h.Ta(this.description):this.Gq.Pf(this.description)},o.prototype.rx=function(r,n){var l=new h.h;l.x=r,l.y=n,this.Nt(l)},o.prototype.Nt=function(r){this.Xx(),this.Gq.Db(r),this.Og=!0},o.prototype.nf=function(r){if(r.B())throw h.i.O();this.Ll(r.description),this.Xx(),r.copyTo(this.Gq),this.Og=!0},o.prototype.Rx=function(){var r=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=h.Zc.Qh(2),this.nb.write(0,0),this.mb=h.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),r++);var n=this.xa;this.nb.write(this.nb.size-1,this.xa+r),this.fm(n+r),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(n,this.Gq),this.Og=!1)},o.prototype.Aj=function(r,n){this.Rx(),this.Db(this.xa-1,r,n)},o.prototype.Ei=function(r){this.Rx(),this.Db(this.xa-1,r)},o.prototype.lineTo=function(r){this.Rx(),this.It(this.xa-1,r)},o.prototype.xU=function(r){if(this.wc(),this.yf)throw h.i.Ra();var n=this.ea();if(r>n)throw h.i.Ra();if(this.ec(r)){if(this.mb==null)throw h.i.Ra();var l=this.xa,c=this.Ca(r),p=this.Wc(r);this.fm(this.xa+1),this.oc();for(var f=0,m=this.description.Ba;f<m;f++)if(this.Aa[f]!=null){var w=h.sa.Wa(this.description.Fd(f));this.Aa[f].On(w*p,this.Aa[f],w*c,w,!0,1,w*l)}for(;n>r;n--)l=this.nb.read(n),this.nb.write(n,l+1);this.mb.FE(r,1)}},o.prototype.Cp=function(){if(this.vx(),r===void 0){this.Og=!1;var r=this.ea()-1}var n=this.mb.read(r);this.mb.write(r,1|n),this.Se!=null&&(r=this.Wc(r)-1,this.Se.write(r,1),this.Nj.write(r,-1))},o.prototype.ec=function(r){return(1&this.mb.read(r))!=0},o.prototype.Pn=function(r){if(this.ec(r))return!0;var n=this.Ca(r);return!(n>(r=this.Wc(r)-1))&&(n=this.Oa(n),r=this.Oa(r),n.rb(r))},o.prototype.Av=function(r){return(2&this.mb.read(r))!=0},o.prototype.pc=function(r,n){if(this.Ll(r.description),r.K()!=322)throw h.i.Ra();var l=new h.Ta;(n||this.B())&&(r.Vo(l),this.nf(l)),r.Ro(l),this.lineTo(l)},o.prototype.vp=function(r){var n=this.xa==0;this.rx(r.v,r.G),this.Aj(r.v,r.H),this.Aj(r.C,r.H),this.Aj(r.C,r.G),this.Cp(),this.Og=!1,n&&this.Nf(256,!1)},o.prototype.bd=function(r,n){if(!r.B()){for(var l=this.xa==0,c=new h.Ta(this.description),p=0;4>p;p++)r.If(n?4-p-1:p,c),p==0?this.nf(c):this.lineTo(c);this.Cp(),this.Og=!1,l&&!n&&this.Nf(256,!1)}},o.prototype.add=function(r,n){for(var l=0;l<r.ea();l++)this.addPath(r,l,!n)},o.prototype.addPath=function(r,n,l){this.wf(-1,r,n,l)},o.prototype.$k=function(r,n){this.Cz(r,n)},o.prototype.Fr=function(r,n,l,c,p){if(p||this.ea()!=0||(p=!0),0>n&&(n=r.ea()-1),n>=r.ea()||0>l||0>c||c>r.tv(n))throw h.i.ga("index out of bounds");if(c!=0){var f=r.ec(n)&&l+c==r.tv(n);if(!f||c!=1){if(this.Og=!1,this.Ll(r.description),l=r.Ca(n)+l+1,p&&(c++,l--),f&&c--,f=this.xa,this.fm(this.xa+c),this.oc(),p){if(c==0)return;this.nb.add(this.xa),p=r.mb.read(n),p&=-5,this.yf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);p=0;for(var m=this.description.Ba;p<m;p++){var w=this.description.ld(p),$=h.sa.Wa(w),T=r.description.Rf(w);0>T||r.Aa[T]==null?this.Aa[p].Nn($*f,h.sa.te(w),c*$,$*f):this.Aa[p].On($*f,r.Aa[T],$*l,c*$,!0,$,$*f)}if(this.vm()||r.Av(n))throw h.i.Ra();this.Qc(1993)}}},o.prototype.jJ=function(){for(var r=0,n=this.ea();r<n;r++)this.zW(r)},o.prototype.zW=function(r){if(this.oc(),r>=this.ea())throw h.i.O();var n=this.Ca(r),l=this.Ka(r);r=this.ec(r)?1:0;for(var c=0,p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=h.sa.Wa(this.description.Fd(c));this.Aa[c].pi(f*(n+r),f*(l-r),f)}this.Qc(1993)},o.prototype.ar=function(r){this.oc();var n=this.ea();if(0>r&&(r=n-1),r>=n)throw h.i.O();for(var l=this.Ca(r),c=this.Ka(r),p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=h.sa.Wa(this.description.Fd(p));this.Aa[p].Gn(m*l,m*c,m*this.xa)}for(l=r+1;l<=n;l++)p=this.nb.read(l),this.nb.write(l-1,p-c);if(this.mb==null)for(l=r+1;l<=n;l++)r=this.mb.read(l),this.mb.write(l-1,r);this.nb.resize(n),this.mb.resize(n),this.xa-=c,this.Rg-=c,this.Qc(1993)},o.prototype.wf=function(r,n,l,c){if(n==this||l>=n.ea())throw h.i.O();var p=this.ea();if(r>p)throw h.i.O();0>r&&(r=p),0>l&&(l=n.ea()-1),this.Og=!1,this.Ll(n.description),n.oc();var f=n.Ca(l),m=n.Ka(l),w=this.xa,$=n.ec(l)&&!c?1:0;this.fm(this.xa+m),this.oc();for(var T=r<p?this.Ca(r):w,E=0,O=this.description.Ba;E<O;E++){var P=this.description.Fd(E),L=n.description.Rf(P),F=h.sa.Wa(P);0<=L&&n.Aa[L]!=null?($!=0&&this.Aa[E].On(T*F,n.Aa[L],F*f,F,!0,F,F*w),this.Aa[E].On((T+$)*F,n.Aa[L],F*(f+$),F*(m-$),c,F,F*(w+$))):this.Aa[E].Nn(T*F,h.sa.te(P),F*m,F*w)}for(this.nb.add(w+m),c=p;c>=r+1;c--)f=this.nb.read(c-1),this.nb.write(c,f+m);for(n.Av(l),this.mb.add(0),c=p-1;c>=r+1;c--)p=this.mb.read(c),p&=-5,this.mb.write(c+1,p);p=n.ER().read(l),p&=-5,this.yf&&(p|=1),this.mb.write(r,p)},o.prototype.Cz=function(r,n){var l=-1,c=this.ea();if(l>c)throw h.i.O();0>l&&(l=c),this.Og=!1;var p=this.xa;this.fm(this.xa+n),this.oc();var f=l<c?this.Ca(l):p;if(r!=null)this.Aa[0].Dz(2*f,r,0,n,!0,2*p);else{var m=h.sa.te(0);this.Aa[0].Nn(2*f,m,2*n,2*p)}r=1;for(var w=this.description.Ba;r<w;r++){m=this.description.ld(r);var $=h.sa.Wa(m);m=h.sa.te(m),this.Aa[r].Nn(f*$,m,$*n,$*p)}for(this.nb.add(this.xa),p=c;p>=l+1;p--)f=this.nb.read(p-1),this.nb.write(p,f+n);for(this.mb.add(0),p=c-1;p>=l+1;p--)n=this.mb.read(p),n&=-5,this.mb.write(p+1,n);this.yf&&this.mb.write(l,1)},o.prototype.lG=function(r,n,l){var c=-1;if(0>r&&(r=this.ea()),r>this.ea()||c>this.Ka(r)||l>n.length)throw h.i.ga("index out of bounds");if(l!=0){r==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ka(r)),this.oc();var p=this.xa;this.fm(this.xa+l),this.oc();for(var f=0,m=this.description.Ba;f<m;f++){var w=this.description.Fd(f),$=h.sa.Wa(w);this.Aa[f].Wt($*(this.Ca(r)+c+l),(p-this.Ca(r)-c)*$,this.Aa[f],$*(this.Ca(r)+c),!0,$),f==0?this.Aa[f].qC($*(this.Ca(r)+c),l,n,0,!0):this.Aa[f].Yj(h.sa.te(w),(this.Ca(r)+c)*$,l*$)}for(this.vm()&&(this.Se.Wt(this.Ca(r)+c+l,p-this.Ca(r)-c,this.Se,this.Ca(r)+c,!0,1),this.Nj.Wt(this.Ca(r)+c+l,p-this.Ca(r)-c,this.Nj,this.Ca(r)+c,!0,1),this.Se.Yj(1,this.Ca(r)+c,l),this.Nj.Yj(-1,this.Ca(r)+c,l)),r+=1,n=this.ea();r<=n;r++)this.nb.write(r,this.nb.read(r)+l)}},o.prototype.xf=function(r,n,l){var c=this.ea();if(0>r&&(r=this.ea()),r>=c||n>this.Ka(r))throw h.i.ga("index out of bounds");r==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ka(r));var p=this.xa;this.fm(this.xa+1),this.oc();var f=this.Ca(r);this.Aa[0].xj(2*(f+n),l,2*p),l=1;for(var m=this.description.Ba;l<m;l++){var w=this.description.Fd(l),$=h.sa.Wa(w);this.Aa[l].Nn($*(f+n),h.sa.te(w),$,$*p)}for(r+=1;r<=c;r++)this.nb.write(r,this.nb.read(r)+1)},o.prototype.yB=function(r,n){var l=this.ea();if(0>r&&(r=l-1),r>=l||n>=this.Ka(r))throw h.i.ga("index out of bounds");this.oc();var c=this.Ca(r);0>n&&(n=this.Ka(r)-1),n=c+n,c=0;for(var p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=h.sa.Wa(this.description.Fd(c));this.Aa[c].Gn(f*n,f,f*this.xa)}for(;l>=r+1;l--)n=this.nb.read(l),this.nb.write(l,n-1);this.xa--,this.Rg--,this.Qc(1993)},o.prototype.pE=function(r,n,l,c){if(r=this.Ca(r)+n,(l=this.Ca(l)+c)<r||0>r||l>this.I()-1)throw h.i.O();n=0,(c=this.Ha()).Wb(r);do{for(;c.Ia()&&(r=c.ia(),c.xb()!=l);)n+=r=r.Rb();if(c.xb()==l)break}while(c.ab());return n},o.prototype.aO=function(r,n,l){if(n=this.Ca(r)+n,l=this.Ca(r)+l,0>n||l>this.I()-1)throw h.i.O();var c=this.Ha();if(n>l){if(!this.ec(r))throw h.i.O("cannot iterate across an open path");c.EB()}var p=r=0;c.Wb(n);do p+=r,r=c.ia().Rb();while(c.xb()!=l);return p},o.prototype.ng=function(){return h.si.im(this,null)},o.prototype.FS=function(r,n,l){for(var c=r;c<l-1;c++)if(this.ec(c))throw h.i.O("cannot interpolate across closed paths");if((c=this.description.Ba)!=1){var p=this.pE(r,n,l,void 0);if(p!=0)for(var f=1;f<c;f++){var m=this.description.ld(f);if(h.sa.gz(m)!=2)for(var w=h.sa.Wa(m),$=0;$<w;$++)this.HS(m,r,n,l,p,$)}}},o.prototype.ES=function(r,n,l){var c=this.description.Ba;if(c!=1){var p=this.aO(r,n,l);if(p!=0)for(var f=1;f<c;f++){var m=this.description.ld(f);if(h.sa.gz(m)!=2)for(var w=h.sa.Wa(m),$=0;$<w;$++)this.GS(m,r,n,l,p,$)}}},o.prototype.HS=function(r,n,l,c,p,f){var m=this.Ha(),w=this.Ca(n)+l;c=this.Ca(c)+void 0,n=this.Vc(r,w,f),l=this.Vc(r,c,f);var $=n,T=0;m.Wb(w);do if(m.Ia()){if(m.ia(),m.xb()==c)break;this.setAttribute(r,m.xb(),f,$),m.ni();do{if(w=m.ia(),m.kk()==c)return;T+=w=w.Rb(),$=h.mc.jq(n,l,T/p),m.Qn()||this.setAttribute(r,m.kk(),f,$)}while(m.Ia())}while(m.ab())},o.prototype.GS=function(r,n,l,c,p,f){var m=this.Ha(),w=this.Ca(n)+l;if((n=this.Ca(n)+c)!=w){c=this.Vc(r,w,f),l=this.Vc(r,n,f);var $=0;m.Wb(w),m.EB(),w=c;do{var T=m.ia();this.setAttribute(r,m.xb(),f,w),$+=w=T.Rb(),w=h.mc.jq(c,l,$/p)}while(m.kk()!=n)}},o.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},o.prototype.Pc=function(r){r instanceof h.Ed?this.TD(r,-1):this.rN(r)},o.prototype.TD=function(r,n){if(!this.B()&&!r.isIdentity()){this.oc();var l=this.Aa[0],c=new h.h,p=new h.h;if(0>n){var f=this.vm(),m=0;n=this.xa}else f=this.Av(n),m=this.Ca(n),n=this.Wc(n);for(;m<n;m++){if(c.x=l.read(2*m),c.y=l.read(2*m+1),f){var w=this.Nj.read(m);if(0<=w)switch(7&this.Se.read(m)){case 2:p.x=this.Td.read(w),p.y=this.Td.read(w+1),r.Gh(p,p),this.Td.write(w,p.x),this.Td.write(w+1,p.y),p.x=this.Td.read(w+3),p.y=this.Td.read(w+4),r.Gh(p,p),this.Td.write(w+3,p.x),this.Td.write(w+4,p.y);break;case 4:throw h.i.Ra()}}r.Gh(c,c),l.write(2*m,c.x),l.write(2*m+1,c.y)}this.Qc(1993)}},o.prototype.rN=function(r){if(!this.B()){this.se(1),this.oc();for(var n=this.Aa[0],l=this.Aa[1],c=new h.Od,p=new h.Od,f=this.vm(),m=0;m<this.xa;m++){if(c.x=n.read(2*m),c.y=n.read(2*m+1),c.z=l.read(m),f){var w=this.Nj.read(m);if(0<=w)switch(7&this.Se.read(m)){case 2:p.x=this.Td.read(w),p.y=this.Td.read(w+1),p.z=this.Td.read(w+2),p=r.hp(p),this.Td.write(w,p.x),this.Td.write(w+1,p.y),this.Td.write(w+1,p.z),p.x=this.Td.read(w+3),p.y=this.Td.read(w+4),p.z=this.Td.read(w+5),p=r.hp(p),this.Td.write(w+3,p.x),this.Td.write(w+4,p.y),this.Td.write(w+5,p.z);break;case 4:throw h.i.Ra()}}c=r.hp(c),n.write(2*m,c.x),n.write(2*m+1,c.y),l.write(m,c.z)}this.Qc(1993)}},o.prototype.ey=function(){this.nb==null&&(this.nb=h.Zc.Qh(1,0),this.mb=h.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},o.prototype.qp=function(r){r.Og=!1,r.vq=this.vq,r.zq=this.zq,r.nb=this.nb!=null?h.ja.Dn(this.nb):null,r.mb=this.mb!=null?h.rn.Dn(this.mb):null,r.Nj=this.Nj!=null?h.ja.Dn(this.Nj):null,r.Se=this.Se!=null?h.rn.Dn(this.Se):null,r.Td=this.Td!=null?h.ce.Dn(this.Td):null,r.uq=this.uq,r.tq=this.tq,r.Cj=this.ck(1024)?null:this.Cj},o.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var r=this.Ha(),n=new h.Ex(0);r.ab();)for(;r.Ia();)n.add(r.ia().Rb());return this.uq=n.tm(),this.Nf(512,!1),n.tm()},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&u.prototype.Nb.call(this,r)))return!1;var n=this.ea();return!(n!=r.ea()||this.nb!=null&&!this.nb.Nb(r.nb,0,n+1)||this.zq!=r.zq||this.mb!=null&&!this.mb.Nb(r.mb,0,n))&&u.prototype.Nb.call(this,r)},o.prototype.Ha=function(){return new h.TL(this)},o.prototype.dy=function(r){if(u.prototype.dy.call(this,r),this.vm())for(r=this.Ha();r.ab();)r.Ia()},o.prototype.Ap=function(r,n){if(u.prototype.Ap.call(this,r,n),this.vm())for(r=this.Ha();r.ab();)r.Ia()},o.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},o.prototype.Gv=function(r){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(r)):(4&this.mb.read(r))!=0)},o.prototype.Kr=function(r){return this.yf?(this.zu(),this.Cj.read(r)):0},o.prototype.zu=function(){if(this.ck(1024)){var r=this.ea();this.Cj==null?this.Cj=new h.ce(r):this.Cj.size!=r&&this.Cj.resize(r),r=new h.Ex(0);for(var n=new h.Ex(0),l=new h.h,c=0,p=this.Ha();p.ab();){for(n.reset(),this.D(this.Ca(p.gb),l);p.Ia();)n.add(p.ia().Sx(l.x,l.y));r.add(n.tm());var f=c++;this.Cj.write(f,n.tm())}this.tq=r.tm(),this.Nf(1024,!1)}},o.prototype.AR=function(){if(this.yf){this.hm();for(var r=this.ea(),n=0;n<r;n++)4&this.mb.read(n)}},o.prototype.hm=function(){if(this.ck(8)){this.zu();var r=this.ea();(this.mb==null||this.mb.size<r)&&(this.mb=h.Zc.Or(r+1));for(var n=1,l=0;l<r;l++){var c=this.Cj.read(l);l==0&&(n=0<c?1:-1),0<c*n?this.mb.uJ(l,4):this.mb.FE(l,4)}this.Nf(8,!1)}},o.prototype.nz=function(r){var n=this.gb,l=this.ea();if(0<=n&&n<l){if(r<this.Wc(n)){if(r>=this.Ca(n))return n;n--}else n++;if(0<=n&&n<l&&r>=this.Ca(n)&&r<this.Wc(n))return this.gb=n}if(5>l){for(n=0;n<l;n++)if(r<this.Wc(n))return this.gb=n;throw h.i.ga("corrupted geometry")}for(n=0,--l;l>n;){var c=n+(l-n>>1);if(r<this.Ca(c))l=c-1;else{if(!(r>=(n=this.Wc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.sz=function(){var r=this.I();if(!this.yf){r-=this.ea();for(var n=0,l=this.ea();n<l;n++)this.ec(n)&&r++}return r},o.prototype.tv=function(r){var n=this.Ka(r);return this.ec(r)||n--,n},o.prototype.Ja=function(){return new o(this.yf,this.description)},o.prototype.Eb=function(){return this.yf?2:1},o.prototype.K=function(){return this.yf?1736:1607},o.prototype.LJ=function(r){this.nb=r,this.Qc(16777215)},o.prototype.QR=function(){return this.vx(),this.Se},o.prototype.ER=function(){return this.vx(),this.mb},o.prototype.KJ=function(r){this.mb=r,this.Qc(16777215)},o.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Wc=function(r){return this.nb.read(r+1)},o.prototype.Ka=function(r){return this.nb.read(r+1)-this.nb.read(r)},o.prototype.Ca=function(r){return this.nb.read(r)},o.prototype.nu=function(r,n){this.Cb==null&&(this.Cb=new h.Wk),n=h.Mx.kW(n);var l=this.Cb.Hk;if(l!=null){if(!(l.Kk<r||n>l.MR()))return!0;this.Cb.tD(null)}return l=h.Mx.create(this,r,n),this.Cb.tD(l),!0},o.prototype.dc=function(){var r=u.prototype.dc.call(this);if(!this.Bc()){var n=this.ea();this.nb!=null&&this.nb.Cn(r,0,n+1),this.mb!=null&&this.mb.Cn(r,0,n)}return r},o.prototype.UF=function(r){return this.Se!=null?this.Se.read(r):1},o.prototype.cc=function(r,n,l){var c=this.nz(r);if(r==this.Wc(c)-1&&!this.ec(c))throw h.i.ga("index out of bounds");this.oc();var p=this.Se,f=1;if(p!=null&&(f=7&p.read(r)),f!==1)throw h.i.Ra();if(n.Qr(),n=n.get(),l?n.Pf(h.fe.pg()):n.Pf(this.description),c=r==this.Wc(c)-1&&this.ec(c)?this.Ca(c):r+1,p=new h.h,this.D(r,p),n.Ec(p),this.D(c,p),n.Rc(p),!l)for(l=1,p=this.description.Ba;l<p;l++){f=this.description.Fd(l);for(var m=h.sa.Wa(f),w=0;w<m;w++){var $=this.Vc(f,r,w);n.TB(f,w,$),$=this.Vc(f,c,w),n.JB(f,w,$)}}},o.prototype.Tj=function(r,n){if(r>=this.ea())throw h.i.O();if(this.B())n.Pa();else{if(this.Av(r))throw h.i.ga("not implemented");var l=this.vb(0),c=new h.h,p=new h.l;p.Pa();var f=this.Ca(r);for(r=this.Wc(r);f<r;f++)l.uc(2*f,c),p.$b(c);n.L(p)}},o.prototype.hj=function(r){return this.Cb==null&&(this.Cb=new h.Wk),!(r==0||16>this.I())&&(r=h.ua.iE(this),this.Cb.RM(r),!0)},o.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new h.Wk),this.Cb.Bo==null){this.Cb.sD(null);var r=h.ua.TN(this);this.Cb.sD(r)}},o.prototype.$o=function(r){this.zq=r},o.prototype.Kn=function(){return this.zq},o.prototype.yD=function(r){if(this==r)throw h.i.ga("MultiPathImpl.add");for(var n=this.ea(),l=0;l<r.ea();l++)this.addPath(r,l,!0),this.xU(n),n++},o.prototype.fO=function(r){var n=this.nz(r),l=this.Ca(n);if(l!=r){if(r>=(n=this.Wc(n))||r<l)throw h.i.ga("change_ring_start_point");for(var c=0,p=this.description.Ba;c<p;c++){var f=this.description.ld(c);f=h.sa.Wa(f),this.Aa[c].rotate(l*f,r*f,n*f)}}},o}(h.Fx);h.Xk=v}(q||(q={})),function(h){var k=function(v){function u(o){var r=v.call(this)||this;if(o!==void 0){if(o==null)throw h.i.O();r.description=o}else r.description=h.fe.pg();return r.xa=0,r}return wt(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.add=function(o){this.resize(this.xa+1),this.Fh(this.xa-1,o)},u.prototype.Du=function(o,r){this.resize(this.xa+1);var n=new h.h;n.na(o,r),this.Db(this.xa-1,n)},u.prototype.Gd=function(o,r,n){if(n=0>n?o.I():n,0>r||r>o.I()||n<r)throw h.i.O();if(r!=n){this.Ll(o.description),n-=r;var l=this.xa;this.resize(this.xa+n),this.oc();for(var c=0,p=o.description.Ba;c<p;c++){var f=o.description.Fd(c),m=h.sa.Wa(f),w=this.vb(f);f=o.vb(f),w.On(l*m,f,r*m,n*m,!0,1,l*m)}}},u.prototype.CD=function(o,r){var n=o.length;if(r=0>r?n:r,0>n||0>r)throw h.i.O();if(r!=0){n=r-0,r=this.xa,this.resize(this.xa+n);for(var l=0;l<n;l++)this.Db(r+l,o[0+l])}},u.prototype.yB=function(o){if(0>o||o>=this.I())throw h.i.ga("index out of bounds");this.oc();for(var r=0,n=this.description.Ba;r<n;r++)if(this.Aa[r]!=null){var l=h.sa.Wa(this.description.Fd(r));this.Aa[r].Gn(l*o,l,l*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},u.prototype.resize=function(o){this.fm(o)},u.prototype.qp=function(){},u.prototype.Pa=function(){v.prototype.rD.call(this)},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(this.B())return;this.oc();for(var r=this.Aa[0],n=new h.h,l=0;l<this.xa;l++)n.x=r.read(2*l),n.y=r.read(2*l+1),o.Gh(n,n),r.write(2*l,n.x),r.write(2*l+1,n.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),r=this.Aa[0],n=this.Aa[1];var c=new h.Od;for(l=0;l<this.xa;l++){c.x=r.read(2*l),c.y=r.read(2*l+1),c.z=n.read(l);var p=o.hp(c);r.write(2*l,p.x),r.write(2*l+1,p.y),n.write(l,p.z)}}this.Qc(1993)},u.prototype.Eb=function(){return 0},u.prototype.K=function(){return 550},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.Nb=function(o){return o==this||o instanceof u&&v.prototype.Nb.call(this,o)},u.prototype.gW=function(o,r){var n=this.xa;if(n=Math.min(n,r+1e3),0>r||r>=this.xa||n<r||o.length!=1e3)throw h.i.O();var l=n-r,c=[];for(this.vb(0).Xw(2*r,2*l,c,0,!0),r=0;r<l;r++)o[r]=h.h.construct(c[2*r],c[2*r+1]);return n},u.prototype.Zx=function(){},u.prototype.ey=function(){},u.prototype.nu=function(){return!1},u.prototype.hj=function(){return!1},u.prototype.ng=function(){return null},u}(h.Fx);h.ee=k}(q||(q={})),function(h){var k;(k=h.dL||(h.dL={}))[k.NotDetermined=0]="NotDetermined",k[k.Structure=1]="Structure",k[k.DegenerateSegments=2]="DegenerateSegments",k[k.Clustering=3]="Clustering",k[k.Cracking=4]="Cracking",k[k.CrossOver=5]="CrossOver",k[k.RingOrientation=6]="RingOrientation",k[k.RingOrder=7]="RingOrder",k[k.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",k[k.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",k[k.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var v=function(){function u(o,r,n){o===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=o,this.Lo=r,this.Mo=n)}return u.prototype.Yt=function(o){this.Lj=o.Lj,this.Lo=o.Lo,this.Mo=o.Mo},u}();h.Nd=v}(q||(q={})),function(h){h.P=function(){function k(){}return k.assert=function(v){if(v===!1)throw h.i.BK()},k.XJ=function(v){return isNaN(v)?NaN:v===0?v:0<v?1:-1},k.Hu=function(v){var u;u===void 0&&(u=0);for(var o=[],r=0;r<v;r++)o[r]=k.mg(2,u);return o},k.mg=function(v,u){u===void 0&&(u=0);for(var o=[],r=0;r<v;r++)o[r]=u;return o},k.bv=function(v,u){var o,r;for(o===void 0&&(o=0),r===void 0&&(r=v.length-1);o<=r;o++)v[o]=u},k.Tk=function(v,u,o){return v<u?u:v>o?o:v},k.Vh=function(v,u){var o=5381;return((o=((o=((o=u!==void 0?(u<<5)+u+(255&v):(o<<5)+o+(255&v))<<5)+o+(v>>8&255))<<5)+o+(v>>16&255))<<5)+o+(v>>24&255)&2147483647},k.wj=function(){throw Error("Not Implemented")},k.XA=function(v){return k.WT(v)+12345&2147483647},k.SG=function(v){var u=32,o=v%k.Px|0,r=v/k.Px|0;return(u&=63)==0?v:(32>u?(v=o>>>u|r<<32-u,u=r>>u):(v=r>>u-32,u=0<=r?0:-1),u*k.Px+(v>>>0))},k.WT=function(v){var u=1103515245,o=65535&u;return((u-o)*(v|=0)|0)+(o*v|0)|0},k.truncate=function(v){return 0>v?-1*Math.floor(Math.abs(v)):Math.floor(v)},k.MAX_SAFE_INTEGER=Math.pow(2,53)-1,k.MIN_SAFE_INTEGER=-k.MAX_SAFE_INTEGER,k.QC=65536,k.Px=k.QC*k.QC,k}()}(q||(q={})),function(h){var k;(k=h.xL||(h.xL={}))[k.Project=0]="Project",k[k.Union=1]="Union",k[k.Difference=2]="Difference",k[k.Proximity2D=3]="Proximity2D",k[k.Relate=4]="Relate",k[k.Equals=5]="Equals",k[k.Disjoint=6]="Disjoint",k[k.Intersects=7]="Intersects",k[k.Within=8]="Within",k[k.Contains=9]="Contains",k[k.Crosses=10]="Crosses",k[k.Touches=11]="Touches",k[k.Overlaps=12]="Overlaps",k[k.Buffer=13]="Buffer",k[k.Distance=14]="Distance",k[k.Intersection=15]="Intersection",k[k.Clip=16]="Clip",k[k.Cut=17]="Cut",k[k.DensifyByLength=18]="DensifyByLength",k[k.DensifyByAngle=19]="DensifyByAngle",k[k.LabelPoint=20]="LabelPoint",k[k.GeodesicBuffer=21]="GeodesicBuffer",k[k.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",k[k.ShapePreservingDensify=23]="ShapePreservingDensify",k[k.GeodeticLength=24]="GeodeticLength",k[k.GeodeticArea=25]="GeodeticArea",k[k.Simplify=26]="Simplify",k[k.SimplifyOGC=27]="SimplifyOGC",k[k.Offset=28]="Offset",k[k.Generalize=29]="Generalize",k[k.SymmetricDifference=30]="SymmetricDifference",k[k.ConvexHull=31]="ConvexHull",k[k.Boundary=32]="Boundary",k[k.SimpleRelation=33]="SimpleRelation";var v=function(){function u(){}return u.prototype.K=function(){return null},u.prototype.yn=function(){},u.prototype.Ku=function(){return!1},u}();h.Ge=v}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,l,c){return o instanceof h.ba?(c=new h.$c(o),this.W(c,r,[n],!1,l).next()):l===!0?(n=new h.wC(o,r,n,!1,c),h.Ih.local().W(n,r,c)):new h.wC(o,r,n,!1,c)},u.instance=null,u}(h.Ge);h.vC=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n,l){this.za=-1,this.Sd=u,this.Vz=o,this.Es=r,this.nT=new h.l,this.nT.Pa(),this.ho=-1,this.Vb=l}return v.prototype.next=function(){for(var u;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(u,this.Es[this.ho]);return null},v.prototype.Ma=function(){return this.za},v.prototype.buffer=function(u,o){return h.CK.buffer(u,o,this.Vz,NaN,96,this.Vb)},v.prototype.re=function(){},v}();h.wC=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,l).next()):new h.gL(o,r,n,l)},u.instance=null,u}(h.Ge);h.fL=k}(q||(q={})),function(h){var k=function(){function v(u,o,r){if(this.za=-1,u==null)throw h.i.O();this.aa=o,this.Ak=u,this.ra=h.ua.Xd(r,o,!1)}return v.prototype.next=function(){var u;return(u=this.Ak.next())!=null?(this.za=this.Ak.Ma(),h.Vd.clip(u,this.aa,this.ra,0)):null},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();h.gL=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){return o instanceof h.ba?h.yC.mE(o):new h.yC(r,o,n)},u.instance=null,u}(h.Ge);h.xC=k}(q||(q={})),function(h){var k=function(){function v(u,o,r){if(this.pA=new h.au,this.za=-1,o==null)throw h.i.O();this.YG=u,this.Jc=!1,this.Ak=o,this.Vb=r}return v.prototype.next=function(){if(this.YG){if(!this.Jc){var u=this.ZN(this.Ak);return this.Jc=!0,u}return null}if(!this.Jc){if((u=this.Ak.next())!=null)return this.za=this.Ak.Ma(),v.mE(u);this.Jc=!0}return null},v.prototype.Ma=function(){return this.za},v.prototype.ZN=function(u){for(var o;(o=u.next())!=null;)this.pA.Ib(o);return this.pA.YQ()},v.prototype.re=function(){if(!this.Jc){if(!this.YG)throw h.i.ga("Invalid call for non merging convex hull.");var u=this.Ak.next();if(u==null)throw h.i.ga("Expects a non-null geometry.");this.pA.Ib(u)}},v.mE=function(u){if(v.QS(u))return u;var o=u.K();if(h.Xk.zd(o))return(o=new h.Ua(u.description)).pc(u,!0),o;if(o==550&&u.I()==2){var r=new h.Ta;return o=new h.Ua(u.description),u.we(0,r),o.nf(r),u.we(1,r),o.lineTo(r),o}return h.au.MO(u)},v.QS=function(u){if(u.B())return!0;var o=u.K();return o==33||o==197||!h.Xk.zd(o)&&(o==550?u.I()==1:o==1607?u.ea()==1&&2>=u.I():u.ea()==1&&(2>=u.I()||h.au.EG(u,0)))},v}();h.yC=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,l,c){return new h.iL(o,r,n,l,c)},u.instance=null,u}(h.Ge);h.hL=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n,l){if(this.Vf=null,o==null||r==null)throw h.i.ga("invalid argument");this.kT=u,this.iA=o,this.gH=r,u=h.ua.ov(o,r),this.ra=h.ua.Xd(n,u,!0),this.fH=-1,this.od=l}return v.prototype.Ma=function(){return 0},v.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},v.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},v.prototype.OQ=function(){var u=new h.Ua,o=new h.Ua,r=new h.Ua;this.Vf.push(u),this.Vf.push(o);var n=[];h.GK.EK(this.kT,this.iA,this.gH,this.ra,n,this.od);for(var l=0;l<n.length;l++){var c=n[l];if(c.ct==0)u.add(c.Y,!1);else if(c.ct==1||c.ct==2)o.add(c.Y,!1);else if(c.ct==3)this.Vf.push(c.Y);else{if(c.ct!=4)throw h.i.ga("internal");r.add(c.Y,!1)}}r.B()||u.B()&&o.B()&&!(3<=this.Vf.length)||this.Vf.push(r),u.B()&&o.B()&&3>this.Vf.length&&(this.Vf.length=0)},v.prototype.NQ=function(){var u=new h.ja(0),o=new h.hd,r=o.WE(),n=o.Ib(this.iA),l=o.Ib(this.gH),c=new h.Hg;try{c.Gt(o,this.ra,this.od),c.fl(r,n,l,u);var p=o.Ke(n),f=new h.Ea,m=new h.Ea;for(this.Vf.length=0,this.Vf.push(f),this.Vf.push(m),n=0;n<u.size;n++){var w=new h.hd,$=w.Ib(p),T=w.Ib(o.Ke(u.get(n)));c.fr(w,this.od);var E=c.Cv($,T),O=w.Ke(E);if(!O.B()){var P=o.FF(u.get(n),r);P==2?f.add(O,!1):P==1?m.add(O,!1):this.Vf.push(O);var L=new h.hd;$=L.Ib(p),T=L.Ib(o.Ke(u.get(n))),c.fr(L,this.od),p=L.Ke(c.km($,T))}}!p.B()&&0<u.size&&this.Vf.push(p),f.B()&&m.B()&&(this.Vf.length=0)}finally{c.Wg()}},v.prototype.re=function(){},v}();h.iL=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){if(o instanceof h.ba)return o=new h.$c(o),this.W(o,r,n).next();if(0>=r)throw h.i.O();return new h.jL(o,r,n)},u.instance=null,u}(h.Ge);h.Zl=k}(q||(q={})),function(h){var k=function(){function v(u,o){this.za=-1,this.Sd=u,this.Rs=o}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){var u;return(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(u)):null},v.prototype.IP=function(u){if(u.B()||1>u.Eb())return u;var o=u.K();if(o==1736||o==1607)return this.Iy(u);if(h.ba.zd(o))return this.KP(u);if(o==197)return this.JP(u);throw h.i.Ra()},v.prototype.KP=function(u){if(u.Rb()<=this.Rs)return u;var o=new h.Ua(u.description);return o.pc(u,!0),this.Iy(o)},v.prototype.JP=function(u){var o=new h.Ea(u.description);o.bd(u,!1);var r=new h.l;return u.A(r),u=r.da(),r.S()<=this.Rs&&u<=this.Rs?o:this.Iy(o)},v.prototype.Iy=function(u){for(var o=u.Ja(),r=u.Ha();r.ab();)for(var n=!0;r.Ia();){var l=r.ia();if(l.K()!=322)throw h.i.ga("not implemented");var c=r.Qn(),p=l.Rb();if(p>this.Rs){var f=Math.ceil(p/this.Rs);p=new h.Ta(u.description),n&&(l.Vo(p),o.nf(p));var m=n=1/f,w=0;for(--f;w<f;w++)l.Vw(m,p),o.lineTo(p),m+=n;c?o.Cp():(l.Ro(p),o.lineTo(p))}else c?o.Cp():o.pc(l,n);n=!1}return o},v.prototype.re=function(){},v}();h.jL=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 2},u.prototype.W=function(o,r,n,l){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,l).next()):new h.kL(o,r,n,l)},u.km=function(o,r,n,l){if(o.B()||r.B())return o;var c=o.Eb(),p=r.Eb();if(c>p)return o;var f=o.K(),m=r.K(),w=new h.l,$=new h.l,T=new h.l;o.A(w),r.A($),T.L(w),T.$b($);var E=(T=h.ua.Xd(n,T,!0))*Math.sqrt(2)*1.00001,O=new h.l;if(O.L(w),O.X(E,E),!O.isIntersecting($))return o;if(c==1&&p==2)return u.FV(o,r,m,n,l);if(f==33)switch(h.Xk.zd(m)?(n=new h.Ua(r.description),n.pc(r,!0)):n=r,m){case 1736:return u.SU(o,n,T);case 1607:return u.TU(o,n,T);case 550:return u.QU(o,n,T);case 197:return u.PU(o,n,T);case 33:return u.RU(o,n,T);default:throw h.i.O()}else if(f==550)switch(m){case 1736:return u.iU(o,r,T);case 197:return u.gU(o,r,T);case 33:return u.hU(o,r,T)}return h.Hg.km(o,r,n,l)},u.SU=function(o,r,n){return h.jd.FG(r,o,n)==0?o:o.Ja()},u.TU=function(o,r,n){var l=o.D();r=r.Ha();for(var c=n*Math.sqrt(2)*1.00001,p=c*c,f=new h.l;r.ab();)for(;r.Ia();){var m=r.ia();if(m.A(f),f.X(c,c),f.contains(l)){if(m.ss(l,n))return o.Ja();var w=m.bc();if(h.h.zc(l,w)<=p||(w=m.xc(),h.h.zc(l,w)<=p))return o.Ja()}}return o},u.QU=function(o,r,n){var l=r.vb(0);r=r.I();var c=o.D(),p=new h.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var f=0;f<r;f++)if(l.uc(2*f,p),h.h.zc(p,c)<=n)return o.Ja();return o},u.PU=function(o,r,n){var l=new h.l;return r.A(l),l.X(n,n),r=o.D(),l.contains(r)?o.Ja():o},u.RU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D();return r=r.D(),h.h.zc(l,r)<=n?o.Ja():o},u.iU=function(o,r,n){var l=new h.l;r.A(l),l.X(n,n);for(var c=o.I(),p=!1,f=[],m=0;m<c;m++)f[m]=!1;var w=new h.h;for(m=0;m<c;m++)o.D(m,w),l.contains(w)&&h.jd.Zd(r,w,n)!=0&&(p=!0,f[m]=!0);if(!p)return o;for(r=o.Ja(),m=0;m<c;m++)f[m]||r.Gd(o,m,m+1);return r},u.gU=function(o,r,n){var l=new h.l;r.A(l),l.X(n,n),r=o.I();var c=!1;n=[];for(var p=0;p<r;p++)n[p]=!1;var f=new h.h;for(p=0;p<r;p++)o.D(p,f),l.contains(f)&&(c=!0,n[p]=!0);if(!c)return o;for(l=o.Ja(),p=0;p<r;p++)n[p]||l.Gd(o,p,p+1);return l},u.hU=function(o,r,n){var l=o.vb(0),c=o.I(),p=r.D(),f=new h.h,m=!1;r=[];for(var w=0;w<c;w++)r[w]=!1;for(n=(w=n*Math.sqrt(2)*1.00001)*w,w=0;w<c;w++)l.uc(2*w,f),h.h.zc(f,p)<=n&&(m=!0,r[w]=!0);if(!m)return o;for(l=o.Ja(),w=0;w<c;w++)r[w]||l.Gd(o,w,w+1);return l},u.FV=function(o,r,n,l,c){var p=new h.Hh;o.dn(p);var f=new h.l;return r.A(f),p.$b(f),p.X(.1*p.S(),.1*p.da()),(f=new h.Ea).bd(p,!1),n==1736?f.add(r,!0):f.bd(r,!0),h.Zj.local().W(o,f,l,c)},u.instance=null,u}(h.Ge);h.mp=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n){this.vs=o==null,this.za=-1,this.Sd=u,this.Vz=r,this.rT=o.next(),this.Vb=n}return v.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.mp.km(u,this.rT,this.Vz,this.Vb)):null;var u},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();h.kL=k}(q||(q={})),function(h){var k=function(){function u(o){this.od=o,this.Dj=new h.l,this.Dj.Pa(),this.qh=new h.l,this.qh.Pa()}return u.prototype.Pt=function(){var o=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=o,o=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=o,o=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=o,o=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=o},u.prototype.$P=function(o,r){if(this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");var n=!this.Dj.isIntersecting(this.qh);return h.ba.Ic(o.K())&&h.ba.Ic(r.K())?o.I()>r.I()?this.bE(o,r,n):(this.Pt(),o=this.bE(r,o,n),this.Pt(),o):o.K()==550&&h.ba.Ic(r.K())?(o=this.cE(r,o,n),this.Pt(),o):r.K()==550&&h.ba.Ic(o.K())?this.cE(o,r,n):o.K()==550&&r.K()==550?o.I()>r.I()?this.dE(o,r):(this.Pt(),o=this.dE(r,o),this.Pt(),o):0},u.prototype.bE=function(o,r,n){var l=o.Ha(),c=r.Ha(),p=new h.l,f=new h.l,m=17976931348623157e292;if(!n&&this.lY(o,r,l,c))return 0;for(;l.ab();)for(;l.Ia();)if((o=l.ia()).A(p),!(p.px(this.qh)>m)){for(;c.ab();)for(;c.Ia();)if((r=c.ia()).A(f),p.px(f)<m&&(r=o.ub(r,n),(r*=r)<m)){if(r==0)return 0;m=r}c.aj()}return Math.sqrt(m)},u.prototype.cE=function(o,r,n){var l=o.Ha(),c=new h.l,p=17976931348623157e292,f=new h.h,m=r.I();for(n=!n&&o.K()==1736;l.ab();)for(;l.Ia();){var w=l.ia();if(w.A(c),!(1<m&&c.px(this.qh)>p)){for(var $=0;$<m;$++){if(r.D($,f),n&&h.jd.Zd(o,f,0)!=0)return 0;var T=w.ge(f,!1);if(f.sub(w.ic(T)),(T=f.Uk())<p){if(T==0)return 0;p=T}}n=!1}}return Math.sqrt(p)},u.prototype.dE=function(o,r){for(var n,l=17976931348623157e292,c=new h.h,p=new h.h,f=o.I(),m=r.I(),w=0;w<f;w++)if(o.D(w,c),!(1<m&&this.qh.dK(c)>l)){for(var $=0;$<m;$++)if(r.D($,p),(n=h.h.zc(c,p))<l){if(n==0)return 0;l=n}}return Math.sqrt(l)},u.prototype.lY=function(o,r,n,l){if(o.K()==1736){for(;l.ab();)if(l.Ia()){var c=l.ia();if(h.jd.Zd(o,c.xc(),0)!=0)return!0}l.aj()}if(r.K()==1736){for(;n.ab();)if(n.Ia()&&(o=n.ia(),h.jd.Zd(r,o.xc(),0)!=0))return!0;n.aj()}return!1},u.prototype.im=function(o,r){return o.B()||r.B()?NaN:(o.A(this.Dj),r.A(this.qh),this.$P(o,r))},u}(),v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return wt(o,u),o.prototype.W=function(r,n,l){if(r==null||n==null)throw h.i.O();if(r.B()||n.B())return NaN;var c=r.K(),p=n.K();if(c==33){if(p==33)return h.h.ub(r.D(),n.D());if(p==197)return l=new h.l,n.A(l),l.ub(r.D());(c=new h.ee).add(r),r=c}else if(c==197){if(p==197)return p=new h.l,r.A(p),l=new h.l,n.A(l),l.ub(p);(c=new h.Ea).bd(r,!1),r=c}return p==33?((p=new h.ee).add(n),n=p):p==197&&((p=new h.Ea).bd(n,!1),n=p),new k(l).im(r,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 14},o.instance=null,o}(h.Ge);h.lL=v}(q||(q={})),function(h){var k=function(){function v(u,o,r,n){this.uH=u,this.yH=o,this.od=n,this.VG=r}return v.prototype.next=function(){var u=this.uH.next();return u==null?null:this.uC(u)},v.prototype.Ma=function(){return this.uH.Ma()},v.prototype.uC=function(u){var o=u.K();if(h.ba.Tn(o))return u;if(o==197)return(o=new h.Ea(u.description)).bd(u,!1),this.uC(o);if(u.B())return u;if(u==null)throw h.i.Ra();o=u.Ja();for(var r=new h.zb,n=0,l=u.ea();n<l;n++)this.OK(u,n,o,r);return o},v.prototype.OK=function(u,o,r,n){if(!(2>u.Ka(o))){var l=u.Ca(o),c=u.Wc(o)-1,p=u.vb(0),f=u.ec(o),m=new h.ja(0);m.Jb(u.Ka(o)+1);var w=new h.ja(0);for(w.Jb(u.Ka(o)+1),m.add(f?l:c),m.add(l),l=new h.h;1<m.size;){var $=m.Gc();m.Jf();var T=m.Gc();u.D($,l),n.Ec(l),u.D(T,l),n.Rc(l),0<=(T=this.NK(n,l,p,$,T,c))?(m.add(T),m.add($)):w.add($)}if(f||w.add(m.get(0)),w.size==m.size)r.addPath(u,o,!0);else if(2<=w.size&&(!this.VG||w.size!=2||!(f||h.h.ub(u.Oa(w.get(0)),u.Oa(w.get(1)))<=this.yH))){for(o=new h.Ta,n=0,c=w.size;n<c;n++)u.we(w.get(n),o),n==0?r.nf(o):r.lineTo(o);f&&(this.VG||w.size!=2||r.lineTo(o),r.Cp())}}},v.prototype.NK=function(u,o,r,n,l,c){var p=l-1;for(l<=n&&(p=c),c=l=-1,n+=1;n<=p;n++){r.uc(2*n,o);var f=o.x,m=o.y;u.ic(u.ge(o,!1),o),o.x-=f,o.y-=m,(f=o.length())>this.yH&&f>c&&(l=n,c=f)}return l},v.prototype.re=function(){},v}();h.mL=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 29},u.prototype.W=function(o,r,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,l).next()):new h.mL(o,r,n,l)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.zC=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,l,c,p,f,m){return o instanceof h.ba?(m=new h.$c(o),this.W(m,r,n,[l],c,p,!1,f).next()):f===!0?(n=new h.BC(o,r,n,l,c,!1,!1,m),h.Ih.local().W(n,r,m)):new h.BC(o,r,n,l,c,!1,!1,m)},u.instance=null,u}(h.Ge);h.AC=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n,l,c,p,f){if(c)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Os=u,this.wg=o,this.Ae=r,this.Es=n,this.bo=l,this.ho=-1,this.Vb=f,this.oT=new h.l,this.oT.Pa()}return v.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(u,this.Es[this.ho]);return null},v.prototype.Ma=function(){return this.za},v.prototype.VQ=function(u,o){return h.QK.buffer(u,this.wg,this.Ae,o,this.bo,this.Vb)},v.prototype.re=function(){},v}();h.BC=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){if(r==null)throw h.i.O();if(o.B()||1>o.Eb())return 0;if(n==4)throw h.i.Fe();var l=h.cb.tc(r),c=h.cb.xv(l),p=h.cb.gv(l);c*=2-c;var f=l.Id().ci,m=o.K();if(m==1736||m==197)var w=o.ng();else h.ba.zd(m)?(w=new h.Ua(o.description)).pc(o,!0):w=o;if(l.Nb(r)==0){if(h.cb.Xc(r)){w=h.Jh.nj(w,r),m==1607&&w==o&&(w=h.ba.kg(o)),o=new h.Oc,h.cb.ih(r).en(o),m=0;for(var $=w.I();m<$;m++){var T=w.Oa(m);T.x=h.Jh.an(T.x,o),w.Db(m,T)}}o=w.Ja(),w=h.Jh.RI(r,l,w,o)?o:h.cb.Bh(w,r,l)}return this.cQ(w,n,p,c,f)},u.prototype.cQ=function(o,r,n,l,c){var p=new h.ha(0),f=0;for(o=o.Ha();o.ab();)for(;o.Ia();){var m=o.ia(),w=m.bc();m=m.xc(),w.scale(c),m.scale(c),h.kb.xd(n,l,w.x,w.y,m.x,m.y,p,null,null,r),f+=p.u}return f},u.instance=null,u}(h.Ge);h.qL=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,l,c){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,l,c).next()):new h.oL(o,n,l,r,-1,-1,c)},u.instance=null,u}(h.Ge);h.nL=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n,l,c){if(0<c||r!=4&&0<l)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Os=u,this.wg=o,this.Ae=r,this.yT=n,this.xT=l}return v.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(u);return null},v.prototype.Ma=function(){return this.za},v.prototype.Uy=function(u){return h.ej.Sr(u,this.wg,this.Ae,this.yT,this.xT,this.Vb)},v.prototype.re=function(){},v}();h.oL=k}(q||(q={})),function(h){(function(k){k[k.Unknown=0]="Unknown",k[k.Contains=1]="Contains",k[k.Within=2]="Within",k[k.Equals=3]="Equals",k[k.Disjoint=4]="Disjoint",k[k.Touches=8]="Touches",k[k.Crosses=16]="Crosses",k[k.Overlaps=32]="Overlaps",k[k.NoThisRelation=64]="NoThisRelation",k[k.Intersects=1073741824]="Intersects",k[k.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.YK||(h.YK={})),h.rL=function(){function k(){}return k.iW=function(v,u){var o=v.K(),r=u.K();if(h.ba.zj(o)){var n=v.Cb;if(n!=null&&(n=n.Hk)!=null){if(r==33){var l=u.D();n=n.Uo(l.x,l.y)}else l=new h.l,u.A(l),n=n.To(l);if(n==1)return 1;if(n==0)return 4}}if(h.ba.zj(r)&&(n=u.Cb)!=null&&(n=n.Hk)!=null){if(o==33?(v=v.D(),n=n.Uo(v.x,v.y)):(u=new h.l,v.A(u),n=n.To(u)),n==1)return 2;if(n==0)return 4}return 0},k}()}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 15},u.prototype.W=function(o,r,n,l,c){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,l,c===void 0?-1:c).next()):c===void 0?new h.CC(o,r,n,l,-1):new h.CC(o,r,n,l,c)},u.prototype.yn=function(o,r,n){this.Ku(o)&&(r=h.ua.mj(r,o,!1),o.hj(n)||o.nu(r,n))},u.prototype.Ku=function(o){return h.Mx.uE(o)},u.instance=null,u}(h.Ge);h.Zj=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n,l){if(this.vs=o==null,this.za=-1,this.Sd=u,this.wg=r,this.Pe=o.next(),this.Fj=this.Pe.K(),this.Vb=n,this.Hi=l,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw h.i.O("bad dimension mask")}return v.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var u=this.Bw.next();if(u!=null)return u;this.Bw=null}for(;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?u=this.Fa(u):(this.Bw=this.KS(u),u=this.Bw.next()),u;return null},v.prototype.Ma=function(){return this.za},v.prototype.Fa=function(u){var o=this.uK(u);if(o!=null)return o;o=h.ua.ov(this.Pe,u);var r=h.ua.Xd(this.wg,o,!0);o=new h.l,this.Pe.A(o);var n=new h.l;return u.A(n),o.X(2*r,2*r),o.Fa(n),o.X(100*r,100*r),r=h.Vd.clip(this.Pe,o,0,0),u=h.Vd.clip(u,o,0,0),h.Hg.Cv(u,r,this.wg,this.Vb)},v.prototype.KI=function(u,o,r){var n=0;if(1&o)r[0]==null&&(r[0]=new h.ee(u)),n++;else for(var l=0;l<r.length-1;l++)r[l]=r[l+1];if(2&o)r[n]==null&&(r[n]=new h.Ua(u)),n++;else for(l=n;l<r.length-1;l++)r[l]=r[l+1];if(4&o)r[n]==null&&(r[n]=new h.Ea(u)),n++;else for(l=n;l<r.length-1;l++)r[l]=r[l+1];if(n!=3){for(u=[],l=0;l<n;l++)u[l]=r[l];return new h.$c(u)}return new h.$c(r)},v.prototype.KS=function(u){var o=this.uK(u);if(o!=null){var r=[null,null,null];return r[o.Eb()]=o,this.KI(u.description,this.Hi,r)}o=h.ua.ov(this.Pe,u),r=h.ua.Xd(this.wg,o,!0),o=new h.l,this.Pe.A(o),o.X(2*r,2*r);var n=new h.l;return u.A(n),o.Fa(n),o.X(100*r,100*r),r=h.Vd.clip(this.Pe,o,0,0),o=h.Vd.clip(u,o,0,0),r=h.Hg.Kz(o,r,this.wg,this.Vb),this.KI(u.description,this.Hi,r)},v.prototype.uK=function(u){var o=h.ua.ov(u,this.Pe),r=h.ua.Xd(this.wg,o,!0);o=u.K();var n=u.B(),l=this.Pe.B();if(!(l=n||l)){l=new h.l,u.A(l);var c=new h.l;this.Pe.A(c),c.X(2*r,2*r),l=!l.isIntersecting(c)}if(!l)if((c=h.rL.iW(this.Pe,u))==4)l=!0;else{if(2&c)return this.Pe;if(1&c)return u}if(l)return(r=h.ba.uf(o))<(l=h.ba.uf(this.Fj))?v.CB(u,n):r>l||r==0&&o==550&&this.Fj==33?this.iJ():v.CB(u,n);if((this.Hi==-1||this.Hi==4)&&o==197&&this.Fj==197)return r=this.Pe,o=new h.l,u.A(o),n=new h.l,r.A(n),o.Fa(n),r=new h.Hh,u.copyTo(r),r.Zo(o),r;if(o==197&&h.ba.uf(this.Fj)==0||this.Fj==197&&h.ba.uf(o)==0)return n=o==197?u:this.Pe,u=o==197?this.Pe:u,o=new h.l,n.A(o),h.Vd.clip(u,o,r,0);if(h.ba.uf(o)==0&&0<h.ba.uf(this.Fj)||0<h.ba.uf(o)&&h.ba.uf(this.Fj)==0){if(r=h.ua.mj(this.wg,u,!1),o==550||o==33)return h.Hg.uG(u,this.Pe,r);if(this.Fj==550||this.Fj==33)return h.Hg.uG(this.Pe,u,r);throw h.i.Ra()}return this.Hi!=-1&&this.Hi!=2||o!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||o!=1736||this.Fj!=1607?null:this.rK(this.Pe,u):this.rK(u,this.Pe)},v.prototype.rK=function(u,o){var r=u,n=o,l=h.ua.mj(this.wg,o,!1),c=new h.l;n.A(c);var p=new h.l;r.A(p),p.X(2*l,2*l),c.Fa(p),c.X(10*l,10*l),r=u=h.Vd.clip(u,c,0,0),p=new h.ja(0);var f=-1,m=n.Cb;if(m!=null){var w=m.Hk;if(w!=null){f=0,p.Jb(r.I()+r.ea());for(var $=new h.l,T=r.Ha();T.ab();)for(;T.Ia();){T.ia().A($);var E=w.To($);E==1?p.add(1):E==0?p.add(0):(p.add(-1),f++)}}}if(5<o.I()&&(m=(n=o=h.Vd.clip(o,c,0,0)).Cb),0>f&&(f=r.sz()),c=r.I()+n.I(),f*n.I()>Math.log(c)*c*4)return null;c=null,f=n.Ha(),m!=null&&m.Gb!=null&&(c=m.Gb),c==null&&20<n.I()&&(c=h.ua.iE(n)),u=u.Ja(),n=null,m=r.Ha(),w=[0,0,0,0,0,0,0,0,0],$=new h.ce(0),T=new h.jg,E=-1;for(var O=0,P=0,L=0<p.size,F=-1;m.ab();){F=m.gb;var z=0;for(E=-1,O=0;m.Ia();){var R=L?h.P.truncate(p.get(P)):-1;P++;var G=m.ia();if(0>R){if(c!=null)for(n==null?n=c.qR(G,l):n.Wo(G,l),R=n.next();R!=-1;R=n.next()){f.Wb(c.ka(R)),R=f.ia();var H=G.Fa(R,null,w,null,l);for(R=0;R<H;R++)$.add(w[R])}else for(f.aj();f.ab();)for(;f.Ia();)for(R=f.ia(),H=G.Fa(R,null,w,null,l),R=0;R<H;R++)$.add(w[R]);if(0<$.size){$.Wd(0,$.size,function(pe,he){return pe-he});var B=0;$.add(1),H=-1,R=0;for(var te=$.size;R<te;R++){var Q=$.get(R);if(Q!=B){var ne=!1;if(B!=0||Q!=1?(G.dh(B,Q,T),B=T.get()):(B=G,ne=!0),2<=z){if(u.Fr(r,F,E,O,z==3),this.LD(o,B.bc(),l)!=1&&this.MD(o,B,l)!=1)return null;u.pc(B,!1),z=1,O=0}else switch(H=this.MD(o,B,l),H){case 1:ne?2>z?(E=m.xb()-r.Ca(F),O=1,z=z==0?3:2):O++:(u.pc(B,z==0),z=1);break;case 0:z=0,E=-1,O=0;break;default:return null}B=Q}}}else{if(0>(R=this.LD(o,G.bc(),l)))return null;R==1?(2>z&&(E=m.xb()-r.Ca(F),z=z==0?3:2),O++):(E=-1,O=0)}$.clear(!1)}else R!=0&&R==1&&(z==0?(z=3,E=m.xb()-r.Ca(F)):z==1?(z=2,E=m.xb()-r.Ca(F)):O++)}2<=z&&(u.Fr(r,F,E,O,z==3),E=-1)}return u},v.prototype.LD=function(u,o,r){return h.Fg.ym(u,o,r)},v.prototype.MD=function(u,o,r){var n=o.bc();o=o.xc();var l=h.Fg.ym(u,n,r),c=h.Fg.ym(u,o,r);return l==1&&c==0||l==0&&c==1?-1:l==0||c==0?0:l==1||c==1?1:((l=new h.h).add(n,o),l.scale(.5),(u=h.Fg.ym(u,l,r))==0?0:u==1?1:-1)},v.CB=function(u,o){return o?u:u.Ja()},v.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},v.prototype.re=function(){},v}();h.CC=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,l,c,p,f){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,l,c,p,f).next()):new h.sL(o,r,n,l,c,p,f)},u.instance=null,u}(h.Ge);h.DC=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n,l,c,p){this.za=-1,this.Sd=u,this.Oj=o,this.La=r,this.Mi=n,this.xA=l,this.pH=c,this.od=p}return v.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),this.eL(u)):null},v.prototype.Ma=function(){return this.za},v.prototype.eL=function(u){var o=0>=this.pH?h.ua.mj(this.Oj,u,!1):this.pH;return h.DK.W(u,this.La,this.Mi,this.xA,o,this.od)},v.prototype.re=function(){},v}();h.sL=k}(q||(q={})),function(h){var k;(k=h.IK||(h.IK={}))[k.clipToDomainOnly=1]="clipToDomainOnly",k[k.clipWithHorizon=2]="clipWithHorizon",k[k.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return wt(o,u),o.prototype.K=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.W=function(r,n,l){return r instanceof h.ba?(r=new h.$c(r),this.W(r,n,l).next()):new h.tL(r,n,l)},o.prototype.transform=function(r,n,l,c){return h.du.transform(r,n,l,c,!0)},o.prototype.St=function(r,n,l,c){return h.du.St(r,n,l,c)},o.instance=null,o}(h.Ge);h.Gx=v}(q||(q={})),function(h){var k=function(){function v(u,o,r){this.za=-1,this.Sd=u,this.HT=o,this.od=r}return v.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),h.du.Bh(u,this.HT,this.od)):null},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();h.tL=k}(q||(q={})),function(h){var k=function(){function u(){}return u.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},u.prototype.vQ=function(o,r,n){for(o.Wb(r,n);o.Ia();){var l=o.ia();if((l=l.Rb())!=0)return o.xb()}for(o.Wb(r,n);o.zz();)if((l=(l=o.ni()).Rb())!=0)return o.xb();return-1},u.prototype.wQ=function(o,r){for(o.Wb(r,-1);o.zz();)if(o.ni().Rb()!=0)return o.xb();return-1},u.prototype.uQ=function(o,r){for(o.Wb(r,-1),o.ia();o.Ia();)if(o.ia().Rb()!=0)return o.xb();return-1},u.prototype.tQ=function(o,r,n,l){if(this.zk=this.vQ(r,n,l),this.zk!=-1){r.Wb(this.zk,-1);var c=r.ia(),p=c.ic(c.ge(o,!1));if(n=h.h.zc(p,o),(l=new h.h).N(p),l.sub(c.bc()),(p=new h.h).N(o),p.sub(c.bc()),this.mq=0>l.yi(p),this.rh=this.uQ(r,this.zk),this.rh!=-1){r.Wb(this.rh,-1);var f=(c=r.ia()).ge(o,!1);f=c.ic(f);var m=h.h.zc(f,o);m>n?this.rh=-1:(l.N(f),l.sub(c.bc()),p.N(o),p.sub(c.bc()),this.ws=0>l.yi(p))}this.rh==-1&&(this.rh=this.wQ(r,this.zk),this.rh!=-1&&(r.Wb(this.rh,-1),f=(c=r.ia()).ge(o,!1),f=c.ic(f),(m=h.h.zc(f,o))>n?this.rh=-1:(l.N(f),l.sub(c.bc()),p.N(o),p.sub(c.bc()),this.ws=0>l.yi(p),o=this.zk,this.zk=this.rh,this.rh=o,o=this.mq,this.mq=this.ws,this.ws=o)))}},u.prototype.YN=function(o,r,n,l,c){return n=n.Ha(),this.tQ(o,n,l,c),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(n.Wb(this.zk,-1),o=n.ia().lg(),n.Wb(this.rh,-1),r=n.ia().lg(),0<=o.yi(r)):r},u}(),v=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return wt(o,u),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 3},o.prototype.iz=function(r,n,l){var c;if(c===void 0&&(c=!1),r.B())return new h.bm;n=n.D();var p=r,f=r.K();switch(f==197&&((p=new h.Ea).bd(r,!1),f=1736),f){case 33:return this.sI(p,n);case 550:return this.eI(p,n);case 1607:case 1736:return this.XT(p,n,l,c);default:throw h.i.ga("not implemented")}},o.prototype.jz=function(r,n){if(r.B())return new h.bm;n=n.D();var l=r,c=r.K();switch(c==197&&((l=new h.Ea).bd(r,!1),c=1736),c){case 33:return this.sI(l,n);case 550:case 1607:case 1736:return this.eI(l,n);default:throw h.i.ga("not implemented")}},o.prototype.kz=function(r,n,l,c){if(0>c)throw h.i.O();if(r.B())return[];n=n.D();var p=r,f=r.K();switch(f==197&&((p=new h.Ea).bd(r,!1),f=1736),f){case 33:return this.OU(p,n,l,c);case 550:case 1607:case 1736:return this.oU(p,n,l,c);default:throw h.i.ga("not implemented")}},o.prototype.XT=function(r,n,l,c){if(r.K()==1736&&l&&(l=new h.l,r.A(l),l=h.ua.Xd(null,l,!1),(c?h.jd.Zd(r,n,0):h.jd.Zd(r,n,l))!=0)){var p=new h.bm(n,0,0);return c&&p.RJ(!0),p}var f=r.Ha();p=new h.h;for(var m=l=-1,w=17976931348623157e292,$=0;f.ab();)for(;f.Ia();){var T=f.ia();T=T.ic(T.ge(n,!1));var E=h.h.zc(T,n);E<w?($=1,p=T,l=f.xb(),m=f.gb,w=E):E==w&&$++}return p=new h.bm(p,l,Math.sqrt(w)),c&&(f.Wb(l,m),T=f.ia(),c=0>h.h.Wq(n,T.bc(),T.xc()),1<$&&(($=new k).reset(),c=$.YN(n,c,r,l,m)),p.RJ(c)),p},o.prototype.sI=function(r,n){return r=r.D(),n=h.h.ub(r,n),new h.bm(r,0,n)},o.prototype.eI=function(r,n){for(var l=r.vb(0),c=r.I(),p=r=0,f=0,m=17976931348623157e292,w=0;w<c;w++){var $=new h.h;l.uc(2*w,$);var T=h.h.zc($,n);T<m&&(p=$.x,f=$.y,r=w,m=T)}return(n=new h.bm).by(p,f,r,Math.sqrt(m)),n},o.prototype.OU=function(r,n,l,c){return c==0?[]:(l*=l,r=r.D(),(n=h.h.zc(r,n))<=l?(l=[],(c=new h.bm).by(r.x,r.y,0,Math.sqrt(n)),l[0]=c):l=[],l)},o.prototype.oU=function(r,n,l,c){if(c==0)return[];var p=r.vb(0),f=r.I();r=[],l*=l;for(var m=0;m<f;m++){var w=p.read(2*m),$=p.read(2*m+1),T=n.x-w,E=n.y-$;(T=T*T+E*E)<=l&&((E=new h.bm).by(w,$,m,Math.sqrt(T)),r.push(E))}return n=r.length,r.sort(function(O,P){return O.La<P.La?-1:O.La==P.La?0:1}),c>=n||(r.length=c),r.slice(0)},o.instance=null,o}(h.Ge);h.Hx=v}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 4},u.prototype.W=function(o,r,n,l,c){return h.cm.tB(o,r,n,l,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(o){return h.Xt.ry(o)},u.prototype.yn=function(o,r,n){h.Xt.xD(o,r,n)},u.instance=null,u}(h.Ge);h.uL=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 33},u.prototype.W=function(o,r,n,l,c){return o===1073741824?!h.vd.uB(r,n,l,4,c):h.vd.uB(r,n,l,o,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(o){return h.Xt.ry(o)},u.prototype.yn=function(o,r,n){h.Xt.xD(o,r,n)},u.instance=null,u}(h.Ge);h.fj=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n){if(this.od=n,this.lT=r,this.za=-1,u==null)throw h.i.O();this.Ak=u,this.Oj=o}return v.prototype.next=function(){var u;if((u=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw h.i.hu("user_canceled");return this.$B(u)}return null},v.prototype.Ma=function(){return this.za},v.prototype.$B=function(u){if(u==null)throw h.i.O();return h.Ix.YJ(u,this.Oj,this.lT,this.od)},v.prototype.re=function(){},v}();h.vL=k}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 26},u.prototype.W=function(o,r,n,l){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,l).next()):new h.vL(o,r,n,l)},u.prototype.ts=function(o,r,n,l,c){return 0<(l!==void 0?h.Ix.ts(o,r,n,l,c):h.Ix.ts(o,r,!1,null,n))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.$l=k}(q||(q={})),function(h){var k=function(){function c(){this.Aq=0}return c.prototype.iX=function(p){this.Aq&=-2,this.Aq|=p?1:0},c.prototype.Yp=function(){return(1&this.Aq)!=0},c.prototype.SF=function(){return this.Yp()?0:1},c}();h.tY=k;var v=function(){},u=function(c,p,f,m){this.x=c,this.y=p,this.Ci=f,this.zm=m},o=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,m){return p=p.ka(m),f=this.Ce.lf.read(2*f),0>(f-=p=this.Ce.lf.read(2*p))?-1:0<f?1:0},c}(),r=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,m){f=this.Ce.hb[f],p=this.Ce.hb[p.ka(m)];var w=f.Yp(),$=p.Yp();m=f.oe.Me(this.Ce.Oo,0);var T=p.oe.Me(this.Ce.Oo,0);return m==T&&((w=.5*((m=Math.min(w?f.oe.oa:f.oe.ma,$?p.oe.oa:p.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(w=m),m=f.oe.Me(w,0),T=p.oe.Me(w,0)),m<T?-1:m>T?1:0},c}(),n=function(){function c(p,f){this.TI=new h.h,this.parent=p,this.ZR=f}return c.prototype.qr=function(p,f,m){var w=this.parent,$=this.ZR;m.Wd(p,f,function(T,E){return w.Oh(T,E,$)})},c.prototype.bq=function(p){return p=this.parent.ii.get(p),this.parent.lf.uc(2*(p>>1),this.TI),this.TI.y+(1&p?this.parent.Qj:-this.parent.Qj)},c}(),l=function(){function c(p,f,m,w,$){this.iH=p.description,this.Y=p,this.Sg=f,this.Qj=h.ua.mj(this.Sg,p,!1),this.Do=h.ua.mj(this.Sg,p,!0),this.sA=m,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new h.lp,this.fb=new h.$j,this.le=new h.Nd,this.UG=this.sl=$}return c.prototype.$S=function(){return this.UG=!0,(!h.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?h.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},c.prototype.fC=function(p,f){var m=this.lf.read(2*p);p=this.lf.read(2*p+1);var w=this.lf.read(2*f);f=this.lf.read(2*f+1);var $=!h.$t.Ev(m,p,w,f,this.Qj*this.Qj);return $||this.Y.Eb()!=0&&m==w&&p==f},c.prototype.BE=function(){for(var p=this.Y,f=p.yf?3:2,m=0,w=p.ea();m<w;m++)if(p.Ka(m)<f)return this.le=new h.Nd(1,m,0),!1;return!0},c.prototype.yE=function(p){var f=this.Y,m=f.Ha(),w=f.hasAttribute(1);for(f=w?h.ua.rE(this.Sg,f,!1):0;m.ab();)for(;m.Ia();){var $=m.ia();if(!($.Rb()>this.Qj)){if(p&&w){var T=$.yv(1,0);if($=$.yv(1,0),Math.abs($-T)>f)continue}return this.le=new h.Nd(2,m.xb(),-1),!1}}return!0},c.prototype.hO=function(){var p=this.Y,f=null;h.ba.Ic(this.Y.K())&&(f=this.Y);var m=(this.UG||this.sl)&&f!=null,w=p.I();this.lf=p.vb(0),this.ii=new h.ja(0),this.ii.Jb(2*w),this.hi=new h.ja(0),this.hi.Jb(2*w),m&&(this.Hl==null&&(this.Hl=new h.ja(0)),this.Hl.Jb(w));for(var $=p=0;$<w;$++)if(this.ii.add(2*$),this.ii.add(2*$+1),this.hi.add(2*$),this.hi.add(2*$+1),m){for(;$>=f.Wc(p);)p++;this.Hl.add(p)}for(new h.Zt().sort(this.hi,0,2*w,new n(this,m)),this.fb.clear(),this.fb.Xo(new o(this)),this.fb.Ee(w),f=0,w*=2;f<w;f++)if(m=this.hi.get(f),m=(p=this.ii.get(m))>>1,(1&p)==0){if(p=this.fb.addElement(m,-1),($=this.fb.xe(p))!=-1&&!this.fC(this.fb.ka($),m))return this.le=new h.Nd(3,m,this.fb.ka($)),!1;var T=this.fb.lb(p);if(T!=-1&&!this.fC(this.fb.ka(T),m))return this.le=new h.Nd(3,m,this.fb.ka(T)),!1}else if(p=this.fb.search(m,-1),$=this.fb.xe(p),T=this.fb.lb(p),this.fb.wd(p,-1),$!=-1&&T!=-1&&!this.fC(this.fb.ka($),this.fb.ka(T)))return this.le=new h.Nd(3,this.fb.ka($),this.fb.ka(T)),!1;return!0},c.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},c.prototype.jO=function(){var p=new h.hd;p.Ib(this.Y);var f=new h.Nd;return!h.bu.fI(!1,p,this.Qj,f,this.od)||(f.Lo=p.Va(f.Lo),f.Mo=p.Va(f.Mo),this.le.Yt(f),!1)},c.prototype.iO=function(){var p=this.Y,f=p.Ha();for(p=p.Ha();f.ab();)for(;f.Ia();){var m=f.ia();if(!f.Sn()||!f.VS()){p.wW(f);do for(;p.Ia();){var w=p.ia();if((w=m.Br(w,this.Qj,!0))!=0)return this.le=new h.Nd(w==2?5:4,f.xb(),p.xb()),!1}while(p.ab())}}return!0},c.prototype.nO=function(){var p=this.Y;this.hb.length=0,this.ro.length=0,this.ag=p.Ha(),this.ag.EB();var f=new h.ja(0);f.Jb(10);var m=NaN,w=0,$=0;for(p=2*p.I();$<p;$++){var T=this.hi.get($);if(!(1&(T=this.ii.get(T)))){T>>=1;var E=this.lf.read(2*T),O=this.lf.read(2*T+1);if(f.size!=0&&(E!=m||O!=w)){if(!this.LI(f))return!1;f!=null&&f.clear(!1)}f.add(T),m=E,w=O}}return!!this.LI(f)},c.prototype.mO=function(){for(var p=this.Y,f=Array(p.ea()),m=0,w=p.ea();m<w;m++)f[m]=p.Pn(m);w=new v;var $=new h.h;m=this.hi.get(0);var T=(m=this.ii.get(m))>>1;this.lf.uc(2*T,$);var E=f[m=this.Hl.get(T)],O=p.Ca(m),P=p.Wc(m)-1;w.gl=T==O||T==P,w.jy=this.sl?!E&&w.gl:w.gl,w.Ci=m,w.x=$.x,w.y=$.y,w.zm=T;for(var L=new v,F=1,z=this.hi.size;F<z;F++)if(m=this.hi.get(F),(1&(m=this.ii.get(m)))==0){T=m>>1,this.lf.uc(2*T,$),(m=this.Hl.get(T))!=w.Ci&&(E=f[m],O=p.Ca(m),P=p.Wc(m)-1);var R=T==O||T==P,G=this.sl?!E&&w.gl:w.gl;if(L.x=$.x,L.y=$.y,L.Ci=m,L.zm=T,L.jy=G,L.gl=R,L.x==w.x&&L.y==w.y){if(this.sl){if(!(L.jy&&w.jy||L.Ci==w.Ci&&(L.gl||w.gl)))return this.le=new h.Nd(8,L.zm,w.zm),!1}else if(!L.gl||!w.gl)return this.le=new h.Nd(5,L.zm,w.zm),!1}m=w,w=L,L=m}return!0},c.prototype.EE=function(){for(var p=this.Y,f=[],m=-1,w=!1,$=0,T=p.ea();$<T;$++)p.Gv($)&&(w=!1,m++,$<T-1&&(p.Gv($+1)||(w=!0))),f[$]=w?m:-1;w=new h.h,$=this.hi.get(0);var E=($=this.ii.get($))>>1;this.lf.uc(2*E,w),$=this.Hl.get(E),m=new u(w.x,w.y,$,E,f[$]),p=[];var O=1;for(T=this.hi.size;O<T;O++)if($=this.hi.get(O),(1&($=this.ii.get($)))==0){if(E=$>>1,this.lf.uc(2*E,w),$=this.Hl.get(E),($=new u(w.x,w.y,$,E,f[$])).x==m.x&&$.y==m.y){if($.Ci==m.Ci)return this.le=new h.Nd(9,$.zm,m.zm),!1;0<=f[$.Ci]&&f[$.Ci]==f[m.Ci]&&(p.length!=0&&p[p.length-1]==m||p.push(m),p.push($))}m=$}if(p.length==0)return!0;for($=new h.lp(!0),h.P.bv(f,-1),w=-1,(O=new h.h).Sc(),m=0,T=p.length;m<T;m++){(E=p[m]).x==O.x&&E.y==O.y||(w=$.Rh(0),O.x=E.x,O.y=E.y);var P=f[E.Ci];P==-1&&(P=$.Rh(2),f[E.Ci]=P),$.addElement(P,w),$.addElement(w,P)}for((T=new h.ja(0)).Jb(10),m=$.ke;m!=-1;m=$.lz(m))if(!(1&(p=$.KF(m)))&&2&p){for(p=-1,T.add(m),T.add(-1);0<T.size;){if(w=T.Gc(),T.Jf(),O=T.Gc(),T.Jf(),(1&(E=$.KF(O)))!=0){p=2&E?O:w;break}for($.aX(O,1|E),E=$.sc(O);E!=-1;E=$.lb(E))(P=$.getData(E))!=w&&(T.add(P),T.add(O))}if(p!=-1){for($=-1,m=0,T=f.length;m<T;m++)if(f[m]==p){$=m;break}return this.le=new h.Nd(10,$,-1),!1}}return!0},c.prototype.oO=function(){var p=this.Y;if(0>=p.He())return this.le=new h.Nd(6,p.ea()==1?1:-1,-1),0;if(p.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=h.ja.rf(p.ea(),0),this.EA=h.ja.rf(p.ea(),-1);for(var f=-1,m=0,w=0,$=p.ea();w<$;w++){var T=p.Kr(w);if(this.vo.write(w,0>T?0:256),0<T)f=w,m=T;else{if(T==0)return this.le=new h.Nd(6,w,-1),0;if((0>f||m<Math.abs(T))&&(this.le=new h.Nd(7,w,-1),this.sl))return 0;this.EA.write(w,f)}}for(this.et=p.ea(),this.Qm=new h.ja(0),this.Qm.Jb(10),$=p.I(),this.Oo=NaN,(p=new h.ja(0)).Jb(10),this.Sq=h.ja.rf($,-1),this.Jw=h.ja.rf($,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new h.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new r(this)),f=0,$*=2;0<this.et&&f<$;f++)if(m=this.hi.get(f),(1&(m=this.ii.get(m)))==0){if(m>>=1,(w=this.lf.read(2*m+1))!=this.Oo&&p.size!=0){if(!this.vt(p))return 0;p!=null&&p.clear(!1)}p.add(m),this.Oo=w}return 0<this.et&&!this.vt(p)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},c.prototype.LI=function(p){if(p.size==1)return!0;for(var f=0,m=p.size;f<m;f++){var w=p.get(f);this.ag.Wb(w);var $=this.ag.ni();this.hb.push(this.Uu($,w,this.ag.gb,!0)),this.ag.ia(),$=this.ag.ia(),this.hb.push(this.Uu($,w,this.ag.gb,!1))}var T=this;for(this.hb.sort(function(P,L){return T.SP(P,L)}),(w=this.oh.ke)==-1&&(w=this.oh.Rh(0)),this.oh.hn(this.hb.length),f=0,m=this.hb.length;f<m;f++)this.oh.addElement(w,f);f=!0;for(var E=m=-1;f&&(f=!1,($=this.oh.sc(w))!=-1);)for(var O=this.oh.lb($);O!=-1;)if(m=this.oh.getData($),E=this.oh.getData(O),(m=this.hb[m].Ko)!=(E=this.hb[E].Ko))$=O,O=this.oh.lb($);else if(f=!0,this.oh.kd(w,$),$=this.oh.xe(O),(O=this.oh.kd(w,O))==-1||$==-1)break;if(f=this.oh.ds(w),this.oh.GE(w),0<f)return this.le=new h.Nd(5,m,E),!1;for(f=0,m=p.size;f<m;f++)this.qB(this.hb[f]);return this.hb.length=0,!0},c.prototype.vt=function(p){for(var f=0,m=p.size;f<m;f++){var w=p.get(f),$=this.Sq.read(w);if($!=-1){var T=this.fb.ka($);this.Bj.add(T),this.fb.wd($,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Sq.write(w,-1)}($=this.Jw.read(w))!=-1&&(T=this.fb.ka($),this.Bj.add(T),this.fb.wd($,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Jw.write(w,-1))}for(f=0,m=p.size;f<m;f++){if(w=p.get(f),this.ag.Wb(w),($=this.ag.ni()).oa>$.ma){var E=this.ag.xb(),O=this.Uu($,w,this.ag.gb,!0);0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),$=this.fb.addElement(T,-1),this.Sq.read(E)==-1?this.Sq.write(E,$):this.Jw.write(E,$),!(3&this.vo.read(this.ag.gb))&&this.Qm.add($)}this.ag.ia(),($=this.ag.ia()).oa<$.ma&&(E=this.ag.kk(),O=this.Uu($,w,this.ag.gb,!1),0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=O):(T=this.hb.length,this.hb.push(O)),$=this.fb.addElement(T,-1),this.Sq.read(E)==-1?this.Sq.write(E,$):this.Jw.write(E,$),!(3&this.vo.read(this.ag.gb))&&this.Qm.add($))}for(f=0,m=this.Qm.size;f<m&&0<this.et;f++)if($=this.Qm.get(f),(3&this.vo.read(this.hb[this.fb.ka($)].DA))==0){p=-1,w=this.fb.xe($);var P=$;O=null,T=-1;for(var L=0;w!=-1&&(T=this.fb.ka(w),T=(O=this.hb[T]).DA,(3&(L=this.vo.read(T)))==0);)P=w,w=this.fb.xe(w);w==-1?(E=1,w=P):(p=(3&L)==1?T:this.EA.read(T),E=O.SF()!=0?0:1,w=this.fb.lb(w));do{if(T=this.fb.ka(w),T=(O=this.hb[T]).DA,(3&(P=this.vo.read(T)))==0){if(E!=O.SF())return this.le=new h.Nd(6,T,-1),!1;if(P=252&P|(L=E==0||O.Yp()?2:1),this.vo.write(T,L),L==2&&this.le.Lj==0&&this.EA.read(T)!=p&&(this.le=new h.Nd(7,T,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&P)==1&&(p=T),P=w,w=this.fb.lb(w),E=E!=0?0:1}while(P!=$)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new h.ja(0),!0},c.prototype.Uu=function(p,f,m,w){if(p.K()!=322)throw h.i.Ra();return(p=this.nP(p)).Ko=f,p.DA=m,p.Aq=0,p.iX(w),p},c.prototype.nP=function(p){if(0<this.ro.length){var f=this.ro[this.ro.length-1];--this.ro.length,p.copyTo(f.oe)}else(f=new k).oe=h.NC.kg(p);return f},c.prototype.qB=function(p){p.oe.K()==322&&this.ro.push(p)},c.prototype.fU=function(){for(var p=this.Y.I(),f=new h.ja(0),m=0;m<p;m++)f.add(m);var w=this;for(f.Wd(0,p,function($,T){return w.Qu($,T)}),m=1;m<p;m++)if(this.Qu(f.get(m-1),f.get(m))==0)return this.le=new h.Nd(3,f.get(m-1),f.get(m)),0;return 2},c.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},c.prototype.jV=function(){return this.$S()},c.prototype.kU=function(){for(var p=this.Y.I(),f=new h.ja(0),m=0;m<p;m++)f.add(m);var w=this;f.Wd(0,p,function(P,L){return w.KO(P,L)});var $=Array(p);for(h.P.bv($,!1),$[f.get(0)]=!0,m=1;m<p;m++){var T=f.get(m-1),E=f.get(m);this.Qu(T,E)==0?$[E]=!1:$[E]=!0}f=this.Y.Ja(),T=this.Y,E=0;var O=1;for(m=0;m<p;m++)$[m]?O=m+1:(E<O&&f.Gd(T,E,O),E=m+1);return E<O&&f.Gd(T,E,O),f.Eh(2,this.Do),f},c.prototype.IV=function(){var p=this.Y,f=p.Ha(),m=p.Ha(),w=this.Y.Ja(),$=this.Y,T=p.hasAttribute(1),E=T?h.ua.rE(this.Sg,p,!0):0,O=new h.ja(0),P=new h.ja(0);for(O.Jb(h.P.truncate(p.I()/2+1)),P.Jb(h.P.truncate(p.I()/2+1));f.ab();)if(m.ab(),!(2>p.Ka(f.gb))){m.yW();for(var L,F,z=!0;f.Ia();){var R=f.ia(),G=m.ni();if(f.xb()>m.xb())break;z&&(O.add(f.xb()),P.add(m.kk()),z=!1),F=O.Gc();var H=f.kk();if(1<H-F){var B=new h.h;B.vc(p.Oa(F),p.Oa(H)),L=B.length()}else L=R.Rb();F=P.Gc(),1<(H=m.xb())-F?((B=new h.h).vc(p.Oa(F),p.Oa(H)),F=B.length()):F=G.Rb(),L>this.Do?O.add(f.kk()):T&&(L=p.Vc(1,O.Gc(),0),R=R.jv(1,0),Math.abs(R-L)>E&&O.add(f.kk())),F>this.Do?P.add(m.xb()):T&&(L=p.Vc(1,P.Gc(),0),R=G.jv(1,0),Math.abs(R-L)>E&&P.add(m.xb()))}if(O.Gc()<P.Gc()?O.size>P.size?O.Jf():P.Jf():(O.Gc()!=P.Gc()&&P.Jf(),P.Jf()),2<=P.size+O.size){for(z=new h.Ta,G=0,R=O.size;G<R;G++)$.we(O.get(G),z),G==0?w.nf(z):w.lineTo(z);for(G=P.size-1;0<G;G--)$.we(P.get(G),z),w.lineTo(z);$.ec(f.gb)?w.Cp():0<P.size&&($.we(P.get(0),z),w.lineTo(z))}O!=null&&O.clear(!1),P!=null&&P.clear(!1)}return w.Eh(2,this.Do),w},c.prototype.mV=function(){return this.zX()},c.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?h.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new h.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&h.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&h.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},c.ts=function(p,f,m,w,$){if(w!=null&&(w.Lj=0,w.Lo=-1,w.Mo=-1),p.B())return 1;var T=p.K();if(T==33)return 1;var E=h.ua.mj(f,p,!1);if(T==197)return f=new h.l,p.A(f),f.Di(E)?(w!=null&&(w.Lj=2,w.Lo=-1,w.Mo=-1),0):1;if(h.ba.zd(T))return(E=new h.Ua(p.description)).pc(p,!0),c.ts(E,f,m,w,$);var O=p.qm(E);if((m=m?-1:O)!=-1)return m;if(f=new c(p,f,m,$,!1),T==550)m=f.fU();else if(T==1607)m=f.EV();else{if(T!=1736)throw h.i.Ra();m=f.jV()}return p.Eh(m,E),w!=null&&m==0&&w.Yt(f.le),m},c.YJ=function(p,f,m,w){if(p.B())return p;var $=p.K();if($==33)return p;var T=h.ua.mj(f,p,!1);if($==197)return f=new h.l,p.A(f),f.Di(T)?p.Ja():p;if(h.ba.zd($))return($=new h.Ua(p.description)).pc(p,!0),c.YJ($,f,m,w);if(T=p.qm(T),(m=m?-1:T)==2)return p;if(p=new c(p,f,m,w,!1),$==550)p=p.kU();else if($==1607)p=p.IV();else{if($!=1736)throw h.i.Ra();p=p.mV()}return p},c.prototype.Oh=function(p,f,m){if(p==f)return 0;p=this.ii.get(p);var w=this.ii.get(f);f=p>>1;var $=w>>1,T=new h.h,E=new h.h;return this.lf.uc(2*f,T),T.y+=1&p?this.Qj:-this.Qj,this.lf.uc(2*$,E),E.y+=1&w?this.Qj:-this.Qj,(p=T.compare(E))==0&&m?0>(m=this.Hl.get(f)-this.Hl.get($))?-1:0<m?1:0:p},c.prototype.Qu=function(p,f){if(p==f)return 0;var m=this.Y,w=m.Oa(p),$=m.Oa(f);if(w.x<$.x)return-1;if(w.x>$.x)return 1;if(w.y<$.y)return-1;if(w.y>$.y)return 1;for(w=1;w<this.jT;w++){$=this.iH.ld(w);for(var T=h.sa.Wa($),E=0;E<T;E++){var O=m.Vc($,p,E),P=m.Vc($,f,E);if(O<P)return-1;if(O>P)return 1}}return 0},c.prototype.KO=function(p,f){var m=this.Qu(p,f);return m==0?p<f?-1:1:m},c.prototype.SP=function(p,f){if(p===f)return 0;var m=p.oe.lg();p.Yp()&&m.Uq(),p=f.oe.lg(),f.Yp()&&p.Uq(),f=m.su();var w=p.su();return w==f?(f=m.yi(p),Math.abs(f)<=8881784197001252e-31*(Math.abs(p.x*m.y)+Math.abs(p.y*m.x))&&(f--,f++),0>f?1:0<f?-1:0):f<w?-1:1},c}();h.Ix=l}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,l){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,l).next()):new h.wL(o,r,n,l)},u.gp=function(o,r,n,l){var c=o.Eb(),p=r.Eb();if(o.B()&&r.B())return c>p?o:r;if(o.B())return r;if(r.B())return o;var f=new h.l,m=new h.l,w=new h.l;return o.A(f),r.A(m),w.L(f),w.$b(m),f=h.ua.Xd(n,w,!0),m=o.K(),w=r.K(),m==33&&w==33?u.WU(o,r,f):m!=w?0<c||0<p?c>p?o:r:m==550?u.dI(o,r,f):u.dI(r,o,f):h.Hg.gp(o,r,n,l)},u.WU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D(),c=r.D(),p=new h.ee(o.description);return h.h.zc(l,c)>n&&(p.add(o),p.add(r)),p},u.dI=function(o,r,n){var l=o.vb(0),c=o.I(),p=r.D(),f=o.Ja();n=n*Math.sqrt(2)*1.00001;var m=new h.l;if(o.A(m),m.X(n,n),m.contains(p)){n*=n,m=!1;for(var w=[],$=0;$<c;$++)w[$]=!1;for($=0;$<c;$++){var T=l.read(2*$),E=l.read(2*$+1);(T-=p.x)*T+(E-=p.y)*E<=n&&(m=!0,w[$]=!0)}if(m)for($=0;$<c;$++)w[$]||f.Gd(o,$,$+1);else f.Gd(o,0,c),f.add(r)}else f.Gd(o,0,c),f.add(r);return f},u.instance=null,u}(h.Ge);h.Jx=k}(q||(q={})),function(h){var k=function(){function v(u,o,r,n){this.vs=o==null,this.za=-1,this.Sd=u,this.wg=r,this.IT=o.next(),this.Vb=n}return v.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.Jx.gp(u,this.IT,this.wg,this.Vb)):null;var u},v.prototype.Ma=function(){return this.za},v.prototype.re=function(){},v}();h.wL=k}(q||(q={})),function(h){var k=function(){function o(){}return o.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},o}(),v=function(){function o(){this.Ir=0,this.rj=[]}return o.prototype.kN=function(r){this.Ir+=r.zx,this.rj.push(r)},o.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},o.prototype.iy=function(){return this.rj[this.rj.length-1]},o.prototype.Nb=function(r){return r===this},o}(),u=function(){function o(r,n,l){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=r,this.wg=n,this.Vb=l}return o.ZD=function(r){var n=[],l=0;for(r=Object.keys(r);l<r.length;l++)n.push(Number(r[l]));return n.sort(function(c,p){return c-p}),n},o.prototype.aG=function(r){var n=this.Fo[r],l=o.ZD(n)[0],c=n[l],p=c.iy().Vy;return c=c.iy().vK,delete n[l],c&&(p=h.$l.local().W(p,this.wg,!1,this.Vb),r==0&&p.K()==33&&(r=new h.ee(p.description),p.B()||r.add(p),p=r)),p},o.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw h.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},o.prototype.Ma=function(){return this.za},o.prototype.lK=function(){if(this.Jc)return!0;var r=null;if(this.Sd!=null&&(r=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),h.op.Bp(this.Vb),r!=null){var n=r.Eb();this.vH[n]=!0,n>=this.Bk&&!this.eA&&(this.HD(n,!1,r),n>this.Bk&&!this.eA&&this.uW(n))}if(0<this.kq)for(n=0;n<=this.Bk;n++)for(;1<this.wq[n]&&(r=this.AO(n)).length!=0;)r=h.Hg.QP(r,this.wg,this.Vb),this.HD(n,!0,r);return this.Jc},o.prototype.AO=function(r){for(var n=[],l=[],c=this.Fo[r],p=o.ZD(c),f=0;f<p.length;f++){var m=p[f],w=c[m];if(this.Jc||1e4<w.Ir&&1<w.rj.length){for(this.wq[r]-=w.rj.length,this.kq-=w.rj.length;0<w.rj.length;)n.push(w.iy().Vy),w.OV();l.push(m)}}for(f=0;f<l.length;f++)delete c[l[f]];return n},o.prototype.uW=function(r){for(var n=0;n<r;n++)this.Fo[n]=[],this.kq-=this.wq[n],this.wq[n]=0},o.prototype.HD=function(r,n,l){var c=new k;if(c.Az(),c.Vy=l,l=o.$R(l),c.zx=l,l=o.YR(l),r+1>this.Fo.length)for(var p=0,f=Math.max(2,r+1);p<f;p++)this.Fo.push([]);(p=this.Fo[r][l])===void 0&&(p=new v,this.Fo[r][l]=p),c.vK=n,p.kN(c),this.wq[r]++,this.kq++,this.Bk=Math.max(this.Bk,r)},o.YR=function(r){return 0<r?h.P.truncate(Math.log(r)/Math.log(4)+.5):0},o.$R=function(r){var n=r.K();if(h.ba.zj(n))return r.I();if(n==33)return 1;if(n==197)return 4;if(h.ba.zd(n))return 2;throw h.i.Ra()},o.prototype.re=function(){this.lK()},o}();h.yL=u}(q||(q={})),function(h){var k=function(v){function u(){return v!==null&&v.apply(this,arguments)||this}return wt(u,v),u.prototype.K=function(){return 1},u.prototype.W=function(o,r,n,l){return l===void 0?new h.yL(o,r,n):this.bQ(o,r,n,l)},u.prototype.bQ=function(o,r,n,l){return o=new h.$c([o,r]),this.W(o,n,l).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.Ih=k}(q||(q={})),function(h){var k,v;(v=k||(k={}))[v.nextPath=0]="nextPath",v[v.nextSegment=1]="nextSegment",v[v.iterate=2]="iterate",k=function(){function u(o,r,n,l){this.Vs=new h.l,this.BT=o,this.CT=r,this.oq=l,this.wo=-1,this.tl=!1;var c=o.Cb;c!=null&&(c=l?c.Bo:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,l?this.wo=r.ea():this.td=r.Ha()),this.tl||(c=r.Cb)!=null&&(c=l?c.Bo:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,l?this.wo=o.ea():this.td=o.Ha()),this.tl||(this.ei=l?h.ua.hR(o,r,n,1<=o.qm(0),1<=r.qm(0)):h.ua.gR(o,r,n))}return u.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var o=!0;o;)switch(this.Yb){case 0:o=this.sU();break;case 1:o=this.tU();break;case 2:o=this.Pz();break;default:throw h.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},u.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},u.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},u.prototype.oz=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},u.prototype.Wy=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},u.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},u.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var o=this.td.ia();return this.zw.Wo(o,this.ra),this.Yb=2,!0},u.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},u}(),h.am=k}(q||(q={})),function(h){(h=h.JL||(h.JL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(q||(q={})),function(h){h.LC=function(){function k(){}return k.ub=function(v,u,o,r,n,l,c,p,f){var m=[0,0,0],w=[0,0,0],$=[0,0,0],T=[0,0,0,0],E=new h.ha(0),O=new h.ha(0),P=new h.ha(0);if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(v,o,r,n,l,c,p,f);else{n=h.F.ca(n),o=h.F.ca(o);var L=h.F.ca(n-o);if(h.s.$(r,l)&&(h.s.$(o,n)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-l)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(L),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(v,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(l),1.570796326794897)||h.s.$(o,n)||h.s.$(h.s.R(L),3.141592653589793)||h.s.Dd(r))return void h.Yk.ub(v,u,o,r,n,l,c,p,f);var F=Math.sqrt(1-u);n=h.F.ca(n-o),o=0,h.F.el(1,u,r,o,0,E,O,P),m[0]=E.u,m[1]=O.u,m[2]=P.u,h.F.el(1,u,l,n,0,E,O,P),w[0]=E.u,w[1]=O.u,w[2]=P.u,$[0]=0,$[1]=0,$[2]=-1*u*h.F.n(1,u,r)*Math.sin(r),0>n?h.F.Yq($,w,m,T,0):h.F.Yq($,m,w,T,0),O=[0,0,0],P=[0,0,0];var z=[0,0,0];m=[0,0,0],E=[0,0,0];var R=Math.acos(T[2]/1),G=1-u,H=Math.tan(R),B=1+H*H/G,te=2*$[2]*H/G;for(G=(-te+(H=Math.sqrt(te*te-4*B*($[2]*$[2]/G-1))))/(B*=2),te=(-te-H)/B,H=Math.tan(R),R=(G+te)/2,$=((B=H*G+$[2])+(H*te+$[2]))/2,H=h.F.ip(G-R,B-$),G=$/F*1.570796326794897,te=0;100>te&&(B=(B=h.F.w(u,G))*B/Math.cos(G)*(Math.sin(G)-$*B/(1-u)),!h.s.Dd(B));te++)G-=B;$=h.F.n(1,u,G)*Math.cos(G),H=1-H/($=Math.sqrt(($-R)*($+R))),H*=2-H,B=h.F.qn(O),R=h.F.qn(P),G=h.F.qn(z);var Q=h.F.Ut(z,O);te=h.F.Ut(z,P),h.F.yx(z,O,m),h.F.yx(z,P,E),O=Math.acos(Q/(G*B)),P=Math.acos(te/(G*R)),P*=h.s.Mb(1,h.F.Ut(m,E)),(1.570796326794897<=h.s.R(O)&&1.570796326794897<=h.s.R(P)||3.141592653589793<h.s.R(O-P))&&(O=(3.141592653589793-h.s.R(O))*h.s.Mb(1,O),P=(3.141592653589793-h.s.R(P))*h.s.Mb(1,P)),m=h.F.Sj(H,P),E=h.F.q($,H,h.F.Sj(H,O)),m=h.F.q($,H,m),m=h.s.R(m-E)*v,O=new h.ha(0),P=new h.ha(0),z=T[1]/1,z*=-h.s.Mb(1,L),E=Math.acos(z)*h.s.Mb(1,L),k.sf(v,u,o,r,m,E,O,P),h.s.$(n,O.u)&&h.s.$(l,P.u)||(H=h.F.ip(h.F.ca(n-O.u),l-P.u),k.sf(v,u,o,r,m,h.F.ca(E+3.141592653589793),O,P),(B=h.F.ip(h.F.ca(n-O.u),l-P.u))<H&&(E=h.F.ca(E+3.141592653589793))),O=[0,0,0,0],P=[0,0,0,0],H=[0,0,0],v=[0,0,0],o=[0,0,0],r=[0,0,0],z=[0,0,0],($=[0,0,0])[0]=0,$[1]=0,$[2]=F,H[0]=0,H[1]=0,H[2]=0,h.F.Yq(H,$,w,O,0),h.s.Dd(l)?(v[0]=w[0],v[1]=w[1],v[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(u=h.F.n(1,u,l)*Math.cos(l),v[0]=0,v[1]=0,w[2]+=Math.tan(1.570796326794897-h.s.R(l))*u*h.s.Mb(1,l),o[0]=u*Math.cos(n)-u*Math.sin(n),o[1]=u*Math.sin(n)+u*Math.cos(n)),o[2]=w[2],h.F.Yq(w,o,v,P,1),h.F.yx(P,O,r),h.F.yx(P,T,z),z=h.F.Ut(r,z)/(h.F.qn(r)*h.F.qn(z)),z*=h.s.Mb(1,L),n=Math.acos(z)*-h.s.Mb(1,L),(0<E&&0<n||0>E&&0>n)&&(n=h.F.ca(n+3.141592653589793)),c!=null&&(c.u=m),p!=null&&(p.u=E),f!=null&&(f.u=n)}}},k.sf=function(v,u,o,r,n,l,c,p){var f=[0,0,0],m=[0,0,0],w=[0,0,0],$=[0,0,0],T=[0,0,0],E=[0,0,0],O=[0,0,0],P=[0,0,0,0],L=new h.ha(0),F=new h.ha(0),z=new h.ha(0),R=new h.ha(0),G=new h.ha(0),H=new h.ha(0);if(c!=null&&p!=null)if(h.s.vi(u))h.$g.sf(v,o,r,n,l,c,p);else if(h.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(l=h.F.ca(l),0>n&&(n=h.s.R(n),l=h.F.ca(l+3.141592653589793)),o=h.F.ca(o),r=h.F.ca(r),1.570796326794897<h.s.R(r)&&(o=h.F.ca(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.$(h.s.R(r),1.570796326794897)||h.s.Dd(r)||h.s.Dd(l)||h.s.$(h.s.R(l),3.141592653589793))h.Yk.sf(v,u,o,r,n,l,c,p);else{var B=Math.sqrt(1-u);for(v=n/v,h.F.el(1,u,r,0,0,R,G,H),f[0]=R.u,f[1]=G.u,f[2]=G.u,O[0]=0,O[1]=0,O[2]=-1*u*h.F.n(1,u,r)*Math.sin(r),R=h.F.n(1,u,r),G=h.F.ca(1.570796326794897-l),H=Math.sin(G),n=Math.cos(r),r=Math.sin(r),T[0]=R*n-r*H,T[1]=Math.cos(G),T[2]=(1-u)*R*r+n*H,0>l?h.F.Yq(O,T,f,P,0):h.F.Yq(O,f,T,P,0),f=Math.acos(P[2]/1),P=Math.atan2(-P[1],-P[0]),r=1-u,G=1+(T=Math.tan(f))*T/r,r=(-(R=2*O[2]*T/r)+(T=Math.sqrt(R*R-4*G*(O[2]*O[2]/r-1))))/(G*=2),R=(-R-T)/G,T=Math.tan(f),f=(r+R)/2,O=((G=T*r+O[2])+(T*R+O[2]))/2,T=h.F.ip(r-f,G-O),B=O/B*1.570796326794897,r=0;100>r&&(R=(R=h.F.w(u,B))*R/Math.cos(B)*(Math.sin(B)-O*R/(1-u)),!h.s.Dd(R));r++)B-=R;B=h.F.n(1,u,B)*Math.cos(B),O=1-T/(B=Math.sqrt((B-f)*(B+f))),O*=2-O,E=Math.acos(h.F.Ut(E,m)/(h.F.qn(E)*h.F.qn(m))),E*=h.s.Mb(1,m[0]),l=(h.F.q(B,O,h.F.Sj(O,E))+v*h.s.Mb(1,l))/h.F.Ch(B,O),l=h.F.ca(1.570796326794897*l),l=h.F.Tq(O,l),h.F.n(B,O,l),T=h.F.ca(P+o),o=Math.cos(T),l=Math.sin(T),w[0]=$[0]*o+$[1]*-l,w[1]=$[0]*l+$[1]*o,w[2]=$[2],h.F.eO(u,w[0],w[1],w[2],z,F,L),c!=null&&(c.u=F.u),p!=null&&(p.u=z.u)}},k}()}(q||(q={})),function(h){var k=function(){function n(l){this.Za=null,this.xt=new h.h,this.yt=new h.h,this.g=l}return n.prototype.compare=function(l,c,p){return this.g.Hc(c,this.xt),this.g.Hc(l.ka(p),this.yt),this.xt.compare(this.yt)},n}(),v=function(){function n(l){this.Cf=new h.h,this.Fk=new h.h,this.g=l}return n.prototype.Fh=function(l){this.Cf.N(l)},n.prototype.compare=function(l,c){return this.g.Hc(l.ka(c),this.Fk),this.Cf.compare(this.Fk)},n}(),u=function(n){function l(c){var p=n.call(this,c.g,c.ra,!1)||this;return p.ib=c,p}return wt(l,n),l.prototype.compare=function(c,p,f){if(this.sg)return-1;var m=this.ib.Rd.Ln(this.ib.Th(p));c=c.ka(f);var w=this.ib.Rd.Ln(this.ib.Th(c));return this.Fm=f,this.ME(p,m,c,w)},l}(h.PC),o=function(n){function l(c){var p=n.call(this,c.g,c.ra)||this;return p.ib=c,p}return wt(l,n),l.prototype.compare=function(c,p){return this.sg?-1:(c=this.ib.Rd.Ln(this.ib.Th(c.ka(p))),this.Fm=p,this.NE(p,c))},l}(h.WL),r=function(){function n(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new h.h,this.Ri=new h.h,this.hb=new h.ad(8),this.Ad=new h.ad(5),this.nh=new h.cu,this.Rd=new h.cu,this.Pg=!1,this.xh=new h.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new h.$j,this.Nc=new h.$j,this.ph=new h.ja(0),this.Ik=new h.OC,this.Gf=new h.ja(0),this.Ck=new h.ja(0),this.lo=new h.Ta}return n.prototype.LX=function(l,c){var p=new h.Ed;return p.VB(),l.Pc(p),this.gr(l),this.Yn=!1,this.ra=c,this.PA=c*c,c=this.eC(),l.Pc(p),c||(this.lQ(),c||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},n.prototype.PX=function(l,c){this.gr(l),this.Yn=!1,this.ra=c,this.PA=c*c,this.Pg=!1,this.eC(),this.Pg||(this.Pg=l.Ip(c,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},n.prototype.qg=function(l,c){return this.hb.U(l,0+c)},n.prototype.GB=function(l,c,p){this.hb.T(l,0+c,p)},n.prototype.Th=function(l){return this.hb.U(l,2)},n.prototype.UW=function(l,c){this.hb.T(l,2,c)},n.prototype.MF=function(l,c){return this.hb.U(l,3+c)},n.prototype.Rp=function(l){return this.hb.U(l,7)},n.prototype.Rl=function(l,c){this.hb.T(l,7,c)},n.prototype.Tp=function(l,c){return this.hb.U(l,3+this.Qp(l,c))},n.prototype.hr=function(l,c,p){this.hb.T(l,3+this.Qp(l,c),p)},n.prototype.IR=function(l,c){return this.hb.U(l,5+this.Qp(l,c))},n.prototype.jr=function(l,c,p){this.hb.T(l,5+this.Qp(l,c),p)},n.prototype.Ur=function(l){return this.Ad.U(l,0)},n.prototype.PW=function(l,c){this.Ad.T(l,0,c)},n.prototype.$y=function(l){return this.Ad.U(l,4)},n.prototype.er=function(l,c){this.Ad.T(l,4,c)},n.prototype.kl=function(l){return this.Ad.U(l,1)},n.prototype.nn=function(l,c){this.Ad.T(l,1,c)},n.prototype.Zy=function(l){return this.Ad.U(l,3)},n.prototype.Ft=function(l,c){this.Ad.T(l,3,c)},n.prototype.$m=function(l){var c=this.Ad.De(),p=this.nh.Rh();return this.PW(c,p),l!=-1?(this.nh.addElement(p,l),this.g.Sa(l,this.zh,c),this.er(c,this.g.Va(l))):this.er(c,-1),c},n.prototype.CP=function(l){this.Ad.kd(l)},n.prototype.FD=function(l,c){this.nh.addElement(this.Ur(l),c),this.g.Sa(c,this.zh,l)},n.prototype.ot=function(l){var c=this.hb.De(),p=this.Rd.Rh();return this.UW(c,p),l!=-1&&this.Rd.addElement(p,l),c},n.prototype.GD=function(l,c){this.Rd.addElement(this.Th(l),c)},n.prototype.Wu=function(l){this.hb.kd(l),0<=(l=this.ph.gF(l))&&this.ph.NV(l)},n.prototype.jj=function(l,c){if(this.qg(l,0)==-1)this.GB(l,0,c);else{if(this.qg(l,1)!=-1)throw h.i.Ra();this.GB(l,1,c)}this.gy(l,c)},n.prototype.gy=function(l,c){var p=this.kl(c);if(p!=-1){var f=this.Tp(p,c);this.jr(f,c,l),this.hr(l,c,f),this.hr(p,c,l),this.jr(l,c,p)}else this.jr(l,c,l),this.hr(l,c,l),this.nn(c,l)},n.prototype.Qp=function(l,c){return this.qg(l,0)==c?0:1},n.prototype.Zm=function(l,c){var p,f=this.Zy(c);if(f!=-1&&(this.df.wd(f,-1),this.Ft(c,-1)),(f=this.kl(c))!=-1){var m=p=f;do{var w=!1,$=this.Qp(p,c),T=this.MF(p,$);if(this.qg(p,$+1&1)==l){if(this.Zu(p),this.Rd.eh(this.Th(p)),this.Wu(p),p==T){f=-1;break}f==p&&(f=this.kl(c),m=T,w=!0)}p=T}while(p!=m||w);if(f!=-1){do $=this.Qp(p,c),T=this.MF(p,$),this.GB(p,$,l),p=T;while(p!=m);(p=this.kl(l))!=-1?(m=this.Tp(p,l),w=this.Tp(f,l),m==p?(this.nn(l,f),this.gy(p,l),this.nn(l,p)):w==f&&this.gy(f,l),this.hr(f,l,m),this.jr(m,l,f),this.hr(p,l,w),this.jr(w,l,p)):this.nn(l,f)}}for(f=this.Ur(l),p=this.Ur(c),m=this.nh.sc(p);m!=-1;m=this.nh.lb(m))this.g.Sa(this.nh.ka(m),this.zh,l);this.nh.Cy(f,p),this.CP(c)},n.prototype.PT=function(l,c){var p=this.qg(l,0),f=this.qg(l,1),m=this.qg(c,0),w=this.qg(c,1);this.Rd.Cy(this.Th(l),this.Th(c)),c==this.kl(p)&&this.nn(p,l),c==this.kl(f)&&this.nn(f,l),this.Zu(c),this.Wu(c),p==m&&f==w||f==m&&p==w||(this.Jn(p,this.Ao),this.Jn(m,this.Ri),this.Ao.rb(this.Ri)?(p!=m&&this.Zm(p,m),f!=w&&this.Zm(f,w)):(f!=m&&this.Zm(f,m),p!=w&&this.Zm(p,w)))},n.prototype.Zu=function(l){var c=this.qg(l,1);this.ZE(l,this.qg(l,0)),this.ZE(l,c)},n.prototype.ZE=function(l,c){var p=this.Tp(l,c),f=this.IR(l,c),m=this.kl(c);p!=l?(this.hr(f,c,p),this.jr(p,c,f),m==l&&this.nn(c,p)):this.nn(c,-1)},n.prototype.RD=function(l,c,p){var f=this.Rd.sc(l),m=this.Rd.ka(f);l=this.Ie(m);var w=this.Ie(this.g.V(m));for(this.g.lr(m,c,p,!0),f=this.Rd.lb(f);f!=-1;f=this.Rd.lb(f)){m=this.Rd.ka(f);var $=this.Ie(m)==l;this.g.lr(m,c,p,$)}f=c.Xp(p,0).bc(),c=c.Xp(p,c.ql(p)-1).xc(),this.wK(l,f),this.wK(w,c)},n.prototype.UE=function(l,c,p){var f=this.Th(l),m=this.qg(l,0),w=this.qg(l,1),$=this.ot(-1);for(this.ph.add($),this.Rl($,-3),this.Gf.add($),this.jj($,m),l=1,c=c.ql(p);l<c;l++)p=this.$m(-1),this.Ck.add(p),this.Gf.add(p),this.jj($,p),$=this.ot(-1),this.ph.add($),this.Rl($,-3),this.Gf.add($),this.jj($,p);for(this.jj($,w),f=this.Rd.sc(f);f!=-1;f=this.Rd.lb(f))if(w=this.Rd.ka(f),this.Ie(w)==m){l=0;do 0<l&&($=this.Gf.get(l-1),this.FD($,w),this.$y($)==-1&&this.er($,this.g.Va(w))),$=this.Gf.get(l),l+=2,this.GD($,w),w=this.g.V(w);while(l<this.Gf.size)}else{l=this.Gf.size-1;do l<this.Gf.size-2&&($=this.Gf.get(l+1),this.FD($,w),0>this.$y($)&&this.er($,this.g.Va(w))),$=this.Gf.get(l),l-=2,this.GD($,w),w=this.g.V(w);while(0<=l)}this.Gf.clear(!1)},n.prototype.Ie=function(l){return this.g.Qa(l,this.zh)},n.prototype.NI=function(l,c,p){var f=this.qg(c,0),m=new h.h;this.Jn(f,m);var w=new h.h,$=this.qg(c,1);this.Jn($,w);var T=p.ql(l),E=p.Xp(l,0),O=new h.h;if(E.$p(O),!m.rb(O)){if(!this.Pg){var P=m.compare(this.xh);0>P*(O=O.compare(this.xh))&&(this.Pg=!0)}this.qF(f,this.Gf),this.Ck.add(f)}for(!this.Pg&&1<T&&(P=m.compare(w),E=E.xc(),(m.compare(E)!=P||E.compare(w)!=P||0>E.compare(this.xh))&&(this.Pg=!0)),l=(E=p.Xp(l,T-1)).xc(),w.rb(l)||(this.Pg||0>(P=w.compare(this.xh))*(O=l.compare(this.xh))&&(this.Pg=!0),this.qF($,this.Gf),this.Ck.add($)),this.Gf.add(c),w=0,$=this.Gf.size;w<$;w++)l=this.Gf.get(w),p=this.Rp(l),h.ad.GG(p)&&(this.Nc.wd(p,-1),this.Rl(l,-1)),l!=c&&this.Rp(l)!=-3&&(this.ph.add(l),this.Rl(l,-3));this.Gf.clear(!1)},n.prototype.gO=function(l,c){this.ae.compare(this.Nc,this.Nc.ka(l),c),this.ae.sg&&(this.ae.Mr(),this.jF(l,c))},n.prototype.jF=function(l,c){this.Yn=!0,l=this.Nc.ka(l),c=this.Nc.ka(c);var p=this.Rd.Ln(this.Th(l)),f=this.Rd.Ln(this.Th(c)),m=this.g.cc(p);m==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(p,this.je),m=this.je),(p=this.g.cc(f))==null&&(this.Pm==null&&(this.Pm=new h.zb),this.g.fd(f,this.Pm),p=this.Pm),this.Ik.Qo(m),this.Ik.Qo(p),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(l,c,-1,this.Ik),this.Ik.clear()},n.prototype.BQ=function(l,c){this.Yn=!0,c=this.Nc.ka(c);var p=this.Rd.Ln(this.Th(c)),f=this.g.cc(p);f==null&&(this.je==null&&(this.je=new h.zb),this.g.fd(p,this.je),f=this.je),p=this.wF(l),this.Ik.Qo(f),this.g.Xi(p,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(c,-1,l,this.Ik),this.Ik.clear()},n.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var l=this.ph.Gc();this.ph.Jf(),this.Rl(l,-1),this.RS(l)!=-1&&this.rS(l),this.Xn=!1}},n.prototype.rS=function(l){if(this.Xn){var c=this.Nc.Bu(this.HH,this.BH,l,!0);this.Xn=!1}else c=this.Nc.ED(l);c==-1?this.PT(this.Nc.ka(this.Nc.AF()),l):(this.Rl(l,c),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,c)))},n.prototype.RS=function(l){var c=this.qg(l,0);if(l=this.qg(l,1),this.Jn(c,this.Ao),this.Jn(l,this.Ri),h.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var p=this.Ao.compare(this.xh),f=this.Ri.compare(this.xh);return 0>=p&&0<f?l:0>=f&&0<p?c:-1},n.prototype.jQ=function(){var l=new h.ja(0);l.Jb(this.g.gd);for(var c=this.g.$q(),p=c.next();p!=-1;p=c.next())this.g.Qa(p,this.zh)!=-1&&l.add(p);this.g.nx(l,l.size),this.kQ(l)},n.prototype.kQ=function(l){this.df.clear(),this.df.Ee(l.size),this.df.Xo(new k(this.g));var c=new h.h;c.Sc();for(var p=-1,f=new h.h,m=0,w=l.size;m<w;m++){var $=l.get(m);this.g.Hc($,f),f.rb(c)?($=this.g.Qa($,this.zh),this.Zm(p,$)):(p=this.Ie($),this.g.Hc($,c),$=this.df.zn($),this.Ft(p,$))}},n.prototype.lQ=function(){var l=new h.ja(0);l.Jb(this.g.gd);for(var c=this.df.sc(-1);c!=-1;c=this.df.lb(c))l.add(this.df.ka(c));this.df.clear(),this.g.nx(l,l.size),c=0;for(var p=l.size;c<p;c++){var f=l.get(c),m=this.Ie(f);f=this.df.zn(f),this.Ft(m,f)}},n.prototype.qF=function(l,c){var p=this.kl(l);if(p!=-1){var f=p;do h.ad.GG(this.Rp(f))&&c.add(f),f=this.Tp(f,l);while(f!=p)}},n.prototype.wK=function(l,c){for(l=this.nh.sc(this.Ur(l));l!=-1;l=this.nh.lb(l))this.g.mf(this.nh.ka(l),c)},n.prototype.cK=function(l,c,p,f){this.Zu(l),c!=-1&&this.Zu(c),this.NI(0,l,f),c!=-1&&this.NI(1,c,f),p!=-1&&(f.Cf.D(this.Ao),this.Jn(p,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(p)),p=0;for(var m=this.Ck.size;p<m;p++){var w=this.Ck.get(p),$=this.Zy(w);$!=-1&&(this.df.wd($,-1),this.Ft(w,-1))}for(p=this.Th(l),m=c!=-1?this.Th(c):-1,this.RD(p,f,0),c!=-1&&this.RD(m,f,1),this.UE(l,f,0),c!=-1&&this.UE(c,f,1),this.Rd.eh(p),this.Wu(l),c!=-1&&(this.Rd.eh(m),this.Wu(c)),p=0,m=this.Ck.size;p<m;p++)(w=this.Ck.get(p))==this.Lq&&(this.Zv=!0),($=this.Zy(w))==-1&&(($=this.df.ED(this.wF(w)))==-1?(l=this.Ie(this.df.ka(this.df.AF())),this.Zm(l,w)):this.Ft(w,$));this.Ck.clear(!1)},n.prototype.Jn=function(l,c){this.g.ZF(this.$y(l),c)},n.prototype.wF=function(l){return this.nh.Ln(this.Ur(l))},n.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new u(this),this.Nc.ao=this.ae);var l=new h.ja(0),c=null,p=null;this.BH=this.HH=-1,this.Xn=!1;for(var f=this.df.sc(-1);f!=-1;){this.Xn=!1;var m=this.df.ka(f);this.Lq=this.Ie(m),this.g.Hc(m,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var w=this.kl(this.Lq),$=w==-1;if(!$){m=w;do{var T=this.Rp(m);T==-1?(this.ph.add(m),this.Rl(m,-3)):T!=-3&&l.add(T),m=this.Tp(m,this.Lq)}while(m!=w)}if(0<l.size){for(this.Xn=l.size==1&&this.ph.size==1,$=0,w=l.size;$<w;$++)m=this.Nc.ka(l.get($)),this.Rl(m,-2);var E=-2,O=-2;for($=0,w=l.size;$<w;$++){if(T=l.get($),E==-2){var P=this.Nc.xe(T);P!=-1?(m=this.Nc.ka(P),(m=this.Rp(m))!=-2&&(E=P)):E=-1}if(O==-2&&((T=this.Nc.lb(T))!=-1?(m=this.Nc.ka(T),(m=this.Rp(m))!=-2&&(O=T)):O=-1),E!=-2&&O!=-2)break}for($=0,w=l.size;$<w;$++)T=l.get($),m=this.Nc.ka(T),this.Nc.wd(T,-1),this.Rl(m,-1);l.clear(!1),this.HH=E!=-1?E:-1,this.BH=O!=-1?O:-1,E!=-1&&O!=-1?this.Xn||this.gO(E,O):E==-1&&O==-1&&(this.Xn=!1)}else $&&(c==null&&(c=new o(this)),c.Fh(this.xh),this.Nc.pJ(c),c.sg&&(c.Mr(),this.BQ(this.Lq,c.Fm)));this.sS(),this.Zv?(this.Zv=!1,p==null&&(p=new v(this.g)),p.Fh(this.xh),f=this.df.pJ(p)):f=this.df.lb(f)}return this.Yn},n.prototype.gr=function(l){for(this.g=l,this.zh=this.g.Hd(),this.hb.Ee(l.gd+32),this.Ad.Ee(l.gd),this.nh.Bt(l.gd),this.nh.hn(l.gd),this.Rd.Bt(l.gd+32),this.Rd.hn(l.gd+32),l=this.g.md;l!=-1;l=this.g.ve(l))if(h.ba.Ic(this.g.jc(l)))for(T=this.g.Ob(l);T!=-1;T=this.g.Sb(T)){var c=this.g.Ka(T),p=this.g.Ya(T),f=this.$m(p),m=this.ot(p);for(this.jj(m,f),E=this.g.V(p),p=0,c-=2;p<c;p++){var w=this.g.V(E),$=this.$m(E);this.jj(m,$),m=this.ot(E),this.jj(m,$),E=w}this.g.ec(T)?($=this.$m(E),this.jj(m,$),m=this.ot(E),this.jj(m,$),this.jj(m,f)):($=this.$m(E),this.jj(m,$))}else for(var T=this.g.Ob(l);T!=-1;T=this.g.Sb(T)){var E=this.g.Ya(T);for(f=0,c=this.g.Ka(T);f<c;f++)this.$m(E),E=this.g.V(E)}this.jQ()},n}();h.MC=r}(q||(q={})),function(h){var k=function(v){function u(o,r,n){var l=v.call(this)||this;if(o!==void 0)if(n!==void 0){l.description=h.fe.pg();var c=new h.Od;c.L(o,r,n),l.ZB(c)}else if(r!==void 0)l.description=h.fe.pg(),l.Db(o,r);else if(o instanceof h.sa)l.description=o;else if(o instanceof h.h)l.description=h.fe.pg(),l.Db(o);else{if(!(o instanceof u))throw h.i.O();l.description=o.description,l.Db(o.Ng(),o.kh()),o.la!==null&&(l.la=o.la.slice(0))}else l.description=h.fe.pg();return l}return wt(u,v),u.prototype.D=function(o){if(o===void 0){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return(o=new h.h).na(this.la[0],this.la[1]),o}if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");o.na(this.la[0],this.la[1])},u.prototype.Db=function(o,r){typeof o=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=o,this.la[1]=r):(this.wc(),this.Db(o.x,o.y))},u.prototype.xz=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");var o=new h.Od;return o.x=this.la[0],o.y=this.la[1],o.z=this.description.dG()?this.la[2]:h.sa.te(1),o},u.prototype.ZB=function(o){this.wc();var r=this.hasAttribute(1);r||h.sa.yG(1,o.z)||(this.se(1),r=!0),this.la==null&&this.wn(),this.la[0]=o.x,this.la[1]=o.y,r&&(this.la[2]=o.z)},u.prototype.Ng=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},u.prototype.YB=function(o){this.setAttribute(0,0,o)},u.prototype.kh=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},u.prototype.WJ=function(o){this.setAttribute(0,1,o)},u.prototype.XR=function(){return this.Vc(1,0)},u.prototype.sX=function(o){this.setAttribute(1,0,o)},u.prototype.uR=function(){return this.Vc(2,0)},u.prototype.cX=function(o){this.setAttribute(2,0,o)},u.prototype.Fc=function(){return this.tF(3,0)},u.prototype.GJ=function(o){this.setAttribute(3,0,o)},u.prototype.Vc=function(o,r){var n=this.description.Rf(o);return 0<=n?this.la[this.description.bk(n)+r]:h.sa.te(o)},u.prototype.tF=function(o,r){var n=this.description.Rf(o);return 0<=n?this.la[this.description.bk(n)+r]:h.sa.te(o)},u.prototype.setAttribute=function(o,r,n){this.wc();var l=this.description.Rf(o);0>l&&(this.se(o),l=this.description.Rf(o)),this.la==null&&this.wn(),this.la[this.description.bk(l)+r]=n},u.prototype.K=function(){return 33},u.prototype.Eb=function(){return 0},u.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},u.prototype.un=function(o){if(this.la!=null){for(var r=h.fe.Kw(o,this.description),n=[],l=0,c=0,p=o.Ba;c<p;c++){var f=o.ld(c),m=h.sa.Wa(f);if(r[c]==-1){var w=h.sa.te(f);for(f=0;f<m;f++)n[l]=w,l++}else for(w=this.description.bk(r[c]),f=0;f<m;f++)n[l]=this.la[w],l++,w++}this.la=n}this.description=o},u.prototype.wn=function(){this.gJ(this.description.Be.length),u.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(!this.Bc()){var r=this.D();o.Gh(r,r),this.Db(r)}}else this.Bc()||(this.se(1),r=this.xz(),this.ZB(o.hp(r)))},u.prototype.copyTo=function(o){if(o.K()!=33)throw h.i.O();o.wc(),this.la==null?(o.Pa(),o.la=null,o.Pf(this.description)):(o.Pf(this.description),o.gJ(this.description.Be.length),u.YD(this.la,o.la,this.description.Be.length))},u.prototype.Ja=function(){return new u(this.description)},u.prototype.B=function(){return this.Bc()},u.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},u.prototype.dn=function(o){o.Pa(),this.description!=o.description&&o.Pf(this.description),o.$b(this)},u.prototype.A=function(o){this.Bc()?o.Pa():(o.v=this.la[0],o.G=this.la[1],o.C=this.la[0],o.H=this.la[1])},u.prototype.So=function(o){if(this.Bc())o.Pa();else{var r=this.xz();o.v=r.x,o.G=r.y,o.Xe=r.z,o.C=r.x,o.H=r.y,o.Dg=r.z}},u.prototype.Vg=function(o,r){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(o=this.Vc(o,r),n.pa=o,n.wa=o,n)},u.prototype.gJ=function(o){if(this.la==null)this.la=h.P.mg(o);else if(this.la.length<o){for(var r=this.la.slice(0),n=this.la.length;n<o;n++)r[n]=0;this.la=r}},u.YD=function(o,r,n){if(0<n)for(n=0;n<o.length;n++)r[n]=o[n]},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.Bc())return!!o.Bc();for(var r=0,n=this.description.Be.length;r<n;r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(!this.Bc())for(var r=0,n=this.description.Be.length;r<n;r++){var l=this.la[r];l=h.P.truncate(l^l>>>32),o=h.P.Vh(l,o)}return o},u.prototype.ng=function(){return null},u}(h.ba);h.Ta=k}(q||(q={})),function(h){var k=function(){function v(u,o,r){u!==void 0&&(this.x=u,this.y=o,this.z=r)}return v.construct=function(u,o,r){var n=new v;return n.x=u,n.y=o,n.z=r,n},v.prototype.L=function(u,o,r){this.x=u,this.y=o,this.z=r},v.prototype.lx=function(){this.z=this.y=this.x=0},v.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},v.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},v.prototype.sub=function(u){return new v(this.x-u.x,this.y-u.y,this.z-u.z)},v.prototype.Bg=function(u){new v(this.x*u,this.y*u,this.z*u)},v.prototype.Sh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},v}();h.Od=k}(q||(q={})),function(h){var k=function(){function v(u,o,r){this.Iw=this.yA=null,this.Zf=o,this.AT=o.y-r,this.zT=o.y+r,this.Gw=0,this.Zz=u,this.ra=r,this.MT=r*r,this.$z=r!=0,this.Nv=!1}return v.prototype.result=function(){return this.Gw!=0?1:0},v.prototype.UM=function(u){return u=u.ic(u.ge(this.Zf,!1)),h.h.zc(u,this.Zf)<=this.MT},v.prototype.aF=function(u){if(!this.$z&&(this.Zz&&this.Zf.rb(u.bc())||this.Zf.rb(u.xc())))this.Nv=!0;else if(u.oa==this.Zf.y&&u.oa==u.ma){if(this.Zz&&!this.$z){var o=Math.max(u.ta,u.qa);this.Zf.x>Math.min(u.ta,u.qa)&&this.Zf.x<o&&(this.Nv=!0)}}else{var r=!1;if(o=Math.max(u.ta,u.qa),this.Zf.x>o?r=!0:this.Zf.x>=Math.min(u.ta,u.qa)&&(r=0<u.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),r){if(this.Zf.y==u.bc().y){if(this.Zf.y<u.xc().y)return}else if(this.Zf.y==u.xc().y&&this.Zf.y<u.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(u.bc().y>u.xc().y?1:-1)}}},v.prototype.MI=function(u){var o=u.Vg(0,1);if(o.pa>this.zT||o.wa<this.AT)return!1;if(this.$z&&this.UM(u))return!0;if(o.pa>this.Zf.y||o.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(o=u.$F()))for(u=0;u<o;u++){var r=this.yA[u].get();if(this.aF(r),this.Nv)return!0}else if(this.aF(u),this.Nv)return!0;return!1},v.KM=function(u,o,r){for(o=new v(u.Kn()==0,o,r),u=u.Ha();u.ab();)for(;u.Ia();)if(r=u.ia(),o.MI(r))return-1;return o.result()},v.LM=function(u,o,r,n){var l=new h.l;u.yc(l),l.X(n,n);var c=new v(u.Kn()==0,r,n);u=u.Ha();var p=new h.l;for(p.L(l),p.C=r.x+n,p.G=r.y-n,p.H=r.y+n,n=(r=o.HF(p,n)).next();n!=-1;n=r.next())if(u.Wb(o.ka(n)),u.Ia()&&(n=u.ia(),c.MI(n)))return-1;return c.result()},v.ym=function(u,o,r){if(u.B())return 0;var n=new h.l;if(u.yc(n),n.X(r,r),!n.contains(o))return 0;if((n=u.Cb)!=null){var l=n.Hk;if(l!=null){if((l=l.Uo(o.x,o.y))==1)return 1;if(l==0)return 0}if((n=n.Gb)!=null)return v.LM(u,n,o,r)}return v.KM(u,o,r)},v.XS=function(u,o,r){return o.B()?0:v.ym(u,o.D(),r)},v.Ol=function(u,o){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*o<1*u*o},v}();h.Fg=k}(q||(q={})),function(h){var k=function(v){function u(o){return v.call(this,!0,o)||this}return wt(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 2},u.prototype.K=function(){return 1736},u.prototype.sG=function(o,r,n){this.ES(o,r,n)},u.prototype.kR=function(){this.AR()},u}(h.Xk);h.Ea=k}(q||(q={})),function(h){(function(k){k[k.PiPOutside=0]="PiPOutside",k[k.PiPInside=1]="PiPInside",k[k.PiPBoundary=2]="PiPBoundary"})(h.ML||(h.ML={})),h.jd=function(){function k(){}return k.FG=function(v,u,o){return(v=h.Fg.XS(v,u,o))==0?0:v==1?1:2},k.Zd=function(v,u,o){return(v=h.Fg.ym(v,u,o))==0?0:v==1?1:2},k.SX=function(v,u,o,r,n){if(u.length<o||n.length<o)throw h.i.O();for(var l=0;l<o;l++)n[l]=k.Zd(v,u[l],r)},k.nK=function(v,u,o,r,n){if(v.K()==1736)k.SX(v,u,o,r,n);else{if(v.K()!=197)throw h.i.ga("invalid_call");var l=new h.l;v.A(l),k.VM(l,u,o,r,n)}},k.VM=function(v,u,o,r,n){if(u.length<o||n.length<o)throw h.i.O();if(v.B())for(r=0;r<o;r++)n[r]=0;else for(v.X(.5*-r,.5*-r),v.X(.5*r,.5*r),r=0;r<o;r++)v.contains(u[r])?n[r]=1:v.contains(u[r])?n[r]=2:n[r]=0},k.UX=function(v,u,o,r,n){for(var l=0;l<o;l++)n[l]=v.ss(u[l],r)?2:0},k.TX=function(v,u,o,r,n){var l=v.Cb,c=null;l!=null&&(c=l.Hk),l=o;for(var p=0;p<o;p++)if(n[p]=1,c!=null){var f=u[p];c.Uo(f.x,f.y)==0&&(n[p]=0,l--)}if(l!=0)for(v=v.Ha();v.ab()&&l!=0;)for(;v.Ia()&&l!=0;)for(c=v.ia(),p=0;p<o&&l!=0;p++)n[p]==1&&c.ss(u[p],r)&&(n[p]=2,l--);for(p=0;p<o;p++)n[p]==1&&(n[p]=0)},k.oK=function(v,u,o,r,n){var l=v.K();if(l==1607)k.TX(v,u,o,r,n);else{if(!h.ba.zd(l))throw h.i.ga("Invalid call.");k.UX(v,u,o,r,n)}},k}()}(q||(q={})),function(h){var k=function(v){function u(o,r){if(arguments.length==2){var n=v.call(this,!1,o.description)||this;n.nf(o),n.lineTo(r)}else n=v.call(this,!1,o)||this;return n}return wt(u,v),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 1},u.prototype.K=function(){return 1607},u.prototype.sG=function(o,r,n){this.FS(o,r,n)},u}(h.Xk);h.Ua=k}(q||(q={})),function(h){var k=function(){function v(){}return v.prototype.progress=function(){return!0},v.Bp=function(u){if(u!=null&&!u.progress(-1,-1))throw h.i.RC()},v}();h.op=k}(q||(q={})),function(h){var k;(k=h.KK||(h.KK={}))[k.clipWithInputHorizon=1]="clipWithInputHorizon",k[k.clipWithOutputHorizon=2]="clipWithOutputHorizon";var v=function(){function r(){this.Mg=3,this.Xu=this.Lr=NaN}return r.prototype.KW=function(n){this.LB(1,n)},r.prototype.LW=function(n){this.LB(2,n)},r.prototype.cS=function(){return this.ks(1)},r.prototype.dS=function(){return this.ks(2)},r.prototype.LB=function(n,l){this.Mg=l?this.Mg|n:this.Mg&~n},r.prototype.ks=function(n){return(this.Mg&n)!=0},r.prototype.Qf=function(){var n=new r;return n.Lr=this.Lr,n.Xu=this.Xu,n.Mg=this.Mg,n},r}();h.tC=v,function(r){r[r.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",r[r.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.LK||(h.LK={}));var u=function(){function r(){this.Mg=0}return r.prototype.LB=function(n,l){this.Mg=l?this.Mg|n:this.Mg&~n},r.prototype.ks=function(n){return(this.Mg&n)!=0},r.kg=function(n){var l=new r;return l.Mg=n.Mg,l},r.prototype.hM=function(n){this.Mg=n.Mg},r}();h.wY=u;var o=function(){function r(n,l,c){this.ef=n,this.$f=l,this.Wf=new h.l,this.Wf.L(c),this.vT=n.dc()+l.dc()+this.Wf.dc().toString()}return r.prototype.dc=function(){return this.vT},r.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.$f.Nb(n.$f)&&this.Wf.Nb(n.Wf)},r}();h.BY=o,o=function(){function r(){this.$f=this.ef=null,this.mH=new v,this.nH=new u,this.yw=this.Yf=null,this.ow=this.Vn=!0}return r.Pr=function(n,l,c,p){var f;p===void 0&&(p=null),f===void 0&&(f=null);var m=new r;return m.sp(n,l,c,p,f),m},r.prototype.sp=function(n,l,c,p,f){if(n==null||l==null)throw h.i.ga("invalidArgument");if(this.ef=n,this.$f=l,this.ow=this.Vn=!1,p!=null&&(this.mH=p.Qf()),f!=null&&this.nH.hM(f),f=!1,l.Tb()==1&&p!=null&&(p=p.Lr,isNaN(p)||p==0||(f=!0)),n==l)this.Vn=!f,this.ow=!0;else{p=n.Tb();var m=l.Tb();if(p==0||m==0){if(c!=null)throw h.i.O();n.Id()!=null&&l.Id()!=null&&(this.Vn=n.Id().Nb(l.Id()))}else p==3||m==3?this.Vn=n.Nb(l):this.ef.fS(this.$f)?this.Vn=!f:this.Vn=!1,this.Yf=c,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},r.prototype.isIdentity=function(){return this.Vn},r.prototype.iR=function(){return this.mH.Qf()},r.prototype.Nb=function(n){return n==this||!!(n instanceof r&&this.ef.Nb(n.ef)&&this.$f.Nb(n.$f))&&(this.Yf==n.Yf||!(this.Yf==null||n.Yf==null||!this.Yf.Nb(n.Yf)))},r.prototype.kY=function(){this.yw=new h.du(this)},r}(),h.xr=o}(q||(q={})),function(h){var k=function(){function v(){}return v.Ep=function(u){return u*v.jW},v.mx=function(u,o){return v.bP(o-u)},v.cP=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=h.mc.MK(u))&&(u+=360),u)},v.bP=function(u){return 180<(u=v.cP(u))&&(u-=360),u},v.jW=57.29577951308232,v}();h.sr=k,h.Jh=function(){function v(){}return v.nj=function(u,o){var r=new h.l;u.A(r);var n=h.cb.ih(o),l=new h.l;return l.L(n),l.v=r.v,l.C=r.C,l.X(.01*l.da(),0),o=h.ua.Xd(o,r,!1),l.contains(r)?u:h.Vd.clip(u,l,o,0)},v.ms=function(u,o,r,n,l){if(!h.cb.Xc(o))throw h.i.O();var c=h.ua.mj(o,u,!1),p=h.cb.ih(o),f=h.cb.tc(o),m=f.Id().ci,w=h.cb.xv(f);f=h.cb.gv(f),w*=2-w;var $=new h.Oc;p.en($);var T=[[0,0],[0,0]];if(h.Gg.Tb(o)==2?n?(T[0][0]=v.an(l,$),T[0][1]=p.Lp(),h.cb.wt(),p=T[0][0]*m):(T[0][0]=p.ik(),T[0][1]=l,h.cb.wt(),p=T[0][1]*m):p=l*m,!n&&p!=0)throw h.i.O();var E=new h.ha,O=new h.hd;u=O.Ib(u);for(var P=[0],L=new h.h,F=new h.h,z=new h.h,R=new h.h,G=new h.h,H=new h.h,B=O.Ob(u);B!=-1;B=O.Sb(B)){var te=O.Ya(B);O.D(te,z);for(var Q=!1,ne=te=O.V(te);ne!=-1;ne=O.V(ne)){if(ne==te){if(Q)break;Q=!0}if(O.D(ne,R),n&&c<l-z.x&&R.x-l>c||c<l-R.x&&z.x-l>c||!n&&c<-z.y&&R.y>c||c<-R.y&&z.y>c)do if(!(Math.abs(z.x-R.x)>=.5*$.S())){if(h.Gg.Tb(o)==2?(T[0][0]=v.an(z.x,$),T[0][1]=z.y,T[1][0]=v.an(R.x,$),T[1][1]=R.y,h.cb.ZV(),G.x=T[0][0]*m,G.y=T[0][1]*m,H.x=T[1][0]*m,H.y=T[1][1]*m):(G.x=z.x*m,G.y=z.y*m,H.x=R.x*m,H.y=R.y*m),H.x=6.283185307179586*(R.x-z.x)/$.S()+G.x,n){if(F.x=p,F.y=v.Iz(f,w,G,H,p,r),isNaN(F.y))break}else{if(F.x=v.Gz(f,w,G,H,r),isNaN(F.x))break;F.y=0}h.kb.xd(f,w,G.x,G.y,H.x,H.y,E,null,null,r);var pe=E.u;h.kb.xd(f,w,G.x,G.y,F.x,F.y,E,null,null,r);var he=E.u;h.Gg.Tb(o)==2?(T[0][0]=F.x/m,T[0][1]=F.y/m,h.cb.XQ(),n?(L.y=T[0][1],L.x=l):(L.x=v.qs(T[0][0],z.x,R.x,$),L.y=l)):n?(L.x=l,L.y=F.y/m):(L.x=v.qs(F.x/m,z.x,R.x,$),L.y=l),P[0]=0<pe?h.P.Tk(he/pe,0,1):.5,P[0]!=0&&P[0]!=1&&(pe=O.Na(ne),O.Wl(pe,P,1),O.Db(O.V(pe),L.x,L.y))}while(0);z.N(R)}}return O.Ke(u)},v.Hn=function(u,o,r,n,l){if(u.B())return u;var c=h.cb.bf(o);return v.Jp(u,r-180*c,360*c,o,n,l,!0)},v.Iz=function(u,o,r,n,l,c){if(3.141592653589793<=Math.abs(r.x-n.x)||!v.Un(r.x,n.x,l))return NaN;if(r.x>n.x)var p=n;else p=r,r=n;n=new h.ha(0);var f=new h.ha(0),m=new h.ha(0);h.kb.xd(u,o,p.x,p.y,r.x,r.y,f,n,null,c);var w=f.u,$=0,T=1,E=new h.h;for(E.N(p);w*(T-$)>1e-12*u;){var O=.5*($+T);if(h.kb.qj(u,o,p.x,p.y,w*O,n.u,f,m,c),E.x=f.u,E.y=m.u,E.x==l)break;if(v.Un(p.x,E.x,l))T=O;else{if(!v.Un(r.x,E.x,l))return NaN;$=O}}return E.y},v.Un=function(u,o,r){return u=k.Ep(u),o=k.mx(u,k.Ep(o)),(r=k.mx(u,k.Ep(r)))==0||0<o&&0<r&&r<=o||0>o&&0>r&&r>=o},v.an=function(u,o){var r=o.wa-o.pa;return o.Kt(u-Math.floor((u-o.pa)/r)*r)},v.qs=function(u,o,r,n){var l=new h.Oc;for(l.L(o,r),r=n.S(),u=Math.floor((u-o)/r)*r+u,l=l.tf();Math.abs(u-l)>Math.abs(u+r-l);)u+=r;return u},v.Gz=function(u,o,r,n,l){if(r.y>n.y)var c=n;else c=r,r=n;if((n=new h.Oc).L(c.y,r.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-r.x))return NaN;if(c.x==r.x)return c.x;var p=new h.ha(0),f=new h.ha(0),m=new h.ha(0);h.kb.xd(u,o,c.x,c.y,r.x,r.y,f,p,null,l);var w=f.u,$=0,T=1,E=new h.h;for(E.N(c);w*(T-$)>1e-12*u;){var O=.5*($+T);if(h.kb.qj(u,o,c.x,c.y,w*O,p.u,f,m,l),E.x=f.u,E.y=m.u,n.L(c.y,E.y),E.y==0)break;if(n.contains(0))T=O;else{if(n.L(r.y,E.y),!n.contains(0))return NaN;$=O}}return E.x},v.Jp=function(u,o,r,n,l,c,p){var f=new h.l;if(u.A(f),f.B())return u;var m=new h.Oc;f.en(m);var w=new h.Oc;if(w.L(o,o+r),w.contains(m)&&w.wa!=m.wa)return u;var $=new h.l;$.L(f);var T=u.K();if(T==33)return((f=($=l?u:u.Qf()).Ng())<w.pa||f>=w.wa||p&&f==w.wa)&&(f+=Math.ceil((w.pa-f)/r)*r,f=w.Kt(f),$.YB(f)),$;if(T==550){for(n=($=l?u:u.Qf()).vb(0),T=2*$.I(),u=!1,l=0;l<T;l+=2)((f=n.read(l))<w.pa||f>=w.wa||p&&f==w.wa)&&(u=!0,f+=Math.ceil((w.pa-f)/r)*r,f=w.Kt(f),n.write(l,f));return u&&$.Qc(1993),$}if(w.contains(m))return u;if(T==197)return r=l?u:u.Qf(),f.Fa($),r.Zo(f),r;var E=.1*Math.max(f.da(),f.S());for($.X(0,E),p=u,w=n.Yd(0),u=h.Ih.local(),l=new h.Ed;;){var O=Math.floor((m.pa-o)/r),P=Math.ceil((m.wa-o)/r);if(!(3<P-O))break;O=Math.floor(.5*(P+O)),$.v=f.v-E,$.C=o+r*O;var L=h.Vd.clip(p,$,w,c);$.v=$.C,$.C=f.C+E;var F=h.Vd.clip(p,$,w,c);l.ig((O-P)*r,0),F.Pc(l),T==1736?p=u.W(L,F,n,null):(p=L).add(F,!1),p.A(f),f.en(m)}for($.v=o,$.C=o+r,(o=new h.l).L($),o.X(w,0),(o=Math.floor((f.v-$.v)/r)*r)!=0?($.move(o,0),l.ig(-o,0)):l.MB(),o=T==1607?new h.Ua(p.description):new h.Ea(p.description),c=new h.l,m=new h.l;f.C>$.v;)(E=h.Vd.clip(p,$,w,0)).A(m),(T==1607?!E.B()&&(m.S()>w||m.da()>w):!E.B()&&(T!=1736||m.S()>w))&&(E.Pc(l),E.A(m),o.A(c),c.X(w,w),c.isIntersecting(m)&&T==1736?o=u.W(o,E,n,null):o.add(E,!1)),$.move(r,0),l.shift(-r,0);return o},v.RI=function(u,o,r,n){var l=new h.ee(r.description);l.Gd(r,0,-1),l=h.cb.Bh(l,u,o);var c=r.I();if(n.Pa(),!h.cb.Xc(u)||c!=l.I())return!1;var p=new h.l;r.A(p);var f=new h.l;if(l.A(f),p=p.S(),f=f.S(),p!=0&&f!=0){if(f/=p,u=h.cb.ih(o).S()/h.cb.ih(u).S(),1e-10<Math.abs(f/u-1))return!1}else if(p!=0||f!=0)return!1;for(n.add(r,!1),r=0;r<c;r++)u=l.Oa(r),n.Db(r,u);return!0},v.Jz=function(){throw h.i.Fe()},v}()}(q||(q={})),function(h){var k,v,u;(v=k=h.ui||(h.ui={}))[v.Clip=0]="Clip",v[v.DontClip=1]="DontClip",v[v.PannableFold=2]="PannableFold",function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"}(u=h.RK||(h.RK={})),h.Ab=function(){function o(){}return o.zv=function(r,n,l){if(l||0<n){for(r=r.toString(h.Tc.PE_STR_NAME_CANON|h.Tc.PE_STR_AUTH_NONE),n=[],l=0;l<r.length;l++)n[l]="a"<=r[l]&&"z">=r[l]?n[l]=r[l].toUpperCase():r[l];return n.join()}return r.toString(h.Tc.PE_STR_AUTH_TOP)},o.wr=function(r,n,l,c){var p=c.length,f=l.I();if(f!=0){var m=l.vb(0),w=Math.min(f,p),$=0,T=r.gh();isNaN(n)&&(n=0);for(var E=r.Xc(),O=179*(r=E?r.tc().Le().S():0)/360;0<f;){if(m.pB($<<1,w,c),h.gj.projToGeogCenter(T,w,c,n),E)for(var P=0;P<w;P++){var L=c[P][0]-n,F=h.mc.sign(L),z=m.read(2*($+P));0>F*h.mc.sign(z)&&Math.abs(L)>O&&(c[P][0]+=-F*r)}m.pC($<<1,w,c),$+=w,f-=w,w=Math.min(f,p)}l.Qc(1993)}},o.DL=function(r,n,l,c){var p=0,f=r.gh();isNaN(p)&&(p=0);var m=r.Xc(),w=r.bf();r=360*w,w*=179;for(var $=c.length,T=0;T<l;){for(var E=T;E<l&&n[E].isNaN();++E)T++;var O=Math.min($,l-T);if(0<O){E=1;for(var P=T+1;E<O;++E,++P)if(n[P].isNaN()){O=E;break}if(h.ua.Ey(c,n,T,O),h.gj.projToGeogCenter(f,O,c,p),m)for(E=0,P=T;E<O;++E,++P){var L=n[P].x,F=c[E][0]-p,z=h.mc.sign(F);0>z*h.mc.sign(L)&&Math.abs(F)>w&&(c[E][0]-=z*r)}h.ua.Dy(n,T,c,O),T+=O}}},o.Kx=function(r,n,l){var c=l.length,p=n.I();if(!(1>p)){var f=n.vb(0),m=Math.min(p,c),w=0,$=r.gh(),T=r.Xc(),E=T?r.Le().S():0,O=179*E/360,P=0;for(T&&(P=r.Bi());0<p;){if(f.pB(w<<1,m,l),h.gj.geogToProj($,m,l),T)for(r=0;r<m;r++){var L=l[r][0],F=h.mc.sign(L),z=f.read(2*(w+r))-P;0>F*h.mc.sign(z)&&Math.abs(L)>O&&(l[r][0]+=-F*E)}f.pC(w<<1,m,l),w+=m,p-=m,m=Math.min(p,c)}n.Qc(1993)}},o.CL=function(r,n,l,c){if(l!=0){var p=r.gh(),f=r.Xc(),m=f?r.Le().S():0,w=179*m/360,$=0;for(f&&($=r.Bi()),r=0;r<l;){for(var T=r;T<l&&n[T].isNaN();++T)r++;var E=Math.min(c.length,l-r);if(0<E){T=1;for(var O=r+1;T<E;++T,++O)if(n[O].isNaN()){E=T;break}if(h.ua.Ey(c,n,r,E),h.gj.geogToProj(p,E,c),f)for(T=0,O=r;T<E;T++){var P=c[T][0],L=h.mc.sign(P);0>L*h.mc.sign(n[O].x-$)&&Math.abs(P)>w&&(c[T][0]-=L*m)}h.ua.Dy(n,r,c,E),r+=E}}}},o.vr=function(r,n,l,c){var p=n.I();if(p!=0){var f=n.vb(0),m=r.ef,w=r.$f,$=m.tc().Sp(),T=w.tc().Sp(),E=m.bf(),O=w.bf();if((r=r.Yf)==null||r.count()==0){for(l=$/T,c=(m.Wp()-w.Wp())*O,T=-90*E,r=90*E,$=!1,O=1,m=2*p;O<m;)E=f.get(O),(w=h.P.Tk(E,T,r))!=E&&(f.set(O,w),$=!0),O+=2;if(c!=0||l!=1)for($=!0,T=new h.h,O=0;O<p;O++)f.uc(2*O,T),T.x*=l,T.x+=c,T.y*=l,f.Vt(2*O,T);$&&n.Qc(1993)}else{m=c.length,w=Math.min(p,m);var P=h.P.mg(w),L=null,F=0,z=NaN,R=NaN,G=360*O,H=O/E;l&&(R=90*O,z=89.9*E,L=h.P.mg(w));for(var B=!0,te=0;p!=0;){for(E=!1,f.pB(F<<1,w,c),O=0;O<w;O++)P[O]=c[O][0];if(l)for(O=0;O<w;O++){var Q=Math.abs(c[O][1])-z;0<Q&&(E=c[O][1],c[O][1]=h.mc.En(z,E),L[O]=h.mc.En(Q,E),E=!0)}for(O=c[0][0],r.transform(c,w,$,T),B&&(te=c[0][0]-H*O,B=!1),O=0;O<w;O++)Q=c[O][0]-P[O]*H-te,200<Math.abs(Q)&&(c[O][0]=0<Q?c[O][0]-G:c[O][0]+G);if(E){for(O=0;O<w;O++)L[O]!=0&&(c[O][1]+=H*L[O],c[O][1]>R?c[O][1]=R:c[O][1]<-R&&(c[O][1]=-R));for(E=0;E<w;E++)L[E]=0}f.pC(F<<1,w,c),F+=w,p-=w,w=Math.min(p,m)}n.Qc(1993)}}},o.BL=function(r,n,l,c){if(r.ow)c=90*r.ef.bf(),h.ua.ZJ(n,l,-c,c);else{var p=r.Yf,f=r.ef,m=r.$f;r=f.Zr();var w=m.Zr(),$=f.bf(),T=90*$,E=m.bf();if(p==null||p.count()==0){if(c=r/w,p=(f.Wp()-m.Wp())*E,h.ua.ZJ(n,l,-T,T),p!=0||c!=1)for(E=0;E<l;E++)n[E].x*=c,n[E].x+=p,n[E].y*=c}else{f=Math.min(l,c.length),T=h.P.mg(f),m=360*E,$=E/$;for(var O=!0,P=0,L=0;l!=0;){for(E=0;E<f;E++)T[E]=n[E+L].x;for(E=n[0].x,h.ua.Ey(c,n,L,f),p.transform(c,f,r,w),h.ua.Dy(n,L,c,f),O&&(P=n[0].x-$*E,O=!1),E=0;E<f;E++){var F=n[L+E].x-T[E]*$-P;200<Math.abs(F)&&(n[L+E].x=0<F?n[L+E].x-m:n[L+E].x+m)}L+=f,l-=f,f=Math.min(l,c.length)}}}},o.fv=function(r,n){return r=r.ih(),isNaN(n)||r.Lu(n,0),r},o.PQ=function(r,n,l,c,p,f,m,w){for(var $=o.fv(c,p),T=$.S(),E=T/360,O=o.kE*E,P=r.vb(0),L=n.Xc(),F=L?T/n.Le().S():0,z=!1,R=new h.Ea(l.description),G=0,H=l.ea();G<H;++G){var B=L,te=new h.Ua(l.description);if(te.addPath(l,G,!0),m!=0){var Q=o.KD(!0,te,$.H-w,$.H,m);(z=z||Q)&&(B=!1)}var ne=-1;B&&(ne=r.Ca(G));var pe=te.vb(0),he=te.I(),Ie=0,ge=pe.read(0),He=0;Q=3*c.Yd(0);var Fe=!1,xe=new h.h;xe.Sc();var zt=new h.h;zt.Sc();for(var vi=!1,Gt=1;Gt<he;++Gt){var yt=h.h.construct(pe.gg(2*Gt),pe.gg(2*Gt+1)),gt=yt.x,it=gt+Ie,Ht=it-ge;if(yt.x=it,Math.abs(Ht)>O){if(B){var tt=ne+(Gt+1<he?Gt:0),Hr=P.read(2*(ne+Gt-1));tt=(P.read(2*tt)-Hr)*F,Math.abs(Ht-tt)>1*E&&(B=!1)}B||(it=gt+(Ie-=h.mc.En(T,it-ge)),++He,vi=Ie!=0,yt.x=it)}else Fe||h.ua.vG(zt,xe,yt,Q)&&(Fe=!0);vi&&pe.write(2*Gt,it),ge=it,zt.N(xe),xe.N(yt)}0<He&&te.Qc(1993),B=te.Oa(0),he=te.Oa(he-1),te=h.h.ub(B,he)<Q?o.pQ(te,c,p,f,Fe):o.qQ(r,G,te,c,p),R.add(te,!1)}return p=c.Yd(0),l=$.S()/180,o.Lt(R,$,.1*p,!1),R=R!=(p=h.ti.clip(R,$,p,l,f)),r=r.He(),m=0,0<(w=p.He())&&0>r?m=1:0>=w&&0<r&&(w==0?(w=NaN,n.Tb()==2?w=n.ol().He():n.Tb()==1&&(w=n.Le().rF()),r>.99*w&&(m=-1)):m=-1),m!=0&&((n=new h.Ea(p.description)).vp($),(n=h.Zl.local().W(n,l,f)).add(p,!1),R=!0,p=n),R&&(p=h.$l.local().W(p,c,!1,f)),p},o.qQ=function(r,n,l,c,p){var f=l.I(),m=l.Oa(0),w=l.Oa(f-1);p=(c=o.fv(c,p)).S(),m=h.mc.sign(w.x-m.x);var $=new h.l;l.yc($);var T=c.ik();if(w=T-p,T+=p,0<=m){var E=Math.ceil((w-$.v)/p);for(E*=p;w>$.v+E;)E+=p;for(;w<$.C+E;)E-=p;var O=E;720<$.S()&&(T=w+360*Math.ceil($.S()/360))}else{for(E=Math.ceil((T-$.C)/p),E*=p;T<$.C+E;)E-=p;for(;T>$.v+E;)E+=p;O=E,720<$.S()&&(w=T-360*Math.ceil($.S()/360))}E=m*p;var P=h.l.construct($.v,$.G,$.C,$.H);P.move(O,0);var L=new h.Ed;L.ig(O,0),l.Pc(L),($=new h.Ua(l.description)).add(l,!1),O=l.Oa(f-1),p=0;for(var F=$.Oa(0).x,z=0;0<m?P.C<T:P.v>w;)1024<=z&&(z=0),P.move(E,0),L.Lb=E,l.Pc(L),F+=E,c.v<=F&&c.C>=F&&(p=$.I()-1),l.Db(0,O),O=l.Oa(f-1),$.Fr(l,0,0,f-1,!1);return l=new h.Ea($.description),f=0<r.Kr(n),l.add($,!1),r=$.Oa(0),w=$.Oa($.I()-1),n=l.ea()-1,(0>m?f:!f)?(m=h.h.construct(w.x,c.H),l.Ei(m),m=h.h.construct(c.ik(),c.H),l.Ei(m),c=h.h.construct(r.x,c.H)):(m=h.h.construct(w.x,c.G),l.Ei(m),m=h.h.construct(c.ik(),c.G),l.Ei(m),c=h.h.construct(r.x,c.G)),l.Ei(c),l.sG(0,n,0),l.fO(p),l},o.pQ=function(r,n,l,c,p){var f=new h.Ea(r.description);f.add(r,!1),f.yB(0,f.I()-1);var m=new h.l;f.yc(m);var w=(l=o.fv(n,l)).S(),$=Math.ceil((l.v-m.v)/w);for($*=w;l.v>m.v+$;)$+=w;for(;l.v<m.C+$;)$-=w;if(($+=w)!=0){m.move($,0);var T=new h.Ed;T.ig($,0),f.Pc(T)}if(l.v<=m.v&&l.C>m.C)return p&&(p=f.He(),n=(f=h.$l.local().W(f,n,!0,c)).He(),(n=h.mc.sign(p)!=h.mc.sign(n))&&f.jJ()),f;for((r=new h.Ea(r.description)).add(f,!1),p=p||m.S()>w-n.Yd(0);m.v<l.C;)m.move(w,0),(T=new h.Ed).ig(w,0),f.Pc(T),r.add(f,!1);return p&&(p=r.He(),r.$o(1),n=(r=h.$l.local().W(r,n,!0,c)).He(),(n=h.mc.sign(p)!=h.mc.sign(n))&&r.jJ()),r},o.KD=function(r,n,l,c,p){for(var f=n.vb(0),m=n.I(),w=!1,$=0;$<m;$++){var T=h.h.construct(f.gg(2*$),f.gg(2*$+1));if(1&p&&T.y>=l){w=!0;break}if(2&p&&T.y<=-l){w=!0;break}}if(!w)return!1;f=!1,r&&(f=n.Pn(0)),m=(r=new h.hd).Ib(n),w=r.Ob(m);var E=-1,O=!0,P=new h.h;P.Sc(),$=new h.Ta;for(var L=-1,F=r.Ya(w);F!=-1;F=r.V(F)){T=r.Oa(F);var z=1&p&&90<=T.y?1:0;if(z|=2&p&&T.y<=-l?2:0,0<E&&E!=z){if(P.x!=T.x){P.x=T.x,r.Xi(r.Na(F),$);var R=r.yj(w,F,$);r.mf(R,P)}if(f)for(L=L!=-1?r.V(L):r.Ya(w),R=r.Na(F);L!=R;)L=r.qd(L,!1);L=-1}0<z&&(T.y=h.mc.En(c,T.y),r.mf(F,T),O||E==z||(T.x!=P.x?(r.Xi(F,$),R=r.yj(w,F,$),r.Db(R,P.x,T.y),L=R):L=F)),E=z,P=T,O=!1}if(f){if(L!=-1)for(L=r.V(L);L!=-1;)L=r.qd(L,!1);l=r.Ya(w),r.hq(l,r.tj(w))||(r.Xi(l,$),r.yj(w,-1,$))}return r.Ke(m).copyTo(n),!0},o.Hz=function(r,n,l,c){var p=r;if(p.B()||l==k.DontClip)return p;var f=p.K();if(f==33)return p=[(c=p).D()],o.tG(p,1,n,l),p[0].isNaN()?c.Pa():c.Db(p[0]),r;var m=(r=n.tc()).bf(),w=90*m,$=180*m,T=360*m,E=n.Bi(),O=.5*m,P=new h.l;p.A(P);var L=n.Xr(),F=n.KQ(),z=L.K()==197;if(n=new h.l,L.A(n),l==k.PannableFold&&(l=r.Le().S(),n.v=E-.5*l,n.C=n.v+l),P.G<-w||P.H>w){if(new h.l().L(P.v-m,-w,P.C+m,w),(p=h.ti.Pu(p,n,r,NaN,0,c)).B())return p;p.A(P)}if(F&&(n.H<P.G||n.G>P.H))return p.Ja();if(P.S()>T&&(p=o.Jp(p,E-$,T,r,!0,0,!0,c)).A(P),(w=o.$N(P.v,P.C,n.v,n.C,T))!=0&&P.move(w,0),P.C>n.C||P.v<n.v){if(P.C>n.C)for(;P.v>=n.C;)P.move(-T,0),w-=T;for(;P.v<n.C-T;)P.move(T,0),w+=T}if(l=h.ua.Ju(r,L),w!=0&&((m=new h.Ed).ig(w,0),p.Pc(m)),F){if(z&&n.contains(P))return p;for(F=[null,null],w=0;2>w;w++){if(z?m=h.ba.Ic(f)?h.ti.clip(p,n,l,O,c):h.ti.clip(p,n,l,0,c):(m=h.Zj.local().W(p,L,r,c))==L&&(m=h.ba.kg(m)),n.v<=P.v&&n.C>=P.C||n.v>=P.v&&n.C<=P.C)return m;F[w]=m,w==0&&(P.move(-T,0),(m=new h.Ed).ig(-T,0),p.Pc(m))}if(f==550)F[0].Gd(F[1],0,-1);else if(h.ba.Ic(f))F[0].add(F[1],!1);else{if(f!=33)throw h.i.ga("intersect_with_GCS_horizon: unexpected geometry type");F[0].B()&&(F[0]=F[1])}return F[0]}if(n.H<P.G||n.G>P.H)return p;for(f=0;!p.B()&&P.C>n.v;)f!=0&&((m=new h.Ed).ig(f,0),p.Pc(m)),h.fj.local().W(4,p,L,r,c)||L==(p=h.mp.local().W(p,L,r,c))&&(p=h.ba.kg(p)),f!=0&&((O=new h.Ed).ig(-f,0),p.Pc(O)),f-=T,P.move(-T,0);return p},o.tG=function(r,n,l,c){if(n!=0&&c!=k.DontClip)if(c==k.PannableFold){c=l.CR();for(var p=n,f=0;f<n;f++)(r[f].y>c.H||r[f].y<c.G)&&(r[f].Sc(),p--);p!=0&&o.cv(r,n,c.v,c.S())}else{var m=90*(c=l.bf()),w=180*c;for(c*=360,p=n,f=0;f<n;f++)(r[f].y>m||r[f].y<-m)&&(r[f].Sc(),p--);if(p!=0){(p=new h.l).bx(r,n),m=l.Xr();var $=l.kv();f=m.K()==197;var T=new h.l;if(m.A(T),!$||!(T.H<p.G||T.G>p.H))if($)if(o.cv(r,n,T.ik()-w,c),p=n,f)for(f=0;f<n;f++)T.contains(r[f])||(r[f].Sc(),p--);else for(l=h.ua.Ju(l.tc(),m),f=0;f<n;f++)(w=h.jd.Zd(m,r[f],l)!=0)||(r[f].Sc(),p--);else for(o.cv(r,n,-w,c),p=n,l=h.ua.Ju(l.tc(),m),f=0;f<n;f++)(w=r[f]).isNaN()&&p--,$=o.oE(w.x,T.v,T.C,c),w.x+=$,(w=h.jd.Zd(m,w,l)!=0)&&(r[f].Sc(),p--)}}},o.Jp=function(r,n,l,c,p,f,m,w){var $=r.K(),T=n+l;if($===33){var E=(c=p?r:r.Qf()).Ng();return(E<n||E>=T||m&&E==T)&&(E+=Math.ceil((n-E)/l)*l,E=h.P.Tk(E,n,T),c.YB(E)),c}if(r.B()||(E=new h.l,r.A(E),E.B()))return r;var O=new h.Oc;E.en(O);var P=new h.Oc;if(P.L(n,T),P.contains(O))return r;if((T=new h.l).L(E),$===550){for(w=(c=p?r:r.Qf()).vb(0),$=2*c.I(),T=!1,n=0;n<$;n+=2)((E=w.read(n))<P.pa||E>=P.wa||m&&E==P.wa)&&(T=!0,E+=Math.ceil((P.pa-E)/l)*l,E=P.Kt(E),w.write(n,E));return T&&c.Qc(1993),c}if($==197)return l=p?r:r.Qf(),E.Fa(T),l.Zo(E),l;var L=.1*Math.max(E.da(),E.S());for(T.X(0,L),m=r,P=c.Yd(0),r=h.Ih.local(),p=new h.Ed;;){var F=Math.floor((O.pa-n)/l),z=Math.ceil((O.wa-n)/l);if(!(3<z-F))break;F=Math.floor(.5*(z+F)),T.v=E.v-L,T.C=n+l*F;var R=h.ti.clip(m,T,P,f,w);T.v=T.C,T.C=E.C+L;var G=h.ti.clip(m,T,P,f,w);p.ig((F-z)*l,0),G.Pc(p),$==1736?m=r.W(R,G,c,null):(m=R).add(G,!1),m.A(E),E.en(O)}for(T.v=n,T.C=n+l,(n=new h.l).L(T),n.X(P,0),(n=Math.floor((E.v-T.v)/l)*l)!=0?(T.move(n,0),p.ig(-n,0)):p.MB(),n=$==1607?new h.Ua(m.description):new h.Ea(m.description),f=new h.l,O=new h.l;E.C>T.v;)(L=h.ti.clip(m,T,P,0,w)).A(O),($==1607?!L.B()&&(O.S()>P||O.da()>P):!L.B()&&($!=1736||O.S()>P))&&(L.Pc(p),L.A(O),n.A(f),f.X(P,P),f.isIntersecting(O)&&$==1736?n=r.W(n,L,c,null):n.add(L,!1)),T.move(l,0),p.shift(-l,0);return n},o.cv=function(r,n,l,c){for(var p=l+c,f=0;f<n;f++){var m=r[f].x;l<=m&&m<p||!(m<l||m>p||m==p)||(m+=Math.ceil((l-m)/c)*c,m=h.P.Tk(m,l,p),r[f].x=m)}},o.Hn=function(r,n,l,c,p,f){if(!n.Xc())throw h.i.ga("fold_into_360_degree_range");if(r.B())return r;if(n.Tb()==2){l=n.rv();var m=n.qv()-l}else{var w=n.bf();m=360*w,l-=180*w}return o.Jp(r,l,m,n,c,p,!0,f)},o.lF=function(r,n,l,c){if(l.Tb()==2)c=l.rv(),l=l.qv()-c;else{var p=l.bf();l=360*p,c-=180*p}o.cv(r,n,c,l)},o.nj=function(r,n){var l=n.Le();if(r.K()==33){var c=r.kh();return l.G<=c&&c<=l.H?r:r.Ja()}c=new h.l,r.A(c);var p=new h.l;return p.L(l),p.v=c.v,p.C=c.C,p.X(.01*p.da(),0),l=h.ua.py(n,c),p.contains(c)?r:h.ti.clip(r,p,l,0,null)},o.kr=function(r,n,l){return r>n.C&&r-n.C<l?n.C:r<n.v&&n.v-r<l?n.v:r},o.BX=function(r,n,l,c){c.x=o.kr(r.x,n,l),c.y=r.y},o.AX=function(r,n,l,c){for(var p=0;p<n;p++)r[p].y<l.G||r[p].y>l.H?r[p].Sc():r[p].x=o.kr(r[p].x,l,c)},o.Lt=function(r,n,l,c){if(!r.B()){var p=r.K();if(!c||p!=1736)if(h.ba.zj(p)){c=r.vb(0),p=0;for(var f=r.I();p<f;p++){var m=c.read(2*p),w=o.kr(m,n,l);w!=m&&c.write(2*p,w)}r.Qc(1993)}else if(p==197)c=new h.l,r.A(c),c.v=o.kr(c.v,n,l),c.C=o.kr(c.C,n,l),r.Zo(c);else{if(p!=33)throw h.i.ga("internal error");r.YB(o.kr(r.Ng(),n,l))}}},o.pS=function(r,n,l,c){var p=new h.hd,f=p.Ib(r);return r=h.ua.Ju(n,r),o.ms(p,f,n,r,l,!0,c),p.Ke(f)},o.ms=function(r,n,l,c,p,f,m){if(!l.Xc())throw h.i.O("invalid call");var w=l.Le(),$=l.tc(),T=$.gh().getDatum().getSpheroid();$=$.Id().ci;var E=T.getFlattening();T=T.getAxis(),E*=2-E;var O=new h.Oc;w.en(O);var P=null,L=[[0,0],[0,0]];if(l.Tb()==2?(P=l.gh(),f?(L[0][0]=o.an(m,O),L[0][1]=w.Lp(),h.gj.projToGeog(P,1,L),w=L[0][0]*$):(L[0][0]=w.ik(),L[0][1]=m,h.gj.projToGeog(P,1,L),w=L[0][1]*$)):w=m*$,!f&&w!=0&&p!=u.GreatElliptic)throw h.i.ga("invalid argument");var F=new h.ha,z=[0],R=new h.h,G=new h.h,H=new h.h,B=[null,null],te=new h.h,Q=new h.h,ne=new h.h,pe=new h.h;for(n=r.Ob(n);n!=-1;n=r.Sb(n)){var he=r.Ya(n);r.D(he,te);for(var Ie=!1,ge=he=r.V(he);ge!=-1;ge=r.V(ge)){if(ge==he){if(Ie)break;Ie=!0}if(r.D(ge,Q),f&&(c<m-te.x&&Q.x-m>c||c<m-Q.x&&te.x-m>c)||!f&&(m!=0||c<-te.y&&Q.y>c||c<-Q.y&&te.y>c))do if(!(Math.abs(te.x-Q.x)>=.5*O.S())){if(l.Tb()==2?(L[0][0]=o.an(te.x,O),L[0][1]=te.y,L[1][0]=o.an(Q.x,O),L[1][1]=Q.y,h.gj.projToGeogCenter(P,2,L,0),ne.x=L[0][0]*$,ne.y=L[0][1]*$,pe.y=L[1][1]*$):(ne.x=te.x*$,ne.y=te.y*$,pe.y=Q.y*$),pe.x=2*(Q.x-te.x)*Math.PI/O.S()+ne.x,f){if(G.x=w,G.y=o.Iz(T,E,ne,pe,w,p),isNaN(G.y))break;B[0]=G;var He=1}else if(p==u.GreatElliptic){var Fe=[0,0];if((He=h.Nx.Jz(E,ne,pe,w,Fe))==0)break;G.x=Fe[0],G.y=w,B[0]=G,He==2&&(H.x=Fe[1],H.y=w,B[1]=H)}else{if(G.x=o.Gz(T,E,ne,pe,p),isNaN(G.x))break;G.y=0,B[0]=G,He=1}var xe=-1;for(Fe=0;Fe<He;Fe++){h.kb.xd(T,E,ne.x,ne.y,pe.x,pe.y,F,null,null,p);var zt=F.u;h.kb.xd(T,E,ne.x,ne.y,B[Fe].x,B[Fe].y,F,null,null,p);var vi=F.u;if(l.Tb()==2?(L[0][0]=B[Fe].x/$,L[0][1]=B[Fe].y/$,h.gj.geogToProj(P,1,L),f?(R.y=L[0][1],R.x=m):(R.x=o.qs(L[0][0],te.x,Q.x,O),R.y=m)):f?(R.x=m,R.y=B[Fe].y/$):(R.x=o.qs(B[Fe].x/$,te.x,Q.x,O),R.y=m),z[0]=0<zt?h.P.Tk(vi/zt,0,1):.5,z[0]==0||z[0]==1)break;xe>z[0]||(xe=r.Na(ge),r.Wl(xe,z,1),r.Db(r.V(xe),R.x,R.y),xe=z[0])}}while(0);te.N(Q)}}},o.an=function(r,n){var l=n.wa-n.pa;return n.Kt(r-Math.floor((r-n.pa)/l)*l)},o.qs=function(r,n,l,c){var p=new h.Oc;for(p.L(n,l),l=c.S(),r=Math.floor((r-n)/l)*l+r,p=p.tf();Math.abs(r-p)>Math.abs(r+l-p);)r+=l;return r},o.Un=function(r,n,l){return r=h.sr.Ep(r),n=h.sr.mx(r,h.sr.Ep(n)),(l=h.sr.mx(r,h.sr.Ep(l)))==0||0<n&&0<l&&l<=n||0>n&&0>l&&l>=n},o.Iz=function(r,n,l,c,p,f){if(f==u.GreatElliptic)return h.Nx.NS(n,l,c,p);if(Math.abs(l.x-c.x)>=Math.PI||!o.Un(l.x,c.x,p))return NaN;if(l.x>c.x)var m=c;else m=l,l=c;c=new h.ha;var w=new h.ha,$=new h.ha;h.kb.xd(r,n,m.x,m.y,l.x,l.y,w,c,null,f);var T=w.u,E=0,O=1,P=new h.h;for(P.N(m);T*(O-E)>1e-12*r;){var L=.5*(E+O);if(h.kb.qj(r,n,m.x,m.y,T*L,c.u,w,$,f),P.x=w.u,P.y=$.u,P.x==p)break;if(o.Un(m.x,P.x,p))O=L;else{if(!o.Un(l.x,P.x,p))return NaN;E=L}}return P.y},o.Gz=function(r,n,l,c,p){if(p==u.GreatElliptic)return r=[0,0],h.Nx.Jz(n,l,c,0,r),r[0];if(l.y>c.y)var f=c;else f=l,l=c;if((c=new h.Oc).L(f.y,l.y),!c.contains(0)||Math.abs(f.x-l.x)>=Math.PI)return NaN;if(f.x==l.x)return f.x;var m=new h.ha,w=new h.ha,$=new h.ha;h.kb.xd(r,n,f.x,f.y,l.x,l.y,w,m,null,p);var T=w.u,E=0,O=1,P=new h.h;for(P.N(f);T*(O-E)>1e-12*r;){var L=.5*(E+O);if(h.kb.qj(r,n,f.x,f.y,T*L,m.u,w,$,p),P.x=w.u,P.y=$.u,c.L(f.y,P.y),P.y==0)break;if(c.contains(0))O=L;else{if(c.L(l.y,P.y),!c.contains(0))return NaN;E=L}}return P.x},o.RI=function(r,n,l,c){if(!r.ef.Xc())return!1;var p=new h.ee(n.description);if(p.Gd(n,0,-1),c=h.Gx.local().W(p,r,c),p=n.I(),l.Pa(),p!=c.I())return!1;var f=new h.l;n.A(f);var m=new h.l;if(c.A(m),f=f.S(),m=m.S(),f!=0&&m!=0){if(m/=f,r=r.$f.ih().S()/r.ef.ih().S(),1e-10<Math.abs(m/r-1))return!1}else if(f!=0||m!=0)return!1;for(l.add(n,!1),n=new h.h,r=0;r<p;r++)c.D(r,n),l.Db(r,n);return!0},o.lN=function(r,n){return(r%=360*n)>=180*n&&(r-=360*n),r},o.OI=function(r,n,l,c){if(l==k.Clip){var p=n.ol();p.K()==197?(l=new h.l,p.A(l),p=h.ua.py(n,l),r=h.ti.clip(r,l,p,5e4*n.rm(),c)):h.fj.local().W(1,p,r,n,c)||(r=h.Zj.local().W(r,p,n,c))==p&&(r=h.Xk.kg(r))}else n.Xc()&&(c=new h.l,r.yc(c),n.Le().contains(c)||(o.Lt(r,n.Le(),n.Yd(0),!0),l==k.PannableFold&&(r=o.nj(r,n)),r=o.Hn(r,n,0,!0,1e5*n.rm(),null)));return r},o.SD=function(r,n,l){var c=n.Yr();if(c==null)return r;var p=(n=n.tc()).Le().S(),f=new h.l;r.yc(f);var m=new h.Oc;f.en(m),f=c.Ha(),c=null;for(var w=new h.Ed;f.ab();)for(;f.Ia();){var $=f.ia(),T=$.Vg(0,0),E=new h.Oc;for(E.L(T.pa,T.wa),T=0;E.wa>m.pa;)E.move(-p),--T;for(;E.pa<=m.wa;){if(E.isIntersecting(m)){c==null&&(c=new h.Ua);var O=h.zb.YO($.bc(),$.xc());T!=0&&(w.ig(T*p,0),O.Pc(w)),c.pc(O,!0)}E.move(p),++T}}return c!=null?(n=h.ua.bO(n,c),n=h.ua.Gr(n),h.bu.gP(r,c,n,l)):r},o.$N=function(r,n,l,c,p){return r>=l&&n<=c?0:o.oE(.5*(n+r),l,c,p)},o.oE=function(r,n,l,c){return h.mc.round((.5*(l+n)-r)/c)*c},o.QQ=function(r,n,l,c,p,f,m,w){var $=o.fv(c,p),T=$.S(),E=T/360,O=o.kE*E,P=r.vb(0),L=n.Xc(),F=L?T/n.Le().S():0;n=r.Ja();for(var z=0,R=l.ea();z<R;++z){var G=L,H=new h.Ua(l.description);H.addPath(l,z,!0);var B=l.ec(z);m!=0&&(B=o.KD(B,H,$.H-w,$.H,m))&&(G=!1);var te=-1;B=H.I();var Q=!1;G&&(te=r.Ca(z),Q=r.ec(z));var ne=H.vb(0),pe=0,he=ne.read(0),Ie=0,ge=3*c.Yd(0),He=!1,Fe=new h.h;Fe.Sc();var xe=new h.h;xe.Sc();for(var zt=!1,vi=1;vi<B;++vi){var Gt=h.h.construct(ne.gg(2*vi),ne.gg(2*vi+1)),yt=Gt.x,gt=yt+pe,it=gt-he;if(Gt.x=gt,Math.abs(it)>O){if(G){var Ht=te+vi-1,tt=te;(!Q||vi+1<B)&&(tt+=vi),Ht=P.read(2*Ht),tt=(P.read(2*tt)-Ht)*F,Math.abs(it-tt)>1*E&&(L=!1)}G||(gt=yt+(pe-=h.mc.En(T,gt-he)),++Ie,zt=pe!=0,Gt.x=gt)}else He||h.ua.vG(Fe,xe,Gt,ge)&&(He=!0);zt&&ne.write(2*vi,gt),he=gt,Fe.N(xe),xe.N(Gt)}Ie!=0&&H.Qc(1993),G=H.Oa(0),B=H.Oa(B-1),h.h.ub(G,B),H=o.rQ(H,c,isNaN(p)?0:p,f),n.add(H,!1)}return r=c.Yd(0),l=$.S()/180,o.Lt(n,$,.1*r,!1),h.ti.clip(n,$,r,l,f)},o.rQ=function(r,n,l,c){return o.Hn(r,n,l,!0,0,c)},o.JS=function(r,n,l,c){var p=r.K();if(p==1736)for(n=n!=null?n.Yd(0):0,p=0;p<c;p++)h.jd.Zd(r,l[p],n)!=1&&l[p].Sc();else{if(p!=197)throw h.i.O();for(p=0;p<c;p++)r.ZO(l[p])||l[p].Sc()}},o.bl=function(r,n,l,c){if(32>l)for(var p=new h.Ta,f=0;f<l;f++)p.Db(n[f]),r.bl(p,c).D(n[f]);else{var m=new h.ee;for(m.se(3),m.CD(n,l),p=m.vb(3),f=0;f<l;f++)p.write(f,f);for(f=r.bl(m,c),r=f.vb(0),p=f.vb(3),c=h.h.construct(NaN,NaN),m=0;m<l;m++)n[m]=c;for(l=f.I(),f=0;f<l;f++)c=p.read(f),r.uc(2*f,n[c])}},o.al=function(r,n,l,c){if(32>l)for(var p=new h.Ta,f=0;f<l;f++)p.Db(n[f]),r.al(p,c).D(n[f]);else{var m=new h.ee;for(m.se(3),m.CD(n,l),p=m.vb(3),f=0;f<l;f++)p.write(f,f);for(f=r.al(m,c),r=f.vb(0),p=f.vb(3),c=h.h.construct(NaN,NaN),m=0;m<l;m++)n[m]=c;for(l=f.I(),f=0;f<l;f++)c=p.read(f),r.uc(2*f,n[c])}},o.kE=210,o}()}(q||(q={})),function(h){var k;(k=h.PL||(h.PL={}))[k.rightSide=1]="rightSide";var v=function(){function u(o,r,n){this.Ds=new h.h,o===void 0?this.Ko=-1:(this.Ds.N(o),this.Ko=r,this.La=n,this.pw=0)}return u.prototype.RJ=function(o){this.pw=o?1|this.pw:-2&this.pw},u.prototype.B=function(){return 0>this.Ko},u.prototype.az=function(){if(this.B())throw h.i.ga("invalid call");return new h.Ta(this.Ds.x,this.Ds.y)},u.prototype.Va=function(){if(this.B())throw h.i.ga("invalid call");return this.Ko},u.prototype.cz=function(){if(this.B())throw h.i.ga("invalid call");return this.La},u.prototype.Nz=function(){return(1&this.pw)!=0},u.prototype.by=function(o,r,n,l){this.Ds.x=o,this.Ds.y=r,this.Ko=n,this.La=l},u}();h.bm=v}(q||(q={})),function(h){var k=function(){function u(){}return u.prototype.Wo=function(o,r){this.vh.resize(0),this.Ki.length=0,this.vk=-1,o.yc(this.Gk),this.Gk.X(r,r),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=h.ba.zd(o.K()))?(this.OH=o.bc(),this.NH=o.xc(),this.ra=r):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},u.prototype.Zi=function(o,r){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(o),this.Gk.X(r,r),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},u.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var o=null,r=null,n=null,l=null;this.xs&&(o=new h.h,r=new h.h,n=new h.l);for(var c=!1;!c;){for(;this.vk!=-1;){var p=this.Gb.Xy(this.Gb.hv(this.vk));if(p.isIntersecting(this.Gk)){if(!this.xs){c=!0;break}if(o.N(this.OH),r.N(this.NH),n.L(p),n.X(this.ra,this.ra),0<n.uy(o,r)){c=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){p=this.vh.Gc();var f=this.Ki[this.Ki.length-1];for(l==null&&((l=[])[0]=new h.l,l[1]=new h.l,l[2]=new h.l,l[3]=new h.l),v.zJ(f,l),this.vh.Jf(),--this.Ki.length,f=0;4>f;f++){var m=this.Gb.Np(p,f);if(m!=-1&&0<this.Gb.RR(m)&&l[f].isIntersecting(this.Gk))if(this.xs){if(o.N(this.OH),r.N(this.NH),n.L(l[f]),n.X(this.ra,this.ra),0<n.uy(o,r)){var w=new h.l;w.L(l[f]),this.vh.add(m),this.Ki.push(w)}}else(w=new h.l).L(l[f]),this.vh.add(m),this.Ki.push(w)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},u.XO=function(o,r,n){var l=new u;return l.Gb=o,l.Gk=new h.l,l.vh=new h.ja(0),l.Ki=[],l.Wo(r,n),l},u.WO=function(o,r,n){var l=new u;return l.Gb=o,l.Gk=new h.l,l.vh=new h.ja(0),l.Ki=[],l.Zi(r,n),l},u.VO=function(o){var r=new u;return r.Gb=o,r.Gk=new h.l,r.vh=new h.ja(0),r.Ki=[],r},u}();h.CY=k;var v=function(){function u(o,r){this.jf=new h.ad(11),this.ai=new h.ad(5),this.ys=[],this.iw=new h.ja(0),this.Da=new h.l,this.Pk(o,r)}return u.prototype.reset=function(o,r){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(o,r)},u.prototype.xj=function(o,r){return this.Bv(o,r,0,this.Da,this.kf,!1,-1)},u.prototype.Ez=function(o,r,n){n=n==-1?this.kf:this.RF(n);var l=this.da(n),c=this.jR(n);return this.Bv(o,r,l,c,n,!1,-1)},u.prototype.ka=function(o){return this.eR(o)},u.prototype.BF=function(o){return this.Xy(this.hv(o))},u.prototype.da=function(o){return this.lv(o)},u.prototype.jR=function(o){var r=new h.l;r.L(this.Da);var n=this.lv(o);o=this.LF(o);for(var l=0;l<2*n;l+=2){var c=h.P.truncate(3&o>>l);c==0?(r.v=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):c==1?(r.C=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):(c==2?r.C=.5*(r.v+r.C):r.v=.5*(r.v+r.C),r.H=.5*(r.G+r.H))}return r},u.prototype.RR=function(o){return this.vz(o)},u.prototype.qR=function(o,r){return k.XO(this,o,r)},u.prototype.HF=function(o,r){return k.WO(this,o,r)},u.prototype.getIterator=function(){return k.VO(this)},u.prototype.Pk=function(o,r){if(0>r||32<2*r)throw h.i.O("invalid height");this.wT=r,this.Da.L(o),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},u.prototype.Bv=function(o,r,n,l,c,p,f){if(!l.contains(r))return n==0?-1:this.Bv(o,r,0,this.Da,this.kf,p,f);if(!p)for(var m=c;m!=-1;m=this.DR(m))this.jx(m,this.vz(m)+1);(m=new h.l).L(l),l=c;var w=[];for(w[0]=new h.l,w[1]=new h.l,w[2]=new h.l,w[3]=new h.l;n<this.wT&&this.dO(l);n++){u.zJ(m,w);for(var $=!1,T=0;4>T;T++)if(w[T].contains(r)){$=!0;var E=this.Np(l,T);E==-1&&(E=this.mP(l,T)),this.jx(E,this.vz(E)+1),l=E,m.L(w[T]);break}if(!$)break}return this.nS(o,r,n,m,l,p,c,f)},u.prototype.nS=function(o,r,n,l,c,p,f,m){var w=this.IF(c);if(p){if(c==f)return m;this.NP(m),p=m}else p=this.oP(),this.IB(p,o),this.FW(this.hv(p),r);return this.hX(p,c),w!=-1?(this.hx(p,w),this.ex(w,p)):this.BJ(c,p),this.NB(c,p),this.dx(c,this.nv(c)+1),this.cO(c)&&this.HQ(n,l,c),p},u.prototype.NP=function(o){var r=this.RF(o),n=this.IF(r),l=this.JR(o),c=this.pv(o);this.Wr(r)==o?(c!=-1?this.hx(c,-1):this.NB(r,-1),this.BJ(r,c)):n==o?(this.ex(l,-1),this.NB(r,l)):(this.hx(c,l),this.ex(l,c)),this.hx(o,-1),this.ex(o,-1),this.dx(r,this.nv(r)-1)},u.zJ=function(o,r){var n=.5*(o.v+o.C),l=.5*(o.G+o.H);r[0].L(n,l,o.C,o.H),r[1].L(o.v,l,n,o.H),r[2].L(o.v,o.G,n,l),r[3].L(n,o.G,o.C,l)},u.prototype.cO=function(o){return this.nv(o)==8&&!this.bG(o)},u.prototype.HQ=function(o,r,n){var l=this.Wr(n);do{var c=this.hv(l),p=this.ai.U(l,0);c=this.Xy(c),this.Bv(p,c,o,r,n,!0,l),l=p=this.pv(l)}while(l!=-1)},u.prototype.dO=function(o){return 8<=this.nv(o)||this.bG(o)},u.prototype.bG=function(o){return this.Np(o,0)!=-1||this.Np(o,1)!=-1||this.Np(o,2)!=-1||this.Np(o,3)!=-1},u.prototype.mP=function(o,r){var n=this.jf.De();return this.JW(o,r,n),this.jx(n,0),this.dx(n,0),this.Rk(n,o),this.FJ(n,this.lv(o)+1),this.IJ(n,r<<2*this.lv(o)|this.LF(o)),n},u.prototype.oP=function(){var o=this.ai.De();if(0<this.iw.size){var r=this.iw.Gc();this.iw.Jf()}else r=this.ys.length,this.ys.push(new h.l);return this.GW(o,r),o},u.prototype.Np=function(o,r){return this.jf.U(o,r)},u.prototype.JW=function(o,r,n){this.jf.T(o,r,n)},u.prototype.Wr=function(o){return this.jf.U(o,4)},u.prototype.BJ=function(o,r){this.jf.T(o,4,r)},u.prototype.IF=function(o){return this.jf.U(o,5)},u.prototype.NB=function(o,r){this.jf.T(o,5,r)},u.prototype.LF=function(o){return this.jf.U(o,6)},u.prototype.IJ=function(o,r){this.jf.T(o,6,r)},u.prototype.nv=function(o){return this.jf.U(o,7)},u.prototype.vz=function(o){return this.jf.U(o,8)},u.prototype.dx=function(o,r){this.jf.T(o,7,r)},u.prototype.jx=function(o,r){this.jf.T(o,8,r)},u.prototype.DR=function(o){return this.jf.U(o,9)},u.prototype.Rk=function(o,r){this.jf.T(o,9,r)},u.prototype.lv=function(o){return this.jf.U(o,10)},u.prototype.FJ=function(o,r){this.jf.T(o,10,r)},u.prototype.eR=function(o){return this.ai.U(o,0)},u.prototype.IB=function(o,r){this.ai.T(o,0,r)},u.prototype.JR=function(o){return this.ai.U(o,1)},u.prototype.pv=function(o){return this.ai.U(o,2)},u.prototype.hx=function(o,r){this.ai.T(o,1,r)},u.prototype.ex=function(o,r){this.ai.T(o,2,r)},u.prototype.RF=function(o){return this.ai.U(o,3)},u.prototype.hX=function(o,r){this.ai.T(o,3,r)},u.prototype.hv=function(o){return this.ai.U(o,4)},u.prototype.GW=function(o,r){this.ai.T(o,4,r)},u.prototype.Xy=function(o){return this.ys[o]},u.prototype.FW=function(o,r){this.ys[o].L(r)},u}();h.fu=v}(q||(q={})),function(h){var k;(k=h.WK||(h.WK={}))[k.Outside=0]="Outside",k[k.Inside=1]="Inside",k[k.Border=2]="Border";var v=function(){function o(r,n){this.KT=n,this.Xh=r}return o.prototype.ax=function(r,n){this.dH!=n&&r.flush(),this.dH=n},o.prototype.bF=function(r,n){for(var l=0;l<n;)for(var c=r[l++],p=r[l++],f=r[l++]*this.KT;c<p;c++)this.Xh[f+(c>>4)]|=this.dH<<2*(15&c)},o}();h.DY=v;var u=function(){function o(r,n,l){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(r,n,l)}return o.create=function(r,n,l){if(!o.uE(r))throw h.i.O();return o.rP(r,n,l)},o.kW=function(r){switch(r){case 0:r=1024;break;case 1:r=16384;break;case 2:r=262144;break;default:throw h.i.ga("Internal Error")}return r},o.uE=function(r){return!(r.B()||r.K()!=1607&&r.K()!=1736)},o.prototype.mQ=function(r,n){n=n.Ha();for(var l=new h.h,c=new h.h;n.ab();)for(;n.Ia();){var p=n.ia();if(p.K()!=322)throw h.i.ga("Internal Error");r.Gh(p.bc(),l),r.Gh(p.xc(),c),this.Ti.fy(l.x,l.y,c.x,c.y)}this.Ti.dJ(h.Ox.Bx)},o.prototype.nQ=function(){throw h.i.ga("Internal Error")},o.prototype.My=function(r,n){for(var l=1;4>l;l++)r.fy(n[l-1].x,n[l-1].y,n[l].x,n[l].y);r.fy(n[3].x,n[3].y,n[0].x,n[0].y),this.Ti.dJ(h.Ox.Bx)},o.prototype.mK=function(r,n,l){for(var c=[null,null,null,null],p=0;p<c.length;p++)c[p]=new h.h;n=n.Ha(),l=this.Lk.$X(l)+1.5,p=new h.h;for(var f=new h.h,m=new h.h,w=new h.h,$=new h.h,T=new h.l,E=new h.h;n.ab();){var O=!1,P=!0;for(E.na(0,0);n.Ia();){var L=n.ia();if(w.x=L.ta,w.y=L.oa,$.x=L.qa,$.y=L.ma,T.Pa(),T.$b(w.x,w.y),T.Nk($.x,$.y),this.xl.CG(T)){this.Lk.Gh($,$),P?(this.Lk.Gh(w,w),E.N(w),P=!1):w.N(E),p.vc($,w);var F=.5>(L=p.length());L==0?p.na(1,0):(F||E.N($),p.scale(l/L),f.na(-p.y,p.x),m.na(p.y,-p.x),w.sub(p),$.add(p),c[0].add(w,f),c[1].add(w,m),c[2].add($,m),c[3].add($,f),F?O=!0:this.My(r,c))}else O&&(this.My(r,c),O=!1),P=!0}O&&this.My(r,c)}},o.prototype.nC=function(r){return h.P.truncate(r*this.lH+this.WH)},o.prototype.oC=function(r){return h.P.truncate(r*this.Gs+this.YH)},o.rP=function(r,n,l){return new o(r,n,l)},o.prototype.Az=function(r,n,l){this.Hf=Math.max(h.P.truncate(2*Math.sqrt(l)+.5),64),this.Wm=h.P.truncate((2*this.Hf+31)/32),this.xl=new h.l,this.Kk=n,l=0;for(var c=this.Hf,p=this.Wm;8<=c;)l+=c*p,c=h.P.truncate(c/2),p=h.P.truncate((2*c+31)/32);this.Xh=h.P.mg(l,0),this.Ti=new h.Ox,l=new v(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,l),r.A(this.xl),this.xl.X(n,n),c=new h.l;var f=n*(p=h.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(n*=p.da(),c.L(this.xl.tf(),Math.max(f,this.xl.S()),Math.max(n,this.xl.da())),this.NA=this.Kk,this.Lk=new h.Ed,this.Lk.kS(c,p),new h.Ed,r.K()){case 550:l.ax(this.Ti,2),this.nQ();break;case 1607:l.ax(this.Ti,2),this.mK(this.Ti,r,this.NA);break;case 1736:l.ax(this.Ti,1),this.mQ(this.Lk,r),l.ax(this.Ti,2),this.mK(this.Ti,r,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},o.prototype.SN=function(){this.Ti.flush();for(var r=0,n=this.Hf*this.Wm,l=this.Hf,c=h.P.truncate(this.Hf/2),p=this.Wm,f=h.P.truncate((2*c+31)/32);8<l;){for(l=0;l<c;l++)for(var m=2*l,w=2*l+1,$=0;$<c;$++){var T=2*$,E=2*$+1,O=T>>4;T=2*(15&T);var P=E>>4;E=2*(15&E);var L=this.Xh[r+p*m+O]>>T&3;L|=this.Xh[r+p*m+P]>>E&3,L|=this.Xh[r+p*w+O]>>T&3,L|=this.Xh[r+p*w+P]>>E&3,this.Xh[n+f*l+($>>4)]|=L<<2*(15&$)}l=c,p=f,r=n,c=h.P.truncate(l/2),f=h.P.truncate((2*c+31)/32),n=r+p*l}},o.prototype.Uo=function(r,n){return this.xl.contains(r,n)?(r=this.nC(r),n=this.oC(n),0>r||r>=this.Hf||0>n||n>=this.Hf||(n=this.Xh[this.Wm*n+(r>>4)]>>2*(15&r)&3)==0?0:n==1?1:2):0},o.prototype.To=function(r){if(!r.Fa(this.xl))return 0;var n=this.nC(r.v),l=this.nC(r.C),c=this.oC(r.G);if(r=this.oC(r.H),0>n&&(n=0),0>c&&(c=0),l>=this.Hf&&(l=this.Hf-1),r>=this.Hf&&(r=this.Hf-1),n>l||c>r)return 0;for(var p=Math.max(l-n,1)*Math.max(r-c,1),f=0,m=this.Wm,w=this.Hf,$=0;;){if(32>p||16>w){for(p=c;p<=r;p++)for(var T=n;T<=l;T++)if(1<($=this.Xh[f+m*p+(T>>4)]>>2*(15&T)&3))return 2;if($==0)return 0;if($==1)return 1}f+=m*w,w=h.P.truncate(w/2),m=h.P.truncate((2*w+31)/32),n=h.P.truncate(n/2),c=h.P.truncate(c/2),l=h.P.truncate(l/2),r=h.P.truncate(r/2),p=Math.max(l-n,1)*Math.max(r-c,1)}},o.prototype.MR=function(){return this.Hf*this.Wm},o}();h.Mx=u}(q||(q={})),function(h){var k;(k=h.QL||(h.QL={}))[k.contains=1]="contains",k[k.within=2]="within",k[k.equals=3]="equals",k[k.disjoint=4]="disjoint",k[k.touches=8]="touches",k[k.crosses=16]="crosses",k[k.overlaps=32]="overlaps",k[k.unknown=0]="unknown",k[k.intersects=1073741824]="intersects";var v=function(){function o(){}return o.construct=function(r,n,l,c,p,f,m,w){var $=new o;return $.rw=r,$.Om=n,$.Mj=l,$.Ui=c,$.wH=p,$.OY=f,$.PY=m,$.QY=w,$},o}();h.Xt=function(){function o(){}return o.xD=function(r,n,l){if(o.ry(r)){var c=h.ua.mj(n,r,!1);n=!1,h.Wk.xE(r)&&(n=n||r.nu(c,l)),(c=r.K())!=1736&&c!=1607||!h.Wk.vE(r)||l==0||(n=n||r.hj(l)),c!=1736&&c!=1607||!h.Wk.wE(r)||l==0||n||r.cM()}},o.ry=function(r){return h.Wk.xE(r)||h.Wk.vE(r)||h.Wk.wE(r)},o}();var u=function(){function o(){this.th=[]}return o.uB=function(r,n,l,c,p){var f=r.K(),m=n.K();if(f==197){if(m==197)return o.oW(r,n,l,c);if(m==33)return c==2?c=1:c==1&&(c=2),o.cJ(n,r,l,c)}else if(f==33){if(m==197)return o.cJ(r,n,l,c);if(m==33)return o.qW(r,n,l,c)}if(r.B()||n.B())return c==4;var w=new h.l;r.A(w);var $=new h.l;n.A($);var T=new h.l;if(T.L(w),T.$b($),l=h.ua.Xd(l,T,!1),o.fk(w,$,l))return c==4;switch(w=!1,h.Xk.zd(f)&&((f=new h.Ua(r.description)).pc(r,!0),r=f,f=1607),h.Xk.zd(m)&&((m=new h.Ua(n.description)).pc(n,!0),n=m,m=1607),f!=197&&m!=197?(r.Eb()<n.Eb()||f==33&&m==550)&&(c==2?c=1:c==1&&(c=2)):f!=1736&&m!=197&&(c==2?c=1:c==1&&(c=2)),f){case 1736:switch(m){case 1736:w=o.st(r,n,l,c,p);break;case 1607:w=o.bn(r,n,l,c,p);break;case 33:w=o.rt(r,n,l,c);break;case 550:w=o.qt(r,n,l,c,p);break;case 197:w=o.BI(r,n,l,c,p)}break;case 1607:switch(m){case 1736:w=o.bn(n,r,l,c,p);break;case 1607:w=o.bB(r,n,l,c,p);break;case 33:w=o.ut(r,n,l,c,p);break;case 550:w=o.tt(r,n,l,c,p);break;case 197:w=o.HI(r,n,l,c)}break;case 33:switch(m){case 1736:w=o.rt(n,r,l,c);break;case 1607:w=o.ut(n,r,l,c,p);break;case 550:w=o.mt(n,r,l,c)}break;case 550:switch(m){case 1736:w=o.qt(n,r,l,c,p);break;case 1607:w=o.tt(n,r,l,c,p);break;case 550:w=o.UA(r,n,l,c,p);break;case 33:w=o.mt(r,n,l,c);break;case 197:w=o.cI(r,n,l,c)}break;case 197:switch(m){case 1736:w=o.BI(n,r,l,c,p);break;case 1607:w=o.HI(n,r,l,c);break;case 550:w=o.cI(n,r,l,c)}}return w},o.oW=function(r,n,l,c){if(r.B()||n.B())return c==4;var p=new h.l,f=new h.l,m=new h.l;switch(r.A(p),n.A(f),m.L(p),m.$b(f),r=h.ua.Xd(l,m,!1),c){case 4:return o.fk(p,f,r);case 2:return o.eF(f,p,r);case 1:return o.eF(p,f,r);case 3:return o.gk(p,f,r);case 8:return o.YP(p,f,r);case 32:return o.XP(p,f,r);case 16:return o.WP(p,f,r)}return!1},o.cJ=function(r,n,l,c){if(r.B()||n.B())return c==4;r=r.D();var p=new h.l,f=new h.l;switch(n.A(p),f.L(r),f.$b(p),n=h.ua.Xd(l,f,!1),c){case 4:return o.Tw(r,p,n);case 2:return o.$A(r,p,n);case 1:return o.MU(r,p,n);case 3:return o.qI(r,p,n);case 8:return o.ZA(r,p,n)}return!1},o.qW=function(r,n,l,c){if(r.B()||n.B())return c==4;r=r.D(),n=n.D();var p=new h.l;switch(p.L(r),p.$b(n),l=h.ua.Xd(l,p,!1),c){case 4:return o.NU(r,n,l);case 2:return o.pI(n,r,l);case 1:return o.pI(r,n,l);case 3:return o.rI(r,n,l)}return!1},o.st=function(r,n,l,c,p){switch(c){case 4:return o.fV(r,n,l);case 2:return o.Uw(n,r,l,p);case 1:return o.Uw(r,n,l,p);case 3:return o.iV(r,n,l);case 8:return o.qV(r,n,l);case 32:return o.lV(r,n,l,p)}return!1},o.bn=function(r,n,l,c,p){switch(c){case 4:return o.gV(r,n,l);case 1:return o.aB(r,n,l,p);case 8:return o.rV(r,n,l,p);case 16:return o.bV(r,n,l)}return!1},o.rt=function(r,n,l,c){switch(c){case 4:return o.eV(r,n,l);case 1:return o.ZU(r,n,l);case 8:return o.pV(r,n,l)}return!1},o.qt=function(r,n,l,c){switch(c){case 4:return o.dV(r,n,l);case 1:return o.YU(r,n,l);case 8:return o.oV(r,n,l);case 16:return o.aV(r,n,l)}return!1},o.BI=function(r,n,l,c,p){if(o.cV(r,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.sV(r,n,l);case 1:return o.XU(r,n,l);case 3:return o.hV(r,n,l);case 8:return o.nV(r,n,l,p);case 32:return o.kV(r,n,l,p);case 16:return o.$U(r,n,l,p)}return!1},o.bB=function(r,n,l,c){switch(c){case 4:return o.BV(r,n,l);case 2:return o.FI(n,r,l);case 1:return o.FI(r,n,l);case 3:return o.DV(r,n,l);case 8:return o.II(r,n,l);case 32:return o.HV(r,n,l);case 16:return o.GI(r,n,l)}return!1},o.ut=function(r,n,l,c){switch(c){case 4:return o.AV(r,n,l);case 1:return o.vV(r,n,l);case 8:return o.LV(r,n,l)}return!1},o.tt=function(r,n,l,c){switch(c){case 4:return o.zV(r,n,l);case 1:return o.uV(r,n,l);case 8:return o.KV(r,n,l);case 16:return o.xV(r,n,l)}return!1},o.HI=function(r,n,l,c){if(o.yV(r,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.MV(r,n,l);case 1:return o.tV(r,n,l);case 3:return o.CV(r,n,l);case 8:return o.JV(r,n,l);case 32:return o.GV(r,n,l);case 16:return o.wV(r,n,l)}return!1},o.UA=function(r,n,l,c){switch(c){case 4:return o.bU(r,n,l);case 2:return o.$H(n,r,l);case 1:return o.$H(r,n,l);case 3:return o.dU(r,n,l);case 32:return o.jU(r,n,l)}return!1},o.mt=function(r,n,l,c){switch(c){case 4:return o.aI(r,n,l);case 2:return o.nU(r,n,l);case 1:return o.ZT(r,n,l);case 3:return o.Pw(r,n,l)}return!1},o.cI=function(r,n,l,c){switch(c){case 4:return o.aU(r,n,l);case 2:return o.mU(r,n,l);case 1:return o.YT(r,n,l);case 3:return o.cU(r,n,l);case 8:return o.lU(r,n,l);case 16:return o.$T(r,n,l)}return!1},o.iV=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.gk(c,p,l)&&(c=o.rc(r,n,!1))!=4&&c!=1&&c!=2&&(!!o.ZH(r,n,l)||(c=r.Rb(),p=n.Rb(),!(Math.abs(c-p)>4*Math.max(r.I(),n.I())*l)&&o.Rz(r,n,l,!0)))},o.fV=function(r,n,l){var c=o.rc(r,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.zI(r,n,l)},o.qV=function(r,n,l){var c=o.rc(r,n,!1);return c!=4&&c!=1&&c!=2&&o.DI(r,n,l,null)},o.lV=function(r,n,l,c){var p=o.rc(r,n,!1);return p!=4&&p!=1&&p!=2&&o.AI(r,n,l,c)},o.Uw=function(r,n,l,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!!o.Ac(p,f,l)&&(p=o.rc(r,n,!1))!=4&&p!=2&&(p==1||o.wI(r,n,l,c))},o.gV=function(r,n,l){var c=o.rc(r,n,!0);return c==4||c!=1&&c!=1073741824&&o.zI(r,n,l)},o.rV=function(r,n,l,c){var p=o.rc(r,n,!1);return p!=4&&p!=1&&o.EI(r,n,l,c)},o.bV=function(r,n,l){var c=o.rc(r,n,!1);return c!=4&&c!=1&&o.yI(r,n,l,null)},o.aB=function(r,n,l,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!!o.Ac(p,f,l)&&(p=o.rc(r,n,!1))!=4&&(p==1||o.xI(r,n,l,c))},o.eV=function(r,n,l){return h.jd.FG(r,n,l)==0},o.pV=function(r,n,l){return n=n.D(),o.CI(r,n,l)},o.ZU=function(r,n,l){return n=n.D(),o.vI(r,n,l)},o.dV=function(r,n,l){var c=o.rc(r,n,!1);if(c==4)return!0;if(c==1)return!1;c=new h.l,r.A(c),c.X(l,l);for(var p=new h.h,f=0;f<n.I();f++)if(n.D(f,p),c.contains(p)){var m=h.jd.Zd(r,p,l);if(m==1||m==2)return!1}return!0},o.oV=function(r,n,l){var c=this.rc(r,n,!1);if(c==4||c==1)return!1;c=new h.l,r.A(c),c.X(l,l);for(var p=!1,f=r,m=!1,w=0;w<n.I();w++){var $=n.Oa(w);if(c.contains($)){if(($=h.jd.Zd(f,$,l))==2)p=!0;else if($==1)return!1}m||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?f=r:(f=new h.Ea,r.copyTo(f),f.hj(1)),m=!0)}return!!p},o.aV=function(r,n,l){var c=this.rc(r,n,!1);if(c==4||c==1)return!1;var p=new h.l;c=new h.l;var f=new h.l;r.A(p),n.A(f),c.L(p),c.X(l,l),f=p=!1;for(var m=r,w=!1,$=0;$<n.I();$++){var T=n.Oa($);if(c.contains(T)?(T=h.jd.Zd(m,T,l))==0?f=!0:T==1&&(p=!0):f=!0,p&&f)return!0;w||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?m=r:(m=new h.Ea,r.copyTo(m),m.hj(1)),w=!0)}return!1},o.YU=function(r,n,l){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!this.Ac(c,p,l)||(p=this.rc(r,n,!1))==4)return!1;if(p==1)return!0;p=!1;for(var f=r,m=!1,w=0;w<n.I();w++){var $=n.Oa(w);if(!c.contains($))return!1;if(($=h.jd.Zd(f,$,l))==1)p=!0;else if($==0)return!1;m||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?f=r:(f=new h.Ea,r.copyTo(f),f.hj(1)),m=!0)}return p},o.hV=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.gk(c,p,l)&&((c=new h.Ea).bd(n,!1),o.Rz(r,c,l,!0))},o.cV=function(r,n,l){var c=o.rc(r,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var p=new h.l;if(c=new h.l,r.A(p),n.A(c),o.Ac(c,p,l)||(p=new h.h,c.fn(p),(n=h.jd.Zd(r,p,l))!=0)||(c.VI(p),(n=h.jd.Zd(r,p,l))!=0)||(c.gn(p),(n=h.jd.Zd(r,p,l))!=0)||(c.YI(p),(n=h.jd.Zd(r,p,l))!=0))return!1;n=r.vb(0),(p=new h.l).L(c),p.X(l,l);for(var f=0,m=r.I();f<m;f++){var w=n.read(2*f),$=n.read(2*f+1);if(p.contains(w,$))return!1}return!o.NG(r,c,l)},o.nV=function(r,n,l,c){var p=o.rc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return r.A(p),n.A(f),!o.Ac(f,p,l)&&(f.S()<=l&&f.da()<=l?(n=n.Kp(),o.CI(r,n,l)):f.S()<=l||f.da()<=l?(p=new h.Ua,f=new h.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.EI(r,p,l,c)):((p=new h.Ea).bd(n,!1),o.DI(r,p,l,c)))},o.kV=function(r,n,l,c){var p=o.rc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return r.A(p),n.A(f),!(o.Ac(f,p,l)||f.S()<=l||f.da()<=l)&&((p=new h.Ea).bd(n,!1),o.AI(r,p,l,c))},o.sV=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.Ac(p,c,l)},o.XU=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.Ac(c,p,l)&&(c=o.rc(r,n,!1))!=4&&c!=2&&(c==1||(p.S()<=l&&p.da()<=l?(n=n.Kp(),o.vI(r,n,l)):p.S()<=l||p.da()<=l?(p=new h.Ua,c=new h.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.xI(r,p,l,null)):((p=new h.Ea).bd(n,!1),o.wI(r,p,l,null))))},o.$U=function(r,n,l,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!(o.Ac(f,p,l)||f.da()>l&&f.S()>l||f.da()<=l&&f.S()<=l)&&(p=new h.Ua,f=new h.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.yI(r,p,l,c))},o.DV=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.gk(c,p,l)||o.rc(r,n,!1)==4)&&(!!o.ZH(r,n,l)||o.Rz(r,n,l,!1))},o.BV=function(r,n,l){return this.rc(r,n,!1)==4||!!new h.am(r,n,l,!0).next()&&!this.OG(r,n,l)},o.II=function(r,n,l){if(o.rc(r,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(r,n,l,c)!=0)return!1;for(var p=new h.ee,f=0;f<c.size;f+=2){var m=c.read(f),w=c.read(f+1);p.Du(m,w)}return r=r.ng(),n=n.ng(),r.Gd(n,0,n.I()),o.Ow(r,p,l)},o.GI=function(r,n,l){if(o.rc(r,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(r,n,l,c)!=0)return!1;for(var p=new h.ee,f=0;f<c.size;f+=2){var m=c.read(f),w=c.read(f+1);p.Du(m,w)}return r=r.ng(),n=n.ng(),r.Gd(n,0,n.I()),!o.Ow(r,p,l)},o.HV=function(r,n,l){return o.rc(r,n,!1)!=4&&o.QG(r,n,l)},o.FI=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,l)||o.rc(r,n,!1)==4)&&o.Am(n,r,l,!1)},o.AV=function(r,n,l){return o.rc(r,n,!1)==4||(n=n.D(),!o.Tz(r,n,l))},o.LV=function(r,n,l){return o.rc(r,n,!1)!=4&&(n=n.D(),o.Uz(r,n,l))},o.vV=function(r,n,l){return o.rc(r,n,!1)!=4&&(n=n.D(),o.MG(r,n,l))},o.zV=function(r,n,l){return o.rc(r,n,!1)==4||!o.PG(r,n,l,!1)},o.KV=function(r,n,l){if(this.rc(r,n,!1)==4)return!1;var c=r.Ha(),p=new h.l,f=new h.l,m=new h.l;r.A(p),n.A(f),p.X(l,l),f.X(l,l),m.L(p),m.Fa(f),p=null;var w=r.Cb;if(w!=null){var $=w.Gb;p=w.Bo,$==null&&($=w=h.ua.lj(r,m))}else $=w=h.ua.lj(r,m);var T=$.getIterator(),E=null;p!=null&&(E=p.getIterator());var O=new h.h,P=new h.h,L=!1,F=l*l;for(p=new h.rn(n.I()),w=0;w<n.I();w++)p.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,O),m.contains(O)){if(f.L(O.x,O.y,O.x,O.y),E!=null&&(E.Zi(f,l),E.next()==-1))continue;T.Zi(f,l);for(var z=T.next();z!=-1;z=T.next())if(c.Wb($.ka(z)),(z=c.ia()).ic(z.ge(O,!1),P),h.h.zc(O,P)<=F){p.write(w,1),L=!0;break}}if(!L)return!1;for(r=r.ng(),c=new h.ee,f=new h.h,w=0;w<n.I();w++)p.read(w)!=0&&(n.D(w,f),c.Du(f.x,f.y));return this.Ow(r,c,l)},o.xV=function(r,n,l){if(this.rc(r,n,!1)==4)return!1;var c=r.Ha(),p=new h.l,f=new h.l,m=new h.l;r.A(p),n.A(f),p.X(l,l),f.X(l,l),m.L(p),m.Fa(f),p=null;var w=r.Cb;if(w!=null){var $=w.Gb;p=w.Bo,$==null&&($=w=h.ua.lj(r,m))}else $=w=h.ua.lj(r,m);var T=$.getIterator(),E=null;p!=null&&(E=p.getIterator());var O=new h.h,P=new h.h,L=!1,F=!1,z=l*l;for(p=new h.rn(n.I()),w=0;w<n.I();w++)p.write(w,0);for(w=0;w<n.I();w++)if(n.D(w,O),m.contains(O)){if(f.L(O.x,O.y,O.x,O.y),E!=null&&(E.Zi(f,l),E.next()==-1)){F=!0;continue}T.Zi(f,l);for(var R=!1,G=T.next();G!=-1;G=T.next())if(c.Wb($.ka(G)),(G=c.ia()).ic(G.ge(O,!1),P),h.h.zc(O,P)<=z){p.write(w,1),R=L=!0;break}R||(F=!0)}else F=!0;if(!L||!F)return!1;for(r=r.ng(),c=new h.ee,f=new h.h,w=0;w<n.I();w++)p.read(w)!=0&&(n.D(w,f),c.Du(f.x,f.y));return!this.Ow(r,c,l)},o.uV=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,l)||o.rc(r,n,!1)==4||!o.PG(r,n,l,!0))&&(r=r.ng(),!o.bI(r,n,l))},o.CV=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.da()>l&&p.S()>l)&&o.gk(c,p,l)},o.yV=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!o.Ac(p,c,l)&&!o.NG(r,p,l)},o.JV=function(r,n,l){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),p.da()<=l&&p.S()<=l)return p=n.Kp(),o.Uz(r,p,l);if(p.da()<=l||p.S()<=l)return p=new h.Ua,c=new h.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.II(r,p,l);r=r.Ha(),n=new h.l,c=new h.l,n.L(p),c.L(p),n.X(-l,-l),c.X(l,l),p=!1;for(var f=new h.l,m=new h.l;r.ab();)for(;r.Ia();){if(r.ia().A(f),m.L(n),m.Fa(f),!m.B()&&(m.da()>l||m.S()>l))return!1;m.L(c),m.Fa(f),m.B()||(p=!0)}return p},o.GV=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(o.Ac(c,p,l)||o.Ac(p,c,l)||o.Ac(p,c,l)||p.da()>l&&p.S()>l||p.da()<=l&&p.S()<=l)&&(c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.QG(r,c,l))},o.MV=function(r,n,l){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l)return o.Ac(p,c,l);r=r.Ha(),(n=new h.l).L(p),n.X(-l,-l),p=!1,c=new h.l;for(var f=new h.l;r.ab();)for(;r.Ia();)r.ia().A(c),n.jm(c)?p=!0:(f.L(n),f.Fa(c),!f.B()&&(f.da()>l||f.S()>l)&&(p=!0));return p},o.tV=function(r,n,l){var c=new h.l,p=new h.l;return n.A(p),r.A(c),!(!o.Ac(c,p,l)||p.da()>l&&p.S()>l)&&(p.da()<=l&&p.S()<=l?(n=n.Kp(),o.MG(r,n,l)):(c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.Am(c,r,l,!1)))},o.wV=function(r,n,l){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l)return c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.GI(r,c,l);r=r.Ha(),n=new h.l,(c=new h.l).L(p),n.L(p),c.X(-l,-l),n.X(l,l);for(var f=p=!1,m=new h.l,w=new h.l;r.ab();)for(;r.Ia();)if(r.ia().A(m),f||n.contains(m)||(f=!0),p||(w.L(c),w.Fa(m),!w.B()&&(w.da()>l||w.S()>l)&&(p=!0)),p&&f)return!0;return!1},o.dU=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.gk(c,p,l)&&(!!o.eU(r,n,l)||o.TA(r,n,l,!1,!0,!1))},o.bU=function(r,n,l){return!o.bI(r,n,l)},o.jU=function(r,n,l){return o.TA(r,n,l,!1,!1,!0)},o.$H=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.Ac(c,p,l)&&o.TA(n,r,l,!0,!1,!1)},o.Ow=function(r,n,l){l*=l;for(var c=new h.h,p=new h.h,f=0;f<n.I();f++){n.D(f,p);for(var m=!1,w=0;w<r.I();w++)if(r.D(w,c),h.h.zc(c,p)<=l){m=!0;break}if(!m)return!1}return!0},o.Pw=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.gk(c,p,l)},o.aI=function(r,n,l){return n=n.D(),o.lt(r,n,l)},o.nU=function(r,n,l){return o.Pw(r,n,l)},o.ZT=function(r,n,l){return!o.aI(r,n,l)},o.cU=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.da()>l||p.S()>l)&&o.gk(c,p,l)},o.aU=function(r,n,l){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,l))return!1;for((n=new h.l).L(p),n.X(l,l),l=new h.h,p=0;p<r.I();p++)if(r.D(p,l),n.contains(l))return!1;return!0},o.lU=function(r,n,l){var c=new h.l,p=new h.l,f=new h.l;if(n.A(c),c.da()<=l&&c.S()<=l)return!1;if(c.da()<=l||c.S()<=l){n=new h.h;var m=!1;p.L(c),f.L(c),p.X(l,l),c.da()>l?f.X(0,-l):f.X(-l,0);for(var w=0;w<r.I();w++)if(r.D(w,n),p.contains(n)){if(c.da()>l){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;m=!0}return m}for(p.L(c),f.L(c),p.X(l,l),f.X(-l,-l),n=new h.h,m=!1,w=0;w<r.I();w++)if(r.D(w,n),p.contains(n)){if(f.jm(n))return!1;m=!0}return m},o.mU=function(r,n,l){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.Ac(p,c,l))return!1;if(p.da()<=l&&p.S()<=l)return o.gk(c,p,l);if(p.da()<=l||p.S()<=l){n=!1,c=new h.l;var f=new h.l;c.L(p),f.L(p),p.da()>l?c.X(0,-l):c.X(-l,0),f.X(l,l);for(var m=new h.h,w=0;w<r.I();w++){if(r.D(w,m),!f.contains(m))return!1;p.da()>l?m.y>c.G&&m.y<c.H&&(n=!0):m.x>c.v&&m.x<c.C&&(n=!0)}return n}for(n=!1,c=new h.l,f=new h.l,c.L(p),f.L(p),c.X(-l,-l),f.X(l,l),m=new h.h,w=0;w<r.I();w++){if(r.D(w,m),!f.contains(m))return!1;c.jm(m)&&(n=!0)}return n},o.YT=function(r,n,l){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,l)||p.da()>l||p.S()>l)&&(n=n.Kp(),!o.lt(r,n,l))},o.$T=function(r,n,l){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,l)||p.da()<=l&&p.S()<=l)return!1;if(p.da()<=l||p.S()<=l){n=new h.l,c=new h.l,n.L(p),p.da()>l?n.X(0,-l):n.X(-l,0),c.L(p),c.X(l,l);for(var f=new h.h,m=!1,w=!1,$=0;$<r.I();$++)if(r.D($,f),m||(p.da()>l?f.y>n.G&&f.y<n.H&&(m=!0):f.x>n.v&&f.x<n.C&&(m=!0)),w||c.contains(f)||(w=!0),m&&w)return!0;return!1}for(n=new h.l,c=new h.l,n.L(p),n.X(-l,-l),c.L(p),c.X(l,l),f=new h.h,w=m=!1,$=0;$<r.I();$++)if(r.D($,f),!m&&n.jm(f)&&(m=!0),w||c.contains(f)||(w=!0),m&&w)return!0;return!1},o.rI=function(r,n,l){return h.h.zc(r,n)<=l*l},o.NU=function(r,n,l){return h.h.zc(r,n)>l*l},o.pI=function(r,n,l){return o.rI(r,n,l)},o.qI=function(r,n,l){var c=new h.l;return c.L(r),o.gk(c,n,l)},o.Tw=function(r,n,l){var c=new h.l;return c.L(n),c.X(l,l),!c.contains(r)},o.ZA=function(r,n,l){if(n.da()<=l&&n.S()<=l)return!1;var c=new h.l,p=new h.l;if(c.L(n),c.X(l,l),!c.contains(r))return!1;if(n.da()<=l||n.S()<=l){if(p.L(n),n.da()>l?p.X(0,-l):p.X(-l,0),n.da()>l){if(r.y>p.G&&r.y<p.H)return!1}else if(r.x>p.v&&r.x<p.C)return!1;return!0}return p.L(n),p.X(-l,-l),!p.jm(r)},o.$A=function(r,n,l){if(n.da()<=l&&n.S()<=l)return!0;if(n.da()<=l||n.S()<=l){var c=new h.l;c.L(n),n.da()>l?c.X(0,-l):c.X(-l,0);var p=!1;return n.da()>l?r.y>c.G&&r.y<c.H&&(p=!0):r.x>c.v&&r.x<c.C&&(p=!0),p}return(c=new h.l).L(n),c.X(-l,-l),c.jm(r)},o.MU=function(r,n,l){return o.qI(r,n,l)},o.gk=function(r,n,l){return o.Ac(r,n,l)&&o.Ac(n,r,l)},o.fk=function(r,n,l){var c=new h.l;return c.L(n),c.X(l,l),!r.isIntersecting(c)},o.YP=function(r,n,l){if(r.da()<=l&&r.S()<=l){var c=r.tf();return o.ZA(c,n,l)}if(n.da()<=l&&n.S()<=l)return c=n.tf(),o.ZA(c,r,l);if(r.da()>l&&r.S()>l&&(n.da()<=l||n.S()<=l)?c=n:(c=r,r=n),c.da()<=l||c.S()<=l){if(r.da()<=l||r.S()<=l){n=new h.zb;var p=new h.zb,f=[0,0],m=[0,0],w=new h.h;return c.fn(w),n.Ec(w),c.gn(w),n.Rc(w),r.fn(w),p.Ec(w),r.gn(w),p.Rc(w),n.Fa(p,null,f,m,l),n.Fa(p,null,null,null,l)==1&&(f[0]==0||f[1]==1||m[0]==0||m[1]==1)}return n=new h.l,p=new h.l,n.L(r),n.X(-l,-l),p.L(n),p.Fa(c),!(!p.B()&&(p.da()>l||p.S()>l))}return r.X(l,l),(p=new h.l).L(c),p.Fa(r),!(p.B()||!p.B()&&p.da()>l&&p.S()>l)},o.XP=function(r,n,l){if(o.Ac(r,n,l)||o.Ac(n,r,l)||r.da()<=l&&r.S()<=l||n.da()<=l&&n.S()<=l)return!1;if(r.da()<=l||r.S()<=l){if(n.da()>l&&n.S()>l)return!1;var c=new h.zb,p=new h.zb,f=[0,0],m=[0,0],w=new h.h;return r.fn(w),c.Ec(w),r.gn(w),c.Rc(w),n.fn(w),p.Ec(w),n.gn(w),p.Rc(w),c.Fa(p,null,f,m,l),c.Fa(p,null,null,null,l)==2&&(0<f[0]||1>f[1])&&(0<m[0]||1>m[1])}return!(n.da()<=l||n.S()<=l)&&((c=new h.l).L(r),c.Fa(n),!(c.B()||c.da()<=l||c.S()<=l))},o.eF=function(r,n,l){if(!o.Ac(r,n,l))return!1;if(r.da()<=l&&r.S()<=l)return r=r.tf(),o.$A(r,n,l);if(n.da()<=l&&n.S()<=l)return n=n.tf(),o.$A(n,r,l);if(r.da()<=l||r.S()<=l)return o.Ac(r,n,l);if(n.da()<=l||n.S()<=l){var c=new h.l;return c.L(r),c.X(-l,-l),c.jm(n)?!0:((r=new h.l).L(c),r.Fa(n),!(r.B()||r.da()<=l&&r.S()<=l))}return o.Ac(r,n,l)},o.WP=function(r,n,l){if(o.Ac(r,n,l)||o.Ac(n,r,l)||r.da()<=l&&r.S()<=l||n.da()<=l&&n.S()<=l||n.da()>l&&n.S()>l&&r.da()>l&&r.S()>l)return!1;if(r.da()>l&&r.S()>l)var c=n;else c=r,r=n;if(r.da()>l&&r.S()>l){n=new h.l;var p=new h.l;return p.L(r),p.X(-l,-l),n.L(p),n.Fa(c),!(n.B()||n.da()<=l&&n.S()<=l)}n=new h.zb,p=new h.zb;var f=[0,0],m=[0,0],w=new h.h;return c.fn(w),n.Ec(w),c.gn(w),n.Rc(w),r.fn(w),p.Ec(w),r.gn(w),p.Rc(w),n.Fa(p,null,f,m,l),n.Fa(p,null,null,null,l)==1&&0<f[0]&&1>f[1]&&0<m[0]&&1>m[1]},o.zI=function(r,n,l){var c=new h.l,p=new h.l,f=new h.am(r,n,l,!0);if(!f.next())return!0;if(this.OG(r,n,l))return!1;var m=r,w=null;n.K()==1736&&(w=n);var $=!1,T=!1;do{var E=f.pl(),O=f.jl();if(O=n.Oa(n.Ca(O)),c.L(f.oz()),c.X(l,l),c.contains(O)&&(O=h.jd.Zd(m,O,0))!=0||n.K()==1736&&(E=r.Oa(r.Ca(E)),p.L(f.Wy()),p.X(l,l),p.contains(E)&&(O=h.jd.Zd(w,E,0))!=0))return!1;$||(!h.Fg.Ol(r,n.ea()-1)||r.Cb!=null&&r.Cb.Gb!=null?m=r:(m=new h.Ea,r.copyTo(m),m.hj(1)),$=!0),n.K()!=1736||T||(T=n,!h.Fg.Ol(T,r.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(w=new h.Ea,T.copyTo(w),w.hj(1)),T=!0)}while(f.next());return!0},o.Ac=function(r,n,l){var c=new h.l;return c.L(r),c.X(l,l),c.contains(n)},o.ns=function(r,n,l){var c=new h.l;return c.L(n),c.X(l,l),n=new h.h,r.fn(n),!c.contains(n)||(r.VI(n),!c.contains(n)||(r.YI(n),!c.contains(n)||(r.gn(n),!c.contains(n))))},o.ZH=function(r,n,l){if(r.ea()!=n.ea()||r.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;l*=l;for(var m=0;m<r.ea();m++){if(r.Wc(m)!=n.Wc(m)){f=!1;break}for(var w=r.Ca(m);w<n.Wc(m);w++)if(r.D(w,c),n.D(w,p),h.h.zc(c,p)>l){f=!1;break}if(!f)break}return!!f},o.eU=function(r,n,l){if(r.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;l*=l;for(var m=0;m<r.I();m++)if(r.D(m,c),n.D(m,p),h.h.zc(c,p)>l){f=!1;break}return!!f},o.TA=function(r,n,l,c,p,f){var m=!1;if(r.I()>n.I()){c&&(c=!1,m=!0);var w=n}else w=r,r=n;if(n=null,p||f||m){n=new h.rn(r.I());for(var $=0;$<r.I();$++)n.write($,0)}$=new h.l;var T=new h.l,E=new h.l;w.A($),r.A(T),$.X(l,l),T.X(l,l),E.L($),E.Fa(T),T=new h.h;for(var O=new h.h,P=!0,L=h.ua.jE(r,E),F=L.getIterator(),z=l*l,R=0;R<w.I();R++)if(w.D(R,T),E.contains(T)){var G=!1;$.L(T.x,T.y,T.x,T.y),F.Zi($,l);for(var H=F.next();H!=-1&&(H=L.ka(H),r.D(H,O),!(h.h.zc(T,O)<=z&&((p||f||m)&&n.write(H,1),G=!0,c)));H=F.next());if(!G&&(P=!1,p||c))return!1}else{if(p||c)return!1;P=!1}if(f&&P)return!1;if(c)return!0;for($=0;$<r.I();$++)if(n.read($)==1){if(f)return!0}else if(p||m)return!1;return!f},o.bI=function(r,n,l){if(r.I()>n.I())var c=n;else c=r,r=n;n=new h.l;var p=new h.l,f=new h.l;c.A(n),r.A(p),n.X(l,l),p.X(l,l),f.L(n),f.Fa(p),p=new h.h;for(var m=new h.h,w=l*l,$=h.ua.jE(r,f),T=$.getIterator(),E=0;E<c.I();E++)if(c.D(E,p),f.contains(p)){n.L(p.x,p.y,p.x,p.y),T.Zi(n,l);for(var O=T.next();O!=-1;O=T.next())if(r.D($.ka(O),m),h.h.zc(p,m)<=w)return!0}return!1},o.Rz=function(r,n,l,c){return o.Am(r,n,l,c)&&o.Am(n,r,l,c)},o.Am=function(r,n,l,c){function p(Ie,ge){return O.LE(Ie,ge)}var f,m=!0,w=[0,0],$=[0,0],T=0,E=new h.ja(0),O=new o,P=new h.l,L=new h.l,F=new h.l;r.A(P),n.A(L),P.X(l,l),L.X(l,l),F.L(P),F.Fa(L),r=r.Ha(),L=n.Ha();var z=null,R=z=null,G=n.Cb;for(G!=null?(z=G.Gb,R=G.Bo,z==null&&(z=h.ua.lj(n,F))):z=h.ua.lj(n,F),n=z.getIterator(),G=null,R!=null&&(G=R.getIterator());r.ab();)for(;r.Ia();){var H=!1,B=r.ia();if(B.A(P),!P.isIntersecting(F)||G!=null&&(G.Zi(P,l),G.next()==-1))return!1;for(R=B.Rb(),n.Wo(B,l),f=n.next();f!=-1;f=n.next()){L.Wb(z.ka(f)),f=L.ia();var te=B.Fa(f,null,w,$,l);if(te==2&&(!c||$[0]<=$[1])){te=w[0];var Q=w[1],ne=$[0],pe=$[1];if(te*R<=l&&(1-Q)*R<=l){H=!0,T=0,E.resize(0),O.th.length=0;var he=r.xb();for(ne=!0;ne;){if(r.Ia()){if(R=(B=r.ia()).Rb(),(te=B.Fa(f,null,w,$,l))==2&&(!c||$[0]<=$[1])&&(te=w[0],Q=w[1],te*R<=l&&(1-Q)*R<=l)){he=r.xb();continue}if(L.Ia()&&(f=L.ia(),(te=B.Fa(f,null,w,$,l))==2&&(!c||$[0]<=$[1])&&(te=w[0],Q=w[1],te*R<=l&&(1-Q)*R<=l))){he=r.xb();continue}}ne=!1}he!=r.xb()&&(r.Wb(he),r.ia());break}he=r.xb(),f=v.construct(he,r.gb,te,Q,L.xb(),L.gb,ne,pe),O.th.push(f),E.add(E.size)}}if(!H){if(T==O.th.length)return!1;for(1<E.size-T&&E.Wd(T,E.size,p),H=0;T<O.th.length;T++)if(!((f=O.th[E.get(T)]).Mj<H&&f.Ui<H)){if(R*(f.Mj-H)>l)return!1;if(R*(1-(H=f.Ui))<=l||H==1)break}if(R*(1-H)>l)return!1;T=0,E.resize(0),O.th.length=0}}return m},o.QG=function(r,n,l){if(1>o.Sz(r,n,l,null))return!1;var c=new h.l,p=new h.l;r.A(c),n.A(p);var f=o.ns(c,p,l);return c=o.ns(p,c,l),!(!f||!c)||(f&&!c?!o.Am(n,r,l,!1):c&&!f?!o.Am(r,n,l,!1):!o.Am(r,n,l,!1)&&!o.Am(n,r,l,!1))},o.Sz=function(r,n,l,c){function p(xe,zt){return P.LE(xe,zt)}if(r.sz()>n.sz())var f=n,m=r;else f=r,m=n;r=f.Ha(),n=m.Ha();var w=[0,0],$=[0,0],T=-1,E=0,O=new h.ja(0),P=new o,L=new h.l,F=new h.l,z=new h.l;f.A(L),m.A(F),L.X(l,l),F.X(l,l),z.L(L),z.Fa(F),f=null,c!=null&&(f=new h.h);var R=F=F=null,G=m.Cb;for(G!=null?(F=G.Gb,R=G.Bo,F==null&&(F=h.ua.lj(m,z))):F=h.ua.lj(m,z),m=F.getIterator(),G=null,R!=null&&(G=R.getIterator());r.ab();)for(R=0;r.Ia();){var H=r.ia();if(H.A(L),L.isIntersecting(z)){if(G!=null&&(G.Zi(L,l),G.next()==-1))continue;var B=H.Rb();m.Wo(H,l);for(var te=m.next();te!=-1;te=m.next()){var Q=F.ka(te);n.Wb(Q);var ne=n.ia(),pe=ne.Rb(),he=H.Fa(ne,null,w,$,l);if(0<he){te=w[0],T=$[0];var Ie=he==2?w[1]:NaN,ge=he==2?$[1]:NaN;if(he==2){if(B*(Ie-te)>l)return 1;var He=B*(Ie-te);if(n.Ia()){if(ne=n.ia(),(he=H.Fa(ne,null,w,null,l))==2){he=w[0];var Fe=w[1];if(He+(he=B*(Fe-he))>l)return 1}n.Wb(Q),n.ia()}if(!n.xm()){if(n.ni(),ne=n.ni(),(he=H.Fa(ne,null,w,null,l))==2&&(he=w[0],He+(he=B*((Fe=w[1])-he))>l))return 1;n.Wb(Q),n.ia()}if(r.Ia()){if(Q=r.xb(),(he=(H=r.ia()).Fa(ne,null,w,null,l))==2&&(he=w[0],He+(he=B*((Fe=w[1])-he))>l))return 1;r.Wb(Q),r.ia()}if(!r.xm()){if(Q=r.xb(),r.ni(),(he=(H=r.ni()).Fa(ne,null,w,null,l))==2&&(he=w[0],He+(he=pe*((Fe=w[1])-he))>l))return 1;r.Wb(Q),r.ia()}ne=v.construct(r.xb(),r.gb,te,Ie,n.xb(),n.gb,T,ge),P.th.push(ne),O.add(O.size)}T=0,c!=null&&(H.ic(te,f),c.add(f.x),c.add(f.y))}}if(E<P.th.length){for(O.Wd(E,O.size,p),H=0,te=P.th[O.get(E)].Om;E<P.th.length;E++)if(!((ne=P.th[O.get(E)]).Mj<H&&ne.Ui<H))if(B*(ne.Mj-H)>l)R=B*(ne.Ui-ne.Mj),H=ne.Ui,te=ne.Om;else{if(ne.Om!=te?(R=B*(ne.Ui-ne.Mj),te=ne.Om):R+=B*(ne.Ui-ne.Mj),R>l)return 1;if((H=ne.Ui)==1)break}B*(1-H)>l&&(R=0),E=0,O.resize(0),P.th.length=0}}}return T},o.OG=function(r,n,l){var c=r.Ha(),p=n.Ha();for(r=new h.am(r,n,l,!1);r.next();){n=r.pl();var f=r.jl();if(c.Wb(n),p.Wb(f),n=c.ia(),0<p.ia().Fa(n,null,null,null,l))return!0}return!1},o.PG=function(r,n,l,c){var p=r.Ha(),f=new h.l,m=new h.l,w=new h.l;r.A(f),n.A(m),f.X(l,l),f.contains(m),m.X(l,l),w.L(f),w.Fa(m),(f=r.Cb)!=null?(f=f.Gb)==null&&(f=h.ua.lj(r,w)):f=h.ua.lj(r,w),r=f.getIterator();for(var $=new h.h,T=new h.h,E=l*l,O=0;O<n.I();O++)if(n.D(O,$),w.contains($)){m.L($.x,$.y,$.x,$.y),r.Zi(m,l);for(var P=!1,L=r.next();L!=-1;L=r.next())if(p.Wb(f.ka(L)),(L=p.ia()).ic(L.ge($,!1),T),h.h.zc(T,$)<=E){P=!0;break}if(c){if(!P)return!1}else if(P)return!0}return!!c},o.Tz=function(r,n,l){var c=new h.h,p=l*l,f=r.Ha();if((r=r.Cb)!=null&&(r=r.Gb)!=null){var m=new h.l;for(m.L(n),m=(l=r.HF(m,l)).next();m!=-1;m=l.next())if(f.Wb(r.ka(m)),f.Ia()){var w=(m=f.ia()).ge(n,!1);if(m.ic(w,c),h.h.zc(n,c)<=p)return!0}return!1}for(r=new h.l;f.ab();)for(;f.Ia();)if((m=f.ia()).A(r),r.X(l,l),r.contains(n)&&(w=m.ge(n,!1),m.ic(w,c),h.h.zc(n,c)<=p))return!0;return!1},o.MG=function(r,n,l){return o.Tz(r,n,l)&&!o.Uz(r,n,l)},o.Uz=function(r,n,l){return r=r.ng(),!o.lt(r,n,l)},o.NG=function(r,n,l){if(r.vm()){var c=new h.zb(n.v,n.G,n.v,n.H),p=new h.zb(n.v,n.H,n.C,n.H),f=new h.zb(n.C,n.H,n.C,n.G);for(n=new h.zb(n.C,n.G,n.v,n.G),r=r.Ha();r.ab();)for(;r.Ia();){var m=r.ia();if(m.isIntersecting(c,l)||m.isIntersecting(p,l)||m.isIntersecting(f,l)||m.isIntersecting(n,l))return!0}}else{(c=new h.l).L(n),c.X(l,l),l=r.vb(0),p=new h.h,f=new h.h,n=new h.h,m=new h.h;for(var w=0,$=r.ea();w<$;w++)for(var T=!0,E=r.Ca(w),O=r.Wc(w);E<O;E++)if(T)l.uc(2*E,f),T=!1;else{if(l.uc(2*E,p),n.N(f),m.N(p),c.uy(n,m)!=0)return!0;f.N(p)}}return!1},o.rc=function(r,n,l){var c=r.K(),p=n.K();if(h.ba.zj(c)){var f=r.Cb;if(f!=null&&(f=f.Hk)!=null)if(p==33){var m=n.D();if((m=f.Uo(m.x,m.y))==1)return 1;if(m==0)return 4}else{if(m=new h.l,n.A(m),(m=f.To(m))==1)return 1;if(m==0)return 4;if(l&&h.ba.zj(p)&&o.CE(n,f))return 1073741824}}if(h.ba.zj(p)&&(f=n.Cb)!=null&&(f=f.Hk)!=null)if(c==33){if(r=r.D(),(m=f.Uo(r.x,r.y))==1)return 2;if(m==0)return 4}else{if(n=new h.l,r.A(n),(m=f.To(n))==1)return 2;if(m==0)return 4;if(l&&h.ba.zj(c)&&o.CE(r,f))return 1073741824}return 0},o.CE=function(r,n){for(var l=r.I(),c=new h.h,p=0;p<l;p++)if(r.D(p,c),n.Uo(c.x,c.y)==1)return!0;return!1},o.DI=function(r,n,l,c){for(var p=1<=r.qm(0)&&1<=n.qm(0),f=r.Ha(),m=n.Ha(),w=[0,0],$=[0,0],T=new h.am(r,n,l,!1),E=!1;T.next();){var O=T.pl(),P=T.jl();if(f.Wb(O),m.Wb(P),O=f.ia(),(P=m.ia().Fa(O,null,$,w,l))==2){if(E=w[0],P=w[1],O=O.Rb(),p&&(P-E)*O>l)return!1;E=!0}else if(P!=0){if(E=w[0],O=$[0],0<E&&1>E&&0<O&&1>O)return!1;E=!0}}return!!E&&(f=new h.l,m=new h.l,p=new h.l,r.A(f),n.A(m),f.X(1e3*l,1e3*l),m.X(1e3*l,1e3*l),p.L(f),p.Fa(m),!(10<r.I()&&(r=h.Vd.clip(r,p,l,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,l,0),n.B()))&&h.cm.st(r,n,l,"F********",c))},o.AI=function(r,n,l,c){var p=1<=r.qm(0)&&1<=n.qm(0),f=new h.l,m=new h.l,w=new h.l;r.A(f),n.A(m);for(var $=!1,T=o.ns(f,m,l),E=o.ns(m,f,l),O=r.Ha(),P=n.Ha(),L=[0,0],F=[0,0],z=new h.am(r,n,l,!1);z.next();){var R=z.pl(),G=z.jl();if(O.Wb(R),P.Wb(G),G=O.ia(),(R=P.ia().Fa(G,null,F,L,l))==2){R=L[0];var H=L[1];if(G=G.Rb(),p&&(H-R)*G>l&&($=!0,T&&E))return!0}else if(R!=0&&(R=L[0],G=F[0],0<R&&1>R&&0<G&&1>G))return!0}if(p=new h.l,O=new h.l,p.L(f),p.X(1e3*l,1e3*l),O.L(m),O.X(1e3*l,1e3*l),w.L(p),w.Fa(O),f="",f=$?f+"**":f+"T*",T){if(10<n.I()&&(n=h.Vd.clip(n,w,l,0)).B())return!1;f+="****"}else f+="T***";if(E){if(10<r.I()&&(r=h.Vd.clip(r,w,l,0)).B())return!1;f+="***"}else f+="T**";return h.cm.st(r,n,l,f.toString(),c)},o.wI=function(r,n,l,c){var p=[!1],f=o.uI(r,n,l,p);return p[0]?f:(p=new h.l,n.A(p),p.X(1e3*l,1e3*l),!(10<r.I()&&(r=h.Vd.clip(r,p,l,0),r.B()))&&h.cm.Uw(r,n,l,c))},o.uI=function(r,n,l,c){c[0]=!1;for(var p=r.Ha(),f=n.Ha(),m=[0,0],w=[0,0],$=new h.am(r,n,l,!1),T=!1;$.next();){var E=$.pl(),O=$.jl();if(p.Wb(E,-1),f.Wb(O,-1),E=p.ia(),(E=f.ia().Fa(E,null,w,m,l))!=0&&(T=!0,E==1&&(E=m[0],O=w[0],0<E&&1>E&&0<O&&1>O)))return c[0]=!0,!1}if(!T){for(c[0]=!0,m=new h.l,r.A(m),m.X(l,l),$=r,T=!1,w=new h.l,c=0,p=n.ea();c<p;c++)if(0<n.Ka(c)){if(n.Tj(c,w),!m.isIntersecting(w)||(f=n.Oa(n.Ca(c)),(f=h.Fg.ym($,f,0))==0))return!1;T||(!h.Fg.Ol(r,n.ea()-1)||r.Cb!=null&&r.Cb.Gb!=null?$=r:(f=new h.Ea,r.copyTo(f),f.hj(1),$=f),T=!0)}if(r.ea()==1||n.K()==1607)return!0;for(m=new h.l,n.A(m),m.X(l,l),w=n,$=!1,l=new h.l,c=0,p=r.ea();c<p;c++)if(0<r.Ka(c)){if(r.Tj(c,l),m.isIntersecting(l)&&(f=r.Oa(r.Ca(c)),(f=h.Fg.ym(w,f,0))==1))return!1;$||(!h.Fg.Ol(n,r.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(f=new h.Ea,n.copyTo(f),f.hj(1),w=f),$=!0)}return!0}return!1},o.EI=function(r,n,l,c){for(var p=r.Ha(),f=n.Ha(),m=[0,0],w=[0,0],$=new h.am(r,n,l,!1),T=!1;$.next();){var E=$.pl(),O=$.jl();if(p.Wb(E),f.Wb(O),E=p.ia(),(E=f.ia().Fa(E,null,w,m,l))==2)T=!0;else if(E!=0){if(T=m[0],E=w[0],0<T&&1>T&&0<E&&1>E)return!1;T=!0}}return!!T&&(f=new h.l,m=new h.l,p=new h.l,r.A(f),n.A(m),f.X(1e3*l,1e3*l),m.X(1e3*l,1e3*l),p.L(f),p.Fa(m),!(10<r.I()&&(r=h.Vd.clip(r,p,l,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,l,0),n.B()))&&h.cm.bn(r,n,l,"F********",c))},o.yI=function(r,n,l,c){for(var p=r.Ha(),f=n.Ha(),m=[0,0],w=[0,0],$=new h.am(r,n,l,!1),T=!1;$.next();){var E=$.pl(),O=$.jl();if(p.Wb(E),f.Wb(O),E=p.ia(),(E=f.ia().Fa(E,null,w,m,l))==2)T=!0;else if(E!=0){if(T=m[0],E=w[0],0<T&&1>T&&0<E&&1>E)return!0;T=!0}}return!!T&&(f=new h.l,m=new h.l,w=new h.l,$=new h.l,p=new h.l,r.A(f),n.A(m),o.ns(m,f,l)?(w.L(f),w.X(1e3*l,1e3*l),$.L(m),$.X(1e3*l,1e3*l),p.L(w),p.Fa($),!(10<r.I()&&(r=h.Vd.clip(r,p,l,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,l,0),n.B()))&&(l=h.cm.bn(r,n,l,"T********",c))):l=h.cm.bn(r,n,l,"T*****T**",c))},o.xI=function(r,n,l,c){var p=[!1],f=o.uI(r,n,l,p);return p[0]?f:(p=new h.l,n.A(p),p.X(1e3*l,1e3*l),!(10<r.I()&&(r=h.Vd.clip(r,p,l,0),r.B()))&&h.cm.aB(r,n,l,c))},o.vI=function(r,n,l){return h.jd.Zd(r,n,l)==1},o.CI=function(r,n,l){return h.jd.Zd(r,n,l)==2},o.lt=function(r,n,l){var c=new h.h;l*=l;for(var p=0;p<r.I();p++)if(r.D(p,c),h.h.zc(c,n)<=l)return!1;return!0},o.prototype.LE=function(r,n){return r=this.th[r],n=this.th[n],r.Om<n.Om||r.Om==n.Om&&(r.rw<n.rw||r.rw==n.rw&&(r.Mj<n.Mj||r.Mj==n.Mj&&(r.Ui<n.Ui||r.Ui==n.Ui&&r.wH<n.wH)))?-1:1},o}();h.vd=u}(q||(q={})),function(h){var k,v,u;(v=k||(k={}))[v.InteriorInterior=0]="InteriorInterior",v[v.InteriorBoundary=1]="InteriorBoundary",v[v.InteriorExterior=2]="InteriorExterior",v[v.BoundaryInterior=3]="BoundaryInterior",v[v.BoundaryBoundary=4]="BoundaryBoundary",v[v.BoundaryExterior=5]="BoundaryExterior",v[v.ExteriorInterior=6]="ExteriorInterior",v[v.ExteriorBoundary=7]="ExteriorBoundary",v[v.ExteriorExterior=8]="ExteriorExterior",function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"}(u||(u={})),k=function(){function o(){this.me=0,this.j=new h.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return o.tB=function(r,n,l,c,p){if(c.length!=9)throw h.i.ga("relation string length has to be 9 characters");for(var f=0;9>f;f++){var m=c.charAt(f);if(m!="*"&&m!="T"&&m!="F"&&m!="0"&&m!="1"&&m!="2")throw h.i.ga("relation string")}if((f=this.HR(c,r.Eb(),n.Eb()))!=0)return h.vd.uB(r,n,l,f,p);f=new h.l,r.A(f),m=new h.l,n.A(m);var w=new h.l;if(w.L(f),w.$b(m),l=h.ua.Xd(l,w,!1),r=this.RE(r,l),n=this.RE(n,l),r.B()||n.B())return this.pW(r,n,c);switch(f=n.K(),m=!1,r.K()){case 1736:switch(f){case 1736:m=this.st(r,n,l,c,p);break;case 1607:m=this.bn(r,n,l,c,p);break;case 33:m=this.rt(r,n,l,c);break;case 550:m=this.qt(r,n,l,c,p)}break;case 1607:switch(f){case 1736:m=this.bn(n,r,l,this.aq(c),p);break;case 1607:m=this.bB(r,n,l,c,p);break;case 33:m=this.ut(r,n,l,c,p);break;case 550:m=this.tt(r,n,l,c,p)}break;case 33:switch(f){case 1736:m=this.rt(n,r,l,this.aq(c));break;case 1607:m=this.ut(n,r,l,this.aq(c),p);break;case 33:m=this.VU(r,n,l,c);break;case 550:m=this.mt(n,r,l,this.aq(c))}break;case 550:switch(f){case 1736:m=this.qt(n,r,l,this.aq(c),p);break;case 1607:m=this.tt(n,r,l,this.aq(c),p);break;case 550:m=this.UA(r,n,l,c,p);break;case 33:m=this.mt(r,n,l,c)}break;default:m=!1}return m},o.st=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.sJ();var m=new h.l,w=new h.l;return r.A(m),n.A(w),c=!1,h.vd.fk(m,w,l)&&(f.Eu(r,n),c=!0),c||((m=h.vd.rc(r,n,!1))==4?(f.Eu(r,n),c=!0):m==1?(f.hy(n),c=!0):m==2&&(f.UD(r),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.Dp(r,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.Uw=function(r,n,l,c){var p=new o;p.$i(),p.dj("T*****F**"),p.sJ();var f=new h.l,m=new h.l;r.A(f),n.A(m);var w=!1;return h.vd.fk(f,m,l)&&(p.Eu(r,n),w=!0),w||((f=h.vd.rc(r,n,!1))==4?(p.Eu(r,n),w=!0):f==1?(p.hy(n),w=!0):f==2&&(p.UD(r),w=!0)),w?this.hg(p.J,p.Yc):(r=(w=new h.hd).Ib(r),f=w.Ib(n),h.Vk.W(w,l,c,!1),l=w.Ke(f).ng(),w.Ip(0,!0,!0),h.tn.W(w,r,-1,!1,c),w.I(r)!=0&&(h.tn.W(w,f,-1,!1,c),p.gr(w,c),(n=w.I(f)==0)||(p.Dp(r,f),p.j.Wg(),f=this.hg(p.J,p.Yc))?(r=w.Ke(r),r=(w=new h.hd).Ib(r),f=w.Ib(l),p.gr(w,c),p.me=0,p.$i(),p.dj(n?"T*****F**":"******F**"),p.DB(),p.Dp(r,f),p.j.Wg(),this.hg(p.J,p.Yc)):f))},o.bn=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.DB();var m=new h.l,w=new h.l;return r.A(m),n.A(w),c=!1,h.vd.fk(m,w,l)&&(f.Fu(r,n),c=!0),c||((m=h.vd.rc(r,n,!1))==4?(f.Fu(r,n),c=!0):m==1&&(f.VD(n),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.mh=f.j.Fp(),o.Lw(n,f.j,f.mh),f.Dp(r,n),f.j.Gp(f.mh),f.j.Wg()),o.hg(f.J,f.Yc)},o.aB=function(r,n,l,c){var p=new o;p.$i(),p.dj("T*****F**"),p.DB();var f=new h.l,m=new h.l;r.A(f),n.A(m);var w=!1;return h.vd.fk(f,m,l)&&(p.Fu(r,n),w=!0),w||((f=h.vd.rc(r,n,!1))==4?(p.Fu(r,n),w=!0):f==1&&(p.VD(n),w=!0)),w?this.hg(p.J,p.Yc):(r=(w=new h.hd).Ib(r),n=w.Ib(n),p.Yo(w,l,c),w.I(r)!=0&&(p.Dp(r,n),p.j.Wg(),this.hg(p.J,p.Yc)))},o.qt=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.tJ();var m=new h.l,w=new h.l;return r.A(m),n.A(w),c=!1,h.vd.fk(m,w,l)&&(f.Gu(r),c=!0),c||((m=h.vd.rc(r,n,!1))==4?(f.Gu(r),c=!0):m==1&&(f.uN(),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.By(r,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.bB=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.$W(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var w=!1;return h.vd.fk(c,m,l)&&(f.KG(r,n),w=!0),w||h.vd.rc(r,n,!1)!=4||(f.KG(r,n),w=!0),w||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.$h=f.j.Fp(),f.mh=f.j.Fp(),o.Lw(r,f.j,f.$h),o.Lw(n,f.j,f.mh),f.Dp(r,n),f.j.Gp(f.$h),f.j.Gp(f.mh),f.j.Wg()),o.hg(f.J,f.Yc)},o.tt=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.HJ(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var w=!1;return h.vd.fk(c,m,l)&&(f.Qz(r),w=!0),w||h.vd.rc(r,n,!1)!=4||(f.Qz(r),w=!0),w||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.$h=f.j.Fp(),o.Lw(r,f.j,f.$h),f.By(r,n),f.j.Gp(f.$h),f.j.Wg()),o.hg(f.J,f.Yc)},o.UA=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.MJ(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var w=!1;return h.vd.fk(c,m,l)&&(f.tI(),w=!0),w||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Yo(c,l,p),f.By(r,n),f.j.Wg()),o.hg(f.J,f.Yc)},o.rt=function(r,n,l,c){var p=new o;p.$i(),p.dj(c),p.tJ();var f=new h.l;r.A(f),n=n.D();var m=!1;return h.vd.Tw(n,f,l)&&(p.Gu(r),m=!0),m||((l=h.jd.Zd(r,n,l))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):l==2?(p.J[6]=-1,r.He()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,l=new h.l,r.A(l),p.J[2]=l.da()==0&&l.S()==0?-1:1)):p.Gu(r)),this.hg(p.J,c)},o.ut=function(r,n,l,c,p){var f=new o;f.$i(),f.dj(c),f.HJ();var m=new h.l;r.A(m),c=n.D();var w=!1;if(h.vd.Tw(c,m,l)&&(f.Qz(r),w=!0),!w){m=null;var $=w=!1;(f.fa[0]||f.fa[6])&&(h.vd.Tz(r,c,l)?(f.fa[0]&&(m=h.si.im(r,p),$=!h.vd.lt(m,c,l),w=!0,f.J[0]=$?-1:0),f.J[6]=-1):(f.J[0]=-1,f.J[6]=0)),f.fa[3]&&(m!=null&&m.B()?f.J[3]=-1:(w||(m==null&&(m=h.si.im(r,p)),$=!h.vd.lt(m,c,l),w=!0),f.J[3]=$?0:-1)),f.fa[5]&&(m!=null&&m.B()?f.J[5]=-1:w&&!$?f.J[5]=0:(m==null&&(m=h.si.im(r,p)),p=h.vd.Pw(m,n,l),f.J[5]=p?-1:0)),f.fa[2]&&(r.Rb()!=0?f.J[2]=1:((p=new h.ee(r.description)).Gd(r,0,r.I()),r=h.vd.Pw(p,n,l),f.J[2]=r?-1:0))}return this.hg(f.J,f.Yc)},o.mt=function(r,n,l,c){var p=new o;p.$i(),p.dj(c),p.MJ();var f=new h.l;r.A(f),n=n.D();var m=!1;if(h.vd.Tw(n,f,l)&&(p.tI(),m=!0),!m){f=!1,m=!0,l*=l;for(var w=0;w<r.I();w++){var $=r.Oa(w);if(h.h.zc($,n)<=l?f=!0:m=!1,f&&!m)break}f?(p.J[0]=0,p.J[2]=m?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return o.hg(p.J,c)},o.VU=function(r,n,l,c){r=r.D(),n=n.D();for(var p=[],f=0;9>f;f++)p[f]=-1;return h.h.zc(r,n)<=l*l?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,o.hg(p,c)},o.hg=function(r,n){for(var l=0;9>l;l++)switch(n.charAt(l)){case"T":if(r[l]==-1)return!1;break;case"F":if(r[l]!=-1)return!1;break;case"0":if(r[l]!=0)return!1;break;case"1":if(r[l]!=1)return!1;break;case"2":if(r[l]!=2)return!1}return!0},o.pW=function(r,n,l){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(r.B()&&n.B()){for(var p=0;9>p;p++)c[p]=-1;return this.hg(c,l)}return p=!1,r.B()&&(r=n,p=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=r.K(),h.ba.Ic(n)?n==1736?r.He()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new h.l,r.A(n),c[2]=n.da()==0&&n.S()==0?0:1):(n=r.Rb()!=0,c[2]=n?1:0,c[5]=h.si.cq(r)?0:-1):(c[2]=0,c[5]=-1),p&&this.qK(c),this.hg(c,l)},o.HR=function(r,n,l){return o.ZP(r)?3:o.PP(r)?4:o.ZX(r,n,l)?8:o.xP(r,n,l)?16:o.$O(r)?1:o.zU(r,n,l)?32:0},o.ZP=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="F"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="F"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.PP=function(r){return r.charAt(0)=="F"&&r.charAt(1)=="F"&&r.charAt(2)=="*"&&r.charAt(3)=="F"&&r.charAt(4)=="F"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.ZX=function(r,n,l){return(n!=0||l!=0)&&((n!=2||l!=2)&&(r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="T"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"||n==1&&l==1&&r.charAt(0)=="F"&&r.charAt(1)=="T"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")||l!=0&&r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="T"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")},o.xP=function(r,n,l){return n>l?r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*":n==1&&l==1&&r.charAt(0)=="0"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.$O=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.zU=function(r,n,l){if(n==l){if(n!=1)return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*";if(r.charAt(0)=="1"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*")return!0}return!1},o.Lw=function(r,n,l){r=n.Ma(r);for(var c=n.Oe;c!=-1;c=n.Tf(c))if(n.yd(c)&r){var p=n.Je(c);if(p==-1)n.pn(c,l,0);else{var f=p,m=0;do n.fh(f)&r&&m++,f=n.kc(n.ya(f));while(f!=p);n.pn(c,l,m)}}},o.aq=function(r){var n=""+r.charAt(0);return n+=r.charAt(3),n+=r.charAt(6),n+=r.charAt(1),n+=r.charAt(4),n+=r.charAt(7),n+=r.charAt(2),(n+=r.charAt(5))+r.charAt(8)},o.prototype.$i=function(){for(var r=0;9>r;r++)this.J[r]=-2,this.$a[r]=-2},o.qK=function(r){var n=r[1],l=r[2],c=r[5];r[1]=r[3],r[2]=r[6],r[5]=r[7],r[3]=n,r[6]=l,r[7]=c},o.prototype.dj=function(r){for(this.Yc=r,r=0;9>r;r++)this.Yc.charAt(r)!="*"?(this.fa[r]=!0,this.me++):this.fa[r]=!1},o.prototype.PJ=function(){for(var r=0;9>r;r++)this.fa[r]&&this.J[r]==-2&&(this.J[r]=-1,this.fa[r]=!1)},o.prototype.qc=function(r){return this.J[r]!=-2&&(this.J[r]==-1?(this.fa[r]=!1,this.me--,!0):this.Yc.charAt(r)!="T"&&this.Yc.charAt(r)!="F"?!(this.J[r]<this.$a[r])&&(this.fa[r]=!1,this.me--,!0):(this.fa[r]=!1,this.me--,!0))},o.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},o.prototype.sN=function(r,n,l){var c=!0;return this.fa[0]&&(this.xS(r,n,l),c=c&&this.qc(0)),this.fa[1]&&(this.nG(r,n,1),c=c&&this.qc(1)),this.fa[2]&&(this.oG(r,n,l,2),c=c&&this.qc(2)),this.fa[3]&&(this.nG(r,l,3),c=c&&this.qc(3)),this.fa[4]&&(this.wN(r,n,l),c=c&&this.qc(4)),this.fa[5]&&(this.$D(r,l,5),c=c&&this.qc(5)),this.fa[6]&&(this.oG(r,l,n,6),c=c&&this.qc(6)),this.fa[7]&&(this.$D(r,n,7),c=c&&this.qc(7)),c},o.prototype.Eu=function(r,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(n,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},o.prototype.Hr=function(r,n,l,c,p){n==-1&&c==-1||((l!="T"&&l!="F"&&n!=-1||p!="T"&&p!="F"&&c!=-1)&&r.He()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(l=new h.l,r.A(l),this.J[n]=l.da()==0&&l.S()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.hy=function(r){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(r,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},o.prototype.UD=function(r){this.hy(r),o.qK(this.J)},o.prototype.Fu=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var l=this.Yc.charAt(6);l=l=="T"||l=="F"||n.Rb()!=0,this.J[6]=l?1:0}this.fa[7]&&(n=h.si.cq(n),this.J[7]=n?0:-1),this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.VD=function(r){if(this.fa[0]){var n=this.Yc.charAt(0);n=n=="T"||n=="F"||r.Rb()!=0,this.J[0]=n?1:0}this.fa[1]&&(r=h.si.cq(r),this.J[1]=r?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Gu=function(r){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.KG=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var l=this.Yc.charAt(2);l=l=="T"||l=="F"||r.Rb()!=0,this.J[2]=l?1:0}this.fa[5]&&(r=h.si.cq(r),this.J[5]=r?0:-1),this.fa[6]&&(l=(l=this.Yc.charAt(6))=="T"||l=="F"||n.Rb()!=0,this.J[6]=l?1:0),this.fa[7]&&(n=h.si.cq(n),this.J[7]=n?0:-1)},o.prototype.Qz=function(r){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var n=this.Yc.charAt(2);n=n=="T"||n=="F"||r.Rb()!=0,this.J[2]=n?1:0}this.fa[5]&&(r=h.si.cq(r),this.J[5]=r?0:-1),this.J[6]=0},o.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.tN=function(r,n,l){var c=!0;return this.fa[0]&&(this.yS(r,n),c=c&&this.qc(0)),this.fa[1]&&(this.uS(r,n,l,this.mh),c=c&&this.qc(1)),this.fa[2]&&(this.vS(r,n),c=c&&this.qc(2)),this.fa[3]&&(this.AN(r,n,l,this.mh),c=c&&this.qc(3)),this.fa[4]&&(this.xN(r,n,l,this.mh),c=c&&this.qc(4)),this.fa[5]&&(this.yN(r,n,l),c=c&&this.qc(5)),this.fa[6]&&(this.gQ(r,n),c=c&&this.qc(6)),this.fa[7]&&(this.fQ(r,n,l,this.mh),c=c&&this.qc(7)),c},o.prototype.hT=function(r,n,l){var c=!0;return this.fa[0]&&(this.BS(r,n,l,this.$h,this.mh),c=c&&this.qc(0)),this.fa[1]&&(this.pG(r,n,l,this.$h,this.mh,1),c=c&&this.qc(1)),this.fa[2]&&(this.qG(r,n,l,2),c=c&&this.qc(2)),this.fa[3]&&(this.pG(r,l,n,this.mh,this.$h,3),c=c&&this.qc(3)),this.fa[4]&&(this.CN(r,n,l,this.$h,this.mh),c=c&&this.qc(4)),this.fa[5]&&(this.aE(r,l,this.$h,5),c=c&&this.qc(5)),this.fa[6]&&(this.qG(r,l,n,6),c=c&&this.qc(6)),this.fa[7]&&(this.aE(r,n,this.mh,7),c=c&&this.qc(7)),c},o.prototype.WD=function(r,n,l){var c=!0;return this.fa[0]&&(this.zS(r,n),c=c&&this.qc(0)),this.fa[2]&&(this.wS(r,n),c=c&&this.qc(2)),this.fa[3]&&(this.BN(r,n,l),c=c&&this.qc(3)),this.fa[5]&&(this.zN(r,n),c=c&&this.qc(5)),this.fa[6]&&(this.hQ(r,n),c=c&&this.qc(6)),c},o.prototype.LG=function(r,n,l){var c=!0;return this.fa[0]&&(this.CS(r,n,l,this.$h),c=c&&this.qc(0)),this.fa[2]&&(this.AS(r,l),c=c&&this.qc(2)),this.fa[3]&&(this.EN(r,n,l,this.$h),c=c&&this.qc(3)),this.fa[5]&&(this.DN(r,n,l,this.$h),c=c&&this.qc(5)),this.fa[6]&&(this.iQ(r,n,l),c=c&&this.qc(6)),c},o.prototype.UU=function(r,n,l){var c=!0;return this.fa[0]&&(this.DS(r,n,l),c=c&&this.qc(0)),this.fa[2]&&(this.rG(r,n,l,2),c=c&&this.qc(2)),this.fa[6]&&(this.rG(r,l,n,6),c=c&&this.qc(6)),c},o.prototype.xS=function(r,n,l){this.J[0]!=2&&(r=this.j.af(r))&n&&r&l&&(this.J[0]=2)},o.prototype.nG=function(r,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.ya(r));this.j.af(r)&n&&c&n&&(this.J[l]=1)}},o.prototype.oG=function(r,n,l,c){this.J[c]!=2&&(r=this.j.af(r))&n&&!(r&l)&&(this.J[c]=2)},o.prototype.wN=function(r,n,l){if(this.J[4]!=1){var c=this.j.fh(r);c&n&&c&l?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(r=this.j.yd(this.j.vf(r)))&n&&r&l&&(this.J[4]=0)}},o.prototype.$D=function(r,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.ya(r));!(this.j.af(r)&n)&&!(c&n)&&(this.J[l]=1)}},o.prototype.yS=function(r,n){if(this.J[0]!=1){var l=this.j.af(this.j.ya(r));this.j.af(r)&n&&l&n&&(this.J[0]=1)}},o.prototype.uS=function(r,n,l,c){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r),f=this.j.yd(p);!(f&n)&&this.j.af(r)&n&&(r=this.j.og(p,c),f&l&&r%2!=0&&(this.J[1]=0))}},o.prototype.vS=function(r,n){this.J[2]!=2&&this.j.fh(r)&n&&(this.J[2]=2)},o.prototype.AN=function(r,n,l,c){if(this.J[3]!=1){var p=this.j.fh(r);p&n&&p&l?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(p=this.j.vf(r),(r=this.j.yd(p))&n&&(n=this.j.og(p,c),r&l&&n%2==0&&(this.J[3]=0)))}},o.prototype.xN=function(r,n,l,c){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r);(r=this.j.yd(p))&n&&(n=this.j.og(p,c),r&l&&n%2!=0&&(this.J[4]=0))}},o.prototype.yN=function(r,n,l){this.J[5]!=1&&(r=this.j.fh(r))&n&&!(r&l)&&(this.J[5]=1)},o.prototype.gQ=function(r,n){if(this.J[6]!=1){var l=this.j.af(this.j.ya(r));!(this.j.af(r)&n)&&!(l&n)&&(this.J[6]=1)}},o.prototype.fQ=function(r,n,l,c){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r),f=this.j.yd(p);!(f&n)&&!(this.j.af(r)&n)&&(r=this.j.og(p,c),f&l&&r%2!=0&&(this.J[7]=0))}},o.prototype.BS=function(r,n,l,c,p){if(this.J[0]!=1){var f=this.j.fh(r);f&n&&f&l?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(r=this.j.vf(r),(f=this.j.yd(r))&n&&f&l&&(n=this.j.og(r,c),p=this.j.og(r,p),n%2==0&&p%2==0&&(this.J[0]=0)))}},o.prototype.pG=function(r,n,l,c,p,f){if(this.J[f]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){r=this.j.vf(r);var m=this.j.yd(r);m&n&&m&l&&(n=this.j.og(r,c),p=this.j.og(r,p),n%2==0&&p%2!=0&&(this.J[f]=0))}},o.prototype.qG=function(r,n,l,c){this.J[c]!=1&&(r=this.j.fh(r))&n&&!(r&l)&&(this.J[c]=1)},o.prototype.CN=function(r,n,l,c,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){r=this.j.vf(r);var f=this.j.yd(r);f&n&&f&l&&(n=this.j.og(r,c),p=this.j.og(r,p),n%2!=0&&p%2!=0&&(this.J[4]=0))}},o.prototype.aE=function(r,n,l,c){this.J[c]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(r=this.j.vf(r),!(this.j.yd(r)&n)&&this.j.og(r,l)%2!=0&&(this.J[c]=0))},o.prototype.zS=function(r,n){this.J[0]!=0&&!(this.j.yd(r)&n)&&this.j.jk(this.j.Yy(r))&n&&(this.J[0]=0)},o.prototype.wS=function(r,n){this.J[2]!=2&&this.j.yd(r)&n&&(this.J[2]=2)},o.prototype.BN=function(r,n,l){this.J[3]!=0&&(r=this.j.yd(r))&n&&r&l&&(this.J[3]=0)},o.prototype.zN=function(r,n){this.J[5]!=1&&this.j.yd(r)&n&&(this.J[5]=1)},o.prototype.hQ=function(r,n){this.J[6]!=0&&!(this.j.yd(r)&n)&&!(this.j.jk(this.j.Yy(r))&n)&&(this.J[6]=0)},o.prototype.CS=function(r,n,l,c){if(this.J[0]!=0){var p=this.j.yd(r);p&n&&p&l&&this.j.og(r,c)%2==0&&(this.J[0]=0)}},o.prototype.AS=function(r,n){this.J[2]!=1&&(this.j.Je(r)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.yd(r)&n)&&(this.J[2]=0))},o.prototype.EN=function(r,n,l,c){if(this.J[3]!=0){var p=this.j.yd(r);p&n&&p&l&&this.j.og(r,c)%2!=0&&(this.J[3]=0)}},o.prototype.DN=function(r,n,l,c){if(this.J[5]!=0){var p=this.j.yd(r);p&n&&!(p&l)&&this.j.og(r,c)%2!=0&&(this.J[5]=0)}},o.prototype.iQ=function(r,n,l){this.J[6]!=0&&!((r=this.j.yd(r))&n)&&r&l&&(this.J[6]=0)},o.prototype.DS=function(r,n,l){this.J[0]!=0&&(r=this.j.yd(r))&n&&r&l&&(this.J[0]=0)},o.prototype.rG=function(r,n,l,c){this.J[c]!=0&&(r=this.j.yd(r))&n&&!(r&l)&&(this.J[c]=0)},o.prototype.Dp=function(r,n){var l=!1;r=this.j.Ma(r),n=this.j.Ma(n),this.Wi=this.j.bh();for(var c=this.j.Oe;c!=-1;c=this.j.Tf(c)){var p=this.j.Je(c);if(p==-1){if(this.Um!=-1)switch(this.Um){case 3:l=this.WD(c,r,n);break;case 4:l=this.LG(c,r,n);break;default:throw h.i.ga("internal error")}}else{var f=p;do{var m=f;if(this.j.Bb(m,this.Wi)!=1)do{switch(this.xw){case 0:l=this.sN(m,r,n);break;case 1:l=this.tN(m,r,n);break;case 2:l=this.hT(m,r,n);break;default:throw h.i.ga("internal error")}if(l)break;this.j.Kb(m,this.Wi,1),m=this.j.kc(m)}while(m!=f&&!l);if(l)break;f=this.j.kc(this.j.ya(m))}while(f!=p);if(l)break}}l||this.PJ(),this.j.Lg(this.Wi)},o.prototype.By=function(r,n){var l=!1;r=this.j.Ma(r),n=this.j.Ma(n);for(var c=this.j.Oe;c!=-1;c=this.j.Tf(c)){switch(this.Um){case 3:l=this.WD(c,r,n);break;case 4:l=this.LG(c,r,n);break;case 5:l=this.UU(c,r,n);break;default:throw h.i.Ra()}if(l)break}l||this.PJ()},o.prototype.gr=function(r,n){this.j.fr(r,n)},o.prototype.Yo=function(r,n,l){this.TP(r,n,l),this.gr(r,l)},o.prototype.TP=function(r,n,l){for(h.Vk.W(r,n,l,!1),r.Ip(0,!0,!0),n=r.md;n!=-1;n=r.ve(n))r.jc(n)==1736&&h.tn.W(r,n,-1,!1,l)},o.RE=function(r,n){var l=r.K();return h.ba.zd(l)?((n=new h.Ua(r.description)).pc(r,!0),n):l==197?(l=new h.l,r.A(l),l.da()<=n&&l.S()<=n?(n=new h.Ta(r.description),r.tf(n),n):l.da()<=n||l.S()<=n?(n=new h.Ua(r.description),l=new h.Ta,r.If(0,l),n.nf(l),r.If(2,l),n.lineTo(l),n):((n=new h.Ea(r.description)).bd(r,!1),n)):r},o}(),h.cm=k}(q||(q={})),function(h){var k=function(){function o(r){this.Gm=new h.ja(0),this.fw=new h.ja(0),this.xt=new h.h,this.yt=new h.h,this.g=r,this.Js=-1}return o.prototype.cc=function(r){return this.g.cc(this.uz(r))},o.prototype.Dv=function(r){var n=this.dz(r);if(r=this.CF(r),this.g.Na(n)==r){var l=n;n=r,r=l}return this.g.Hc(n,this.xt),this.g.Hc(r,this.yt),this.xt.y<this.yt.y},o.prototype.uz=function(r){var n=this.dz(r);return r=this.CF(r),this.g.V(n)==r?n:r},o.prototype.dz=function(r){return this.Gm.get(r)},o.prototype.CF=function(r){return this.fw.get(r)},o.prototype.mF=function(r){this.Gm.set(r,this.Js),this.Js=r},o.prototype.iI=function(r){if(this.Js!=-1){var n=this.Js;return this.Js=this.Gm.get(n),this.Gm.set(n,r),this.fw.set(n,this.g.V(r)),n}return this.Gm==null&&(this.Gm=new h.ja(0),this.fw=new h.ja(0)),n=this.Gm.size,this.Gm.add(r),this.fw.add(this.g.V(r)),n},o.prototype.mz=function(r){return this.g.cd(this.dz(r))},o}();h.uY=k;var v=function(){function o(r){this.Ce=r,this.je=new h.zb,this.Pm=new h.zb,this.xH=0,this.Co=null,this.tA=-1}return o.prototype.compare=function(r,n,l){l=r.ka(l);var c=this.Ce.hb;if(this.tA==n)var p=this.xH;else this.Co=c.cc(n),this.Co==null?((r=c.g).fd(c.uz(n),this.je),this.Co=this.je,p=this.je.Me(this.Ce.Ah,0)):p=this.Co.Me(this.Ce.Ah,0),this.xH=p,this.tA=n;if((r=c.cc(l))==null){(r=c.g).fd(c.uz(l),this.Pm),r=this.Pm;var f=this.Pm.Me(this.Ce.Ah,0)}else f=r.Me(this.Ce.Ah,0);return p==f&&(n=c.Dv(n),l=c.Dv(l),(n=.5*((l=Math.min(n?this.Co.ma:this.Co.oa,l?r.ma:r.oa))+this.Ce.Ah))==this.Ce.Ah&&(n=l),p=this.Co.Me(n,0),f=r.Me(n,0)),p<f?-1:p>f?1:0},o.prototype.reset=function(){this.tA=-1},o}(),u=function(){function o(){this.Ym=this.Il=null,this.fb=new h.$j,this.fb.MP(),this.ae=new v(this),this.fb.Xo(this.ae)}return o.prototype.CQ=function(){var r=!1;if(this.hw&&(r=this.DQ()),this.g.ea(this.Y)==1){var n=this.g.Ob(this.Y);return r=this.g.qz(n),this.g.KB(n,!0),0>r&&(r=this.g.Ya(n),this.g.kJ(r),this.g.Yg(n,this.g.Na(r)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),n=this.g.Ob(this.Y);n!=-1;n=this.g.Sb(n))this.g.ir(n,this.Gl,0),this.g.ir(n,this.yo,-1);n=new h.ja(0),this.Ah=NaN;var l=new h.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var c=this.Il.sc(this.Il.ke);c!=-1;c=this.Il.lb(c)){var p=this.Il.getData(c);if(this.g.Hc(p,l),l.y!=this.Ah&&n.size!=0&&(r=this.vt(n)||r,this.ae.reset(),n.clear(!1)),n.add(p),this.Ah=l.y,this.ft==0)break}for(0<this.ft&&(r=this.vt(n)||r,n.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),n=this.g.Ob(this.Y);n!=-1;)if(this.g.uj(n,this.Gl)==3){for(this.g.KB(n,!0),l=n,n=this.g.uj(n,this.yo);n!=-1;)c=this.g.uj(n,this.yo),this.g.UT(this.Y,this.g.Sb(l),n),l=n,n=c;n=this.g.Sb(l)}else this.g.KB(n,!1),n=this.g.Sb(n);return this.g.xB(this.Gl),this.g.xB(this.yo),r},o.prototype.vt=function(r){return this.VV(r)},o.prototype.VV=function(r){var n=!1;this.hb==null&&(this.hb=new k(this.g)),this.Ym==null?(this.Ym=new h.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(r);for(var l=0,c=r.size;l<c;l++){var p=r.get(l);p!=-1&&this.jG(p,-1)}for(l=0;l<this.Ym.size&&0<this.ft;l++)if(r=this.Ym.get(l),p=this.hb.mz(this.fb.ka(r)),c=-1,this.g.uj(p,this.Gl)==0){p=this.fb.xe(r);for(var f,m=r;p!=-1;){var w=this.fb.ka(p),$=this.hb.mz(w),T=this.g.uj($,this.Gl);if(T!=0){c=$;break}m=p,p=this.fb.xe(p)}p==-1?(f=!0,p=m):(w=this.fb.ka(p),f=this.hb.Dv(w),p=this.fb.lb(p),f=!f);do{if(w=this.fb.ka(p),$=this.hb.mz(w),(T=this.g.uj($,this.Gl))==0&&(f!=this.hb.Dv(w)&&(n=this.g.Ya($),this.g.kJ(n),this.g.Yg($,this.g.Na(n)),n=!0),this.g.ir($,this.Gl,f?3:2),f||(m=this.g.uj(c,this.yo),this.g.ir(c,this.yo,$),this.g.ir($,this.yo,m)),this.ft--,this.ft==0))return n;c=$,m=p,p=this.fb.lb(p),f=!f}while(m!=r)}return n},o.prototype.UV=function(r){for(var n=0,l=r.size;n<l;n++){var c=r.get(n),p=this.g.Qa(c,this.to),f=this.g.Qa(c,this.Ts);if(p!=-1){var m=this.fb.ka(p);this.hb.mF(m),this.g.Sa(c,this.to,-1)}f!=-1&&(m=this.fb.ka(f),this.hb.mF(m),this.g.Sa(c,this.Ts,-1)),m=-1,p!=-1&&f!=-1?(this.fb.wd(p,-1),this.fb.wd(f,-1),r.set(n,-1)):m=p!=-1?p:f,m!=-1&&(this.jG(c,m)||this.fb.wd(m,-1),r.set(n,-1))}},o.prototype.jG=function(r,n){var l=new h.h,c=new h.h;this.g.Hc(r,l);var p=this.g.V(r);this.g.Hc(p,c);var f=!1;if(l.y<c.y){f=!0;var m=this.hb.iI(r);if(n==-1)var w=this.fb.addElement(m,-1);else w=n,this.fb.Uj(w,m);(m=this.g.Qa(p,this.to))==-1?this.g.Sa(p,this.to,w):this.g.Sa(p,this.Ts,w),p=this.g.cd(r),this.g.uj(p,this.Gl)==0&&this.Ym.add(w)}return p=this.g.Na(r),this.g.Hc(p,c),l.y<c.y&&(f=!0,m=this.hb.iI(p),n==-1?w=this.fb.addElement(m,-1):(w=n,this.fb.Uj(w,m)),(m=this.g.Qa(p,this.to))==-1?this.g.Sa(p,this.to,w):this.g.Sa(p,this.Ts,w),p=this.g.cd(r),this.g.uj(p,this.Gl)==0&&this.Ym.add(w)),f},o.W=function(r,n,l,c){var p=new o;return p.g=r,p.Y=n,p.Il=l,p.hw=c,p.CQ()},o.prototype.DQ=function(){var r=new h.ja(0),n=new h.ja(0),l=-1,c=-1,p=new h.h;p.Sc();for(var f=-1,m=-1,w=-1,$=new h.h,T=this.Il.sc(this.Il.ke);T!=-1;T=this.Il.lb(T)){var E=this.Il.getData(T);this.g.Hc(E,$);var O=this.g.cd(E);p.rb($)&&m==O?(c==-1&&(l=this.g.Fy(),c=this.g.Hd()),w==-1&&(w=n.size,this.g.Sa(f,c,w),n.add(1),this.g.uj(O,l)==-1&&(this.g.ir(O,l,f),r.add(O))),this.g.Sa(E,c,w),n.XW(n.Gc()+1)):(w=-1,p.N($)),f=E,m=O}if(r.size==0)return!1;for(p=new h.ja(0),f=new h.ja(0),m=0,w=r.size;m<w;m++){O=r.get(m);var P=this.g.uj(O,l);for(E=this.g.Qa(P,c),p.clear(!1),f.clear(!1),p.add(P),f.add(E),E=this.g.V(P);E!=P;E=this.g.V(E)){var L=E;if(($=this.g.Qa(L,c))!=-1)if(f.size==0)f.add($),p.add(L);else if(f.Gc()==$){T=p.Gc();var F=this.g.V(T);P=this.g.V(L),this.g.Cc(T,P),this.g.Dc(P,T),this.g.Cc(L,F),this.g.Dc(F,L),L=[!1],F=this.g.iG(this.Y,F,this.g.Ya(O),L),this.g.Sa(E,c,-1),L[0]&&this.g.Kf(O,P),E=this.g.Ka(O),E-=P=this.g.Ka(F),this.g.Xj(O,E),n.set($,n.get($)-1),n.get($)==1&&(n.set($,0),f.Jf(),p.Jf()),E=P=T}else p.add(E),f.add($)}}return this.g.xB(l),this.g.Ud(c),!0},o}();h.RL=u}(q||(q={})),function(h){var k=function(){function v(){}return v.prototype.jg=function(){this.KA=this.tb=null},v.prototype.get=function(){return this.KA},v.prototype.set=function(u){if(this.KA=u,u!=null)throw u.K()==322&&(this.tb=u),h.i.Ra()},v.prototype.create=function(u){if(u!=322)throw h.i.ga("Not Implemented");this.Qr()},v.prototype.Qr=function(){this.tb==null&&(this.tb=new h.zb),this.KA=this.tb},v}();h.jg=k}(q||(q={})),function(h){(h=h.SL||(h.SL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(q||(q={})),function(h){var k=function(u){this.bj=u,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},v=function(){function u(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new h.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return u.prototype.rB=function(o){if(o!=null){for(var r=0,n=o.length;r<n;r++)this.mW(o[r]);o.length=0}},u.prototype.mW=function(o){o.bj=null,this.Kq.push(o)},u.prototype.Qw=function(o){if(this.Kq.length===0)var r=new k(o);else(r=this.Kq[this.Kq.length-1]).bj=o,--this.Kq.length;return r},u.prototype.NR=function(o,r){return o==0?this.bt[r]:this.Aw[r]},u.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new h.jg);var o=this.HA[this.Ew];return this.Ew++,o},u.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},u.prototype.Qo=function(o){this.oo.push(this.Qw(o))},u.prototype.ql=function(o){return o==0?this.bt.length:this.Aw.length},u.prototype.Xp=function(o,r){return this.NR(o,r).bj},u.prototype.Fa=function(o,r){if(this.oo.length!=2)throw h.i.Ra();this.ra=o;var n=h.mc.ox(.01*o),l=!1,c=this.oo[0],p=this.oo[1];if(r||5&c.bj.Br(p.bj,o,!0)){if(c.bj.K()==322){var f=c.bj;if(p.bj.K()==322){r=p.bj;var m=h.zb.Yx(f,r,null,this.Hq,this.Dk,o);if(m==0)throw h.zb.Yx(f,r,null,this.Hq,this.Dk,o),h.i.Ra();o=Array(9),h.P.bv(o,null);for(var w=0;w<m;w++){var $=this.Hq[w],T=this.Dk[w],E=c.nB,O=1;$==0?(E=c.oB,O=c.mC):$==1&&(E=c.mB,O=c.lC);var P=p.nB,L=1;T==0?(P=p.oB,L=p.mC):T==1&&(P=p.mB,L=p.lC);var F=new h.h;E==P?(E=new h.h,f.ic($,E),$=new h.h,r.ic(T,$),L/=T=O+L,h.mc.JG(E,$,L,F),h.h.zc(F,E)+h.h.zc(F,$)>n&&(l=!0)):E>P?(f.ic($,F),$=new h.h,r.ic(T,$),h.h.zc(F,$)>n&&(l=!0)):(r.ic(T,F),E=new h.h,f.ic($,E),h.h.zc(F,E)>n&&(l=!0)),o[w]=F}for(c=0,p=-1,w=0;w<=m;w++)(L=w<m?this.Hq[w]:1)!=c&&(n=this.WA(),f.dh(c,L,n),p!=-1&&n.get().Ec(o[p]),w!=m&&n.get().Rc(o[w]),c=L,this.bt.push(this.Qw(n.get()))),p=w;for(f=[0,0,0,0,0,0,0,0,0],w=0;w<m;w++)f[w]=w;for(1<m&&this.Dk[0]>this.Dk[1]&&(L=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=L,w=f[0],f[0]=f[1],f[1]=w),c=0,p=-1,w=0;w<=m;w++)(L=w<m?this.Dk[w]:1)!=c&&(n=this.WA(),r.dh(c,L,n),p!=-1&&(c=f[p],n.get().Ec(o[c])),w!=m&&(c=f[w],n.get().Rc(o[c])),c=L,this.Aw.push(this.Qw(n.get()))),p=w;return l}}throw h.i.Ra()}return!1},u.prototype.Fz=function(o,r,n){if(r.copyTo(this.Cf),this.oo.length!=1)throw h.i.Ra();this.ra=o;var l=this.oo[0];if(n||l.bj.tu(r.D(),o,!0)){if(l.bj.K()!=322)throw h.i.Ra();var c=(o=l.bj).ge(r.D(),!1);this.Hq[0]=c;var p=l.nB;for(n=1,c==0?(p=l.oB,n=l.mC):c==1&&(p=l.mB,n=l.lC),l=new h.h,p==0?(p=new h.h,o.ic(c,p),r=r.D(),h.mc.JG(p,r,1/(n+1),l)):0<p?(l=new h.h,o.ic(c,l)):l=r.D(),n=0,c=-1,p=0;1>=p;p++){if((r=1>p?this.Hq[p]:1)!=n){var f=this.WA();o.dh(n,r,f),c!=-1&&f.get().Ec(l),p!=1&&f.get().Rc(l),n=r,this.bt.push(this.Qw(f.get()))}c=p}this.Cf.Db(l)}},u}();h.OC=v}(q||(q={})),function(h){var k=function(){function v(u){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=u,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new h.h}return v.prototype.wW=function(u){if(this.ib!=u.ib)throw h.i.Hb();this.Af=u.Af,this.Kd=u.Kd,this.gb=u.gb,this.El=u.El,this.cg=u.cg,this.Bm=u.Bm,this.tk=null},v.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw h.i.de();this.Kd++}return this.tk},v.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw h.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},v.prototype.xW=function(){this.Af=-1,this.Kd=0},v.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},v.prototype.Wb=function(u,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.ea()){var r=this.DM();if(u>=r&&u<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=u-r)}o=0<=o&&o<this.ib.ea()&&u>=this.ib.Ca(o)&&u<this.ib.Wc(o)?o:this.ib.nz(u),this.El=o+1,this.gb=o,this.Af=-1,this.Kd=u-this.ib.Ca(o),this.cg=this.Vx(o),this.ib.Ca(this.gb),this.ib.ec(this.gb)},v.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},v.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},v.prototype.Vx=function(u){if(this.ib.Bc())return 0;var o=1;return this.ib.ec(u)&&(o=0),this.ib.Ka(u)-o},v.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},v.prototype.EB=function(){this.Bm=!0},v.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},v.prototype.DM=function(){return this.ib.Ca(this.gb)},v.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},v.prototype.xm=function(){return this.Af==0},v.prototype.Sn=function(){return this.Af==this.cg-1},v.prototype.Ia=function(){return this.Kd<this.cg},v.prototype.zz=function(){return 0<this.Kd},v.prototype.Qf=function(){var u=new v(this.ib);return u.Af=this.Af,u.Kd=this.Kd,u.cg=this.cg,u.gb=this.gb,u.El=this.El,u.ib=this.ib,u.Bm=this.Bm,u},v.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw h.i.de();this.Af=this.Kd;var u=this.xb();this.ib.oc();var o=this.ib.Se,r=1;switch(o!=null&&(r=7&o.read(u)),o=this.ib.description,r){case 1:this.tb==null&&(this.tb=new h.zb),this.tk=this.tb;break;case 2:throw h.i.ga("internal error");default:throw h.i.Ra()}this.tk.Pf(o),r=this.kk(),this.ib.Hc(u,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(r,this.Fs),this.tk.Rc(this.Fs);for(var n=1,l=o.Ba;n<l;n++)for(var c=o.ld(n),p=h.sa.Wa(c),f=0;f<p;f++){var m=this.ib.Vc(c,u,f);this.tk.TB(c,f,m),m=this.ib.Vc(c,r,f),this.tk.JB(c,f,m)}},v.prototype.VS=function(){return this.gb==this.ib.ea()-1},v.prototype.Rn=function(){var u=this.ib.QR();return u!=null&&(7&u.read(this.Af))!=1},v}();h.TL=k}(q||(q={})),function(h){var k=function(){function v(u){u instanceof h.ba?(this.sH=u,this.za=-1,this.Gi=1):(this.qT=u.slice(0),this.za=-1,this.Gi=u.length)}return v.prototype.Ma=function(){return this.za},v.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},v.prototype.re=function(){},v}();h.$c=k}(q||(q={})),function(h){var k=function(){this.next=null},v=function(){function u(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return u.prototype.wX=function(o,r,n){this.ri=o,this.rl=r,this.Lh=this.Yl=null,this.Vq=0,this.qy=n,this.jn==null&&(this.jn=h.P.mg(384,0)),this.iK()},u.prototype.S=function(){return this.ri},u.prototype.da=function(){return this.rl},u.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},u.prototype.iK=function(){if(0<this.Vq){for(var o=0;o<this.rl;o++){for(var r=this.Yl[o];r!=null;){var n=r;r=r.next,n.next=null}this.Yl[o]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},u.prototype.dJ=function(o){for(this.fF=o==u.Bx,o=this.Nw;o<=this.Mw;o++)this.nN(),this.gN(o),this.UP();this.iK()},u.prototype.fy=function(o,r,n,l){if(r!=l){var c=1;if(r>l&&(c=o,o=n,n=c,c=r,r=l,l=c,c=-1),!(0>l||r>=this.rl)){0>o&&0>n?n=o=-1:o>=this.ri&&n>=this.ri&&(n=o=this.ri);var p=(n-o)/(l-r);l>this.rl&&(n=p*((l=this.rl)-r)+o),0>r&&(o=p*(0-r)+o,r=0);var f=Math.max(this.ri+1,8388607);-8388607>o?(r=(0-o)/p+r,o=0):o>f&&(r=(this.ri-o)/p+r,o=this.ri),-8388607>n?l=(0-o)/p+r:n>f&&(l=(this.ri-o)/p+r),(r=h.P.truncate(r))!=(l=h.P.truncate(l))&&((n=new k).x=h.P.truncate(4294967296*o),n.y=r,n.H=l,n.RP=h.P.truncate(4294967296*p),n.dir=c,this.Yl==null&&(this.Yl=h.P.mg(this.rl,null)),n.next=this.Yl[n.y],this.Yl[n.y]=n,n.y<this.Nw&&(this.Nw=n.y),n.H>this.Mw&&(this.Mw=n.H),this.Vq++)}}},u.prototype.nN=function(){if(this.Lh!=null){for(var o=!1,r=null,n=this.Lh;n!=null;)if(n.y++,n.y==n.H){var l=n;n=n.next,r!=null?r.next=n:this.Lh=n,l.next=null}else n.x+=n.RP,r!=null&&r.x>n.x&&(o=!0),r=n,n=n.next;o&&(this.Lh=this.aK(this.Lh))}},u.prototype.gN=function(o){if(!(o>=this.rl)){var r=this.Yl[o];if(r!=null){this.Yl[o]=null,r=this.aK(r),this.Vq-=this.bK,o=this.Lh;for(var n=!0,l=r,c=null;o!=null&&l!=null;)o.x>l.x?(n&&(this.Lh=l),n=l.next,l.next=o,c!=null&&(c.next=l),c=l,l=n):(n=o.next,o.next=l,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Lh==null&&(this.Lh=r)}}},u.$J=function(o,r){return 0>o?0:o>r?r:o},u.prototype.UP=function(){if(this.Lh!=null){for(var o=0,r=this.Lh,n=h.P.truncate(h.P.SG(r.x)),l=r.next;l!=null;l=l.next)if(o=this.fF?1^o:o+l.dir,l.x>r.x){var c=h.P.truncate(h.P.SG(l.x));o!=0&&(r=u.$J(n,this.ri),(n=u.$J(c,this.ri))>r&&r<this.ri&&(this.jn[this.Ql++]=r,this.jn[this.Ql++]=n,this.jn[this.Ql++]=l.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),r=l,n=c}}},u.prototype.aK=function(o){for(var r=0,n=o;n!=null;n=n.next)r++;if(this.bK=r,r==1)return o;this.Lf==null?this.Lf=h.P.mg(Math.max(r,16),null):this.Lf.length<r&&(this.Lf=h.P.mg(Math.max(r,2*this.Lf.length),null));var l=0;for(n=o;n!=null;n=n.next)this.Lf[l++]=n;for(r==2?this.Lf[0].x>this.Lf[1].x&&(o=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=o):u.vN(this.Lf,r,function(c,p){return c==p?0:c.x<p.x?-1:c.x>p.x?1:0}),o=this.Lf[0],this.Lf[0]=null,n=o,l=1;l<r;l++)n.next=this.Lf[l],n=this.Lf[l],this.Lf[l]=null;return n.next=null,o},u.vN=function(o,r,n){if(r==o.length)o.sort(n);else{var l=o.slice(0,0),c=o.slice(r);r=o.slice(0,r).sort(n),o.length=0,o.push.apply(o,l.concat(r).concat(c))}},u.Bx=0,u}();h.Ox=v}(q||(q={})),function(h){var k=function(){function v(){}return v.prototype.wi=function(u,o){var r=this.g.Qa(u,this.Rq);if(this.Fl==r&&(this.Fl=this.pe.lb(this.Fl)),this.jo==r&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,r),this.dk(u),o&&(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u){var n=this.g.V(u);if(n!=u){if((r=this.g.cd(n))==o)return void this.g.Kf(o,n);if((n=this.g.Na(u))!=u&&(r=this.g.cd(n))==o)return void this.g.Kf(o,n)}this.g.Kf(o,-1),this.g.Yg(o,-1)}},v.prototype.kD=function(){for(var u=!1,o=new h.h;;){this.Yh==null?(this.Yh=new h.ja(0),this.Bs=new h.ja(0),this.ye=new h.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var r=this.jo,n=0,l=!0;r!=this.Fl;){var c=this.pe.getData(r),p=new h.h;this.g.Hc(c,p),l&&(this.g.Hc(c,o),l=!1),p=this.g.Na(c);var f=this.g.V(c);this.g.Qa(p,this.Ag)!=-559038737&&(this.Yh.add(p),this.g.Sa(p,this.Ag,-559038737),this.Bs.add(c),this.ye.add(n++)),this.g.Qa(f,this.Ag)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.Ag,-559038737),this.Bs.add(c),this.ye.add(n++)),r=this.pe.lb(r)}if(2>this.Yh.size)break;var m=this;for(this.ye.Wd(0,this.ye.size,function(w,$){return m.kM(w,$)}),r=0,n=this.ye.size;r<n;r++)l=this.ye.get(r),l=this.Yh.get(l),this.g.Sa(l,this.Ag,r),p=new h.h,this.g.Hc(l,p);for(p=this.OM(o),r=0,n=this.ye.size;r<n;r++)(l=this.ye.get(r))!=-1&&(l=this.Yh.get(l),this.g.Sa(l,this.Ag,-1));if(!p)break;u=!0}return u},v.prototype.OM=function(u){for(var o=!1,r=!0;r;){r=!1;var n=0;this.ye.get(n)==-1&&(n=this.em(n));for(var l=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&l!=-1&&n!=l;c++){var f=this.ye.get(n);l=this.ye.get(l),f=this.Yh.get(f),l=this.Yh.get(l);var m=this.g.V(f);this.g.Fv(m,u)||(m=this.g.Na(f));var w=this.g.V(l);this.g.Fv(w,u)||(w=this.g.Na(l));var $=this.ru(m,f),T=this.ru(w,l),E=$?this.g.Na(m):this.g.V(m),O=T?this.g.Na(w):this.g.V(w),P=!1;(this.up(m)||this.up(w)||this.up(f)||this.up(l)||this.up(E)||this.up(O))&&(P=!0),!P&&this.g.hq(f,l)&&(P=!0,this.oD($,T,m,f,w,l)),!P&&this.g.hq(E,O)&&(P=!0,this.oD(!$,!T,m,E,w,O)),P&&(o=!0),r=r||P,n=this.em(n),l=this.em(n)}}if(!o)for(n=0,this.ye.get(n)==-1&&(n=this.em(n)),l=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&l!=-1&&n!=l;c++)f=this.ye.get(n),l=this.ye.get(l),f=this.Yh.get(f),l=this.Yh.get(l),m=this.g.V(f),this.g.Fv(m,u)||(m=this.g.Na(f)),w=this.g.V(l),this.g.Fv(w,u)||(w=this.g.Na(l)),$=this.ru(m,f),T=this.ru(w,l),E=$?this.g.Na(m):this.g.V(m),O=T?this.g.Na(w):this.g.V(w),this.yM($,T,f,m,E,l,w,O)&&(o=!0),n=this.em(n),l=this.em(n);return o},v.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new h.Hg().HU(this.hw,this.g,this.Y,this.od);var u=!1,o=!0;this.Ag=this.Rq=-1;var r=this.g.I(this.Y),n=new h.ja(0);n.Jb(r);for(var l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l))for(var c=this.g.Ya(l),p=0,f=this.g.Ka(l);p<f;p++)n.add(c),c=this.g.V(c);var m=this.g.ud.o,w=this.g.ud.Mf;this.g.wb.oc();var $=this.g.wb.Aa[0].o;for(n.Wd(0,r,function(E,O){var P=m[w*E],L=m[w*O],F=$[2*P];P=$[2*P+1];var z=$[2*L];return(F=P<(L=$[2*L+1])?-1:P>L?1:F<z?-1:F>z?1:0)==0&&(F=(E=m[w*E+3])<(O=m[w*O+3])?-1:E==O?0:1),F}),this.Rq=this.g.Hd(),this.pe=new h.lp,this.MA=this.pe.Rh(0),this.pe.hn(r),l=0;l<r;l++)c=n.get(l),p=this.pe.addElement(this.MA,c),this.g.Sa(c,this.Rq,p);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(u=!0);o;){o=!1,r=0,n=!1;do{n=!1,this.jo=-1,f=0,l=new h.h,p=new h.h;for(var T=this.pe.sc(this.MA);T!=-1;)c=this.pe.getData(T),this.jo!=-1?(this.g.Hc(c,p),l.rb(p)?f++:(l.N(p),this.Fl=T,0<f&&(c=this.kD())&&(n=!0,this.Fl!=-1&&(c=this.pe.getData(this.Fl),this.g.Hc(c,l))),this.jo=T=this.Fl,f=0)):(this.jo=T,this.g.Hc(this.pe.getData(T),l),f=0),T!=-1&&(T=this.pe.lb(T));if(this.Fl=-1,0<f&&(c=this.kD())&&(n=!0),10<r++)throw h.i.Ra();n&&this.BM(),this.YC()&&(n=!0),o=o||n&&!1,u=u||n}while(n)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),h.RL.W(this.g,this.Y,this.pe,this.hw)||u},v.prototype.ru=function(u,o){return this.g.V(o)!=u},v.prototype.yM=function(u,o,r,n,l,c,p,f){if(n==p)return this.dk(r),this.dk(c),!1;var m=this.g.Qa(r,this.Ag),w=this.g.Qa(l,this.Ag),$=this.g.Qa(c,this.Ag),T=this.g.Qa(f,this.Ag),E=[0,0,0,0];for((r=[0,0,0,0,0,0,0,0])[0]=0,E[0]=m,r[1]=0,E[1]=w,r[2]=1,E[2]=$,r[3]=1,E[3]=T,m=1;4>m;m++){for(w=E[m],$=r[m],T=m-1;0<=T&&E[T]>w;)E[T+1]=E[T],r[T+1]=r[T],T--;E[T+1]=w,r[T+1]=$}return E=0,r[0]!=0&&(E|=1),r[1]!=0&&(E|=2),r[2]!=0&&(E|=4),r[3]!=0&&(E|=8),(E==5||E==10)&&(u==o?u?(this.g.Cc(f,n),this.g.Dc(n,f),this.g.Cc(l,p),this.g.Dc(p,l)):(this.g.Dc(f,n),this.g.Cc(n,f),this.g.Dc(l,p),this.g.Cc(p,l)):u?(this.g.Dc(n,c),this.g.Cc(c,n),this.g.Dc(p,l),this.g.Cc(l,p)):(this.g.Cc(n,c),this.g.Dc(c,n),this.g.Cc(p,l),this.g.Dc(l,p)),!0)},v.prototype.oD=function(u,o,r,n,l,c){this.IY?this.QM():this.PM(u,o,r,n,l,c)},v.prototype.QM=function(){throw h.i.ga("not implemented.")},v.prototype.PM=function(u,o,r,n,l,c){if(u!=o)u?(this.g.Cc(r,l),this.g.Dc(l,r),this.g.Cc(c,n),this.g.Dc(n,c),this.xn(l,r),this.wi(l,!0),this.g.oi(l,!0),this.dk(r),this.xn(c,n),this.wi(c,!0),this.g.oi(c,!1)):(this.g.Cc(l,r),this.g.Dc(r,l),this.g.Cc(n,c),this.g.Dc(c,n),this.xn(l,r),this.wi(l,!0),this.g.oi(l,!1),this.dk(r),this.xn(c,n),this.wi(c,!0),this.g.oi(c,!0)),this.dk(n);else{var p=u?r:n,f=o?l:c;for(u=u?n:r,o=o?c:l,l=!1,this.g.Cc(p,f),this.g.Cc(f,p),this.g.Dc(u,o),this.g.Dc(o,u),c=o;c!=f;)r=this.g.Na(c),n=this.g.V(c),this.g.Dc(c,n),this.g.Cc(c,r),l=l||c==p,c=n;l||(r=this.g.Na(f),n=this.g.V(f),this.g.Dc(f,n),this.g.Cc(f,r)),this.xn(f,p),this.wi(f,!0),this.g.oi(f,!1),this.dk(p),this.xn(o,u),this.wi(o,!0),this.g.oi(o,!1),this.dk(u)}},v.prototype.YC=function(){for(var u=!1,o=this.g.Ob(this.Y);o!=-1;){for(var r=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l&&1<l;){var c=this.g.Na(r),p=this.g.V(r);this.g.hq(c,p)?(u=!0,this.wi(r,!1),this.g.qd(r,!0),this.wi(p,!1),this.g.qd(p,!0),r=c,n=0,l=this.g.Ka(o)):(r=p,n++)}if(2>this.g.Ka(o)){for(u=this.g.Ya(o),n=0,l=this.g.Ka(o);n<l;n++)this.wi(u,!1),u=this.g.V(u);o=this.g.ar(o),u=!0}else o=this.g.Sb(o)}return u},v.prototype.up=function(u){for(var o=!1;;){var r=this.g.V(u),n=this.g.Na(u);if(r==u)return this.wi(u,!0),this.g.oi(u,!1),!0;if(!this.g.hq(r,n)||(o=!0,this.dk(n),this.dk(r),this.wi(u,!0),this.g.oi(u,!1),this.xn(r,n),this.wi(r,!0),this.g.oi(r,!0),r==n))break;u=n}return o},v.prototype.BM=function(){for(var u=0,o=this.pe.sc(this.pe.ke);o!=-1;o=this.pe.lb(o)){var r=this.pe.getData(o);this.g.cj(r,-1)}for(var n=0,l=this.g.Ob(this.Y);l!=-1;)if((o=this.g.Ya(l))==-1||this.g.cd(o)!=-1)r=l,l=this.g.Sb(l),this.g.br(r);else{this.g.cj(o,l);var c=1;for(r=this.g.V(o);r!=o;r=this.g.V(r))this.g.cj(r,l),c++;this.g.fp(l,!1),this.g.Xj(l,c),this.g.Yg(l,this.g.Na(o)),n+=c,u++,l=this.g.Sb(l)}for(o=this.pe.sc(this.pe.ke);o!=-1;o=this.pe.lb(o))r=this.pe.getData(o),this.g.cd(r)==-1&&(l=this.g.iG(this.Y,r,r,null),n+=this.g.Ka(l),u++);for(this.g.Tl(this.Y,u),this.g.Vj(this.Y,n),u=0,n=this.g.md;n!=-1;n=this.g.ve(n))u+=this.g.I(n);this.g.XB(u)},v.prototype.em=function(u){for(var o=0,r=this.ye.size-1;o<r;o++)if(u=(u+1)%this.ye.size,this.ye.get(u)!=-1)return u;return-1},v.prototype.xn=function(u,o){var r=this.g.Qa(o,this.Rq),n=this.g.Qa(o,this.Ag);this.g.gC(u,o),this.g.Sa(o,this.Rq,r),this.g.Sa(o,this.Ag,n)},v.prototype.dk=function(u){var o=this.g.Qa(u,this.Ag);o!=-1&&(this.ye.set(o,-1),this.g.Sa(u,this.Ag,-1))},v.W=function(u,o,r,n,l){var c=new v;return c.g=u,c.Y=o,c.sA=r,c.hw=n,c.od=l,c.SM()},v.prototype.kM=function(u,o){var r=this.Yh.get(u),n=new h.h;this.g.Hc(r,n),r=new h.h;var l=this.Yh.get(o);return this.g.Hc(l,r),n.rb(r)?0:(l=this.Bs.get(u),u=new h.h,this.g.Hc(l,u),l=this.Bs.get(o),o=new h.h,this.g.Hc(l,o),(l=new h.h).vc(n,u),(n=new h.h).vc(r,o),h.h.pu(l,n))},v}();h.tn=k}(q||(q={})),function(h){var k;(k=h.VL||(h.VL={}))[k.Local=0]="Local",k[k.Geographic=1]="Geographic",k[k.Projected=2]="Projected",k[k.Image=3]="Image",k[k.Unknown=4]="Unknown",function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"}(h.OL||(h.OL={}));var v=function(){function u(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return u.prototype.Fc=function(){return this.fg},u.prototype.QF=function(){return 1},u.prototype.QW=function(o){this.hA=o},u.prototype.Yd=function(){if(this.hA!==null)return this.hA;var o=.001;return this.fg!=0?o=h.yr.xQ(this.fg):this.yh!=null&&(o=h.SC.yQ(this.yh)),o},u.prototype.wz=function(){return this.yh},u.prototype.Id=function(){return this.fg!=0?h.Uc.ah(h.yr.Ny(this.fg)):this.yh!=null?h.SC.zQ(this.yh):void 0},u.Tb=function(o){if(o.fg!=0){if(h.yr.US(o.fg)===!0)return 1;if(h.yr.WS(o.fg)===!0)return 2}return 4},u.prototype.cs=function(){var o=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=h.yr.AK(o),this.Jo!=-1?this.Jo:o)},u.create=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var r=new u;return r.fg=o,r},u.lP=function(o){if(o==null||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var r=new u;return r.yh=o,r},u.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.fg==o.fg&&(this.fg!=0||this.yh===o.yh)},u.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},u.prototype.dc=function(){if(this.rp!=="")return this.rp;var o=this.toString();if(Array.prototype.reduce)return this.rp="S"+o.split("").reduce(function(l,c){return(l=(l<<5)-l+c.charCodeAt(0))&l},0);var r=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)r=(r<<5)-r+o.charCodeAt(n),r&=r;return this.rp="S"+r},u.prototype.Mn=function(){return this.Yd(0)},u.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=h.iu.tP(this)},u.UN=2147483645,u.VN=9007199254740990,u}();h.Gg=v}(q||(q={})),function(h){var k=function(v){function u(){var o=v!==null&&v.apply(this,arguments)||this;return o.Li=null,o.NT=null,o.Jq=new h.UL,o.Go=null,o.lw=null,o}return wt(u,v),u.tP=function(o){var r=new u;if(r.fg=o.fg,r.Jo=o.Jo,r.UH=o.UH,r.yh=o.yh,r.yh!==""&&r.yh!==null){o=u.fM(r.yh);var n=u.dM(r.yh);r.Jq.Wx(o,n,h.ju.Integer64),r.ay(o),r.cy(n),r.fg=o.cs()}else o=u.eM(r.fg),r.ay(o),r.cy(null),r.Jq.Wx(o,null,h.ju.Integer64);return r},u.prototype.Yd=function(o){return this.Jq.Mn(o)},u.dM=function(o){if(0>=o.length)throw h.i.O();var r=null;try{r=h.IC.fromString(o)}catch{r=null}return r==null?null:u.XC(r,!0)},u.prototype.ay=function(o){this.Ld=o,this.Go=this.Ld.Id()},u.prototype.cy=function(o){this.FH=o,this.NT=this.FH!=null?this.FH.Go:null},u.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},u.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},u.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},u.prototype.rm=function(){return this.Ld.rm()},u.prototype.bf=function(){return this.Ld.bf()},u.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},u.prototype.Wp=function(){return this.Ld.Wp()},u.prototype.Yr=function(){return this.Ld.Yr()},u.prototype.mk=function(){return this.Ld.mk()},u.prototype.fS=function(o){return h.JC.Ky(this.Ld,o.Ld)},u.prototype.ol=function(){return this.Ld.ol()},u.prototype.Xr=function(){return this.Ld.Xr()},u.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},u.prototype.ih=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.ih(o),o},u.prototype.Le=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.uo},u.prototype.CR=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.BR(o),o},u.prototype.rv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.rv()},u.prototype.qv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.qv()},u.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},u.prototype.KQ=function(){return this.Ld.kv()},u.prototype.Sp=function(){return this.Go.getUnitFactor()},u.prototype.pz=function(o){return this.Jq.pz(o)},u.prototype.tc=function(){var o=this.Tb();if(o==1)return this;if(o==3)return this.Li.hk().tc();if(o==0||o===4)throw h.i.ga("invalid call");if(this.lw!==null)return this.lw;if((o=this.gh().getGeogcs())==null)throw h.i.Ra();return this.lw=u.XE(o,this.Jq.QF())},u.XE=function(o,r){if(o==null)throw h.i.O("null pointer.");var n=new u;return o=u.ou(o,!0),n.Jq.Wx(o,null,r),n.ay(o),n.cy(null),n.fg=o.cs(),n},u.prototype.Tb=function(){var o=this.gh();if(o!=null)switch(o.getType()){case h.Tc.PE_TYPE_GEOGCS:return 1;case h.Tc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.kv=function(){return this.Ld.kv()},u.ou=function(o,r){var n=o.getCode();if(0>=n&&0<(n=h.qf.getCode(o))){if((o=h.qf.coordsys(n))==null)throw h.i.O("Text to wkid mapping had failed: "+n);return u.ou(o,r)}if(r&&0<n&&(r=u.qx[n]))return r;r=h.Ab.zv(o,n,!1);var l=u.gK[r];return l||(o=0>=n?o:h.qf.coordsys(n),o=new h.JC(o),u.gK[r]=o,0<n&&(u.qx[n]=o),o)},u.eM=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var r=u.qx[o];if(r!=null)return r;if((r=h.qf.coordsys(o))==null)throw h.i.O("Invalid or unsupported wkid: "+o);return(r=u.ou(r,!1)).cs()!=o&&(u.qx[o]=r),r},u.fM=function(o){if(o==null||o===void 0||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var r=null;try{r=h.qf.fromString(h.Tc.PE_TYPE_COORDSYS,o)}catch(n){throw h.i.O("Cannot create SpatialReference from text. "+n.message)}if(r===null)throw h.i.O("Cannot create SpatialReference from text. ");return u.ou(r,!0)},u.XC=function(o,r){var n,l=o.getCode();if(0>=l&&0<(l=h.qf.getCode(o))){if((l=h.qf.vertcs(l))===null)throw h.i.O();return u.XC(l,r)}if(r&&0<l&&(r=u.fK[l])||(o=h.Ab.zv(o,l,!1),r=u.hK[o]))return r;if(0>=l||(n=h.qf.vertcs(l)),n===null)throw h.i.O();return n=new h.KL(n),u.hK[o]=n,0<l&&(u.fK[l]=n),n},u.nI=function(o,r){if(r===null||r.B())return null;var n=new h.l;if(r!==null&&o.Tb()!=1){var l=o.tc(),c=l.gh();o=h.xr.Pr(o,l,null,null),(r=h.Gx.local().W(r,o,null)).A(n)}else c=o.gh(),r.A(n);return r=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new h.GC(n.v,n.G,n.C,n.H,r,c)},u.gD=function(o){var r={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var l=o[n],c={HY:!1,VY:"",UY:-1,geogtran:null};l.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var p=l.getGeogtran().getCode();-1<p?c.wkid=p:c.wkt=l.getGeogtran().toString(),r.steps.push(c)}return r},u.SR=function(o,r,n,l){return n===void 0&&(n=null),n=u.nI(l,n),o=h.np.getGTlist(o.gh(),r.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,n,1),r=null,o&&0<o.length&&(r=this.gD(o[0]),h.Lx.destroy(o)),n!==null&&n.destroy(),r},u.TR=function(o,r,n,l){var c;if(n===void 0&&(n=null),l===void 0&&(l=null),c===void 0&&(c=30),n=u.nI(l,n),o=h.np.getGTlist(o.gh(),r.gh(),2,h.np.PE_GTLIST_OPTS_COMMON,n,c),r=[],o&&0<o.length){for(c=0;c<o.length;c++)r.push(this.gD(o[c]));h.Lx.destroy(o)}return n!==null&&n.destroy(),r},u.qx={},u.gK={},u.fK={},u.hK={},u}(h.Gg);h.iu=k}(q||(q={})),function(h){var k,v;(v=k=h.ju||(h.ju={}))[v.Integer32=0]="Integer32",v[v.Integer64=1]="Integer64",v[v.FloatingPoint=2]="FloatingPoint";var u=function(){function o(){this.sp()}return o.prototype.assign=function(r){this.Hm=r.Hm,this.Im=r.Im,this.Rj=r.Rj,this.nA=r.nA,this.Ho=r.Ho,this.mA=r.mA,this.Kk=r.Kk,this.Oq=r.Oq,this.Nq=r.Nq,this.Tm=r.Tm},o.prototype.QF=function(){return this.Tm},o.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=k.FloatingPoint},o.prototype.Wx=function(r,n,l){if(this.sp(),this.Tm=l,l!=k.FloatingPoint){var c=new h.l;r.cR(c),this.Hm=c.v,this.Im=c.G}else this.Im=this.Hm=-17976931348623157e292;(c=r.Re.getType())==h.Tc.PE_TYPE_GEOGCS?(c=(l==k.Integer64?1e-9:1/18e5)*r.bf(),this.Rj=1/c):c==h.Tc.PE_TYPE_PROJCS&&(c=(l==k.Integer64?1e-4:.001)*r.rm(),this.Rj=1/c),n!=null?(c=(l==k.Integer32?.001:1e-4)*n.DH,this.Ho=1/c):this.Ho=1e4,this.TM(),this.Kk=r.uw,this.Oq=n!=null?.001*n.DH:.001,this.Nq=2220446049250313e-29},o.prototype.TM=function(){if(this.Tm!=k.FloatingPoint){var r=this.Tm==k.Integer64?h.Gg.VN:h.Gg.UN,n=r/this.Rj,l=this.Hm+n,c=h.P.truncate((l-this.Hm)*this.Rj);c>r&&(this.Rj=r/(l-this.Hm)),n=this.Im+n,(c=h.P.truncate((n-this.Im)*this.Rj))>r&&(this.Rj=r/(n-this.Im))}},o.prototype.WB=function(r){switch(r){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},o.prototype.Mn=function(r){switch(r){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},o.prototype.pz=function(r){if(this.Tm==k.FloatingPoint)return 0;switch(r){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},o.prototype.toString=function(){var r="SRPD [m_toleranceXY: "+this.Kk.toString();return(r=(r=(r=(r=(r=(r=(r=(r=(r=r+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},o}();h.UL=u}(q||(q={})),function(h){function k(l,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function v(l,c,p){return l=l/6378137*57.29577951308232,p?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function u(l,c,p){var f=l.Qf();if(l.K()===33)c=c(f.Ng(),f.kh()),f.Db(c[0],c[1]);else if(l.K()===197){var m=c(l.gs(),l.js(),p);c=c(l.fs(),l.hs(),p),f.L(m[0],m[1],c[0],c[1])}else for(m=new h.h,l=0;l<f.I();l++){f.D(l,m);var w=c(m.x,m.y,p);m.na(w[0],w[1]),f.Db(l,m)}return f}function o(l){return u(l,v,!0)}function r(l){return u(l,k,!0)}var n=Math.PI/180;h.PK=function(){function l(){}return l.xu=function(c){var p=Math.sqrt(.006694379990197414),f=Math.sin(c.y*n);return h.h.construct(6378137*c.x*n,3.1677196636462314e6*(f/(1-.006694379990197414*f*f)-1/(2*p)*Math.log((1-p*f)/(1+p*f))))},l.Ux=function(c,p,f,m){var w=.0033528106647474805,$=Math.sin(f);f=Math.cos(f);var T=(1-w)*Math.tan(c),E=T*(c=1/Math.sqrt(1+T*T)),O=Math.atan2(T,f),P=(T=c*$)*T,L=1-P,F=27233160610754688e-5*L/4040829998466145e-2,z=1+F/16384*(4096+F*(F*(320-175*F)-768)),R=F/1024*(256+F*(F*(74-47*F)-128));F=m/(635675231424518e-8*z);for(var G,H,B,te=2*Math.PI;1e-12<Math.abs(F-te);)B=Math.cos(2*O+F),te=F,F=m/(635675231424518e-8*z)+R*(G=Math.sin(F))*(B+R/4*((H=Math.cos(F))*(2*B*B-1)-R/6*B*(4*G*G-3)*(4*B*B-3)));return m=E*G-c*H*f,L=w/16*L*(4+w*(4-3*L)),h.h.construct((p+(Math.atan2(G*$,c*H-E*G*f)-(1-L)*w*T*(F+L*G*(B+L*H*(2*B*B-1)))))/n,Math.atan2(E*H+c*G*f,(1-w)*Math.sqrt(P+m*m))/n)},l.HM=function(c,p,f,m){var w=.0033528106647474805,$=m-p,T=Math.atan((1-w)*Math.tan(c)),E=Math.atan((1-w)*Math.tan(f)),O=Math.sin(T);T=Math.cos(T);var P=Math.sin(E);E=Math.cos(E);var L=$,F=1e3;do{var z=Math.sin(L),R=Math.cos(L),G=Math.sqrt(E*z*E*z+(T*P-O*E*R)*(T*P-O*E*R));if(G===0)return 0;R=O*P+T*E*R;var H=Math.atan2(G,R),B=T*E*z/G,te=1-B*B;z=R-2*O*P/te,isNaN(z)&&(z=0);var Q=w/16*te*(4+w*(4-3*te)),ne=L;L=$+(1-Q)*w*B*(H+Q*G*(z+Q*R*(2*z*z-1)))}while(1e-12<Math.abs(L-ne)&&0<--F);return F===0?(O=m-p,{azimuth:Math.atan2(Math.sin(O)*Math.cos(f),Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(m-p))}):(p=(c=27233160610754688e-5*te/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2(E*Math.sin(L),T*P-O*E*Math.cos(L)),TQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(H-p*G*(z+p/4*(R*(2*z*z-1)-p/6*z*(4*G*G-3)*(4*z*z-3)))),TY:Math.atan2(T*Math.sin(L),T*P*Math.cos(L)-O*E)})},l.eQ=function(c){var p=c.hasAttribute(1),f=c.hasAttribute(2),m=[],w=c.ea(),$=null,T=null;p&&($=c.vb(1)),f&&(T=c.vb(2));for(var E=new h.h,O=0;O<w;O++){for(var P=c.Ca(O),L=c.Ka(O),F=0,z=0,R=NaN,G=NaN,H=NaN,B=NaN,te=c.ec(O),Q=[],ne=P;ne<P+L;ne++){c.D(ne,E),B=H=NaN;var pe=[E.x,E.y];p&&(H=$.get(ne),pe.push(H)),f&&(w=T.get(ne),pe.push(B)),ne==P&&te&&(F=E.x,z=E.y,R=H,G=B),Q.push(pe)}!te||F==E.x&&z==E.y&&(!p||isNaN(R)&&isNaN(H)||R==H)&&(!f||isNaN(G)&&isNaN(B)||G==B)||Q.push(Q[0].slice(0)),m.push(Q)}return m},l.Ry=function(c,p){c=l.eQ(c),637.100877141506>p&&(p=637.100877141506);for(var f,m=[],w=0;w<c.length;w++){var $,T,E=c[w];m.push(f=[]),f.push([E[0][0],E[0][1]]);var O=E[0][0]*n,P=E[0][1]*n;for($=0;$<E.length-1;$++){var L=E[$+1][0]*n,F=E[$+1][1]*n;if(O!==L||P!==F){L=(F=l.HM(P,O,F,L)).azimuth;var z=(F=F.TQ)/p;if(1<z){for(T=1;T<=z-1;T++){var R=l.Ux(P,O,L,T*p);f.push([R.x,R.y])}T=l.Ux(P,O,L,(F+Math.floor(z-1)*p)/2),f.push([T.x,T.y])}P=l.Ux(P,O,L,F),f.push([P.x,P.y]),O=P.x*n,P=P.y*n}}}return{lJ:m}},l.SQ=function(c){for(var p=[],f=0;f<c.length;f++){var m=c[f];m=l.Ry(m,1e4),p.push(m)}c=[];for(var w=0;w<p.length;w++){m=p[w];var $=0;for(f=0;f<m.lJ.length;f++){var T,E=m.lJ[f],O=l.xu(h.h.construct(E[0][0],E[0][1])),P=l.xu(h.h.construct(E[E.length-1][0],E[E.length-1][1])),L=P.x*O.y-O.x*P.y;for(T=0;T<E.length-1;T++)O=l.xu(h.h.construct(E[T+1][0],E[T+1][1])),L+=(P=l.xu(h.h.construct(E[T][0],E[T][1]))).x*O.y-O.x*P.y;$+=L}$/=1,c.push($/-2)}return c},l}(),h.cb=function(){function l(){}return l.sB=function(c,p,f,m,w,$,T){l.bD[c.dc()]=p,isNaN(f)==0&&(l.hD[c.dc()]=f),isNaN(m)==0&&(l.uD[c.dc()]=m),isNaN(w)==0&&(l.WC[c.dc()]=w),l.iD[c.dc()]=$,T!==null&&(l.jD[c.dc()]=T)},l.Yw=function(c,p,f){l.nD[c.dc()+"-"+p.dc()]=f},l.tc=function(c){if((c=l.bD[c.dc()])==null)throw h.i.Fe();return c},l.bf=function(c){if((c=l.hD[c.dc()])==null)throw h.i.Fe();return c},l.xv=function(c){if((c=l.uD[c.dc()])==null)throw h.i.Fe();return c},l.gv=function(c){if((c=l.WC[c.dc()])==null)throw h.i.Fe();return c},l.ih=function(c){if((c=l.jD[c.dc()])==null)throw h.i.Fe();return h.l.construct(c[0],c[1],c[2],c[3])},l.Xc=function(c){if((c=l.iD[c.dc()])==null)throw h.i.Fe();return c},l.Bh=function(c,p,f){if(p.Nb(f))return c;var m=l.nD[p.dc()+"-"+f.dc()];if(m!==void 0)return m(c,p,f);throw h.i.Fe()},l.wt=function(){throw h.i.Fe()},l.XQ=function(){throw h.i.Fe()},l.ZV=function(){throw h.i.Fe()},l.ol=function(){throw h.i.Fe()},l.nW=function(){var c=h.Gg.create(102100),p=h.Gg.create(3857),f=h.Gg.create(4326);h.cb.sB(c,f,NaN,NaN,NaN,!1,null),h.cb.sB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.sB(p,f,NaN,NaN,NaN,!1,null),h.cb.Yw(c,f,o),h.cb.Yw(f,c,r),h.cb.Yw(p,f,o),h.cb.Yw(f,p,r)},l.bD=[],l.hD=[],l.uD=[],l.WC=[],l.iD=[],l.jD=[],l.nD=[],l}()}(q||(q={})),q.cb.nW(),function(h){var k=function(){function v(u){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=u}return v.prototype.kd=function(u){u<this.Dl?(this.o[u*this.Mf]=this.ko,this.ko=u):this.Dl--,this.size--},v.prototype.U=function(u,o){return this.o[u*this.Mf+o]},v.prototype.T=function(u,o,r){this.o[u*this.Mf+o]=r},v.prototype.De=function(){var u=this.ko;if(u==-1){if(this.Dl==this.Jg){if(2147483647<(u=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(u=2147483647),u==this.Jg)throw h.i.de();this.yz(u)}u=this.Dl,this.Dl++}else this.ko=this.o[u*this.Mf];this.size++;for(var o=u*this.Mf;o<u*this.Mf+this.Mf;o++)this.o[o]=-1;return u},v.prototype.Nl=function(u){var o=this.ko;if(o==-1){if(this.Dl==this.Jg){if(2147483647<(o=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(o=2147483647),o==this.Jg)throw h.i.de();this.yz(o)}o=this.Dl,this.Dl++}else this.ko=this.o[o*this.Mf];this.size++;for(var r=o*this.Mf,n=0;n<u.length;n++)this.o[r+n]=u[n];return o},v.prototype.oj=function(u){this.ko=-1,this.size=this.Dl=0,u&&(this.o=null,this.Jg=0)},v.prototype.Ee=function(u){u>this.Jg&&this.yz(u)},v.prototype.sx=function(u,o){u*=this.Mf,o*=this.Mf;for(var r=0;r<this.Mf;r++){var n=this.o[o+r];this.o[o+r]=this.o[u+r],this.o[u+r]=n}},v.prototype.bC=function(u,o,r){var n=this.o[this.Mf*o+r];this.o[this.Mf*o+r]=this.o[this.Mf*u+r],this.o[this.Mf*u+r]=n},v.GG=function(u){return 0<=u},v.prototype.yz=function(u){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.Mf*u);o.set(this.o,0),this.o=o,this.Jg=u},v}();h.ad=k}(q||(q={})),function(h){var k,v;(v=k||(k={}))[v.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",v[v.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",v[v.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",v[v.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=function(){function r(n){this.Ce=n,this.Ah=NaN,this.$G=new h.jg,this.aH=new h.jg,this.os=new h.Oc,this.ps=new h.Oc}return r.prototype.compare=function(n,l,c){if(n=n.ka(c),this.Ce.kB(l,this.$G),this.Ce.kB(n,this.aH),l=this.$G.get(),n=this.aH.get(),this.os.L(l.ta,l.qa),this.ps.L(n.ta,n.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;c=l.oa==l.ma;var p=n.oa==n.ma;if(c||p){if(c&&p)return 0;if(l.oa==n.oa&&l.ta==n.ta)return c?1:-1;if(l.ma==n.ma&&l.qa==n.qa)return c?-1:1}return(c=l.Me(this.Ah,this.os.pa))==(p=n.Me(this.Ah,this.ps.pa))&&((p=.5*((c=Math.min(l.ma,n.ma))+this.Ah))==this.Ah&&(p=c),c=l.Me(p,this.os.pa),p=n.Me(p,this.ps.pa)),c<p?-1:c>p?1:0},r.prototype.WJ=function(n){this.Ah=n},r}(),o=function(){function r(n){this.ib=n,this.RH=new h.jg,this.Cf=new h.h,this.rA=new h.Oc}return r.prototype.fX=function(n){this.Cf.N(n)},r.prototype.compare=function(n,l){return this.ib.kB(n.ka(l),this.RH),n=this.RH.get(),this.rA.L(n.ta,n.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(n=n.Me(this.Cf.y,this.Cf.x),this.Cf.x<n?-1:this.Cf.x>n?1:0)},r}();k=function(){function r(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new h.Nd,this.XN=2147483647,this.WN=h.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return r.prototype.ty=function(n){this.gA=n},r.prototype.$m=function(){this.he==null&&(this.he=new h.ad(8));var n=this.he.De();return this.he.T(n,1,0),n},r.prototype.qU=function(){this.Lc==null&&(this.Lc=new h.ad(8));var n=this.Lc.De();this.Lc.T(n,2,0),this.Lc.T(n,3,0);var l=this.Lc.De();return this.Lc.T(l,2,0),this.Lc.T(l,3,0),this.EJ(n,l),this.EJ(l,n),n},r.prototype.hI=function(){this.ze==null&&(this.ze=new h.ad(8));var n=this.ze.De();return this.ze.T(n,2,0),n},r.prototype.OW=function(n,l){this.he.T(n,7,l)},r.prototype.on=function(n,l){this.he.T(n,2,l)},r.prototype.NW=function(n,l){this.he.T(n,1,l)},r.prototype.gX=function(n,l){this.he.T(n,3,l)},r.prototype.dX=function(n,l){this.he.T(n,4,l)},r.prototype.er=function(n,l){this.he.T(n,5,l)},r.prototype.$Q=function(n){return this.he.U(n,5)},r.prototype.MW=function(n,l){this.he.T(n,6,l)},r.prototype.YM=function(n,l){this.MW(l,n)},r.prototype.DJ=function(n,l){this.Lc.T(n,1,l)},r.prototype.EJ=function(n,l){this.Lc.T(n,4,l)},r.prototype.Vl=function(n,l){this.Lc.T(n,5,l)},r.prototype.Ul=function(n,l){this.Lc.T(n,6,l)},r.prototype.VW=function(n,l){this.Lc.T(n,2,l)},r.prototype.cx=function(n,l){this.Lc.T(n,3,l)},r.prototype.GF=function(n){return this.Lc.U(n,3)},r.prototype.Ht=function(n,l){this.Lc.T(n,7,l)},r.prototype.zK=function(n,l){if(this.om(n)!=-1)for(l=l?-1:n,n=this.om(n);n!=-1;n=this.ls(n))this.g.Sa(this.vj(n),this.Eq,l)},r.prototype.xx=function(n,l){n!=-1&&(this.zK(n,l),this.zK(this.ya(n),l))},r.prototype.Et=function(n,l){this.ze.T(n,1,l)},r.prototype.Xg=function(n,l){this.ze.T(n,2,l)},r.prototype.ln=function(n,l){this.ze.T(n,3,l),this.IW(n,this.ZQ(l)),this.HW(l,n)},r.prototype.HW=function(n,l){this.ze.T(n,4,l)},r.prototype.IW=function(n,l){this.ze.T(n,5,l)},r.prototype.yJ=function(n,l){this.ze.T(n,6,l)},r.prototype.wJ=function(n,l){this.ze.T(n,7,l)},r.prototype.vJ=function(n,l){this.$n.write(n,l)},r.prototype.xJ=function(n,l){this.fA.write(n,l)},r.prototype.gY=function(n){var l=0,c=0,p=this.vF(n),f=new h.h,m=new h.h,w=new h.h;this.$r(p,f),m.N(f);var $=p;do this.nm($,w),c+=h.h.ub(m,w),this.$e(this.ya($))!=n&&(l+=(w.x-f.x-(m.x-f.x))*(w.y-f.y+(m.y-f.y))*.5),m.N(w),$=this.kc($);while($!=p);this.$n.write(n,l),this.fA.write(n,c)},r.prototype.KU=function(n,l){var c=new u(this),p=new h.$j;p.Ee(h.P.truncate(this.xa/2)),p.Xo(c);for(var f=new h.ja(0),m=this.bh(),w=null,$=0,T=new h.h,E=this.Oe;E!=-1;E=this.Tf(E)){if(!(255&++$)&&l!=null&&!l.progress(-1,-1))throw h.i.RC();var O=this.Je(E);if(O!=-1){if(f.Dh(0),!this.cY(p,m,f,O)){this.D(E,T),c.WJ(T.y);var P=O;do{var L=this.Bb(P,m);L!=-1&&(p.wd(L,-1),this.Kb(P,m,-2)),P=this.kc(this.ya(P))}while(O!=P);P=O;do(L=this.Bb(P,m))==-1&&(L=p.addElement(P,-1),f.add(L)),P=this.kc(this.ya(P));while(O!=P)}for(O=f.size-1;0<=O;O--)L=f.get(O),P=p.ka(L),this.Kb(this.ya(P),m,L),this.JU(p,L,n)}else this.Yy(E)==-1&&(w==null&&(w=new o(this)),this.D(E,T),w.fX(T),P=p.DW(w),O=this.Jl,P!=-1&&(L=p.ka(P),this.$e(L)==this.$e(this.ya(L))&&(L=this.JF(p,P)),L!=-1&&(O=this.$e(L))),this.YM(O,E))}this.Lg(m)},r.prototype.JU=function(n,l,c){var p=n.ka(l),f=this.$e(p);if(this.In(f)==-1){var m=this.JF(n,l),w=this.ya(p),$=this.$e(w);this.Mp(f),this.Mp($);var T=this.In(f),E=this.In($);if(m==-1&&T==-1&&($==f?(this.ln($,this.Jl),T=E=this.Jl):(E==-1&&(this.ln($,this.Jl),E=this.Jl),this.ln(f,$),T=$)),m!=-1){var O=this.$e(m);E==-1&&(0>=this.Mp(O)?(E=this.In(O),this.ln($,E)):(this.ln($,O),E=O),$==f&&(T=E))}T==-1&&this.dY(f,$),c==0?this.eW(n,l,p,m,f,$):c==5?this.fW(n,l,p,w,f,$):c==4&&this.dW(p,m,f,$)}},r.prototype.eW=function(n,l,c,p,f,m){var w=this.jk(f);if(p!=-1){var $=this.jk(m),T=this.jk(this.$e(p));p=w&$&T,T^=T&this.fh(c),(T|=p)!=0&&(this.Xg(m,$|T),this.Xg(f,T|w),w=w||T)}for(l=n.lb(l);l!=-1&&(p=n.ka(l),c=this.$e(this.ya(p)),f=this.jk(c),m=this.fh(p),$=this.$e(p),p=f&(T=this.jk($))&w,w^=w&m,(w|=p)!=0);l=n.lb(l))this.Xg(c,f|w),this.Xg($,T|w)},r.prototype.fW=function(n,l,c,p,f,m){if(f!=m){c=this.Bb(c,this.eg),c+=this.Bb(p,this.eg),p=0;var w=new h.ja(0),$=new h.ja(0);$.add(0);for(var T=n.sc(-1);T!=l;T=n.lb(T)){var E=n.ka(T),O=this.ya(E),P=this.$e(E),L=this.$e(O);if(P!=L){if(E=this.Bb(E,this.eg),p+=E+=this.Bb(O,this.eg),O=!1,w.size!=0&&w.Gc()==L&&($.Jf(),w.Jf(),O=!0),this.In(L)==-1)throw h.i.Ra();O&&this.In(L)==P||($.add(p),w.add(P))}}p+=c,w.size!=0&&w.Gc()==m&&($.Jf(),w.Jf()),p!=0?$.Gc()==0&&(n=this.g.md,n=this.Ma(n),this.Xg(f,n)):$.Gc()!=0&&(n=this.g.md,n=this.Ma(n),this.Xg(f,n))}},r.prototype.dW=function(n,l,c,p){var f=this.Ma(this.g.md);if(l==-1)this.Xg(p,this.Io),1&(n=this.Bb(n,this.yg))?this.Xg(c,f):this.Xg(c,this.Io);else{var m=this.jk(p);m==0?(m=this.jk(this.$e(l)),this.Xg(p,m),1&(n=this.Bb(n,this.yg))?this.Xg(c,m==f?this.Io:f):this.Xg(c,m)):1&(n=this.Bb(n,this.yg))?this.Xg(c,m==f?this.Io:f):this.Xg(c,m)}},r.prototype.cY=function(n,l,c,p){var f=p,m=-1,w=-1,$=0;do{if($==2)return!1;var T=this.Bb(f,l);if(T!=-1){if(m!=-1)return!1;m=T}else{if(w!=-1)return!1;w=f}$++,f=this.kc(this.ya(f))}while(p!=f);return w!=-1&&m!=-1&&(this.Kb(n.ka(m),l,-2),n.Uj(m,w),c.add(m),!0)},r.prototype.dY=function(n,l){var c=this.Mp(n);if(c!=0){var p=this.Mp(l);0<c&&0>p||0>c&&0<p?this.ln(n,l):(l=this.In(l))!=-1&&this.ln(n,l)}},r.prototype.qP=function(n,l){this.Eq=this.g.Hd();for(var c=0,p=l.size;c<p;c++){var f=l.get(c),m=this.g.Qa(f,this.Em),w=this.g.Sf(this.g.cd(f)),$=this.g.jc(w);if(h.ba.Ic($)){var T=this.g.V(f);if(T!=-1){var E=this.g.Qa(T,this.Em);if(m!=E){var O=this.qU(),P=this.ya(O),L=this.lh.De();this.lh.T(L,0,f),this.lh.T(L,1,-1),this.Ht(O,L),this.DJ(O,m),(L=this.Je(m))==-1?(this.on(m,O),this.Vl(O,P),this.Ul(P,O)):(m=this.ue(L),this.Vl(L,P),this.Ul(P,L),this.Ul(m,O),this.Vl(O,m)),this.DJ(P,E),(m=this.Je(E))==-1?(this.on(E,P),this.Ul(O,P),this.Vl(P,O)):(E=this.ue(m),this.Vl(m,O),this.Ul(O,m),this.Ul(E,P),this.Vl(P,E)),w=this.Ma(w),n==0?(this.Kb(P,this.be,0),this.Kb(O,this.be,$==1736?w:0)):n==5?(E=new h.h,this.g.D(f,E),f=new h.h,this.g.D(T,f),m=T=0,0>E.compare(f)?T=1:m=-1,this.Kb(P,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.eg,T),this.Kb(P,this.eg,m)):n==7?(this.Kb(P,this.be,this.Io),this.Kb(O,this.be,$==1736?w:0)):n==4&&(this.Kb(P,this.be,0),this.Kb(O,this.be,0),this.Kb(O,this.yg,1),this.Kb(P,this.yg,1)),$=$==1736?this.WN:0,this.cx(O,w|$),this.cx(P,w|$)}}}}},r.prototype.QT=function(n,l){var c=this.om(l);if(c!=-1){var p=this.om(n);this.lh.T(c,1,p),this.Ht(n,c),this.Ht(l,-1)}n=this.ya(n),l=this.ya(l),(c=this.om(l))!=-1&&(p=this.om(n),this.lh.T(c,1,p),this.Ht(n,c),this.Ht(l,-1))},r.prototype.EX=function(n){function l(H,B){return p.CO(H,B)}var c=new h.ja(0);c.Jb(10);for(var p=this,f=this.Oe;f!=-1;f=this.Tf(f)){c.clear(!1);var m=this.Je(f);if(m!=-1){var w=m;do c.add(w),w=this.kc(this.ya(w));while(w!=m);if(1<c.size){if(w=!0,2<c.size)c.Wd(0,c.size,l),c.add(c.get(0));else if(0<this.BO(c.get(0),c.get(1))){var $=c.get(0);c.set(0,c.get(1)),c.set(1,$)}else w=!1;for(var T=$=c.get(0),E=this.vf(T),O=this.ya(T),P=-1,L=1,F=c.size;L<F;L++){var z=c.get(L),R=this.ya(z),G=this.lk(R);if(G==E&&z!=T){if(n==0)P=this.GF(T)|this.GF(z),this.cx(T,P),this.cx(O,P),this.Kb(T,this.be,this.Bb(T,this.be)|this.Bb(z,this.be)),this.Kb(O,this.be,this.Bb(O,this.be)|this.Bb(R,this.be));else if(this.eg!=-1)P=this.Bb(T,this.eg)+this.Bb(z,this.eg),R=this.Bb(O,this.eg)+this.Bb(R,this.eg),this.Kb(T,this.eg,P),this.Kb(O,this.eg,R);else{if(n==7)return void(this.Pi=new h.Nd(5,f,-1));this.yg!=-1&&(P=this.Bb(T,this.yg)+this.Bb(z,this.yg),R=this.Bb(O,this.yg)+this.Bb(R,this.yg),this.Kb(T,this.yg,P),this.Kb(O,this.yg,R))}this.QT(T,z),this.Gy(z),P=T,c.set(L,-1),z==$&&(c.set(0,-1),$=-1)}else this.xx(P,!1),P=-1,T=z,E=G,O=R}if(this.xx(P,!1),P=-1,w){for($=-1,L=0,F=c.size;L<F;L++)if((z=c.get(L))!=-1){if($==-1)T=$=z,E=this.vf(T),O=this.ya(T);else if(z!=T&&(R=this.ya(z),G=this.lk(R),this.Ul(O,z),this.Vl(z,O),T=z,E=G,O=R,n==7&&(this.Bb(z,this.be)|this.Bb(this.ue(z),this.be))==(1|this.Io)))return void(this.Pi=new h.Nd(5,f,-1))}this.on(f,$)}else{for($=-1,L=0,F=c.size;L<F;L++)if((z=c.get(L))!=-1){$=z;break}m!=$&&this.on(f,$)}}}}},r.prototype.RN=function(){for(var n=-1,l=this.bh(),c=this.Oe;c!=-1;c=this.Tf(c)){var p=this.Je(c);if(p!=-1){var f=p;do{if(this.Bb(f,l)!=1){var m=this.hI();this.Et(m,f),this.wJ(m,n),n!=-1&&this.yJ(n,m),n=m;var w=0,$=f;do w|=this.Bb($,this.be),this.VW($,m),this.Kb($,l,1),$=this.kc($);while($!=f);this.Xg(m,w)}f=this.kc(this.ya(f))}while(f!=p)}}m=this.hI(),this.Et(m,-1),this.wJ(m,n),n!=-1&&this.yJ(n,m),this.Jl=m,this.$n=h.ce.rf(this.ze.size,NaN),this.fA=h.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(l)},r.prototype.mR=function(n,l,c){if((l=l!=-1?l:this.Je(n))==-1)return-1;for(n=l;;){if(this.Bb(l,c)!=1)return l;if((l=this.kc(this.ya(l)))==n)return-1}},r.prototype.tW=function(){for(var n=this.bh(),l=this.Oe;l!=-1;l=this.Tf(l))for(var c=-1;;){var p=this.mR(l,c,n);if(p==-1)break;c=this.kc(this.ya(p));for(var f=p;;){var m=this.kc(f),w=this.ue(f),$=this.ya(f);if(w==$){if(this.DP(f),c!=f&&c!=$||(c=-1),f==p||w==p){if(f==(p=m)||w==p)break;f=m;continue}}else this.Kb(f,n,1);if((f=m)==p)break}}this.Lg(n)},r.prototype.HB=function(n,l,c,p,f){this.Wg(),this.bH=f,this.g=n,this.Dq=this.g.WE(),(n=new h.ja(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.gd);var m=0,w=1,$=c!=null?c.get(0):this.g.md;for(f=1;$!=-1;){this.g.CJ($,this.Dq,w),w<<=1;for(var T=this.g.Ob($);T!=-1;T=this.g.Sb(T))for(var E=this.g.Ya(T),O=0,P=this.g.Ka(T);O<P;O++)n.add(E),E=this.g.V(E);h.ba.Tn(this.g.jc($))||(m+=this.g.ea($)),c!=null?($=f<c.size?c.get(f):-1,f++):$=this.g.ve($)}for(this.Io=w,this.xa=n.size,this.g.nx(n,this.xa),this.lh==null&&(this.lh=new h.ad(2),this.he=new h.ad(8),this.Lc=new h.ad(8),this.ze=new h.ad(8)),this.lh.Ee(this.xa),h.op.Bp(p),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,m)),this.Em=this.g.Hd(),c=new h.h,f=0,m=new h.h,c.Sc(),w=0;w<=this.xa;w++)if(w<this.xa?(E=n.get(w),this.g.D(E,m)):m.Sc(),!c.rb(m)){if(f<w){for(E=this.$m(),P=O=-1;f<w;f++)P=n.get(f),this.g.Sa(P,this.Em,E),$=this.lh.De(),this.lh.T($,0,P),this.lh.T($,1,O),O=$,T=this.g.cd(P),$=this.g.Sf(T),$=this.Ma($),this.NW(E,this.yd(E)|$);this.OW(E,O),this.er(E,this.g.Va(P)),this.Qs!=-1&&this.dX(this.Qs,E),this.gX(E,this.Qs),this.Qs=E,this.Oe==-1&&(this.Oe=E)}f=w,c.N(m)}h.op.Bp(p),this.be=this.bh(),l==5&&(this.eg=this.bh()),l==4&&(this.yg=this.bh()),this.qP(l,n),this.Pi.Lj==0&&(this.EX(l),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(l,p))):this.kA=!0))},r.prototype.Gy=function(n){var l=this.kc(n),c=this.ue(n),p=this.ya(n),f=this.kc(p),m=this.ue(p);l!=p&&(this.Ul(m,l),this.Vl(l,m)),c!=p&&(this.Ul(c,f),this.Vl(f,c)),c=this.lk(n),this.Je(c)==n&&(f!=n?this.on(c,f):this.on(c,-1)),f=this.lk(p),this.Je(f)==p&&(l!=p?this.on(f,l):this.on(f,-1)),this.Lc.kd(n),this.Lc.kd(p)},r.prototype.JF=function(n,l){for(;;){if((l=n.xe(l))==-1)return-1;var c=n.ka(l);if(this.$e(c)!=this.$e(this.ya(c)))return c}},r.prototype.fr=function(n,l){var c;c===void 0&&(c=!0),this.HB(n,0,null,l,c)},r.prototype.qJ=function(n,l,c){var p=new h.ja(0);p.add(l),this.HB(n,4,p,c,n.jc(l)==1736)},r.prototype.rJ=function(n,l,c){var p=new h.ja(0);p.add(l),this.HB(n,5,p,c,!0)},r.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},r.prototype.Je=function(n){return this.he.U(n,2)},r.prototype.D=function(n,l){this.g.ZF(this.$Q(n),l)},r.prototype.yd=function(n){return this.he.U(n,1)},r.prototype.Tf=function(n){return this.he.U(n,4)},r.prototype.Yy=function(n){return this.he.U(n,6)},r.prototype.mm=function(n){return this.he.U(n,7)},r.prototype.ls=function(n){return this.lh.U(n,1)},r.prototype.vj=function(n){return this.lh.U(n,0)},r.prototype.og=function(n,l){return(l=this.Fi[l]).size<=n?-1:l.read(n)},r.prototype.pn=function(n,l,c){(l=this.Fi[l]).size<=n&&l.resize(this.he.size,-1),l.write(n,c)},r.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var n=h.ja.rf(this.he.Jg,-1),l=0,c=this.Fi.length;l<c;l++)if(this.Fi[l]==null)return this.Fi[l]=n,l;return this.Fi.push(n),this.Fi.length-1},r.prototype.Gp=function(n){this.Fi[n]=null},r.prototype.lk=function(n){return this.Lc.U(n,1)},r.prototype.vf=function(n){return this.lk(this.ya(n))},r.prototype.ya=function(n){return this.Lc.U(n,4)},r.prototype.ue=function(n){return this.Lc.U(n,5)},r.prototype.kc=function(n){return this.Lc.U(n,6)},r.prototype.$e=function(n){return this.Lc.U(n,2)},r.prototype.af=function(n){return this.jk(this.Lc.U(n,2))},r.prototype.om=function(n){return this.Lc.U(n,7)},r.prototype.$r=function(n,l){this.D(this.lk(n),l)},r.prototype.nm=function(n,l){this.D(this.vf(n),l)},r.prototype.fh=function(n){return this.Lc.U(n,3)&this.XN},r.prototype.Bb=function(n,l){return(l=this.Ii[l]).size<=n?-1:l.read(n)},r.prototype.Kb=function(n,l,c){(l=this.Ii[l]).size<=n&&l.resize(this.Lc.size,-1),l.write(n,c)},r.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var n=h.ja.rf(this.Lc.Jg,-1),l=0,c=this.Ii.length;l<c;l++)if(this.Ii[l]==null)return this.Ii[l]=n,l;return this.Ii.push(n),this.Ii.length-1},r.prototype.Lg=function(n){this.Ii[n]=null},r.prototype.DP=function(n){var l=this.$e(n),c=this.ya(n),p=this.kc(n);p==c&&(p=this.kc(p))==n&&(p=-1);var f=this.vF(l);f!==n&&f!=c||this.Et(l,p),c=this.$n.read(l),isNaN(c)||(this.vJ(l,NaN),this.xJ(l,NaN)),this.xx(n,!0),this.Gy(n)},r.prototype.EP=function(n){for(var l=0,c=n.size;l<c;l++){var p=n.get(l),f=this.$e(this.ya(p));this.Et(this.$e(p),-1),this.Et(f,-1),this.xx(p,!0),this.Gy(p)}},r.prototype.vF=function(n){return this.ze.U(n,1)},r.prototype.jk=function(n){return this.ze.U(n,2)},r.prototype.In=function(n){return this.ze.U(n,3)},r.prototype.ZQ=function(n){return this.ze.U(n,4)},r.prototype.Mp=function(n){var l=this.$n.read(n);return isNaN(l)&&(this.gY(n),l=this.$n.read(n)),l},r.prototype.Ma=function(n){return this.g.FF(n,this.Dq)},r.prototype.Ie=function(n){return this.g.Qa(n,this.Em)},r.prototype.oR=function(n){return this.g.Qa(n,this.Eq)},r.prototype.nR=function(n,l){var c=this.Je(n);if(c==-1)return-1;var p=c,f=-1,m=-1;do{if(this.vf(p)==l)return p;if(f==-1){if((f=this.Je(l))==-1)break;m=f}if(this.vf(m)==n)return this.ya(m);p=this.kc(this.ya(p)),m=this.kc(this.ya(m))}while(p!=c&&m!=f);return-1},r.prototype.kB=function(n,l){l.Qr(),l=l.get();var c=new h.h;this.$r(n,c),l.Ec(c),this.nm(n,c),l.Rc(c)},r.prototype.CO=function(n,l){if(n==l)return 0;var c=new h.h;this.nm(n,c);var p=new h.h;return this.nm(l,p),c.rb(p)?0:(l=new h.h,this.$r(n,l),(n=new h.h).vc(c,l),(c=new h.h).vc(p,l),h.h.pu(n,c))},r.prototype.BO=function(n,l){if(n==l)return 0;var c=new h.h;this.nm(n,c);var p=new h.h;return this.nm(l,p),c.rb(p)?0:(l=new h.h,this.$r(n,l),(n=new h.h).vc(c,l),(c=new h.h).vc(p,l),0<=c.y&&0<n.y?h.h.pu(n,c):0)},r.prototype.sO=function(){for(var n=h.mc.ox(this.gA),l=new h.h,c=new h.h,p=new h.h,f=new h.h,m=new h.h,w=this.Oe;w!=-1;w=this.Tf(w)){var $=this.Je(w);if($!=-1){var T=$;this.$r(T,l),this.nm(T,c),m.vc(c,l);var E=m.Uk();do{var O=T;if((T=this.kc(this.ya(T)))!=O){this.nm(T,p),f.vc(p,l),O=f.Uk();var P=f.yi(m);if(P*P/(O*E)*Math.min(O,E)<=n)return!1;m.N(f),E=O,c.N(p)}}while(T!=$)}}return!0},r}(),h.ku=k}(q||(q={})),function(h){var k=function(){function v(){this.j=null,this.jH=new h.h,this.kH=new h.h,this.Ij=null,this.Ov=!1,this.vl=-1}return v.prototype.cf=function(u){return u<this.Ij.length&&this.Ij[u]},v.prototype.fl=function(u,o,r,n){var l=h.ba.uf(this.j.g.jc(r));if(h.ba.uf(this.j.g.jc(o))!=2||l!=1)throw h.i.Ra();this.AP(u,o,r,n)},v.prototype.fr=function(u,o){this.j==null&&(this.j=new h.ku),this.j.fr(u,o)},v.prototype.Gt=function(u,o,r){for(h.Vk.W(u,o,r,!0),o=u.md;o!=-1;o=u.ve(o))u.jc(o)==1736&&h.tn.W(u,o,-1,this.Ov,r);this.fr(u,r)},v.prototype.HE=function(u,o,r,n,l){var c=this.j.g;if(c.jc(u)==1736)for(u=c.Ob(u);u!=-1;u=c.Sb(u)){var p=c.Ya(u);this.j.Ie(p),this.j.Ie(c.V(p));var f=this.j.oR(p);if(f!=-1){var m=this.j.Bb(f,r);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){this.j.Kb(f,r,1),m=c.wf(o,-1);var w=f,$=this.j.Ie(p),T=1;do{var E=this.um(p,l);c.kj(m,E),n!=-1&&this.j.pn($,n,1),this.j.Kb(w,r,1),w=this.j.kc(w);do var O=(E=T==1?c.V(p):c.Na(p))!=-1?this.j.Ie(E):-1;while(O==$);var P=this.j.lk(w);if(P!=O){do O=(E=T==1?c.Na(p):c.V(p))!=-1?this.j.Ie(E):-1;while(O==$);P!=O?(O=P,E=this.j.vj(this.j.mm(O))):T=-T}$=O,p=E}while(w!=f);c.mn(m,!0)}else this.j.Kb(f,r,2)}}},v.prototype.$E=function(){for(var u=this.j.bh(),o=new h.ja(0),r=this.j.Oe;r!=-1;r=this.j.Tf(r)){var n=this.j.Je(r),l=n;if(n!=-1)do{if(this.j.Bb(l,u)!=1){var c=this.j.ya(l);this.j.Kb(c,u,1),this.j.Kb(l,u,1),this.cf(this.j.af(l))&&this.cf(this.j.af(c))&&o.add(l)}l=this.j.kc(this.j.ya(l))}while(l!=n)}this.j.Lg(u),this.j.EP(o)},v.prototype.um=function(u,o){return o==-1?u:this.WR(u,o)},v.prototype.WR=function(u,o){var r=this.j.g,n=this.j.mm(this.j.Ie(u));do{var l=this.j.vj(n);if(r.Sf(r.cd(l))==o)return l;n=this.j.ls(n)}while(n!=-1);return u},v.prototype.Qt=function(u,o,r){this.$E();var n=this.j.g,l=n.Kg(1736),c=this.j.bh();return this.pK(u,o,l,r,c,-1),this.j.Lg(c),h.tn.W(n,l,1,this.Ov,null),l},v.prototype.pK=function(u,o,r,n,l,c){for(this.HE(u,r,l,c,n),o!=-1&&this.HE(o,r,l,c,n),u=this.j.g,o=this.j.Oe;o!=-1;o=this.j.Tf(o)){var p=this.j.Je(o);if(p!=-1){var f=p;do{var m=this.j.Bb(f,l);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){m=u.wf(r,-1);var w=f;do{var $=this.j.om(w);$!=-1?$=this.j.vj($):($=this.j.vj(this.j.om(this.j.ya(w))),$=this.j.g.V($)),$=this.um($,n),u.kj(m,$),this.j.Kb(w,l,1),c!=-1&&($=this.j.Ie($),this.j.pn($,c,1)),w=this.j.kc(w)}while(w!=f);u.mn(m,!0)}else this.j.Kb(f,l,2);f=this.j.kc(this.j.ya(f))}while(f!=p)}}},v.prototype.XX=function(u,o,r){var n=this.j.g,l=n.Kg(1736),c=n.Kg(1607),p=n.Kg(550);this.$E();var f=-1,m=this.j.bh(),w=this.j.Fp();for(this.pK(u,o,l,r,m,w),u=this.j.Oe;u!=-1;u=this.j.Tf(u))if((o=this.j.Je(u))!=-1){var $=o;do{var T=this.j.Bb($,m),E=this.j.Bb(this.j.ya($),m);if((T|=E)==2)if(T=this.j.fh($),this.cf(T)){var O=n.wf(c,-1),P=$;T=this.$w(u,n),T=this.um(T,r),n.kj(O,T),this.j.pn(u,w,1);do{if(T=this.j.vf(P),E=this.$w(T,n),E=this.um(E,r),n.kj(O,E),this.j.Kb(P,m,1),this.j.Kb(this.j.ya(P),m,1),this.j.pn(T,w,1),P=this.j.kc(P),T=this.j.Bb(P,m),(T|=E=this.j.Bb(this.j.ya(P),m))!=2)break;if(T=this.j.fh(P),!this.cf(T)){this.j.Kb(P,m,1),this.j.Kb(this.j.ya(P),m,1);break}}while(P!=$)}else this.j.Kb($,m,1),this.j.Kb(this.j.ya($),m,1);$=this.j.kc(this.j.ya($))}while($!=o)}for(u=this.j.Oe;u!=-1;u=this.j.Tf(u))(T=this.j.og(u,w))!=1&&(T=this.j.yd(u),this.cf(T)&&(f==-1&&(f=n.wf(p,-1)),(o=this.j.mm(u))!=-1&&(o=this.j.vj(o),T=this.um(o,r),n.kj(f,T))));return this.j.Gp(w),this.j.Lg(m),h.tn.W(n,l,1,this.Ov,null),(r=[])[0]=p,r[1]=c,r[2]=l,r},v.prototype.$w=function(u,o){var r=-1;for(u=this.j.mm(u);u!=-1;u=this.j.ls(u)){var n=this.j.vj(u);r==-1&&(r=n);var l=this.j.Ma(o.Sf(o.cd(n)));if(this.cf(l)){r=n;break}}return r},v.prototype.gB=function(u,o){for(var r=this.ll(o),n=this.j.lk(o),l=this.j.vf(o),c=0,p=0,f=this.j.mm(n);f!=-1;f=this.j.ls(f)){var m=this.j.vj(f),w=u.cd(m),$=this.j.Ma(u.Sf(w));w=u.Ya(w),($=($&r)!=0)&&w==m&&(this.vl=o);var T=u.V(m);T!=-1&&this.j.Ie(T)==l?(c++,$&&(this.vl===-1&&w==T&&(m=this.j.kc(o),this.cf(this.ll(m))&&(this.vl=m)),p++)):(m=u.Na(m))!=-1&&this.j.Ie(m)==l&&(c--,$&&(this.vl===-1&&w===m&&(m=this.j.kc(o),this.cf(this.ll(m))&&(this.vl=m)),p--))}return this.j.D(n,this.jH),this.j.D(l,this.kH),(p!=0?p:c)*(u=h.h.ub(this.jH,this.kH))},v.prototype.ll=function(u){return this.j.fh(u)|this.j.af(u)|this.j.af(this.j.ya(u))},v.prototype.sK=function(u){for(var o=this.j.ya(this.j.ue(u)),r=-1;o!=u;){if(this.cf(this.ll(o))){if(r!=-1)return-1;r=o}o=this.j.ya(this.j.ue(o))}return r!=-1?this.j.ya(r):-1},v.prototype.tK=function(u){for(var o=this.j.ya(this.j.kc(u)),r=-1;o!=u;){if(this.cf(this.ll(o))){if(r!=-1)return-1;r=o}o=this.j.ya(this.j.kc(o))}return r!=-1?this.j.ya(r):-1},v.prototype.hJ=function(u,o,r,n,l){var c=this.j.g,p=u,f=this.j.ya(p);this.j.Kb(p,r,1),this.j.Kb(f,r,1),this.vl=-1;for(var m=this.gB(c,p),w=p,$=-1,T=!1,E=1;;){var O=this.j.ue(p);if(O==f)break;if(f=this.j.kc(f),this.j.ya(O)!=f){if((p=this.sK(p))==-1){T=!0;break}f=this.j.ya(p)}else p=O;if(p==u){$=u;break}if(O=this.ll(p),!this.cf(O))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),w=p,m+=this.gB(c,p),E++}if($==-1)for(p=u,f=this.j.ya(p),$=p;(u=this.j.kc(p))!=f;){if(f=this.j.ue(f),this.j.ya(u)!=f){if((p=this.tK(p))==-1){T=!0;break}f=this.j.ya(p)}else p=u;if(O=this.ll(p),!this.cf(O))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),$=p,m+=this.gB(c,p),E++}else if(this.vl!=-1&&(w=this.vl,$=this.j.ue(this.vl),this.j.ya($)!=this.j.kc(this.j.ya(w))&&($=this.sK(w))==-1))throw h.i.Ra();for(0<=m||(p=$,$=this.j.ya(w),w=this.j.ya(p)),r=c.wf(o,-1),p=w,w=this.j.lk(w),T=this.j.vf($)==w&&T,m=this.$w(w,c),m=this.um(m,l),c.kj(r,m),n!=-1&&this.j.pn(w,n,1),w=0,E=T?h.P.truncate((E+1)/2):-1;u=this.j.vf(p),m=this.$w(u,c),m=this.um(m,l),c.kj(r,m),w++,n!=-1&&this.j.pn(u,n,1),T&&w==E&&(r=c.wf(o,-1),c.kj(r,m)),p!=$;)if(u=this.j.kc(p),this.j.ue(this.j.ya(p))!=this.j.ya(u)){if((p=this.tK(p))==-1)throw h.i.Ra()}else p=u},v.prototype.Rt=function(u){for(var o=this.j.g.Kg(1607),r=this.j.bh(),n=this.j.Oe;n!=-1;n=this.j.Tf(n)){var l=this.j.Je(n),c=l;do this.j.Bb(c,r)!=1&&this.cf(this.ll(c))&&this.hJ(c,o,r,-1,u),c=this.j.kc(this.j.ya(c));while(c!=l)}return this.j.Lg(r),o},v.prototype.YX=function(u){for(var o=this.j.g,r=o.Kg(1607),n=o.Kg(550),l=this.j.bh(),c=this.j.Fp(),p=-1,f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var m=this.j.Je(f),w=m;do{var $=this.j.Bb(w,l);$!=1&&($=this.ll(w),this.cf($)&&this.hJ(w,r,l,c,u)),w=this.j.kc(this.j.ya(w))}while(w!=m)}for(f=this.j.Oe;f!=-1;f=this.j.Tf(f))($=this.j.og(f,c))!=1&&($=this.j.yd(f),this.cf($)&&(p==-1&&(p=o.wf(n,-1)),(m=this.j.mm(f))!=-1&&(m=this.j.vj(m),m=this.um(m,u),o.kj(p,m))));return this.j.Lg(l),this.j.Gp(c),(u=[])[0]=n,u[1]=r,u},v.prototype.pr=function(){for(var u=this.j.g,o=u.Kg(550),r=u.wf(o,-1),n=this.j.Oe;n!=-1;n=this.j.Tf(n))if(this.cf(this.j.yd(n))){for(var l=-1,c=this.j.mm(n);c!=-1;c=this.j.ls(c)){var p=this.j.vj(c);l==-1&&(l=p);var f=this.j.Ma(u.Sf(u.cd(p)));if(this.cf(f)){l=p;break}}u.kj(r,l)}return o},v.prototype.eq=function(u){this.Ij=[];for(var o=0;o<u;o++)this.Ij[o]=!1},v.WV=function(u,o,r){var n=u.Ja(),l=Array(1e3);h.P.bv(l,null);var c=h.P.mg(1e3,0),p=u.I(),f=!0,m=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();for(var w=0;w<p;){var $=h.P.truncate(u.gW(l,w)-w);m?h.jd.nK(o,l,$,r,c):h.jd.oK(o,l,$,r,c);for(var T=0,E=0;E<$;E++)c[E]==0&&(f&&(f=!1,n.Gd(u,0,w)),T!=E&&n.Gd(u,w+T,w+E),T=E+1);f||T==$||n.Gd(u,w+T,w+$),w+=$}return f?u:n},v.uG=function(u,o,r){return u instanceof h.ee?v.WV(u,o,r):o instanceof h.Ta?u.B()||o.B()?u.Ja():h.Vk.uU(r,u,o)?h.Vk.xO(u,o):u.Ja():v.XV(u,o,r)},v.Cv=function(u,o,r,n){var l=new h.l;u.A(l);var c=new h.l;o.A(c);var p=new h.l;if(p.L(l),p.$b(c),r=h.ua.Xd(r,p,!0),(p=new h.l).L(c),c=h.ua.Gr(r),p.X(c,c),!l.isIntersecting(p)){if(u.Eb()<=o.Eb())return v.mi(v.Ue(u.Ja()),u,"&");if(u.Eb()>o.Eb())return v.mi(v.Ue(o.Ja()),u,"&")}return c=new v,p=(l=new h.hd).Ib(v.Ue(u)),o=l.Ib(v.Ue(o)),c.Gt(l,r,n),n=c.Cv(p,o),u=v.mi(l.Ke(n),u,"&"),h.ba.Ic(u.K())&&(u.Eh(2,r),u.K()==1736&&u.hm()),u},v.XV=function(u,o,r){if(u.B()||o.B())return u.Ja();var n=[null],l=[0],c=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();return n[0]=u.D(),c?h.jd.nK(o,n,1,r,l):h.jd.oK(o,n,1,r,l),l[0]==0?u.Ja():u},v.prototype.GU=function(u,o,r,n,l){if(u.B())return u;var c=new h.hd;return u=c.Ib(u),this.Ok(c,u,o,r,n,l)},v.prototype.IU=function(u,o,r,n,l,c){if(l&&u.jc(o)!=550){var p=new h.MC;p.PX(u,r),p.Pg?(h.Vk.W(u,r,c,!0),l=!1):this.j.ty(r)}else h.Vk.W(u,r,c,!0),l=!1;if(n&&u.jc(o)!=550?this.j.rJ(u,o,c):this.j.qJ(u,o,c),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(u,o,r,n,!1,c);if(this.j.ty(NaN),c=this.j.Ma(o),this.eq(c+1),this.Ij[c]=!0,u.jc(o)==1736||n&&u.jc(o)!=550)return u.$o(o,0),o=this.Qt(o,-1,-1),(u=u.Ke(o)).$o(0),l?u.Eh(1,0):(u.Eh(2,r),u.hm()),u;if(u.jc(o)==1607)return o=this.Rt(-1),u=u.Ke(o),l||u.Eh(2,r),u;if(u.jc(o)==550)return o=this.pr(),u=u.Ke(o),l||u.Eh(2,r),u;throw h.i.Ra()},v.prototype.Ok=function(u,o,r,n,l,c){this.j=new h.ku;try{return this.IU(u,o,r,n,l,c)}finally{this.j.Wg()}},v.Ok=function(u,o,r,n,l){return new v().GU(u,o,r,n,l)},v.prototype.HU=function(u,o,r,n){this.Ov=u,this.j=new h.ku,u=o.Kn(r);var l=o.jc(r);if(u!=1||l==550?this.j.qJ(o,r,n):this.j.rJ(o,r,n),!this.j.kA)if(this.j.ty(NaN),n=this.j.Ma(r),this.eq(n+1),this.Ij[n]=!0,o.jc(r)==1736||u==1&&o.jc(r)!=550)o.$o(r,0),n=this.Qt(r,-1,-1),o.cC(n,r),o.wB(n);else if(o.jc(r)==1607)n=this.Rt(-1),o.cC(n,r),o.wB(n);else{if(o.jc(r)!=550)throw h.i.ga("internal error");n=this.pr(),o.cC(n,r),o.wB(n)}},v.prototype.km=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o));if(r>n)return u;var l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)]=!0,r==2&&n==2)return this.Qt(u,o,-1);if(r==1&&n==2||r==1&&n==1)return this.Rt(-1);if(r==0)return this.pr();throw h.i.Ra()},v.prototype.Cv=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)|this.j.Ma(o)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),r==2&&n==2)return this.Qt(u,o,l);if(r==1&&0<n||n==1&&0<r)return this.Rt(l);if(r==0||n==0)return this.pr();throw h.i.Ra()},v.prototype.Kz=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)|this.j.Ma(o)]=!0,l=-1,1<this.j.g.it.Ba&&(l=u),r==2&&n==2)return this.XX(u,o,l);if(r==1&&0<n||n==1&&0<r)return this.YX(l);if(r==0||n==0)return(u=[])[0]=this.pr(),u;throw h.i.Ra()},v.prototype.gp=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),l=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(l|c)),this.Ij[this.j.Ma(u)]=!0,this.Ij[this.j.Ma(o)]=!0,r==2&&n==2)return this.Qt(u,o,-1);if(r==1&&n==1)return this.Rt(-1);if(r==0&&n==0)return this.pr();throw h.i.Ra()},v.Ue=function(u){var o=u.K();return o==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):o==33?(o=new h.ee(u.description),u.B()||o.add(u),o):o==322?(o=new h.Ua(u.description),u.B()||o.pc(u,!0),o):u},v.mi=function(u,o,r){var n=u.K();return n==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):n!=33||r!="|"&&r!="^"?n==322?(o=new h.Ua(u.description),u.B()||o.pc(u,!0),o):n==33&&r=="-"&&o.K()==33||n==550&&r=="&"&&o.K()==33?(o=new h.Ta(u.description),u.B()||u.we(0,o),o):u:(o=new h.ee(u.description),u.B()||o.add(u),o)},v.km=function(u,o,r,n){if(u.B()||o.B()||u.Eb()>o.Eb())return v.mi(v.Ue(u),u,"-");var l=new h.l;u.A(l);var c=new h.l;if(o.A(c),!l.isIntersecting(c))return v.mi(v.Ue(u),u,"-");var p=new h.l;return p.L(l),p.$b(c),r=h.ua.Xd(r,p,!0),c=new v,p=(l=new h.hd).Ib(v.Ue(u)),o=l.Ib(v.Ue(o)),c.Gt(l,r,n),n=c.km(p,o),n=l.Ke(n),u=v.mi(n,u,"-"),h.ba.Ic(u.K())&&(u.Eh(2,r),u.K()==1736&&u.hm()),u},v.QP=function(u,o,r){if(2>u.length)throw h.i.O("not enough geometries to dissolve");for(var n=0,l=0,c=u.length;l<c;l++)n=Math.max(u[l].Eb(),n);var p=new h.l;p.Pa();var f=new h.hd,m=-1,w=0,$=-1;for(l=0,c=u.length;l<c;l++)if(u[l].Eb()==n)if(u[l].B())$==-1&&($=l);else{$=l,m==-1?m=f.Ib(v.Ue(u[l])):f.pN(m,v.Ue(u[l]));var T=new h.l;u[l].yc(T),p.$b(T),w++}return 2>w?v.Ue(u[$]):(u=n==2,o=h.ua.Xd(n==0?o:null,p,!0),new v().Ok(f,m,o,u,!0,r))},v.Kz=function(u,o,r,n){var l=[null,null,null],c=new h.l;u.A(c);var p=new h.l;o.A(p);var f=new h.l;if(f.L(c),f.$b(p),r=h.ua.Xd(r,f,!0),(f=new h.l).L(p),p=h.ua.Gr(r),f.X(p,p),!c.isIntersecting(f)){if(u.Eb()<=o.Eb())return l[(u=v.mi(v.Ue(u.Ja()),u,"&")).Eb()]=u,l;if(u.Eb()>o.Eb())return l[(u=v.mi(v.Ue(o.Ja()),u,"&")).Eb()]=u,l}for(p=new v,f=(c=new h.hd).Ib(v.Ue(u)),o=c.Ib(v.Ue(o)),p.Gt(c,r,n),n=p.Kz(f,o),o=0;o<n.length;o++)p=v.mi(c.Ke(n[o]),u,"&"),h.ba.Ic(p.K())&&(p.Eh(2,r),p.K()==1736&&p.hm()),l[p.Eb()]=p;return l},v.gp=function(u,o,r,n){if(u.Eb()>o.Eb())return v.mi(v.Ue(u),u,"^");if(u.Eb()<o.Eb()||u.B())return v.mi(v.Ue(o),u,"^");if(o.B())return v.mi(v.Ue(u),u,"^");var l=new h.l;u.A(l);var c=new h.l;o.A(c);var p=new h.l;return p.L(l),p.$b(c),r=h.ua.Xd(r,p,!0),c=new v,p=(l=new h.hd).Ib(v.Ue(u)),o=l.Ib(v.Ue(o)),c.Gt(l,r,n),n=c.gp(p,o),u=v.mi(l.Ke(n),u,"^"),h.ba.Ic(u.K())&&(u.Eh(2,r),u.K()==1736&&u.hm()),u},v.prototype.GQ=function(u,o){var r=this.j.g;u=r.wf(u,-1);for(var n=o.size,l=0;l<n;l++){var c=o.get(l);r.kj(u,c)}r.mn(u,!0)},v.prototype.WW=function(u,o){for(var r=this.j.g,n=r.md;n!=-1;n=r.ve(n))if(n==o)for(var l=r.Ob(n);l!=-1;l=r.Sb(l)){var c=r.Ya(l);if(c!=-1)for(var p=r.V(c);p!=-1;){c=this.j.Ie(c);var f=this.j.Ie(p);(c=this.j.nR(c,f))!=-1&&(f=this.j.ya(c),this.j.Kb(c,u,1),this.j.Kb(f,u,2)),c=p,p=r.V(c)}}},v.prototype.YV=function(u,o,r,n){r=this.j.Ma(r),n=this.j.Ma(n);var l=new h.ja(0);l.Jb(256);for(var c=this.j.g,p=this.j.bh(),f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var m=this.j.Je(f);if(m!=-1){var w=m;do{if(this.j.Bb(w,p)!=1){var $=w,T=w,E=!1,O=0;do{if(this.j.Kb($,p,1),!E){var P=this.j.fh($);P&n&&this.j.af($)&r&&(T=$,E=!0)}E&&(l.add(this.j.vj(this.j.mm(this.j.lk($)))),u!=-1&&(P=this.j.fh($))&n&&(O|=P=this.j.Bb($,u))),$=this.j.kc($)}while($!=T);E&&0<this.j.Mp(this.j.$e(T))&&($=c.Kg(1736),this.GQ($,l),o!=-1&&c.CJ($,o,O)),l.clear(!1)}w=this.j.kc(this.j.ya(w))}while(w!=m)}}this.j.Lg(p)},v.prototype.AP=function(u,o,r,n){this.j.tW();var l=-1;u!=-1&&(l=this.j.bh(),this.WW(l,r)),this.YV(l,u,o,r),l!=-1&&(this.j.Lg(l),l=-1);var c=this.j.g;for(u=0,l=c.md;l!=-1;l=c.ve(l))l!=o&&l!=r&&(n.add(l),u++);n.Wd(0,u,function(p,f){return(p=c.qz(c.Ob(p)))<(f=c.qz(c.Ob(f)))?-1:p==f?0:1})},v.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},v}();h.Hg=k}(q||(q={})),function(h){var k=function(){function v(u){u!==void 0?this.Jt(u):this.MB()}return v.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},v.prototype.Nb=function(u){return this==u||u instanceof v&&this.eb==u.eb&&this.jb==u.jb&&this.Lb==u.Lb&&this.qb==u.qb&&this.bb==u.bb&&this.Qb==u.Qb},v.prototype.dc=function(){return h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj()},v.prototype.Gh=function(u,o){var r=this.qb*u.x+this.bb*u.y+this.Qb;o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=r},v.prototype.aY=function(u,o,r){for(var n=0;n<o;n++){var l=u[n].x,c=u[n].y,p=this.eb*l+this.jb*c+this.Lb;l=this.qb*l+this.bb*c+this.Qb,r[n]!=null?r[n].na(p,l):r[n]=h.h.construct(p,l)}},v.prototype.multiply=function(u){v.multiply(this,u,this)},v.multiply=function(u,o,r){var n=u.eb*o.eb+u.qb*o.jb,l=u.jb*o.eb+u.bb*o.jb,c=u.Lb*o.eb+u.Qb*o.jb+o.Lb,p=u.eb*o.qb+u.qb*o.bb,f=u.jb*o.qb+u.bb*o.bb;u=u.Lb*o.qb+u.Qb*o.bb+o.Qb,r.eb=n,r.jb=l,r.Lb=c,r.qb=p,r.bb=f,r.Qb=u},v.prototype.Qf=function(){var u=new v;return u.eb=this.eb,u.jb=this.jb,u.Lb=this.Lb,u.qb=this.qb,u.bb=this.bb,u.Qb=this.Qb,u},v.prototype.hC=function(u){if(!u.B()){for(var o=[],r=0;4>r;r++)o[r]=new h.h;u.iB(o),this.bY(o,o),u.bx(o,4)}},v.prototype.bY=function(u,o){for(var r=0;r<u.length;r++){var n=new h.h,l=u[r];n.x=this.eb*l.x+this.jb*l.y+this.Lb,n.y=this.qb*l.x+this.bb*l.y+this.Qb,o[r]=n}},v.prototype.kS=function(u,o){u.B()||o.B()||u.S()==0||u.da()==0?this.lx():(this.jb=this.qb=0,this.eb=o.S()/u.S(),this.bb=o.da()/u.da(),this.Lb=o.v-u.v*this.eb,this.Qb=o.G-u.G*this.bb)},v.prototype.$X=function(u){var o=new h.h,r=new h.h;o.na(this.eb,this.qb),r.na(this.jb,this.bb),o.sub(o);var n=.5*o.Uk();return o.na(this.eb,this.qb),r.na(this.jb,this.bb),o.add(r),u*(n>(o=.5*o.Uk())?Math.sqrt(n):Math.sqrt(o))},v.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},v.prototype.isIdentity=function(u){if(u!==void 0){var o=h.h.construct(0,1);return this.Gh(o,o),o.sub(h.h.construct(0,1)),o.Uk()>u*u?!1:(o.na(0,0),this.Gh(o,o),!(o.Uk()>u*u)&&(o.na(1,0),this.Gh(o,o),o.sub(h.h.construct(1,0)),o.Uk()<=u*u))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},v.prototype.Di=function(u){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*u*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},v.prototype.ig=function(u,o){this.eb=1,this.jb=0,this.Lb=u,this.qb=0,this.bb=1,this.Qb=o},v.prototype.Jt=function(u,o){o!==void 0?(this.eb=u,this.qb=this.Lb=this.jb=0,this.bb=o,this.Qb=0):this.Jt(u,u)},v.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},v.prototype.kX=function(u){this.lX(Math.cos(u),Math.sin(u))},v.prototype.lX=function(u,o){this.eb=u,this.jb=-o,this.Lb=0,this.qb=o,this.bb=u,this.Qb=0},v.prototype.shift=function(u,o){this.Lb+=u,this.Qb+=o},v.prototype.scale=function(u,o){this.eb*=u,this.jb*=u,this.Lb*=u,this.qb*=o,this.bb*=o,this.Qb*=o},v.prototype.flipX=function(u,o){this.eb=-this.eb,this.jb=-this.jb,this.Lb=u+o-this.Lb},v.prototype.flipY=function(u,o){this.qb=-this.qb,this.bb=-this.bb,this.Qb=u+o-this.Qb},v.prototype.rotate=function(u){var o=new v;o.kX(u),this.multiply(o)},v.prototype.inverse=function(u){if(u!==void 0){var o=this.eb*this.bb-this.jb*this.qb;o==0?u.lx():(o=1/o,u.Lb=(this.jb*this.Qb-this.Lb*this.bb)*o,u.Qb=(this.Lb*this.qb-this.eb*this.Qb)*o,u.eb=this.bb*o,u.jb=-this.jb*o,u.qb=-this.qb*o,u.bb=this.eb*o)}else this.inverse(this)},v}();h.Ed=k}(q||(q={})),function(h){var k=function(){function v(){}return v.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},v.prototype.Jt=function(u,o){this.eb=u,this.jb=this.pf=this.qb=0,this.bb=o,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},v.prototype.translate=function(u,o,r){this.Lb+=u,this.Qb+=o,this.Cg+=r},v.prototype.hC=function(u){if(!u.B()){for(var o=new h.Od[8],r=0;8>r;r++)o[r]=new h.Od;u.iB(o),this.transform(o,8,o),u.bx(o)}},v.prototype.transform=function(u,o,r){for(var n=0;n<o;n++){var l=new h.Od,c=u[n];l.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,l.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,l.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,r[n]=l}},v.prototype.hp=function(u){var o=new h.Od;return o.x=this.eb*u.x+this.jb*u.y+this.Ve*u.z+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.We*u.z+this.Qb,o.z=this.pf*u.x+this.Ye*u.y+this.Ze*u.z+this.Cg,o},v.prototype.Bg=function(u){v.multiply(this,u,this)},v.multiply=function(u,o,r){var n=u.eb*o.eb+u.qb*o.jb+u.pf*o.Ve,l=u.eb*o.qb+u.qb*o.bb+u.pf*o.We,c=u.eb*o.pf+u.qb*o.Ye+u.pf*o.Ze,p=u.jb*o.eb+u.bb*o.jb+u.Ye*o.Ve,f=u.jb*o.qb+u.bb*o.bb+u.Ye*o.We,m=u.jb*o.pf+u.bb*o.Ye+u.Ye*o.Ze,w=u.Ve*o.eb+u.We*o.jb+u.Ze*o.Ve,$=u.Ve*o.qb+u.We*o.bb+u.Ze*o.We,T=u.Ve*o.pf+u.We*o.Ye+u.Ze*o.Ze,E=u.Lb*o.eb+u.Qb*o.jb+u.Cg*o.Ve+o.Lb,O=u.Lb*o.qb+u.Qb*o.bb+u.Cg*o.We+o.Qb;u=u.Lb*o.pf+u.Qb*o.Ye+u.Cg*o.Ze+o.Cg,r.eb=n,r.qb=l,r.pf=c,r.jb=p,r.bb=f,r.Ye=m,r.Ve=w,r.We=$,r.Ze=T,r.Lb=E,r.Qb=O,r.Cg=u},v.inverse=function(u,o){var r=u.eb*(u.bb*u.Ze-u.Ye*u.We)-u.qb*(u.jb*u.Ze-u.Ye*u.Ve)+u.pf*(u.jb*u.We-u.bb*u.Ve);if(r==0)throw h.i.ga("math singularity");var n=1/r;r=(u.bb*u.Ze-u.Ye*u.We)*n;var l=-(u.jb*u.Ze-u.Ye*u.Ve)*n,c=(u.jb*u.We-u.bb*u.Ve)*n,p=-(u.qb*u.Ze-u.We*u.pf)*n,f=(u.eb*u.Ze-u.pf*u.Ve)*n,m=-(u.eb*u.We-u.qb*u.Ve)*n,w=(u.qb*u.Ye-u.pf*u.bb)*n,$=-(u.eb*u.Ye-u.pf*u.jb)*n;n*=u.eb*u.bb-u.qb*u.jb;var T=-(u.Lb*r+u.Qb*l+u.Cg*c),E=-(u.Lb*p+u.Qb*f+u.Cg*m);u=-(u.Lb*w+u.Qb*$+u.Cg*n),o.eb=r,o.qb=p,o.pf=w,o.jb=l,o.bb=f,o.Ye=$,o.Ve=c,o.We=m,o.Ze=n,o.Lb=T,o.Qb=E,o.Cg=u},v.prototype.Qf=function(){var u=new v;return u.eb=this.eb,u.qb=this.qb,u.pf=this.pf,u.jb=this.jb,u.bb=this.bb,u.Ye=this.Ye,u.Ve=this.Ve,u.We=this.We,u.Ze=this.Ze,u.Lb=this.Lb,u.Qb=this.Qb,u.Cg=this.Cg,u},v}();h.FY=k}(q||(q={})),function(h){var k=function(u){function o(r){if(r!==void 0)r=u.call(this,r.dc(),r)||this;else{(r=u.call(this)||this).dg=[],r.dg[0]=0,r.Ba=1,r.wh=[];for(var n=0;10>n;n++)r.wh[n]=-1;r.wh[r.dg[0]]=0}return r.lq=!0,r}return wt(o,u),o.prototype.se=function(r){this.hasAttribute(r)||(this.wh[r]=0,this.eD())},o.prototype.removeAttribute=function(r){if(r==0)throw h.i.O("Position attribue cannot be removed");this.hasAttribute(r)&&(this.wh[r]=-1,this.eD())},o.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var r=0;r<this.wh.length;r++)this.wh[r]=-1;this.wh[this.dg[0]]=0,this.lq=!0},o.prototype.zF=function(){return v.fz().add(this)},o.pg=function(){return v.fz().VR()},o.prototype.oM=function(){var r=this.dc();return new h.sa(r,this)},o.prototype.eD=function(){for(var r=this.Ba=0,n=0;10>r;r++)0<=this.wh[r]&&(this.dg[n]=r,this.wh[r]=n,n++,this.Ba++);this.lq=!0},o.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},o.prototype.Nb=function(r){if(r==null)return!1;if(r==this)return!0;if(!(r instanceof o)||r.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.dg[n]!=r.dg[n])return!1;return this.lq==r.lq},o.prototype.BG=function(r){if(r.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.dg[n]!=r.dg[n])return!1;return!0},o.Kw=function(r,n){for(var l=[],c=0;c<r.Ba;c++)l[c]=-1;c=0;for(var p=r.Ba;c<p;c++)l[c]=n.Rf(r.ld(c));return l},o.wR=function(r,n){return(r=new o(r)).se(n),r.zF()},o.xR=function(r,n){for(var l=null,c=0;10>c;c++)!r.hasAttribute(c)&&n.hasAttribute(c)&&(l==null&&(l=new o(r)),l.se(c));return l!=null?l.zF():r},o}(h.sa);h.fe=k;var v=function(){function u(){this.map=[];var o=new k;this.add(o),(o=new k).se(1),this.add(o)}return u.fz=function(){return u.XK},u.prototype.VR=function(){return u.gt},u.prototype.add=function(o){var r=o.dc();if(u.gt!=null&&u.gt.dc()==r&&o.BG(u.gt))return u.gt;if(u.Fw!=null&&u.Fw.dc()==r&&o.BG(u.Fw))return u.Fw;var n=null;return this.map[r]!==void 0&&(n=this.map[r]),n==null&&((n=o.oM()).Ba==1?u.gt=n:n.Ba==2&&n.ld(1)==1?u.Fw=n:this.map[r]=n),n},u.XK=new u,u}()}(q||(q={}));var qs={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},o1={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},To=new(function(){function h(){this.MM=50,this.pp=new Map,this.ij=[]}return h.prototype.clear=function(){this.ij.length=0,this.pp.clear()},h.prototype.delete=function(k){return!!this.pp.delete(k)&&(this.ij.splice(this.ij.indexOf(k),1),!0)},h.prototype.get=function(k){var v=this.pp.get(k);if(v!==void 0)return this.ij[0]!==k&&(this.ij.splice(this.ij.indexOf(k),1),this.ij.unshift(k)),v},h.prototype.has=function(k){return this.pp.has(k)},h.prototype.set=function(k,v){return this.get(k)!==void 0&&this.delete(k),this.ij.unshift(k),this.pp.set(k,v),this.jM(),this},h.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var k=this.ij.pop();this.pp.delete(k)}},h}()),be=((Ei={}).convertJSONToGeometry=function(h){return q.ac.aP(h)},Ei.hasM=function(h){return h.hasAttribute(q.Kh.M)},Ei.hasZ=function(h){return h.hasAttribute(q.Kh.Z)},Ei.getPointX=function(h){return h.Ng()},Ei.getPointY=function(h){return h.kh()},Ei.getPointZ=function(h){return h.XR()},Ei.getPointM=function(h){return h.uR()},Ei.getXMin=function(h){return h.gs()},Ei.getYMin=function(h){return h.js()},Ei.getXMax=function(h){return h.fs()},Ei.getYMax=function(h){return h.hs()},Ei.getZExtent=function(h){return h.Vg(q.Kh.Z,0)},Ei.getMExtent=function(h){return h.Vg(q.Kh.M,0)},Ei.exportPaths=function(h){var k=[],v=h.ea(),u=null,o=null,r=h.hasAttribute(q.Kh.Z),n=h.hasAttribute(q.Kh.M);r&&(u=h.vb(q.Kh.Z)),n&&(o=h.vb(q.Kh.M));for(var l=new q.h,c=0;c<v;c++){for(var p=h.Ca(c),f=h.Ka(c),m=0,w=0,$=NaN,T=NaN,E=NaN,O=NaN,P=h.ec(c),L=[],F=p;F<p+f;F++){h.D(F,l),O=E=NaN;var z=[l.x,l.y];r&&(E=u.get(F),z.push(E)),n&&(O=o.get(F),z.push(O)),F==p&&P&&(m=l.x,w=l.y,$=E,T=O),L.push(z)}!P||m==l.x&&w==l.y&&(!r||isNaN($)&&isNaN(E)||$==E)&&(!n||isNaN(T)&&isNaN(O)||T==O)||L.push(L[0].slice(0)),k.push(L)}return k},Ei.exportPathsFlat=function(){},Ei.exportPoints=function(h){var k=h.hasAttribute(q.Kh.Z),v=h.hasAttribute(q.Kh.M),u=null,o=null;k&&(u=h.vb(q.Kh.Z)),v&&(o=h.vb(q.Kh.M));for(var r=new q.h,n=h.I(),l=[],c=0;c<n;c++){h.D(c,r);var p=[r.x,r.y];k&&p.push(u.get(c)),v&&p.push(o.get(c)),l.push(p)}return l},Ei.exportPointsFlat=function(){},Ei),Ma=new Map;return function(){function h(){}return h.buffer=hi,h.clip=C,h.contains=j,h.convexHull=Oe,h.crosses=D,h.cut=N,h.densify=i1,h.difference=Ne,h.disjoint=re,h.distance=V,h.equals=W,h.extendedSpatialReferenceInfo=A,h.generalize=Kp,h.geodesicArea=r1,h.geodesicBuffer=kt,h.geodesicDensify=Kv,h.geodesicLength=Xv,h.intersect=Be,h.intersects=K,h.isSimple=de,h.nearestCoordinate=er,h.nearestVertex=Zh,h.nearestVertices=$o,h.offset=dt,h.overlaps=se,h.planarArea=Yv,h.planarLength=Zv,h.relate=ue,h.simplify=we,h.symmetricDifference=Le,h.touches=Y,h.union=Pe,h.within=ee,h.rotate=q.Dx.rotate,h.flipHorizontal=q.Dx.EQ,h.flipVertical=q.Dx.FQ,h.intersectLinesToPoints=n2,h.ExtendedParams=q.tC,h.clearDefaultSpatialReferenceTolerance=s2,h.changeDefaultSpatialReferenceTolerance=r2,h._enableProjection=Qv,h._project=i2,h._getTransformation=e2,h._getTransformationBySuitability=t2,h}()}var s=i();s!==void 0&&(t.exports=s)}(rg,rg.exports);var HC=rg.exports;const ht=zO(HC),Are=Ere({__proto__:null,default:ht},[HC]),kre=Object.freeze(Object.defineProperty({__proto__:null,G:ht,g:Are},Symbol.toStringTag,{value:"Module"})),xt={convertToGEGeometry:Ore,exportPoint:Cre,exportPolygon:Pre,exportPolyline:Nre,exportMultipoint:Lre,exportExtent:Rre};function Ore(t,e){if(e==null)return null;let i="cache"in e?e.cache._geVersion:void 0;return i==null&&(i=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=i)),i}function Cre(t,e,i){const s=t.hasZ(e),a=t.hasM(e),d=new Ue({x:t.getPointX(e),y:t.getPointY(e),spatialReference:i});return s&&(d.z=t.getPointZ(e)),a&&(d.m=t.getPointM(e)),d.cache._geVersion=e,d}function Pre(t,e,i){const s=new Pn({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function Nre(t,e,i){const s=new as({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:i});return s.cache._geVersion=e,s}function Lre(t,e,i){const s=new Ap({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:i});return s.cache._geVersion=e,s}function Rre(t,e,i){const s=t.hasZ(e),a=t.hasM(e),d=new bt({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:i});if(s){const y=t.getZExtent(e);d.zmin=y.vmin,d.zmax=y.vmax}if(a){const y=t.getMExtent(e);d.mmin=y.vmin,d.mmax=y.vmax}return d.cache._geVersion=e,d}const jre=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:xt},Symbol.toStringTag,{value:"Module"}));function At(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function Dre(t){return ht.extendedSpatialReferenceInfo(t)}function Fre(t,e){return ht.clip(xt,At(t),t,e)}function zre(t,e){return ht.cut(xt,At(t),t,e)}function Vre(t,e){return ht.contains(xt,At(t),t,e)}function Gre(t,e){return ht.crosses(xt,At(t),t,e)}function Ure(t,e,i){return ht.distance(xt,At(t),t,e,i)}function qre(t,e){return ht.equals(xt,At(t),t,e)}function Bre(t,e){return ht.intersects(xt,At(t),t,e)}function Hre(t,e){return ht.touches(xt,At(t),t,e)}function Wre(t,e){return ht.within(xt,At(t),t,e)}function Jre(t,e){return ht.disjoint(xt,At(t),t,e)}function Kre(t,e){return ht.overlaps(xt,At(t),t,e)}function Yre(t,e,i){return ht.relate(xt,At(t),t,e,i)}function Zre(t){return ht.isSimple(xt,At(t),t)}function Xre(t){return ht.simplify(xt,At(t),t)}function Qre(t,e=!1){return ht.convexHull(xt,At(t),t,e)}function ese(t,e){return ht.difference(xt,At(t),t,e)}function tse(t,e){return ht.symmetricDifference(xt,At(t),t,e)}function ise(t,e){return ht.intersect(xt,At(t),t,e)}function rse(t,e=null){return ht.union(xt,At(t),t,e)}function sse(t,e,i,s,a,d){return ht.offset(xt,At(t),t,e,i,s,a,d)}function nse(t,e,i,s=!1){return ht.buffer(xt,At(t),t,e,i,s)}function ose(t,e,i,s,a,d){return ht.geodesicBuffer(xt,At(t),t,e,i,s,a,d)}function ase(t,e,i=!0){return ht.nearestCoordinate(xt,At(t),t,e,i)}function lse(t,e){return ht.nearestVertex(xt,At(t),t,e)}function use(t,e,i,s){return ht.nearestVertices(xt,At(t),t,e,i,s)}function W4(t){var e;return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?((e=t.extent)==null?void 0:e.center)??null:null}function hse(t,e,i){if(t==null)throw new $p;const s=t.spatialReference;if((i=i??W4(t))==null)throw new $p;const a=t.constructor.fromJSON(ht.rotate(t,e,i));return a.spatialReference=s,a}function cse(t,e){if(t==null)throw new $p;const i=t.spatialReference;if((e=e??W4(t))==null)throw new $p;const s=t.constructor.fromJSON(ht.flipHorizontal(t,e));return s.spatialReference=i,s}function pse(t,e){if(t==null)throw new $p;const i=t.spatialReference;if((e=e??W4(t))==null)throw new $p;const s=t.constructor.fromJSON(ht.flipVertical(t,e));return s.spatialReference=i,s}function dse(t,e,i,s){return ht.generalize(xt,At(t),t,e,i,s)}function fse(t,e,i){return ht.densify(xt,At(t),t,e,i)}function WC(t,e,i,s=0){return ht.geodesicDensify(xt,At(t),t,e,i,s)}function yse(t,e){return ht.planarArea(xt,At(t),t,e)}function gse(t,e){return ht.planarLength(xt,At(t),t,e)}function mse(t,e,i){return ht.geodesicArea(xt,At(t),t,e,i)}function vse(t,e,i){return ht.geodesicLength(xt,At(t),t,e,i)}function bse(t,e){return ht.intersectLinesToPoints(xt,At(t),t,e)}function wse(t,e){ht.changeDefaultSpatialReferenceTolerance(t,e)}function _se(t){ht.clearDefaultSpatialReferenceTolerance(t)}let $p=class extends Error{constructor(){super("Illegal Argument Exception")}};const Jye=Object.freeze(Object.defineProperty({__proto__:null,buffer:nse,changeDefaultSpatialReferenceTolerance:wse,clearDefaultSpatialReferenceTolerance:_se,clip:Fre,contains:Vre,convexHull:Qre,crosses:Gre,cut:zre,densify:fse,difference:ese,disjoint:Jre,distance:Ure,equals:qre,extendedSpatialReferenceInfo:Dre,flipHorizontal:cse,flipVertical:pse,generalize:dse,geodesicArea:mse,geodesicBuffer:ose,geodesicDensify:WC,geodesicLength:vse,intersect:ise,intersectLinesToPoints:bse,intersects:Bre,isSimple:Zre,nearestCoordinate:ase,nearestVertex:lse,nearestVertices:use,offset:sse,overlaps:Kre,planarArea:yse,planarLength:gse,relate:Yre,rotate:hse,simplify:Xre,symmetricDifference:tse,touches:Hre,union:rse,within:Wre},Symbol.toStringTag,{value:"Module"}));var k9;let pi=k9=class extends ye{static from(t){return xh(k9,t)}constructor(t){super(t),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}};b([S({type:Number,json:{write:!0}})],pi.prototype,"dpi",void 0),b([S()],pi.prototype,"floors",void 0),b([S({type:String,json:{write:!0}})],pi.prototype,"gdbVersion",void 0),b([S({types:kp,json:{read:Hl,write:!0}})],pi.prototype,"geometry",void 0),b([S({type:Number,json:{write:!0}})],pi.prototype,"geometryPrecision",void 0),b([S({type:Number,json:{write:!0}})],pi.prototype,"height",void 0),b([S({type:[Number],json:{write:!0}})],pi.prototype,"layerIds",void 0),b([S({type:["top","visible","all","popup"],json:{write:!0}})],pi.prototype,"layerOption",void 0),b([S({type:bt,json:{write:!0}})],pi.prototype,"mapExtent",void 0),b([S({type:Number,json:{write:!0}})],pi.prototype,"maxAllowableOffset",void 0),b([S({type:Boolean,json:{write:!0}})],pi.prototype,"returnFieldName",void 0),b([S({type:Boolean,json:{write:!0}})],pi.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{write:!0}})],pi.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:!0}})],pi.prototype,"returnUnformattedValues",void 0),b([S({type:Boolean,json:{write:!0}})],pi.prototype,"returnZ",void 0),b([S({type:Xe,json:{write:!0}})],pi.prototype,"spatialReference",void 0),b([S()],pi.prototype,"sublayers",void 0),b([S({type:xo,json:{write:!0}})],pi.prototype,"timeExtent",void 0),b([S({type:Number,json:{write:!0}})],pi.prototype,"tolerance",void 0),b([S({type:Number,json:{write:!0}})],pi.prototype,"width",void 0),pi=k9=b([J("esri.rest.support.IdentifyParameters")],pi);const JC=pi,K1={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new as({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Xe.WebMercator}),minus180Line:new as({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Xe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new as({paths:[[[180,-180],[180,180]]],spatialReference:Xe.WGS84}),minus180Line:new as({paths:[[[-180,-180],[-180,180]]],spatialReference:Xe.WGS84})}};function fh(t,e){return Math.ceil((t-e)/(2*e))}function KC(t,e){const i=Rd(t);for(const s of i)for(const a of s)a[0]+=e;return t}function Rd(t){return gh(t)?t.rings:t.paths}function Gp(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function ds(t){return typeof t=="string"?ur(t):ae(t)}function Up(t,e,i){const s={};for(const a in t){if(a==="declaredClass")continue;const d=t[a];if(d!=null&&typeof d!="function")if(Array.isArray(d)){s[a]=[];for(let y=0;y<d.length;y++)s[a][y]=Up(d[y])}else if(typeof d=="object")if(d.toJSON){const y=d.toJSON(i&&i[a]);s[a]=e?y:JSON.stringify(y)}else s[a]=e?d:JSON.stringify(d);else s[a]=d}return s}async function Sse(t,e,i,s){const a=ds(t),d=e[0].spatialReference,y={...s,query:{...a.query,f:"json",sr:JSON.stringify(d),target:JSON.stringify({geometryType:Gh(e[0]),geometries:e}),cutter:JSON.stringify(i)}},g=await pt(a.path+"/cut",y),{cutIndexes:_,geometries:x=[]}=g.data;return{cutIndexes:_,geometries:x.map(I=>{const A=Hl(I);return A.spatialReference=d,A})}}function xse(t){return{geometryType:Gh(t[0]),geometries:t.map(e=>e.toJSON())}}function YC(t,e,i){const s=cU(e);return t.map(a=>{const d=s.fromJSON(a);return d.spatialReference=i,d})}async function $se(t,e,i){const s=typeof t=="string"?ur(t):t,a=e[0].spatialReference,d=Gh(e[0]),y={...i,query:{...s.query,f:"json",sr:a.wkid??JSON.stringify(a),geometries:JSON.stringify(xse(e))}},{data:g}=await pt(s.path+"/simplify",y);return YC(g.geometries,d,a)}const ZC=me.getLogger("esri.geometry.support.normalizeUtils");function Tse(t){return t.type==="polygon"}function Mse(t){return t[0].type==="polygon"}function Ise(t){return t[0].type==="polyline"}function Ese(t,e){if(!(t instanceof as||t instanceof Pn)){const a="straightLineDensify: the input geometry is neither polyline nor polygon";throw ZC.error(a),new oe(a)}const i=Rd(t),s=[];for(const a of i){const d=[];s.push(d),d.push([a[0][0],a[0][1]]);for(let y=0;y<a.length-1;y++){const g=a[y][0],_=a[y][1],x=a[y+1][0],I=a[y+1][1],A=Math.sqrt((x-g)*(x-g)+(I-_)*(I-_)),C=(I-_)/A,N=(x-g)/A,j=A/e;if(j>1){for(let K=1;K<=j-1;K++){const Y=K*e,ee=N*Y+g,re=C*Y+_;d.push([ee,re])}const D=(A+Math.floor(j-1)*e)/2,V=N*D+g,W=C*D+_;d.push([V,W])}d.push([x,I])}}return Tse(t)?new Pn({rings:s,spatialReference:t.spatialReference}):new as({paths:s,spatialReference:t.spatialReference})}function H7(t,e,i){if(e){const s=Ese(t,1e6);t=qc(s,!0)}return i&&(t=KC(t,i)),t}function W7(t,e,i){if(Array.isArray(t)){const s=t[0];if(s>e){const a=fh(s,e);t[0]=s+a*(-2*e)}else if(s<i){const a=fh(s,i);t[0]=s+a*(-2*i)}}else{const s=t.x;if(s>e){const a=fh(s,e);t=t.clone().offset(a*(-2*e),0)}else if(s<i){const a=fh(s,i);t=t.clone().offset(a*(-2*i),0)}}return t}function Ase(t,e){let i=-1;for(let s=0;s<e.cutIndexes.length;s++){const a=e.cutIndexes[s],d=e.geometries[s],y=Rd(d);for(let g=0;g<y.length;g++){const _=y[g];_.some(x=>{if(x[0]<180)return!0;{let I=0;for(let C=0;C<_.length;C++){const N=_[C][0];I=N>I?N:I}I=Number(I.toFixed(9));const A=-360*fh(I,180);for(let C=0;C<_.length;C++){const N=d.getPoint(g,C);d.setPoint(g,C,N.clone().offset(A,0))}return!0}})}if(a===i){if(Mse(t))for(const g of Rd(d))t[a]=t[a].addRing(g);else if(Ise(t))for(const g of Rd(d))t[a]=t[a].addPath(g)}else i=a,t[a]=d}return t}async function J4(t,e,i){if(!Array.isArray(t))return J4([t],e);e&&typeof e!="string"&&ZC.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s=typeof e=="string"?e:(e==null?void 0:e.url)??mt.geometryServiceUrl;let a,d,y,g,_,x,I,A,C=0;const N=[],j=[];for(const ee of t)if(ee!=null)if(a||(a=ee.spatialReference,d=In(a),y=a.isWebMercator,x=y?102100:4326,g=K1[x].maxX,_=K1[x].minX,I=K1[x].plus180Line,A=K1[x].minus180Line),d)if(ee.type==="mesh")j.push(ee);else if(ee.type==="point")j.push(W7(ee.clone(),g,_));else if(ee.type==="multipoint"){const re=ee.clone();re.points=re.points.map(se=>W7(se,g,_)),j.push(re)}else if(ee.type==="extent"){const re=ee.clone()._normalize(!1,!1,d);j.push(re.rings?new Pn(re):re)}else if(ee.extent){const re=ee.extent,se=fh(re.xmin,_)*(2*g);let ue=se===0?ee.clone():KC(ee.clone(),se);re.offset(se,0),re.intersects(I)&&re.xmax!==g?(C=re.xmax>C?re.xmax:C,ue=H7(ue,y),N.push(ue),j.push("cut")):re.intersects(A)&&re.xmin!==_?(C=re.xmax*(2*g)>C?re.xmax*(2*g):C,ue=H7(ue,y,360),N.push(ue),j.push("cut")):j.push(ue)}else j.push(ee.clone());else j.push(ee);else j.push(ee);let D=fh(C,g),V=-90;const W=D,K=new as;for(;D>0;){const ee=360*D-180;K.addPath([[ee,V],[ee,-1*V]]),V*=-1,D--}if(N.length>0&&W>0){const ee=Ase(N,await Sse(s,N,K,i)),re=[],se=[];for(let we=0;we<j.length;we++){const Oe=j[we];if(Oe!=="cut")se.push(Oe);else{const Ne=ee.shift(),Le=t[we];Le!=null&&Le.type==="polygon"&&Le.rings&&Le.rings.length>1&&Ne.rings.length>=Le.rings.length?(re.push(Ne),se.push("simplify")):se.push(y?Vl(Ne):Ne)}}if(!re.length)return se;const ue=await $se(s,re,i),de=[];for(let we=0;we<se.length;we++){const Oe=se[we];Oe!=="simplify"?de.push(Oe):de.push(y?Vl(ue.shift()):ue.shift())}return de}const Y=[];for(let ee=0;ee<j.length;ee++){const re=j[ee];if(re!=="cut")Y.push(re);else{const se=N.shift();Y.push(y===!0?Vl(se):se)}}return Y}function Kye(t,e){const i=In(e);if(i){const[s,a]=i.valid,d=a-s;if(t<s)for(;t<s;)t+=d;if(t>a)for(;t>a;)t-=d}return t}async function Yye(t,e){const{WhereClause:i}=await _e(()=>import("./WhereClause-c83dcc9b.js").then(s=>s.W),["assets/WhereClause-c83dcc9b.js","assets/executionError-c92d3b85.js"]);return i.create(t,e)}function K4(t,e){return t!=null?e!=null?`(${t}) AND (${e})`:t:e}const XC=96;function QC(t,e){const i=e||t.extent,s=t.width,a=_o(i&&i.spatialReference);return i&&s?i.width/s*a*rM*XC:0}function kse(t,e){return t/(_o(e)*rM*XC)}function Ose(t,e){const i=t.extent,s=t.width-(t.padding?t.padding.left+t.padding.right:0),a=kse(e,i.spatialReference);return i.clone().expand(a*s/i.width)}function Zye(t){var i;const e=t.layer;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)&&"floors"in t.view?eP(t.view.floors,e.floorInfo.floorField):null}function jm(t,e){var i;return"floorInfo"in e&&((i=e.floorInfo)!=null&&i.floorField)?eP(t,e.floorInfo.floorField):null}function eP(t,e){if(!(t!=null&&t.length))return null;const i=t.filter(s=>s!=="").map(s=>`'${s}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function J7(t,e,i){return e.flatten(({sublayers:a})=>a).length!==t.length?!0:!!t.some(a=>a.originIdOf("minScale")>i||a.originIdOf("maxScale")>i||a.originIdOf("renderer")>i||a.originIdOf("labelingInfo")>i||a.originIdOf("opacity")>i||a.originIdOf("labelsVisible")>i||a.originIdOf("source")>i)||!iP(t,e)}function tP(t,e,i){return!!t.some(s=>{const a=s.source;return!(!a||a.type==="map-layer"&&a.mapLayerId===s.id&&(a.gdbVersion==null||a.gdbVersion===i))||s.originIdOf("renderer")>Te.SERVICE||s.originIdOf("labelingInfo")>Te.SERVICE||s.originIdOf("opacity")>Te.SERVICE||s.originIdOf("labelsVisible")>Te.SERVICE})||!iP(t,e)}function iP(t,e){if(!t||!t.length||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:d})=>d&&d.toArray().reverse()).map(d=>d.id).toArray();if(t.length>i.length)return!1;let s=0;const a=i.length;for(const{id:d}of t){for(;s<a&&i[s]!==d;)s++;if(s>=a)return!1}return!0}function Cse(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition&&e.layerDefinition.minScale!=null)}const K7=t=>t.spatialReference.wkid||JSON.stringify(t.spatialReference);function Pse(t,e){const{dpi:i,gdbVersion:s,geometry:a,geometryPrecision:d,height:y,layerOption:g,mapExtent:_,maxAllowableOffset:x,returnFieldName:I,returnGeometry:A,returnUnformattedValues:C,returnZ:N,spatialReference:j,timeExtent:D,tolerance:V,width:W}=t.toJSON(),{dynamicLayers:K,layerDefs:Y,layerIds:ee}=Nse(t),re=e&&e.geometry!=null?e.geometry:null,se={geometryPrecision:d,maxAllowableOffset:x,returnFieldName:I,returnGeometry:A,returnUnformattedValues:C,returnZ:N,tolerance:V},ue=re&&re.toJSON()||a;if(se.imageDisplay=`${W},${y},${i}`,s&&(se.gdbVersion=s),ue&&(delete ue.spatialReference,se.geometry=JSON.stringify(ue),se.geometryType=Gh(ue)),j?se.sr=j.wkid||JSON.stringify(j):ue&&ue.spatialReference?se.sr=K7(ue):_&&_.spatialReference&&(se.sr=K7(_)),se.time=D?[D.start,D.end].join(","):null,_){const{xmin:de,ymin:we,xmax:Oe,ymax:Ne}=_;se.mapExtent=`${de},${we},${Oe},${Ne}`}return Y&&(se.layerDefs=Y),K&&!Y&&(se.dynamicLayers=K),se.layers=g==="popup"?"visible":g,ee&&!K&&(se.layers+=`:${ee.join(",")}`),se}function Nse(t){var j,D;const{mapExtent:e,floors:i,width:s,sublayers:a,layerIds:d,layerOption:y,gdbVersion:g}=t,_=(D=(j=a==null?void 0:a.find(V=>V.layer!=null))==null?void 0:j.layer)==null?void 0:D.serviceSublayers,x=y==="popup",I={},A=QC({extent:e,width:s,spatialReference:e==null?void 0:e.spatialReference}),C=[],N=V=>{const W=A===0,K=V.minScale===0||A<=V.minScale,Y=V.maxScale===0||A>=V.maxScale;if(V.visible&&(W||K&&Y))if(V.sublayers)V.sublayers.forEach(N);else{if((d==null?void 0:d.includes(V.id))===!1||x&&(!V.popupTemplate||!V.popupEnabled))return;C.unshift(V)}};if(a==null||a.forEach(N),a&&!C.length)I.layerIds=[];else{const V=tP(C,_,g),W=C.map(K=>{const Y=jm(i,K);return K.toExportImageJSON(Y)});if(V)I.dynamicLayers=JSON.stringify(W);else{if(a){let Y=C.map(({id:ee})=>ee);d&&(Y=Y.filter(ee=>d.includes(ee))),I.layerIds=Y}else d!=null&&d.length&&(I.layerIds=d);const K=Lse(i,C);if(K!=null&&K.length){const Y={};for(const ee of K)ee.definitionExpression&&(Y[ee.id]=ee.definitionExpression);Object.keys(Y).length&&(I.layerDefs=JSON.stringify(Y))}}}return I}function Lse(t,e){const i=!!(t!=null&&t.length),s=e.filter(a=>a.definitionExpression!=null||i&&a.floorInfo!=null);return s.length?s.map(a=>{const d=jm(t,a),y=K4(d,a.definitionExpression);return{id:a.id,definitionExpression:y??void 0}}):null}let Ho=class extends ye{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(e,i){return Nr.fromJSON({attributes:{...i.attributes},geometry:{...i.geometry}})}writeFeature(e,i){if(!e)return;const{attributes:s,geometry:a}=e;s&&(i.attributes={...s}),a!=null&&(i.geometry=a.toJSON(),i.geometryType=gI.toJSON(a.type))}};b([S({type:String,json:{write:!0}})],Ho.prototype,"displayFieldName",void 0),b([S({type:Nr})],Ho.prototype,"feature",void 0),b([Ce("feature",["attributes","geometry"])],Ho.prototype,"readFeature",null),b([ke("feature")],Ho.prototype,"writeFeature",null),b([S({type:Number,json:{write:!0}})],Ho.prototype,"layerId",void 0),b([S({type:String,json:{write:!0}})],Ho.prototype,"layerName",void 0),Ho=b([J("esri.rest.support.IdentifyResult")],Ho);const Rse=Ho;async function jse(t,e,i){const s=(e=Fse(e)).geometry?[e.geometry]:[],a=ds(t);return a.path+="/identify",J4(s).then(d=>{const y=Pse(e,{geometry:d&&d[0]}),g=Up({...a.query,f:"json",...y}),_=Gp(g,i);return pt(a.path,_).then(Dse).then(x=>zse(x,e.sublayers))})}function Dse(t){const e=t.data;return e.results=e.results||[],e.exceededTransferLimit=Boolean(e.exceededTransferLimit),e.results=e.results.map(i=>Rse.fromJSON(i)),e}function Fse(t){return t=JC.from(t)}function zse(t,e){if(!(e!=null&&e.length))return t;const i=new Map;function s(a){i.set(a.id,a),a.sublayers&&a.sublayers.forEach(s)}e.forEach(s);for(const a of t.results)a.feature.sourceLayer=i.get(a.layerId);return t}let mr=class extends ye{constructor(e){super(e),this.contains=!0,this.dynamicLayerInfos=null,this.gdbVersion=null,this.geometryPrecision=null,this.layerDefinitions=null,this.layerIds=null,this.maxAllowableOffset=null,this.outSpatialReference=null,this.returnGeometry=!1,this.searchFields=null,this.searchText=null}};b([S({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],mr.prototype,"contains",void 0),b([S({type:[Object],json:{read:{source:"dynamicLayers"},write:{target:"dynamicLayers"}}})],mr.prototype,"dynamicLayerInfos",void 0),b([S({type:String,json:{write:!0}})],mr.prototype,"gdbVersion",void 0),b([S({type:Number,json:{write:!0}})],mr.prototype,"geometryPrecision",void 0),b([S({type:[Object],json:{write:!0}})],mr.prototype,"layerDefinitions",void 0),b([S({type:[Number],json:{write:!0}})],mr.prototype,"layerIds",void 0),b([S({type:Number,json:{write:!0}})],mr.prototype,"maxAllowableOffset",void 0),b([S({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],mr.prototype,"outSpatialReference",void 0),b([S({type:Boolean,json:{write:{enabled:!0,isRequired:!0}}})],mr.prototype,"returnGeometry",void 0),b([S({type:[String],json:{write:!0}})],mr.prototype,"searchFields",void 0),b([S({type:String,json:{write:!0}})],mr.prototype,"searchText",void 0),mr=b([J("esri.rest.support.FindParameters")],mr),mr.from=ui(mr);const rP=mr;var O9;let ul=O9=class extends Nf{constructor(t){super(t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new O9({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};b([S()],ul.prototype,"displayValueEnabled",void 0),b([S()],ul.prototype,"max",void 0),b([S()],ul.prototype,"min",void 0),b([S()],ul.prototype,"step",void 0),b([S()],ul.prototype,"value",void 0),ul=O9=b([J("esri.support.Action.ActionSlider")],ul);const Vse=ul,sP={hide:"hide",hideChildren:"hide-children"};function Dm(t){if(t)return t.listMode!=null?t.listMode:void 0}function Gse(t){if(t)return t.minScale!=null?t.minScale:void 0}function Use(t){if(t)return t.maxScale!=null?t.maxScale:void 0}function qse(t){if(!t)return"inherited";const e=t.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof e=="boolean")return e?"independent":"inherited";const i=t.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":t.visibilityMode!=null?t.visibilityMode:"independent"}function nP(t){if(t&&(!("type"in t)||t.type!=="wmts")&&t.listMode!==sP.hideChildren)return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Bse(t){const e=t&&(t.get("layer.layer")||t.layer);if(!e)return!1;const i=e.get("capabilities.exportMap.supportsDynamicLayers");return typeof i!="boolean"||i}function Hse(t){return Dm(t)!==sP.hide}function Wse(t,e){if(!t||isNaN(e))return!1;const i=Gse(t),s=Use(t),a=i!=null&&!isNaN(i)&&i>0&&e>i,d=s!=null&&!isNaN(s)&&s>0&&e<s;return a||d}function oP(t,e){t&&t.sort((i,s)=>{const a=e.indexOf(i.uid),d=e.indexOf(s.uid);return a>d?-1:a<d?1:0})}function Jse(t,e){const i=t==null?void 0:t.layer;if(!i)return;const s=nP(i);s&&oP(i.get(s),e)}function Y7(t){const e=t==null?void 0:t.layer;return e&&"layers"in e?e.layers:null}function ab(t,e){var s;const i=(s=t.layer)==null?void 0:s.uid;return i!=null?e.find(a=>{var d;return((d=a.layer)==null?void 0:d.uid)===i}):null}function Kse(t){const e=Yse(t)?t:null,i=t==null?void 0:t.parent,s=(i==null?void 0:i.type)==="map-image"?e==null?void 0:e.source:null,a="";return s&&i?{layer:i,title:a,sublayerIds:[s.mapLayerId]}:{layer:t,title:a}}function Yse(t){return!!(t!=null&&t.layer)}function aP(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,s=Array.isArray(t)?t:Zse(t);i.push(...s)}}function Zse(t){return t.split(",").map(e=>e.trim())}function Z7(t){return t&&typeof t.render=="function"}function ege(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const lP="esri-layer-list-panel",y0=`${lP}__content`,ko={base:lP,content:y0,contentLegend:`${y0}--legend`,contentString:`${y0}--string`,contentElement:`${y0}--html-element`,contentWidget:`${y0}--widget`},Xse="legends";let Es=class extends Uh(xa){constructor(e,i){super(e,i),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(Me(()=>this.content,e=>this._createLegend(e),vt))}destroy(){this._legend=Kt(this._legend)}get className(){const{image:e}=this,i=this._getFirstWidget();return this._get("className")||(!e&&i?i.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){var a;const{listItem:e,_legend:i,content:s}=this;return!e||!(Array.isArray(s)&&s.length>1)&&!!i&&(!((a=i.activeLayerInfos)!=null&&a.length)||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||((e==null?void 0:e.label)??"")}set title(e){this._override("title",e)}render(){return fe("div",{class:ko.base},this._renderContents())}_renderContent(e){const{_legend:i,disabled:s}=this;return!e||s?null:e==="legend"&&i?fe("div",{class:this.classes(ko.content,ko.contentLegend),key:i},i.render()):typeof e=="string"?fe("div",{class:this.classes(ko.content,ko.contentString),key:e,innerHTML:e}):Z7(e)?fe("div",{class:this.classes(ko.content,ko.contentWidget),key:e},e.render()):e instanceof HTMLElement?fe("div",{class:this.classes(ko.content,ko.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._renderContent(i)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:i,view:s}=e;return i&&s?{view:s,layerInfos:[Kse(i)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:i}=await _e(()=>import("./Legend-d15c61b6.js"),["assets/Legend-d15c61b6.js","assets/EffectView-f21b790b.js","assets/pixelRangeUtils-cc28ceb4.js","assets/utils-461a5343.js","assets/utils-fb8f30fc.js","assets/symbolUtils-1454c878.js","assets/colorUtils-c0f43caf.js","assets/webStyleSymbolUtils-8aaf42ac.js","assets/devEnvironmentUtils-5002a058.js"]),{listItem:s}=this,a=new i(this._getLegendOptions());this._legend=a,this.notifyChange("className"),this.notifyChange("title");const d=Me(()=>{var y,g;return[s==null?void 0:s.view,s==null?void 0:s.layer,(y=s==null?void 0:s.layer)==null?void 0:y.source,(g=s==null?void 0:s.layer)==null?void 0:g.parent]},()=>this._updateLegend(a),vt);this.addHandles(d,Xse),this.scheduleRender()}_hasLegend(e){const i="legend";return e===i||e!=null&&!!Array.isArray(e)&&e.includes(i)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:Z7(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let i=null;return e.some(s=>{const a=this._getWidget(s);return a&&(i=a),!!a}),i}return this._getWidget(e)}};b([S()],Es.prototype,"_legend",void 0),b([S()],Es.prototype,"className",null),b([S()],Es.prototype,"content",void 0),b([S()],Es.prototype,"disabled",null),b([S()],Es.prototype,"image",void 0),b([S()],Es.prototype,"listItem",void 0),b([S()],Es.prototype,"title",null),b([S()],Es.prototype,"open",void 0),b([S()],Es.prototype,"visible",void 0),Es=b([J("esri.widgets.LayerList.ListItemPanel")],Es);const uP=Es;var td;const Qse=Ge.ofType({key:"type",defaultKeyValue:"button",base:Nf,typeMap:{button:FE,toggle:zE,slider:Vse}}),hP=Ge.ofType(Qse),Y1="layer",lb="child-list-mode",ene="hide",tne="esri.widgets.LayerList.ListItem";let Wt=td=class extends Uh(lu(je)){constructor(t){super(t),this.actionsSections=new hP,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Ge.ofType(td)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([Me(()=>this.layer,t=>this._watchLayerProperties(t),vt),Me(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),vt),Me(()=>this.view,t=>this._updateChildrenView(t),vt),Me(()=>this.panel,t=>this._setListItemOnPanel(t),vt),Me(()=>[this.layer,this.view],()=>this._getLayerView(),vt)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){var t;return(t=this.layer)==null?void 0:t.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}castPanel(t){return this.get("panel.open")&&!t.hasOwnProperty("open")&&(t.open=!0),t?new uP(t):null}get title(){const t=this.get("layer.layer");return(!t||t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){var i;const{layer:t,checkPublishStatusEnabled:e}=this;return e&&t&&"publishingInfo"in t&&((i=t.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:s}=this;return!s&&!e&&(t?t.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var t;return(t=this.layer)==null?void 0:t.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return!Wse(this.layer,this.get("view.scale"))}get visibilityMode(){return qse(this.layer)}clone(){return new td({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){const e=this.children;e&&e.forEach(i=>i.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_addChildren(t){if(this.handles.remove(lb),this.children.removeAll(),!t)return;t.forEach(i=>{this.handles.add(Me(()=>i.listMode,()=>this._addChildren(t)),lb)});const e=t.filter(i=>Dm(i)!==ene);this.children.addMany(this._makeChildren(e))}_watchSublayerChanges(t){t&&this.handles.add(t.on("change",()=>{this._addChildren(t)}),Y1)}_initializeChildLayers(t){this._addChildren(t),this._watchSublayerChanges(t)}_makeChildren(t){return t.map(e=>Hse(e)?new td({layer:e,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(ho).reverse()}_watchLayerProperties(t){if(!this.handles||(this.handles.remove(Y1),this.handles.remove(lb),!t))return;if(this.handles.add(Me(()=>t.listMode,()=>this._watchLayerProperties(t)),Y1),Dm(t)==="hide-children")return void this.children.removeAll();const e=nP(t);e&&this.handles.add(Me(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},vt),Y1)}async _getLayerView(){const{layer:t,view:e}=this;if(t&&e)try{const i=await e.whenLayerView(t);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};b([S({type:hP})],Wt.prototype,"actionsSections",void 0),b([S()],Wt.prototype,"actionsOpen",void 0),b([S()],Wt.prototype,"checkPublishStatusEnabled",void 0),b([S({type:Ge})],Wt.prototype,"children",void 0),b([S()],Wt.prototype,"childrenSortable",void 0),b([S({readOnly:!0})],Wt.prototype,"connectionStatus",null),b([S({readOnly:!0})],Wt.prototype,"error",null),b([S()],Wt.prototype,"hidden",void 0),b([S({readOnly:!0})],Wt.prototype,"incompatible",null),b([S()],Wt.prototype,"layer",void 0),b([S({readOnly:!0})],Wt.prototype,"layerView",void 0),b([S()],Wt.prototype,"listItemCreatedFunction",void 0),b([S()],Wt.prototype,"open",void 0),b([S({type:uP})],Wt.prototype,"panel",void 0),b([Ft("panel")],Wt.prototype,"castPanel",null),b([S()],Wt.prototype,"parent",void 0),b([S()],Wt.prototype,"sortable",void 0),b([S()],Wt.prototype,"title",null),b([S({readOnly:!0})],Wt.prototype,"publishing",null),b([S({readOnly:!0})],Wt.prototype,"updating",null),b([S()],Wt.prototype,"view",void 0),b([S()],Wt.prototype,"visible",null),b([S({readOnly:!0})],Wt.prototype,"visibleAtCurrentScale",null),b([S({readOnly:!0})],Wt.prototype,"visibilityMode",null),Wt=td=b([J(tne)],Wt);const Y4=Wt,Xs={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},ine="hide",cP=Ge.ofType(Y4);let hl=class extends _a.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new cP,this.view=null}initialize(){this.addHandles([Me(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),vt),Me(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],Xs.view)}destroy(){this.removeAllHandles(),this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,s,a){var N,j;const d=e==null?void 0:e.layer;if(!d)return;const y=(j=(N=this.view)==null?void 0:N.map)==null?void 0:j.layers,g=i?Y7(i):y,_=s?Y7(s):y;if(!g||!_)return;const{operationalItems:x}=this,I=(i==null?void 0:i.children)||x,A=(s==null?void 0:s.children)||x,C=_.length-a;e.parent=s||null,I.includes(e)&&I.remove(e),g.includes(d)&&g.remove(d),A.includes(e)||A.add(e,C),_.includes(d)||_.add(d,C)}_createLayerViewHandles(e){this.removeHandles(Xs.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Xs.layerViews)}_createMapLayerHandles(e){this.removeHandles(Xs.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),Xs.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:s,checkPublishStatusEnabled:a}=this;return new Y4({checkPublishStatusEnabled:a,layer:e,listItemCreatedFunction:s,view:i})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(i=>Dm(i)!==ine)}_watchLayersListMode(e){this.removeHandles(Xs.layerListMode),e&&e.forEach(i=>{"listMode"in i&&this.addHandles(Me(()=>i.listMode,()=>this._compileList()),Xs.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const i=this._getViewableLayers(e);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(s=>{i.find(a=>a.layer===s)||i.add(this._createListItem(s))})}_removeItems(e){const{operationalItems:i}=this,s=[];i.forEach(a=>{a&&e&&e.includes(a.layer)||s.push(a)}),i.removeMany(s)}_sortItems(e){const{operationalItems:i}=this;i.sort((s,a)=>{const d=e.indexOf(s.layer),y=e.indexOf(a.layer);return d>y?-1:d<y?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([Xs.mapLayers,Xs.layerViews,Xs.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([Me(()=>{var i,s;return(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.allLayers},i=>this._createMapLayerHandles(i),vt),Me(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),vt)],Xs.viewLayers)}};b([S()],hl.prototype,"checkPublishStatusEnabled",void 0),b([S()],hl.prototype,"listItemCreatedFunction",void 0),b([S({type:cP})],hl.prototype,"operationalItems",void 0),b([S({readOnly:!0})],hl.prototype,"state",null),b([S()],hl.prototype,"view",void 0),hl=b([J("esri.widgets.LayerList.LayerListViewModel")],hl);const pP=hl;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function X7(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function wo(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?X7(Object(i),!0).forEach(function(s){rne(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):X7(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}function sg(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sg=function(e){return typeof e}:sg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function rne(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function va(){return va=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},va.apply(this,arguments)}function sne(t,e){if(t==null)return{};var i={},s=Object.keys(t),a,d;for(d=0;d<s.length;d++)a=s[d],!(e.indexOf(a)>=0)&&(i[a]=t[a]);return i}function nne(t,e){if(t==null)return{};var i=sne(t,e),s,a;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(a=0;a<d.length;a++)s=d[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(i[s]=t[s])}return i}var one="1.15.0";function la(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var $a=la(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Kf=la(/Edge/i),Q7=la(/firefox/i),jd=la(/safari/i)&&!la(/chrome/i)&&!la(/android/i),dP=la(/iP(ad|od|hone)/i),fP=la(/chrome/i)&&la(/android/i),yP={capture:!1,passive:!1};function jt(t,e,i){t.addEventListener(e,i,!$a&&yP)}function Mt(t,e,i){t.removeEventListener(e,i,!$a&&yP)}function Fm(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ane(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ao(t,e,i,s){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Fm(t,e):Fm(t,e))||s&&t===i)return t;if(t===i)break}while(t=ane(t))}return null}var e8=/\s+/g;function Kr(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var s=(" "+t.className+" ").replace(e8," ").replace(" "+e+" "," ");t.className=(s+(i?" "+e:"")).replace(e8," ")}}function Ye(t,e,i){var s=t&&t.style;if(s){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in s)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),s[e]=i+(typeof i=="string"?"":"px")}}function ap(t,e){var i="";if(typeof t=="string")i=t;else do{var s=Ye(t,"transform");s&&s!=="none"&&(i=s+" "+i)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function gP(t,e,i){if(t){var s=t.getElementsByTagName(e),a=0,d=s.length;if(i)for(;a<d;a++)i(s[a],a);return s}return[]}function fo(){var t=document.scrollingElement;return t||document.documentElement}function Gi(t,e,i,s,a){if(!(!t.getBoundingClientRect&&t!==window)){var d,y,g,_,x,I,A;if(t!==window&&t.parentNode&&t!==fo()?(d=t.getBoundingClientRect(),y=d.top,g=d.left,_=d.bottom,x=d.right,I=d.height,A=d.width):(y=0,g=0,_=window.innerHeight,x=window.innerWidth,I=window.innerHeight,A=window.innerWidth),(e||i)&&t!==window&&(a=a||t.parentNode,!$a))do if(a&&a.getBoundingClientRect&&(Ye(a,"transform")!=="none"||i&&Ye(a,"position")!=="static")){var C=a.getBoundingClientRect();y-=C.top+parseInt(Ye(a,"border-top-width")),g-=C.left+parseInt(Ye(a,"border-left-width")),_=y+d.height,x=g+d.width;break}while(a=a.parentNode);if(s&&t!==window){var N=ap(a||t),j=N&&N.a,D=N&&N.d;N&&(y/=D,g/=j,A/=j,I/=D,_=y+I,x=g+A)}return{top:y,left:g,bottom:_,right:x,width:A,height:I}}}function t8(t,e,i){for(var s=Fl(t,!0),a=Gi(t)[e];s;){var d=Gi(s)[i],y=void 0;if(i==="top"||i==="left"?y=a>=d:y=a<=d,!y)return s;if(s===fo())break;s=Fl(s,!1)}return!1}function Tp(t,e,i,s){for(var a=0,d=0,y=t.children;d<y.length;){if(y[d].style.display!=="none"&&y[d]!==Ze.ghost&&(s||y[d]!==Ze.dragged)&&ao(y[d],i.draggable,t,!1)){if(a===e)return y[d];a++}d++}return null}function Z4(t,e){for(var i=t.lastElementChild;i&&(i===Ze.ghost||Ye(i,"display")==="none"||e&&!Fm(i,e));)i=i.previousElementSibling;return i||null}function ks(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ze.clone&&(!e||Fm(t,e))&&i++;return i}function i8(t){var e=0,i=0,s=fo();if(t)do{var a=ap(t),d=a.a,y=a.d;e+=t.scrollLeft*d,i+=t.scrollTop*y}while(t!==s&&(t=t.parentNode));return[e,i]}function lne(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t[i][s])return Number(i)}return-1}function Fl(t,e){if(!t||!t.getBoundingClientRect)return fo();var i=t,s=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=Ye(i);if(i.clientWidth<i.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return fo();if(s||e)return i;s=!0}}while(i=i.parentNode);return fo()}function une(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function ub(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Dd;function mP(t,e){return function(){if(!Dd){var i=arguments,s=this;i.length===1?t.call(s,i[0]):t.apply(s,i),Dd=setTimeout(function(){Dd=void 0},e)}}}function hne(){clearTimeout(Dd),Dd=void 0}function vP(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function bP(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var os="Sortable"+new Date().getTime();function cne(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(a){if(!(Ye(a,"display")==="none"||a===Ze.ghost)){t.push({target:a,rect:Gi(a)});var d=wo({},t[t.length-1].rect);if(a.thisAnimationDuration){var y=ap(a,!0);y&&(d.top-=y.f,d.left-=y.e)}a.fromRect=d}})}},addAnimationState:function(s){t.push(s)},removeAnimationState:function(s){t.splice(lne(t,{target:s}),1)},animateAll:function(s){var a=this;if(!this.options.animation){clearTimeout(e),typeof s=="function"&&s();return}var d=!1,y=0;t.forEach(function(g){var _=0,x=g.target,I=x.fromRect,A=Gi(x),C=x.prevFromRect,N=x.prevToRect,j=g.rect,D=ap(x,!0);D&&(A.top-=D.f,A.left-=D.e),x.toRect=A,x.thisAnimationDuration&&ub(C,A)&&!ub(I,A)&&(j.top-A.top)/(j.left-A.left)===(I.top-A.top)/(I.left-A.left)&&(_=dne(j,C,N,a.options)),ub(A,I)||(x.prevFromRect=I,x.prevToRect=A,_||(_=a.options.animation),a.animate(x,j,A,_)),_&&(d=!0,y=Math.max(y,_),clearTimeout(x.animationResetTimer),x.animationResetTimer=setTimeout(function(){x.animationTime=0,x.prevFromRect=null,x.fromRect=null,x.prevToRect=null,x.thisAnimationDuration=null},_),x.thisAnimationDuration=_)}),clearTimeout(e),d?e=setTimeout(function(){typeof s=="function"&&s()},y):typeof s=="function"&&s(),t=[]},animate:function(s,a,d,y){if(y){Ye(s,"transition",""),Ye(s,"transform","");var g=ap(this.el),_=g&&g.a,x=g&&g.d,I=(a.left-d.left)/(_||1),A=(a.top-d.top)/(x||1);s.animatingX=!!I,s.animatingY=!!A,Ye(s,"transform","translate3d("+I+"px,"+A+"px,0)"),this.forRepaintDummy=pne(s),Ye(s,"transition","transform "+y+"ms"+(this.options.easing?" "+this.options.easing:"")),Ye(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Ye(s,"transition",""),Ye(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},y)}}}}function pne(t){return t.offsetWidth}function dne(t,e,i,s){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*s.animation}var hc=[],hb={initializeByDefault:!0},Yf={mount:function(e){for(var i in hb)hb.hasOwnProperty(i)&&!(i in e)&&(e[i]=hb[i]);hc.forEach(function(s){if(s.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),hc.push(e)},pluginEvent:function(e,i,s){var a=this;this.eventCanceled=!1,s.cancel=function(){a.eventCanceled=!0};var d=e+"Global";hc.forEach(function(y){i[y.pluginName]&&(i[y.pluginName][d]&&i[y.pluginName][d](wo({sortable:i},s)),i.options[y.pluginName]&&i[y.pluginName][e]&&i[y.pluginName][e](wo({sortable:i},s)))})},initializePlugins:function(e,i,s,a){hc.forEach(function(g){var _=g.pluginName;if(!(!e.options[_]&&!g.initializeByDefault)){var x=new g(e,i,e.options);x.sortable=e,x.options=e.options,e[_]=x,va(s,x.defaults)}});for(var d in e.options)if(e.options.hasOwnProperty(d)){var y=this.modifyOption(e,d,e.options[d]);typeof y<"u"&&(e.options[d]=y)}},getEventProperties:function(e,i){var s={};return hc.forEach(function(a){typeof a.eventProperties=="function"&&va(s,a.eventProperties.call(i[a.pluginName],e))}),s},modifyOption:function(e,i,s){var a;return hc.forEach(function(d){e[d.pluginName]&&d.optionListeners&&typeof d.optionListeners[i]=="function"&&(a=d.optionListeners[i].call(e[d.pluginName],s))}),a}};function fne(t){var e=t.sortable,i=t.rootEl,s=t.name,a=t.targetEl,d=t.cloneEl,y=t.toEl,g=t.fromEl,_=t.oldIndex,x=t.newIndex,I=t.oldDraggableIndex,A=t.newDraggableIndex,C=t.originalEvent,N=t.putSortable,j=t.extraEventProperties;if(e=e||i&&i[os],!!e){var D,V=e.options,W="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!$a&&!Kf?D=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(D=document.createEvent("Event"),D.initEvent(s,!0,!0)),D.to=y||i,D.from=g||i,D.item=a||i,D.clone=d,D.oldIndex=_,D.newIndex=x,D.oldDraggableIndex=I,D.newDraggableIndex=A,D.originalEvent=C,D.pullMode=N?N.lastPutMode:void 0;var K=wo(wo({},j),Yf.getEventProperties(s,e));for(var Y in K)D[Y]=K[Y];i&&i.dispatchEvent(D),V[W]&&V[W].call(e,D)}}var yne=["evt"],Rr=function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.evt,d=nne(s,yne);Yf.pluginEvent.bind(Ze)(e,i,wo({dragEl:$e,parentEl:wi,ghostEl:nt,rootEl:ai,nextEl:Uu,lastDownEl:ng,cloneEl:gi,cloneHidden:Al,dragStarted:id,putSortable:nr,activeSortable:Ze.active,originalEvent:a,oldIndex:Kc,oldDraggableIndex:Fd,newIndex:ts,newDraggableIndex:xl,hideGhostForTarget:xP,unhideGhostForTarget:$P,cloneNowHidden:function(){Al=!0},cloneNowShown:function(){Al=!1},dispatchSortableEvent:function(g){Er({sortable:i,name:g,originalEvent:a})}},d))};function Er(t){fne(wo({putSortable:nr,cloneEl:gi,targetEl:$e,rootEl:ai,oldIndex:Kc,oldDraggableIndex:Fd,newIndex:ts,newDraggableIndex:xl},t))}var $e,wi,nt,ai,Uu,ng,gi,Al,Kc,ts,Fd,xl,Z1,nr,Pc=!1,zm=!1,Vm=[],yu,Qs,cb,pb,r8,s8,id,cc,zd,Vd=!1,X1=!1,og,pr,db=[],C9=!1,Gm=[],zv=typeof document<"u",Q1=dP,n8=Kf||$a?"cssFloat":"float",gne=zv&&!fP&&!dP&&"draggable"in document.createElement("div"),wP=function(){if(zv){if($a)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),_P=function(e,i){var s=Ye(e),a=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),d=Tp(e,0,i),y=Tp(e,1,i),g=d&&Ye(d),_=y&&Ye(y),x=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+Gi(d).width,I=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+Gi(y).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(d&&g.float&&g.float!=="none"){var A=g.float==="left"?"left":"right";return y&&(_.clear==="both"||_.clear===A)?"vertical":"horizontal"}return d&&(g.display==="block"||g.display==="flex"||g.display==="table"||g.display==="grid"||x>=a&&s[n8]==="none"||y&&s[n8]==="none"&&x+I>a)?"vertical":"horizontal"},mne=function(e,i,s){var a=s?e.left:e.top,d=s?e.right:e.bottom,y=s?e.width:e.height,g=s?i.left:i.top,_=s?i.right:i.bottom,x=s?i.width:i.height;return a===g||d===_||a+y/2===g+x/2},vne=function(e,i){var s;return Vm.some(function(a){var d=a[os].options.emptyInsertThreshold;if(!(!d||Z4(a))){var y=Gi(a),g=e>=y.left-d&&e<=y.right+d,_=i>=y.top-d&&i<=y.bottom+d;if(g&&_)return s=a}}),s},SP=function(e){function i(d,y){return function(g,_,x,I){var A=g.options.group.name&&_.options.group.name&&g.options.group.name===_.options.group.name;if(d==null&&(y||A))return!0;if(d==null||d===!1)return!1;if(y&&d==="clone")return d;if(typeof d=="function")return i(d(g,_,x,I),y)(g,_,x,I);var C=(y?g:_).options.group.name;return d===!0||typeof d=="string"&&d===C||d.join&&d.indexOf(C)>-1}}var s={},a=e.group;(!a||sg(a)!="object")&&(a={name:a}),s.name=a.name,s.checkPull=i(a.pull,!0),s.checkPut=i(a.put),s.revertClone=a.revertClone,e.group=s},xP=function(){!wP&&nt&&Ye(nt,"display","none")},$P=function(){!wP&&nt&&Ye(nt,"display","")};zv&&!fP&&document.addEventListener("click",function(t){if(zm)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),zm=!1,!1},!0);var gu=function(e){if($e){e=e.touches?e.touches[0]:e;var i=vne(e.clientX,e.clientY);if(i){var s={};for(var a in e)e.hasOwnProperty(a)&&(s[a]=e[a]);s.target=s.rootEl=i,s.preventDefault=void 0,s.stopPropagation=void 0,i[os]._onDragOver(s)}}},bne=function(e){$e&&$e.parentNode[os]._isOutsideThisEl(e.target)};function Ze(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=va({},e),t[os]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _P(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(y,g){y.setData("Text",g.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ze.supportPointer!==!1&&"PointerEvent"in window&&!jd,emptyInsertThreshold:5};Yf.initializePlugins(this,t,i);for(var s in i)!(s in e)&&(e[s]=i[s]);SP(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:gne,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?jt(t,"pointerdown",this._onTapStart):(jt(t,"mousedown",this._onTapStart),jt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(jt(t,"dragover",this),jt(t,"dragenter",this)),Vm.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),va(this,cne())}Ze.prototype={constructor:Ze,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(cc=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,$e):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,s=this.el,a=this.options,d=a.preventOnFilter,y=e.type,g=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,_=(g||e).target,x=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||_,I=a.filter;if(Ine(s),!$e&&!(/mousedown|pointerdown/.test(y)&&e.button!==0||a.disabled)&&!x.isContentEditable&&!(!this.nativeDraggable&&jd&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=ao(_,a.draggable,s,!1),!(_&&_.animated)&&ng!==_)){if(Kc=ks(_),Fd=ks(_,a.draggable),typeof I=="function"){if(I.call(this,e,_,this)){Er({sortable:i,rootEl:x,name:"filter",targetEl:_,toEl:s,fromEl:s}),Rr("filter",i,{evt:e}),d&&e.cancelable&&e.preventDefault();return}}else if(I&&(I=I.split(",").some(function(A){if(A=ao(x,A.trim(),s,!1),A)return Er({sortable:i,rootEl:A,name:"filter",targetEl:_,fromEl:s,toEl:s}),Rr("filter",i,{evt:e}),!0}),I)){d&&e.cancelable&&e.preventDefault();return}a.handle&&!ao(x,a.handle,s,!1)||this._prepareDragStart(e,g,_)}}},_prepareDragStart:function(e,i,s){var a=this,d=a.el,y=a.options,g=d.ownerDocument,_;if(s&&!$e&&s.parentNode===d){var x=Gi(s);if(ai=d,$e=s,wi=$e.parentNode,Uu=$e.nextSibling,ng=s,Z1=y.group,Ze.dragged=$e,yu={target:$e,clientX:(i||e).clientX,clientY:(i||e).clientY},r8=yu.clientX-x.left,s8=yu.clientY-x.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,$e.style["will-change"]="all",_=function(){if(Rr("delayEnded",a,{evt:e}),Ze.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Q7&&a.nativeDraggable&&($e.draggable=!0),a._triggerDragStart(e,i),Er({sortable:a,name:"choose",originalEvent:e}),Kr($e,y.chosenClass,!0)},y.ignore.split(",").forEach(function(I){gP($e,I.trim(),fb)}),jt(g,"dragover",gu),jt(g,"mousemove",gu),jt(g,"touchmove",gu),jt(g,"mouseup",a._onDrop),jt(g,"touchend",a._onDrop),jt(g,"touchcancel",a._onDrop),Q7&&this.nativeDraggable&&(this.options.touchStartThreshold=4,$e.draggable=!0),Rr("delayStart",this,{evt:e}),y.delay&&(!y.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Kf||$a))){if(Ze.eventCanceled){this._onDrop();return}jt(g,"mouseup",a._disableDelayedDrag),jt(g,"touchend",a._disableDelayedDrag),jt(g,"touchcancel",a._disableDelayedDrag),jt(g,"mousemove",a._delayedDragTouchMoveHandler),jt(g,"touchmove",a._delayedDragTouchMoveHandler),y.supportPointer&&jt(g,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(_,y.delay)}else _()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){$e&&fb($e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Mt(e,"mouseup",this._disableDelayedDrag),Mt(e,"touchend",this._disableDelayedDrag),Mt(e,"touchcancel",this._disableDelayedDrag),Mt(e,"mousemove",this._delayedDragTouchMoveHandler),Mt(e,"touchmove",this._delayedDragTouchMoveHandler),Mt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?jt(document,"pointermove",this._onTouchMove):i?jt(document,"touchmove",this._onTouchMove):jt(document,"mousemove",this._onTouchMove):(jt($e,"dragend",this),jt(ai,"dragstart",this._onDragStart));try{document.selection?ag(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Pc=!1,ai&&$e){Rr("dragStarted",this,{evt:i}),this.nativeDraggable&&jt(document,"dragover",bne);var s=this.options;!e&&Kr($e,s.dragClass,!1),Kr($e,s.ghostClass,!0),Ze.active=this,e&&this._appendGhost(),Er({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Qs){this._lastX=Qs.clientX,this._lastY=Qs.clientY,xP();for(var e=document.elementFromPoint(Qs.clientX,Qs.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Qs.clientX,Qs.clientY),e!==i);)i=e;if($e.parentNode[os]._isOutsideThisEl(e),i)do{if(i[os]){var s=void 0;if(s=i[os]._onDragOver({clientX:Qs.clientX,clientY:Qs.clientY,target:e,rootEl:i}),s&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);$P()}},_onTouchMove:function(e){if(yu){var i=this.options,s=i.fallbackTolerance,a=i.fallbackOffset,d=e.touches?e.touches[0]:e,y=nt&&ap(nt,!0),g=nt&&y&&y.a,_=nt&&y&&y.d,x=Q1&&pr&&i8(pr),I=(d.clientX-yu.clientX+a.x)/(g||1)+(x?x[0]-db[0]:0)/(g||1),A=(d.clientY-yu.clientY+a.y)/(_||1)+(x?x[1]-db[1]:0)/(_||1);if(!Ze.active&&!Pc){if(s&&Math.max(Math.abs(d.clientX-this._lastX),Math.abs(d.clientY-this._lastY))<s)return;this._onDragStart(e,!0)}if(nt){y?(y.e+=I-(cb||0),y.f+=A-(pb||0)):y={a:1,b:0,c:0,d:1,e:I,f:A};var C="matrix(".concat(y.a,",").concat(y.b,",").concat(y.c,",").concat(y.d,",").concat(y.e,",").concat(y.f,")");Ye(nt,"webkitTransform",C),Ye(nt,"mozTransform",C),Ye(nt,"msTransform",C),Ye(nt,"transform",C),cb=I,pb=A,Qs=d}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!nt){var e=this.options.fallbackOnBody?document.body:ai,i=Gi($e,!0,Q1,!0,e),s=this.options;if(Q1){for(pr=e;Ye(pr,"position")==="static"&&Ye(pr,"transform")==="none"&&pr!==document;)pr=pr.parentNode;pr!==document.body&&pr!==document.documentElement?(pr===document&&(pr=fo()),i.top+=pr.scrollTop,i.left+=pr.scrollLeft):pr=fo(),db=i8(pr)}nt=$e.cloneNode(!0),Kr(nt,s.ghostClass,!1),Kr(nt,s.fallbackClass,!0),Kr(nt,s.dragClass,!0),Ye(nt,"transition",""),Ye(nt,"transform",""),Ye(nt,"box-sizing","border-box"),Ye(nt,"margin",0),Ye(nt,"top",i.top),Ye(nt,"left",i.left),Ye(nt,"width",i.width),Ye(nt,"height",i.height),Ye(nt,"opacity","0.8"),Ye(nt,"position",Q1?"absolute":"fixed"),Ye(nt,"zIndex","100000"),Ye(nt,"pointerEvents","none"),Ze.ghost=nt,e.appendChild(nt),Ye(nt,"transform-origin",r8/parseInt(nt.style.width)*100+"% "+s8/parseInt(nt.style.height)*100+"%")}},_onDragStart:function(e,i){var s=this,a=e.dataTransfer,d=s.options;if(Rr("dragStart",this,{evt:e}),Ze.eventCanceled){this._onDrop();return}Rr("setupClone",this),Ze.eventCanceled||(gi=bP($e),gi.removeAttribute("id"),gi.draggable=!1,gi.style["will-change"]="",this._hideClone(),Kr(gi,this.options.chosenClass,!1),Ze.clone=gi),s.cloneId=ag(function(){Rr("clone",s),!Ze.eventCanceled&&(s.options.removeCloneOnHide||ai.insertBefore(gi,$e),s._hideClone(),Er({sortable:s,name:"clone"}))}),!i&&Kr($e,d.dragClass,!0),i?(zm=!0,s._loopId=setInterval(s._emulateDragOver,50)):(Mt(document,"mouseup",s._onDrop),Mt(document,"touchend",s._onDrop),Mt(document,"touchcancel",s._onDrop),a&&(a.effectAllowed="move",d.setData&&d.setData.call(s,a,$e)),jt(document,"drop",s),Ye($e,"transform","translateZ(0)")),Pc=!0,s._dragStartId=ag(s._dragStarted.bind(s,i,e)),jt(document,"selectstart",s),id=!0,jd&&Ye(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,s=e.target,a,d,y,g=this.options,_=g.group,x=Ze.active,I=Z1===_,A=g.sort,C=nr||x,N,j=this,D=!1;if(C9)return;function V(at,er){Rr(at,j,wo({evt:e,isOwner:I,axis:N?"vertical":"horizontal",revert:y,dragRect:a,targetRect:d,canSort:A,fromSortable:C,target:s,completed:K,onMove:function($o,Kp){return ey(ai,i,$e,a,$o,Gi($o),e,Kp)},changed:Y},er))}function W(){V("dragOverAnimationCapture"),j.captureAnimationState(),j!==C&&C.captureAnimationState()}function K(at){return V("dragOverCompleted",{insertion:at}),at&&(I?x._hideClone():x._showClone(j),j!==C&&(Kr($e,nr?nr.options.ghostClass:x.options.ghostClass,!1),Kr($e,g.ghostClass,!0)),nr!==j&&j!==Ze.active?nr=j:j===Ze.active&&nr&&(nr=null),C===j&&(j._ignoreWhileAnimating=s),j.animateAll(function(){V("dragOverAnimationComplete"),j._ignoreWhileAnimating=null}),j!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(s===$e&&!$e.animated||s===i&&!s.animated)&&(cc=null),!g.dragoverBubble&&!e.rootEl&&s!==document&&($e.parentNode[os]._isOutsideThisEl(e.target),!at&&gu(e)),!g.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),D=!0}function Y(){ts=ks($e),xl=ks($e,g.draggable),Er({sortable:j,name:"change",toEl:i,newIndex:ts,newDraggableIndex:xl,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),s=ao(s,g.draggable,i,!0),V("dragOver"),Ze.eventCanceled)return D;if($e.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||j._ignoreWhileAnimating===s)return K(!1);if(zm=!1,x&&!g.disabled&&(I?A||(y=wi!==ai):nr===this||(this.lastPutMode=Z1.checkPull(this,x,$e,e))&&_.checkPut(this,x,$e,e))){if(N=this._getDirection(e,s)==="vertical",a=Gi($e),V("dragOverValid"),Ze.eventCanceled)return D;if(y)return wi=ai,W(),this._hideClone(),V("revert"),Ze.eventCanceled||(Uu?ai.insertBefore($e,Uu):ai.appendChild($e)),K(!0);var ee=Z4(i,g.draggable);if(!ee||xne(e,N,this)&&!ee.animated){if(ee===$e)return K(!1);if(ee&&i===e.target&&(s=ee),s&&(d=Gi(s)),ey(ai,i,$e,a,s,d,e,!!s)!==!1)return W(),ee&&ee.nextSibling?i.insertBefore($e,ee.nextSibling):i.appendChild($e),wi=i,Y(),K(!0)}else if(ee&&Sne(e,N,this)){var re=Tp(i,0,g,!0);if(re===$e)return K(!1);if(s=re,d=Gi(s),ey(ai,i,$e,a,s,d,e,!1)!==!1)return W(),i.insertBefore($e,re),wi=i,Y(),K(!0)}else if(s.parentNode===i){d=Gi(s);var se=0,ue,de=$e.parentNode!==i,we=!mne($e.animated&&$e.toRect||a,s.animated&&s.toRect||d,N),Oe=N?"top":"left",Ne=t8(s,"top","top")||t8($e,"top","top"),Le=Ne?Ne.scrollTop:void 0;cc!==s&&(ue=d[Oe],Vd=!1,X1=!we&&g.invertSwap||de),se=$ne(e,s,d,N,we?1:g.swapThreshold,g.invertedSwapThreshold==null?g.swapThreshold:g.invertedSwapThreshold,X1,cc===s);var Be;if(se!==0){var Pe=ks($e);do Pe-=se,Be=wi.children[Pe];while(Be&&(Ye(Be,"display")==="none"||Be===nt))}if(se===0||Be===s)return K(!1);cc=s,zd=se;var dt=s.nextElementSibling,hi=!1;hi=se===1;var kt=ey(ai,i,$e,a,s,d,e,hi);if(kt!==!1)return(kt===1||kt===-1)&&(hi=kt===1),C9=!0,setTimeout(_ne,30),W(),hi&&!dt?i.appendChild($e):s.parentNode.insertBefore($e,hi?dt:s),Ne&&vP(Ne,0,Le-Ne.scrollTop),wi=$e.parentNode,ue!==void 0&&!X1&&(og=Math.abs(ue-Gi(s)[Oe])),Y(),K(!0)}if(i.contains($e))return K(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Mt(document,"mousemove",this._onTouchMove),Mt(document,"touchmove",this._onTouchMove),Mt(document,"pointermove",this._onTouchMove),Mt(document,"dragover",gu),Mt(document,"mousemove",gu),Mt(document,"touchmove",gu)},_offUpEvents:function(){var e=this.el.ownerDocument;Mt(e,"mouseup",this._onDrop),Mt(e,"touchend",this._onDrop),Mt(e,"pointerup",this._onDrop),Mt(e,"touchcancel",this._onDrop),Mt(document,"selectstart",this)},_onDrop:function(e){var i=this.el,s=this.options;if(ts=ks($e),xl=ks($e,s.draggable),Rr("drop",this,{evt:e}),wi=$e&&$e.parentNode,ts=ks($e),xl=ks($e,s.draggable),Ze.eventCanceled){this._nulling();return}Pc=!1,X1=!1,Vd=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),P9(this.cloneId),P9(this._dragStartId),this.nativeDraggable&&(Mt(document,"drop",this),Mt(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),jd&&Ye(document.body,"user-select",""),Ye($e,"transform",""),e&&(id&&(e.cancelable&&e.preventDefault(),!s.dropBubble&&e.stopPropagation()),nt&&nt.parentNode&&nt.parentNode.removeChild(nt),(ai===wi||nr&&nr.lastPutMode!=="clone")&&gi&&gi.parentNode&&gi.parentNode.removeChild(gi),$e&&(this.nativeDraggable&&Mt($e,"dragend",this),fb($e),$e.style["will-change"]="",id&&!Pc&&Kr($e,nr?nr.options.ghostClass:this.options.ghostClass,!1),Kr($e,this.options.chosenClass,!1),Er({sortable:this,name:"unchoose",toEl:wi,newIndex:null,newDraggableIndex:null,originalEvent:e}),ai!==wi?(ts>=0&&(Er({rootEl:wi,name:"add",toEl:wi,fromEl:ai,originalEvent:e}),Er({sortable:this,name:"remove",toEl:wi,originalEvent:e}),Er({rootEl:wi,name:"sort",toEl:wi,fromEl:ai,originalEvent:e}),Er({sortable:this,name:"sort",toEl:wi,originalEvent:e})),nr&&nr.save()):ts!==Kc&&ts>=0&&(Er({sortable:this,name:"update",toEl:wi,originalEvent:e}),Er({sortable:this,name:"sort",toEl:wi,originalEvent:e})),Ze.active&&((ts==null||ts===-1)&&(ts=Kc,xl=Fd),Er({sortable:this,name:"end",toEl:wi,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Rr("nulling",this),ai=$e=wi=nt=Uu=gi=ng=Al=yu=Qs=id=ts=xl=Kc=Fd=cc=zd=nr=Z1=Ze.dragged=Ze.ghost=Ze.clone=Ze.active=null,Gm.forEach(function(e){e.checked=!0}),Gm.length=cb=pb=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":$e&&(this._onDragOver(e),wne(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,s=this.el.children,a=0,d=s.length,y=this.options;a<d;a++)i=s[a],ao(i,y.draggable,this.el,!1)&&e.push(i.getAttribute(y.dataIdAttr)||Mne(i));return e},sort:function(e,i){var s={},a=this.el;this.toArray().forEach(function(d,y){var g=a.children[y];ao(g,this.options.draggable,a,!1)&&(s[d]=g)},this),i&&this.captureAnimationState(),e.forEach(function(d){s[d]&&(a.removeChild(s[d]),a.appendChild(s[d]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return ao(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var s=this.options;if(i===void 0)return s[e];var a=Yf.modifyOption(this,e,i);typeof a<"u"?s[e]=a:s[e]=i,e==="group"&&SP(s)},destroy:function(){Rr("destroy",this);var e=this.el;e[os]=null,Mt(e,"mousedown",this._onTapStart),Mt(e,"touchstart",this._onTapStart),Mt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Mt(e,"dragover",this),Mt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Vm.splice(Vm.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Al){if(Rr("hideClone",this),Ze.eventCanceled)return;Ye(gi,"display","none"),this.options.removeCloneOnHide&&gi.parentNode&&gi.parentNode.removeChild(gi),Al=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Al){if(Rr("showClone",this),Ze.eventCanceled)return;$e.parentNode==ai&&!this.options.group.revertClone?ai.insertBefore(gi,$e):Uu?ai.insertBefore(gi,Uu):ai.appendChild(gi),this.options.group.revertClone&&this.animate($e,gi),Ye(gi,"display",""),Al=!1}}};function wne(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function ey(t,e,i,s,a,d,y,g){var _,x=t[os],I=x.options.onMove,A;return window.CustomEvent&&!$a&&!Kf?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=e,_.from=t,_.dragged=i,_.draggedRect=s,_.related=a||e,_.relatedRect=d||Gi(e),_.willInsertAfter=g,_.originalEvent=y,t.dispatchEvent(_),I&&(A=I.call(x,_,y)),A}function fb(t){t.draggable=!1}function _ne(){C9=!1}function Sne(t,e,i){var s=Gi(Tp(i.el,0,i.options,!0)),a=10;return e?t.clientX<s.left-a||t.clientY<s.top&&t.clientX<s.right:t.clientY<s.top-a||t.clientY<s.bottom&&t.clientX<s.left}function xne(t,e,i){var s=Gi(Z4(i.el,i.options.draggable)),a=10;return e?t.clientX>s.right+a||t.clientX<=s.right&&t.clientY>s.bottom&&t.clientX>=s.left:t.clientX>s.right&&t.clientY>s.top||t.clientX<=s.right&&t.clientY>s.bottom+a}function $ne(t,e,i,s,a,d,y,g){var _=s?t.clientY:t.clientX,x=s?i.height:i.width,I=s?i.top:i.left,A=s?i.bottom:i.right,C=!1;if(!y){if(g&&og<x*a){if(!Vd&&(zd===1?_>I+x*d/2:_<A-x*d/2)&&(Vd=!0),Vd)C=!0;else if(zd===1?_<I+og:_>A-og)return-zd}else if(_>I+x*(1-a)/2&&_<A-x*(1-a)/2)return Tne(e)}return C=C||y,C&&(_<I+x*d/2||_>A-x*d/2)?_>I+x/2?1:-1:0}function Tne(t){return ks($e)<ks(t)?1:-1}function Mne(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,s=0;i--;)s+=e.charCodeAt(i);return s.toString(36)}function Ine(t){Gm.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var s=e[i];s.checked&&Gm.push(s)}}function ag(t){return setTimeout(t,0)}function P9(t){return clearTimeout(t)}zv&&jt(document,"touchmove",function(t){(Ze.active||Pc)&&t.cancelable&&t.preventDefault()});Ze.utils={on:jt,off:Mt,css:Ye,find:gP,is:function(e,i){return!!ao(e,i,e,!1)},extend:une,throttle:mP,closest:ao,toggleClass:Kr,clone:bP,index:ks,nextTick:ag,cancelNextTick:P9,detectDirection:_P,getChild:Tp};Ze.get=function(t){return t[os]};Ze.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Ze.utils=wo(wo({},Ze.utils),s.utils)),Yf.mount(s)})};Ze.create=function(t,e){return new Ze(t,e)};Ze.version=one;var Ci=[],rd,N9,L9=!1,yb,gb,Um,sd;function Ene(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var s=i.originalEvent;this.sortable.nativeDraggable?jt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?jt(document,"pointermove",this._handleFallbackAutoScroll):s.touches?jt(document,"touchmove",this._handleFallbackAutoScroll):jt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var s=i.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?Mt(document,"dragover",this._handleAutoScroll):(Mt(document,"pointermove",this._handleFallbackAutoScroll),Mt(document,"touchmove",this._handleFallbackAutoScroll),Mt(document,"mousemove",this._handleFallbackAutoScroll)),o8(),lg(),hne()},nulling:function(){Um=N9=rd=L9=sd=yb=gb=null,Ci.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,s){var a=this,d=(i.touches?i.touches[0]:i).clientX,y=(i.touches?i.touches[0]:i).clientY,g=document.elementFromPoint(d,y);if(Um=i,s||this.options.forceAutoScrollFallback||Kf||$a||jd){mb(i,this.options,g,s);var _=Fl(g,!0);L9&&(!sd||d!==yb||y!==gb)&&(sd&&o8(),sd=setInterval(function(){var x=Fl(document.elementFromPoint(d,y),!0);x!==_&&(_=x,lg()),mb(i,a.options,x,s)},10),yb=d,gb=y)}else{if(!this.options.bubbleScroll||Fl(g,!0)===fo()){lg();return}mb(i,this.options,Fl(g,!1),!1)}}},va(t,{pluginName:"scroll",initializeByDefault:!0})}function lg(){Ci.forEach(function(t){clearInterval(t.pid)}),Ci=[]}function o8(){clearInterval(sd)}var mb=mP(function(t,e,i,s){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,d=(t.touches?t.touches[0]:t).clientY,y=e.scrollSensitivity,g=e.scrollSpeed,_=fo(),x=!1,I;N9!==i&&(N9=i,lg(),rd=e.scroll,I=e.scrollFn,rd===!0&&(rd=Fl(i,!0)));var A=0,C=rd;do{var N=C,j=Gi(N),D=j.top,V=j.bottom,W=j.left,K=j.right,Y=j.width,ee=j.height,re=void 0,se=void 0,ue=N.scrollWidth,de=N.scrollHeight,we=Ye(N),Oe=N.scrollLeft,Ne=N.scrollTop;N===_?(re=Y<ue&&(we.overflowX==="auto"||we.overflowX==="scroll"||we.overflowX==="visible"),se=ee<de&&(we.overflowY==="auto"||we.overflowY==="scroll"||we.overflowY==="visible")):(re=Y<ue&&(we.overflowX==="auto"||we.overflowX==="scroll"),se=ee<de&&(we.overflowY==="auto"||we.overflowY==="scroll"));var Le=re&&(Math.abs(K-a)<=y&&Oe+Y<ue)-(Math.abs(W-a)<=y&&!!Oe),Be=se&&(Math.abs(V-d)<=y&&Ne+ee<de)-(Math.abs(D-d)<=y&&!!Ne);if(!Ci[A])for(var Pe=0;Pe<=A;Pe++)Ci[Pe]||(Ci[Pe]={});(Ci[A].vx!=Le||Ci[A].vy!=Be||Ci[A].el!==N)&&(Ci[A].el=N,Ci[A].vx=Le,Ci[A].vy=Be,clearInterval(Ci[A].pid),(Le!=0||Be!=0)&&(x=!0,Ci[A].pid=setInterval(function(){s&&this.layer===0&&Ze.active._onTouchMove(Um);var dt=Ci[this.layer].vy?Ci[this.layer].vy*g:0,hi=Ci[this.layer].vx?Ci[this.layer].vx*g:0;typeof I=="function"&&I.call(Ze.dragged.parentNode[os],hi,dt,t,Um,Ci[this.layer].el)!=="continue"||vP(Ci[this.layer].el,hi,dt)}.bind({layer:A}),24))),A++}while(e.bubbleScroll&&C!==_&&(C=Fl(C,!1)));L9=x}},30),TP=function(e){var i=e.originalEvent,s=e.putSortable,a=e.dragEl,d=e.activeSortable,y=e.dispatchSortableEvent,g=e.hideGhostForTarget,_=e.unhideGhostForTarget;if(i){var x=s||d;g();var I=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,A=document.elementFromPoint(I.clientX,I.clientY);_(),x&&!x.el.contains(A)&&(y("spill"),this.onSpill({dragEl:a,putSortable:s}))}};function X4(){}X4.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,s=e.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var a=Tp(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(i,a):this.sortable.el.appendChild(i),this.sortable.animateAll(),s&&s.animateAll()},drop:TP};va(X4,{pluginName:"revertOnSpill"});function Q4(){}Q4.prototype={onSpill:function(e){var i=e.dragEl,s=e.putSortable,a=s||this.sortable;a.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),a.animateAll()},drop:TP};va(Q4,{pluginName:"removeOnSpill"});Ze.mount(new Ene);Ze.mount(Q4,X4);function a8(t,e,i){t.splice(i,0,t.splice(e,1)[0])}const Ane="esri-layerlist-new-ui",kne=Ge.ofType(Y4),l8="data-sort-filter",u8="data-layer-uid",One="layerUid",_i="esri-layer-list",oi=`${_i}__item`,Ae={base:`${_i} esri-widget esri-widget--panel`,newUI:`${_i}--new-ui`,noItems:`${_i}__no-items`,list:`${_i}__list`,listRoot:`${_i}__list--root`,listExclusive:`${_i}__list--exclusive`,listInherited:`${_i}__list--inherited`,listIndependent:`${_i}__list--independent`,item:oi,itemContent:`${oi}-content`,itemMessage:`${oi}--has-message`,itemInvisible:`${oi}--invisible`,itemInvisibleAtScale:`${oi}--invisible-at-scale`,itemChildren:`${oi}--has-children`,itemSelectable:`${oi}--selectable`,itemContainer:`${oi}-container`,actionsMenu:`${oi}-actions-menu`,actionsMenuItem:`${oi}-actions-menu-item`,actionsMenuItemActive:`${oi}-actions-menu-item--active`,actions:`${oi}-actions`,actionsList:`${oi}-actions-list`,action:`${oi}-action`,actionIcon:`${oi}-action-icon`,actionImage:`${oi}-action-image`,actionTitle:`${oi}-action-title`,actionToggle:`${_i}__action-toggle`,actionToggleOn:`${_i}__action-toggle--on`,label:`${oi}-label`,message:`${oi}-message`,title:`${oi}-title`,statusIndicator:`${_i}__status-indicator`,publishing:`${_i}__publishing`,updating:`${_i}__updating`,connectionStatus:`${_i}__connection-status`,connectionStatusConnected:`${_i}__connection-status--connected`,toggleVisible:`${oi}-toggle`,toggleVisibleIcon:`${oi}-toggle-icon`,toggleIcon:`${oi}-toggle-icon`,radioIcon:`${oi}-radio-icon`,childToggle:`${_i}__child-toggle`,childToggleOpen:`${_i}__child-toggle--open`,childOpened:`${_i}__child-toggle-icon--opened`,childClosed:`${_i}__child-toggle-icon--closed`,childClosed_RTL:`${_i}__child-toggle-icon--closed-rtl`,sortableChosen:`${_i}--chosen`,disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},Ga={actions:"actions",actionSection:"action-section",items:"items"},g0={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function MP(t){const{actionsOpen:e,children:i}=t;e&&(t.actionsOpen=!1),i.forEach(s=>MP(s))}const vb="root",h8={statusIndicators:!0,errors:!1};let Zt=class extends xa{constructor(e,i){super(e,i),this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=le(Ane),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=Ae.widgetIcon,this.icon=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new kne,this.viewModel=new pP,this.visibleElements={...h8},this._onSortableSort=({to:s,from:a,item:d,newIndex:y})=>{a&&s&&(a===s?this._sortLayers(this._sortableMap.get(a.dataset.group)):this._moveLayerFromChildList({to:s,from:a,item:d,newIndex:y}))},this._sortableCanSort=(s,a)=>!(!s.el.dataset.group||!a.el.dataset.group),this._sortableCanPull=(s,a,d)=>{const{listItemCanGiveFunction:y}=this,g={selected:Wi(d),from:Wi(a.el),to:Wi(s.el)};return!this._sortableCanSort(s,a)||typeof y!="function"||y.call(null,g)},this._sortableCanPut=(s,a,d)=>{const{listItemCanReceiveFunction:y}=this,g={selected:Wi(d),from:Wi(a.el),to:Wi(s.el)};return!this._sortableCanSort(s,a)||typeof y!="function"||y.call(null,g)},this._onSortableEnd=({oldIndex:s,from:a,to:d,item:y})=>{a!==d&&a.insertBefore(y,a.children[s])}}initialize(){const e=this.operationalItems;this._setVisibleItems(e),this.addHandles([Nh(()=>this.operationalItems,"change",()=>this._itemsChanged(e)),Me(()=>this.visibleElements,()=>this._itemsChanged(e)),Me(()=>this.selectionEnabled,()=>this._toggleAllSorting(),vt)])}loadDependencies(){return Qie({icon:()=>_e(()=>import("./calcite-icon-349306dd.js"),["assets/calcite-icon-349306dd.js","assets/icon-beecf407.js","assets/observers-279029a9.js"]),tooltip:()=>_e(()=>import("./calcite-tooltip-378d7fea.js"),["assets/calcite-tooltip-378d7fea.js","assets/FloatingArrow-ac3c4688.js","assets/debounce-fe65f68f.js","assets/guid-0d265cb2.js","assets/openCloseComponent-9114fd04.js"])})}destroy(){this.removeAllHandles(),this._destroySortables(),this._tooltipReferenceMap.clear()}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...h8,...e}}triggerAction(e,i){return this.viewModel.triggerAction(e,i)}render(){var g;const{visibleItems:e,_newUI:i}=this,s=(g=this.viewModel)==null?void 0:g.state,a={[Ae.newUI]:i,[Ae.hidden]:s==="loading",[Ae.disabled]:s==="disabled"},d=this.renderItemTooltips(),y=this.renderItems();return fe("div",{class:this.classes(Ae.base,a)},e.length?[d,y]:this.renderNoItems())}renderItemTooltip(e){const{_tooltipReferenceMap:i,messages:s}=this;return e?fe("calcite-tooltip",{label:s.layerIncompatible,referenceElement:i.get(e.uid)},s.layerIncompatibleTooltip):null}renderItemTooltipNodes(e){const{incompatible:i,children:s}=e;return[i?this.renderItemTooltip(e):null,...!i&&s?s.toArray().map(a=>this.renderItemTooltipNodes(a)):[]]}renderItemTooltips(){return this.visibleItems.toArray().map(e=>this.renderItemTooltipNodes(e))??[]}renderNoItems(){return fe("div",{class:Ae.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:e,selectionEnabled:i,messages:s}=this;return fe("ul",{"aria-label":s.widgetLabel,role:i?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":vb,bind:this,class:this.classes(Ae.list,Ae.listRoot,Ae.listIndependent)},e.map(a=>this.renderItem(a,null)).toArray())}renderActionsMenuIcon(e,i){const{messagesCommon:s}=this,a={[Ae.actionsMenuItemActive]:e.actionsOpen};return fe("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(Ae.actionsMenuItem,a),tabindex:"0",role:"button","aria-controls":i,"aria-label":s.options,title:s.options},fe("span",{"aria-hidden":"true",class:Ae.iconEllipses}))}renderActionsMenu(e,i,s,a){const{panel:d}=e,y=d&&d.visible?this.renderPanelButton(d):null,g=s===1&&this._getSingleActionButton(i),_=g?this.renderAction({item:e,action:g,singleAction:!0}):null,x=!g&&s?this.renderActionsMenuIcon(e,a):null;return x||y||g?fe("div",{key:"actions-menu",class:Ae.actionsMenu},y,_,x):null}renderChildList(e,i){var A;const{selectionEnabled:s}=this,{visibilityMode:a,children:d}=e,y=this._hasChildren(e),g=!y&&s&&((A=e.layer)==null?void 0:A.type)==="group",{exclusive:_,inherited:x}=g0,I={[Ae.listExclusive]:a===_,[Ae.listInherited]:a===x,[Ae.listIndependent]:a!==x&&a!==_};return y||g?fe("ul",{bind:this,key:"list-items",id:i,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(Ae.list,I),"aria-expanded":e.open?"true":"false",role:s?"listbox":a===_?"radiogroup":"group",hidden:!e.open&&!g||null},d==null?void 0:d.map(C=>this.renderItem(C,e)).toArray()):null}renderChildrenToggle(e,i){const{messagesCommon:s}=this,a=this._hasChildren(e),d={[Ae.childToggleOpen]:e.open},y=e.open?s.collapse:s.expand;return a?fe("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(Ae.childToggle,d),tabindex:"0",role:"button","aria-controls":i,"aria-label":y,title:y},fe("span",{"aria-hidden":"true",class:this.classes(Ae.childClosed,Ae.iconRightArrow)}),fe("span",{"aria-hidden":"true",class:this.classes(Ae.childOpened,Ae.iconDownArrow)}),fe("span",{"aria-hidden":"true",class:this.classes(Ae.childClosed_RTL,Ae.iconLeftArrow)})):null}renderItemMessage(e){return e.error?fe("div",{key:"esri-layer-list__error",class:Ae.message,role:"alert"},fe("span",{"aria-hidden":"true",class:Ae.iconNoticeTriangle}),this.messages.layerError):e.incompatible?fe("div",{key:"esri-layer-list__incompatible",class:Ae.message,role:"alert"},fe("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:Ae.iconNoticeTriangle,afterCreate:i=>this._setTooltipReference(i,e)}),this.messages.layerIncompatible):null}renderItemContent(e,i,s){const{id:a}=this,d=`${a}_${e.uid}`,y=`${d}_actions`,g=`${d}__list`,{panel:_}=e,x=this._filterActions(e.actionsSections),I=this._countActions(x);return[fe("div",{key:"list-item-container",class:Ae.itemContainer},this.renderChildrenToggle(e,g),this.renderLabel(e,i,s),this.renderActionsMenu(e,x,I,y)),this.renderItemMessage(e),I?this.renderActionsSections(e,x,y):null,_&&_.open&&!_.disabled?_.render():null,this.renderChildList(e,g)]}renderItem(e,i){var A;const{_newUI:s,id:a,selectionEnabled:d,selectedItems:y}=this,g=`${`${a}_${e.uid}`}__title`,_=this._hasMessage(e),x=this._hasChildren(e),I={[Ae.itemChildren]:x,[Ae.itemMessage]:!!_,[Ae.itemInvisible]:s&&!e.visible,[Ae.itemInvisibleAtScale]:!e.visibleAtCurrentScale,[Ae.itemSelectable]:d};if(d){const C={[u8]:(A=e.layer)==null?void 0:A.uid,[l8]:(!e.sortable).toString()};return fe("li",{key:`item-with-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Ae.item,I),"aria-labelledby":g,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":i?i.uid:vb,tabIndex:0,"aria-selected":ab(e,y)?"true":"false",role:"option",...C},this.renderItemContent(e,i,g))}return fe("li",{key:`item-no-selection-${e.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(Ae.item,I),"aria-labelledby":g},this.renderItemContent(e,i,g))}renderConnectionIcon(e){const{connectionStatus:i}=e;return i!=null?fe("calcite-icon",{icon:i==="connected"?"beacon":"offline",scale:"s"}):null}renderItemStatus(e,i){const{visibleElements:s}=this;if(!s.statusIndicators)return null;const{connectionStatus:a,publishing:d,updating:y}=e,g=y&&!i,_=!!a;return fe("span",{class:this.classes({[Ae.statusIndicator]:!0,[Ae.publishing]:d,[Ae.updating]:g,[Ae.connectionStatus]:_,[Ae.connectionStatusConnected]:_&&a==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(e))}renderItemTitle(e,i){const{messages:s}=this;if(!e)return null;const a=e.title||s.untitledLayer,d=e.visibleAtCurrentScale?a:`${a} (${s.layerInvisibleAtScale})`;return fe("span",{key:"layer-title-container",id:i,title:d,"aria-label":d,class:Ae.title},a)}renderItemToggleIcon(e,i){const{_newUI:s}=this,{exclusive:a}=g0,d=i==null?void 0:i.visibilityMode,y={[Ae.toggleVisibleIcon]:s,[Ae.toggleIcon]:s&&d!==a,[Ae.radioIcon]:s&&d===a,[Ae.iconRadioSelected]:d===a&&e.visible,[Ae.iconRadioUnselected]:d===a&&!e.visible,[Ae.iconVisible]:d!==a&&e.visible,[Ae.iconInvisible]:d!==a&&!e.visible};return fe("span",{key:"item-toggle-icon",class:this.classes(y),"aria-hidden":"true"})}renderItemToggle(e,i,s){const{selectionEnabled:a,messages:d}=this,{exclusive:y}=g0,g=i==null?void 0:i.visibilityMode,_=g===y?"radio":"switch";return fe("span",a?{key:"item-toggle-selection-enabled",class:Ae.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":g,tabIndex:0,title:d.layerVisibility,"aria-checked":e.visible?"true":"false",role:_,"aria-labelledby":s}:{key:"item-toggle",class:Ae.toggleVisible},this.renderItemToggleIcon(e,i))}renderLabel(e,i,s){const{selectionEnabled:a,_newUI:d,messages:y}=this,{inherited:g,exclusive:_}=g0,x=i==null?void 0:i.visibilityMode,I=x===_?"radio":"switch",A=d?[this.renderItemTitle(e,s),this.renderItemStatus(e,i),this.renderItemToggle(e,i,s)]:[this.renderItemToggle(e,i,s),this.renderItemTitle(e,s),this.renderItemStatus(e,i)],C=fe("div",a?{key:`item-label-no-selection-${e.uid}`,class:Ae.label}:{key:`item-label-with-selection-${e.uid}`,class:Ae.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":x,tabIndex:0,"aria-checked":e.visible?"true":"false",title:y.layerVisibility,role:I,"aria-labelledby":s},A);return x===g||e.error?fe("div",{key:`item-label-container-${e.uid}`,class:Ae.label},this.renderItemTitle(e,s),this.renderItemStatus(e,i)):C}renderPanelButton(e){const{className:i,open:s,title:a,image:d,disabled:y}=e,g=d||i?i:Ae.iconDefaultAction,_=this._getIconImageStyles(e),x={[Ae.actionsMenuItemActive]:s&&!y},I={[Ae.actionImage]:!!_["background-image"],[Ae.disabledElement]:e.disabled};return g&&(I[g]=!!g),fe("div",{"aria-disabled":e.disabled.toString(),key:`panel-${e.uid}`,bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(Ae.actionsMenuItem,x),role:"button",tabindex:e.disabled?null:0,title:a,"aria-label":a},fe("span",{class:this.classes(I),styles:_}))}renderActionsSections(e,i,s){const a=i.toArray().map((d,y)=>fe("ul",{key:`${e}-action-section-${y}`,class:Ae.actionsList},this.renderActionSection(e,d)));return fe("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:s,class:Ae.actions,hidden:!e.actionsOpen||null},a)}renderActionSection(e,i){return(i&&i.toArray()).map(s=>this.renderAction({item:e,action:s}))}renderActionIcon(e){const{active:i,className:s}=e,a=this._getIconImageStyles(e),d=e.type!=="button"||e.image||s?s:Ae.iconDefaultAction,y={[Ae.actionImage]:!i&&!!a["background-image"],[Ae.iconLoading]:i,[Ae.rotating]:i};return d&&!i&&(y[d]=!0),fe("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Ae.actionIcon,y),styles:a})}renderActionTitle(e,i){return i?null:fe("span",{key:"action-title",class:Ae.actionTitle},e)}renderAction(e){const{item:i,action:s,singleAction:a}=e,{active:d,disabled:y,title:g}=s,_={[Ae.actionsMenuItem]:a&&s.type==="button",[Ae.action]:d||!a&&s.type!=="toggle",[Ae.actionToggle]:!d&&s.type==="toggle",[Ae.actionToggleOn]:!d&&s.type==="toggle"&&s.value,[Ae.disabledElement]:y},x=[this.renderActionIcon(s),this.renderActionTitle(g,a)];return a?fe("div",{bind:this,"data-item":i,"data-action":s,role:"button",key:`single-action-${s.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:_,tabindex:"0",title:g??void 0,"aria-label":g??void 0},x):fe("li",{bind:this,"data-item":i,"data-action":s,key:`action-${s.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:_,tabindex:"0",role:"button",title:g??void 0,"aria-label":g??void 0},x)}_setTooltipReference(e,i){this._tooltipReferenceMap.set(i.uid,e),this.scheduleRender()}_hasMessage(e){return!!e.error||e.incompatible}_hasChildren(e){return!!e.children.length&&!this._hasMessage(e)}_sortNodeRemoved(e){const{_sortableMap:i}=this,s=e.dataset.group,a=i.get(s);a&&a.destroy(),i.delete(s)}_destroySortables(){const{_sortableMap:e,_sortableNodes:i}=this;e.forEach(s=>s&&s.destroy()),e.clear(),i.clear()}_moveLayerFromChildList({to:e,from:i,item:s,newIndex:a}){const d=Wi(s),y=Wi(e),g=Wi(i);this.viewModel.moveListItem(d,g,y,a)}_sortLayers(e){var a,d;if(!e)return;const i=Wi(e.el),s=e.toArray();i?Jse(i,s):oP((d=(a=this.view)==null?void 0:a.map)==null?void 0:d.layers,s)}_toggleSorting(e,i){const{_sortableMap:s,selectionEnabled:a}=this,d=s.get(i),y=Wi(e),g=(i===vb||(y==null?void 0:y.childrenSortable)&&Bse(y))&&a;if(d)d.option("disabled",!g);else if(g){const _=Ze.create(e,{dataIdAttr:u8,group:{name:i,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${l8}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!g,chosenClass:Ae.sortableChosen});s.set(i,_)}}_toggleAllSorting(){this._sortableNodes.forEach((e,i)=>this._toggleSorting(e,i))}_sortNodeCreated(e){const i=e.dataset.group;i&&(this._sortableNodes.set(i,e),this._toggleSorting(e,i))}_setVisibleItems(e){this.visibleItems=e.filter(i=>!i.hidden&&(this.visibleElements.errors||!i.error))}_getSingleActionButton(e){return e.reduce(i=>i).filter(i=>i&&i.type==="button").at(0)}_focusListItem(e){var a;const{_focusSortUid:i}=this;if(!e||!i)return;const s=Wi(e);((a=s==null?void 0:s.layer)==null?void 0:a.uid)===i&&(e.focus(),this._focusSortUid=null)}_watchActionSectionChanges(e){this.addHandles(e.on("change",this.scheduleRender.bind(this)),Ga.actionSection),e.forEach(i=>this._renderOnActionChanges(i))}_renderOnActionChanges(e){e.type!=="toggle"?e.type!=="slider"?this.addHandles(Me(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible],()=>this.scheduleRender(),vt),Ga.actions):this.addHandles(Me(()=>[e==null?void 0:e.className,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value,e==null?void 0:e.displayValueEnabled,e==null?void 0:e.max,e==null?void 0:e.min,e==null?void 0:e.step],()=>this.scheduleRender(),vt),Ga.actions):this.addHandles(Me(()=>[e==null?void 0:e.className,e==null?void 0:e.image,e==null?void 0:e.id,e==null?void 0:e.title,e==null?void 0:e.visible,e==null?void 0:e.value],()=>this.scheduleRender(),vt),Ga.actions)}_renderOnItemChanges(e){this.addHandles([Me(()=>{var i,s,a;return[e==null?void 0:e.actionsOpen,e==null?void 0:e.visible,e==null?void 0:e.open,e==null?void 0:e.updating,e==null?void 0:e.connectionStatus,e==null?void 0:e.publishing,e==null?void 0:e.title,e==null?void 0:e.visibleAtCurrentScale,e==null?void 0:e.error,e==null?void 0:e.visibilityMode,e==null?void 0:e.panel,(i=e==null?void 0:e.panel)==null?void 0:i.title,(s=e==null?void 0:e.panel)==null?void 0:s.content,(a=e==null?void 0:e.panel)==null?void 0:a.className,e==null?void 0:e.sortable,e==null?void 0:e.childrenSortable]},()=>this.scheduleRender(),ea),Me(()=>[e==null?void 0:e.hidden,e==null?void 0:e.error],()=>this._setVisibleItems(this.operationalItems)),e.actionsSections.on("change",()=>this.scheduleRender()),e.children.on("change",()=>this.scheduleRender())],Ga.items),e.children.forEach(i=>this._renderOnItemChanges(i)),e.actionsSections.forEach(i=>this._watchActionSectionChanges(i))}_itemsChanged(e){this.removeHandles(Ga.items),this.removeHandles(Ga.actions),this.removeHandles(Ga.actionSection),e.forEach(i=>this._renderOnItemChanges(i)),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}_filterActions(e){return e.map(i=>i.filter(s=>s.visible))}_countActions(e){return e.reduce((i,s)=>i+s.length,0)}_getIconImageStyles(e){const i=e.declaredClass==="esri.widgets.LayerList.ListItemPanel"||e.declaredClass==="esri.support.Action.ActionButton"||e.declaredClass==="esri.support.Action.ActionToggle"?e.image:null;return{"background-image":i?`url("${i}")`:void 0}}_selectionKeydown(e){var j,D,V,W;const i=["ArrowDown","ArrowUp"],s=vd(e);if(!i.includes(s))return void this._toggleSelection(e);e.stopPropagation();const a=e.currentTarget,d=Wi(a),{_sortableMap:y,selectedItems:g}=this,_=a.dataset.group,x=y.get(_);if(!x||!d)return;const I=ab(d,g),A=x.toArray(),C=e.target,N=A.indexOf(C.dataset[One]);if(N!==-1){if(s==="ArrowDown"){const K=N+1;if(K>=A.length)return;I?(a8(A,N,K),x.sort(A),this._sortLayers(x),this._focusSortUid=(j=d.layer)==null?void 0:j.uid):(this._focusSortUid=(D=d.layer)==null?void 0:D.uid,this.scheduleRender())}if(s==="ArrowUp"){const K=N-1;if(K<=-1)return;I?(a8(A,N,K),x.sort(A),this._sortLayers(x),this._focusSortUid=(V=d.layer)==null?void 0:V.uid):(this._focusSortUid=(W=d.layer)==null?void 0:W.uid,this.scheduleRender())}}}_toggleActionsOpen(e){const i=Wi(e.currentTarget);if(!i)return;const{actionsOpen:s}=i,a=!s;a&&this.operationalItems.forEach(d=>MP(d)),i.actionsOpen=a,e.stopPropagation()}_triggerPanel(e){const i=Cne(e.currentTarget);e.stopPropagation(),i&&!i.disabled&&(i.open=!i.open)}_triggerAction(e){const i=e.currentTarget,s=Pne(i),a=Wi(i);s&&a&&(s.type==="toggle"&&(s.value=!s.value),this.triggerAction(s,a),e.stopPropagation())}_toggleVisibility(e){const i=e.currentTarget,s=i.getAttribute("data-parent-visibility"),a=Wi(i);a&&(s===g0.exclusive&&a.visible||(a.visible=!a.visible),e.stopPropagation())}_toggleChildrenClick(e){const i=Wi(e.currentTarget);i&&(i.open=!i.open,e.stopPropagation())}_toggleSelection(e){var g,_;e.stopPropagation();const{multipleSelectionEnabled:i,selectedItems:s}=this,a=Wi(e.currentTarget);if(!a)return;const d=ab(a,s),{length:y}=s;if(!i)return y&&!(d&&y===1)?(s.removeAll(),void s.add(a)):void(d?(g=s.remove)==null?void 0:g.call(s,d):s.add(a));d?(_=s.remove)==null||_.call(s,d):s.add(a)}get test(){return{visibleItems:this.visibleItems}}};function Wi(t){return t==null?void 0:t["data-item"]}function Cne(t){return t==null?void 0:t["data-panel"]}function Pne(t){return t==null?void 0:t["data-action"]}b([S()],Zt.prototype,"visibleItems",void 0),b([S()],Zt.prototype,"iconClass",void 0),b([S()],Zt.prototype,"icon",void 0),b([S()],Zt.prototype,"label",null),b([S()],Zt.prototype,"listItemCanGiveFunction",void 0),b([S()],Zt.prototype,"listItemCanReceiveFunction",void 0),b([S()],Zt.prototype,"listItemCreatedFunction",null),b([S(),ma("esri/widgets/LayerList/t9n/LayerList")],Zt.prototype,"messages",void 0),b([S(),ma("esri/t9n/common")],Zt.prototype,"messagesCommon",void 0),b([S()],Zt.prototype,"multipleSelectionEnabled",void 0),b([S()],Zt.prototype,"operationalItems",null),b([S()],Zt.prototype,"selectionEnabled",void 0),b([S()],Zt.prototype,"selectedItems",void 0),b([S()],Zt.prototype,"view",null),b([aP("trigger-action"),S({type:pP})],Zt.prototype,"viewModel",void 0),b([S()],Zt.prototype,"visibleElements",void 0),b([Ft("visibleElements")],Zt.prototype,"castVisibleElements",null),b([Ns()],Zt.prototype,"_toggleActionsOpen",null),b([Ns()],Zt.prototype,"_triggerPanel",null),b([Ns()],Zt.prototype,"_triggerAction",null),b([Ns()],Zt.prototype,"_toggleVisibility",null),b([Ns()],Zt.prototype,"_toggleChildrenClick",null),b([Ns()],Zt.prototype,"_toggleSelection",null),Zt=b([J("esri.widgets.LayerList")],Zt);const Nne=Zt,ei="esri-search",Re={base:`${ei} esri-widget`,loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:`${ei}--multiple-sources`,isLoading:`${ei}--loading`,isSearching:`${ei}--searching`,showSuggestions:`${ei}--show-suggestions`,showSources:`${ei}--sources`,showWarning:`${ei}--warning`,container:`${ei}__container`,input:`${ei}__input`,inputContainer:`${ei}__input-container`,form:`${ei}__form`,submitButton:`${ei}__submit-button`,sourcesButton:`${ei}__sources-button`,clearButton:`${ei}__clear-button`,sourceName:`${ei}__source-name`,suggestionsMenu:`${ei}__suggestions-menu`,suggestionList:`${ei}__suggestions-list`,suggestionListCurrentLocation:`${ei}__suggestions-list--current-location`,sourcesMenu:`${ei}__sources-menu`,source:`${ei}__source`,warningMenu:`${ei}__warning-menu`,warningMenuBody:`${ei}__warning-body`,warningMenuHeader:`${ei}__warning-header`,warningMenuText:`${ei}__warning-text`,noValueText:`${ei}__no-value-text`,esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},mu="esri-search-result-renderer",Oo={base:`${mu} esri-widget`,anchor:"esri-widget__anchor",showMoreResults:`${mu}__more-results--show-more-results`,moreResults:`${mu}__more-results`,moreResultsList:`${mu}__more-results-list`,moreResultsHeader:`${mu}__more-results-header`,moreResultsItem:`${mu}__more-results-item`,moreResultsListHeader:`${mu}__more-results-list-header`};function Lne(t){return t&&typeof t.highlight=="function"}let Ti=class extends Uh(ye){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};b([S()],Ti.prototype,"autoNavigate",void 0),b([S()],Ti.prototype,"filter",void 0),b([S()],Ti.prototype,"getResults",void 0),b([S()],Ti.prototype,"getSuggestions",void 0),b([S()],Ti.prototype,"maxResults",void 0),b([S()],Ti.prototype,"maxSuggestions",void 0),b([S()],Ti.prototype,"minSuggestCharacters",void 0),b([S()],Ti.prototype,"outFields",void 0),b([S()],Ti.prototype,"placeholder",void 0),b([S()],Ti.prototype,"popupEnabled",void 0),b([S()],Ti.prototype,"popupTemplate",void 0),b([S()],Ti.prototype,"prefix",void 0),b([S()],Ti.prototype,"resultGraphicEnabled",void 0),b([S()],Ti.prototype,"resultSymbol",void 0),b([S()],Ti.prototype,"suggestionsEnabled",void 0),b([S()],Ti.prototype,"suffix",void 0),b([S()],Ti.prototype,"withinViewEnabled",void 0),b([S()],Ti.prototype,"zoomScale",void 0),Ti=b([J("esri.widgets.Search.SearchSource")],Ti);const Vv=Ti;let qu=class extends Ii(ye){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};b([S({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],qu.prototype,"onFields",void 0),b([S({type:String,json:{write:!0}})],qu.prototype,"operator",void 0),b([S({type:String,json:{write:!0}})],qu.prototype,"searchTerm",void 0),b([S({type:String,json:{write:!0}})],qu.prototype,"searchType",void 0),qu=b([J("esri.rest.support.FullTextSearch")],qu);const IP=qu,c8=me.getLogger("esri.widgets.Search.support.geometryUtils");function Rne(t,e){var s,a;if(!e)return c8.error("missing-parameter: view is missing."),Promise.reject(new oe("searchgeometryutils:missing-parameter","view is missing."));if(!t)return c8.error("missing-parameter: point is missing."),Promise.reject(new oe("searchgeometryutils:missing-parameter","point is missing."));if(t.hasZ||e.type==="2d")return Promise.resolve(t);const i=(s=e==null?void 0:e.map)==null?void 0:s.ground;return i&&i.layers.length?i.queryElevation(t,{cache:(a=e.basemapTerrain)==null?void 0:a.elevationQueryCache}).then(d=>d.geometry):Promise.resolve(t)}function p8(t){if(t==null)return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":return t.getPoint(0);case"polyline":return t.getPoint(0,0)}return null}function e6(t,e,i){return t==null?null:t.type==="extent"?t:t.type==="multipoint"||t.type==="polygon"||t.type==="polyline"?t.extent:t.type==="point"?EP(t,e,i):void 0}function R9(t,e,i){return t==null||e==null?null:EP(t.center,e,i)}function EP(t,e,i){const s=t.hasZ?t.z:void 0;return e!=null&&e.map?(i!=null?Ose(e,i):e.extent).clone().centerAt(t).set({zmax:s,zmin:s}):new bt({xmin:t.x-.25,ymin:t.y-.25,xmax:t.x+.25,ymax:t.y+.25,spatialReference:t.spatialReference,zmin:s,zmax:s})}const jne=/https?:\/\/services.*\.arcgis\.com/i,Dne=/(?:\{([^}]+)\})/g,lp=me.getLogger("esri.widgets.Search.support.layerSearchUtils");function Fne(t,e){const{exactMatch:i=!1,location:s,maxResults:a,spatialReference:d,source:y,sourceIndex:g,suggestResult:_,view:x}=t,{layer:I,filter:A,zoomScale:C}=y,N=x==null?void 0:x.scale,j=AP(y,x),D=e&&e.signal;return OP(I).then(()=>{const V=I.popupTemplate;return V?V.getRequiredFields(I.fieldsIndex):null}).then(V=>{var Ne,Le,Be,Pe;const{objectIdField:W,returnZ:K}=I,Y=jP(y);if(!t6(I,Y))throw lp.error("invalid-field: displayField is invalid."),new oe("getResults():invalid-field","displayField is invalid.");const ee=V&&V.length?V:[Y],re=y.outFields||ee,se=kP(re);if(re.includes(W)||se||re.push(W),(Ne=I.floorInfo)!=null&&Ne.floorField&&re.push(I.floorInfo.floorField),!(se||qm(I,re)))throw lp.error("invalid-field: outField is invalid."),new oe("getResults():invalid-field","outField is invalid.");const ue=I.createQuery(),{orderByFields:de}=y;if(de&&(ue.orderByFields=de),d){ue.outSpatialReference=d;const dt=1/_o(d);dt&&(ue.maxAllowableOffset=dt)}const we=I.geometryType==="mesh"||I.geometryType==="multipatch",Oe=((Be=(Le=I.capabilities)==null?void 0:Le.data)==null?void 0:Be.supportsZ)&&!we;if(ue.returnZ=Oe&&K!==!1,ue.returnGeometry=!0,ue.multipatchOption=we?"xyFootprint":null,re&&(ue.outFields=re),s)ue.geometry=s;else if(_.key)ue.objectIds=[_.key];else{const dt=y.searchFields||[Y];if(!qm(I,dt))throw lp.error("invalid-field: search field is invalid."),new oe("getResults():invalid-field","search field is invalid.");if(RP(I)&&(ue.num=a),j&&(ue.geometry=j),!((Pe=_.text)==null?void 0:Pe.trim()))return[];const kt=_.text,{prefix:at="",suffix:er=""}=y,Zh=DP(`${at}${kt}${er}`);LP(I)&&PP(I,dt)&&!i&&kt&&(ue.fullText=NP({text:kt,searchFields:dt}));const $o=FP({searchTerm:Zh,layer:I,searchFields:dt,filter:A,exactMatch:i,query:ue,type:"search"});if(ue.where=$o,!CP(ue))return[]}return I.queryFeatures(ue,{signal:D}).then(dt=>Zne(dt,x,y,g,Y,N,C))})}function zne(t,e){const{source:i,spatialReference:s,view:a,suggestTerm:d,maxSuggestions:y,sourceIndex:g,exactMatch:_}=t,{layer:x,filter:I}=i,A=e&&e.signal,C=AP(i,a);return OP(x).then(()=>{if(!RP(x))return[];const N=jP(i),j=i.searchFields||[N],D=[];i.suggestionTemplate?i.suggestionTemplate.replaceAll(Dne,(Oe,Ne)=>(D.push(Ne),Oe)):D.push(N);const V=kP(D);D.includes(x.objectIdField)||V||D.push(x.objectIdField);const W=t6(x,N),K=V||qm(x,D),Y=qm(x,j);if(!W)throw lp.error("invalid-field: displayField is invalid."),new oe("getSuggestions():invalid-field","displayField is invalid.");if(!K)throw lp.error("invalid-field: outField is invalid."),new oe("getSuggestions():invalid-field","outField is invalid.");if(!Y)throw lp.error("invalid-field: search field is invalid."),new oe("getSuggestions():invalid-field","search field is invalid.");const ee=x.createQuery(),{orderByFields:re}=i;if(re&&(ee.orderByFields=re),ee.outSpatialReference=s,ee.returnGeometry=!1,ee.num=y,ee.outFields=D,C&&(ee.geometry=C),!d.trim())return[];const{prefix:se="",suffix:ue=""}=i,de=DP(`${se}${d}${ue}`);LP(x)&&PP(x,j)&&!_&&d&&(ee.fullText=NP({text:d,searchFields:j}));const we=FP({searchTerm:de,layer:x,searchFields:j,filter:I,exactMatch:_,query:ee,type:"suggest"});return ee.where=we,CP(ee)?x.queryFeatures(ee,{signal:A}).then(Oe=>Kne(Oe,i,g,N)):[]})}function AP(t,e){const{filter:i,withinViewEnabled:s}=t,a=e==null?void 0:e.extent;return(i==null?void 0:i.geometry)??(s&&a?a:void 0)}function kP(t){return t&&t.includes("*")}async function OP(t){t&&await t.load()}function CP(t){return!(!t.fullText&&!t.where)}function PP(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter(s=>s.indexType==="FullText").some(s=>{var d;const a=((d=s.fields)==null?void 0:d.split(",").map(y=>y.trim().toLowerCase()))||[];return e.every(y=>a.includes(y.toLowerCase()))})}function NP({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new IP({onFields:e,searchTerm:i,searchType:"prefix"}))}function LP(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function RP(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function Vne(t){var e,i,s;return((s=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find(a=>a.type==="string"))==null?void 0:s.name)??""}function jP(t){return t.displayField||t.layer.displayField||Vne(t.layer)}function qm(t,e){return!(!t||!(e!=null&&e.length))&&e.every(i=>t6(t,i))}function t6(t,e){return!!t.getField(e)}function Gne(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function Une(t,e,i){let s=null;const{codedValues:a}=t;return a&&a.some(d=>{const y=d.name,g=i?y:y.toLowerCase();return(i?e:e.toLowerCase())===g&&(s=d.code.toString(),!0)}),s}function DP(t){return t.replaceAll("'","''")}function m0(t,e){const i=e==null?void 0:e.where;return i?`(${t}) AND (${i})`:t}function qne({currentTerm:t,field:e,filter:i,exactMatch:s,url:a,type:d}){const y=e==null?void 0:e.type,g=e==null?void 0:e.name;if(y==="string"||y==="date"||y==="global-id"){const _=jne.test(a??""),x=_&&Gne(t)?"N":"";return m0(s&&d==="search"?`${g} = ${x}'${t}'`:_?`${g} LIKE ${x}${`'${t}%'`}`:`${`LOWER(${g})`} LIKE ${x}${`'${t.toLowerCase()}%'`}`,i)}if(y==="oid"||y==="small-integer"||y==="integer"||y==="single"||y==="double"){const _=Number(t);return isNaN(_)?null:m0(`${g} = ${_}`,i)}return m0(`${g} = ${t}`,i)}function Bne(t,e){return t?` OR (${e})`:`(${e})`}function FP({searchTerm:t,layer:e,searchFields:i,filter:s,exactMatch:a,query:d,type:y}){const{definitionExpression:g,url:_}=e;let x="";return!d.fullText&&t&&i&&i.forEach(I=>{const A=e.getField(I),C=typeof e.getFieldDomain=="function"&&e.getFieldDomain(I),N=(C&&C.type==="coded-value"?Une(C,t,a):null)||t||null;if(N!==null){const j=qne({currentTerm:N,field:A,filter:s,exactMatch:a,url:_,type:y});j&&(x+=Bne(x,j))}}),g&&x?`(${g}) AND (${x})`:g||x}function Hne(t,e){let i=null;const{codedValues:s}=t;return s&&s.length&&s.some(a=>a.code===e&&(i=a.name,!0)),i}function Wne(t,e){return t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function zP(t,e,i){const s=t.sourceLayer,{attributes:a}=t,d=typeof s.getFieldDomain=="function"&&s.getFieldDomain(i);if(e)return MA(e,a);if(i&&a){const y=s.getField(i),g=Wne(a,i);return g==null?"":d&&d.type==="coded-value"?Hne(d,g)??"":(y==null?void 0:y.type)==="date"?Wl(new Date(g)):typeof g=="number"?g.toString():typeof g!="string"?"":g.trim()}return""}function Jne(t,e,i,s){const a=t.sourceLayer,{attributes:d}=t,{objectIdField:y}=a,g=y?d[y]:null;return{text:zP(t,e.suggestionTemplate,s),key:g,sourceIndex:i}}function Kne(t,e,i,s){return t.features.map(a=>Jne(a,e,i,s))}function Yne(t,e,i,s,a,d,y){const g=t.clone(),_=t.sourceLayer,x=_==null?void 0:_.objectIdField,I=x?t.attributes[x]:null,A=zP(t,i.searchTemplate,a),C=e6(g.geometry,e,d),N=typeof y=="number"?R9(ae(C),e,y):C,j=t.clone();return N!=null&&(j.geometry=Pn.fromExtent(N)),{extent:N,target:j,feature:g,key:I,name:A,sourceIndex:s}}function Zne(t,e,i,s,a,d,y){return t.features.map(g=>Yne(g,e,i,s,a,d,y))}var j9;let hn=j9=class extends Vv{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>Fne({source:this,...e},i),this.getSuggestions=(e,i)=>zne({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new j9({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?ae(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?ae(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return((e=(t=this.layer.fieldsIndex)==null?void 0:t.fields.find(i=>i.type==="string"))==null?void 0:e.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map(i=>{const s=t.getField(i);return s&&s.alias||i}).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};b([S({json:{read:{source:"field.name"},write:{target:"field.name"}}})],hn.prototype,"displayField",void 0),b([S({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],hn.prototype,"exactMatch",void 0),b([S({value:null})],hn.prototype,"layer",null),b([S()],hn.prototype,"name",null),b([S({type:[String],json:{write:!0}})],hn.prototype,"orderByFields",void 0),b([S()],hn.prototype,"searchFields",void 0),b([S()],hn.prototype,"searchTemplate",void 0),b([S()],hn.prototype,"suggestionTemplate",void 0),hn=j9=b([J("esri.widgets.Search.LayerSearchSource")],hn);const Nc=hn;function Xne(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function Qne(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let cl=class extends ye{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};b([S({type:String,json:{write:!0}})],cl.prototype,"address",void 0),b([S({type:Object,json:{write:!0}})],cl.prototype,"attributes",void 0),b([S({type:bt,json:{write:!0}})],cl.prototype,"extent",void 0),b([S({type:Ue,json:{write:!0}})],cl.prototype,"location",void 0),b([S({type:Number,json:{write:!0}})],cl.prototype,"score",void 0),cl=b([J("esri.rest.support.AddressCandidate")],cl);const VP=cl,i6={type:String,json:{read:{source:"token"},write:{target:"token"}}};let sr=class extends ye{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};b([S({type:Object,json:{write:!0}})],sr.prototype,"address",void 0),b([S(i6)],sr.prototype,"apiKey",void 0),b([S({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],sr.prototype,"categories",void 0),b([S({type:String,json:{write:!0}})],sr.prototype,"countryCode",void 0),b([S({type:Boolean,json:{write:!0}})],sr.prototype,"forStorage",void 0),b([S({type:Ue,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],sr.prototype,"location",void 0),b([S({type:String,json:{write:!0}})],sr.prototype,"locationType",void 0),b([S({type:String,json:{write:!0}})],sr.prototype,"magicKey",void 0),b([S({type:Number,json:{write:!0}})],sr.prototype,"maxLocations",void 0),b([S({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],sr.prototype,"outFields",void 0),b([S({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],sr.prototype,"outSpatialReference",void 0),b([S({type:bt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],sr.prototype,"searchExtent",void 0),sr=b([J("esri.rest.support.AddressToLocationsParameters")],sr),sr.from=ui(sr);const GP=sr;async function eoe(t,e,i){e=GP.from(e);const s=ds(t),{address:a,...d}=e.toJSON(),y={...a,...d,f:"json"},g=Up({...s.query,...y}),_=Gp(g,i),x=`${s.path}/findAddressCandidates`;return pt(x,_).then(toe)}function toe({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(s=>{if(!s)return;const{extent:a,location:d}=s,y=!a||Qne(a);return Xne(d)&&y?(a&&(a.spatialReference=i),d&&(d.spatialReference=i),VP.fromJSON(s)):void 0}):[]}let Wo=class extends ye{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};b([S(i6)],Wo.prototype,"apiKey",void 0),b([S({type:Ue,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,s=i!==void 0;e.location=s?i:null}}}})],Wo.prototype,"location",void 0),b([S({type:String,json:{write:!0}})],Wo.prototype,"locationType",void 0),b([S({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Wo.prototype,"outSpatialReference",void 0),Wo=b([J("esri.rest.support.LocationToAddressParameters")],Wo),Wo.from=ui(Wo);const UP=Wo;async function ioe(t,e,i){e=UP.from(e);const s=ds(t),a={...e.toJSON(),f:"json"},d=Up({...s.query,...a}),y=Gp(d,i),g=`${s.path}/reverseGeocode`;return pt(g,y).then(roe)}function roe({data:t}){if(!t)return;const{address:e,location:i}=t,s=e&&e.Match_addr||"";return VP.fromJSON({address:s,attributes:e||{},location:i,score:100})}let Lc=class extends ye{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};b([S({type:Boolean,json:{write:!0}})],Lc.prototype,"isCollection",void 0),b([S({type:String,json:{write:!0}})],Lc.prototype,"magicKey",void 0),b([S({type:String,json:{write:!0}})],Lc.prototype,"text",void 0),Lc=b([J("esri.rest.support.SuggestionCandidate")],Lc);const soe=Lc;let Yr=class extends ye{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};b([S(i6)],Yr.prototype,"apiKey",void 0),b([S({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],Yr.prototype,"categories",void 0),b([S({type:String,json:{write:!0}})],Yr.prototype,"countryCode",void 0),b([S({type:Ue,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],Yr.prototype,"location",void 0),b([S({type:Number,json:{write:!0}})],Yr.prototype,"maxSuggestions",void 0),b([S({type:Xe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Yr.prototype,"outSpatialReference",void 0),b([S({type:bt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],Yr.prototype,"searchExtent",void 0),b([S({type:String,json:{write:!0}})],Yr.prototype,"text",void 0),Yr=b([J("esri.rest.support.SuggestLocationsParameters")],Yr),Yr.from=ui(Yr);const qP=Yr;async function noe(t,e,i){const s=ds(t),a={...(e=qP.from(e)).toJSON(),f:"json"},d=Up({...s.query,...a}),y=Gp(d,i),g=`${s.path}/suggest`;return pt(g,y).then(ooe)}function ooe(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(s=>new soe(s)):[]}const aoe="Single Line Input",loe=3e5;function uoe(t,e){return t.location?foe(t,e):yoe(t,e)}function BP(t,e){var s;if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=loe?(s=t==null?void 0:t.extent)==null?void 0:s.center:null}async function hoe(t,e){const{source:i,spatialReference:s,view:a,suggestTerm:d,maxSuggestions:y,sourceIndex:g}=t,_=new qP,{apiKey:x,url:I}=i,A=HP(i,a),C=e&&e.signal;if(!I)return null;x&&(_.apiKey=x),i.categories&&(_.categories=i.categories),s&&(_.outSpatialReference=s);const N=BP(a,i);if(N&&(_.location=N),!d.trim())return null;const{prefix:j="",suffix:D=""}=i,V=`${j}${d}${D}`;return _.text=V,A&&(_.searchExtent=A),_.maxSuggestions=y,i.countryCode&&(_.countryCode=i.countryCode),noe(I,_,{signal:C}).then(W=>moe(W,g))}function coe(t){return!!t&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function poe(t){return!!t&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function d8(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const doe="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function foe(t,e){const{source:i,spatialReference:s,location:a,sourceIndex:d,view:y}=t,{apiKey:g,url:_,zoomScale:x,defaultZoomScale:I}=i;if(_==null)return[];const A=y==null?void 0:y.scale,C=e==null?void 0:e.signal,N=new UP;N.location=a,g&&(N.apiKey=g),s&&(N.outSpatialReference=s);try{return WP([await ioe(_,N,{signal:C})],{sourceIndex:d,scale:A,view:y,zoomScale:x,defaultZoomScale:I})}catch{return[]}}function HP(t,e){const{filter:i,withinViewEnabled:s}=t,a=e&&e.scale,d=e&&e.extent,y=i&&i.geometry;return e6(y,e,a)||(s&&d?d:void 0)}async function yoe(t,e){var ue;const{source:i,suggestResult:s,spatialReference:a,view:d,maxResults:y,sourceIndex:g}=t,_=i&&i.zoomScale,x=i&&i.defaultZoomScale;if(!((ue=s.text)==null?void 0:ue.trim()))return null;const A=!s.key&&i.prefix?i.prefix:"",C=!s.key&&i.suffix?i.suffix:"",N=`${A}${s.text}${C}`,j=new GP,{apiKey:D,url:V}=i,W=d&&d.scale,K=HP(i,d),Y=e&&e.signal;if(D&&(j.apiKey=D),!V)return null;i.categories&&(j.categories=i.categories),i.locationType&&(j.locationType=i.locationType),a&&(j.outSpatialReference=a);const ee=BP(d,i);ee&&(j.location=ee),j.maxLocations=y,K&&(j.searchExtent=K),i.countryCode&&(j.countryCode=i.countryCode);const{key:re}=s,se=`${re}`;return re&&(j.magicKey=se),j.address={},j.address[i.singleLineFieldName||aoe]=N,i.outFields&&(j.outFields=i.outFields),eoe(V,j,{signal:Y}).then(de=>WP(de,{key:se,scale:W,sourceIndex:g,view:d,zoomScale:_,defaultZoomScale:x}))}function goe(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function moe(t,e){return t.map(i=>goe(i,e))}function voe(t,e){const{key:i,scale:s,sourceIndex:a,view:d,zoomScale:y,defaultZoomScale:g}=e,{attributes:_,extent:x,location:I,address:A}=t,C=new Nr({geometry:I,attributes:_}),N=x||I,j=e6(N,d,s),D=typeof y=="number"?R9(j,d,y):typeof g=="number"&&(N==null?void 0:N.type)==="point"?R9(j,d,g):j,V=I?`${I.x},${I.y}`:"",W=A||V,K=C.clone();return D!=null&&(K.geometry=Pn.fromExtent(D)),{extent:D,feature:C,target:K,key:i,name:W,sourceIndex:a}}function WP(t,e){return t.filter(Boolean).map(i=>voe(i,e))}var D9;const boe="esri.widgets.Search.LocatorSearchSource";let vr=D9=class extends Vv{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>uoe({source:this,...e},i),this.getSuggestions=(e,i)=>hoe({source:this,...e},i)}clone(){return new D9({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?ae(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?ae(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};b([S()],vr.prototype,"apiKey",void 0),b([S()],vr.prototype,"categories",void 0),b([S()],vr.prototype,"countryCode",void 0),b([S({json:{write:!0}})],vr.prototype,"defaultZoomScale",void 0),b([S()],vr.prototype,"localSearchDisabled",void 0),b([S()],vr.prototype,"locationType",void 0),b([S({json:{write:!0}})],vr.prototype,"name",void 0),b([S({json:{write:!0}})],vr.prototype,"placeholder",void 0),b([S()],vr.prototype,"searchTemplate",void 0),b([S({json:{write:!0}})],vr.prototype,"singleLineFieldName",void 0),b([S({json:{read:{source:"suggest"},write:{target:"suggest"}}})],vr.prototype,"suggestionsEnabled",void 0),b([S({json:{write:!0}})],vr.prototype,"url",void 0),b([S({json:{write:!0}})],vr.prototype,"zoomScale",void 0),vr=D9=b([J(boe)],vr);const JP=vr;let Bu=class extends ye{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(a=>a.toJSON()),i=this.geometries[0],s={};return s.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),s.inSR=i.spatialReference.wkid||JSON.stringify(i.spatialReference.toJSON()),s.geometries=JSON.stringify({geometryType:Gh(i),geometries:e}),this.transformation&&(s.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(s.transformForward=this.transformForward),s}};b([S()],Bu.prototype,"geometries",void 0),b([S({json:{read:{source:"outSR"}}})],Bu.prototype,"outSpatialReference",void 0),b([S()],Bu.prototype,"transformation",void 0),b([S()],Bu.prototype,"transformForward",void 0),Bu=b([J("esri.rest.support.ProjectParameters")],Bu);const KP=Bu,woe=ui(KP);async function _oe(t,e,i){e=woe(e);const s=ds(t),a={...s.query,f:"json",...e.toJSON()},d=e.outSpatialReference,y=Gh(e.geometries[0]),g=Gp(a,i);return pt(s.path+"/project",g).then(({data:{geometries:_}})=>YC(_,y,d))}const YP=me.getLogger("esri.widgets.support.geolocationUtils"),Soe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function xoe(){const t=le("esri-geolocation");return t||YP.warn("geolocation-unsupported","Geolocation unsupported."),t}function $oe(){const t=window.isSecureContext;return t||YP.warn("insecure-context","Geolocation requires a secure origin."),t}function f8(){return xoe()&&$oe()}function Toe(t){return t||(t=Soe),new Promise((i,s)=>{setTimeout(()=>s(new oe("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,s,t??void 0)})}function Moe(t,e){const{position:i,view:s}=t,a=Ioe(i),d=a==null?void 0:a.coords;if(!d)throw new oe("geometry-service:no-coords","Geolocation has no coordinates");return Aoe(Eoe(d),s,e)}function Ioe(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:i,timestamp:t.timestamp}}function Eoe({longitude:t,latitude:e,altitude:i}){return new Ue({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function Aoe(t,e,i){if(!e)return Promise.resolve(t);const s=e.spatialReference;return s.isWGS84?Promise.resolve(t):s.isWebMercator?Promise.resolve(Vl(t)):koe(i).then(a=>{if(!a)throw new oe("geometry-service:missing-url","Geometry service URL is missing");const d=new KP({geometries:[t],outSpatialReference:s});return _oe(a,d,i).then(y=>y[0])})}function koe(t){if(mt.geometryServiceUrl)return Promise.resolve(mt.geometryServiceUrl);const e=ar.getDefault();return e.load(t).catch(()=>{}).then(()=>e.get("helperServices.geometry.url"))}function dr(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const Ooe=()=>T5("esri/widgets/Search/t9n/Search"),ZP="esri.widgets.Search.SearchViewModel",Co=me.getLogger(ZP),y8="highlight",ug=Ge.ofType({key:t=>t.layer?"layer":"locator",base:Vv,typeMap:{layer:Nc,locator:JP}}),g8=Xe.WGS84,Coe="esri/images/search/search-symbol-32.png",Poe=/<(?:.|\s)*?>/g,Rc=-1;let rt=class extends NC(_a.EventedMixin(je)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new ug,this.defaultSymbols={point:new zf({url:It(Coe),size:24,width:24,height:24}),polyline:new ps({color:[130,130,130,1],width:2}),polygon:new su({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=ar.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new ug,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await Ooe();this.messages=i,this.defaultPopupTemplate=new Lf({title:i.searchResult,content:"{Match_addr}"})};e(),this.addHandles([Me(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),vt),S5(e)])}destroy(){this.removeAllHandles(),this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:Rc}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:s}=this,a=typeof s=="function"?s.call(null,{sources:e,defaultSources:i}):s?i.concat(e):e,d=this._get("allSources")||new ug;return d.removeAll(),d.addMany(a.filter(Boolean)),d}get locationEnabled(){return this._get("locationEnabled")||f8()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=f8();if(e&&!i){const s=new oe("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Co.error(s)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:s}=this;if(i===Rc)return s??"";const a=e.at(i);return(a==null?void 0:a.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:i}=this;e&&i&&e.graphics.remove(i),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const s=this._createSuggestionForSearch(e),a=(async()=>{var d;try{await this.when();const y=await this._getResultsFromSources(s,i);if((d=i==null?void 0:i.signal)!=null&&d.aborted)return null;const g={activeSourceIndex:this.activeSourceIndex,searchTerm:s.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(g,y,s);const _=this._getFirstResult(g.results),x=s.location&&_?_.name:s.text,I=x==null?void 0:x.replace(Poe,"");return this._set("searchTerm",I),(s.key&&typeof s.sourceIndex=="number"||s.location)&&this._set("selectedSuggestion",s),this._set("results",g.results),this._set("resultCount",g.results.reduce((A,C)=>{var N;return A+(((N=C.results)==null?void 0:N.length)??0)},0)),this.emit("search-complete",g),await this._selectFirstResult(_),g}finally{this._clearSearching()}})();return this._searching=a,a}async searchNearby(e){if(!this.locationEnabled){const s=new oe("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw Co.error(s),s}const i=(async()=>{try{const s=await Toe(),a=await Moe({position:s,view:this.view},e);return await this.search(a,e)}finally{this._clearSearching()}})();return this._searching=i,i}async select(e){if(this.clearGraphics(),!e){const we=new oe("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw Co.error(we),we}const{view:i}=this,s=dr(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),a=s!=null?this.allSources.at(s):null;if(!a){const we=new oe("select:missing-source","Cannot select without a source.",{source:a});throw Co.error(we),we}const d=a instanceof Nc?this._getLayerSourcePopupTemplate(a):a.popupTemplate,y=a.resultSymbol||this._getDefaultSymbol(e),g=dr(a,"resultGraphicEnabled")?a.resultGraphicEnabled:this.resultGraphicEnabled,_=dr(a,"autoNavigate")?a.autoNavigate:this.autoNavigate,x=(dr(a,"popupEnabled")?a.popupEnabled:this.popupEnabled)?d||this.popupTemplate||this.defaultPopupTemplate:null,{feature:I}=e;if(!I){const we=new oe("select:missing-feature","Cannot select without a feature.",{feature:I});throw Co.error(we),we}const{attributes:A,geometry:C,layer:N,sourceLayer:j}=I,D=p8(C),V={layerViewQuery:this._getLayerView(I),elevationQuery:i&&D!=null?Rne(D,i).catch(()=>D):Promise.resolve(D)},W=await Sn(V),K=W.layerViewQuery.value,Y=W.elevationQuery.value;y instanceof Bh&&(y.text=e.name);const ee=i&&_?e.target||e.extent:null;await(ee!=null?this._goToSearchResult(ee):Promise.resolve());const se=K?I:new Nr({geometry:C,symbol:y,attributes:A,layer:N,sourceLayer:j,popupTemplate:x}),ue=i==null?void 0:i.popup,de=ue&&se.getEffectivePopupTemplate(ue.defaultPopupTemplateEnabled);return de&&await i.openPopup({features:[se],location:Y}),K&&Lne(K)&&!de&&this._highlightFeature({graphic:se,layerView:K}),!K&&g&&i&&i.graphics.push(se),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",se),this.emit("select-result",{result:e,source:a,sourceIndex:s}),e}async suggest(e,i,s){const a=e||this.searchTerm;this.emit("suggest-start",{searchTerm:a}),await this._suggestTimer(i,s);const d=await this._suggestImmediate(a,s);return this._set("suggestions",d==null?void 0:d.results),this._set("suggestionCount",(d==null?void 0:d.results.reduce((y,g)=>{var _;return y+(((_=g.results)==null?void 0:_.length)??0)},0))??null),this.emit("suggest-complete",d),d}async when(){await af(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const s=this._updatingPromise=Sn([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await s,s!==this._updatingPromise))return}await af(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,s;const e=(s=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:s.geocode;return e?e.map(a=>{var _;if(a.placefinding===!1)return;const d=mt.apiKey&&d8(a.url)?{url:doe}:null,y=JP.fromJSON({...a,...d}),g=y.url;if(d8(g)||poe(g)||coe(g)){const x=y.outFields??["Addr_type","Match_addr","StAddr","City"],I=(y.placeholder||((_=this.messages)==null?void 0:_.placeholder))??"",A=typeof y.defaultZoomScale=="number"?y.defaultZoomScale:2500;y.singleLineFieldName="SingleLine",y.outFields=x,y.placeholder=I,y.defaultZoomScale=A}return y.singleLineFieldName?y:void 0}).filter(ho):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){var a;const s=(a=this.view)==null?void 0:a.map;return e.map(d=>{const y=s.findLayerById(d.id);if(!y)return;const g=this._getLayerJSON(d),_=Nc.fromJSON(g);return _.placeholder=i,this._getLayer(y,g).then(x=>{_.layer=x}),_}).filter(ho).toArray()}_getTableSources(e,i){var a;const s=(a=this.view)==null?void 0:a.map;return e.map(d=>{if(!d.id)return;const y=s.findTableById(d.id);if(!y)return;const g=this._getLayerJSON(d),_=Nc.fromJSON(g);return _.placeholder=i,this._getLayer(y,g).then(x=>{_.layer=x}),_}).filter(ho).toArray()}_convertApplicationProperties(){var g,_,x;const e=(g=this.view)==null?void 0:g.map,i=(x=(_=e==null?void 0:e.applicationProperties)==null?void 0:_.viewing)==null?void 0:x.search;if(!i)return[];const{enabled:s,hintText:a,layers:d,tables:y}=i;return s?[...this._getLayerSources(d,a),...this._getTableSources(y,a)]:[]}async _getSubLayer(e,i){var d;if(await e.load(),!e.allSublayers)throw new Error;const s=e.allSublayers.find(y=>y.id===i.subLayer);if(!s)throw new Error;const a=await((d=s.createFeatureLayer)==null?void 0:d.call(s));if(!a)throw new Error;return this._createdFeatureLayers.push(a),a}async _getBuildingSubLayer(e,i){await e.load();const s=e.allSublayers.find(a=>a.id===i.subLayer);if((s==null?void 0:s.type)!=="building-component")throw new Error;if(await s.load(),s.associatedLayer==null)throw new Error;return await s.associatedLayer.load(),s}async _getLayer(e,i){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,i)}catch{const a=new oe("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Co.error(a),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,i):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var d;const e=(d=this.view)==null?void 0:d.popup,{resultGraphic:i}=this;if(!e||!i)return;const s="selectedFeature"in e,a=s?e.selectedFeature:null;s&&a&&a===i&&e.close()}_suggestTimer(e,i){const s=e??this.suggestionDelay;return Z_(s,null,i&&i.signal)}_createLocationForSearch(e){return e instanceof Nr?p8(e.geometry):e instanceof Ue?e:Array.isArray(e)&&e.length===2?new Ue({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&dr(e,"key")&&dr(e,"text")&&dr(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),s=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:a,selectedResult:d}=this,y=!e&&a&&d,g=y&&a.key===d.key&&a.sourceIndex===d.sourceIndex,_=y&&a.location;return g||_?a:{location:i,text:i?"":s,sourceIndex:null,key:null}}_getFirstResult(e){let i=null;return e&&e.some(s=>{const{results:a}=s,d=a==null?void 0:a[0],y=!!d;return y&&(i=d),y}),i}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,i){var d;await this.when();const s=await this._getSuggestionsFromSources(e,i);if((d=i==null?void 0:i.signal)!=null&&d.aborted)return null;const a={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(a,s),a}_formatSourceResponse(e,i,s){const a=(i==null?void 0:i.value)||[],d=i==null?void 0:i.error,y=this.allSources.at(s);if(d){const g={sourceIndex:s,source:y,error:d};e.errors.push(g),Co.error(d),e.numErrors++}else{const g={sourceIndex:s,source:y,results:a};e.results.push(g),e.numResults+=a.length}}_formatResponse(e,i,s){if(i)if(e.activeSourceIndex===Rc){const a=s&&dr(s,"sourceIndex")&&s.sourceIndex!==-1?s.sourceIndex:void 0;i.forEach((d,y)=>{const g=a!==void 0?a:y;this._formatSourceResponse(e,d,g)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}async _getResultsFromSources(e,i){const{allSources:s}=this,a=!e.location&&dr(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,d=[];if(!s.length){const y=new oe("search:no-sources-defined","At least one source is required.",{allSources:s});throw Co.error(y),y}return a===Rc?s.forEach((y,g)=>{d.push(this._getResultsFromSource(e,g,i))}):d.push(this._getResultsFromSource(e,a,i)),Sn(d)}async _getSuggestionsFromSources(e,i){const{allSources:s,activeSourceIndex:a}=this,d=[];if(!s.length){const y=new oe("suggest:no-sources-defined","At least one source is required.",{allSources:s});throw Co.error(y),y}return a===Rc?s.forEach((y,g)=>{d.push(this._getSuggestionsFromSource(e,g,i))}):d.push(this._getSuggestionsFromSource(e,a,i)),Sn(d)}async _getResultsFromSource(e,i,s){var I,A;const a=i!=null?this.allSources.at(i):null;if(!a)return null;const{location:d=null}=e,y=((I=this.view)==null?void 0:I.spatialReference)||g8,g=dr(a,"maxResults")?a.maxResults:this.maxResults,_=!!(a instanceof Nc&&dr(a,"exactMatch"))&&a.exactMatch,{view:x}=this;return(A=a.getResults)==null?void 0:A.call(a,{view:x,sourceIndex:i,location:d,suggestResult:e,spatialReference:y,exactMatch:_,maxResults:g},s)}async _getSuggestionsFromSource(e,i,s){var _,x;const a=this.allSources.at(i);if(!a)return null;e??(e="");const d=dr(a,"suggestionsEnabled")?a.suggestionsEnabled:this.suggestionsEnabled,y=e==null?void 0:e.length,g=dr(a,"minSuggestCharacters")?a.minSuggestCharacters:this.minSuggestCharacters;if(d&&e.trim()&&y>=g){const I=((_=this.view)==null?void 0:_.spatialReference)||g8,A=dr(a,"maxSuggestions")?a.maxSuggestions:this.maxSuggestions,{view:C}=this,N=!!(a instanceof Nc&&dr(a,"exactMatch"))&&a.exactMatch;return(x=a.getSuggestions)==null?void 0:x.call(a,{view:C,sourceIndex:i,suggestTerm:e,spatialReference:I,maxSuggestions:A,exactMatch:N},s)}return null}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return dr(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){const i=this.results;if(!i)return null;let s=null;return i.some(a=>a.results.some(d=>d===e&&(s=a.sourceIndex,!0))),s}async _goToSearchResult(e){this._abortGoTo();const i=new AbortController;this._gotoController=i;const s={target:{target:e},options:{signal:i.signal}};e||(s.options.animate=!1),await this.callGoTo(s),this._gotoController=null}_getDefaultSymbol(e){var a;const{defaultSymbols:i}=this,s=(a=e.feature)==null?void 0:a.geometry;if(s==null)return null;switch(s.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this.removeHandles(y8)}async _getLayerView(e){var a,d;const{view:i}=this;if(!e||!i||((a=e.layer)==null?void 0:a.type)==="building-component"||((d=e.layer)==null?void 0:d.type)==="subtype-sublayer")return null;const{layer:s}=e;return s?(await i.when(),i.whenLayerView(s)):null}_highlightFeature(e){const{graphic:i,layerView:s}=e,{attributes:a,layer:d}=i,{objectIdField:y}=d,g=(y&&(a==null?void 0:a[y]))??null,_=s.highlight(g??i);this.addHandles(_,y8)}_setResultFloor(e){var d,y,g;const{view:i}=this,s=(d=e.feature)==null?void 0:d.attributes,a=(y=e.feature)==null?void 0:y.sourceLayer;if(a&&"floorInfo"in a&&((g=a==null?void 0:a.floorInfo)!=null&&g.floorField)&&s){const _=s[a.floorInfo.floorField];i==null||i.emit("select-result-floor",_)}}};rt.ALL_INDEX=Rc,b([S()],rt.prototype,"_searching",void 0),b([S()],rt.prototype,"_updatingPromise",void 0),b([S({readOnly:!0,value:null})],rt.prototype,"activeSource",null),b([S()],rt.prototype,"activeSourceIndex",null),b([S()],rt.prototype,"allPlaceholder",null),b([S({readOnly:!0})],rt.prototype,"allSources",null),b([S()],rt.prototype,"autoNavigate",void 0),b([S()],rt.prototype,"autoSelect",void 0),b([S()],rt.prototype,"defaultPopupTemplate",void 0),b([S({readOnly:!0})],rt.prototype,"defaultSources",void 0),b([S()],rt.prototype,"defaultSymbols",void 0),b([S()],rt.prototype,"includeDefaultSources",void 0),b([S()],rt.prototype,"locationEnabled",null),b([S()],rt.prototype,"maxInputLength",void 0),b([S()],rt.prototype,"maxResults",void 0),b([S()],rt.prototype,"maxSuggestions",void 0),b([S()],rt.prototype,"messages",void 0),b([S()],rt.prototype,"minSuggestCharacters",void 0),b([S({readOnly:!0})],rt.prototype,"placeholder",null),b([S()],rt.prototype,"popupEnabled",void 0),b([S({type:Lf})],rt.prototype,"popupTemplate",void 0),b([S({type:ar})],rt.prototype,"portal",void 0),b([S()],rt.prototype,"resultCount",void 0),b([S()],rt.prototype,"resultGraphicEnabled",void 0),b([S({readOnly:!0})],rt.prototype,"resultGraphic",void 0),b([S({readOnly:!0})],rt.prototype,"results",void 0),b([S({readOnly:!0})],rt.prototype,"selectedSuggestion",void 0),b([S()],rt.prototype,"searchAllEnabled",void 0),b([S({readOnly:!0})],rt.prototype,"selectedResult",void 0),b([S()],rt.prototype,"searchTerm",null),b([S({type:ug})],rt.prototype,"sources",void 0),b([S({readOnly:!0})],rt.prototype,"state",null),b([S()],rt.prototype,"suggestionDelay",void 0),b([S()],rt.prototype,"suggestionCount",void 0),b([S({readOnly:!0})],rt.prototype,"suggestions",void 0),b([S()],rt.prototype,"suggestionsEnabled",void 0),b([S({readOnly:!0})],rt.prototype,"updating",null),b([S()],rt.prototype,"view",void 0),b([S()],rt.prototype,"clear",null),rt=b([J(ZP)],rt);const Yc=rt;let pl=class extends xa{constructor(e,i){super(e,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const e={[Oo.showMoreResults]:this.showMoreResultsOpen};return fe("div",{class:Oo.base},fe("div",{key:"esri-search-renderer__container",class:this.classes(Oo.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return fe("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var s;const e=(s=this.viewModel)==null?void 0:s.selectedResult,i=e&&e.name||"";return fe("div",{key:"esri-search-renderer__result-name",class:Oo.moreResultsItem},i)}renderMoreResultsLists(){const{viewModel:e}=this;if(!e)return[];const i=e.results;if((e.resultCount??0)<2)return null;const s=i==null?void 0:i.map(a=>this.renderMoreResultsList(a));return fe("div",{key:"esri-search-renderer__more-results-container",class:Oo.moreResultsList},s)}renderMoreResultsButton(){const{messages:e,viewModel:i}=this;return i?(i.resultCount??0)<2?null:fe("div",{key:"esri-search-renderer__more-results-button",class:Oo.moreResultsItem},fe("a",{class:Oo.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults)):null}renderMoreResultsHeader(e,i){return fe("div",{key:`esri-search-result-renderer__header-${i}`,class:Oo.moreResultsListHeader},e)}renderMoreResultsList(e){var A,C,N;const{results:i}=e,s=(i==null?void 0:i.length)??0,a=s>0,d=(A=this.viewModel)==null?void 0:A.selectedResult,y=s===1&&i[0]===d,g=this._getSourceName(e.source,e.sourceIndex),_=(((N=(C=this.viewModel)==null?void 0:C.results)==null?void 0:N.length)??0)>1&&!y?this.renderMoreResultsHeader(g,e.sourceIndex):null,x=a&&i.map((j,D)=>this.renderMoreResultsListItem(j,D)),I=a&&!y?fe("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},x):null;return a?fe("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},_,I):null}renderMoreResultsListItem(e,i){return e!==this.get("viewModel.selectedResult")?fe("li",{key:`esri-search-result-renderer__list-item-${i}`},fe("a",{class:Oo.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=this.get("viewModel.view.popup");i&&i.reposition()}_selectResultClick(e){var s;e.preventDefault();const i=e.currentTarget["data-result"];(s=this.viewModel)==null||s.select(i)}_getSourceName(e,i){return i===Yc.ALL_INDEX?this.messages.all:e.name}};b([S(),ma("esri/widgets/Search/t9n/Search")],pl.prototype,"messages",void 0),b([S()],pl.prototype,"showMoreResultsOpen",void 0),b([S()],pl.prototype,"viewModel",void 0),b([Ns()],pl.prototype,"_showMoreResultsClick",null),b([Ns()],pl.prototype,"_selectResultClick",null),pl=b([J("esri.widgets.Search.SearchResultRenderer")],pl);const Noe=pl,Loe=/<[a-z/][\s\S]*>/i,Roe=(t,e)=>{const i=kR(e).split(/\s/),s=new RegExp(`(${i.join("|")})`,"gi");return t.replace(s,a=>`<strong>${a}</strong>`)};let st=class extends xa{constructor(e,i){super(e,i),this._activeMenuItemIndex=-1,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new Noe,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=Re.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new Yc,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=s=>{var d;const a=s.relatedTarget;a&&((d=this._container)!=null&&d.contains(a))||this._clearActiveMenu()},this.addHandles([Me(()=>this.searchTerm,s=>{(s&&this.activeMenu==="warning"||!s&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),Nh(()=>{var s;return(s=this.viewModel)==null?void 0:s.allSources},"change",()=>this._watchSourceChanges()),Me(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),vt),Me(()=>{var s;return(s=this.viewModel)==null?void 0:s.defaultPopupTemplate},s=>{s&&(s.content=this._renderSearchResultsContent.bind(this))},vt)])}destroy(){this.removeAllHandles(),this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=Kt(this._searchResultRenderer)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var e;return(e=this.viewModel)==null?void 0:e.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){var e;return(e=this.viewModel)==null?void 0:e.portal}set portal(e){this.viewModel&&(this.viewModel.portal=e)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}async search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:s}=i;this._searchController=i;try{const a=await this.viewModel.search(e,{signal:s});return this._searchController!==i?void 0:(this.activeMenu=a!=null&&a.numResults?"none":"warning",this._searchController=null,a)}catch{return this._searchController!==i?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(e){this._cancelSuggest();const i=new AbortController,{signal:s}=i;this._suggestController=i;try{const a=await this.viewModel.suggest(e,null,{signal:s});return this._suggestController!==i?void 0:(this._suggestController=null,a!=null&&a.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),a)}catch{return this._suggestController!==i||(this._suggestController=null),null}}render(){const{state:e}=this.viewModel,i={[Re.disabled]:e==="disabled",[Re.esriWidgetDisabled]:this.disabled};return fe("div",{class:this.classes(Re.base,i)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e,disabled:i}=this;return fe("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:i,class:this.classes(Re.submitButton,Re.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},fe("span",{"aria-hidden":"true",class:Re.searchIcon}))}renderWarningMenu(){return fe("div",{key:"esri-search__error-menu",class:this.classes(Re.menu,Re.warningMenu)},fe("div",{class:Re.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:i,sourceMenuId:s,sourceMenuButtonId:a,disabled:d}=this,{activeSourceIndex:y,allSources:g}=this.viewModel;return g.length>1?fe("button",{id:a,key:"esri-search__source-menu-button",bind:this,disabled:d,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(i==="source").toString(),"aria-controls":s,class:this.classes(Re.sourcesButton,Re.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:D1,"data-node-ref":"_sourceMenuButtonNode",type:"button"},fe("span",{"aria-hidden":"true",class:Re.dropdownIcon}),fe("span",{"aria-hidden":"true",class:Re.dropupIcon}),fe("span",{class:Re.sourceName},this._getSourceName(y))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:s,activeMenu:a,sourceMenuId:d,sourceMenuButtonId:y}=this,g=a==="source"&&s>-1?this._buildId("source-item",s):null;return e.length>1?fe("ul",{"aria-activedescendant":g,"aria-labelledby":y,id:d,role:"menu",bind:this,afterCreate:D1,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Re.menuList,tabIndex:-1},i?this.renderSource(Yc.ALL_INDEX):null,e.map((_,x)=>this.renderSource(x)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?fe("div",{key:"esri-search__source-menu",class:this.classes(Re.menu,Re.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:i,disabled:s}=this;return fe("div",{class:Re.loader,key:"base-loader",tabIndex:s?-1:void 0},fe("span",{"aria-hidden":"true",class:Re.loaderAnimation}),fe("span",{class:Re.fallbackText},e.searchButtonTitle),fe("span",{class:Re.loaderText},i.loading))}renderContainer(){const{allSources:e,state:i}=this.viewModel,{activeMenu:s}=this,a={[Re.hasMultipleSources]:e.length>1,[Re.isLoading]:i==="loading",[Re.isSearching]:i==="searching",[Re.showWarning]:s==="warning",[Re.showSources]:s==="source",[Re.showSuggestions]:s==="suggestion"};return fe("div",{tabIndex:-1,afterCreate:d=>{this._container=d,d.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:d=>{d.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(a,Re.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?fe("button",{bind:this,disabled:this.disabled,class:this.classes(Re.clearButton,Re.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},fe("span",{"aria-hidden":"true",class:Re.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:i,displayedSearchTerm:s}=this,a=i&&!s,d=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return a?fe("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Re.menuList,Re.suggestionList,Re.suggestionListCurrentLocation)},fe("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(Re.menuItem,d?Re.menuItemFocus:null)},fe("span",{"aria-hidden":"true",class:Re.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:i,displayedSearchTerm:s,messages:a,suggestionsMenuId:d,inputId:y,_activeMenuItemIndex:g,disabled:_}=this,{maxInputLength:x,placeholder:I,searchTerm:A,suggestionCount:C}=this.viewModel,N=!(!(i&&!s)&&!C),j=e==="suggestion"&&g>-1?this._buildId("suggestion-item",g):null;return fe("input",{"aria-activedescendant":j,"aria-autocomplete":"list","aria-expanded":(N&&e==="suggestion").toString(),"aria-controls":N?d:null,"aria-haspopup":"listbox","aria-label":a.searchButtonTitle,bind:this,disabled:_,placeholder:I,maxlength:x,autocomplete:"off",type:"text",class:this.classes(Re.esriInput,Re.input),value:A,id:y,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:D1,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:A?"":I})}renderForm(){return fe("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:Re.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:i}=e,{results:s}=e;return(s==null?void 0:s.length)?fe("ul",{role:"group",key:`esri-search__suggestion-list-${i}`,class:this.classes(Re.menuList,Re.suggestionList)},s==null?void 0:s.map(d=>this.renderSuggestion(d,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(i=>[this.renderSuggestionHeader(i),this.renderSuggestList(i)]):[]}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:i,suggestionsMenuId:s,inputId:a}=this,{suggestionCount:d}=this.viewModel,y=i&&!e||d;return this._menuItemCount=0,y?fe("div",{id:s,key:"esri-search__suggestions-menu",class:this.classes(Re.menu,Re.suggestionsMenu),role:"listbox","aria-labelledby":a,bind:this,afterCreate:D1,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return fe("div",{key:"esri-search__input-container",class:Re.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){var g;const{allSources:i,activeSourceIndex:s}=this.viewModel,{sourceIndex:a}=e,d=(g=e.results)==null?void 0:g.length,y=i.length>1&&s===Yc.ALL_INDEX;return d&&y?fe("div",{key:`esri-search__suggestion-header-${a}`,class:Re.menuHeader},this._getSourceName(a)):null}renderSuggestion(e,i){const{_activeMenuItemIndex:s,viewModel:{searchTerm:a}}=this;if(!a)return;const d=this.activeMenu==="suggestion"&&s===i;return fe("li",{bind:this,id:this._buildId("suggestion-item",i),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${i}`,"data-suggestion":e,role:"option",innerHTML:this._getSuggestResultHTML(e.text,a),class:this.classes(Re.menuItem,d?Re.menuItemFocus:null)})}renderSource(e){const{activeSourceIndex:i,searchAllEnabled:s}=this.viewModel,a={[Re.menuItemActive]:e===i,[Re.menuItemFocus]:this.activeMenu==="source"&&e===(s?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},d=s?e+1:e;return fe("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",d),"aria-checked":(e===i).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(Re.source,Re.menuItem,a)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:i}=this,s=e?MA(i.noResultsFoundForValue,{value:`"${e}"`}):i.noResultsFound;return fe("div",{key:"esri-search__no_results"},fe("div",{class:Re.warningMenuHeader},i.noResults),fe("div",{class:Re.warningMenuText},s))}renderEmptySearchWarning(){const{messages:e}=this;return fe("div",{key:"esri-search__empty-search"},fe("span",{"aria-hidden":"true",class:Re.noticeIcon}),fe("span",{class:Re.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return fe("div",{key:"esri-search__locate-error"},fe("span",{"aria-hidden":"true",class:Re.noticeIcon}),fe("span",{class:Re.noValueText},e.locateError))}renderWarning(){var a;const{displayedSearchTerm:e,_locateFailed:i}=this,{viewModel:s}=this;return i?this.renderLocateWarning():(a=s.selectedSuggestion)!=null&&a.location||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,i){return`${this.id}-${e}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{viewModel:{allSources:e}}=this,i="sources";this.removeHandles(i),e.forEach(s=>this.addHandles(Me(()=>s.name,()=>this.scheduleRender()),i))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const i=m8(e.currentTarget);i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:i}=e;this._searchController=e,(async()=>{try{const s=await this.viewModel.searchNearby({signal:i});this.activeMenu=s!=null&&s.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var s;if(!e)return;const i=joe(e);i!=null&&(this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(s=this._sourceMenuButtonNode)==null||s.focus())}_cancelSuggest(){this._suggestController=_h(this._suggestController)}_cancelSearch(){this._searchController=_h(this._searchController),this._locateFailed=!1}_handleInputKeyup(e){var d;const i=vd(e);if(e.ctrlKey||e.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||e.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const s=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const a=(d=this._suggestionListNode)==null?void 0:d.getElementsByTagName("li");if(a!=null&&a.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),s)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,a,this._suggestionListNode);const y=a[this._activeMenuItemIndex];if(i==="Enter"&&y){const g=m8(y);return void(g?(this._focus(),this.search(g)):Doe(y)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,i,s){const a=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=i.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),a!==this._activeMenuItemIndex&&s&&EY(i[this._activeMenuItemIndex],s)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const i=e.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){var s;const i=vd(e);if(Mk(i)){e.preventDefault();const a=(s=this._sourceListNode)==null?void 0:s.getElementsByTagName("li"),d=a==null?void 0:a[this._activeMenuItemIndex];this._setSourceFromMenuItem(d)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var d,y,g;const i=vd(e),s=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(s&&e.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((d=this._sourceMenuButtonNode)==null?void 0:d.focus());const a=(y=this._sourceListNode)==null?void 0:y.getElementsByTagName("li");return a&&a.length!==0&&s?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,a,(g=this._sourceListNode)==null?void 0:g.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:i}=this,s=this.viewModel,{allSources:a}=s,d=a.at(e);return e===Yc.ALL_INDEX?i.all:d&&d.name||i.untitledSource}_getSuggestResultHTML(e,i){return e?Loe.test(e)?e:Roe(e,i):this.messages.untitledResult}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};function m8(t){return t==null?void 0:t["data-suggestion"]}function joe(t){return t==null?void 0:t["data-source-index"]}function Doe(t){return!!(t!=null&&t["data-current-location-item"])}b([S()],st.prototype,"_activeMenuItemIndex",void 0),b([S()],st.prototype,"displayedSearchTerm",null),b([S({readOnly:!0})],st.prototype,"inputId",null),b([S({readOnly:!0})],st.prototype,"suggestionsMenuId",null),b([S({readOnly:!0})],st.prototype,"sourceMenuId",null),b([S({readOnly:!0})],st.prototype,"sourceMenuButtonId",null),b([S()],st.prototype,"activeMenu",void 0),b([S({readOnly:!0})],st.prototype,"activeSource",null),b([S()],st.prototype,"activeSourceIndex",null),b([S()],st.prototype,"allPlaceholder",null),b([S({readOnly:!0})],st.prototype,"allSources",null),b([S()],st.prototype,"autoNavigate",null),b([S()],st.prototype,"autoSelect",null),b([S({readOnly:!0})],st.prototype,"defaultSources",null),b([S()],st.prototype,"disabled",void 0),b([S()],st.prototype,"goToOverride",null),b([S()],st.prototype,"iconClass",void 0),b([S()],st.prototype,"icon",void 0),b([S()],st.prototype,"includeDefaultSources",null),b([S()],st.prototype,"label",null),b([S()],st.prototype,"locationEnabled",null),b([S()],st.prototype,"maxResults",null),b([S()],st.prototype,"maxSuggestions",null),b([S(),ma("esri/widgets/Search/t9n/Search")],st.prototype,"messages",void 0),b([S(),ma("esri/t9n/common")],st.prototype,"messagesCommon",void 0),b([S()],st.prototype,"minSuggestCharacters",null),b([S()],st.prototype,"popupEnabled",null),b([S()],st.prototype,"popupTemplate",null),b([S()],st.prototype,"portal",null),b([S()],st.prototype,"resultGraphic",null),b([S()],st.prototype,"resultGraphicEnabled",null),b([S({readOnly:!0})],st.prototype,"results",null),b([S()],st.prototype,"searchAllEnabled",null),b([S()],st.prototype,"searchTerm",null),b([S({readOnly:!0})],st.prototype,"selectedResult",null),b([S()],st.prototype,"sources",null),b([S({readOnly:!0})],st.prototype,"suggestions",null),b([S()],st.prototype,"suggestionsEnabled",null),b([S()],st.prototype,"view",null),b([aP(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),S({type:Yc})],st.prototype,"viewModel",void 0),st=b([J("esri.widgets.Search")],st);const Foe=st;function zoe(t){const{contains:e,dynamicLayers:i,geometryPrecision:s,layerDefinitions:a,layerIds:d,maxAllowableOffset:y,outSR:g,returnGeometry:_,searchFields:x,searchText:I}=t.toJSON(),A={contains:e,returnGeometry:_,geometryPrecision:s,maxAllowableOffset:y,searchText:I};if(d&&(A.layers=d.join(",")),x&&(A.searchFields=x.join(",")),g&&(A.sr=g.wkid||JSON.stringify(g)),a){const C=[];for(let N=0;N<a.length;N++){const j=a[N];C[j.id]=j.definitionExpression}A.layerDefs=Nz(C)}if(i&&i.length){const C=[];for(let j=0;j<i.length;j++){const D=i[j],V=D.id;if(!D.subLayerIds&&d&&d.includes(V)){const W={id:V};W.source=D.source;let K=null;if(a&&a.length){const Y=a.find(ee=>ee.id===V);K=Y&&Y.definitionExpression}K&&(W.definitionExpression=K),C.push(W)}}let N=JSON.stringify(C);N==="[]"&&(N="[{}]"),A.dynamicLayers=N}return A}let cn=class extends ye{constructor(e){super(e),this.displayFieldName=null,this.feature=null,this.foundFieldName=null,this.layerId=null,this.layerName=null,this.value=void 0}readFeature(e,i){const s={attributes:{}};return i.attributes&&(s.attributes=i.attributes),i.geometry&&(s.geometry=i.geometry),Nr.fromJSON(s)}writeFeature(e,i){if(!e)return;const{attributes:s,geometry:a}=e;s&&(i.attributes={...s}),a!=null&&(i.geometry=a.toJSON(),i.geometryType=gI.toJSON(a.type))}};b([S({type:String,json:{write:!0}})],cn.prototype,"displayFieldName",void 0),b([S({type:Nr})],cn.prototype,"feature",void 0),b([Ce("feature",["attributes","geometry"])],cn.prototype,"readFeature",null),b([ke("feature")],cn.prototype,"writeFeature",null),b([S({type:String,json:{write:!0}})],cn.prototype,"foundFieldName",void 0),b([S({type:Number,json:{write:!0}})],cn.prototype,"layerId",void 0),b([S({type:String,json:{write:!0}})],cn.prototype,"layerName",void 0),b([S({json:{write:!0}})],cn.prototype,"value",void 0),cn=b([J("esri.rest.support.FindResult")],cn);const Voe=cn;async function Goe(t,e,i){e=rP.from(e);const s=zoe(e),a=ds(t);a.path+="/find";const d=Up({...a.query,f:"json",...s}),y=Gp(d,i);return pt(a.path,y).then(Uoe)}function Uoe(t){const e=t.data;e.results=e.results||[];const i={results:[]};return i.results=e.results.map(s=>Voe.fromJSON(s)),i}let qoe=class XP{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(zb),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new XP,s=this._originStores[Te.DEFAULTS];s&&s.forEach((a,d)=>{i.set(d,ae(a),Te.DEFAULTS)});for(let a=Te.SERVICE;a<zb;a++){const d=this._originStores[a];d&&d.forEach((y,g)=>{e&&e.has(g)||i.set(g,ae(y),a)})}return i}get(e,i){const s=i===void 0?this._values:this._originStores[i];return s?s.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,s=Te.USER){let a=this._originStores[s];if(a||(a=new Map,this._originStores[s]=a),a.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=s){const d=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,s),d!==i}return!1}delete(e,i=Te.USER){const s=this._originStores[i];if(!s)return;const a=s.get(e);if(s.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let d=i-1;d>=0;d--){const y=this._originStores[d];if(y&&y.has(e)){this._values.set(e,y.get(e)),this._propertyOriginMap.set(e,d);break}}}return a}has(e,i){const s=i===void 0?this._values:this._originStores[i];return!!s&&s.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const s=this._originStores[i],a=s&&s.get(e),d=this._values.get(e);return this._values.set(e,a),this._propertyOriginMap.set(e,i),d!==a}originOf(e){return this._propertyOriginMap.get(e)||Te.DEFAULTS}forEach(e){this._values.forEach(e)}};const QP=t=>{let e=class extends t{constructor(...i){super(...i);const s=qi(this),a=s.store,d=new qoe;s.store=d,jT(s,a,d)}read(i,s){FT(this,i,s)}getAtOrigin(i,s){const a=bb(this),d=Or(s);if(typeof i=="string")return a.get(i,d);const y={};return i.forEach(g=>{y[g]=a.get(g,d)}),y}originOf(i){return Wd(this.originIdOf(i))}originIdOf(i){return bb(this).originOf(i)}revert(i,s){const a=bb(this),d=Or(s),y=qi(this);let g;g=typeof i=="string"?i==="*"?a.keys(d):[i]:i,g.forEach(_=>{y.invalidate(_),a.revert(_,d),y.commit(_)})}};return e=b([J("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function bb(t){return qi(t).store}let v8=class extends QP(je){};v8=b([J("esri.core.ReadOnlyMultiOriginJSONSupport")],v8);const Boe=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,s="user"){return wb(this).delete(i,Or(s))}write(i,s){return VT(this,i=i||{},s),i}setAtOrigin(i,s,a){qi(this).setAtOrigin(i,s,Or(a))}removeOrigin(i){const s=wb(this),a=Or(i),d=s.keys(a);for(const y of d)s.originOf(y)===a&&s.set(y,s.get(y,a),Te.USER)}updateOrigin(i,s){const a=wb(this),d=Or(s),y=this.get(i);for(let g=d+1;g<zb;++g)a.delete(i,g);a.set(i,y,d)}toJSON(i){return this.write({},i)}};return e=b([J("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function wb(t){return qi(t).store}const Gv=t=>{let e=class extends Boe(QP(t)){constructor(...i){super(...i)}};return e=b([J("esri.core.MultiOriginJSONSupport")],e),e};let b8=class extends Gv(je){};b8=b([J("esri.core.MultiOriginJSONSupport")],b8);function Hoe(t){return"portalItem"in t}const eN=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Hoe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return b([S({type:String})],e.prototype,"apiKey",null),e=b([J("esri.layers.mixins.APIKeyMixin")],e),e};let Bm=class{constructor(e,i,s=""){this.major=e,this.minor=i,this._context=s}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",s=this._context&&this._context+" ";throw new oe(i+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new Bm(this.major,this.minor,this._context)}static parse(e,i=""){const[s,a]=e.split("."),d=/^\s*\d+\s*$/;if(!s||!s.match||!d.test(s))throw new oe((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!a||!a.match||!d.test(a))throw new oe((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const y=parseInt(s,10),g=parseInt(a,10);return new Bm(y,g,i)}};function Woe(t){if(!t)return t;const{start:e,end:i}=t;return new xo({start:e!=null?bh(e,-e.getTimezoneOffset(),"minutes"):e,end:i!=null?bh(i,-i.getTimezoneOffset(),"minutes"):i})}function Joe(t){if(!t)return t;const{start:e,end:i}=t;return new xo({start:e!=null?bh(e,e.getTimezoneOffset(),"minutes"):e,end:i!=null?bh(i,i.getTimezoneOffset(),"minutes"):i})}var F9;let nd=F9=class extends ye{constructor(t){super(t)}async collectRequiredFields(t,e){return Pr(t,e,this.expression)}clone(){return new F9({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};b([S({type:String,json:{write:!0}})],nd.prototype,"expression",void 0),b([S({type:String,json:{write:!0}})],nd.prototype,"title",void 0),nd=F9=b([J("esri.layers.support.FeatureExpressionInfo")],nd);const w8=nd,r6={unknown:1,inches:bs(1,"meters","inches"),feet:bs(1,"meters","feet"),"us-feet":bs(1,"meters","us-feet"),yards:bs(1,"meters","yards"),miles:bs(1,"meters","miles"),"nautical-miles":bs(1,"meters","nautical-miles"),millimeters:bs(1,"meters","millimeters"),centimeters:bs(1,"meters","centimeters"),decimeters:bs(1,"meters","decimeters"),meters:bs(1,"meters","meters"),kilometers:bs(1,"meters","kilometers"),"decimal-degrees":1/bF(1,"meters",Vt.radius)};function bge(t){return 1/(r6[t]||1)}function Koe(){const t=Object.keys(r6);return t.sort(),t}const Yoe=Koe();var z9;const ty=$r()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),_8=new Nt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Jo=z9=class extends ye{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,s){e[i]=t.write({},s),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):t!=null||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new z9({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&hR(this.featureExpressionInfo,t.featureExpressionInfo)}};b([S({type:w8,json:{write:!0}})],Jo.prototype,"featureExpressionInfo",void 0),b([Ce("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Jo.prototype,"readFeatureExpressionInfo",null),b([ke("featureExpressionInfo",{featureExpressionInfo:{type:w8},"featureExpression.value":{type:[0]}})],Jo.prototype,"writeFeatureExpressionInfo",null),b([S({type:ty.apiValues,nonNullable:!0,json:{type:ty.jsonValues,read:ty.read,write:{writer:ty.write,isRequired:!0}}})],Jo.prototype,"mode",null),b([S({type:Number,json:{write:!0}})],Jo.prototype,"offset",void 0),b([S({type:Yoe,json:{type:String,read:_8.read,write:_8.write}})],Jo.prototype,"unit",null),Jo=z9=b([J("esri.layers.support.ElevationInfo")],Jo);const Zoe=Jo,wge={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},Xoe={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},_ge={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},tN={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Ph}}},Sge={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},xge={value:null,type:Zoe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function $ge(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const iN={write:!0,read:!0},V9={type:Number,json:{origins:{"web-document":iN,"portal-item":{write:!0}}}},Tge={...V9,json:{...V9.json,origins:{"web-document":{...iN,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?ef(e.layerDefinition.drawingInfo.transparency):void 0:ef(e.drawingInfo.transparency)}}},Qoe={type:xo,readOnly:!0,get(){var g,_;if(!((g=this.layer)!=null&&g.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,s=(_=this.view)==null?void 0:_.timeExtent;let a=this.layer.timeExtent;t&&(a=Joe(a));let d=i?s&&a?s.intersection(a):s||a:a;if(!d||d.isEmpty||d.isAllTime)return d;e&&(d=d.offset(-e.value,e.unit)),t&&(d=Woe(d));const y=this._get("timeExtent");return d.equals(y)?y:d}},Mge={type:bt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=bt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Xe.fromJSON(e.spatialReference)),i}}}},read:!1}},eae={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Ige={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},Ege={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},tae={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};async function iae(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return qc(t);const i=Xe.WGS84;return await VA(e,i),au(t,i)}function Age(t,e){if(!rN(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function rN(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function S8(t){return rN(t,rae.HOSTED_SERVICE)}function kge(t,e){const i=t.typeKeywords;if(i){const s=i.indexOf(e);s>-1&&i.splice(s,1)}}async function Oge(t){const e=t.clone().normalize();let i;if(e.length>1)for(const s of e)i?s.width>i.width&&(i=s):i=s;else i=e[0];return iae(i)}const rae={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function x8(t){var _;const{portal:e,isOrgItem:i,itemControl:s}=t,a=(_=e.user)==null?void 0:_.privileges;let d=!a||a.includes("features:user:edit"),y=!!i&&!!(a!=null&&a.includes("features:user:fullEdit"));const g=s==="update"||s==="admin";return g?y=d=!0:y&&(d=!0),{features:{edit:d,fullEdit:y},content:{updateItem:g}}}const sN=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,s){const a=s.capabilities&&s.capabilities.split(",").map(K=>K.toLowerCase().trim());if(!a)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const d=this.type,y=d!=="tile"&&!!s.supportsDynamicLayers,g=a.includes("query"),_=a.includes("map"),x=!!s.exportTilesAllowed,I=a.includes("tilemap"),A=a.includes("data"),C=d!=="tile"&&(!s.tileInfo||y),N=d!=="tile"&&(!s.tileInfo||y),j=d!=="tile",D=s.cimVersion&&Bm.parse(s.cimVersion),V=(D==null?void 0:D.since(1,4))??!1,W=(D==null?void 0:D.since(2,0))??!1;return{operations:{supportsExportMap:_,supportsExportTiles:x,supportsIdentify:g,supportsQuery:A,supportsTileMap:I},exportMap:_?{supportsArcadeExpressionForLabeling:V,supportsSublayersChanges:j,supportsDynamicLayers:y,supportsSublayerVisibility:C,supportsSublayerDefinitionExpression:N,supportsCIMSymbols:W}:null,exportTiles:x?{maxExportTilesCount:+s.maxExportTilesCount}:null}}readVersion(i,s){let a=s.currentVersion;return a||(a=s.hasOwnProperty("capabilities")||s.hasOwnProperty("tables")?10:s.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),a}async fetchRelatedService(i){const s=this.portalItem;if(!s||!S8(s))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=s.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(d=>d.find(y=>y.type==="Feature Service")??null,()=>null));const a=await this._relatedFeatureServicePromise;return Xt(i),a?{itemId:a.id,url:a.url}:null}async fetchSublayerInfo(i,s){const{source:a}=i;if(this!=null&&this.portalItem&&this.type==="tile"&&(a==null?void 0:a.type)==="map-layer"&&S8(this.portalItem)&&i.originIdOf("url")<Te.SERVICE){const g=await this.fetchRelatedService(s);g&&(i.url=Th(g.url,a.mapLayerId.toString()),i.layerItemId=g.itemId)}const{url:d}=i;let y;if(a.type==="data-layer")y=(await pt(d,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...s})).data;else if(d&&i.originIdOf("url")>Te.SERVICE)try{y=(await this._fetchAllLayersAndTablesFromService(d)).get(a.mapLayerId)}catch{}else{let g=i.id;(a==null?void 0:a.type)==="map-layer"&&(g=a.mapLayerId);try{y=(await this.fetchAllLayersAndTables(s)).get(g)}catch{}}return y}async fetchAllLayersAndTables(i){var s;return this._fetchAllLayersAndTablesFromService((s=this.parsedUrl)==null?void 0:s.path,i)}async _fetchAllLayersAndTablesFromService(i,s){await this.load(s),this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const a=Kh(i),d=fT(this._allLayersAndTablesMap,a==null?void 0:a.url.path,()=>pt(Th(a==null?void 0:a.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(g=>{const _=new Map;for(const x of g.data.layers)_.set(x.id,x);return{result:_}},g=>({error:g}))),y=await d;if(Xt(s),"result"in y)return y.result;throw y.error}};return b([S({readOnly:!0})],e.prototype,"capabilities",void 0),b([Ce("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],e.prototype,"readCapabilities",null),b([S({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),b([S({type:bt})],e.prototype,"fullExtent",void 0),b([S(eae)],e.prototype,"id",void 0),b([S({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],e.prototype,"legendEnabled",void 0),b([S(Xoe)],e.prototype,"popupEnabled",void 0),b([S({type:Xe})],e.prototype,"spatialReference",void 0),b([S({readOnly:!0})],e.prototype,"version",void 0),b([Ce("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],e.prototype,"readVersion",null),e=b([J("esri.layers.mixins.ArcGISMapService")],e),e},nN=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=Kh(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",RZ(i,me.getLogger(this)))}};return b([S()],e.prototype,"title",null),b([S({type:String})],e.prototype,"url",null),e=b([J("esri.layers.mixins.ArcGISService")],e),e};function Uv(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function sae(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function nae(t,e,i,s,a,d,y,g,_,x,I,A,C,N,j,D){const V=new Float32Array(16);return V[0]=t,V[1]=e,V[2]=i,V[3]=s,V[4]=a,V[5]=d,V[6]=y,V[7]=g,V[8]=_,V[9]=x,V[10]=I,V[11]=A,V[12]=C,V[13]=N,V[14]=j,V[15]=D,V}function oae(t,e){return new Float32Array(t,e,16)}const aae=Uv();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:aae,clone:sae,create:Uv,createView:oae,fromValues:nae},Symbol.toStringTag,{value:"Module"}));const lae=(t,e)=>{const i=ou(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Sa(i,i)},uae=(t,e)=>{const i=ou(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Sa(i,i)},hae=(t,e)=>{const i=1-e,s=ou(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Sa(s,s)},cae=(t,e)=>{const i=Math.sin(e*Math.PI/180),s=Math.cos(e*Math.PI/180),a=ou(t,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return Sa(a,a)},pae=(t,e)=>{const i=1-2*e,s=ou(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Sa(s,s)},dae=(t,e)=>{const i=ou(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Sa(i,i)},fae=(t,e)=>{const i=1-e,s=ou(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Sa(s,s)};let oN=class aN{constructor(e,i,s){this.strength=e,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(e,i,s){this.strength=Ur(e.strength,i.strength,s),this.radius=Ur(e.radius,i.radius,s),this.threshold=Ur(e.threshold,i.threshold,s)}clone(){return new aN(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Gd(this.radius),strength:this.strength,threshold:this.threshold}}},lN=class uN{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,s){this.radius=Math.round(Ur(e.radius,i.radius,s))}clone(){return new uN(this.radius)}toJSON(){return{type:"blur",radius:Gd(this.radius)}}},G9=class hN{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.amount=Ur(e.amount,i.amount,s),this._updateMatrix()}clone(){return new hN(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||Uv();switch(this.type){case"brightness":this._colorMatrix=lae(e,this.amount);break;case"contrast":this._colorMatrix=uae(e,this.amount);break;case"grayscale":this._colorMatrix=hae(e,this.amount);break;case"invert":this._colorMatrix=pae(e,this.amount);break;case"saturate":this._colorMatrix=dae(e,this.amount);break;case"sepia":this._colorMatrix=fae(e,this.amount)}}},cN=class pN{constructor(e,i,s,a){this.offsetX=e,this.offsetY=i,this.blurRadius=s,this.color=a,this.type="drop-shadow"}interpolate(e,i,s){this.offsetX=Ur(e.offsetX,i.offsetX,s),this.offsetY=Ur(e.offsetY,i.offsetY,s),this.blurRadius=Ur(e.blurRadius,i.blurRadius,s),this.color[0]=Math.round(Ur(e.color[0],i.color[0],s)),this.color[1]=Math.round(Ur(e.color[1],i.color[1],s)),this.color[2]=Math.round(Ur(e.color[2],i.color[2],s)),this.color[3]=Ur(e.color[3],i.color[3],s)}clone(){return new pN(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:Gd(this.offsetX),yoffset:Gd(this.offsetY),blurRadius:Gd(this.blurRadius),color:e}}},dN=class fN{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,s){this.angle=Ur(e.angle,i.angle,s),this._updateMatrix()}clone(){return new fN(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||Uv();this._colorMatrix=cae(e,this.angle)}},yN=class gN{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,s){this.amount=Ur(e.amount,i.amount,s)}clone(){return new gN(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Ur(t,e,i){return t+(e-t)*i}function Gd(t){return Math.round(1e3*ya(t))/1e3}function yae(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new G9(t.type,0);case"saturate":case"brightness":case"contrast":return new G9(t.type,1);case"opacity":return new yN(1);case"hue-rotate":return new dN(0);case"blur":return new lN(0);case"drop-shadow":return new cN(0,0,0,[...I5("transparent")]);case"bloom":return new oN(0,0,1)}}function gae(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((s,a)=>s.type===i[a].type)}function mae(t,e){const i=t.length>e.length?t:e,s=t.length>e.length?e:t;for(let a=s.length;a<i.length;a++)s.push(yae(i[a]))}function vae(t){const e=t[0];return!!e&&"type"in e}var $8,T8,U9={exports:{}};U9.exports,T8=function(){function t(a,d){function y(){this.constructor=a}y.prototype=d.prototype,a.prototype=new y}function e(a,d,y,g){var _=Error.call(this,a);return Object.setPrototypeOf&&Object.setPrototypeOf(_,e.prototype),_.expected=d,_.found=y,_.location=g,_.name="SyntaxError",_}function i(a,d,y){return y=y||" ",a.length>d?a:(d-=a.length,a+(y+=y.repeat(d)).slice(0,d))}function s(a,d){var y,g={},_=(d=d!==void 0?d:{}).grammarSource,x={start:vi},I=vi,A="none",C=")",N=",",j="(",D="%",V="px",W="cm",K="mm",Y="in",ee="pt",re="pc",se="deg",ue="rad",de="grad",we="turn",Oe="#",Ne=".",Le="e",Be=/^[ \t\n\r]/,Pe=/^[a-z\-]/,dt=/^[0-9a-fA-F]/,hi=/^[+\-]/,kt=/^[0-9]/,at=ge("none"),er=pe("none",!1),Zh=pe(")",!1),$o=pe(",",!1),Kp=ge("whitespace"),i1=he([" ","	",`
`,"\r"],!1,!1),Kv=ge("function"),Yv=pe("(",!1),Zv=ge("identifier"),r1=he([["a","z"],"-"],!1,!1),Xv=ge("percentage"),Qv=pe("%",!1),e2=ge("length"),t2=pe("px",!1),i2=pe("cm",!1),s1=pe("mm",!1),r2=pe("in",!1),s2=pe("pt",!1),n2=pe("pc",!1),Ei=ge("angle"),q=pe("deg",!1),hr=pe("rad",!1),n1=pe("grad",!1),wt=pe("turn",!1),ci=ge("number"),Gs=ge("color"),zn=pe("#",!1),Us=he([["0","9"],["a","f"],["A","F"]],!1,!1),Vn=he(["+","-"],!1,!1),qs=he([["0","9"]],!1,!1),o1=pe(".",!1),To=pe("e",!1),be=function(){return[]},Ma=function(Z,ce){return{type:"function",name:Z,parameters:ce||[]}},h=function(Z,ce){return ce.length>0?rR(Z,ce,3):[Z]},k=function(Z){return{type:"quantity",value:Z.value,unit:Z.unit}},v=function(Z){return{type:"color",colorType:Z.type,value:Z.value}},u=function(Z){return Z},o=function(){return ne()},r=function(Z){return{value:Z,unit:"%"}},n=function(Z){return{value:Z,unit:"px"}},l=function(Z){return{value:Z,unit:"cm"}},c=function(Z){return{value:Z,unit:"mm"}},p=function(Z){return{value:Z,unit:"in"}},f=function(Z){return{value:Z,unit:"pt"}},m=function(Z){return{value:Z,unit:"pc"}},w=function(Z){return{value:Z,unit:"deg"}},$=function(Z){return{value:Z,unit:"rad"}},T=function(Z){return{value:Z,unit:"grad"}},E=function(Z){return{value:Z,unit:"turn"}},O=function(Z){return{value:Z,unit:null}},P=function(){return{type:"hex",value:ne()}},L=function(Z){return{type:"function",value:Z}},F=function(){return{type:"named",value:ne()}},z=function(){return parseFloat(ne())},R=0,G=0,H=[{line:1,column:1}],B=0,te=[],Q=0;if("startRule"in d){if(!(d.startRule in x))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');I=x[d.startRule]}function ne(){return a.substring(G,R)}function pe(Z,ce){return{type:"literal",text:Z,ignoreCase:ce}}function he(Z,ce,ve){return{type:"class",parts:Z,inverted:ce,ignoreCase:ve}}function Ie(){return{type:"end"}}function ge(Z){return{type:"other",description:Z}}function He(Z){var ce,ve=H[Z];if(ve)return ve;for(ce=Z-1;!H[ce];)ce--;for(ve={line:(ve=H[ce]).line,column:ve.column};ce<Z;)a.charCodeAt(ce)===10?(ve.line++,ve.column=1):ve.column++,ce++;return H[Z]=ve,ve}function Fe(Z,ce,ve){var lt=He(Z),Ai=He(ce),Ut={source:_,start:{offset:Z,line:lt.line,column:lt.column},end:{offset:ce,line:Ai.line,column:Ai.column}};return ve&&_&&typeof _.offset=="function"&&(Ut.start=_.offset(Ut.start),Ut.end=_.offset(Ut.end)),Ut}function xe(Z){R<B||(R>B&&(B=R,te=[]),te.push(Z))}function zt(Z,ce,ve){return new e(e.buildMessage(Z,ce),Z,ce,ve)}function vi(){var Z;return(Z=Gt())===g&&(Z=yt()),Z}function Gt(){var Z,ce;return Q++,Z=R,tt(),a.substr(R,4)===A?(ce=A,R+=4):(ce=g,Q===0&&xe(er)),ce!==g?(tt(),G=Z,Z=be()):(R=Z,Z=g),Q--,Z===g&&Q===0&&xe(at),Z}function yt(){var Z,ce;if(Z=[],(ce=gt())!==g)for(;ce!==g;)Z.push(ce),ce=gt();else Z=g;return Z}function gt(){var Z,ce,ve,lt;return Z=R,tt(),(ce=Hr())!==g?(tt(),(ve=it())===g&&(ve=null),tt(),a.charCodeAt(R)===41?(lt=C,R++):(lt=g,Q===0&&xe(Zh)),lt!==g?(tt(),G=Z,Z=Ma(ce,ve)):(R=Z,Z=g)):(R=Z,Z=g),Z}function it(){var Z,ce,ve,lt,Ai,Ut,fs,a1;if(Z=R,(ce=Ht())!==g){for(ve=[],lt=R,Ai=tt(),a.charCodeAt(R)===44?(Ut=N,R++):(Ut=g,Q===0&&xe($o)),Ut===g&&(Ut=null),fs=tt(),(a1=Ht())!==g?lt=Ai=[Ai,Ut,fs,a1]:(R=lt,lt=g);lt!==g;)ve.push(lt),lt=R,Ai=tt(),a.charCodeAt(R)===44?(Ut=N,R++):(Ut=g,Q===0&&xe($o)),Ut===g&&(Ut=null),fs=tt(),(a1=Ht())!==g?lt=Ai=[Ai,Ut,fs,a1]:(R=lt,lt=g);G=Z,Z=h(ce,ve)}else R=Z,Z=g;return Z}function Ht(){var Z,ce;return Z=R,(ce=tr())===g&&(ce=$t())===g&&(ce=Xh())===g&&(ce=Qh()),ce!==g&&(G=Z,ce=k(ce)),(Z=ce)===g&&(Z=R,(ce=ec())!==g&&(G=Z,ce=v(ce)),Z=ce),Z}function tt(){var Z,ce;for(Q++,Z=[],Be.test(a.charAt(R))?(ce=a.charAt(R),R++):(ce=g,Q===0&&xe(i1));ce!==g;)Z.push(ce),Be.test(a.charAt(R))?(ce=a.charAt(R),R++):(ce=g,Q===0&&xe(i1));return Q--,ce=g,Q===0&&xe(Kp),Z}function Hr(){var Z,ce,ve;return Q++,Z=R,(ce=ct())!==g?(a.charCodeAt(R)===40?(ve=j,R++):(ve=g,Q===0&&xe(Yv)),ve!==g?(G=Z,Z=u(ce)):(R=Z,Z=g)):(R=Z,Z=g),Q--,Z===g&&(ce=g,Q===0&&xe(Kv)),Z}function ct(){var Z,ce,ve;if(Q++,Z=R,ce=[],Pe.test(a.charAt(R))?(ve=a.charAt(R),R++):(ve=g,Q===0&&xe(r1)),ve!==g)for(;ve!==g;)ce.push(ve),Pe.test(a.charAt(R))?(ve=a.charAt(R),R++):(ve=g,Q===0&&xe(r1));else ce=g;return ce!==g&&(G=Z,ce=o()),Q--,(Z=ce)===g&&(ce=g,Q===0&&xe(Zv)),Z}function tr(){var Z,ce,ve;return Q++,Z=R,tt(),(ce=cr())!==g?(a.charCodeAt(R)===37?(ve=D,R++):(ve=g,Q===0&&xe(Qv)),ve!==g?(G=Z,Z=r(ce)):(R=Z,Z=g)):(R=Z,Z=g),Q--,Z===g&&Q===0&&xe(Xv),Z}function $t(){var Z,ce,ve;return Q++,Z=R,tt(),(ce=cr())!==g?(a.substr(R,2)===V?(ve=V,R+=2):(ve=g,Q===0&&xe(t2)),ve!==g?(G=Z,Z=n(ce)):(R=Z,Z=g)):(R=Z,Z=g),Z===g&&(Z=R,tt(),(ce=cr())!==g?(a.substr(R,2)===W?(ve=W,R+=2):(ve=g,Q===0&&xe(i2)),ve!==g?(G=Z,Z=l(ce)):(R=Z,Z=g)):(R=Z,Z=g),Z===g&&(Z=R,tt(),(ce=cr())!==g?(a.substr(R,2)===K?(ve=K,R+=2):(ve=g,Q===0&&xe(s1)),ve!==g?(G=Z,Z=c(ce)):(R=Z,Z=g)):(R=Z,Z=g),Z===g&&(Z=R,tt(),(ce=cr())!==g?(a.substr(R,2)===Y?(ve=Y,R+=2):(ve=g,Q===0&&xe(r2)),ve!==g?(G=Z,Z=p(ce)):(R=Z,Z=g)):(R=Z,Z=g),Z===g&&(Z=R,tt(),(ce=cr())!==g?(a.substr(R,2)===ee?(ve=ee,R+=2):(ve=g,Q===0&&xe(s2)),ve!==g?(G=Z,Z=f(ce)):(R=Z,Z=g)):(R=Z,Z=g),Z===g&&(Z=R,tt(),(ce=cr())!==g?(a.substr(R,2)===re?(ve=re,R+=2):(ve=g,Q===0&&xe(n2)),ve!==g?(G=Z,Z=m(ce)):(R=Z,Z=g)):(R=Z,Z=g)))))),Q--,Z===g&&Q===0&&xe(e2),Z}function Xh(){var Z,ce,ve;return Q++,Z=R,(ce=cr())!==g?(a.substr(R,3)===se?(ve=se,R+=3):(ve=g,Q===0&&xe(q)),ve!==g?(G=Z,Z=w(ce)):(R=Z,Z=g)):(R=Z,Z=g),Z===g&&(Z=R,(ce=cr())!==g?(a.substr(R,3)===ue?(ve=ue,R+=3):(ve=g,Q===0&&xe(hr)),ve!==g?(G=Z,Z=$(ce)):(R=Z,Z=g)):(R=Z,Z=g),Z===g&&(Z=R,(ce=cr())!==g?(a.substr(R,4)===de?(ve=de,R+=4):(ve=g,Q===0&&xe(n1)),ve!==g?(G=Z,Z=T(ce)):(R=Z,Z=g)):(R=Z,Z=g),Z===g&&(Z=R,(ce=cr())!==g?(a.substr(R,4)===we?(ve=we,R+=4):(ve=g,Q===0&&xe(wt)),ve!==g?(G=Z,Z=E(ce)):(R=Z,Z=g)):(R=Z,Z=g)))),Q--,Z===g&&(ce=g,Q===0&&xe(Ei)),Z}function Qh(){var Z,ce;return Q++,Z=R,tt(),(ce=cr())!==g?(G=Z,Z=O(ce)):(R=Z,Z=g),Q--,Z===g&&Q===0&&xe(ci),Z}function ec(){var Z,ce,ve,lt;if(Q++,Z=R,a.charCodeAt(R)===35?(ce=Oe,R++):(ce=g,Q===0&&xe(zn)),ce!==g){if(ve=[],dt.test(a.charAt(R))?(lt=a.charAt(R),R++):(lt=g,Q===0&&xe(Us)),lt!==g)for(;lt!==g;)ve.push(lt),dt.test(a.charAt(R))?(lt=a.charAt(R),R++):(lt=g,Q===0&&xe(Us));else ve=g;ve!==g?(G=Z,Z=P()):(R=Z,Z=g)}else R=Z,Z=g;return Z===g&&(Z=R,(ce=gt())!==g&&(G=Z,ce=L(ce)),(Z=ce)===g&&(Z=R,(ce=ct())!==g&&(G=Z,ce=F()),Z=ce)),Q--,Z===g&&(ce=g,Q===0&&xe(Gs)),Z}function cr(){var Z,ce,ve,lt,Ai,Ut,fs;for(Z=R,hi.test(a.charAt(R))?(a.charAt(R),R++):Q===0&&xe(Vn),ce=R,ve=[],kt.test(a.charAt(R))?(lt=a.charAt(R),R++):(lt=g,Q===0&&xe(qs));lt!==g;)ve.push(lt),kt.test(a.charAt(R))?(lt=a.charAt(R),R++):(lt=g,Q===0&&xe(qs));if(a.charCodeAt(R)===46?(lt=Ne,R++):(lt=g,Q===0&&xe(o1)),lt!==g){if(Ai=[],kt.test(a.charAt(R))?(Ut=a.charAt(R),R++):(Ut=g,Q===0&&xe(qs)),Ut!==g)for(;Ut!==g;)Ai.push(Ut),kt.test(a.charAt(R))?(Ut=a.charAt(R),R++):(Ut=g,Q===0&&xe(qs));else Ai=g;Ai!==g?ce=ve=[ve,lt,Ai]:(R=ce,ce=g)}else R=ce,ce=g;if(ce===g)if(ce=[],kt.test(a.charAt(R))?(ve=a.charAt(R),R++):(ve=g,Q===0&&xe(qs)),ve!==g)for(;ve!==g;)ce.push(ve),kt.test(a.charAt(R))?(ve=a.charAt(R),R++):(ve=g,Q===0&&xe(qs));else ce=g;if(ce!==g){if(ve=R,a.charCodeAt(R)===101?(lt=Le,R++):(lt=g,Q===0&&xe(To)),lt!==g){if(hi.test(a.charAt(R))?(Ai=a.charAt(R),R++):(Ai=g,Q===0&&xe(Vn)),Ai===g&&(Ai=null),Ut=[],kt.test(a.charAt(R))?(fs=a.charAt(R),R++):(fs=g,Q===0&&xe(qs)),fs!==g)for(;fs!==g;)Ut.push(fs),kt.test(a.charAt(R))?(fs=a.charAt(R),R++):(fs=g,Q===0&&xe(qs));else Ut=g;Ut!==g?ve=lt=[lt,Ai,Ut]:(R=ve,ve=g)}else R=ve,ve=g;ve===g&&(ve=null),G=Z,Z=z()}else R=Z,Z=g;return Z}function iR(Z,ce){return Z.map(function(ve){return ve[ce]})}function rR(Z,ce,ve){return[Z].concat(iR(ce,ve))}if((y=I())!==g&&R===a.length)return y;throw y!==g&&R<a.length&&xe(Ie()),zt(te,B<a.length?a.charAt(B):null,B<a.length?Fe(B,B+1):Fe(B,B))}return t(e,Error),e.prototype.format=function(a){var d="Error: "+this.message;if(this.location){var y,g=null;for(y=0;y<a.length;y++)if(a[y].source===this.location.source){g=a[y].text.split(/\r\n|\n|\r/g);break}var _=this.location.start,x=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(_):_,I=this.location.source+":"+x.line+":"+x.column;if(g){var A=this.location.end,C=i("",x.line.toString().length," "),N=g[_.line-1],j=(_.line===A.line?A.column:N.length+1)-_.column||1;d+=`
 --> `+I+`
`+C+` |
`+x.line+" | "+N+`
`+C+" | "+i("",_.column-1," ")+i("",j,"^")}else d+=`
 at `+I}return d},e.buildMessage=function(a,d){var y={literal:function(N){return'"'+_(N.text)+'"'},class:function(N){var j=N.parts.map(function(D){return Array.isArray(D)?x(D[0])+"-"+x(D[1]):x(D)});return"["+(N.inverted?"^":"")+j.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function g(N){return N.charCodeAt(0).toString(16).toUpperCase()}function _(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(j){return"\\x0"+g(j)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(j){return"\\x"+g(j)})}function x(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(j){return"\\x0"+g(j)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(j){return"\\x"+g(j)})}function I(N){return y[N.type](N)}function A(N){var j,D,V=N.map(I);if(V.sort(),V.length>0){for(j=1,D=1;j<V.length;j++)V[j-1]!==V[j]&&(V[D]=V[j],D++);V.length=D}switch(V.length){case 1:return V[0];case 2:return V[0]+" or "+V[1];default:return V.slice(0,-1).join(", ")+", or "+V[V.length-1]}}function C(N){return N?'"'+_(N)+'"':"end of input"}return"Expected "+A(a)+" but "+C(d)+" found."},{SyntaxError:e,parse:s}},($8=U9).exports&&($8.exports=T8());var bae=U9.exports;function mN(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=M8(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new oe("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:M8(i.value)}});e.sort((i,s)=>s.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!gae(e[i].effects,e[i+1].effects))throw new oe("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});mae(e[i].effects,e[i+1].effects)}return e.sort((i,s)=>s.scale-i.scale),e}function M8(t){let e;if(!t)return[];try{e=bae.parse(t)}catch(i){throw new oe("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>wae(i))}function wae(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return _ae(t);case"opacity":return Sae(t);case"hue-rotate":return xae(t);case"blur":return $ae(t);case"drop-shadow":return Tae(t);case"bloom":return Mae(t)}}catch(e){throw e.details.filter=t,e}throw new oe("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function _ae(t){let e=1;return qp(t.parameters,1),t.parameters.length===1&&(e=bn(t.parameters[0])),new G9(t.name,e)}function Sae(t){let e=1;return qp(t.parameters,1),t.parameters.length===1&&(e=bn(t.parameters[0])),new yN(e)}function xae(t){let e=0;return qp(t.parameters,1),t.parameters.length===1&&(e=Cae(t.parameters[0])),new dN(e)}function $ae(t){let e=0;return qp(t.parameters,1),t.parameters.length===1&&(e=o6(t.parameters[0]),Zf(e,t.parameters[0])),new lN(e)}function Tae(t){const e=[];let i=null;for(const s of t.parameters)if(s.type==="color"){if(e.length&&Object.freeze(e),i)throw new oe("effect:type-error","Accepts only one color",{});i=Pae(s)}else{const a=o6(s);if(Object.isFrozen(e))throw new oe("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(a),e.length===3&&Zf(a,s)}if(e.length<2||e.length>3)throw new oe("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new cN(e[0],e[1],e[2]||0,i||vN("black"))}function Mae(t){let e=1,i=0,s=0;return qp(t.parameters,3),t.parameters[0]&&(e=bn(t.parameters[0])),t.parameters[1]&&(i=o6(t.parameters[1]),Zf(i,t.parameters[1])),t.parameters[2]&&(s=bn(t.parameters[2])),new oN(e,i,s)}function qp(t,e){if(t.length>e)throw new oe("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function qv(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in n6)return"<length>";if(t.unit in s6)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Zf(t,e){if(t<0)throw new oe("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function Iae(t){if(t.type!=="quantity"||t.unit!==null)throw new oe("effect:type-error",`Expected <double>, Actual: ${qv(t)}`,{term:t})}function Eae(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new oe("effect:type-error",`Expected <double> or <percentage>, Actual: ${qv(t)}`,{term:t})}const s6={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Aae(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&s6[t.unit]!=null))throw new oe("effect:type-error",`Expected <angle>, Actual: ${qv(t)}`,{term:t})}const n6={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function kae(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&n6[t.unit]!=null))throw new oe("effect:type-error",`Expected <length>, Actual: ${qv(t)}`,{term:t})}function bn(t){Eae(t);const e=t.value;return Zf(e,t),t.unit==="%"?.01*e:e}function Oae(t){return Iae(t),Zf(t.value,t),t.value}function Cae(t){return Aae(t),t.value*s6[t.unit]||0}function o6(t){return kae(t),t.value*n6[t.unit]||0}function Pae(t){switch(t.colorType){case"hex":return Zz(t.value);case"named":return vN(t.value);case"function":return Rae(t.value)}}function vN(t){if(!TM(t))throw new oe("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return Yz(t)}const Nae=/^rgba?/i,Lae=/^hsla?/i;function Rae(t){if(qp(t.parameters,4),Nae.test(t.name))return[bn(t.parameters[0]),bn(t.parameters[1]),bn(t.parameters[2]),t.parameters[3]?bn(t.parameters[3]):1];if(Lae.test(t.name))return MM(Oae(t.parameters[0]),bn(t.parameters[1]),bn(t.parameters[2]),t.parameters[3]?bn(t.parameters[3]):1);throw new oe("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function jae(t,e,i){var s;try{return zae(t)}catch(a){(s=i==null?void 0:i.messages)==null||s.push(a)}return null}function Dae(t,e,i,s){try{const a=Fae(t);zh(i,a,e)}catch(a){s.messages&&s.messages.push(a)}}function Fae(t){const e=mN(t);return e?vae(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:s})=>({scale:i,value:s.map(a=>a.toJSON())})):null}function zae(t){if(!t||t.length===0)return null;if(Vae(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:I8(i.value)});return e}return I8(t)}function Vae(t){const e=t[0];return!!e&&"scale"in e}function I8(t){if(!t||!t.length)return"";const e=[];for(const i of t){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[Po(i,"amount")];break;case"blur":s=[Po(i,"radius","pt")];break;case"hue-rotate":s=[Po(i,"angle","deg")];break;case"drop-shadow":s=[Po(i,"xoffset","pt"),Po(i,"yoffset","pt"),Po(i,"blurRadius","pt"),Gae(i,"color")];break;case"bloom":s=[Po(i,"strength"),Po(i,"radius","pt"),Po(i,"threshold")]}const a=`${i.type}(${s.filter(Boolean).join(" ")})`;mN(a),e.push(a)}return e.join(" ")}function Po(t,e,i){if(t[e]==null)throw new oe("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function Gae(t,e){if(t[e]==null)throw new oe("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const E8={read:{reader:jae},write:{allowNull:!0,writer:Dae}},bN=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return b([S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),b([S({json:{read:!1,write:!1,origins:{"web-map":E8,"portal-item":E8}}})],e.prototype,"effect",void 0),e=b([J("esri.layers.mixins.BlendLayer")],e),e},wN=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return b([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=b([J("esri.layers.mixins.CustomParametersMixin")],e),e},A8={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},k8={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},O8={ArcGISFeatureLayer:!0},Uae={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":A8,"web-map/basemap":k8,"web-map/tables":O8,"link-chart/operational-layers":{...A8,LinkChartLayer:!0},"link-chart/basemap":k8,"link-chart/tables":O8,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},_N=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,s,a,d){(d&&d.layerContainerType==="ground"||i&&dD(this,a,{},d))&&(s[a]=i)}writeOperationalLayerType(i,s,a,d){!i||d&&d.layerContainerType==="tables"||(s.layerType=i)}writeTitle(i,s){s.title=i??"Layer"}read(i,s){s&&(s.layer=this),hD(this,i,a=>super.read(i,a),s)}write(i,s){var y,g;if(s!=null&&s.origin){const _=`${s.origin}/${s.layerContainerType||"operational-layers"}`,x=Uae[_];let I=!!(x!=null&&x[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&_==="web-scene/operational-layers"&&(I=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&_==="web-map/operational-layers"&&(I=!1),!I)return(y=s.messages)==null||y.push(new oe("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${_}'`,{layer:this})),null}const a=super.write(i,{...s,layer:this}),d=!!s&&!!s.messages&&!!s.messages.filter(_=>_ instanceof oe&&_.name==="web-document-write:property-required").length;return fv(a==null?void 0:a.url)?((g=s==null?void 0:s.messages)==null||g.push(new oe("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&d?null:a}beforeSave(){}};return b([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),b([S(tae)],e.prototype,"listMode",void 0),b([ke("listMode")],e.prototype,"writeListMode",null),b([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),b([ke("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),b([S(V9)],e.prototype,"opacity",void 0),b([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),b([ke("title"),ke(["web-scene"],"title")],e.prototype,"writeTitle",null),b([S({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=b([J("esri.layers.mixins.OperationalLayer")],e),e},SN=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Kt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,a){if(s.itemId)return new $d({id:s.itemId,portal:a&&a.portal})}writePortalItem(i,s){i&&i.id&&(s.itemId=i.id)}async loadFromPortal(i,s){if(this.portalItem&&this.portalItem.id)try{const{load:a}=await _e(()=>import("./layersLoader-30efc866.js"),["assets/layersLoader-30efc866.js","assets/fetchService-4be12d7c.js","assets/jsonContext-3b060901.js","assets/styleUtils-f9f86ae1.js"]);return Xt(s),await a({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},s)}catch(a){throw or(a)||me.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${a}`),a}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(wn(s),!0)))}async _setUserPrivileges(i,s){if(!mt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:a,fullEdit:d},content:{updateItem:y}}=await this._fetchUserPrivileges(i,s);this._set("userHasEditingPrivileges",a),this._set("userHasFullEditingPrivileges",d),this._set("userHasUpdateItemPrivileges",y)}catch(a){wn(a)}}async _fetchUserPrivileges(i,s){let a=this.portalItem;if(!i||!a||!a.loaded||a.sourceUrl)return this._fetchFallbackUserPrivileges(s);const d=i===a.id;if(d&&a.portal.user)return x8(a);let y,g;if(d)y=a.portal.url;else try{y=await Lz(this.url,s)}catch(A){wn(A)}if(!y||!zD(y,a.portal.url))return this._fetchFallbackUserPrivileges(s);try{const A=s!=null?s.signal:null;g=await(St==null?void 0:St.getCredential(`${y}/sharing`,{prompt:!1,signal:A}))}catch(A){wn(A)}const _=!0,x=!1,I=!1;if(!g)return{features:{edit:_,fullEdit:x},content:{updateItem:I}};try{if(d?await a.reload():(a=new $d({id:i,portal:{url:y}}),await a.load(s)),a.portal.user)return x8(a)}catch(A){wn(A)}return{features:{edit:_,fullEdit:x},content:{updateItem:I}}}async _fetchFallbackUserPrivileges(i){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(i)}catch(a){wn(a)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const s=this.url?St==null?void 0:St.findCredential(this.url):null;if(!s)return!0;const a=iy.credential===s?iy.user:await this._fetchEditingUser(i);return iy.credential=s,iy.user=a,a==null||a.privileges==null||a.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var I,A;const s=(A=(I=this.portalItem)==null?void 0:I.portal)==null?void 0:A.user;if(s)return s;const a=St.findServerInfo(this.url??"");if(!(a!=null&&a.owningSystemUrl))return null;const d=`${a.owningSystemUrl}/sharing/rest`,y=ar.getDefault();if(y&&y.loaded&&Tn(y.restUrl)===Tn(d))return y.user;const g=`${d}/community/self`,_=i!=null?i.signal:null,x=await s5(pt(g,{authMode:"no-prompt",query:{f:"json"},signal:_}));return x.ok?$5.fromJSON(x.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){const a=s&&s.portal,d=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||ar.getDefault());return a&&d&&!HT(d.restUrl,a.restUrl)?(s.messages&&s.messages.push(new oe("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return b([S({type:$d})],e.prototype,"portalItem",null),b([Ce("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),b([ke("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),b([S({clonable:!1})],e.prototype,"resourceReferences",void 0),b([S({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),b([S({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),b([S({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=b([J("esri.layers.mixins.PortalLayer")],e),e},iy={credential:null,user:null},bf=new Ge,Ud=new WeakMap;function qae(t){xN(t)&&bf.push(t)}function Bae(t){xN(t)&&bf.includes(t)&&bf.remove(t)}function xN(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function $N(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:$N(e,t%e):0}let _b=0,ry=0;function Hae(){const t=Date.now();for(const e of bf)e.refreshInterval&&t-(Ud.get(e)??0)+5>=6e4*e.refreshInterval&&(Ud.set(e,t),e.refresh(t))}cT(()=>{const t=Date.now();let e=0;for(const i of bf)e=$N(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?Ud.get(i)||Ud.set(i,t):Ud.delete(i);if(e!==ry){if(ry=e,clearInterval(_b),ry===0)return void(_b=0);_b=setInterval(Hae,ry)}});const TN=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=nT(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||qae(this)},()=>{})}destroy(){Bae(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Gb(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{me.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}};return b([S({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),b([S({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),b([S()],e.prototype,"refreshParameters",null),e=b([J("esri.layers.mixins.RefreshableLayer")],e),e},MN=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&Wae(i,s.effectiveScaleRange);const a=this._get("effectiveScaleRange");return a&&a.minScale===i.minScale&&a.maxScale===i.maxScale?a:i}};return b([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),b([S({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),b([S({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=b([J("esri.layers.mixins.ScaleRangeLayer")],e),e};function Wae(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}var q9;let od=q9=class extends ye{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new q9({minValue:this.minValue,maxValue:this.maxValue})}};b([S({type:Number,json:{write:!0}})],od.prototype,"minValue",void 0),b([S({type:Number,json:{write:!0}})],od.prototype,"maxValue",void 0),od=q9=b([J("esri.renderer.support.AuthoringInfoClassBreakInfo")],od);var B9;let $l=B9=class extends ye{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new B9({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ae(this.classBreakInfos)})}};b([S({type:String,json:{write:!0}})],$l.prototype,"field",void 0),b([S({type:String,json:{write:!0}})],$l.prototype,"normalizationField",void 0),b([S({type:String,json:{write:!0}})],$l.prototype,"label",void 0),b([S({type:[od],json:{write:!0}})],$l.prototype,"classBreakInfos",void 0),$l=B9=b([J("esri.renderers.support.AuthoringInfoFieldInfo")],$l);var H9;const sy=new Nt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),ny=new Nt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),C8={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},P8=["high-to-low","above-and-below","centered-on","extremes"],N8=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],L8=["seconds","minutes","hours","days","months","years"];let zr=H9=class extends ye{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new H9({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};b([S({types:C8,json:{write:!0}})],zr.prototype,"endTime",void 0),b([Ft("endTime")],zr.prototype,"castEndTime",null),b([S({type:String,json:{write:!0}})],zr.prototype,"field",void 0),b([S({type:Number,json:{write:!0}})],zr.prototype,"maxSliderValue",void 0),b([S({type:Number,json:{write:!0}})],zr.prototype,"minSliderValue",void 0),b([S({types:C8,json:{write:!0}})],zr.prototype,"startTime",void 0),b([Ft("startTime")],zr.prototype,"castStartTime",null),b([S({type:sy.apiValues,value:null,json:{type:sy.jsonValues,read:sy.read,write:sy.write}})],zr.prototype,"style",null),b([S({type:N8,value:null,json:{type:N8,origins:{"web-scene":{type:P8,write:{writer:(t,e)=>{P8.includes(t)&&(e.theme=t)}}}},write:!0}})],zr.prototype,"theme",null),b([S({type:ny.apiValues,json:{type:ny.jsonValues,read:ny.read,write:ny.write}})],zr.prototype,"type",void 0),b([S({type:L8,json:{type:L8,write:!0}})],zr.prototype,"units",void 0),zr=H9=b([J("esri.renderers.support.AuthoringInfoVisualVariable")],zr);const Jae=zr;let hg=class extends ye{constructor(e){super(e),this.type=null}};b([S({readOnly:!0,json:{read:!1,write:!0}})],hg.prototype,"type",void 0),hg=b([J("esri.rest.support.ColorRamp")],hg);const a6=hg;var W9;let Hu=W9=class extends a6{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new W9({fromColor:ae(this.fromColor),toColor:ae(this.toColor),algorithm:this.algorithm})}};b([De({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Hu.prototype,"algorithm",void 0),b([S({type:et,json:{type:[Pt],write:!0}})],Hu.prototype,"fromColor",void 0),b([S({type:et,json:{type:[Pt],write:!0}})],Hu.prototype,"toColor",void 0),b([S({type:["algorithmic"]})],Hu.prototype,"type",void 0),Hu=W9=b([J("esri.rest.support.AlgorithmicColorRamp")],Hu);const l6=Hu;var J9;let ad=J9=class extends a6{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new J9({colorRamps:ae(this.colorRamps)})}};b([S({type:[l6],json:{write:!0}})],ad.prototype,"colorRamps",void 0),b([S({type:["multipart"]})],ad.prototype,"type",void 0),ad=J9=b([J("esri.rest.support.MultipartColorRamp")],ad);const IN=ad,Kae={key:"type",base:a6,typeMap:{algorithmic:l6,multipart:IN}};function Yae(t){return t&&t.type?t.type==="algorithmic"?l6.fromJSON(t):t.type==="multipart"?IN.fromJSON(t):null:null}var K9;const vu=new Nt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),oy=new Nt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),R8=new Nt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),j8=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Zae=["high-to-low","above-and-below","above","below","90-10"],Xae=["flow-line","wave-front"],Qae=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let di=K9=class extends ye{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?Yae(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new K9({classificationMethod:this.classificationMethod,colorRamp:ae(this.colorRamp),fadeRatio:ae(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:ae(this.field1),field2:ae(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};b([S({type:vu.apiValues,value:null,json:{type:vu.jsonValues,read:vu.read,write:vu.write,origins:{"web-document":{default:"manual",type:vu.jsonValues,read:vu.read,write:vu.write}}}})],di.prototype,"classificationMethod",null),b([S({types:Kae,json:{write:!0}})],di.prototype,"colorRamp",void 0),b([Ce("colorRamp")],di.prototype,"readColorRamp",null),b([S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],di.prototype,"fadeRatio",void 0),b([S({type:[String],value:null,json:{write:!0}})],di.prototype,"fields",null),b([S({type:$l,value:null,json:{write:!0}})],di.prototype,"field1",null),b([S({type:$l,value:null,json:{write:!0}})],di.prototype,"field2",null),b([S({type:Xae,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],di.prototype,"flowTheme",null),b([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],di.prototype,"focus",null),b([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],di.prototype,"isAutoGenerated",void 0),b([S({type:Number,value:null,json:{type:Pt,write:!0}})],di.prototype,"numClasses",null),b([S({type:j8,json:{type:j8,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],di.prototype,"lengthUnit",void 0),b([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],di.prototype,"maxSliderValue",void 0),b([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],di.prototype,"minSliderValue",void 0),b([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],di.prototype,"statistics",null),b([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],di.prototype,"standardDeviationInterval",null),b([S({type:oy.apiValues,value:null,json:{type:oy.jsonValues,read:oy.read,write:oy.write,origins:{"web-scene":{type:R8.jsonValues,write:{writer:R8.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],di.prototype,"type",null),b([S({type:[Jae],json:{write:!0}})],di.prototype,"visualVariables",void 0),b([S({type:Qae,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],di.prototype,"univariateSymbolStyle",null),b([S({type:Zae,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],di.prototype,"univariateTheme",null),di=K9=b([J("esri.renderers.support.AuthoringInfo")],di);const EN=di,Sb=new Nt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let ld=class extends ye{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};b([S({type:EN,json:{write:!0}})],ld.prototype,"authoringInfo",void 0),b([S({type:Sb.apiValues,readOnly:!0,json:{type:Sb.jsonValues,read:!1,write:{writer:Sb.write,ignoreOrigin:!0}}})],ld.prototype,"type",void 0),ld=b([J("esri.renderers.Renderer")],ld);const Ta=ld;function ele(t){var e,i;return((i=(e=t.match(tle))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const tle=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var Y9;let up=Y9=class extends ye{constructor(){super(...arguments),this.title=null}clone(){return new Y9({title:this.title})}};b([S({type:String,json:{write:!0}})],up.prototype,"title",void 0),up=Y9=b([J("esri.renderers.support.LegendOptions")],up);var Z9;let cg=Z9=class extends up{constructor(){super(...arguments),this.showLegend=null}clone(){return new Z9({title:this.title,showLegend:this.showLegend})}};b([S({type:Boolean,json:{write:!0}})],cg.prototype,"showLegend",void 0),cg=Z9=b([J("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],cg);const AN=cg,xb=new Nt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let pn=class extends ye{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(me.getLogger(this).error(".field: field must be a string value"),null):Mf(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};b([S()],pn.prototype,"index",void 0),b([S({type:xb.apiValues,readOnly:!0,json:{read:xb.read,write:xb.write}})],pn.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],pn.prototype,"field",void 0),b([Ft("field")],pn.prototype,"castField",null),b([S({type:String,json:{write:!0}})],pn.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],pn.prototype,"valueExpressionTitle",void 0),b([S({readOnly:!0})],pn.prototype,"arcadeRequired",null),b([S({type:AN,json:{write:!0}})],pn.prototype,"legendOptions",void 0),pn=b([J("esri.renderers.visualVariables.VisualVariable")],pn);const Xf=pn;var X9;let Wu=X9=class extends ye{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new X9({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};b([S({type:et,json:{type:[Pt],write:!0}})],Wu.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],Wu.prototype,"label",void 0),b([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Wu.prototype,"value",void 0),b([ke("value")],Wu.prototype,"writeValue",null),Wu=X9=b([J("esri.renderers.visualVariables.support.ColorStop")],Wu);const ile=Wu;var Q9;let Ju=Q9=class extends Xf{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new Q9({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};b([S({readOnly:!0})],Ju.prototype,"cache",null),b([S({type:["color"],json:{type:["colorInfo"]}})],Ju.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Ju.prototype,"normalizationField",void 0),b([S({type:[ile],json:{write:!0}})],Ju.prototype,"stops",null),Ju=Q9=b([J("esri.renderers.visualVariables.ColorVariable")],Ju);const kN=Ju;var e_;let dl=e_=class extends ye{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return ef(e.transparency)}writeOpacity(t,e,i){e[i]=O5(t)}clone(){return new e_({label:this.label,opacity:this.opacity,value:this.value})}};b([S({type:String,json:{write:!0}})],dl.prototype,"label",void 0),b([S({type:Number,json:{type:Pt,write:{target:"transparency"}}})],dl.prototype,"opacity",void 0),b([Ce("opacity",["transparency"])],dl.prototype,"readOpacity",null),b([ke("opacity")],dl.prototype,"writeOpacity",null),b([S({type:Number,json:{write:!0}})],dl.prototype,"value",void 0),dl=e_=b([J("esri.renderers.visualVariables.support.OpacityStop")],dl);const rle=dl;var t_;let Ku=t_=class extends Xf{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new t_({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};b([S({readOnly:!0})],Ku.prototype,"cache",null),b([S({type:["opacity"],json:{type:["transparencyInfo"]}})],Ku.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Ku.prototype,"normalizationField",void 0),b([S({type:[rle],json:{write:!0}})],Ku.prototype,"stops",null),Ku=t_=b([J("esri.renderers.visualVariables.OpacityVariable")],Ku);const ON=Ku;var i_;let Ko=i_=class extends Xf{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,s){if(s&&s.messages){const a=`visualVariables[${this.index}]`;s.messages.push(new oe("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:a+".valueExpressionTitle",context:s}))}}clone(){return new i_({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};b([S({readOnly:!0})],Ko.prototype,"cache",null),b([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Ko.prototype,"axis",void 0),b([S({type:["rotation"],json:{type:["rotationInfo"]}})],Ko.prototype,"type",void 0),b([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Ko.prototype,"rotationType",void 0),b([S({type:String,json:{write:!0}})],Ko.prototype,"valueExpressionTitle",void 0),b([ke("web-scene","valueExpressionTitle")],Ko.prototype,"writeValueExpressionTitleWebScene",null),Ko=i_=b([J("esri.renderers.visualVariables.RotationVariable")],Ko);const CN=Ko;var r_;let jc=r_=class extends ye{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new r_({label:this.label,size:this.size,value:this.value})}};b([S({type:String,json:{write:!0}})],jc.prototype,"label",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],jc.prototype,"size",void 0),b([S({type:Number,json:{write:!0}})],jc.prototype,"value",void 0),jc=r_=b([J("esri.renderers.visualVariables.support.SizeStop")],jc);const sle=jc;var s_;let pg=s_=class extends AN{constructor(){super(...arguments),this.customValues=null}clone(){return new s_({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};b([S({type:[Number],json:{write:!0}})],pg.prototype,"customValues",void 0),pg=s_=b([J("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],pg);const nle=pg;var ua,Ui;function Zc(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function wf(t){return t!=null&&!isNaN(t)&&isFinite(t)}function PN(t){return t.valueExpression?ua.Expression:t.field&&typeof t.field=="string"?ua.Field:ua.Unknown}function ole(t,e){const i=e||PN(t),s=t.valueUnit||"unknown";return i===ua.Unknown?Ui.Constant:t.stops?Ui.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?Ui.ClampedLinear:s==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?Ui.Proportional:Ui.Additive:Ui.Identity:Ui.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(ua||(ua={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(Ui||(Ui={}));const Xl=me.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),D8=new Nr,dg=Math.PI,NN=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function LN(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(j=>j.type==="color"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Xl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const a=typeof e=="number",d=a?null:e,y=d&&d.attributes;let g=a?e:null;const _=s.field,{ipData:x,hasExpression:I}=s.cache;let A=s.cache.compiledFunc;if(!_&&!I){const j=s.stops;return j&&j[0]&&j[0].color}if(typeof g!="number")if(I){if(i==null||i.arcade==null)return void Xl.error("Use of arcade expressions requires an arcade context");const j={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,V=D.getViewInfo(j),W=D.createExecContext(d,V);if(!A){const K=D.createSyntaxTree(s.valueExpression);A=D.createFunction(K),s.cache.compiledFunc=A}g=D.executeFunction(A,W)}else y&&(g=y[_]);const C=s.normalizationField,N=y!=null&&C!=null?parseFloat(y[C]):void 0;if(g!=null&&(!C||a||!isNaN(N)&&N!==0)){isNaN(N)||a||(g/=N);const j=u6(g,x);if(j){const D=j[0],V=j[1],W=D===V?s.stops[D].color:et.blendColors(s.stops[D].color,s.stops[V].color,j[2],i!=null?i.color:void 0);return new et(W)}}}function RN(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(j=>j.type==="opacity"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Xl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const a=typeof e=="number",d=a?null:e,y=d&&d.attributes;let g=a?e:null;const _=s.field,{ipData:x,hasExpression:I}=s.cache;let A=s.cache.compiledFunc;if(!_&&!I){const j=s.stops;return j&&j[0]&&j[0].opacity}if(typeof g!="number")if(I){if(i==null||i.arcade==null)return void Xl.error("Use of arcade expressions requires an arcade context");const j={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,V=D.getViewInfo(j),W=D.createExecContext(d,V);if(!A){const K=D.createSyntaxTree(s.valueExpression);A=D.createFunction(K),s.cache.compiledFunc=A}g=D.executeFunction(A,W)}else y&&(g=y[_]);const C=s.normalizationField,N=y!=null&&C!=null?parseFloat(y[C]):void 0;if(g!=null&&(!C||a||!isNaN(N)&&N!==0)){isNaN(N)||a||(g/=N);const j=u6(g,x);if(j){const D=j[0],V=j[1];if(D===V)return s.stops[D].opacity;{const W=s.stops[D].opacity;return W+(s.stops[V].opacity-W)*j[2]}}}}function jN(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(N=>N.type==="rotation"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Xl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const a=s.axis||"heading",d=a==="heading"&&s.rotationType==="arithmetic"?90:0,y=a==="heading"&&s.rotationType==="arithmetic"?-1:1,g=typeof e=="number"?null:e,_=g&&g.attributes,x=s.field,{hasExpression:I}=s.cache;let A=s.cache.compiledFunc,C=0;if(!x&&!I)return C;if(I){if(i==null||i.arcade==null)return void Xl.error("Use of arcade expressions requires an arcade context");const N={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},j=i.arcade.arcadeUtils,D=j.getViewInfo(N),V=j.createExecContext(g,D);if(!A){const W=j.createSyntaxTree(s.valueExpression);A=j.createFunction(W),s.cache.compiledFunc=A}C=j.executeFunction(A,V)}else _&&(C=_[x]||0);return C=typeof C!="number"||isNaN(C)?null:d+y*C,C}function ale(t,e,i){const s=typeof e=="number",a=s?null:e,d=a&&a.attributes;let y=s?e:null;const{isScaleDriven:g}=t.cache;let _=t.cache.compiledFunc;if(g){const I=i!=null?i.scale:void 0,A=i!=null?i.view:void 0;y=I==null||A==="3d"?lle(t):I}else if(!s)switch(t.inputValueType){case ua.Expression:{if(i==null||i.arcade==null)return void Xl.error("Use of arcade expressions requires an arcade context");const I={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,C=A.getViewInfo(I),N=A.createExecContext(a,C);if(!_){const j=A.createSyntaxTree(t.valueExpression);_=A.createFunction(j),t.cache.compiledFunc=_}y=A.executeFunction(_,N);break}case ua.Field:d&&(y=d[t.field]);break;case ua.Unknown:y=null}if(!wf(y))return null;if(s||!t.normalizationField)return y;const x=d?parseFloat(d[t.normalizationField]):null;return wf(x)&&x!==0?y/x:null}function lle(t){let e=null,i=null;const s=t.stops;return s?(e=s[0].value,i=s[s.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function Bv(t,e,i){const s="visualVariables"in t&&t.visualVariables?t.visualVariables.find(d=>d.type==="size"):t;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Xl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const a=FN(ale(s,e,i),s,e,i,s.cache.ipData);return a==null||isNaN(a)?0:a}function qr(t,e,i){return t==null?null:Zc(t)?Bv(t,e,i):wf(t)?t:null}function DN(t,e,i){return wf(i)&&t>i?i:wf(e)&&t<e?e:t}function ule(t,e,i,s){return t+((qr(e.minSize,i,s)||e.minDataValue)??0)}function hle(t,e,i){const s=t.stops;let a=s&&s.length&&s[0].size;return a==null&&(a=t.minSize),qr(a,e,i)}function cle(t,e,i,s){const a=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),d=qr(e.minSize,i,s),y=qr(e.maxSize,i,s),g=s!=null?s.shape:void 0;if(t<=e.minDataValue)return d;if(t>=e.maxDataValue)return y;if(d==null||y==null)return null;if(e.scaleBy==="area"&&g){const _=g==="circle",x=_?dg*(d/2)**2:d*d,I=x+a*((_?dg*(y/2)**2:y*y)-x);return _?2*Math.sqrt(I/dg):Math.sqrt(I)}return d+a*(y-d)}function ple(t,e,i,s){const a=s!=null?s.shape:void 0,d=t/e.minDataValue,y=qr(e.minSize,i,s),g=qr(e.maxSize,i,s);let _=null;return _=a==="circle"?2*Math.sqrt(d*(y/2)**2):a==="square"||a==="diamond"||a==="image"?Math.sqrt(d*y**2):d*y,DN(_,y,g)}function dle(t,e,i,s,a){var _,x,I;const[d,y,g]=u6(t,a);if(d===y)return qr((_=e.stops)==null?void 0:_[d].size,i,s);{const A=qr((x=e.stops)==null?void 0:x[d].size,i,s);return A+(qr((I=e.stops)==null?void 0:I[y].size,i,s)-A)*g}}function fle(t,e,i,s){const a=(s!=null&&s.resolution?s.resolution:1)*r6[e.valueUnit],d=qr(e.minSize,i,s),y=qr(e.maxSize,i,s),{valueRepresentation:g}=e;let _=null;return _=g==="area"?2*Math.sqrt(t/dg)/a:g==="radius"||g==="distance"?2*t/a:t/a,DN(_,d,y)}function FN(t,e,i,s,a){switch(e.transformationType){case Ui.Additive:return ule(t,e,i,s);case Ui.Constant:return hle(e,i,s);case Ui.ClampedLinear:return cle(t,e,i,s);case Ui.Proportional:return ple(t,e,i,s);case Ui.Stops:return dle(t,e,i,s,a);case Ui.RealWorldSize:return fle(t,e,i,s);case Ui.Identity:return t;case Ui.Unknown:return null}}function yle(t,e,i){const{isScaleDriven:s}=t.cache;if(!(s&&i==="3d"||e))return null;const a={scale:e,view:i};let d=qr(t.minSize,D8,a),y=qr(t.maxSize,D8,a);if(d!=null||y!=null){if(d>y){const g=y;y=d,d=g}return{minSize:d,maxSize:y}}}function gle(t,e,i){if(!t.visualVariables)return;const s=[],a=[],d=[],y=[],g=[];for(const _ of t.visualVariables)switch(_.type){case"color":a.push(_);break;case"opacity":d.push(_);break;case"rotation":g.push(_);break;case"size":y.push(_)}return a.forEach(_=>{const x=LN(_,e,i);s.push({variable:_,value:x})}),d.forEach(_=>{const x=RN(_,e,i);s.push({variable:_,value:x})}),g.forEach(_=>{const x=jN(_,e,i);s.push({variable:_,value:x})}),y.forEach(_=>{const x=Bv(_,e,i);s.push({variable:_,value:x})}),s.filter(_=>_.value!=null)}function u6(t,e){if(!e)return;let i=0,s=e.length-1;return e.some((a,d)=>t<a?(s=d,!0):(i=d,!1)),[i,s,(t-e[i])/(e[s]-e[i])]}function mle(t,e,i){const s=["proportional","proportional","proportional"];for(const a of t){const d=a.useSymbolValue?"symbol-value":Bv(a,e,i);switch(a.axis){case"width":s[0]=d;break;case"depth":s[1]=d;break;case"height":s[2]=d;break;case"width-and-depth":s[0]=d,s[1]=d;break;case"all":case void 0:case null:s[0]=d,s[1]=d,s[2]=d;break;default:a.axis}}return s}const Lge=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:mle,getColor:LN,getOpacity:RN,getRotationAngle:jN,getSize:Bv,getSizeForValue:FN,getSizeFromNumberOrVariable:qr,getSizeRangeAtScale:yle,getVisualVariableValues:gle,viewScaleRE:NN},Symbol.toStringTag,{value:"Module"}));var n_;const ay=new Nt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),o_=new Nt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function F8(t){if(t!=null)return typeof t=="string"||typeof t=="number"?Bt(t):t.type==="size"?Zc(t)?t:(delete(t={...t}).type,new Tt(t)):void 0}function z8(t,e,i){if(typeof t!="object")return t;const s=new Tt;return s.read(t,i),s}let Tt=n_=class extends Xf{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&NN.test(this.valueExpression)}}set expression(t){me.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){Zc(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Zc(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return PN(this)}set maxDataValue(t){t&&this.stops&&(me.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(me.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return F8(t)}readMaxSize(t,e,i){return z8(t,e,i)}set minDataValue(t){t&&this.stops&&(me.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(me.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return F8(t)}readMinSize(t,e,i){return z8(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(me.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return ole(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,s){if(t==="$view.scale"){if(s&&s.messages){const a=this.index,d=typeof a=="string"?a:`visualVariables[${a}]`;s.messages.push(new oe("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:d+".valueExpression",context:s}))}}else e[i]=t}readValueUnit(t){return t?o_.read(t):null}clone(){return new n_({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Zc(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Zc(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Ui.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===Ui.Stops){const t=this.stops;if(!t)return this;const e=t.map(s=>s.size).reverse(),i=t.length;for(let s=0;s<i;s++)t[s].size=e[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};b([S({readOnly:!0})],Tt.prototype,"cache",null),b([S({type:ay.apiValues,json:{type:ay.jsonValues,origins:{"web-map":{read:!1}},read:ay.read,write:ay.write}})],Tt.prototype,"axis",void 0),b([S({type:String,value:null,json:{read:!1}})],Tt.prototype,"expression",null),b([S()],Tt.prototype,"index",null),b([S({type:String,readOnly:!0})],Tt.prototype,"inputValueType",null),b([S({type:nle,json:{write:!0}})],Tt.prototype,"legendOptions",void 0),b([S({type:Number,value:null,json:{write:!0}})],Tt.prototype,"maxDataValue",null),b([S({type:Number,value:null,json:{write:!0}})],Tt.prototype,"maxSize",null),b([Ft("maxSize")],Tt.prototype,"castMaxSize",null),b([Ce("maxSize")],Tt.prototype,"readMaxSize",null),b([S({type:Number,value:null,json:{write:!0}})],Tt.prototype,"minDataValue",null),b([S({type:Number,value:null,json:{write:!0}})],Tt.prototype,"minSize",null),b([Ft("minSize")],Tt.prototype,"castMinSize",null),b([Ce("minSize")],Tt.prototype,"readMinSize",null),b([S({type:String,json:{write:!0}})],Tt.prototype,"normalizationField",void 0),b([S({readOnly:!0})],Tt.prototype,"arcadeRequired",null),b([S({type:String})],Tt.prototype,"scaleBy",void 0),b([S({type:[sle],value:null,json:{write:!0}})],Tt.prototype,"stops",null),b([S({type:["outline"],json:{write:!0}})],Tt.prototype,"target",void 0),b([S({type:String,readOnly:!0})],Tt.prototype,"transformationType",null),b([S({type:["size"],json:{type:["sizeInfo"]}})],Tt.prototype,"type",void 0),b([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Tt.prototype,"useSymbolValue",void 0),b([S({type:String,json:{write:!0}})],Tt.prototype,"valueExpression",void 0),b([Ce("valueExpression",["valueExpression","expression"])],Tt.prototype,"readValueExpression",null),b([ke("web-scene","valueExpression")],Tt.prototype,"writeValueExpressionWebScene",null),b([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Tt.prototype,"valueRepresentation",void 0),b([S({type:o_.apiValues,json:{write:o_.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Tt.prototype,"valueUnit",void 0),b([Ce("valueUnit")],Tt.prototype,"readValueUnit",null),Tt=n_=b([J("esri.renderers.visualVariables.SizeVariable")],Tt);const zN=Tt,vle={color:kN,size:zN,opacity:ON,rotation:CN},ble=new Nt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),wle=/^\[([^\]]+)\]$/i;let fg=class extends je{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,s)=>{let a=null;return a=i.target===s.target?0:i.target?1:-1,a});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,s){const{rotationExpression:a,rotationType:d}=i,y=a&&a.match(wle),g=y&&y[1];if(g&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:d,field:g})),e)return e.map(_=>{const x=ble.read(_.type),I=vle[x];I||(me.getLogger(this).warn(`Unknown variable type: ${x}`),s&&s.messages&&s.messages.push(new Cn("visual-variable:unsupported",`visualVariable of type '${x}' is not supported`,{definition:_,context:s})));const A=new I;return A.read(_,s),A})}writeVariables(e,i){const s=[];for(const a of e){const d=a.toJSON(i);d&&s.push(d)}return s}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};b([S()],fg.prototype,"visualVariables",null),fg=b([J("esri.renderers.visualVariables.VisualVariableFactory")],fg);const _le=fg,Sle={base:Xf,key:"type",typeMap:{opacity:ON,color:kN,rotation:CN,size:zN}},Bp=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new _le}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,a){return this._vvFactory.readVariables(i,s,a)}writeVisualVariables(i,s,a,d){s[a]=this._vvFactory.writeVariables(i,d)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){const a=this.visualVariables;return a?a.filter(d=>d.type===i&&(typeof s=="string"?d.target===s:s!==!1||!d.target)):[]}async collectVVRequiredFields(i,s){let a=[];this.visualVariables&&(a=a.concat(this.visualVariables));for(const d of a)d&&(d.field&&hs(i,s,d.field),d.normalizationField&&hs(i,s,d.normalizationField),d.valueExpression&&(xle(d.valueExpression,i,s)||await Pr(i,s,d.valueExpression)))}};return b([S({types:[Sle],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),b([Ce("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),b([ke("visualVariables")],e.prototype,"writeVisualVariables",null),e=b([J("esri.renderers.mixins.VisualVariablesMixin")],e),e};function xle(t,e,i){const s=ele(t);return s!=null&&(hs(e,i,s),!0)}const v0={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function $le(t,e=v0){var g,_;if(!t)return{symbol:null};const{retainId:i=v0.retainId,ignoreDrivers:s=v0.ignoreDrivers,hasLabelingContext:a=v0.hasLabelingContext,retainCIM:d=v0.retainCIM}=e;let y=null;if(R3(t)||t instanceof Hh)y=t.clone();else if(t.type==="cim"){const x=(_=(g=t.data)==null?void 0:g.symbol)==null?void 0:_.type;if(x!=="CIMPointSymbol")return{error:new oe("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${x||"unknown"}' is unsupported in 3D`,{symbol:t})};y=d?t.clone():ch.fromCIMSymbol(t)}else if(t instanceof ps)y=Ev.fromSimpleLineSymbol(t);else if(t instanceof nu)y=ch.fromSimpleMarkerSymbol(t);else if(t instanceof zf)y=ch.fromPictureMarkerSymbol(t);else if(t instanceof su)y=e.geometryType&&e.geometryType==="mesh"?Av.fromSimpleFillSymbol(t):Vf.fromSimpleFillSymbol(t);else{if(!(t instanceof Bh))return{error:new oe("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};y=a?Iv.fromTextSymbol(t):ch.fromTextSymbol(t)}return i&&y&&y.type!=="cim"&&(y.id=t.id),s&&R3(y)&&y.symbolLayers.forEach(x=>x.ignoreDrivers=!0),{symbol:y}}function Hm(t,e,i,s){const a=VN(t,{},{context:s,isLabelSymbol:!1});a!=null&&(e[i]=a)}function V8(t,e,i,s){const a=VN(t,{},{context:s,isLabelSymbol:!0});a!=null&&(e[i]=a)}function G8(t){return t instanceof Dp||t instanceof Hh}function VN(t,e,i){if(t==null)return null;const{context:s,isLabelSymbol:a}=i,d=s==null?void 0:s.origin,y=s==null?void 0:s.messages;if(d==="web-scene"&&!G8(t)){const g=$le(t,{retainCIM:!0,hasLabelingContext:a});return g.symbol!=null?g.symbol.write(e,s):(y==null||y.push(new oe("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:s,error:g.error})),null)}return(d==="web-map"||d==="portal-item"&&!xM(s==null?void 0:s.layer))&&G8(t)?(y==null||y.push(new oe("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:s})),null):t.write(e,s)}function jge(t,e){return gW(t,null,e)}const Hp={types:mW,json:{write:{writer:Hm},origins:{"web-scene":{types:tx,write:{writer:Hm},read:{reader:If({types:tx})}}}}},GN={types:{base:Br,key:"type",typeMap:{"simple-fill":rp.typeMap["simple-fill"],"picture-fill":rp.typeMap["picture-fill"],"polygon-3d":rp.typeMap["polygon-3d"]}},json:{write:{writer:Hm},origins:{"web-scene":{type:Vf,write:{writer:Hm}}}}},yg={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var a_;let fl=a_=class extends ye{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new a_({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};b([S({type:String,json:{write:!0}})],fl.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],fl.prototype,"label",void 0),b([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],fl.prototype,"minValue",void 0),b([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],fl.prototype,"maxValue",void 0),b([S(Hp)],fl.prototype,"symbol",void 0),fl=a_=b([J("esri.renderers.support.ClassBreakInfo")],fl);const Wm=fl;var l_;const UN="log",gg="percent-of-total",mg="field",ly=new Nt({esriNormalizeByLog:UN,esriNormalizeByPercentOfTotal:gg,esriNormalizeByField:mg}),Tle=ui(Wm);let Oi=l_=class extends Bp(Ta){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let s=e.minValue;return t.map(a=>{const d=new Wm;return d.read(a,i),d.minValue==null&&(d.minValue=s),d.maxValue==null&&(d.maxValue=d.minValue),s=d.maxValue,d})}writeClassBreakInfos(t,e,i,s){const a=t.map(d=>d.write({},s));this._areClassBreaksConsecutive()&&a.forEach(d=>delete d.classMinValue),e[i]=a}castField(t){return t==null?t:typeof t=="function"?(me.getLogger(this).error(".field: field must be a string value"),null):Mf(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&mg||i&&gg||null,e&&i&&me.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==mg&&t!==gg||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let s=null;s=typeof t=="number"?new Wm({minValue:t,maxValue:e,symbol:_A(i)}):Tle(ae(t)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let s=0;s<i;s++){const a=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(a[0]===t&&a[1]===e){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(t,e){return!this.valueExpression||e!=null&&e.arcade!=null||me.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await Ch()});const s=this.getBreakIndex(t,i);return s!==-1?this.classBreakInfos[s]:null}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void me.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(e==null||e.arcade==null)){const a=await Ch(),{arcadeUtils:d}=a;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:a}}const s=this.getBreakIndex(t,i);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((s,a)=>s+a.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new l_({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ae(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ae(this.visualVariables),legendOptions:ae(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(t,e)),Pr(t,e,this.valueExpression)];hs(t,e,this.field),hs(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:s,spatialReference:a,arcade:d}=e??{},{valueExpression:y}=this;let g=this._compiledValueExpression.valueExpression===y?this._compiledValueExpression.compiledFunction:null;const _=d.arcadeUtils;if(!g){const I=_.createSyntaxTree(y);g=_.createFunction(I),this._compiledValueExpression.compiledFunction=g}this._compiledValueExpression.valueExpression=y;const x=_.executeFunction(g,_.createExecContext(t,_.getViewInfo({viewingMode:i,scale:s,spatialReference:a})));return this._getBreakIndexfromInfos(x)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,s=this.normalizationType;let a=parseFloat(i[e]);if(s){const d=this.normalizationTotal,y=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(s===UN)a=Math.log(a)*Math.LOG10E;else if(s!==gg||d==null||isNaN(d)){if(s===mg&&!isNaN(y)){if(isNaN(a)||isNaN(y))return-1;a/=y}}else a=a/d*100}return this._getBreakIndexfromInfos(a)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]<=t&&(e?t<=s[1]:t<s[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};b([S(GN)],Oi.prototype,"backgroundFillSymbol",void 0),b([S({type:[Wm]})],Oi.prototype,"classBreakInfos",void 0),b([Ce("classBreakInfos")],Oi.prototype,"readClassBreakInfos",null),b([ke("classBreakInfos")],Oi.prototype,"writeClassBreakInfos",null),b([S({type:String,json:{write:!0}})],Oi.prototype,"defaultLabel",void 0),b([S(Hp)],Oi.prototype,"defaultSymbol",void 0),b([S({type:String,json:{write:!0}})],Oi.prototype,"field",void 0),b([Ft("field")],Oi.prototype,"castField",null),b([S({type:Boolean})],Oi.prototype,"isMaxInclusive",void 0),b([S({type:up,json:{write:!0}})],Oi.prototype,"legendOptions",void 0),b([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Oi.prototype,"minValue",null),b([S({type:String,json:{write:!0}})],Oi.prototype,"normalizationField",void 0),b([S({type:Number,cast:t=>Cs(t),json:{write:!0}})],Oi.prototype,"normalizationTotal",void 0),b([S({type:ly.apiValues,value:null,json:{type:ly.jsonValues,read:ly.read,write:ly.write}})],Oi.prototype,"normalizationType",null),b([De({classBreaks:"class-breaks"})],Oi.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Oi.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],Oi.prototype,"valueExpressionTitle",void 0),Oi=l_=b([J("esri.renderers.ClassBreaksRenderer")],Oi);const qN=Oi,$b=-3;var Tl;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(Tl||(Tl={}));let Dge=class{constructor(e,i,s){this.name=e,this._storage=i,this.id=Ile+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),s&&(this._storage.registerRemoveFunc(this.id,s),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(e,i,s,a=0){this._storage.put(this,e,i,s,a)}get(e){const i=this._storage.get(this,e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this,e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,s){this._storage.updateSize(this,e,i,s)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},Mle=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new zl,this._users=new zl}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}put(e,i,s,a,d){i=e.id+i;const y=this._db.get(i);if(y&&(this._size-=y.size,e.size-=y.size,this._db.delete(i),y.entry!==s&&this._notifyRemove(i,y.entry,Tl.ALL)),a>this._maxSize)return void this._notifyRemove(i,s,Tl.ALL);if(s===void 0)return void console.warn("Refusing to cache undefined entry ");if(!a||a<0)return void console.warn("Refusing to cache entry with invalid size "+a);const g=1+Math.max(d,$b)-$b;this._db.set(i,{entry:s,size:a,lifetime:g,lives:g}),this._size+=a,e.size+=a,this._checkSizeLimits()}updateSize(e,i,s,a){i=e.id+i;const d=this._db.get(i);if(d&&d.entry===s){for(this._size-=d.size,e.size-=d.size;a>this._maxSize;){const y=this._notifyRemove(i,s,Tl.SOME);if(!(y!=null&&y>0))return void this._db.delete(i);a=y}d.size=a,this._size+=a,e.size+=a,this._checkSizeLimits()}}pop(e,i){i=e.id+i;const s=this._db.get(i);if(s)return this._size-=s.size,e.size-=s.size,this._db.delete(i),++this._hit,s.entry;++this._miss}get(e,i){i=e.id+i;const s=this._db.get(i);if(s!==void 0)return this._db.delete(i),s.lives=s.lifetime,this._db.set(i,s),++this._hit,s.entry;++this._miss}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach((y,g)=>{const _=y.lifetime;s[_]=(s[_]||0)+y.size,this._users.forAll(x=>{const{id:I,name:A}=x;if(g.startsWith(I)){const C=i[A]||0;i[A]=C+y.size}})});const a={};this._users.forAll(y=>{const g=y.name;if("hitRate"in y&&typeof y.hitRate=="number"&&!isNaN(y.hitRate)&&y.hitRate>0){const _=i[g]||0;i[g]=_,a[g]=Math.round(100*y.hitRate)+"%"}else a[g]="0%"});const d=Object.keys(i);d.sort((y,g)=>i[g]-i[y]),d.forEach(y=>e[y]=Math.round(i[y]/2**20)+"MB / "+a[y]);for(let y=s.length-1;y>=0;--y){const g=s[y];g&&(e["Priority "+(y+$b-1)]=Math.round(g/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((s,a)=>{a.startsWith(i)&&(this._size-=s.size,this._db.delete(a),this._notifyRemove(a,s.entry,Tl.ALL))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,Tl.ALL)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,s){let a;return this._removeFuncs.some(d=>{if(e.startsWith(d[0])){const y=d[1](i,s);return typeof y=="number"&&(a=y),!0}return!1}),a}_checkSizeLimits(){if(this._size>this._maxSize){for(const[e,i]of this._db)if(this._purgeItem(e,i),this._size<=.9*this.maxSize)return}this._users.forEach(e=>{if(e.maxSize>0&&e.size>e.maxSize){for(const[i,s]of this._db)if(i.startsWith(e.id)&&(this._purgeItem(i,s,e),e.size<=.9*e.maxSize))return}})}_purgeItem(e,i,s=this._users.find(a=>e.startsWith(a.id))){if(this._db.delete(e),i.lives<=1){this._size-=i.size,s&&(s.size-=i.size);const a=this._notifyRemove(e,i.entry,Tl.SOME);a!=null&&a>0&&(this._size+=a,s&&(s.size+=a),i.lives=i.lifetime,i.size=a,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},Ile=0,BN=class{constructor(e,i){this._storage=new Mle,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,i,s=1){this._storage.put(this,e,i,s,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}};function Ele(t){return t.type==="date"||t.type==="esriFieldTypeDate"||t.type==="date-only"||t.type==="esriFieldTypeDateOnly"||t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset"}function U8(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function q8(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let HN=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const s of e){const a=s==null?void 0:s.name,d=H8(s==null?void 0:s.name);if(a&&d){const y=B8(a);this._fieldsMap.set(a,s),this._fieldsMap.set(y,s),this._normalizedFieldsMap.set(d,s),i.push(y),Ele(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):EI(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),U8(s)||q8(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)U8(e)||q8(e)||e.nullable||DU(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(B8(e))??this._normalizedFieldsMap.get(H8(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function B8(t){return t.trim().toLowerCase()}function H8(t){var e;return((e=_U(t))==null?void 0:e.toLowerCase())??""}const W8="esri.renderers.support.DictionaryLoader",Ale={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let h6=class{constructor(e,i,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new BN(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{s=await this._dictionaryPromise}catch(j){if(or(j))return this._dictionaryPromise=null,null}const a=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),d={};if(this.fieldMap)for(const j of this._symbolFields){const D=this._getFieldName(this.fieldMap[j]);d[j]=D?a?e.attributes[D]:""+e.attributes[D]:""}let y=null;try{y=s==null?void 0:s(d,i)}catch{return null}if(!y||typeof y!="string")return null;const g=J_(y).toString(),_=this._symbolCache.get(g);if(_)return _.catch(()=>{this._symbolCache.pop(g)}),_;const x=y.split(";"),I=[],A=[];for(const j of x)if(j)if(j.includes("po:")){const D=j.substr(3).split("|");if(D.length===3){const V=D[0],W=D[1];let K=D[2];if(W==="DashTemplate")K=K.split(" ").map(Y=>Number(Y));else if(W==="Color"){const Y=new et(K).toRgba();K=[Y[0],Y[1],Y[2],255*Y[3]]}else K=Number(K);A.push({primitiveName:V,propertyName:W,value:K})}}else if(j.includes("|")){for(const D of j.split("|"))if(this._itemNames.has(D)){I.push(D);break}}else this._itemNames.has(j)&&I.push(j);const C=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point",N=this._cimPartsToCIMSymbol(I,A,C,i);return this._symbolCache.put(g,N,1),N}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void me.getLogger(W8).error("no valid URL!");const i=pt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:s}]=await Promise.all([i,Ch()]);if(!s)throw this._dictionaryPromise=null,new oe("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:a,dictionary_version:d,expression:y,itemsNames:g}=s,_=y;let x=!1;d&&(this._dictionaryVersion=Bm.parse(d),x=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+s.cimRefTemplateUrl,this._itemNames=new Set(g),this._symbolFields=a.symbol;const I={};if(this.config){const N=this.config;for(const j in N)I[j]=N[j]}if(a.configuration)for(const N of a.configuration)I.hasOwnProperty(N.name)||(I[N.name]=N.value);const A=[];if(e!=null&&e.fields&&this.fieldMap)for(const N of this._symbolFields){const j=this.fieldMap[N],D=e.fields.filter(V=>V.name.toLowerCase()===(j==null?void 0:j.toLowerCase()));D.length>0&&A.push({...D[0],type:x?D[0].type:"esriFieldTypeString"})}A.length>0&&(this._fieldIndex=new HN(A));const C=vU(_,e!=null?e.spatialReference:null,A,I).then(N=>{const j={scale:0};return(D,V)=>{if(N==null)return null;const W=N.repurposeFeature({geometry:null,attributes:D});return j.scale=V!=null?V.scale??void 0:void 0,N.evaluate({$feature:W,$view:j},N.services)}}).catch(N=>(me.getLogger(W8).error("Creating dictinoary expression failed:",N),null));return this._dictionaryPromise=C,C}async _cimPartsToCIMSymbol(e,i,s,a){const d=new Array(e.length);for(let _=0;_<e.length;_++)d[_]=this._getSymbolPart(e[_],a);const y=await Promise.all(d),g=this.fieldMap;if(g)for(const _ of y)WN(_,g);return new Rf({data:this._combineSymbolParts(y,i,s)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(d=>d.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),a=pt(s,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,a);try{return(await a).data}catch(d){throw this._ongoingRequests.delete(e),d}}_combineSymbolParts(e,i,s){if(!e||e.length===0)return null;const a={...e[0]};if(e.length>1){a.symbolLayers=[];for(const d of e){const y=d;a.symbolLayers.unshift(...y.symbolLayers)}}return s&&(a.callout=Ale),{type:"CIMSymbolReference",symbol:a,primitiveOverrides:i}}_getFieldName(e){if(this._fieldIndex!==null){const i=this._fieldIndex.get(e);return i?i.name:e}return e}};function WN(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let s=i.length;for(;s--;){const a=i[s];a&&a.enable!==!1&&a.type==="CIMVectorMarker"&&kle(a,e)}}function kle(t,e){const i=t.markerGraphics;if(i)for(const s of i){if(!s)continue;const a=s.symbol;if(a)switch(a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":WN(a,e);break;case"CIMTextSymbol":a.fieldMap=e}}}const qge=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:h6},Symbol.toStringTag,{value:"Module"}));var u_;let dn=u_=class extends Bp(Ta){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new h6(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,s){s!=null&&s.origin||super.writeVisualVariables(t,e,i,s)}clone(){return new u_({config:ae(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ae(this.fieldMap),url:ae(this.url),visualVariables:ae(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Pr(t,e,this.scaleExpression);for(const i in this.fieldMap){const s=this.fieldMap[i];e.has(s)&&t.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};b([S({type:h6})],dn.prototype,"_loader",null),b([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],dn.prototype,"config",void 0),b([S({type:Object,json:{write:!0}})],dn.prototype,"fieldMap",void 0),b([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],dn.prototype,"scaleExpression",void 0),b([ke("scaleExpression")],dn.prototype,"writeData",null),b([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],dn.prototype,"scaleExpressionTitle",void 0),b([S({type:String,json:{write:!0}})],dn.prototype,"url",void 0),b([ke("visualVariables")],dn.prototype,"writeVisualVariables",null),dn=u_=b([J("esri.renderers.DictionaryRenderer")],dn);const Ole=dn;var h_;let Yo=h_=class extends ye{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(me.getLogger(this).error(".field: field must be a string value"),null):Mf(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new h_({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};b([S({type:et,json:{type:[Number],write:!0}})],Yo.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],Yo.prototype,"field",void 0),b([Ft("field")],Yo.prototype,"castField",null),b([S({type:String,json:{write:!0}})],Yo.prototype,"label",void 0),b([S({type:String,json:{write:!0}})],Yo.prototype,"valueExpression",void 0),b([S({type:String,json:{write:!0}})],Yo.prototype,"valueExpressionTitle",void 0),Yo=h_=b([J("esri.renderers.support.AttributeColorInfo")],Yo);const JN=Yo;var c_;let vg=c_=class extends ye{constructor(){super(...arguments),this.unit=null}clone(){return new c_({unit:this.unit})}};b([S({type:String,json:{write:!0}})],vg.prototype,"unit",void 0),vg=c_=b([J("esri.renderers.support.DotDensityLegendOptions")],vg);const Cle=vg;var p_;let Vr=p_=class extends Bp(Ta){constructor(t){super(t),this.attributes=null,this.backgroundColor=new et([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ps,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new su({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new p_({attributes:ae(this.attributes),backgroundColor:ae(this.backgroundColor),dotBlendingEnabled:ae(this.dotBlendingEnabled),dotShape:ae(this.dotShape),dotSize:ae(this.dotSize),dotValue:ae(this.dotValue),legendOptions:ae(this.legendOptions),outline:ae(this.outline),referenceScale:ae(this.referenceScale),visualVariables:ae(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Pr(t,e,i.valueExpression),i.field&&t.add(i.field)}};b([S({type:[JN],json:{write:!0}})],Vr.prototype,"attributes",void 0),b([S({type:et,json:{write:!0}})],Vr.prototype,"backgroundColor",void 0),b([S({type:Boolean,json:{write:!0}})],Vr.prototype,"dotBlendingEnabled",void 0),b([S({type:String,json:{write:!1}})],Vr.prototype,"dotShape",void 0),b([S({type:Number,json:{write:!0}})],Vr.prototype,"dotSize",void 0),b([S({type:Cle,json:{write:!0}})],Vr.prototype,"legendOptions",void 0),b([S({type:ps,json:{default:null,write:!0}})],Vr.prototype,"outline",void 0),b([S({type:Number,json:{write:!0}})],Vr.prototype,"dotValue",void 0),b([S({type:Number,json:{write:!0}})],Vr.prototype,"referenceScale",void 0),b([S({type:Number,json:{write:!0}})],Vr.prototype,"seed",void 0),b([De({dotDensity:"dot-density"})],Vr.prototype,"type",void 0),Vr=p_=b([J("esri.renderers.DotDensityRenderer")],Vr);const Ple=Vr;var d_;let ud=d_=class extends ye{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new d_({color:this.color,ratio:this.ratio})}};b([S({type:et,json:{type:[Pt],default:null,write:!0}})],ud.prototype,"color",void 0),b([S({type:Number,json:{write:!0}})],ud.prototype,"ratio",void 0),ud=d_=b([J("esri.renderers.support.HeatmapColorStop")],ud);const bg=ud;let Dc=class extends Ii(ye){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};b([S({type:String,json:{write:!0}})],Dc.prototype,"minLabel",void 0),b([S({type:String,json:{write:!0}})],Dc.prototype,"maxLabel",void 0),b([S({type:String,json:{write:!0}})],Dc.prototype,"title",void 0),Dc=b([J("esri.renderers.support.HeatmapLegendOptions")],Dc);function Hv(){return[0,0,0,0]}function Nle(t){return[t[0],t[1],t[2],t[3]]}function Wp(t,e,i,s){return[t,e,i,s]}function Lle(t){const e=Hv(),i=Math.min(4,t.length);for(let s=0;s<i;++s)e[s]=t[s];return e}function Rle(t,e){return new Float64Array(t,e,4)}function KN(){return Hv()}function YN(){return Wp(1,1,1,1)}function ZN(){return Wp(1,0,0,0)}function XN(){return Wp(0,1,0,0)}function QN(){return Wp(0,0,1,0)}function eL(){return Wp(0,0,0,1)}const jle=KN(),Dle=YN(),Fle=ZN(),zle=XN(),Vle=QN(),Gle=eL();Object.freeze(Object.defineProperty({__proto__:null,ONES:Dle,UNIT_W:Gle,UNIT_X:Fle,UNIT_Y:zle,UNIT_Z:Vle,ZEROS:jle,clone:Nle,create:Hv,createView:Rle,fromArray:Lle,fromValues:Wp,ones:YN,unitW:eL,unitX:ZN,unitY:XN,unitZ:QN,zeros:KN},Symbol.toStringTag,{value:"Module"}));const c6=2.4;function Ule(t){return ya(t*c6)}function qle(t){return GE(t)/c6}function Ble(t,e,i,s){let{color:a,ratio:d}=e,{color:y,ratio:g}=i;g===d&&(g===1?d-=1e-6:g+=1e-6);const _=zs((s-d)/(g-d),0,1);WM(t,a.toArray(),y.toArray(),_)}function Hge(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:g})=>g>=0&&g<=1).sort((g,_)=>g.ratio-_.ratio).map(({color:g,ratio:_})=>({color:g,ratio:Math.max(_,.001)})),t.length<1)return i;let s=t[0],a=t[0],d=1;const y=Hv();for(let g=0;g<512;g++){const _=(g+.5)/512;for(;_>a.ratio&&d<t.length;)s=a,a=t[d++];Ble(y,s,a,_),i.set(y,4*g)}return i}function Wge(t,e,i,s){const{radius:a,fieldOffset:d,field:y}=e,g=Math.round(GE(a)),_=new Float64Array(i*s);let x,I=Number.NEGATIVE_INFINITY;const A=Jle(y,d),C=new Set;for(const N of t){const j=N.getCursor();for(;j.next();){const D=j.getObjectId();if(C.has(D))continue;C.add(D);const V=j.readLegacyPointGeometry(),W=128;if(V.x<-W||V.x>=i+W||V.y<-W||V.y>s+W)continue;const K=+A(j),Y=Math.max(0,Math.round(V.x)-g),ee=Math.max(0,Math.round(V.y)-g),re=Math.min(s,Math.round(V.y)+g),se=Math.min(i,Math.round(V.x)+g);for(let ue=ee;ue<re;ue++)for(let de=Y;de<se;de++){const we=ue*i+de,Oe=Wle(V.x-de,V.y-ue,g);x=_[we]+=Oe*K,x>I&&(I=x)}}}return{matrix:_.buffer,max:I}}function Jge(t,e,i,s,a,d){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const y=t.getImageData(0,0,e,e);i&&s&&y.data.set(new Uint8ClampedArray(Hle(e,i,s,a,d))),t.putImageData(y,0,0)}function Hle(t,e,i,s,a){const d=new Uint32Array(t*t),y="buffer"in e?e:new Float64Array(e),g="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),_=g.length/(a-s);for(let x=0;x<y.length;x++){const I=y[x],A=Math.floor((I-s)*_);d[x]=g[zs(A,0,g.length-1)]}return d.buffer}function Wle(t,e,i){const s=Math.sqrt(t**2+e**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function Kge(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function Jle(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var f_;const tL="esri.renderers.HeatmapRenderer",Kle=me.getLogger(tL);function J8(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:s}=t;if(e!=null||i!=null||s!=null){const{blurRadius:a,maxPixelIntensity:d,minPixelIntensity:y,...g}=t;return g}}return t}let Vi=f_=class extends Ta{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new bg({ratio:0,color:new et("rgba(255, 140, 0, 0)")}),new bg({ratio:.75,color:new et("rgba(255, 140, 0, 1)")}),new bg({ratio:.9,color:new et("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return J8(t)}get blurRadius(){return qle(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Ule(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(c6**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||qi(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,Ip(()=>{rD(Kle,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=J8(t),super.read(t,e)}getSymbol(){return new nu}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,s=this.valueExpression;i&&typeof i=="string"&&await hs(t,e,i),s&&typeof s=="string"&&await Pr(t,e,s)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new f_({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ae(this.colorStops),field:this.field,legendOptions:ae(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};b([S({type:EN,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Vi.prototype,"authoringInfo",void 0),b([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Vi.prototype,"blurRadius",null),b([S({type:[bg],json:{write:!0}})],Vi.prototype,"colorStops",void 0),b([S({type:String,json:{write:!0}})],Vi.prototype,"field",void 0),b([S({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Vi.prototype,"fieldOffset",void 0),b([S({type:Dc,json:{write:!0}})],Vi.prototype,"legendOptions",void 0),b([S({type:Number,json:{write:!0}})],Vi.prototype,"maxDensity",void 0),b([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Vi.prototype,"maxPixelIntensity",null),b([S({type:Number,json:{write:!0}})],Vi.prototype,"minDensity",void 0),b([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Vi.prototype,"minPixelIntensity",null),b([S({type:Number,cast:Bt,json:{write:!0}})],Vi.prototype,"radius",void 0),b([S({type:Number,range:{min:0},json:{default:0,write:!0}})],Vi.prototype,"referenceScale",void 0),b([De({heatmap:"heatmap"})],Vi.prototype,"type",void 0),b([S({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Vi.prototype,"valueExpression",void 0),b([S({type:String})],Vi.prototype,"valueExpressionTitle",void 0),b([S({readOnly:!0})],Vi.prototype,"_pixelIntensityToDensity",null),Vi=f_=b([J(tL)],Vi);const iL=Vi;let oh=class extends Ii(ye){constructor(){super(...arguments),this.color=new et([0,0,0,0]),this.label=null,this.threshold=0}};b([S({type:et,json:{write:!0}})],oh.prototype,"color",void 0),b([S({type:String,json:{write:!0}})],oh.prototype,"label",void 0),b([S({type:Number,range:{min:0,max:1},json:{write:!0}})],oh.prototype,"threshold",void 0),oh=b([J("esri.renderers.support.OthersCategory")],oh);let wg=class extends Ii(ye){constructor(){super(...arguments),this.title=null}};b([S({type:String,json:{write:!0}})],wg.prototype,"title",void 0),wg=b([J("esri.renderers.support.PieChartLegendOptions")],wg);let Zr=class extends Bp(Ii(Ta)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new et([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new oh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new nu({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(ho)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const s of this.attributes)s.valueExpression&&await Pr(e,i,s.valueExpression),s.field&&e.add(s.field)}};b([S({type:[JN],json:{write:!0}})],Zr.prototype,"attributes",void 0),b([S({type:su,json:{default:null,write:!0}})],Zr.prototype,"backgroundFillSymbol",void 0),b([S({type:et,json:{write:!0}})],Zr.prototype,"defaultColor",void 0),b([S({type:String,json:{write:!0}})],Zr.prototype,"defaultLabel",void 0),b([S({type:Number,range:{min:0,max:1},json:{write:!0}})],Zr.prototype,"holePercentage",void 0),b([S({type:oh,json:{write:!0}})],Zr.prototype,"othersCategory",void 0),b([S({type:wg,json:{write:!0}})],Zr.prototype,"legendOptions",void 0),b([S({type:ps,json:{default:null,write:!0}})],Zr.prototype,"outline",void 0),b([S({type:Number,cast:Bt,json:{write:!0}})],Zr.prototype,"size",void 0),b([De({pieChart:"pie-chart"})],Zr.prototype,"type",void 0),Zr=b([J("esri.renderers.PieChartRenderer")],Zr);const Yle=Zr;var y_;let Yu=y_=class extends Bp(Ta){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new y_({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ae(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};b([S({type:String,json:{write:!0}})],Yu.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],Yu.prototype,"label",void 0),b([S(Hp)],Yu.prototype,"symbol",void 0),b([De({simple:"simple"})],Yu.prototype,"type",void 0),Yu=y_=b([J("esri.renderers.SimpleRenderer")],Yu);const rL=Yu,Zle=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function g_(t){return t instanceof je}function K8(t){return t instanceof Ge?Object.keys(t.items):g_(t)?qi(t).keys():t?Object.keys(t):[]}function uy(t,e){return t instanceof Ge?t.items[e]:t[e]}function Xle(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function qd(t){return t?t.declaredClass:null}function sL(t,e){var A;const i=t.diff;if(i&&typeof i=="function")return i(t,e);const s=K8(t),a=K8(e);if(s.length===0&&a.length===0)return;if(!s.length||!a.length||Xle(t,e))return{type:"complete",oldValue:t,newValue:e};const d=a.filter(C=>!s.includes(C)),y=s.filter(C=>!a.includes(C)),g=s.filter(C=>a.includes(C)&&uy(t,C)!==uy(e,C)).concat(d,y).sort(),_=qd(t);if(_&&Zle.includes(_)&&g.length)return{type:"complete",oldValue:t,newValue:e};let x;const I=g_(t)&&g_(e);for(const C of g){const N=uy(t,C),j=uy(e,C);let D;if((I||typeof N!="function"&&typeof j!="function")&&N!==j&&(N!=null||j!=null)){if(i&&i[C]&&typeof i[C]=="function")D=(A=i[C])==null?void 0:A.call(i,N,j);else if(N instanceof Date&&j instanceof Date){if(N.getTime()===j.getTime())continue;D={type:"complete",oldValue:N,newValue:j}}else D=typeof N=="object"&&typeof j=="object"&&qd(N)===qd(j)?sL(N,j):{type:"complete",oldValue:N,newValue:j};D!=null&&(x!=null?x.diff[C]=D:x={type:"partial",diff:{[C]:D}})}}return x}function Qle(t,e){if(t==null)return!1;const i=e.split(".");let s=t;for(const a of i){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const d=s.diff[a];if(!d)return!1;s=d}}return!0}function Qge(t,e){for(const i of e)if(Qle(t,i))return!0;return!1}function eue(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&qd(t)!==qd(e)?{type:"complete",oldValue:t,newValue:e}:sL(t,e)}let Fc=class extends Ii(ye){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};b([S(yg)],Fc.prototype,"value",void 0),b([S(yg)],Fc.prototype,"value2",void 0),b([S(yg)],Fc.prototype,"value3",void 0),Fc=b([J("esri.renderers.support.UniqueValue")],Fc);const hp=Fc;let yl=class extends Ii(ye){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(s=>new hp({value:s})):i==="object"?e[0]instanceof hp?e:e.map(s=>new hp(s)):null}};b([S({type:String,json:{write:!0}})],yl.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],yl.prototype,"label",void 0),b([S(Hp)],yl.prototype,"symbol",void 0),b([S({type:[hp],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new hp({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const s of t){const a=[s.value,s.value2,s.value3].filter(ho).map(d=>d.toString());i.push(a)}e.values=i}}}})],yl.prototype,"values",void 0),b([Ft("values")],yl.prototype,"castValues",null),yl=b([J("esri.renderers.support.UniqueValueClass")],yl);const nL=yl;let hd=class extends Ii(ye){constructor(e){super(e),this.heading=null,this.classes=null}};b([S({type:String,json:{write:!0}})],hd.prototype,"heading",void 0),b([S({type:[nL],json:{write:!0}})],hd.prototype,"classes",void 0),hd=b([J("esri.renderers.support.UniqueValueGroup")],hd);const m_=hd;var v_;let Zu=v_=class extends ye{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new v_({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};b([S({type:String,json:{write:!0}})],Zu.prototype,"description",void 0),b([S({type:String,json:{write:!0}})],Zu.prototype,"label",void 0),b([S(Hp)],Zu.prototype,"symbol",void 0),b([S(yg)],Zu.prototype,"value",void 0),Zu=v_=b([J("esri.renderers.support.UniqueValueInfo")],Zu);const Bd=Zu,tue=()=>!!le("enable-feature:force-wosr"),iue=()=>le.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),rue=()=>le.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),sue=()=>le.add("enable-i3s-patching",!0,!0,!0),nue=()=>le.add("enable-i3s-patching",!1,!0,!0),rme=()=>!!le("enable-feature:SceneLayer-editing"),oue=(t="i3s-patching")=>{switch(nue(),rue(),le.add("enable-feature:SceneLayer-editing",!0,!0,!0),t){case"feature-layer-view":iue();break;case"i3s-patching":sue()}};oue("i3s-patching");let Tb={};async function aue(t,e){try{return{data:(await cue(t,e)).data,baseUrl:YD(t),styleUrl:t}}catch(i){return wn(i),null}}function lue(t,e,i){const s=e.portal!=null?e.portal:ar.getDefault();let a;const d=`${s.url} - ${s.user&&s.user.username} - ${t}`;return Tb[d]||(Tb[d]=uue(t,s,i).then(y=>(a=y,y.fetchData())).then(y=>({data:y,baseUrl:a.itemUrl??"",styleName:t}))),Tb[d]}function uue(t,e,i){return e.load(i).then(()=>{const s=new uo({disableExtraQuery:!0,query:`owner:${Y8} AND type:${Z8} AND typekeywords:"${t}"`});return e.queryItems(s,i)}).then(({results:s})=>{var y;let a=null;const d=t.toLowerCase();if(s&&Array.isArray(s)){for(const g of s)if(((y=g.typeKeywords)==null?void 0:y.some(x=>x.toLowerCase()===d))&&g.type===Z8&&g.owner===Y8){a=g;break}}if(!a)throw new oe("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return a.load(i)})}function hue(t,e,i){return t&&t.styleUrl!=null?aue(t.styleUrl,i):t&&t.styleName!=null?lue(t.styleName,e,i):Promise.reject(new oe("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function sme(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function nme(t,e,i=["gltf"]){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!tue())for(const s of i){const a=t.formatInfos.find(d=>d.type===s);if(a)return a.href}return t.webRef}function cue(t,e){const i={responseType:"json",query:{f:"json"},...e};return pt(Tn(t),i)}const Y8="esri_en",Z8="Style",ome="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var cd;const oL="esri.renderers.UniqueValueRenderer",Ua=me.getLogger(oL),X8="uvInfos-watcher",Q8="uvGroups-watcher",pue=",",due=ui(Bd);function fue(t){const{field1:e,field2:i,field3:s,fieldDelimiter:a,uniqueValueInfos:d,valueExpression:y}=t,g=!(!e||!i);return[{classes:(d??[]).map(_=>{var W;const{symbol:x,label:I,value:A,description:C}=_,[N,j,D]=g?((W=A==null?void 0:A.toString())==null?void 0:W.split(a||""))||[]:[A],V=[];return(e||y)&&V.push(N),i&&V.push(j),s&&V.push(D),{symbol:x,label:I,values:[V],description:C}})}]}let ii=cd=class extends Bp(Ta){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let s=!1;const a={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let d=0;d<i.length;d++){const y=e.find(g=>g.value===i[d].value);y?eue(y,i[d])?(a.changed.push({type:"complete",oldValue:y,newValue:i[d]}),s=!0):a.unchanged.push({oldValue:y,newValue:i[d]}):(a.added.push(i[d]),s=!0)}for(let d=0;d<e.length;d++)i.find(y=>y.value===e[d].value)||(a.removed.push(e[d]),s=!0);return s?a:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:Mf(t)}writeField(t,e,i,s){typeof t=="string"?e[i]=t:s&&s.messages?s.messages.push(new oe("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ua.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||ar.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const s=Rp(e.styleUrl,i);return Object.freeze({styleUrl:s})}}writeStyleOrigin(t,e,i,s){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Df(t.styleUrl,s))}set uniqueValueGroups(t){this.styleOrigin?Ua.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?Ua.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var s;if(this.styleOrigin)return void Ua.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?due(t):new Bd({value:t,symbol:_A(e)}),(s=this.uniqueValueInfos)==null||s.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void Ua.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return!this.valueExpression||e!=null&&e.arcade!=null||(i={...i,arcade:await Ch()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(e==null||e.arcade==null))return void Ua.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(i==null||i.arcade==null)){const a=await Ch(),{arcadeUtils:d}=a;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:a}}const s=this._getUniqueValueInfo(t,i);return s&&s.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var s;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(s=this.uniqueValueInfos)==null?void 0:s.reduce((a,d)=>a+d.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new cd({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ae(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ae(this.visualVariables),legendOptions:ae(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ae(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=ae(this.uniqueValueInfos),i=ae(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(ae(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(t,e)),Pr(t,e,this.valueExpression)];hs(t,e,this.field),hs(t,e,this.field2),hs(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return hue(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(s=>{const a=new Hh({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:s.name});this.defaultSymbol||s.name!==t.data.defaultItem||(this.defaultSymbol=a,this._isDefaultSymbolDerived=!0);const d=new Bd({value:s.name,symbol:a});e.push(d),this._valueInfoMap[s.name]=d}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",pue)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(X8);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(Me(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(s,a)=>{s!==a&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,X8)}}_watchUniqueValueGroups(){this.removeHandles(Q8);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(Me(()=>({classes:i.classes}),(s,a)=>{s!==a&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const s of i.classes??[])e.push(Me(()=>({symbol:s.symbol,values:s.values,label:s.label,description:s.description}),(a,d)=>{a!==d&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,Q8)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:s,fieldDelimiter:a,uniqueValueGroups:d,valueExpression:y}=this;if(!e&&!y)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const g=!(!e||!i);for(const _ of d)for(const x of _.classes??[]){const{symbol:I,label:A,values:C,description:N}=x;for(const j of C??[]){const{value:D,value2:V,value3:W}=j,K=[D];i&&K.push(V),s&&K.push(W);const Y=g?K.join(a||""):K[0];t.push(new Bd({symbol:I,label:A,value:Y,description:N}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:s,fieldDelimiter:a,uniqueValueInfos:d}=this;if(!e&&!s||!d.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const y=!(!e||!i),g=d.map(x=>{var W;const{symbol:I,label:A,value:C,description:N}=x,[j,D,V]=y?((W=C==null?void 0:C.toString())==null?void 0:W.split(a||""))||[]:[C];return new nL({symbol:I,label:A,description:N,values:[new hp({value:j,value2:D,value3:V})]})}),_=[new m_({classes:g})];t&&Object.freeze(_),this._set("uniqueValueGroups",_),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:s,spatialReference:a,arcade:d}=e??{};let y=this._cache.compiledFunc;const g=d.arcadeUtils;if(!y){const x=g.createSyntaxTree(this.valueExpression);y=g.createFunction(x),this._cache.compiledFunc=y}const _=g.executeFunction(y,g.createExecContext(t,g.getViewInfo({viewingMode:i,scale:s,spatialReference:a})));return this._valueInfoMap[_+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let s;if(typeof e!="function"&&this.field2){const a=this.field2,d=this.field3,y=[];e&&y.push(i[e]),a&&y.push(i[a]),d&&y.push(i[d]),s=y.join(this.fieldDelimiter||"")}else typeof e=="function"?s=e(t):e&&(s=i[e]);return this._valueInfoMap[s+""]}static fromPortalStyle(t,e){const i=new cd(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||ar.getDefault());const s=i.populateFromStyle();return s.catch(a=>{Ua.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",a)}),s}static fromStyleUrl(t,e){const i=new cd(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const s=i.populateFromStyle();return s.catch(a=>{Ua.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",a)}),s}};b([S({readOnly:!0})],ii.prototype,"_cache",null),b([De({uniqueValue:"unique-value"})],ii.prototype,"type",void 0),b([S(GN)],ii.prototype,"backgroundFillSymbol",void 0),b([S({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ii.prototype,"field",null),b([Ft("field")],ii.prototype,"castField",null),b([ke("field")],ii.prototype,"writeField",null),b([S({type:String,value:null,json:{write:!0}})],ii.prototype,"field2",null),b([S({type:String,value:null,json:{write:!0}})],ii.prototype,"field3",null),b([S({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],ii.prototype,"orderByClassesEnabled",void 0),b([S({type:String,value:null,json:{write:!0}})],ii.prototype,"valueExpression",null),b([S({type:String,json:{write:!0}})],ii.prototype,"valueExpressionTitle",void 0),b([S({type:up,json:{write:!0}})],ii.prototype,"legendOptions",void 0),b([S({type:String,json:{write:!0}})],ii.prototype,"defaultLabel",void 0),b([S(H$({...Hp},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ii.prototype,"defaultSymbol",null),b([S({type:String,value:null,json:{write:!0}})],ii.prototype,"fieldDelimiter",null),b([S({type:ar,readOnly:!0})],ii.prototype,"portal",void 0),b([Ce("portal",["styleName"])],ii.prototype,"readPortal",null),b([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ii.prototype,"styleOrigin",void 0),b([Ce("styleOrigin",["styleName","styleUrl"])],ii.prototype,"readStyleOrigin",null),b([ke("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ii.prototype,"writeStyleOrigin",null),b([S({type:[m_],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||fue(e)).map(s=>m_.fromJSON(s,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ii.prototype,"uniqueValueGroups",null),b([S({type:[Bd],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ii.prototype,"uniqueValueInfos",null),ii=cd=b([J(oL)],ii);const aL=ii,lL={key:"type",base:Ta,typeMap:{heatmap:iL,simple:rL,"unique-value":aL,"class-breaks":qN,"dot-density":Ple,dictionary:Ole,"pie-chart":Yle},errorContext:"renderer"},yue={key:"type",base:Ta,typeMap:{simple:rL,"unique-value":aL,"class-breaks":qN,heatmap:iL},errorContext:"renderer"};function ame(t,e){return mue(t,null,e)}const gue=If({types:lL});function mue(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Cn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):gue(t,e,i):null}var b_;let pd=b_=class extends ye{constructor(t){super(t),this.name=null,this.code=null}clone(){return new b_({name:this.name,code:this.code})}};b([S({type:String,json:{write:!0}})],pd.prototype,"name",void 0),b([S({type:[String,Number],json:{write:!0}})],pd.prototype,"code",void 0),pd=b_=b([J("esri.layers.support.CodedValue")],pd);const vue=new Nt({inherited:"inherited",codedValue:"coded-value",range:"range"});let dd=class extends ye{constructor(e){super(e),this.name=null,this.type=null}};b([S({type:String,json:{write:!0}})],dd.prototype,"name",void 0),b([De(vue)],dd.prototype,"type",void 0),dd=b([J("esri.layers.support.Domain")],dd);const Wv=dd;var w_;let fd=w_=class extends Wv{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(s=>(String(s.code)===i&&(e=s.name),!!e))}return e}clone(){return new w_({codedValues:ae(this.codedValues),name:this.name})}};b([S({type:[pd],json:{write:!0}})],fd.prototype,"codedValues",void 0),b([De({codedValue:"coded-value"})],fd.prototype,"type",void 0),fd=w_=b([J("esri.layers.support.CodedValueDomain")],fd);const uL=fd;var __;let _g=__=class extends Wv{constructor(t){super(t),this.type="inherited"}clone(){return new __}};b([De({inherited:"inherited"})],_g.prototype,"type",void 0),_g=__=b([J("esri.layers.support.InheritedDomain")],_g);const hL=_g;var S_;let zc=S_=class extends Wv{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new S_({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};b([S({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],zc.prototype,"maxValue",void 0),b([S({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],zc.prototype,"minValue",void 0),b([De({range:"range"})],zc.prototype,"type",void 0),zc=S_=b([J("esri.layers.support.RangeDomain")],zc);const cL=zc,bue={key:"type",base:Wv,typeMap:{range:cL,"coded-value":uL,inherited:hL}};function pL(t){if(!t||!t.type)return null;switch(t.type){case"range":return cL.fromJSON(t);case"codedValue":return uL.fromJSON(t);case"inherited":return hL.fromJSON(t)}return null}const wue=new Nt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var x_;const _ue=new Nt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let br=x_=class extends ye{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?_ue.fromJSON(i.fieldValueType):null}clone(){return new x_({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};b([S({type:String,json:{write:!0}})],br.prototype,"alias",void 0),b([S({type:[String,Number],json:{write:{allowNull:!0}}})],br.prototype,"defaultValue",void 0),b([S()],br.prototype,"description",void 0),b([Ce("description")],br.prototype,"readDescription",null),b([S({types:bue,json:{read:{reader:pL},write:!0}})],br.prototype,"domain",void 0),b([S({type:Boolean,json:{write:!0}})],br.prototype,"editable",void 0),b([S({type:Pt,json:{write:!0}})],br.prototype,"length",void 0),b([S({type:String,json:{write:!0}})],br.prototype,"name",void 0),b([S({type:Boolean,json:{write:!0}})],br.prototype,"nullable",void 0),b([De(wue)],br.prototype,"type",void 0),b([S()],br.prototype,"valueType",void 0),b([Ce("valueType",["description"])],br.prototype,"readValueType",null),b([S({type:Boolean,json:{read:!1}})],br.prototype,"visible",void 0),br=x_=b([J("esri.layers.support.Field")],br);const p6=br;var $_;let sa=$_=class extends ye{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new $_({mapLayerId:t,gdbVersion:e})}};b([De({mapLayer:"map-layer"})],sa.prototype,"type",void 0),b([S({type:Pt,json:{write:!0}})],sa.prototype,"mapLayerId",void 0),b([S({type:String,json:{write:!0}})],sa.prototype,"gdbVersion",void 0),sa=$_=b([J("esri.layers.support.source.MapLayerSource")],sa);var T_;let Zo=T_=class extends ye{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:s,geometryType:a}=this,d={workspaceId:t,query:e,oidFields:i,spatialReference:(s==null?void 0:s.clone())??void 0,geometryType:a};return new T_(d)}};b([De({queryTable:"query-table"})],Zo.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Zo.prototype,"workspaceId",void 0),b([S({type:String,json:{write:!0}})],Zo.prototype,"query",void 0),b([S({type:String,json:{write:!0}})],Zo.prototype,"oidFields",void 0),b([S({type:Xe,json:{write:!0}})],Zo.prototype,"spatialReference",void 0),b([De(im)],Zo.prototype,"geometryType",void 0),Zo=T_=b([J("esri.layers.support.source.QueryTableDataSource")],Zo);var M_;let Vc=M_=class extends ye{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new M_({workspaceId:t,dataSourceName:e})}};b([De({raster:"raster"})],Vc.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Vc.prototype,"dataSourceName",void 0),b([S({type:String,json:{write:!0}})],Vc.prototype,"workspaceId",void 0),Vc=M_=b([J("esri.layers.support.source.RasterDataSource")],Vc);var I_;let Xu=I_=class extends ye{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new I_({workspaceId:t,gdbVersion:e,dataSourceName:i})}};b([De({table:"table"})],Xu.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Xu.prototype,"workspaceId",void 0),b([S({type:String,json:{write:!0}})],Xu.prototype,"gdbVersion",void 0),b([S({type:String,json:{write:!0}})],Xu.prototype,"dataSourceName",void 0),Xu=I_=b([J("esri.layers.support.source.TableDataSource")],Xu);var E_,A_;const Sue=$r()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Xr=E_=class extends ye{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return e$()(t,e,i)}castLeftTableSource(t){return pa(k_(),t)}readRightTableSource(t,e,i){return e$()(t,e,i)}castRightTableSource(t){return pa(k_(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:s,joinType:a}=this,d={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(s==null?void 0:s.clone())??void 0,joinType:a};return new E_(d)}};b([De({joinTable:"join-table"})],Xr.prototype,"type",void 0),b([S({type:String,json:{write:!0}})],Xr.prototype,"leftTableKey",void 0),b([S({type:String,json:{write:!0}})],Xr.prototype,"rightTableKey",void 0),b([S({json:{write:!0}})],Xr.prototype,"leftTableSource",void 0),b([Ce("leftTableSource")],Xr.prototype,"readLeftTableSource",null),b([Ft("leftTableSource")],Xr.prototype,"castLeftTableSource",null),b([S({json:{write:!0}})],Xr.prototype,"rightTableSource",void 0),b([Ce("rightTableSource")],Xr.prototype,"readRightTableSource",null),b([Ft("rightTableSource")],Xr.prototype,"castRightTableSource",null),b([De(Sue)],Xr.prototype,"joinType",void 0),Xr=E_=b([J("esri.layers.support.source.JoinTableDataSource")],Xr);let Mb=null;function e$(){return Mb||(Mb=If({types:k_()})),Mb}let Ib=null;function k_(){return Ib||(Ib={key:"type",base:null,typeMap:{"data-layer":ss,"map-layer":sa}}),Ib}const xue={key:"type",base:null,typeMap:{"join-table":Xr,"query-table":Zo,raster:Vc,table:Xu}};let ss=A_=class extends ye{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new A_({fields:t,dataSource:e})}};b([De({dataLayer:"data-layer"})],ss.prototype,"type",void 0),b([S({type:[p6],json:{write:!0}})],ss.prototype,"fields",void 0),b([S({types:xue,json:{write:!0}})],ss.prototype,"dataSource",void 0),ss=A_=b([J("esri.layers.support.source.DataLayerSource")],ss),ss.from=ui(ss);function dL(t){const e={};for(const i in t){if(i==="declaredClass")continue;const s=t[i];if(s!=null&&typeof s!="function")if(Array.isArray(s)){e[i]=[];for(let a=0;a<s.length;a++)e[i][a]=dL(s[a])}else typeof s=="object"?s.toJSON&&(e[i]=JSON.stringify(s)):e[i]=s}return e}var Ml;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(Ml||(Ml={}));const t$=4294967296,$ue=new TextDecoder("utf-8"),Tue=le("safari")||le("ios")?6:le("ff")?12:32;let O_=class Sg{constructor(e,i,s=0,a=e?e.byteLength:0){this._tag=0,this._dataType=Ml.unknown,this._init(e,i,s,a)}_init(e,i,s,a){this._data=e,this._dataView=i,this._pos=s,this._end=a}asUnsafe(){return this}clone(){return new Sg(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,s=e.getUint32(i,!0)+e.getUint32(i+4,!0)*t$;return this._skip(8),s}getSFixed64(){const e=this._dataView,i=this._pos,s=e.getUint32(i,!0)+e.getInt32(i+4,!0)*t$;return this._skip(8),s}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,s=this._toString(this._data,i,i+e);return this._skip(e),s}getBytes(){const e=this._getLength(),i=this._pos,s=this._toBytes(this._data,i,i+e);return this._skip(e),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,s,a){const d=this.getMessage(),y=e(d,i,s,a);return d.release(),y}processMessage(e){const i=this.getMessage(),s=e(i);return i.release(),s}getMessage(){const e=this._getLength(),i=Sg.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){Sg.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Ml.varint:this._decodeVarint();break;case Ml.fixed64:this._skip(8);break;case Ml.delimited:this._skip(this._getLength());break;case Ml.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,s=0,a=0;if(this._end-i>=10)do{if(a=e[i++],s|=127&a,(128&a)==0||(a=e[i++],s|=(127&a)<<7,(128&a)==0)||(a=e[i++],s|=(127&a)<<14,(128&a)==0)||(a=e[i++],s|=(127&a)<<21,(128&a)==0)||(a=e[i++],s+=268435456*(127&a),(128&a)==0)||(a=e[i++],s+=34359738368*(127&a),(128&a)==0)||(a=e[i++],s+=4398046511104*(127&a),(128&a)==0)||(a=e[i++],s+=562949953421312*(127&a),(128&a)==0)||(a=e[i++],s+=72057594037927940*(127&a),(128&a)==0)||(a=e[i++],s+=9223372036854776e3*(127&a),(128&a)==0))break;throw new Error("Varint too long!")}while(0);else{let d=1;for(;i!==this._end&&(a=e[i],(128&a)!=0);)++i,s+=(127&a)*d,d*=128;if(i===this._end)throw new Error("Varint overrun!");++i,s+=a*d}return this._pos=i,s}_decodeSVarint(){const e=this._data;let i=this._pos,s=0,a=0;const d=1&e[i];if(this._end-i>=10)do{if(a=e[i++],s|=127&a,(128&a)==0||(a=e[i++],s|=(127&a)<<7,(128&a)==0)||(a=e[i++],s|=(127&a)<<14,(128&a)==0)||(a=e[i++],s|=(127&a)<<21,(128&a)==0)||(a=e[i++],s+=268435456*(127&a),(128&a)==0)||(a=e[i++],s+=34359738368*(127&a),(128&a)==0)||(a=e[i++],s+=4398046511104*(127&a),(128&a)==0)||(a=e[i++],s+=562949953421312*(127&a),(128&a)==0)||(a=e[i++],s+=72057594037927940*(127&a),(128&a)==0)||(a=e[i++],s+=9223372036854776e3*(127&a),(128&a)==0))break;throw new Error("Varint too long!")}while(0);else{let y=1;for(;i!==this._end&&(a=e[i],(128&a)!=0);)++i,s+=(127&a)*y,y*=128;if(i===this._end)throw new Error("Varint overrun!");++i,s+=a*y}return this._pos=i,d?-(s+1)/2:s/2}_getLength(){if(this._dataType!==Ml.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,s){if((s=Math.min(this._end,s))-i>Tue){const y=e.subarray(i,s);return $ue.decode(y)}let a="",d="";for(let y=i;y<s;++y){const g=e[y];128&g?d+="%"+g.toString(16):(a+=decodeURIComponent(d)+String.fromCharCode(g),d="")}return d.length&&(a+=decodeURIComponent(d)),a}_toBytes(e,i,s){return s=Math.min(this._end,s),new Uint8Array(e.buffer,i,s-i)}};O_.pool=new eu(O_,void 0,t=>{t._data=null,t._dataView=null});let Rn=class xg{constructor(e=[],i=[],s=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=s}static fromRect(e){const[i,s,a,d]=e,y=a-i,g=d-s;return new xg([5],[i,s,y,0,0,g,-y,0,0,-g])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let s=0;s<this.lengths.length;s++){const a=this.lengths[s];for(let d=0;d<a;d++)e(this.coords[2*(d+i)],this.coords[2*(d+i)+1]);i+=a}}clone(e){return e?(e.set(this.coords),new xg(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new xg(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},Ql=class fL{constructor(e=null,i={},s,a){this.geometry=e,this.attributes=i,this.centroid=s,this.objectId=a,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new fL(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function Mue(t){return!(t.geometry==null||!t.geometry.coords||!t.geometry.coords.length)}let ume=class extends Ql{},yL=class gL{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new gL;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const mL=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let cme=class{constructor(e){this._options=e,this.geometryTypes=mL,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new yL}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||Ri(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=Hg(this._options.sourceSpatialReference)/Hg(e.spatialReference);if(i!==1)for(const s of e.features){if(!Mue(s))continue;const a=s.geometry.coords;for(let d=2;d<a.length;d+=3)a[d]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new Ql}createSpatialReference(){return{wkid:0}}createGeometry(){return new Rn}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,s)=>i+s,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Rn}};const i$=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],r$=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],s$=["upperLeft","lowerLeft"];function n$(t){return t>=i$.length?null:i$[t]}function Iue(t){return t>=r$.length?null:r$[t]}function o$(t){return t>=s$.length?null:s$[t]}function a$(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Eue(t,e,i){const a=t.asUnsafe(),d=e.createPointGeometry(i);for(;a.next();)switch(a.tag()){case 3:{const y=a.getUInt32(),g=a.pos()+y;let _=0;for(;a.pos()<g;)e.addCoordinatePoint(d,a.getSInt64(),_++);break}default:a.skip()}return d}function Aue(t,e,i){const d=t.asUnsafe(),y=e.createGeometry(i),g=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;d.next();)switch(d.tag()){case 2:{const _=d.getUInt32(),x=d.pos()+_;let I=0;for(;d.pos()<x;)e.addLength(y,d.getUInt32(),I++);break}case 3:{const _=d.getUInt32(),x=d.pos()+_;let I=0;for(e.allocateCoordinates(y);d.pos()<x;)e.addCoordinate(y,d.getSInt64(),I),I++,I===g&&(I=0);break}default:d.skip()}return y}function kue(t){const a=t.asUnsafe(),d=new Rn;let y="esriGeometryPoint";for(;a.next();)switch(a.tag()){case 2:{const g=a.getUInt32(),_=a.pos()+g;for(;a.pos()<_;)d.lengths.push(a.getUInt32());break}case 3:{const g=a.getUInt32(),_=a.pos()+g;for(;a.pos()<_;)d.coords.push(a.getSInt64());break}case 1:y=mL[a.getEnum()];break;default:a.skip()}return{queryGeometry:d,queryGeometryType:y}}function Oue(t){const I=t.asUnsafe();for(;I.next();)switch(I.tag()){case 1:return I.getString();case 2:return I.getFloat();case 3:return I.getDouble();case 4:return I.getSInt32();case 5:return I.getUInt32();case 6:return I.getInt64();case 7:return I.getUInt64();case 8:return I.getSInt64();case 9:return I.getBool();default:return I.skip(),null}return null}function Cue(t){const g=t.asUnsafe(),_={type:n$(0)};for(;g.next();)switch(g.tag()){case 1:_.name=g.getString();break;case 2:_.type=n$(g.getEnum());break;case 3:_.alias=g.getString();break;case 4:_.sqlType=Iue(g.getEnum());break;case 5:g.skip();break;case 6:_.defaultValue=g.getString();break;default:g.skip()}return _}function Pue(t){const s={},a=t.asUnsafe();for(;a.next();)switch(a.tag()){case 1:s.name=a.getString();break;case 2:s.isSystemMaintained=a.getBool();break;default:a.skip()}return s}function Nue(t,e,i,s){const g=e.createFeature(i);let _=0;for(;t.next();)switch(t.tag()){case 1:{const x=s[_++].name;g.attributes[x]=t.processMessage(Oue);break}case 2:g.geometry=t.processMessageWithArgs(Aue,e,i);break;case 4:g.centroid=t.processMessageWithArgs(Eue,e,i);break;default:t.skip()}return g}function Lue(t){const d=[1,1,1,1],y=t.asUnsafe();for(;y.next();)switch(y.tag()){case 1:d[0]=y.getDouble();break;case 2:d[1]=y.getDouble();break;case 4:d[2]=y.getDouble();break;case 3:d[3]=y.getDouble();break;default:y.skip()}return d}function Rue(t){const d=[0,0,0,0],y=t.asUnsafe();for(;y.next();)switch(y.tag()){case 1:d[0]=y.getDouble();break;case 2:d[1]=y.getDouble();break;case 4:d[2]=y.getDouble();break;case 3:d[3]=y.getDouble();break;default:y.skip()}return d}function jue(t){const a={originPosition:o$(0)},d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:a.originPosition=o$(d.getEnum());break;case 2:a.scale=d.processMessage(Lue);break;case 3:a.translate=d.processMessage(Rue);break;default:d.skip()}return a}function Due(t){const a={},d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:a.shapeAreaFieldName=d.getString();break;case 2:a.shapeLengthFieldName=d.getString();break;case 3:a.units=d.getString();break;default:d.skip()}return a}function Fue(t,e){const g=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:g.wkid=t.getUInt32();break;case 5:g.wkt=t.getString();break;case 2:g.latestWkid=t.getUInt32();break;case 3:g.vcsWkid=t.getUInt32();break;case 4:g.latestVcsWkid=t.getUInt32();break;default:t.skip()}return g}function zue(t,e){const D=e.createFeatureResult(),V=t.asUnsafe();D.geometryType=a$(e,0);let W=!1;for(;V.next();)switch(V.tag()){case 1:D.objectIdFieldName=V.getString();break;case 3:D.globalIdFieldName=V.getString();break;case 4:D.geohashFieldName=V.getString();break;case 5:D.geometryProperties=V.processMessage(Due);break;case 7:D.geometryType=a$(e,V.getEnum());break;case 8:D.spatialReference=V.processMessageWithArgs(Fue,e);break;case 10:D.hasZ=V.getBool();break;case 11:D.hasM=V.getBool();break;case 12:D.transform=V.processMessage(jue);break;case 9:{const K=V.getBool();D.exceededTransferLimit=K;break}case 13:e.addField(D,V.processMessage(Cue));break;case 15:W||(e.prepareFeatures(D),W=!0),e.addFeature(D,V.processMessageWithArgs(Nue,e,D,D.fields));break;case 2:D.uniqueIdField=V.processMessage(Pue);break;default:V.skip()}return e.finishFeatureResult(D),D}function Vue(t,e){const a={};let d=null;for(;t.next();)switch(t.tag()){case 4:d=t.processMessageWithArgs(kue);break;case 1:a.featureResult=t.processMessageWithArgs(zue,e);break;default:t.skip()}return d!=null&&a.featureResult&&e.addQueryGeometry(a,d),a}function Gue(t,e){try{const s=new O_(new Uint8Array(t),new DataView(t)),a={};for(;s.next();)s.tag()===2?a.queryResult=s.processMessageWithArgs(Vue,e):s.skip();return a}catch(i){throw new oe("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Uue(t,e){const i=Gue(t,e),s=i.queryResult.featureResult,a=i.queryResult.queryGeometry,d=i.queryResult.queryGeometryType;if(s&&s.features&&s.features.length&&s.objectIdFieldName){const y=s.objectIdFieldName;for(const g of s.features)g.attributes&&(g.objectId=g.attributes[y])}return s&&(s.queryGeometry=a,s.queryGeometryType=d),s}function que(t,e,i){if(!i||!i.features||!i.hasZ)return;const s=m4(i.geometryType,e,t.outSpatialReference);if(s!=null)for(const a of i.features)s(a.geometry)}const l$="Layer does not support extent calculation.";function Bue(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function Hue(t,e){const i=t.geometry,s=t.toJSON();delete s.compactGeometryEnabled,delete s.defaultSpatialReferenceEnabled;const a=s;let d,y,g;if(i!=null&&(y=i.spatialReference,g=i.spatialReference.wkid||JSON.stringify(i.spatialReference),a.geometryType=Gh(i),a.geometry=Bue(i,t.compactGeometryEnabled),a.inSR=g),s.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=s.groupByFieldsForStatistics.join(",")),s.objectIds&&(a.objectIds=s.objectIds.join(",")),s.orderByFields&&(a.orderByFields=s.orderByFields.join(",")),!s.outFields||!s.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete a.outFields:s.outFields.includes("*")?a.outFields="*":a.outFields=s.outFields.join(","),s.outSR?(a.outSR=s.outSR.wkid||JSON.stringify(s.outSR),d=t.outSpatialReference):i&&(s.returnGeometry||s.returnCentroid)&&(a.outSR=a.inSR,d=y),s.returnGeometry&&delete s.returnGeometry,s.outStatistics&&(a.outStatistics=JSON.stringify(s.outStatistics)),s.fullText&&(a.fullText=JSON.stringify(s.fullText)),s.pixelSize&&(a.pixelSize=JSON.stringify(s.pixelSize)),s.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&y!=null&&t.quantizationParameters!=null&&t.quantizationParameters.extent!=null&&y.equals(t.quantizationParameters.extent.spatialReference)&&delete s.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(s.quantizationParameters)),s.parameterValues&&(a.parameterValues=JSON.stringify(s.parameterValues)),s.rangeValues&&(a.rangeValues=JSON.stringify(s.rangeValues)),s.dynamicDataSource&&(a.layer=JSON.stringify({source:s.dynamicDataSource}),delete s.dynamicDataSource),s.timeExtent){const _=s.timeExtent,{start:x,end:I}=_;x==null&&I==null||(a.time=x===I?x:`${x??"null"},${I??"null"}`),delete s.timeExtent}return t.defaultSpatialReferenceEnabled&&y!=null&&d!=null&&y.equals(d)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function Wue(t,e,i,s){const a=e.timeExtent!=null&&e.timeExtent.isEmpty?{data:{features:[]}}:await Qf(t,e,"json",s);return que(e,i,a.data),a}async function Jue(t,e,i,s){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const a=await Kue(t,e,s),d=a;return d.data=Uue(a.data,i),d}function Kue(t,e,i){return Qf(t,e,"pbf",i)}function Yue(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Qf(t,e,"json",i,{returnIdsOnly:!0})}function Zue(t,e,i){return e.timeExtent!=null&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Qf(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function Xue(t,e,i){if(e.timeExtent!=null&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const s=await Qf(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),a=s.data;if(a.hasOwnProperty("extent"))return s;if(a.features)throw new Error(l$);if(a.hasOwnProperty("count"))throw new Error(l$);return s}async function Qf(t,e,i,s={},a={}){const d=typeof t=="string"?ur(t):t,y=e.geometry?[e.geometry]:[];s.responseType=i==="pbf"?"array-buffer":"json";const g=await J4(y,null,s),_=g&&g[0];_!=null&&((e=e.clone()).geometry=_);const x=dL({...d.query,f:i,...a,...Hue(e,a)});return pt(Th(d.path,Que(e,a)?"query3d":"query"),{...s,query:{...x,...s.query}})}function Que(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}var C_;const u$=new Nt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let fn=C_=class extends ye{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=ae(t))}clone(){return new C_({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ae(this.statisticParameters)})}};b([S({type:Number,json:{write:!0}})],fn.prototype,"maxPointCount",void 0),b([S({type:Number,json:{write:!0}})],fn.prototype,"maxRecordCount",void 0),b([S({type:Number,json:{write:!0}})],fn.prototype,"maxVertexCount",void 0),b([S({type:String,json:{write:!0}})],fn.prototype,"onStatisticField",void 0),b([S({type:String,json:{write:!0}})],fn.prototype,"outStatisticFieldName",void 0),b([S({type:String,json:{read:{source:"statisticType",reader:u$.read},write:{target:"statisticType",writer:u$.write}}})],fn.prototype,"statisticType",void 0),b([S({type:Object})],fn.prototype,"statisticParameters",void 0),b([ke("statisticParameters")],fn.prototype,"writeStatisticParameters",null),fn=C_=b([J("esri.rest.support.StatisticDefinition")],fn);const ehe=fn;var cp;const the=new Nt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),ihe=new Nt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ve=cp=class extends ye{static from(t){return xh(cp,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const s in t){const a=t[s];Array.isArray(a)?i[s]=a.map(d=>d instanceof Date?d.getTime():d):a instanceof Date?i[s]=a.getTime():i[s]=a}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new cp(ae({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ve.MAX_MAX_RECORD_COUNT_FACTOR=5,b([S({json:{write:!0}})],Ve.prototype,"aggregateIds",void 0),b([S({type:Boolean,json:{write:!0}})],Ve.prototype,"cacheHint",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"compactGeometryEnabled",void 0),b([S({json:{write:!0}})],Ve.prototype,"datumTransformation",void 0),b([Ft("datumTransformation")],Ve.prototype,"castDatumTransformation",null),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"defaultSpatialReferenceEnabled",void 0),b([S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ve.prototype,"distance",void 0),b([S({type:ss,json:{write:!0}})],Ve.prototype,"dynamicDataSource",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"formatOf3DObjects",void 0),b([S({type:[IP],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Ve.prototype,"fullText",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"gdbVersion",void 0),b([S({types:kp,json:{read:Hl,write:!0}})],Ve.prototype,"geometry",void 0),b([S({type:Number,json:{write:!0}})],Ve.prototype,"geometryPrecision",void 0),b([S({type:[String],json:{write:!0}})],Ve.prototype,"groupByFieldsForStatistics",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"having",void 0),b([S({type:Date})],Ve.prototype,"historicMoment",void 0),b([ke("historicMoment")],Ve.prototype,"writeHistoricMoment",null),b([S({type:Number,json:{write:!0}})],Ve.prototype,"maxAllowableOffset",void 0),b([S({type:Number,cast:t=>t<1?1:t>cp.MAX_MAX_RECORD_COUNT_FACTOR?cp.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Ve.prototype,"maxRecordCountFactor",void 0),b([S({type:["xyFootprint"],json:{write:!0}})],Ve.prototype,"multipatchOption",void 0),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Ve.prototype,"num",void 0),b([S({json:{write:!0}})],Ve.prototype,"objectIds",void 0),b([S({type:[String],json:{write:!0}})],Ve.prototype,"orderByFields",void 0),b([S({type:[String],json:{write:!0}})],Ve.prototype,"outFields",void 0),b([S({type:Xe,json:{name:"outSR",write:!0}})],Ve.prototype,"outSpatialReference",void 0),b([S({type:[ehe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Ve.prototype,"outStatistics",void 0),b([S({json:{write:!0}})],Ve.prototype,"parameterValues",void 0),b([ke("parameterValues")],Ve.prototype,"writeParameterValues",null),b([S({type:Ue,json:{write:!0}})],Ve.prototype,"pixelSize",void 0),b([S({type:VO,json:{write:!0}})],Ve.prototype,"quantizationParameters",void 0),b([S({type:[Object],json:{write:!0}})],Ve.prototype,"rangeValues",void 0),b([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ve.prototype,"relationParameter",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"resultType",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnCentroid",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnDistinctValues",void 0),b([S({type:Boolean,json:{default:!0,write:!0}})],Ve.prototype,"returnExceededLimitFeatures",void 0),b([S({type:Boolean,json:{write:!0}})],Ve.prototype,"returnGeometry",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnQueryGeometry",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"returnM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ve.prototype,"returnZ",void 0),b([S({type:Xe,json:{write:!0}})],Ve.prototype,"sourceSpatialReference",void 0),b([De(the,{ignoreUnknown:!1,name:"spatialRel"})],Ve.prototype,"spatialRelationship",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],Ve.prototype,"start",void 0),b([ke("start"),ke("num")],Ve.prototype,"writeStart",null),b([S({type:String,json:{write:!0}})],Ve.prototype,"sqlFormat",void 0),b([S({type:String,json:{write:!0}})],Ve.prototype,"text",void 0),b([S({type:xo,json:{write:!0}})],Ve.prototype,"timeExtent",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ve.prototype,"timeReferenceUnknownClient",void 0),b([De(ihe,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],Ve.prototype,"units",void 0),b([S({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Ve.prototype,"where",void 0),b([ke("where")],Ve.prototype,"writeWhere",null),Ve=cp=b([J("esri.rest.support.Query")],Ve);const Yh=Ve;async function rhe(t,e,i){const s=ds(t);return Zue(s,Yh.from(e),{...i}).then(a=>a.data.count)}async function she(t,e,i){const s=ds(t);return Xue(s,Yh.from(e),{...i}).then(a=>({count:a.data.count,extent:bt.fromJSON(a.data.extent)}))}async function nhe(t,e,i){const s=ds(t);return Yue(s,Yh.from(e),{...i}).then(a=>a.data.objectIds)}var P_;const N_=new Nt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ji=P_=class extends ye{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){const i=Xe.fromJSON(e.spatialReference),s=[];for(let a=0;a<t.length;a++){const d=t[a],y=Nr.fromJSON(d),g=d.geometry&&d.geometry.spatialReference;y.geometry==null||g||(y.geometry.spatialReference=i);const _=d.aggregateGeometries,x=y.aggregateGeometries;if(_&&x!=null)for(const I in x){const A=x[I],C=_[I],N=C==null?void 0:C.spatialReference;A==null||N||(A.spatialReference=i)}s.push(y)}return s}writeGeometryType(t,e,i,s){if(t)return void N_.write(t,e,i,s);const{features:a}=this;if(a){for(const d of a)if(d&&d.geometry!=null)return void N_.write(d.geometry.type,e,i,s)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,s=Hl(t);return s&&!i&&e.spatialReference&&(s.spatialReference=Xe.fromJSON(e.spatialReference)),s}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const s of i)if(s&&s.geometry!=null&&s.geometry.spatialReference)return void(e.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new P_(this.cloneProperties())}cloneProperties(){return ae({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const s=e.features[i];if(s.geometry){const a=t&&t[i];s.geometry=a&&a.toJSON()||s.geometry}}return e}quantize(t){const{scale:[e,i],translate:[s,a]}=t,d=x=>Math.round((x-s)/e),y=x=>Math.round((a-x)/i),g=this.features,_=this._getQuantizationFunction(this.geometryType,d,y);for(let x=0,I=g.length;x<I;x++)_!=null&&_(g[x].geometry)||(g.splice(x,1),x--,I--);return this.transform=t,this}unquantize(){var C,N;const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[s,a],scale:[d,y]}=i,g=j=>j*d+s,_=j=>a-j*y;let x=null,I=null;if(this.hasZ&&((C=i==null?void 0:i.scale)==null?void 0:C[2])!=null){const{translate:[,,j],scale:[,,D]}=i;x=V=>V*D+j}if(this.hasM&&((N=i==null?void 0:i.scale)==null?void 0:N[3])!=null){const{translate:[,,,j],scale:[,,,D]}=i;I=V=>V==null?V:V*D+j}const A=this._getHydrationFunction(t,g,_,x,I);for(const{geometry:j}of e)j!=null&&A&&A(j);return this.transform=null,this}_quantizePoints(t,e,i){let s,a;const d=[];for(let y=0,g=t.length;y<g;y++){const _=t[y];if(y>0){const x=e(_[0]),I=i(_[1]);x===s&&I===a||(d.push([x-s,I-a]),s=x,a=I)}else s=e(_[0]),a=i(_[1]),d.push([s,a])}return d.length>0?d:null}_getQuantizationFunction(t,e,i){return t==="point"?s=>(s.x=e(s.x),s.y=i(s.y),s):t==="polyline"||t==="polygon"?s=>{const a=gh(s)?s.rings:s.paths,d=[];for(let y=0,g=a.length;y<g;y++){const _=a[y],x=this._quantizePoints(_,e,i);x&&d.push(x)}return d.length>0?(gh(s)?s.rings=d:s.paths=d,s):null}:t==="multipoint"?s=>{const a=this._quantizePoints(s.points,e,i);return a&&a.length>0?(s.points=a,s):null}:t==="extent"?s=>s:null}_getHydrationFunction(t,e,i,s,a){return t==="point"?d=>{d.x=e(d.x),d.y=i(d.y),s&&(d.z=s(d.z))}:t==="polyline"||t==="polygon"?d=>{const y=gh(d)?d.rings:d.paths;let g,_;for(let x=0,I=y.length;x<I;x++){const A=y[x];for(let C=0,N=A.length;C<N;C++){const j=A[C];C>0?(g+=j[0],_+=j[1]):(g=j[0],_=j[1]),j[0]=e(g),j[1]=i(_)}}if(s&&a)for(let x=0,I=y.length;x<I;x++){const A=y[x];for(let C=0,N=A.length;C<N;C++){const j=A[C];j[2]=s(j[2]),j[3]=a(j[3])}}else if(s)for(let x=0,I=y.length;x<I;x++){const A=y[x];for(let C=0,N=A.length;C<N;C++){const j=A[C];j[2]=s(j[2])}}else if(a)for(let x=0,I=y.length;x<I;x++){const A=y[x];for(let C=0,N=A.length;C<N;C++){const j=A[C];j[2]=a(j[2])}}}:t==="extent"?d=>{d.xmin=e(d.xmin),d.ymin=i(d.ymin),d.xmax=e(d.xmax),d.ymax=i(d.ymax),s&&d.zmax!=null&&d.zmin!=null&&(d.zmax=s(d.zmax),d.zmin=s(d.zmin)),a&&d.mmax!=null&&d.mmin!=null&&(d.mmax=a(d.mmax),d.mmin=a(d.mmin))}:t==="multipoint"?d=>{const y=d.points;let g,_;for(let x=0,I=y.length;x<I;x++){const A=y[x];x>0?(g+=A[0],_+=A[1]):(g=A[0],_=A[1]),A[0]=e(g),A[1]=i(_)}if(s&&a)for(let x=0,I=y.length;x<I;x++){const A=y[x];A[2]=s(A[2]),A[3]=a(A[3])}else if(s)for(let x=0,I=y.length;x<I;x++){const A=y[x];A[2]=s(A[2])}else if(a)for(let x=0,I=y.length;x<I;x++){const A=y[x];A[2]=a(A[2])}}:null}};b([S({type:String,json:{write:!0}})],Ji.prototype,"displayFieldName",void 0),b([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ji.prototype,"exceededTransferLimit",void 0),b([S({type:[Nr],json:{write:!0}})],Ji.prototype,"features",void 0),b([Ce("features")],Ji.prototype,"readFeatures",null),b([S({type:[p6],json:{write:!0}})],Ji.prototype,"fields",void 0),b([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:N_.read}}})],Ji.prototype,"geometryType",void 0),b([ke("geometryType")],Ji.prototype,"writeGeometryType",null),b([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ji.prototype,"hasM",void 0),b([S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ji.prototype,"hasZ",void 0),b([S({types:kp,json:{write:!0}})],Ji.prototype,"queryGeometry",void 0),b([Ce("queryGeometry")],Ji.prototype,"readQueryGeometry",null),b([S({type:Xe,json:{write:!0}})],Ji.prototype,"spatialReference",void 0),b([ke("spatialReference")],Ji.prototype,"writeSpatialReference",null),b([S({json:{write:!0}})],Ji.prototype,"transform",void 0),Ji=P_=b([J("esri.rest.support.FeatureSet")],Ji),Ji.prototype.toJSON.isDefaultToJSON=!0;const vL=Ji;async function dme(t,e,i){const s=await bL(t,e,i);return vL.fromJSON(s)}async function bL(t,e,i){const s=ds(t),a={...i},d=Yh.from(e),{data:y}=await Wue(s,d,d.sourceSpatialReference,a);return y}function lr(t,e){return t?e?4:3:e?3:2}const Jp=me.getLogger("esri.layers.graphics.featureConversionUtils"),wL={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},ohe=(t,e,i,s,a,d)=>{t[i]=a,t[i+1]=d},h$=(t,e,i,s,a,d)=>{t[i]=a,t[i+1]=d,t[i+2]=e[s+2]},ahe=(t,e,i,s,a,d)=>{t[i]=a,t[i+1]=d,t[i+2]=e[s+3]},lhe=(t,e,i,s,a,d)=>{t[i]=a,t[i+1]=d,t[i+2]=e[s+2],t[i+3]=e[s+3]};function d6(t,e,i,s){if(t){if(i)return e&&s?lhe:h$;if(e&&s)return ahe}else if(e&&s)return h$;return ohe}function Eb({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function Ab({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function kb({scale:t,translate:e},i,s){return i*t[s]+e[s]}function fme(t,e,i){return t?e?i?g6(t):f6(t):i?y6(t):Jv(t):null}function Jv(t){const e=t.coords;return{x:e[0],y:e[1]}}function _L(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function f6(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function uhe(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function y6(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function hhe(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function g6(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function che(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function phe(t,e,i,s){let a=Jv;i&&s?a=g6:i?a=f6:s&&(a=y6);for(const d of e){const{geometry:y,attributes:g}=d,_=y!=null?a(y):null;t.push({attributes:g,geometry:_})}return t}function m6(t,e){return t&&e?che:t?uhe:e?hhe:_L}function SL(t,e,i,s,a){const d=m6(i,s);for(const{geometry:y,attributes:g}of e){const _=y!=null?d(new Rn,y):null;t.push(new Ql(_,g,null,a?g[a]:void 0))}return t}function yme(t,e,i=m6(e.z!=null,e.m!=null)){return i(t,e)}function dhe(t,e,i,s){for(const{geometry:a,attributes:d}of e)t.push({attributes:d,geometry:a!=null?xL(a,i,s):null});return t}function xL(t,e,i){if(t==null)return null;const s=lr(e,i),a=[];for(let d=0;d<t.coords.length;d+=s){const y=[];for(let g=0;g<s;g++)y.push(t.coords[d+g]);a.push(y)}return e?i?{points:a,hasZ:e,hasM:i}:{points:a,hasZ:e}:i?{points:a,hasM:i}:{points:a}}function $L(t,e,i,s,a){const d=lr(i,s);for(const{geometry:y,attributes:g}of e){const _=y!=null?TL(new Rn,y,d):null;t.push(new Ql(_,g,null,a?g[a]:void 0))}return t}function TL(t,e,i=lr(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const s=t.coords;let a=0;for(const d of e.points)for(let y=0;y<i;y++)s[a++]=d[y];return t}function fhe(t,e,i,s){for(const{geometry:a,attributes:d}of e)t.push({attributes:d,geometry:a!=null?ML(a,i,s):null});return t}function ML(t,e,i){if(!t)return null;const s=lr(e,i),{coords:a,lengths:d}=t,y=[];let g=0;for(const _ of d){const x=[];for(let I=0;I<_;I++){const A=[];for(let C=0;C<s;C++)A.push(a[g++]);x.push(A)}y.push(x)}return e?i?{paths:y,hasZ:e,hasM:i}:{paths:y,hasZ:e}:i?{paths:y,hasM:i}:{paths:y}}function IL(t,e,i,s,a){const d=lr(i,s);for(const{geometry:y,attributes:g}of e){const _=y!=null?EL(new Rn,y,d):null;t.push(new Ql(_,g,null,a?g[a]:void 0))}return t}function EL(t,e,i=lr(e.hasZ,e.hasM)){const{lengths:s,coords:a}=t;let d=0;for(const y of e.paths){for(const g of y)for(let _=0;_<i;_++)a[d++]=g[_];s.push(y.length)}return t}function yhe(t,e,i,s){for(const{geometry:a,attributes:d,centroid:y}of e){const g=a!=null?AL(a,i,s):null;if(y!=null){const _=Jv(y);t.push({attributes:d,centroid:_,geometry:g})}else t.push({attributes:d,geometry:g})}return t}function AL(t,e,i){if(!t)return null;const s=lr(e,i),{coords:a,lengths:d}=t,y=[];let g=0;for(const _ of d){const x=[];for(let I=0;I<_;I++){const A=[];for(let C=0;C<s;C++)A.push(a[g++]);x.push(A)}y.push(x)}return e?i?{rings:y,hasZ:e,hasM:i}:{rings:y,hasZ:e}:i?{rings:y,hasM:i}:{rings:y}}function kL(t,e,i,s,a){for(const{geometry:d,centroid:y,attributes:g}of e){const _=d!=null?OL(new Rn,d,i,s):null,x=a?g[a]:void 0;y!=null?t.push(new Ql(_,g,_L(new Rn,y),x)):t.push(new Ql(_,g,null,x))}return t}function OL(t,e,i=e.hasZ,s=e.hasM){return ghe(t,e.rings,i,s)}function ghe(t,e,i,s){const a=lr(i,s),{lengths:d,coords:y}=t;let g=0;ha(t);for(const _ of e){for(const x of _)for(let I=0;I<a;I++)y[g++]=x[I];d.push(_.length)}return t}const pp=[],Hd=[];function gme(t,e,i,s,a){pp[0]=t;const[d]=CL(Hd,pp,e,i,s,a);return jn(pp),jn(Hd),d}function CL(t,e,i,s,a,d){if(jn(t),!i){for(const y of e){const g=d?y.attributes[d]:void 0;t.push(new Ql(null,y.attributes,null,g))}return t}switch(i){case"esriGeometryPoint":return SL(t,e,s,a,d);case"esriGeometryMultipoint":return $L(t,e,s,a,d);case"esriGeometryPolyline":return IL(t,e,s,a,d);case"esriGeometryPolygon":return kL(t,e,s,a,d);default:Jp.error("convertToFeatureSet:unknown-geometry",new oe(`Unable to parse unknown geometry type '${i}'`)),jn(t)}return t}function mme(t,e,i,s,a,d){const y=t.length;switch(i){case"esriGeometryPoint":SL(t,e,s,a,d);break;case"esriGeometryMultipoint":$L(t,e,s,a,d);break;case"esriGeometryPolyline":IL(t,e,s,a,d);break;case"esriGeometryPolygon":kL(t,e,s,a,d);break;default:Jp.error("convertToFeatureSet:unknown-geometry",new oe(`Unable to parse unknown geometry type '${i}'`))}for(let g=0;g<e.length;g++)t[g+y].geometryType=i,t[g+y].insertAfter=e[g].insertAfter,t[g+y].groupId=e[g].groupId;return t}function vme(t,e,i,s){Hd[0]=t,NL(pp,Hd,e,i,s);const a=pp[0];return jn(pp),jn(Hd),a}function bme(t,e,i){if(t==null)return null;const s=new Rn;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),F5(t)?m6(e??t.z!=null,i??t.m!=null)(s,t):gh(t)?OL(s,t,e,i):z5(t)?EL(s,t,lr(e,i)):D5(t)?TL(s,t,lr(e,i)):void Jp.error("convertFromGeometry:unknown-geometry",new oe(`Unable to parse unknown geometry type '${t}'`))}function PL(t,e,i,s){const a=t&&("coords"in t?t:t.geometry);if(a==null)return null;switch(e){case"esriGeometryPoint":{let d=Jv;return i&&s?d=g6:i?d=f6:s&&(d=y6),d(a)}case"esriGeometryMultipoint":return xL(a,i,s);case"esriGeometryPolyline":return ML(a,i,s);case"esriGeometryPolygon":return AL(a,i,s);default:return Jp.error("convertToGeometry:unknown-geometry",new oe(`Unable to parse unknown geometry type '${e}'`)),null}}function mhe(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function NL(t,e,i,s,a){if(jn(t),i==null)return mhe(t,e);switch(i){case"esriGeometryPoint":return phe(t,e,s,a);case"esriGeometryMultipoint":return dhe(t,e,s,a);case"esriGeometryPolyline":return fhe(t,e,s,a);case"esriGeometryPolygon":return yhe(t,e,s,a);default:Jp.error("convertToFeatureSet:unknown-geometry",new oe(`Unable to parse unknown geometry type '${i}'`))}return t}function wme(t){const{objectIdFieldName:e,spatialReference:i,transform:s,fields:a,hasM:d,hasZ:y,features:g,geometryType:_,exceededTransferLimit:x,uniqueIdField:I,queryGeometry:A,queryGeometryType:C}=t,N={features:NL([],g,_,y,d),fields:a,geometryType:_,objectIdFieldName:e,spatialReference:i,uniqueIdField:I,queryGeometry:PL(A,C,!1,!1)};return s&&(N.transform=s),x&&(N.exceededTransferLimit=x),d&&(N.hasM=d),y&&(N.hasZ=y),N}function _me(t,e){const i=new yL,{hasM:s,hasZ:a,features:d,objectIdFieldName:y,spatialReference:g,geometryType:_,exceededTransferLimit:x,transform:I,fields:A}=t;return A&&(i.fields=A),i.geometryType=_??null,i.objectIdFieldName=y??e??null,i.spatialReference=g??null,i.objectIdFieldName?(d&&CL(i.features,d,_,a,s,i.objectIdFieldName),x&&(i.exceededTransferLimit=x),s&&(i.hasM=s),a&&(i.hasZ=a),I&&(i.transform=I),i):(Jp.error(new oe("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function Sme(t){const{transform:e,features:i,hasM:s,hasZ:a}=t;if(!e)return t;for(const d of i)d.geometry!=null&&R_(d.geometry,d.geometry,s,a,e),d.centroid!=null&&R_(d.centroid,d.centroid,s,a,e);return t.transform=null,t}function xme(t,e){const{geometryType:i,features:s,hasM:a,hasZ:d}=e;if(!t)return e;for(let y=0;y<s.length;y++){const g=s[y],_=g.weakClone();_.geometry=new Rn,c$(_.geometry,g.geometry,a,d,i,t),g.centroid&&(_.centroid=new Rn,c$(_.centroid,g.centroid,a,d,"esriGeometryPoint",t)),s[y]=_}return e.transform=t,e}function c$(t,e,i,s,a,d,y=i,g=s){if(ha(t),e==null||!e.coords.length)return null;const _=wL[a],{coords:x,lengths:I}=e,A=lr(i,s),C=lr(i&&y,s&&g),N=d6(i,s,y,g);if(!I.length)return N(t.coords,x,0,0,Eb(d,x[0]),Ab(d,x[1])),ha(t,A,0),t;let j,D,V,W,K=0,Y=0,ee=Y;for(const re of I){if(re<_)continue;let se=0;Y=ee,V=j=Eb(d,x[K]),W=D=Ab(d,x[K+1]),N(t.coords,x,Y,K,V,W),se++,K+=A,Y+=C;for(let ue=1;ue<re;ue++,K+=A)V=Eb(d,x[K]),W=Ab(d,x[K+1]),V===j&&W===D||(N(t.coords,x,Y,K,V-j,W-D),Y+=C,se++,j=V,D=W);se>=_&&(t.lengths.push(se),ee=Y)}return jn(t.coords,ee),t.coords.length?t:null}function $me(t,e,i,s,a,d,y=i,g=s){if(ha(t),!e||!e.coords.length)return null;const _=wL[a],{coords:x,lengths:I}=e,A=lr(i,s),C=lr(i&&y,s&&g),N=d6(i,s,y,g);if(!I.length)return N(t.coords,x,0,0,x[0],x[1]),ha(t,A,0),t;let j=0;const D=d*d;for(const V of I){if(V<_){j+=V*A;continue}const W=t.coords.length/C,K=j,Y=j+(V-1)*A;N(t.coords,x,t.coords.length,K,x[K],x[K+1]),L_(t.coords,x,A,D,N,K,Y),N(t.coords,x,t.coords.length,Y,x[Y],x[Y+1]);const ee=t.coords.length/C-W;ee>=_?t.lengths.push(ee):jn(t.coords,W*C),j+=V*A}return t.coords.length?t:null}function vhe(t,e,i,s){const a=t[e],d=t[e+1],y=t[i],g=t[i+1],_=t[s],x=t[s+1];let I=y,A=g,C=_-I,N=x-A;if(C!==0||N!==0){const j=((a-I)*C+(d-A)*N)/(C*C+N*N);j>1?(I=_,A=x):j>0&&(I+=C*j,A+=N*j)}return C=a-I,N=d-A,C*C+N*N}function L_(t,e,i,s,a,d,y){let g,_=s,x=0;for(let I=d+i;I<y;I+=i)g=vhe(e,I,d,y),g>_&&(x=I,_=g);_>s&&(x-d>i&&L_(t,e,i,s,a,d,x),a(t,e,t.length,x,e[x],e[x+1]),y-x>i&&L_(t,e,i,s,a,x,y))}function Tme(t,e,i,s){if(e==null||!e.coords||!e.coords.length)return null;const a=lr(i,s);let d=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,_=Number.NEGATIVE_INFINITY;if(e&&e.coords){const x=e.coords;for(let I=0;I<x.length;I+=a){const A=x[I],C=x[I+1];d=Math.min(d,A),g=Math.max(g,A),y=Math.min(y,C),_=Math.max(_,C)}}return u3(t)?BH(t,d,y,g,_):YG(d,y,g,_,t),t}function R_(t,e,i,s,a){const{coords:d,lengths:y}=e,g=lr(i,s);if(!d.length)return t!==e&&ha(t),t;Zm(a);const{originPosition:_,scale:x,translate:I}=a,A=whe;A.originPosition=_;const C=A.scale;C[0]=x[0]??1,C[1]=-(x[1]??1),C[2]=x[2]??1,C[3]=x[3]??1;const N=A.translate;if(N[0]=I[0]??0,N[1]=I[1]??0,N[2]=I[2]??0,N[3]=I[3]??0,!y.length){for(let D=0;D<g;++D)t.coords[D]=kb(A,d[D],D);return t!==e&&ha(t,g,0),t}let j=0;for(let D=0;D<y.length;D++){const V=y[D];t.lengths[D]=V;for(let Y=0;Y<g;++Y)t.coords[j+Y]=kb(A,d[j+Y],Y);let W=t.coords[j],K=t.coords[j+1];j+=g;for(let Y=1;Y<V;Y++,j+=g){W+=d[j]*C[0],K+=d[j+1]*C[1],t.coords[j]=W,t.coords[j+1]=K;for(let ee=2;ee<g;++ee)t.coords[j+ee]=kb(A,d[j+ee],ee)}}return t!==e&&ha(t,d.length,y.length),t}function Mme(t,e,i,s,a,d){if(ha(t),t.lengths.push(...e.lengths),i===a&&s===d)for(let y=0;y<e.coords.length;y++)t.coords.push(e.coords[y]);else{const y=lr(i,s),g=d6(i,s,a,d),_=e.coords;for(let x=0;x<_.length;x+=y)g(t.coords,_,t.coords.length,x,_[x],_[x+1])}return t}function bhe(t,e,i,s){let a=0,d=t[s*e],y=t[s*(e+1)];for(let g=1;g<i;g++){const _=d+t[s*(e+g)],x=y+t[s*(e+g)+1],I=(_-d)*(x+y);d=_,y=x,a+=I}return .5*a}function Ime(t,e){const{coords:i,lengths:s}=t;let a=0,d=0;for(let y=0;y<s.length;y++){const g=s[y];d+=bhe(i,a,g,e),a+=g}return Math.abs(d)}function ha(t,e=0,i=0){jn(t.lengths,i),jn(t.coords,e)}function jn(t,e=0){t.length!==e&&(t.length=e)}const whe={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function _he(t,e){return e}function v6(t,e,i,s){switch(i){case 0:return _f(t,e+s,0);case 1:return t.originPosition==="lowerLeft"?_f(t,e+s,1):$he(t,e+s,1)}}function LL(t,e,i,s){return i===2?_f(t,e,2):v6(t,e,i,s)}function She(t,e,i,s){return i===2?_f(t,e,3):v6(t,e,i,s)}function xhe(t,e,i,s){return i===3?_f(t,e,3):LL(t,e,i,s)}function _f({translate:t,scale:e},i,s){return t[s]+i*e[s]}function $he({translate:t,scale:e},i,s){return t[s]-i*e[s]}let The=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=_he,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const i=m4(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(i!=null)for(const s of e.features)i(s.geometry)}createSpatialReference(){return{}}addField(e,i){const s=e.fields;Zm(s),s.push(i);const a=s.map(d=>d.name);this._attributesConstructor=function(){for(const d of a)this[d]=null}}addFeature(e,i){e.features.push(i)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,s,a)=>this.addCoordinatePoint(i,s,a),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,s,a)=>this._addCoordinatePolygon(i,s,a),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,s,a)=>this._addCoordinatePolyline(i,s,a),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,s,a)=>this._addCoordinateMultipoint(i,s,a),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,i,s){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(e,i){const{queryGeometry:s,queryGeometryType:a}=i,d=R_(s.clone(),s,!1,!1,this._transform),y=PL(d,a,!1,!1);e.queryGeometryType=a,e.queryGeometry={...y}}createPointGeometry(e){const i={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(i.z=0),e.hasM&&(i.m=0),i}addCoordinatePoint(e,i,s){const a=Gr(this._transform,"transform");switch(i=this._applyTransform(a,i,s,0),s){case 0:e.x=i;break;case 1:e.y=i;break;case 2:"z"in e?e.z=i:e.m=i;break;case 3:e.m=i}}_transformPathLikeValue(e,i){let s=0;i<=1&&(s=this._previousCoordinate[i],this._previousCoordinate[i]+=e);const a=Gr(this._transform,"transform");return this._applyTransform(a,e,i,s)}_addCoordinatePolyline(e,i,s){this._dehydratedAddPointsCoordinate(e.paths,i,s)}_addCoordinatePolygon(e,i,s){this._dehydratedAddPointsCoordinate(e.rings,i,s)}_addCoordinateMultipoint(e,i,s){s===0&&e.points.push([]);const a=this._transformPathLikeValue(i,s);e.points[e.points.length-1].push(a)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,i,s){s===0&&this._toAddInCurrentPath--==0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const a=this._transformPathLikeValue(i,s),d=e[e.length-1];s===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),d.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=a}_deriveApplyTransform(e){const{hasZ:i,hasM:s}=e;return i&&s?xhe:i?LL:s?She:v6}};async function Mhe(t,e,i){const s=ds(t),a={...i},d=Yh.from(e),y=!d.quantizationParameters,{data:g}=await Jue(s,d,new The({sourceSpatialReference:d.sourceSpatialReference,applyTransform:y}),a);return g}let As=class extends je{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return ur(this.url)}async execute(t,e){const i=await this.executeJSON(t,e);return this.featureSetFromJSON(t,i,e)}async executeJSON(t,e){var g;const i=this._normalizeQuery(t),s=((g=t.outStatistics)==null?void 0:g[0])!=null,a=le("featurelayer-pbf-statistics"),d=!s||a;let y;if(this.pbfSupported&&d)try{y=await Mhe(this.url,i,e)}catch(_){if(_.name!=="query:parsing-pbf")throw _;this.pbfSupported=!1}return this.pbfSupported&&d||(y=await bL(this.url,i,e)),this._normalizeFields(y.fields),y}async featureSetFromJSON(t,e,i){if(!this._queryIs3DObjectFormat(t)||this.infoFor3D==null||!e.features)return vL.fromJSON(e);const{meshFeatureSetFromJSON:s}=await Ia(_e(()=>import("./meshFeatureSet-fcdfcf3f.js").then(a=>a.b),["assets/meshFeatureSet-fcdfcf3f.js","assets/georeference-13a6e65f.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-2c452f46.js","assets/MeshLocalVertexSpace-eed424c3.js","assets/MeshGeoreferencedRelativeVertexSpace-578fc903.js","assets/quat-0e1007d7.js","assets/quatf64-3363c48e.js","assets/vec32-33d99223.js","assets/BufferView-ed587754.js","assets/imageUtils-c2d0d1ae.js","assets/earcut-3e9b4557.js","assets/Indices-79a50390.js","assets/deduplicate-bcef8d64.js","assets/External-1e6998a2.js"]),i);return s(t,this.infoFor3D,e)}executeForCount(t,e){return rhe(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return she(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return nhe(this.url,this._normalizeQuery(t),e)}async executeRelationshipQuery(t,e){const[{default:i},{executeRelationshipQuery:s}]=await Ia(Promise.all([_e(()=>import("./RelationshipQuery-4b5cdfd6.js"),[]),_e(()=>import("./executeRelationshipQuery-7dd4d4b0.js"),["assets/executeRelationshipQuery-7dd4d4b0.js","assets/RelationshipQuery-4b5cdfd6.js"])]),e);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,e)}async executeRelationshipQueryForCount(t,e){const[{default:i},{executeRelationshipQueryForCount:s}]=await Ia(Promise.all([_e(()=>import("./RelationshipQuery-4b5cdfd6.js"),[]),_e(()=>import("./executeRelationshipQuery-7dd4d4b0.js"),["assets/executeRelationshipQuery-7dd4d4b0.js","assets/RelationshipQuery-4b5cdfd6.js"])]),e);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,e)}async executeAttachmentQuery(t,e){const{executeAttachmentQuery:i,fetchAttachments:s,processAttachmentQueryResult:a}=await Ia(_e(()=>import("./queryAttachments-87a50fd1.js"),["assets/queryAttachments-87a50fd1.js","assets/AttachmentInfo-e8c393ca.js"]),e),d=ds(this.url);return a(d,await(this.queryAttachmentsSupported?i(d,t,e):s(d,t,e)))}async executeTopFeaturesQuery(t,e){const{executeTopFeaturesQuery:i}=await Ia(_e(()=>import("./executeTopFeaturesQuery-d4a7a5a8.js"),["assets/executeTopFeaturesQuery-d4a7a5a8.js","assets/queryTopFeatures-79a8d88f.js","assets/TopFeaturesQuery-cef97b61.js"]),e);return i(this.parsedUrl,t,this.sourceSpatialReference,e)}async executeForTopIds(t,e){const{executeForTopIds:i}=await Ia(_e(()=>import("./executeForTopIds-334fdffa.js"),["assets/executeForTopIds-334fdffa.js","assets/queryTopFeatures-79a8d88f.js","assets/TopFeaturesQuery-cef97b61.js"]),e);return i(this.parsedUrl,t,e)}async executeForTopExtents(t,e){const{executeForTopExtents:i}=await Ia(_e(()=>import("./executeForTopExtents-8bf615e3.js"),["assets/executeForTopExtents-8bf615e3.js","assets/queryTopFeatures-79a8d88f.js","assets/TopFeaturesQuery-cef97b61.js"]),e);return i(this.parsedUrl,t,e)}async executeForTopCount(t,e){const{executeForTopCount:i}=await Ia(_e(()=>import("./executeForTopCount-6d035d7e.js"),["assets/executeForTopCount-6d035d7e.js","assets/queryTopFeatures-79a8d88f.js","assets/TopFeaturesQuery-cef97b61.js"]),e);return i(this.parsedUrl,t,e)}_normalizeQuery(t){let e=Yh.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?ss.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:i}=this;if(i!=null&&this._queryIs3DObjectFormat(t)){e=e===t?e.clone():e,e.formatOf3DObjects=null;const{supportedFormats:s,queryFormats:a}=i,d=gw("model/gltf-binary",s)??mw("glb",s),y=gw("model/gltf+json",s)??mw("gtlf",s);for(const g of a){if(g===d){e.formatOf3DObjects=g;break}g!==y||e.formatOf3DObjects||(e.formatOf3DObjects=g)}if(!e.formatOf3DObjects)throw new oe("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(e.outFields==null||!e.outFields.includes("*")){e=e===t?e.clone():e,e.outFields==null&&(e.outFields=[]);const{originX:g,originY:_,originZ:x,translationX:I,translationY:A,translationZ:C,scaleX:N,scaleY:j,scaleZ:D,rotationX:V,rotationY:W,rotationZ:K,rotationDeg:Y}=i.transformFieldRoles;e.outFields.push(g,_,x,I,A,C,N,j,D,V,W,K,Y)}}return e}_normalizeFields(t){if(this.fieldsIndex!=null&&t!=null)for(const e of t){const i=this.fieldsIndex.get(e.name);i&&Object.assign(e,i.toJSON())}}_queryIs3DObjectFormat(t){return this.infoFor3D!=null&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};b([S({type:ss})],As.prototype,"dynamicDataSource",void 0),b([S()],As.prototype,"fieldsIndex",void 0),b([S()],As.prototype,"gdbVersion",void 0),b([S()],As.prototype,"infoFor3D",void 0),b([S({readOnly:!0})],As.prototype,"parsedUrl",null),b([S()],As.prototype,"pbfSupported",void 0),b([S()],As.prototype,"queryAttachmentsSupported",void 0),b([S()],As.prototype,"sourceSpatialReference",void 0),b([S({type:String})],As.prototype,"url",void 0),As=b([J("esri.tasks.QueryTask")],As);const Ihe=As,p$=new Nt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let gl=class extends Ii(ye){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};b([S({json:{write:!0}})],gl.prototype,"name",void 0),b([S({json:{write:!0}})],gl.prototype,"description",void 0),b([S({json:{read:p$.read,write:p$.write}})],gl.prototype,"drawingTool",void 0),b([S({json:{write:!0}})],gl.prototype,"prototype",void 0),b([S({json:{write:!0}})],gl.prototype,"thumbnail",void 0),gl=b([J("esri.layers.support.FeatureTemplate")],gl);const Ehe=gl;let Xo=class extends Ii(ye){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const s of Object.keys(e))i[s]=pL(e[s]);return i}writeDomains(e,i){var a;const s={};for(const d of Object.keys(e))e[d]&&(s[d]=(a=e[d])==null?void 0:a.toJSON());i.domains=s}};b([S({json:{write:!0}})],Xo.prototype,"id",void 0),b([S({json:{write:!0}})],Xo.prototype,"name",void 0),b([S({json:{write:!0}})],Xo.prototype,"domains",void 0),b([Ce("domains")],Xo.prototype,"readDomains",null),b([ke("domains")],Xo.prototype,"writeDomains",null),b([S({type:[Ehe],json:{write:!0}})],Xo.prototype,"templates",void 0),Xo=b([J("esri.layers.support.FeatureType")],Xo);const Ahe=Xo,b6="__begin__",w6="__end__",khe=new RegExp(b6,"ig"),Ohe=new RegExp(w6,"ig"),d$=new RegExp("^"+b6,"i"),f$=new RegExp(w6+"$","i"),Jm='"',Che=Jm+" + ",Phe=" + "+Jm;function Nhe(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function Lhe(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function _6(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=Nhe(t.labelExpression),e.type="conventional"),e}function Rhe(t){const e=_6(t);if(!e)return null;switch(e.type){case"conventional":return j_(e.expression);case"arcade":return e.expression}return null}function jhe(t){const e=_6(t);if(!e)return null;switch(e.type){case"conventional":return Fhe(e.expression);case"arcade":return RL(e.expression)}return null}function j_(t){let e;return t?(e=rv(t,i=>b6+'$feature["'+i+'"]'+w6),e=d$.test(e)?e.replace(d$,""):Jm+e,e=f$.test(e)?e.replace(f$,""):e+Jm,e=e.replaceAll(khe,Che).replaceAll(Ohe,Phe)):e='""',e}const Dhe=/^\s*\{([^}]+)\}\s*$/i;function Fhe(t){const e=t==null?void 0:t.match(Dhe);return e&&e[1].trim()||null}const zhe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Vhe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Ghe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function RL(t){if(!t)return null;let e=zhe.exec(t)||Vhe.exec(t);return e?e[1]||e[3]:(e=Ghe.exec(t),e?e[2]:null)}var D_;let ml=D_=class extends ye{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?j_(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=j_(this.value)),t!=null&&(e[i]=t)}clone(){return new D_({expression:this.expression,title:this.title,value:this.value})}};b([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],ml.prototype,"expression",void 0),b([Ce("expression",["expression","value"])],ml.prototype,"readExpression",null),b([ke("expression")],ml.prototype,"writeExpression",null),b([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ml.prototype,"title",void 0),b([S({json:{read:!1,write:!1}})],ml.prototype,"value",void 0),ml=D_=b([J("esri.layers.support.LabelExpressionInfo")],ml);const jL=ml,DL=[252,146,31,255],Uhe={type:"esriSMS",style:"esriSMSCircle",size:6,color:DL,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},qhe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:DL},Bhe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Hhe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Whe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Jhe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Khe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},Ome=nu.fromJSON(Uhe),Cme=ps.fromJSON(qhe),Pme=su.fromJSON(Bhe),Yhe=Bh.fromJSON(Hhe),Nme=nu.fromJSON(Whe),Lme=ps.fromJSON(Jhe),Rme=su.fromJSON(Khe);var F_;const hy=new Nt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function cy(t,e,i){return{enabled:!xM(i==null?void 0:i.layer)}}function FL(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function Zhe(t){return(t==null?void 0:t.type)==="map-image"}function zL(t){var e,i;return!!Zhe(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function Xhe(t){return FL(t)||zL(t==null?void 0:t.layer)}let Si=F_=class extends ye{static evaluateWhere(t,e){const i=(s,a,d)=>{switch(a){case"=":return s==d;case"<>":return s!=d;case">":return s>d;case">=":return s>=d;case"<":return s<d;case"<=":return s<=d}return!1};try{if(t==null)return!0;const s=t.split(" ");if(s.length===3)return i(e[s[0]],s[1],s[2]);if(s.length===7){const a=i(e[s[0]],s[1],s[2]),d=s[3],y=i(e[s[4]],s[5],s[6]);switch(d){case"AND":return a&&y;case"OR":return a||y}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Yhe,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=Lhe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=RL(this.labelExpressionInfo.expression);s&&(t="["+s+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,s){if(t==null&&this.labelExpression!=null&&FL(s))t=new jL({expression:this.getLabelExpressionArcade()});else if(!t)return;const a=t.toJSON(s);a.expression&&(e[i]=a)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return _6(this)}getLabelExpressionArcade(){return Rhe(this)}getLabelExpressionSingleField(){return jhe(this)}hash(){return JSON.stringify(this)}clone(){return new F_({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ae(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ae(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};b([S({type:String,json:{write:!0}})],Si.prototype,"name",void 0),b([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:cy}}}}})],Si.prototype,"allowOverrun",void 0),b([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:cy}}}}})],Si.prototype,"deconflictionStrategy",void 0),b([S({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&zL(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],Si.prototype,"labelExpression",void 0),b([Ce("labelExpression")],Si.prototype,"readLabelExpression",null),b([ke("labelExpression")],Si.prototype,"writeLabelExpression",null),b([S({type:jL,json:{write:{overridePolicy:(t,e,i)=>Xhe(i)?{allowNull:!0}:{enabled:!1}}}})],Si.prototype,"labelExpressionInfo",void 0),b([ke("labelExpressionInfo")],Si.prototype,"writeLabelExpressionInfo",null),b([S({type:hy.apiValues,json:{type:hy.jsonValues,read:hy.read,write:hy.write}})],Si.prototype,"labelPlacement",void 0),b([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Si.prototype,"labelPosition",void 0),b([S({type:Number})],Si.prototype,"maxScale",void 0),b([ke("maxScale")],Si.prototype,"writeMaxScale",null),b([S({type:Number})],Si.prototype,"minScale",void 0),b([ke("minScale")],Si.prototype,"writeMinScale",null),b([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:cy}}}}})],Si.prototype,"repeatLabel",void 0),b([S({type:Number,cast:Bt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:cy}}}}})],Si.prototype,"repeatLabelDistance",void 0),b([S({types:vW,json:{origins:{"web-scene":{types:bW,write:V8,default:null}},write:V8,default:null}})],Si.prototype,"symbol",void 0),b([S({type:Boolean,json:{write:!0}})],Si.prototype,"useCodedValues",void 0),b([S({type:String,json:{write:!0}})],Si.prototype,"where",void 0),Si=F_=b([J("esri.layers.support.LabelClass")],Si);const VL=Si,Ob=me.getLogger("esri.layers.support.labelingInfo"),Qhe=/\[([^\[\]]+)\]/gi;function jme(t,e,i){return t?t.map(s=>{const a=new VL;if(a.read(s,i),a.labelExpression){const d=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;a.labelExpression=a.labelExpression.replaceAll(Qhe,(y,g)=>`[${ece(g,d)}]`)}return a}):null}function ece(t,e){if(!e)return t;const i=t.toLowerCase();for(let s=0;s<e.length;s++){const a=e[s].name;if(a.toLowerCase()===i)return a}return t}const tce={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function ice(t,e){const i=ae(t);return i.some(s=>rce(s,e))?[]:i}function rce(t,e){const i=t.labelPlacement,s=tce[e];if(!t.symbol)return Ob.warn("No ILabelClass symbol specified."),!0;if(!s)return Ob.error(new oe("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!s.includes(i)){const a=s[0];i&&Ob.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${a}`),t.labelPlacement=a}return!1}var z_;let Gc=z_=class extends ye{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Ge}clone(){return new z_({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};b([S({type:String,json:{write:!0}})],Gc.prototype,"floorField",void 0),b([S({json:{read:!1,write:!1}})],Gc.prototype,"viewAllMode",void 0),b([S({json:{read:!1,write:!1}})],Gc.prototype,"viewAllLevelIds",void 0),Gc=z_=b([J("esri.layers.support.LayerFloorInfo")],Gc);const sce=Gc,nce={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function qe(t,e,i){return!!GL(t,e,i)}function py(t,e,i){return GL(t,e,i)}function GL(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function oce(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(s=>s.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function e1(t,e){var s;const i=(s=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:s.map(a=>a.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function ace(t,e){return{analytics:lce(t),attachment:uce(t),data:hce(t),metadata:cce(t),operations:pce(t.capabilities,t,e),query:dce(t,e),queryRelated:fce(t),queryTopFeatures:yce(t),editing:gce(t)}}function lce(t){return{supportsCacheHint:e1(t.advancedQueryCapabilities,"queryAnalytics")}}function uce(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:e1(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:qe(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(s=>{const a=nce[s.name];a&&(i[a]=!!s.isEnabled)}),i}function hce(t){return{isVersioned:qe(t,"isDataVersioned",!1),supportsAttachment:qe(t,"hasAttachments",!1),supportsM:qe(t,"hasM",!1),supportsZ:qe(t,"hasZ",!1)}}function cce(t){return{supportsAdvancedFieldProperties:qe(t,"supportsFieldDescriptionProperty",!1)}}function pce(t,e,i){const s=t?t.toLowerCase().split(",").map(C=>C.trim()):[],a=i?Kh(i):null,d=s.includes(a!=null&&a.serverType==="MapServer"?"data":"query"),y=s.includes("editing")&&!e.datesInUnknownTimezone;let g=y&&s.includes("create"),_=y&&s.includes("delete"),x=y&&s.includes("update");const I=s.includes("changetracking"),A=e.advancedQueryCapabilities;return y&&!(g||_||x)&&(g=_=x=!0),{supportsCalculate:qe(e,"supportsCalculate",!1),supportsTruncate:qe(e,"supportsTruncate",!1),supportsValidateSql:qe(e,"supportsValidateSql",!1),supportsAdd:g,supportsDelete:_,supportsEditing:y,supportsChangeTracking:I,supportsQuery:d,supportsQueryAnalytics:qe(A,"supportsQueryAnalytic",!1),supportsQueryAttachments:qe(A,"supportsQueryAttachments",!1),supportsQueryTopFeatures:qe(A,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:qe(e,"supportsAttachmentsResizing",!1),supportsSync:s.includes("sync"),supportsUpdate:x,supportsExceedsLimitStatistics:qe(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:qe(e,"supportsAsyncConvert3D",!1)}}function dce(t,e){const i=t.advancedQueryCapabilities,s=t.ownershipBasedAccessControlForFeatures,a=t.archivingInfo,d=t.currentVersion,y=e==null?void 0:e.includes("MapServer"),g=!y||d>=le("mapserver-pbf-version-support"),_=A4(e),x=new Set((t.supportedQueryFormats??"").split(",").map(I=>I.toLowerCase().trim()));return{supportsStatistics:qe(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:qe(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:qe(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:oce(i),supportsCentroid:qe(i,"supportsReturningGeometryCentroid",!1),supportsDistance:qe(i,"supportsQueryWithDistance",!1),supportsDistinct:qe(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:qe(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:qe(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:qe(i,"supportsHavingClause",!1),supportsOrderBy:qe(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:qe(i,"supportsPagination",!1),supportsQuantization:qe(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:qe(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:qe(t,"supportsReturningQueryGeometry",!1),supportsResultType:qe(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:qe(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:qe(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:qe(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:qe(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:qe(s,"allowOthersToQuery",!0),supportsHistoricMoment:qe(a,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:g&&x.has("pbf"),supportsDisjointSpatialRelationship:qe(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:qe(i,"supportsQueryWithCacheHint",!1)||e1(i,"query"),supportsDefaultSpatialReference:qe(i,"supportsDefaultSR",!1),supportsCompactGeometry:_,supportsFullTextSearch:qe(i,"supportsFullTextSearch",!1),maxRecordCountFactor:py(t,"maxRecordCountFactor",void 0),maxRecordCount:py(t,"maxRecordCount",void 0),standardMaxRecordCount:py(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:py(t,"tileMaxRecordCount",void 0)}}function fce(t){const e=t.advancedQueryCapabilities,i=qe(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:qe(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:e1(e,"queryRelated")}}function yce(t){return{supportsCacheHint:e1(t.advancedQueryCapabilities,"queryTopFilter")}}function gce(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:qe(t,"allowGeometryUpdates",!0),supportsGlobalId:qe(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:qe(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:qe(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:qe(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:qe(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:qe(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:qe(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:qe(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:qe(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:qe(i,"supportsAsyncApplyEdits",!1)}}var V_;let Ki=V_=class extends ye{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new V_(ae({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};b([S({type:[String],json:{write:!0}})],Ki.prototype,"attachmentTypes",void 0),b([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ki.prototype,"attachmentsWhere",void 0),b([S({type:Boolean,json:{write:!0}})],Ki.prototype,"cacheHint",void 0),b([S({type:[String],json:{write:!0}})],Ki.prototype,"keywords",void 0),b([S({type:[Number],json:{write:!0}})],Ki.prototype,"globalIds",void 0),b([S({json:{write:!0}})],Ki.prototype,"name",void 0),b([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Ki.prototype,"num",void 0),b([S({type:[Number],json:{write:!0}})],Ki.prototype,"objectIds",void 0),b([S({type:Boolean,json:{default:!1,write:!0}})],Ki.prototype,"returnMetadata",void 0),b([S({type:[Number],json:{write:!0}})],Ki.prototype,"size",void 0),b([S({type:Number,json:{read:{source:"resultOffset"}}})],Ki.prototype,"start",void 0),b([ke("start"),ke("num")],Ki.prototype,"writeStart",null),b([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ki.prototype,"where",void 0),Ki=V_=b([J("esri.rest.support.AttachmentQuery")],Ki),Ki.from=ui(Ki);const mce=Ki;function vce({displayField:t,editFieldsInfo:e,fields:i,objectIdField:s,title:a},d){if(!i)return null;const y=Sce({editFieldsInfo:e,fields:i,objectIdField:s},d);if(!y.length)return null;const g=Tce({titleBase:a,fields:i,displayField:t}),_=$ce();return new Lf({title:g,content:_,fieldInfos:y})}const bce=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):RU(t,e);function wce(t,e){const i=t;return e&&(t=t.filter(s=>!e.includes(s.type))),t===i&&(t=t.slice()),t.sort(_ce),t}function _ce(t,e){return t.type==="oid"?-1:e.type==="oid"?1:y$(t)?-1:y$(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function Sce(t,e){const i=e==null?void 0:e.visibleFieldNames;return wce(t.fields??[],(e==null?void 0:e.ignoreFieldTypes)||Mce).map(s=>new e4({fieldName:s.name,isEditable:LU(s,t),label:s.alias,format:xce(s),visible:bce(s,{...t,visibleFieldNames:i})}))}function xce(t){switch(t.type){case"small-integer":case"integer":case"single":return new M0({digitSeparator:!0,places:0});case"double":return new M0({digitSeparator:!0,places:2});case"date":return new M0({dateFormat:"long-month-day-year"});default:return t.type==="string"&&eq(t.name)?new M0({digitSeparator:!0,places:0}):null}}function $ce(){return[new nf,new rf]}function Tce(t){const e=TU(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function y$(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const Mce=["geometry","blob","raster","guid","xml"];var $g;function Cb(t){return t!=null&&t.type==="esriSMS"}function Pb(t,e,i){var a;const s=this.originIdOf(e)>=Or(i.origin);return{ignoreOrigin:!0,allowNull:s,enabled:!!i&&((a=i.layer)==null?void 0:a.type)==="map-image"&&(i.writeSublayerStructure||s)}}function Nb(t,e,i){var s;return{enabled:!!i&&((s=i.layer)==null?void 0:s.type)==="tile"&&(i.origin&&this.originIdOf(e)>=Or(i.origin)||this._isOverridden(e))}}function vs(t,e,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function dy(t,e,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(e)>=Or(i.origin))}}let Ice=0;const Qu=new Set;Qu.add("layer"),Qu.add("parent"),Qu.add("loaded"),Qu.add("loadStatus"),Qu.add("loadError"),Qu.add("loadWarnings");let Je=$g=class extends lu(Gv(Uh(da))){constructor(t){super(t),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(t){return this.addResolvingPromise((async()=>{const{layer:e,url:i}=this;if(!e&&!i)throw new oe("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const s=e?await e.fetchSublayerInfo(this,t):(await pt(i,{responseType:"json",query:{f:"json"},...t})).data;s&&(this.sourceJSON=s,this.read({layerDefinition:s},{origin:"service"}))})()),this}readCapabilities(t,e){e=e.layerDefinition||e;const{operations:{supportsQuery:i,supportsQueryAttachments:s},query:{supportsFormatPBF:a},data:{supportsAttachment:d}}=ace(e,this.url);return{exportMap:{supportsModification:!!e.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:s},data:{supportsAttachment:d},query:{supportsFormatPBF:a}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(t){this._setAndNotifyLayer("definitionExpression",t)}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}get fieldsIndex(){return new HN(this.fields||[])}set floorInfo(t){this._setAndNotifyLayer("floorInfo",t)}readGlobalIdFieldFromService(t,e){if((e=e.layerDefinition||e).globalIdField)return e.globalIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??Ice++}set id(t){var e,i,s;this._get("id")!==t&&(((s=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.exportMap)==null?void 0:s.supportsDynamicLayers)!==!1?this._set("id",t):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(t){this._setAndNotifyLayer("labelingInfo",t)}writeLabelingInfo(t,e,i,s){t&&t.length&&(e.layerDefinition={drawingInfo:{labelingInfo:t.map(a=>a.write({},s))}})}set labelsVisible(t){this._setAndNotifyLayer("labelsVisible",t)}set layer(t){this._set("layer",t),this.sublayers&&this.sublayers.forEach(e=>e.layer=t)}set listMode(t){this._set("listMode",t)}set minScale(t){this._setAndNotifyLayer("minScale",t)}readMinScale(t,e){return e.minScale||e.layerDefinition&&e.layerDefinition.minScale||0}set maxScale(t){this._setAndNotifyLayer("maxScale",t)}readMaxScale(t,e){return e.maxScale||e.layerDefinition&&e.layerDefinition.maxScale||0}readObjectIdFieldFromService(t,e){if((e=e.layerDefinition||e).objectIdField)return e.objectIdField;if(e.fields){for(const i of e.fields)if(i.type==="esriFieldTypeOID")return i.name}}set opacity(t){this._setAndNotifyLayer("opacity",t)}readOpacity(t,e){var s;const i=e.layerDefinition;return 1-.01*(((i==null?void 0:i.transparency)!=null?i.transparency:(s=i==null?void 0:i.drawingInfo)==null?void 0:s.transparency)??0)}writeOpacity(t,e,i,s){e.layerDefinition={drawingInfo:{transparency:100-100*t}}}writeParent(t,e){this.parent&&this.parent!==this.layer?e.parentLayerId=uv(this.parent.id):e.parentLayerId=-1}get queryTask(){var y;if(!this.layer)return null;const{spatialReference:t}=this.layer,e="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:i,fieldsIndex:s}=this,a=le("featurelayer-pbf")&&(i==null?void 0:i.query.supportsFormatPBF),d=((y=i==null?void 0:i.operations)==null?void 0:y.supportsQueryAttachments)??!1;return new Ihe({url:this.url,pbfSupported:a,fieldsIndex:s,gdbVersion:e,sourceSpatialReference:t,queryAttachmentsSupported:d})}set renderer(t){if(t){for(const e of t.getSymbols())if(R3(e)){me.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",t)}get source(){return this._get("source")||new sa({mapLayerId:this.id})}set source(t){this._setAndNotifyLayer("source",t)}set sublayers(t){this._handleSublayersChange(t,this._get("sublayers")),this._set("sublayers",t)}castSublayers(t){return ui(Ge.ofType($g),t)}writeSublayers(t,e,i){var s;(s=this.sublayers)!=null&&s.length&&(e[i]=this.sublayers.map(a=>a.id).toArray().reverse())}readTypeIdField(t,e){let i=(e=e.layerDefinition||e).typeIdField;if(i&&e.fields){i=i.toLowerCase();const s=e.fields.find(a=>a.name.toLowerCase()===i);s&&(i=s.name)}return i}get url(){var s;const t=((s=this.layer)==null?void 0:s.parsedUrl)??this._lastParsedUrl,e=this.source;if(!t)return null;if(this._lastParsedUrl=t,(e==null?void 0:e.type)==="map-layer")return`${t.path}/${e.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${t.path}/dynamicLayer?${ql(i)}`}set url(t){this._overrideIfSome("url",t)}set visible(t){this._setAndNotifyLayer("visible",t)}writeVisible(t,e,i,s){e[i]=this.getAtOrigin("defaultVisibility","service")||t}clone(){const{store:t}=qi(this),e=new $g;return qi(e).store=t.clone(Qu),this.commitProperty("url"),e._lastParsedUrl=this._lastParsedUrl,e}createPopupTemplate(t){return vce(this,t)}createQuery(){return new Yh({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var s;if(this.hasOwnProperty("sublayers"))return null;const{layer:t}=this,e=t==null?void 0:t.parsedUrl,i=new(await _e(()=>import("./FeatureLayer-96bccf25.js"),["assets/FeatureLayer-96bccf25.js","assets/FeatureLayerBase-32e123ac.js","assets/featureLayerUtils-71d8b720.js","assets/RelationshipQuery-4b5cdfd6.js","assets/editsZScale-0594243d.js","assets/EditBusLayer-a6a5507e.js","assets/FeatureEffectLayer-6e78ef43.js","assets/FeatureEffect-fa9becb0.js","assets/FeatureReductionLayer-dfeafac1.js","assets/clusterUtils-d077d77a.js","assets/OrderedLayer-0a78e45e.js","assets/fieldProperties-233fbbe4.js","assets/styleUtils-f9f86ae1.js","assets/TopFeaturesQuery-cef97b61.js"])).default({url:e==null?void 0:e.path});return e&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),(t==null?void 0:t.refreshInterval)!=null&&(i.refreshInterval=t.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=ae(this.floorInfo)),this.originIdOf("labelingInfo")>Te.SERVICE&&(i.labelingInfo=ae(this.labelingInfo)),this.originIdOf("labelsVisible")>Te.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>Te.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>Te.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>Te.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>Te.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>Te.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>Te.DEFAULTS&&(i.popupTemplate=ae(this.popupTemplate)),this.originIdOf("renderer")>Te.SERVICE&&(i.renderer=ae(this.renderer)),((s=this.source)==null?void 0:s.type)==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>Te.DEFAULTS&&(i.title=this.title),(t==null?void 0:t.type)==="map-image"&&t.originIdOf("customParameters")>Te.DEFAULTS&&(i.customParameters=t.customParameters),(t==null?void 0:t.type)==="tile"&&t.originIdOf("customParameters")>Te.DEFAULTS&&(i.customParameters=t.customParameters),i}getField(t){return this.fieldsIndex.get(t)}getFeatureType(t){const{typeIdField:e,types:i}=this;if(!e||!t)return null;const s=t.attributes?t.attributes[e]:void 0;if(s==null)return null;let a=null;return i==null||i.some(d=>{const{id:y}=d;return y!=null&&(y.toString()===s.toString()&&(a=d),!!a)}),a}getFieldDomain(t,e){const i=e&&e.feature,s=this.getFeatureType(i);if(s){const a=s.domains&&s.domains[t];if(a&&a.type!=="inherited")return a}return this._getLayerDomain(t)}async queryAttachments(t,e){var I,A;await this.load(),t=mce.from(t);const i=this.capabilities;if(!((I=i==null?void 0:i.data)!=null&&I.supportsAttachment))throw new oe("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:s,objectIds:a,globalIds:d,num:y,size:g,start:_,where:x}=t;if(!((A=i==null?void 0:i.operations)!=null&&A.supportsQueryAttachments)&&((s==null?void 0:s.length)>0||(d==null?void 0:d.length)>0||(g==null?void 0:g.length)>0||y||_||x))throw new oe("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a!=null&&a.length||d!=null&&d.length||x))throw new oe("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);return this.queryTask.executeAttachmentQuery(t,e)}async queryFeatures(t=this.createQuery(),e){var s,a;if(await this.load(),!this.capabilities.operations.supportsQuery)throw new oe("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new oe("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(t,{...e,query:{...(s=this.layer)==null?void 0:s.customParameters,token:(a=this.layer)==null?void 0:a.apiKey}});if(i!=null&&i.features)for(const d of i.features)d.sourceLayer=this;return i}toExportImageJSON(t){var d;const e={id:this.id,source:((d=this.source)==null?void 0:d.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=K4(t,this.definitionExpression);i!=null&&(e.definitionExpression=i);const s=["renderer","labelingInfo","opacity","labelsVisible"].reduce((y,g)=>(y[g]=this.originIdOf(g),y),{});if(Object.keys(s).some(y=>s[y]>Te.SERVICE)){const y=e.drawingInfo={};if(s.renderer>Te.SERVICE&&(y.renderer=this.renderer?this.renderer.toJSON():null),s.labelsVisible>Te.SERVICE&&(y.showLabels=this.labelsVisible),this.labelsVisible&&s.labelingInfo>Te.SERVICE){!this.loaded&&this.labelingInfo.some(_=>!_.labelPlacement)&&me.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let g=this.labelingInfo;this.geometryType!=null&&(g=ice(this.labelingInfo,im.toJSON(this.geometryType))),y.labelingInfo=g.filter(_=>_.labelPlacement).map(_=>_.toJSON({origin:"service",layer:this.layer})),y.showLabels=!0}s.opacity>Te.SERVICE&&(y.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(y.renderer)}return e}_assignDefaultSymbolColors(t){this._forEachSimpleMarkerSymbols(t,e=>{e.color||e.style!=="esriSMSX"&&e.style!=="esriSMSCross"||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(t,e){if(t){const i=("uniqueValueInfos"in t?t.uniqueValueInfos:"classBreakInfos"in t?t.classBreakInfos:null)??[];for(const s of i)Cb(s.symbol)&&e(s.symbol);"symbol"in t&&Cb(t.symbol)&&e(t.symbol),"defaultSymbol"in t&&Cb(t.defaultSymbol)&&e(t.defaultSymbol)}}_setAndNotifyLayer(t,e){var g,_,x,I;const i=this.layer,s=this._get(t);let a,d;switch(t){case"definitionExpression":case"floorInfo":a="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":a="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":a="supportsDynamicLayers",d="supportsModification"}const y=qi(this).getDefaultOrigin();if(y!=="service"){if(a&&((x=(_=(g=this.layer)==null?void 0:g.capabilities)==null?void 0:_.exportMap)==null?void 0:x[a])===!1)return void this._logLockedError(t,`capability not available 'layer.capabilities.exportMap.${a}'`);if(d&&((I=this.capabilities)==null?void 0:I.exportMap[d])===!1)return void this._logLockedError(t,`capability not available 'capabilities.exportMap.${d}'`)}t!=="source"||this.loadStatus==="not-loaded"?(this._set(t,e),y!=="service"&&s!==e&&i&&i.emit&&i.emit("sublayer-update",{propertyName:t,target:this})):this._logLockedError(t,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(t,e){e&&(e.forEach(i=>{i.parent=null,i.layer=null}),this.handles.removeAll()),t&&(t.forEach(i=>{i.parent=this,i.layer=this.layer}),this.handles.add([t.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),t.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),t.on("before-changes",i=>{var a,d,y;const s=(y=(d=(a=this.layer)==null?void 0:a.capabilities)==null?void 0:d.exportMap)==null?void 0:y.supportsSublayersChanges;s==null||s||(me.getLogger(this).error(new oe("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(t,e){const{layer:i,declaredClass:s}=this;me.getLogger(s).error(new oe("sublayer:locked",`Property '${String(t)}' can't be changed on Sublayer from the layer '${i==null?void 0:i.id}'`,{reason:e,sublayer:this,layer:i}))}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}};Je.test={isMapImageLayerOverridePolicy:t=>t===vs||t===Pb,isTileImageLayerOverridePolicy:t=>t===Nb},b([S({readOnly:!0})],Je.prototype,"capabilities",void 0),b([Ce("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],Je.prototype,"readCapabilities",null),b([S()],Je.prototype,"defaultPopupTemplate",null),b([S({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:Pb}}})],Je.prototype,"definitionExpression",null),b([S({readOnly:!0})],Je.prototype,"effectiveScaleRange",null),b([S({type:[p6],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],Je.prototype,"fields",void 0),b([S({readOnly:!0})],Je.prototype,"fieldsIndex",null),b([S({type:sce,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:Pb},origins:{"web-scene":{read:!1,write:!1}}}})],Je.prototype,"floorInfo",null),b([S({type:bt,json:{read:{source:"layerDefinition.extent"}}})],Je.prototype,"fullExtent",void 0),b([S({type:im.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:im.read}}}}})],Je.prototype,"geometryType",void 0),b([S({type:String})],Je.prototype,"globalIdField",void 0),b([Ce("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Je.prototype,"readGlobalIdFieldFromService",null),b([S({type:Pt,json:{write:{ignoreOrigin:!0}}})],Je.prototype,"id",null),b([S({value:null,type:[VL],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:vs}}})],Je.prototype,"labelingInfo",null),b([ke("labelingInfo")],Je.prototype,"writeLabelingInfo",null),b([S({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:vs}}})],Je.prototype,"labelsVisible",null),b([S({value:null})],Je.prototype,"layer",null),b([S({type:String,json:{write:{overridePolicy:Nb}}})],Je.prototype,"layerItemId",void 0),b([S({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:dy}}})],Je.prototype,"legendEnabled",void 0),b([S({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Je.prototype,"listMode",null),b([S({type:Number,value:0,json:{write:{overridePolicy:vs}}})],Je.prototype,"minScale",null),b([Ce("minScale",["minScale","layerDefinition.minScale"])],Je.prototype,"readMinScale",null),b([S({type:Number,value:0,json:{write:{overridePolicy:vs}}})],Je.prototype,"maxScale",null),b([Ce("maxScale",["maxScale","layerDefinition.maxScale"])],Je.prototype,"readMaxScale",null),b([S({type:String})],Je.prototype,"objectIdField",void 0),b([Ce("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Je.prototype,"readObjectIdFieldFromService",null),b([S({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:vs}}})],Je.prototype,"opacity",null),b([Ce("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],Je.prototype,"readOpacity",null),b([ke("opacity")],Je.prototype,"writeOpacity",null),b([S({json:{type:Pt,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:vs}}})],Je.prototype,"parent",void 0),b([ke("parent")],Je.prototype,"writeParent",null),b([S({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:dy,writer(t,e,i){e[i]=!t}}}})],Je.prototype,"popupEnabled",void 0),b([S({type:Lf,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:dy}}})],Je.prototype,"popupTemplate",void 0),b([S({readOnly:!0})],Je.prototype,"queryTask",null),b([S({types:lL,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:vs},origins:{"web-scene":{types:yue,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:vs}}}}})],Je.prototype,"renderer",null),b([S({types:{key:"type",base:null,typeMap:{"data-layer":ss,"map-layer":sa}},cast(t){if(t){if("mapLayerId"in t)return xh(sa,t);if("dataSource"in t)return xh(ss,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:vs}}})],Je.prototype,"source",null),b([S()],Je.prototype,"sourceJSON",void 0),b([S({value:null,json:{type:[Pt],write:{target:"subLayerIds",allowNull:!0,overridePolicy:vs}}})],Je.prototype,"sublayers",null),b([Ft("sublayers")],Je.prototype,"castSublayers",null),b([ke("sublayers")],Je.prototype,"writeSublayers",null),b([S({type:String,json:{name:"name",write:{overridePolicy:dy}}})],Je.prototype,"title",void 0),b([S({type:String})],Je.prototype,"typeIdField",void 0),b([Ce("typeIdField",["layerDefinition.typeIdField"])],Je.prototype,"readTypeIdField",null),b([S({type:[Ahe],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],Je.prototype,"types",void 0),b([S({type:String,json:{name:"layerUrl",write:{overridePolicy:Nb}}})],Je.prototype,"url",null),b([S({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:vs}}})],Je.prototype,"visible",null),b([ke("visible")],Je.prototype,"writeVisible",null),Je=$g=b([J("esri.layers.support.Sublayer")],Je);const t1=Je,Ece=me.getLogger("esri.layers.TileLayer");function Ace(t,e){const i=[],s={};return t&&t.forEach(a=>{const d=new t1;if(d.read(a,e),s[d.id]=d,a.parentLayerId!=null&&a.parentLayerId!==-1){const y=s[a.parentLayerId];y.sublayers||(y.sublayers=[]),y.sublayers.unshift(d)}else i.unshift(d)}),i}const Lb=Ge.ofType(t1);function UL(t,e){t&&t.forEach(i=>{e(i),i.sublayers&&i.sublayers.length&&UL(i.sublayers,e)})}const qL=t=>{let e=class extends t{constructor(...i){super(...i),this.allSublayers=new gp({getCollections:()=>[this.sublayers],getChildrenFunction:s=>s.sublayers}),this.sublayersSourceJSON={[Te.SERVICE]:{},[Te.PORTAL_ITEM]:{},[Te.WEB_SCENE]:{},[Te.WEB_MAP]:{}},this.addHandles(Me(()=>this.sublayers,(s,a)=>this._handleSublayersChange(s,a),Fp))}destroy(){this.allSublayers.destroy()}readSublayers(i,s){if(!s||!i)return;const{sublayersSourceJSON:a}=this,d=Or(s.origin);if(d<Te.SERVICE||(a[d]={context:s,visibleLayers:i.visibleLayers||a[d].visibleLayers,layers:i.layers||a[d].layers},d>Te.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:y,origin:g}=this.createSublayersForOrigin("web-document"),_=qi(this);_.setDefaultOrigin(g),this._set("sublayers",new Lb(y)),_.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(s=>s.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const s=Or(i==="web-document"?"web-map":i);let a=Te.SERVICE,d=this.sublayersSourceJSON[Te.SERVICE].layers,y=this.sublayersSourceJSON[Te.SERVICE].context,g=null;const _=[Te.PORTAL_ITEM,Te.WEB_SCENE,Te.WEB_MAP].filter(j=>j<=s);for(const j of _){const D=this.sublayersSourceJSON[j];Cse(D.layers)&&(a=j,d=D.layers,y=D.context,D.visibleLayers&&(g={visibleLayers:D.visibleLayers,context:D.context}))}const x=[Te.PORTAL_ITEM,Te.WEB_SCENE,Te.WEB_MAP].filter(j=>j>a&&j<=s);let I=null;for(const j of x){const{layers:D,visibleLayers:V,context:W}=this.sublayersSourceJSON[j];D&&(I={layers:D,context:W}),V&&(g={visibleLayers:V,context:W})}const A=Ace(d,y),C=new Map,N=new Set;if(I)for(const j of I.layers)C.set(j.id,j);if(g!=null&&g.visibleLayers)for(const j of g.visibleLayers)N.add(j);return UL(A,j=>{I&&j.read(C.get(j.id),I.context),g&&j.read({defaultVisibility:N.has(j.id)},g.context)}),{origin:Wd(a),sublayers:new Lb({items:A})}}read(i,s){super.read(i,s),this.readSublayers(i,s)}_handleSublayersChange(i,s){s&&(s.forEach(a=>{a.parent=null,a.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(a=>{a.parent=this,a.layer=this}),this.addHandles([i.on("after-add",({item:a})=>{a.parent=this,a.layer=this}),i.on("after-remove",({item:a})=>{a.parent=null,a.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",a=>{Ece.error(new oe("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),a.preventDefault()}),"sublayers-owner"))}};return b([S({readOnly:!0})],e.prototype,"allSublayers",void 0),b([S({readOnly:!0,type:Ge.ofType(t1)})],e.prototype,"serviceSublayers",void 0),b([S({value:null,type:Lb,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"sublayers",void 0),b([S({readOnly:!0})],e.prototype,"sublayersSourceJSON",void 0),e=b([J("esri.layers.mixins.SublayersOwner")],e),e},BL=$r()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let yd=class extends Ii(ye){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return oZ(this.value,this.unit,"milliseconds")}};b([De(BL,{nonNullable:!0})],yd.prototype,"unit",void 0),b([S({type:Number,json:{write:!0},nonNullable:!0})],yd.prototype,"value",void 0),yd=b([J("esri.TimeInterval")],yd);const Km=yd;function g$(t,e){return Km.fromJSON({value:t,unit:e})}let wr=class extends Ii(ye){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(t,e){if(!e.timeExtent||!Array.isArray(e.timeExtent)||e.timeExtent.length!==2)return null;const i=new Date(e.timeExtent[0]),s=new Date(e.timeExtent[1]);return new xo({start:i,end:s})}writeFullTimeExtent(t,e){t&&t.start!=null&&t.end!=null?e.timeExtent=[t.start.getTime(),t.end.getTime()]:e.timeExtent=null}readInterval(t,e){return e.timeInterval&&e.timeIntervalUnits?g$(e.timeInterval,e.timeIntervalUnits):e.defaultTimeInterval&&e.defaultTimeIntervalUnits?g$(e.defaultTimeInterval,e.defaultTimeIntervalUnits):null}writeInterval(t,e){e.timeInterval=(t==null?void 0:t.toJSON().value)??null,e.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};b([S({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],wr.prototype,"cumulative",void 0),b([S({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],wr.prototype,"endField",void 0),b([S({type:xo,json:{write:{enabled:!0,allowNull:!0}}})],wr.prototype,"fullTimeExtent",void 0),b([Ce("fullTimeExtent",["timeExtent"])],wr.prototype,"readFullTimeExtent",null),b([ke("fullTimeExtent")],wr.prototype,"writeFullTimeExtent",null),b([S({type:Boolean,json:{write:!0}})],wr.prototype,"hasLiveData",void 0),b([S({type:Km,json:{write:{enabled:!0,allowNull:!0}}})],wr.prototype,"interval",void 0),b([Ce("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],wr.prototype,"readInterval",null),b([ke("interval")],wr.prototype,"writeInterval",null),b([S({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],wr.prototype,"startField",void 0),b([S({type:cf,json:{write:{enabled:!0,allowNull:!0}}})],wr.prototype,"timeReference",void 0),b([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],wr.prototype,"trackIdField",void 0),b([S({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],wr.prototype,"useTime",void 0),wr=b([J("esri.layers.support.TimeInfo")],wr);const kce=wr,Oce=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const a=s.timeInfo.exportOptions;if(!a)return null;const d=a.timeOffset,y=BL.fromJSON(a.timeOffsetUnits);return d&&y?new Km({value:d,unit:y}):null}set timeInfo(i){$U(i,this.fieldsIndex),this._set("timeInfo",i)}};return b([S({type:xo,json:{write:!1}})],e.prototype,"timeExtent",void 0),b([S({type:Km})],e.prototype,"timeOffset",void 0),b([Ce("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),b([S({value:null,type:kce,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),b([S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=b([J("esri.layers.mixins.TemporalLayer")],e),e},Cce={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Qr=class extends lu(je){constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(e=>{const i=jm(this.floors,e);return e.toExportImageJSON(i)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&tP(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.handles.remove("layer"),t&&this.handles.add([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",e=>this.notifyChange(Cce[e.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){var i;const t=!!((i=this.floors)!=null&&i.length),e=this.visibleSublayers.filter(s=>s.definitionExpression!=null||t&&s.floorInfo!=null);return e.length?JSON.stringify(e.reduce((s,a)=>{const d=jm(this.floors,a),y=K4(d,a.definitionExpression);return y!=null&&(s[a.id]=y),s},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const e=this.layer.sublayers,i=a=>{const d=this.scale,y=d===0,g=a.minScale===0||d<=a.minScale,_=a.maxScale===0||d>=a.maxScale;a.visible&&(y||g&&_)&&(a.sublayers?a.sublayers.forEach(i):t.unshift(a))};e&&e.forEach(i);const s=this._get("visibleSublayers");return!s||s.length!==t.length||s.some((a,d)=>t[d]!==a)?t:s}toJSON(){const t=this.layer;let e={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?e.dynamicLayers=this.dynamicLayers:e={...e,layers:this.layers,layerDefs:this.layerDefs},e}};b([S({readOnly:!0})],Qr.prototype,"dynamicLayers",null),b([S()],Qr.prototype,"floors",void 0),b([S({readOnly:!0})],Qr.prototype,"hasDynamicLayers",null),b([S()],Qr.prototype,"layer",null),b([S({readOnly:!0})],Qr.prototype,"layers",null),b([S({readOnly:!0})],Qr.prototype,"layerDefs",null),b([S({type:Number})],Qr.prototype,"scale",void 0),b([S(Qoe)],Qr.prototype,"timeExtent",void 0),b([S({readOnly:!0})],Qr.prototype,"version",null),b([S({readOnly:!0})],Qr.prototype,"visibleSublayers",null),Qr=b([J("esri.layers.mixins.ExportImageParameters")],Qr);async function Pce(t,e,i){let s;try{s=await createImageBitmap(t)}catch(a){throw new oe("request:server",`Unable to load ${e}`,{url:e,error:a})}return Xt(i),s}async function m$(t,e,i,s,a){let d;try{d=await createImageBitmap(t)}catch(y){throw new oe("request:server",`Unable to load tile ${e}/${i}/${s}`,{error:y,level:e,row:i,col:s})}return Xt(a),d}const yn=[];function Nce(t,e){if(A4(t.url??""))return!0;const{wkid:i}=e;for(const s of yn){if((t.version??0)>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(i))return!1}return!0}yn.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),yn.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),yn.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),yn.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),yn.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),yn.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),yn.push([10.61,()=>new Set([102497])]),yn.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),yn.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),yn.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);let fi=class extends bN(Oce(MN(qL(sN(nN(_N(SN(Gv(TN(eN(wN(lu(G5))))))))))))){constructor(...t){super(...t),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(wn).then(()=>this._fetchService(e))),Promise.resolve(this)}readImageFormat(t,e){const i=e.supportedImageFormatTypes;return i&&i.includes("PNG32")?"png32":"png24"}writeSublayers(t,e,i,s){var x;if(!this.loaded||!t)return;const a=t.slice().reverse().flatten(({sublayers:I})=>I&&I.toArray().reverse()).toArray();let d=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&((x=this.capabilities.exportMap)!=null&&x.supportsDynamicLayers)){const I=Or(s.origin);if(I===Te.PORTAL_ITEM){const A=this.createSublayersForOrigin("service").sublayers;d=J7(a,A,Te.SERVICE)}else if(I>Te.PORTAL_ITEM){const A=this.createSublayersForOrigin("portal-item");d=J7(a,A.sublayers,Or(A.origin))}}const y=[],g={writeSublayerStructure:d,...s};let _=d;a.forEach(I=>{const A=I.write({},g);y.push(A),_=_||I.originOf("visible")==="user"}),y.some(I=>Object.keys(I).length>1)&&(e.layers=y),_&&(e.visibleLayers=a.filter(I=>I.visible).map(I=>I.id))}createExportImageParameters(t,e,i,s){const a=s&&s.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian());const d=new Qr({layer:this,floors:s==null?void 0:s.floors,scale:QC({extent:t,width:e})*a}),y=d.toJSON();d.destroy();const g=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},_=t&&t.spatialReference,x=_.wkid||JSON.stringify(_.toJSON());y.dpi*=a;const I={};if(s!=null&&s.timeExtent){const{start:A,end:C}=s.timeExtent.toJSON();I.time=A&&C&&A===C?""+A:`${A??"null"},${C??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(I.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:x,imageSR:x,size:e+","+i,...y,...g,...I}}async fetchImage(t,e,i,s){const{data:a}=await this._fetchImage("image",t,e,i,s);return a}async fetchImageBitmap(t,e,i,s){const{data:a,url:d}=await this._fetchImage("blob",t,e,i,s);return Pce(a,d,s==null?void 0:s.signal)}async fetchRecomputedExtents(t={}){const e={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:i}=await pt(this.url,e),{extent:s,fullExtent:a,timeExtent:d}=i,y=s||a;return{fullExtent:y&&bt.fromJSON(y),timeExtent:d&&xo.fromJSON({start:d[0],end:d[1]})}}loadAll(){return pv(this,t=>{t(this.allSublayers)})}serviceSupportsSpatialReference(t){return Nce(this,t)}async _fetchImage(t,e,i,s,a){var g,_,x;const d={responseType:t,signal:(a==null?void 0:a.signal)??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,i,s,a),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},y=this.parsedUrl.path+"/export";if(((g=d.query)==null?void 0:g.dynamicLayers)!=null&&!((x=(_=this.capabilities)==null?void 0:_.exportMap)!=null&&x.supportsDynamicLayers))throw new oe("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:d.query});try{const{data:I}=await pt(y,d);return{data:I,url:y}}catch(I){throw or(I)?I:new oe("mapimagelayer:image-fetch-error",`Unable to load image: ${y}`,{error:I})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:e,ssl:i}=await pt(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=e,this.read(e,{origin:"service",url:this.parsedUrl})}};b([S({type:cf})],fi.prototype,"dateFieldsTimeReference",void 0),b([S({type:Boolean})],fi.prototype,"datesInUnknownTimezone",void 0),b([S()],fi.prototype,"dpi",void 0),b([S()],fi.prototype,"gdbVersion",void 0),b([S()],fi.prototype,"imageFormat",void 0),b([Ce("imageFormat",["supportedImageFormatTypes"])],fi.prototype,"readImageFormat",null),b([S({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],fi.prototype,"imageMaxHeight",void 0),b([S({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],fi.prototype,"imageMaxWidth",void 0),b([S()],fi.prototype,"imageTransparency",void 0),b([S({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],fi.prototype,"isReference",void 0),b([S({json:{read:!1,write:!1}})],fi.prototype,"labelsVisible",void 0),b([S({type:["ArcGISMapServiceLayer"]})],fi.prototype,"operationalLayerType",void 0),b([S({json:{read:!1,write:!1}})],fi.prototype,"popupEnabled",void 0),b([S({type:cf})],fi.prototype,"preferredTimeReference",void 0),b([S()],fi.prototype,"sourceJSON",void 0),b([S({json:{write:{ignoreOrigin:!0}}})],fi.prototype,"sublayers",void 0),b([ke("sublayers",{layers:{type:[t1]},visibleLayers:{type:[Pt]}})],fi.prototype,"writeSublayers",null),b([S({type:["show","hide","hide-children"]})],fi.prototype,"listMode",void 0),b([S({json:{read:!1},readOnly:!0,value:"map-image"})],fi.prototype,"type",void 0),b([S(tN)],fi.prototype,"url",void 0),fi=b([J("esri.layers.MapImageLayer")],fi);const HL=fi,Fme=Object.freeze(Object.defineProperty({__proto__:null,default:HL},Symbol.toStringTag,{value:"Module"}));class Lce{constructor(e,i=0,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.minLOD=i,this.maxLOD=s,e.lodAt(i)||(this.minLOD=e.lods[0].level),e.lodAt(s)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,i,s){var d;const a=(d=this.tileInfo)==null?void 0:d.lodAt(e);return!a||e<this.minLOD||e>this.maxLOD?"unavailable":a.cols&&a.rows?s>=a.cols[0]&&s<=a.cols[1]&&i>=a.rows[0]&&i<=a.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,i,s,a){await Cg(a);const d=this.getAvailability(e,i,s);if(d==="unavailable")throw new oe("tile-map:tile-unavailable","Tile is not available",{level:e,row:i,col:s});return d}async fetchAvailabilityUpsample(e,i,s,a,d){await Cg(d),a.level=e,a.row=i,a.col=s;const y=this.tileInfo;return y.updateTileInfo(a),this.fetchAvailability(e,i,s,d).catch(g=>{if(or(g))throw g;if(y.upsampleTile(a))return this.fetchAvailabilityUpsample(a.level,a.row,a.col,a,d);throw g})}}var G_;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(G_||(G_={}));function Rce(t,e=!1){return t<=wR?e?new Array(t).fill(0):new Array(t):new Uint32Array(t)}class Sf{constructor(e){this._validateJSON(e);const{location:i,data:s}=e;this.location=Object.freeze(ae(i));const a=this.location.width,d=this.location.height;let y=!0,g=!0;const _=Math.ceil(a*d/32),x=Rce(_);let I=0;for(let A=0;A<s.length;A++){const C=A%32;s[A]?(g=!1,x[I]|=1<<C):y=!1,C===31&&++I}g?(this._availability="unavailable",this.byteSize=40):y?(this._availability="available",this.byteSize=40):(this._availability=x,this.byteSize=40+vR(x))}getAvailability(e,i){if(this._availability==="unavailable"||this._availability==="available")return this._availability;const s=(e-this.location.top)*this.location.width+(i-this.location.left),a=s%32,d=s>>5,y=this._availability;return d<0||d>y.length?"unknown":y[d]&1<<a?"available":"unavailable"}static fromDefinition(e,i){const s=e.service.request||pt,{row:a,col:d,width:y,height:g}=e,_={query:{f:"json"}};return i=i?{..._,...i}:_,s(jce(e),i).then(x=>x.data).catch(x=>{if(x&&x.details&&x.details.httpStatus===422)return{location:{top:a,left:d,width:y,height:g},valid:!0,data:dR(y*g,0)};throw x}).then(x=>{if(x.location&&(x.location.top!==a||x.location.left!==d||x.location.width!==y||x.location.height!==g))throw new oe("tilemap:location-mismatch","Tilemap response for different location than requested",{response:x,definition:{top:a,left:d,width:y,height:g}});return Sf.fromJSON(x)})}static fromJSON(e){return Object.freeze(new Sf(e))}_validateJSON(e){if(!e||!e.location)throw new oe("tilemap:missing-location","Location missing from tilemap response");if(e.valid===!1)throw new oe("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new oe("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new oe("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new oe("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function v$(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function jce(t){var s;let e;if((s=t.service.tileServers)!=null&&s.length){const a=t.service.tileServers;e=`${a&&a.length?a[t.row%a.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else e=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const i=t.service.query;return i&&(e=`${e}?${i}`),e}var ah;let no=ah=class extends je{constructor(t){super(t),this._pendingTilemapRequests={},this.request=pt,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new BN(2*G_.MEGABYTES),this.addHandles([Me(()=>{const{layer:t}=this;return[t==null?void 0:t.parsedUrl,t==null?void 0:t.tileServers,t==null?void 0:t.apiKey,t==null?void 0:t.customParameters]},()=>this._initializeTilemapDefinition(),vt)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(t,e,i,s){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return Promise.reject(new oe("tilemap-cache:level-unavailable",`Level ${t} is unavailable in the service`));const a=this._tmpTilemapDefinition,d=this._tilemapFromCache(t,e,i,a);if(d)return Promise.resolve(d);const y=s&&s.signal;return s={...s,signal:null},new Promise((g,_)=>{ls(y,()=>_(ni()));const x=v$(a);let I=this._pendingTilemapRequests[x];if(!I){I=Sf.fromDefinition(a,s).then(C=>(this._tilemapCache.put(x,C,C.byteSize),C));const A=()=>delete this._pendingTilemapRequests[x];this._pendingTilemapRequests[x]=I,I.then(A,A)}I.then(g,_)})}getAvailability(t,e,i){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return"unavailable";const s=this._tilemapFromCache(t,e,i,this._tmpTilemapDefinition);return s?s.getAvailability(e,i):"unknown"}fetchAvailability(t,e,i,s){return!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD?Promise.reject(new oe("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i})):this.fetchTilemap(t,e,i,s).catch(a=>a).then(a=>{if(a instanceof Sf){const d=a.getAvailability(e,i);if(d==="unavailable")throw new oe("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i});return d}if(or(a))throw a;return"unknown"})}fetchAvailabilityUpsample(t,e,i,s,a){s.level=t,s.row=e,s.col=i;const d=this.layer.tileInfo;d.updateTileInfo(s);const y=this.fetchAvailability(t,e,i,a).catch(g=>{if(or(g))throw g;if(d.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,a);throw g});return this._fetchAvailabilityUpsamplePrefetch(s.id,t,e,i,a,y),y}async _fetchAvailabilityUpsamplePrefetch(t,e,i,s,a,d){if(!this._prefetchingEnabled||t==null)return;const y=`prefetch-${t}`;if(this.hasHandles(y))return;const g=new AbortController;d.then(()=>g.abort(),()=>g.abort());let _=!1;const x=yo(()=>{_||(_=!0,g.abort())});if(this.addHandles(x,y),await rj(10,g.signal).catch(()=>{}),_||(_=!0,this.removeHandles(y)),Fs(g))return;const I=new ak(t,e,i,s),A={...a,signal:g.signal},C=this.layer.tileInfo;for(let N=0;ah._prefetches.length<ah._maxPrefetch&&C.upsampleTile(I);++N){const j=this.fetchAvailability(I.level,I.row,I.col,A);ah._prefetches.push(j);const D=()=>{ah._prefetches.removeUnordered(j)};j.then(D,D)}}_initializeTilemapDefinition(){var s;if(!this.layer.parsedUrl)return;const{parsedUrl:t,apiKey:e,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:t.path,query:ql({...t.query,...i,token:e??((s=t.query)==null?void 0:s.token)}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(t,e,i,s){s.level=t,s.row=e-e%this.size,s.col=i-i%this.size;const a=v$(s);return this._tilemapCache.get(a)}get test(){const t=this;return{get prefetchingEnabled(){return t._prefetchingEnabled},set prefetchingEnabled(e){t._prefetchingEnabled=e},hasTilemap:(e,i,s)=>!!t._tilemapFromCache(e,i,s,t._tmpTilemapDefinition)}}};no._maxPrefetch=4,no._prefetches=new zl({initialSize:ah._maxPrefetch}),b([S({constructOnly:!0})],no.prototype,"layer",void 0),b([S({constructOnly:!0})],no.prototype,"minLOD",void 0),b([S({constructOnly:!0})],no.prototype,"maxLOD",void 0),b([S({constructOnly:!0})],no.prototype,"request",void 0),b([S({constructOnly:!0})],no.prototype,"size",void 0),no=ah=b([J("esri.layers.support.TilemapCache")],no);const Dce=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){var i,s;(s=(i=this.tilemapCache)==null?void 0:i.destroy)==null||s.call(i)}readMinScale(i,s){return s.minLOD!=null&&s.maxLOD!=null?i:0}readMaxScale(i,s){return s.minLOD!=null&&s.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,s,a){var I;const d=(I=s.capabilities)==null?void 0:I.includes("Tilemap");let{minLOD:y,maxLOD:g,minScale:_,maxScale:x}=s;if(y==null&&g==null&&_!==0&&x!==0){const A=C=>Math.round(1e4*C)/1e4;_=A(_||s.tileInfo.lods[0].scale),x=A(x||s.tileInfo.lods[s.tileInfo.lods.length-1].scale);for(const C of s.tileInfo.lods){const N=A(C.scale);y=N>=_?C.level:y,g=N>=x?C.level:g}}if(d)return new no({layer:this,minLOD:y,maxLOD:g});if(s.tileInfo){const A=new i9;return A.read(s.tileInfo,a),new Lce(A,y,g)}return null}};return b([S({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),b([S()],e.prototype,"minScale",void 0),b([Ce("service","minScale")],e.prototype,"readMinScale",null),b([S()],e.prototype,"maxScale",void 0),b([Ce("service","maxScale")],e.prototype,"readMaxScale",null),b([S({type:Xe})],e.prototype,"spatialReference",void 0),b([S({readOnly:!0})],e.prototype,"supportsBlankTile",null),b([S({type:i9})],e.prototype,"tileInfo",void 0),b([S()],e.prototype,"tilemapCache",void 0),b([Ce("service","tilemapCache",["capabilities","tileInfo"])],e.prototype,"readTilemapCache",null),b([S()],e.prototype,"version",void 0),e=b([J("esri.layers.mixins.ArcGISCachedService")],e),e};var U_;const b$=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let Mi=U_=class extends bN(MN(qL(Dce(sN(_N(SN(nN(Gv(lu(TN(eN(wN(G5))))))))))))){constructor(...t){super(...t),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(wn).then(()=>this._fetchService(e))),Promise.resolve(this)}get attributionDataUrl(){var e;const t=(e=this.parsedUrl)==null?void 0:e.path.toLowerCase();return t?this._getDefaultAttribution(this._getMapName(t)):null}readSpatialReference(t,e){return(t=t||e.tileInfo&&e.tileInfo.spatialReference)&&Xe.fromJSON(t)}writeSublayers(t,e,i,s){if(!this.loaded||!t)return;const a=t.slice().reverse().flatten(({sublayers:g})=>g&&g.toArray().reverse()).toArray(),d=[],y={writeSublayerStructure:!1,...s};a.forEach(g=>{const _=g.write({},y);d.push(_)}),d.some(g=>Object.keys(g).length>1)&&(e.layers=d)}get tileServers(){var t;return this._getDefaultTileServers((t=this.parsedUrl)==null?void 0:t.path)}castTileServers(t){return Array.isArray(t)?t.map(e=>ur(e).path):null}fetchTile(t,e,i,s={}){const{signal:a}=s,d=this.getTileUrl(t,e,i),y={responseType:"image",signal:a,query:{...this.refreshParameters}};return pt(d,y).then(g=>g.data)}async fetchImageBitmapTile(t,e,i,s={}){const{signal:a}=s;if(this.fetchTile!==U_.prototype.fetchTile){const _=await this.fetchTile(t,e,i,s);return m$(_,t,e,i,a)}const d=this.getTileUrl(t,e,i),y={responseType:"blob",signal:a,query:{...this.refreshParameters}},{data:g}=await pt(d,y);return m$(g,t,e,i,a)}getTileUrl(t,e,i){var y,g;const s=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,a=ql({...(y=this.parsedUrl)==null?void 0:y.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),d=this.tileServers;return`${d&&d.length?d[e%d.length]:(g=this.parsedUrl)==null?void 0:g.path}/tile/${t}/${e}/${i}${a?"?"+a:""}`}loadAll(){return pv(this,t=>{t(this.allSublayers)})}_fetchService(t){return new Promise((e,i)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new oe("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void e({data:this.sourceJSON})}if(!this.parsedUrl)throw new oe("tile-layer:undefined-url","layer's url is not defined");const s=Kh(this.parsedUrl.path);if(s!=null&&s.serverType==="ImageServer")throw new oe("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");pt(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e,i)}).then(e=>{let i=this.url;if(e.ssl&&(i=this.url=i.replace(/^http:/i,"https:")),this.sourceJSON=e.data,this.read(e.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!A4(i))return this._fetchServerVersion(i,t).then(s=>{this.read({currentVersion:s})}).catch(()=>{})})}_fetchServerVersion(t,e){if(!NZ(t))return Promise.reject();const i=t.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return pt(i,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(s=>{if(s.data&&s.data.currentVersion)return s.data.currentVersion;throw new oe("tile-layer:version-not-available")})}_getMapName(t){const e=t.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return e?e[2]:void 0}_getDefaultAttribution(t){if(t==null)return null;let e;t=t.toLowerCase();for(let i=0,s=b$.length;i<s;i++)if(e=b$[i],e.toLowerCase().includes(t))return ns("//static.arcgis.com/attribution/"+e);return null}_getDefaultTileServers(t){if(t==null)return[];const e=t.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,i=t.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return e||i?[t,t.replace(e?/server\.arcgisonline/i:/services\.arcgisonline/i,e?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[WL]}};b([S({readOnly:!0})],Mi.prototype,"attributionDataUrl",null),b([S({type:["show","hide","hide-children"]})],Mi.prototype,"listMode",void 0),b([S({json:{read:!0,write:!0}})],Mi.prototype,"blendMode",void 0),b([S({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Mi.prototype,"isReference",void 0),b([S({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],Mi.prototype,"operationalLayerType",void 0),b([S({type:Boolean})],Mi.prototype,"resampling",void 0),b([S()],Mi.prototype,"sourceJSON",void 0),b([S({type:Xe})],Mi.prototype,"spatialReference",void 0),b([Ce("spatialReference",["spatialReference","tileInfo"])],Mi.prototype,"readSpatialReference",null),b([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Mi.prototype,"path",void 0),b([S({readOnly:!0})],Mi.prototype,"sublayers",void 0),b([ke("sublayers",{layers:{type:[t1]}})],Mi.prototype,"writeSublayers",null),b([S({json:{read:!1,write:!1}})],Mi.prototype,"popupEnabled",void 0),b([S()],Mi.prototype,"tileServers",null),b([Ft("tileServers")],Mi.prototype,"castTileServers",null),b([S({readOnly:!0,json:{read:!1}})],Mi.prototype,"type",void 0),b([S(tN)],Mi.prototype,"url",void 0),Mi=U_=b([J("esri.layers.TileLayer")],Mi);const WL=Symbol("default-fetch-tile");Mi.prototype.fetchTile[WL]=!0;const Fce=Mi,zme=Object.freeze(Object.defineProperty({__proto__:null,default:Fce},Symbol.toStringTag,{value:"Module"})),JL="https://gis.servermapcollective.com:6443/arcgis/rest/services/ming/tblcomps202310251652_dynamic/MapServer",zce={url:JL,title:"USA Supply Chain Network",visible:!0},Ym=new HL(zce),KL=()=>[Ym],Vce=1e3,Gce=t=>{Me(()=>t.updating,e=>{})};let ia;const Uce=t=>{const e=document.getElementById("feature-node");t.when(()=>{t.on("click",i=>qce(i,t,e)),ia=new JC,ia.tolerance=3,ia.layerIds=[0],ia.layerOption="top",ia.width=t.width,ia.height=t.height})},YL={1:"Supplier",2:"Consignee",3:"Supplier and Consignee"},qce=(t,e,i)=>{ia.geometry=t.mapPoint,ia.mapExtent=e.extent,jse(JL,ia).then(s=>{console.log("identify is called response.results",s.results.length);const a=s.results;if(a.length==0)return;const d=a[0],{Address:y,lat:g,long:_,type:x,Id:I,routes:A}=d.feature.attributes,C=d.layerName,N=YL[x],j=`<b>ID:</b><br/>${I} <br/> <b>Layer Name:</b><br/>${C} <br/><br/> <b>Company Type :</b><br/> ${N} <br/><br/> <b>Address:</b><br/> ${y}<br/><b>Lat Lng</b>:<br/> ${g},${_}`;i.innerHTML=j,ZL(JSON.parse(A),e)})},ZL=(t,e)=>{console.log("Routes::",t.length);const i=new Set,s=t.map(d=>{const y=[],g=d.split(",");i.add(g[0]+";"+g[1]),i.add(g[2]+";"+g[3]);const _=g[0].split(";"),x=g[2].split(";");y.push([_,x]);var I=new as({paths:y,spatialReference:{wkid:4326}}),A=WC(I,Vce);return new Nr({geometry:A,symbol:Jce(g[1],g[4])})});e.graphics.removeAll(),Ym.sublayers.at(0),Ym.visible=!1;const a=Xce(e,Array.from(i));e.goTo(a).then(()=>{e.graphics.addMany(s)})},Bce=2,XL=1,QL={type:"simple-line",cap:"round",join:"round",marker:{color:"green",placement:"begin",style:"arrow"}},eR={...QL,color:[150,75,0],style:"short-dot",width:Bce},Hce={...QL,color:[4,90,141],width:XL},tR={...eR,marker:{color:"red",placement:"begin-end",style:"arrow"}},Wce={...tR,color:[4,90,141],width:XL},Jce=(t,e)=>{let i;return t==1&&e==1?i=eR:t==1&&e==2?i=Hce:t==2&&e==1?i=tR:i=Wce,i},Kce=t=>{t.ui.add(["clearBtn"],"top-left");var e=document.getElementById("clearBtn");e.addEventListener("click",i=>{t.graphics.length>0&&t.graphics.removeAll(),Ym.visible=!0})},Yce={1:[0,0,255],2:[255,0,0],3:[0,255,0]},Zce={1:[255,255,0],2:[255,0,250],3:[0,250,255]},Xce=(t,e)=>{const i=e.map(d=>{const y=d.split(";"),g={type:"point",longitude:y[0],latitude:y[1],spatialReference:{wkid:4326}},_={type:"simple-marker",color:Yce[y[2]],outline:{color:Zce[y[2]],width:1}};return new Nr({geometry:g,symbol:_})});t.graphics.addMany(i),console.log("aPoints:::",i.length);const a=new Ap({points:i}).extent;return console.log("extent:::",a.xmax),a},Qce=t=>{const e=new Nne({view:t,listItemCreatedFunction:i=>{const s=i.item;s.layer.type!="group"&&(s.panel={content:"legend",open:!1})}});t.ui.add(e,"top-right")},epe=new Vv({layer:KL(),name:"Source Search Layer",placeholder:"Sample Address",getResults:t=>{const e="https://gis.servermapcollective.com:6443/arcgis/rest/services/ming/tblcomps202310251652_new/MapServer/";let i=new rP({layerIds:[0],searchFields:["address","id"],searchText:t.suggestResult.text,returnGeometry:!0});return Goe(e,i).then(function(s){const a=s.results;if(a.length===0){alert("No such Address found");return}else a.forEach(function(d,y){const g=document.getElementById("feature-node"),{Address:_,lat:x,long:I,type:A,Id:C,routes:N}=d.feature.attributes,j=d.layerName,D=YL[A],V=`<b>ID:</b><br/>${C} <br/> <b>Layer Name:</b><br/>${j} <br/><br/> <b>Company Type :</b><br/> ${D} <br/><br/> <b>Address:</b><br/> ${_}<br/><b>Lat Lng</b>:<br/> ${x},${I}`;g.innerHTML=V,ZL(JSON.parse(N),lh)})}),[]}}),tpe=t=>{const e=new Foe({view:t,sources:[epe]});t.ui.add(e,{position:"top-left",index:2})},ipe=!0;console.warn=(t,e)=>{console.log("%c "+t+"  "+e,"color: red; font-weight:bold")};console.warn("The develop mode::",ipe);(async()=>await _e(()=>Promise.resolve({}),["assets/mapfromonline-31fe072e.css"]))();const w$={zoom:2,baseMapID:"hybrid",center:[-80.22591218922629,25.76594796317374]};const rpe=new bI({basemap:"streets-night-vector",layers:KL()}),lh=new Mre({container:"viewDiv",map:rpe,zoom:w$.zoom,center:w$.center,popupEnabled:!0});lh.when(()=>{Qce(lh),Kce(lh),Uce(lh),tpe(lh)});Gce(lh);export{Ap as $,dp as A,vt as B,On as C,zs as D,n5 as E,l0e as F,pt as G,Sn as H,$d as I,me as J,Ue as K,X0e as L,m9 as M,mo as N,_o as O,ide as P,yv as Q,VA as R,au as S,Z0e as T,Zm as U,Ge as V,Ia as W,wn as X,ak as Y,s5 as Z,_e as _,Dn as a,uh as a$,as as a0,QG as a1,G_ as a2,sf as a3,rv as a4,Wl as a5,jz as a6,kde as a7,M1 as a8,uH as a9,e4 as aA,ehe as aB,Yh as aC,dme as aD,EI as aE,ho as aF,dH as aG,spe as aH,En as aI,MA as aJ,bte as aK,vd as aL,um as aM,cm as aN,nf as aO,iq as aP,$pe as aQ,Mde as aR,Ii as aS,Uh as aT,Gb as aU,nT as aV,Z_ as aW,or as aX,ege as aY,_a as aZ,Jl as a_,lH as aa,aH as ab,Ch as ac,eq as ad,M0 as ae,A0e as af,pH as ag,b as ah,S as ai,Ft as aj,Nr as ak,J as al,je as am,mce as an,It as ao,ma as ap,xa as aq,Nh as ar,Qie as as,fe as at,D1 as au,Tfe as av,$Y as aw,lu as ax,Z7 as ay,mH as az,bv as b,In as b$,FE as b0,zE as b1,P6 as b2,Nf as b3,NC as b4,su as b5,Fp as b6,Vl as b7,G5 as b8,Lne as b9,XX as bA,lte as bB,i9 as bC,EO as bD,mG as bE,Zl as bF,Xe as bG,IF as bH,l5 as bI,ds as bJ,ql as bK,Af as bL,Lpe as bM,Qr as bN,yo as bO,nu as bP,fT as bQ,jse as bR,kse as bS,JC as bT,tf as bU,jm as bV,$i as bW,P0e as bX,Yi as bY,Cr as bZ,Kye as b_,rD as ba,Mfe as bb,af as bc,aP as bd,Ns as be,Ld as bf,mQ as bg,A1e as bh,O1e as bi,Ri as bj,jh as bk,vL as bl,Lf as bm,ame as bn,rL as bo,LT as bp,$h as bq,bt as br,_m as bs,ea as bt,Qoe as bu,AO as bv,xp as bw,OQ as bx,D4 as by,RX as bz,kO as c,Zye as c$,mM as c0,uz as c1,O_ as c2,ls as c3,ni as c4,xO as c5,mt as c6,N0e as c7,CO as c8,Gl as c9,Im as cA,sde as cB,Y0e as cC,ade as cD,ZG as cE,XG as cF,z5 as cG,mI as cH,H0e as cI,F5 as cJ,D5 as cK,Lme as cL,Rme as cM,Nme as cN,Xm as cO,Ce as cP,Jge as cQ,Hge as cR,Gr as cS,MO as cT,Ug as cU,wfe as cV,Ui as cW,r6 as cX,gf as cY,_I as cZ,vde as c_,vv as ca,LM as cb,po as cc,jv as cd,Fde as ce,gO as cf,tO as cg,mO as ch,UX as ci,g1e as cj,eQ as ck,ff as cl,m1e as cm,gp as cn,ppe as co,Pn as cp,Gh as cq,mme as cr,gh as cs,GG as ct,rde as cu,EL as cv,$me as cw,c$ as cx,ML as cy,Rn as cz,A5 as d,df as d$,$de as d0,bde as d1,_de as d2,wde as d3,Sde as d4,hs as d5,ae as d6,pm as d7,KZ as d8,Zk as d9,cye as dA,tC as dB,Aye as dC,Fte as dD,xye as dE,Oye as dF,Sye as dG,N$ as dH,L$ as dI,bR as dJ,ID as dK,q0e as dL,RG as dM,lde as dN,W0e as dO,L5 as dP,iI as dQ,DG as dR,lw as dS,tU as dT,BG as dU,B0e as dV,K0e as dW,tfe as dX,Xk as dY,xQ as dZ,lo as d_,Bt as da,eue as db,K4 as dc,ice as dd,upe as de,hpe as df,Nt as dg,f2 as dh,BN as di,vR as dj,YQ as dk,Qle as dl,et as dm,a2 as dn,ghe as dp,OL as dq,zO as dr,fpe as ds,ye as dt,Hl as du,tu as dv,UO as dw,t5 as dx,dye as dy,yye as dz,Zy as e,Cn as e$,Rv as e0,YG as e1,ya as e2,eu as e3,Mv as e4,Q0e as e5,gde as e6,J_ as e7,U5 as e8,Ih as e9,vme as eA,Mue as eB,Ime as eC,R_ as eD,sp as eE,mN as eF,gae as eG,mae as eH,ke as eI,zN as eJ,Zc as eK,EN as eL,sle as eM,Vh as eN,Zd as eO,fa as eP,ot as eQ,kf as eR,xr as eS,uZ as eT,YD as eU,jge as eV,R3 as eW,kd as eX,T3 as eY,rN as eZ,k0e as e_,K1 as ea,KC as eb,VG as ec,fh as ed,Uc as ee,_d as ef,Xi as eg,by as eh,J3 as ei,JZ as ej,hue as ek,ome as el,cue as em,sme as en,ar as eo,ur as ep,Rp as eq,nme as er,Whe as es,Jhe as et,Khe as eu,Fs as ev,PL as ew,CL as ex,_me as ey,HN as ez,kQ as f,DE as f$,NZ as f0,xY as f1,ps as f2,bg as f3,dpe as f4,O4 as f5,Ex as f6,St as f7,nfe as f8,rfe as f9,Ehe as fA,u1e as fB,Kh as fC,Hk as fD,Ahe as fE,vce as fF,Nce as fG,$U as fH,rp as fI,eae as fJ,_ge as fK,VL as fL,jme as fM,Tge as fN,O5 as fO,Sge as fP,tae as fQ,Xoe as fR,lL as fS,yue as fT,wge as fU,kce as fV,Pt as fW,kp as fX,xo as fY,bue as fZ,pL as f_,hfe as fa,Xpe as fb,I8 as fc,iV as fd,Ds as fe,ui as ff,ss as fg,da as fh,que as fi,gI as fj,PT as fk,bN as fl,Oce as fm,MN as fn,TN as fo,nN as fp,_N as fq,SN as fr,Gv as fs,wN as ft,eN as fu,ace as fv,zh as fw,Th as fx,mde as fy,mue as fz,le as g,kR as g$,pa as g0,cf as g1,g0e as g2,m0e as g3,xge as g4,sce as g5,I4 as g6,Ige as g7,Ege as g8,tN as g9,Hde as gA,Qde as gB,HJ as gC,IV as gD,MQ as gE,EQ as gF,$r as gG,sh as gH,_ye as gI,Pte as gJ,gye as gK,gR as gL,Dce as gM,lpe as gN,u0e as gO,LZ as gP,a0e as gQ,R$ as gR,fp as gS,ep as gT,s0e as gU,MD as gV,Tn as gW,dv as gX,Tf as gY,ns as gZ,b0e as g_,h1e as ga,c1e as gb,De as gc,cfe as gd,If as ge,Yye as gf,mW as gg,aL as gh,Lz as gi,p6 as gj,Hg as gk,jae as gl,Dae as gm,xde as gn,Wh as go,ga as gp,V3 as gq,ri as gr,z3 as gs,U3 as gt,gm as gu,FA as gv,Upe as gw,s4 as gx,XS as gy,ude as gz,Y_ as h,Ln as h$,oF as h0,Kge as h1,Wle as h2,ht as h3,_U as h4,DU as h5,Ql as h6,aF as h7,Xde as h8,Tme as h9,zl as hA,cpe as hB,Gee as hC,mpe as hD,RM as hE,Xg as hF,FM as hG,R0e as hH,RV as hI,_V as hJ,k5 as hK,Qg as hL,CM as hM,C0e as hN,BV as hO,mR as hP,wR as hQ,JM as hR,rV as hS,sV as hT,nV as hU,Qz as hV,Xz as hW,vJ as hX,AA as hY,MV as hZ,CJ as h_,Tde as ha,fI as hb,hde as hc,J0e as hd,Mle as he,Dge as hf,J4 as hg,qH as hh,Rk as hi,Db as hj,bme as hk,k$ as hl,Uhe as hm,qhe as hn,Bhe as ho,nde as hp,Mme as hq,lM as hr,eM as hs,fme as ht,AL as hu,xL as hv,oz as hw,dz as hx,gv as hy,x0e as hz,cR as i,Eb as i$,dK as i0,$Q as i1,S0e as i2,d0e as i3,g5 as i4,v5 as i5,DQ as i6,WQ as i7,tV as i8,PJ as i9,Qm as iA,A4 as iB,Xue as iC,Jue as iD,cme as iE,Sme as iF,Wue as iG,Zue as iH,tde as iI,Zoe as iJ,wue as iK,gme as iL,Ede as iM,Ade as iN,Ide as iO,j0e as iP,m4 as iQ,z0e as iR,bd as iS,Uue as iT,Cue as iU,jue as iV,Kue as iW,xme as iX,CW as iY,Qge as iZ,ZR as i_,NV as ia,kA as ib,rJ as ic,y0e as id,bs as ie,hF as ig,tM as ih,iM as ii,cF as ij,Vs as ik,qV as il,HV as im,XV as io,rG as ip,WM as iq,BM as ir,HM as is,iG as it,lG as iu,uG as iv,GV as iw,mv as ix,bge as iy,Qpe as iz,gpe as j,Mge as j$,Ab as j0,yme as j1,Vt as j2,ume as j3,Wee as j4,BH as j5,wme as j6,yL as j7,bpe as j8,EV as j9,Te as jA,w0e as jB,nle as jC,T5 as jD,S5 as jE,Ph as jF,Df as jG,xh as jH,eI as jI,oK as jJ,c5 as jK,xS as jL,G0e as jM,mw as jN,gw as jO,dL as jP,r0e as jQ,wa as jR,HT as jS,m$ as jT,wl as jU,$ge as jV,b8 as jW,SD as jX,UE as jY,XO as jZ,pv as j_,up as ja,ile as jb,mm as jc,Kae as jd,Yae as je,yS as jf,jM as jg,SV as jh,vV as ji,DM as jj,Og as jk,LX as jl,eV as jm,Rle as jn,Hv as jo,Wp as jp,uJ as jq,D0e as jr,ope as js,BD as jt,d5 as ju,uR as jv,im as jw,kr as jx,KP as jy,_oe as jz,qO as k,rme as k$,B_ as k0,H_ as k1,a4 as k2,Ef as k3,SW as k4,Cs as k5,DA as k6,V9 as k7,Xd as k8,Br as k9,of as kA,Or as kB,us as kC,rW as kD,fv as kE,sW as kF,ife as kG,xpe as kH,hR as kI,n4 as kJ,Wde as kK,Bde as kL,Kl as kM,Rx as kN,Bh as kO,ede as kP,ode as kQ,wS as kR,IQ as kS,_X as kT,gX as kU,V5 as kV,n0e as kW,go as kX,KT as kY,i6 as kZ,rae as k_,zf as ka,yU as kb,fU as kc,PG as kd,dS as ke,qi as kf,v0e as kg,Up as kh,Gp as ki,Pce as kj,nhe as kk,rhe as kl,Oj as km,Bp as kn,CN as ko,mle as kp,jN as kq,qN as kr,Wm as ks,IN as kt,Bd as ku,RZ as kv,no as kw,iK as kx,wT as ky,iv as kz,CQ as l,GD as l$,ef as l0,Ta as l1,Pme as l2,Cme as l3,Ome as l4,Ip as l5,P$ as l6,i0e as l7,H6 as l8,iA as l9,Iye as lA,Cye as lB,mye as lC,Bc as lD,Jde as lE,efe as lF,OA as lG,Ihe as lH,h0e as lI,hye as lJ,U0e as lK,Fz as lL,M5 as lM,Age as lN,ype as lO,Oge as lP,kge as lQ,O0e as lR,Wge as lS,_6 as lT,yde as lU,RL as lV,o0e as lW,F0e as lX,_pe as lY,Spe as lZ,wpe as l_,uV as la,L0e as lb,NM as lc,PM as ld,QC as le,p1e as lf,dD as lg,U as lh,f0e as li,Lce as lj,pye as lk,$ye as ll,zie as lm,Tye as ln,Fie as lo,wye as lp,jie as lq,vye as lr,bye as ls,_C as lt,Mye as lu,fye as lv,Jie as lw,Kie as lx,kye as ly,Eye as lz,nv as m,hJ as m0,iJ as m1,sJ as m2,Bm as m3,C$ as m4,Mhe as m5,bL as m6,Q1e as m7,tee as m8,iee as m9,ZQ as ma,zV as mb,kF as mc,Kde as md,Yde as me,LJ as mf,NJ as mg,$m as mh,Zde as mi,WF as mj,Sfe as mk,Jye as ml,Lge as mm,qge as mn,Fme as mo,zme as mp,Li as n,sye as o,li as p,oe as q,Bf as r,Xt as s,ape as t,GE as u,ba as v,rye as w,Kt as x,_h as y,Me as z};
